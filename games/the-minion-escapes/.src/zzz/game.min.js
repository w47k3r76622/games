!function(a){"use strict";if(Number.prototype.map=function(a,b,c,d){return c+(d-c)*((this-a)/(b-a))},Number.prototype.limit=function(a,b){return Math.min(b,Math.max(a,this))},Object.defineProperty(Array.prototype,"erase",{value:function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this}}),Object.defineProperty(Array.prototype,"random",{value:function(){return this[Math.floor(Math.random()*this.length)]}}),a.ig={game:null,debug:null,version:"1.24",global:a,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(a){return"#"==a.charAt(0)?document.getElementById(a.substr(1)):document.getElementsByTagName(a)},$new:function(a){return document.createElement(a)},copy:function(a){if(!a||"object"!=typeof a||a instanceof HTMLElement||a instanceof ig.Class)return a;if(a instanceof Array){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=ig.copy(a[c]);return b}var b={};for(var c in a)b[c]=ig.copy(a[c]);return b},merge:function(a,b){for(var c in b){var d=b[c];"object"!=typeof d||d instanceof HTMLElement||d instanceof ig.Class||null===d?a[c]=d:(a[c]&&"object"==typeof a[c]||(a[c]=d instanceof Array?[]:{}),ig.merge(a[c],d))}return a},setVendorAttribute:function(a,b,c){var d=b.charAt(0).toUpperCase()+b.substr(1);a[b]=a["ms"+d]=a["moz"+d]=a["webkit"+d]=a["o"+d]=c},getVendorAttribute:function(a,b){var c=b.charAt(0).toUpperCase()+b.substr(1);return a[b]||a["ms"+c]||a["moz"+c]||a["webkit"+c]||a["o"+c]},normalizeVendorAttribute:function(a,b){var c=ig.getVendorAttribute(a,b);!a[b]&&c&&(a[b]=c)},getImagePixels:function(a,b,c,d,e){var f=ig.$new("canvas");f.width=a.width,f.height=a.height;var g=f.getContext("2d");ig.System.SCALE.CRISP(f,g);var h=ig.getVendorAttribute(g,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(g,"getImageDataHD");var i=a.width/h,j=a.height/h;return f.width=Math.ceil(i),f.height=Math.ceil(j),g.drawImage(a,0,0,i,j),g.getImageData(b,c,d,e)},module:function(a){return ig._current={name:a,requires:[],loaded:!1,body:null},ig.modules[a]=ig._current,ig._loadQueue.push(ig._current),ig},requires:function(){return ig._current.requires=Array.prototype.slice.call(arguments),ig},defines:function(a){ig._current.body=a,ig._current=null,ig._initDOMReady()},addResource:function(a){ig.resources.push(a)},setNocache:function(a){ig.nocache=a?"?"+Date.now():""},_loadScript:function(a){ig.modules[a]={name:a,requires:[],loaded:!1,body:null},ig._waitForOnload++;var c=ig.prefix+ig.lib+a.replace(/\./g,"/")+".js"+ig.nocache,d=ig.$new("script");d.type="text/javascript",d.src=c,d.onload=function(){ig._waitForOnload--,ig._execModules()},d.onerror=function(){},ig.$("head")[0].appendChild(d)},_execModules:function(){for(var a=!1,b=0;b<ig._loadQueue.length;b++){for(var c=ig._loadQueue[b],d=!0,e=0;e<c.requires.length;e++){var f=c.requires[e];ig.modules[f]?ig.modules[f].loaded||(d=!1):(d=!1,ig._loadScript(f,c.name))}d&&c.body&&(ig._loadQueue.splice(b,1),c.loaded=!0,c.body(),a=!0,b--)}if(a)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length)for(var g=[],b=0;b<ig._loadQueue.length;b++){for(var h=[],i=ig._loadQueue[b].requires,e=0;e<i.length;e++){var c=ig.modules[i[e]];c&&c.loaded||h.push(i[e])}g.push(ig._loadQueue[b].name+" (requires: "+h.join(", ")+")")}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0,ig._waitForOnload--,ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0),ig.ua.pixelRatio=a.devicePixelRatio||1,ig.ua.viewport={width:a.innerWidth,height:a.innerHeight},ig.ua.screen={width:a.screen.availWidth*ig.ua.pixelRatio,height:a.screen.availHeight*ig.ua.pixelRatio}},_initDOMReady:function(){return ig.modules["dom.ready"]?(ig._execModules(),void 0):(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),a.addEventListener("load",ig._DOMReady,!1)),void 0)}},ig.normalizeVendorAttribute(a,"requestAnimationFrame"),a.requestAnimationFrame){var b=1,c={};a.ig.setAnimation=function(d,e){var f=b++;c[f]=!0;var g=function(){c[f]&&(a.requestAnimationFrame(g,e),d())};return a.requestAnimationFrame(g,e),f},a.ig.clearAnimation=function(a){delete c[a]}}else a.ig.setAnimation=function(b){return a.setInterval(b,1e3/60)},a.ig.clearAnimation=function(b){a.clearInterval(b)};var d=!1,e=/var xyz/.test(function(){})?/\bparent\b/:/[\D|\d]*/,f=0;a.ig.Class=function(){};var g=function(a){var b=this.prototype,c={};for(var d in a)"function"==typeof a[d]&&"function"==typeof b[d]&&e.test(a[d])?(c[d]=b[d],b[d]=function(a,b){return function(){var d=this.parent;this.parent=c[a];var e=b.apply(this,arguments);return this.parent=d,e}}(d,a[d])):b[d]=a[d]};a.ig.Class.extend=function(b){function j(){if(!d){if(this.staticInstantiate){var a=this.staticInstantiate.apply(this,arguments);if(a)return a}for(var b in this)"object"==typeof this[b]&&(this[b]=ig.copy(this[b]));this.init&&this.init.apply(this,arguments)}return this}var c=this.prototype;d=!0;var h=new this;d=!1;for(var i in b)h[i]="function"==typeof b[i]&&"function"==typeof c[i]&&e.test(b[i])?function(a,b){return function(){var d=this.parent;this.parent=c[a];var e=b.apply(this,arguments);return this.parent=d,e}}(i,b[i]):b[i];return j.prototype=h,j.prototype.constructor=j,j.extend=a.ig.Class.extend,j.inject=g,j.classId=h.classId=++f,j},a.ig=a.ig}(window),ig.baked=!0,ig.module("impact.image").defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(a){return ig.Image.cache[a]||null},init:function(a){this.path=a,this.load()},load:function(a){return this.loaded?(a&&a(this.path,!0),void 0):(!this.loaded&&ig.ready?(this.loadCallback=a||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),ig.Image.cache[this.path]=this,void 0)},reload:function(){this.loaded=!1,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width,this.height=this.data.height,this.loaded=!0,1!=ig.system.scale&&this.resize(ig.system.scale),this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0,this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(a){var b=ig.getImagePixels(this.data,0,0,this.width,this.height),c=this.width*a,d=this.height*a,e=ig.$new("canvas");e.width=c,e.height=d;for(var f=e.getContext("2d"),g=f.getImageData(0,0,c,d),h=0;d>h;h++)for(var i=0;c>i;i++){var j=4*(Math.floor(h/a)*this.width+Math.floor(i/a)),k=4*(h*c+i);g.data[k]=b.data[j],g.data[k+1]=b.data[j+1],g.data[k+2]=b.data[j+2],g.data[k+3]=b.data[j+3]}f.putImageData(g,0,0),this.data=e},draw:function(a,b,c,d,e,f){if(this.loaded){var g=ig.system.scale;c=c?c*g:0,d=d?d*g:0,e=(e?e:this.width)*g,f=(f?f:this.height)*g,ig.system.context.drawImage(this.data,c,d,e,f,ig.system.getDrawPos(a),ig.system.getDrawPos(b),e,f),ig.Image.drawCount++}},drawTile:function(a,b,c,d,e){if(e=e?e:d,!(!this.loaded||d>this.width||e>this.height)){var f=ig.system.scale,g=Math.floor(d*f),h=Math.floor(e*f),i=1,j=1;ig.system.context.drawImage(this.data,Math.floor(c*d)%this.width*f,Math.floor(c*d/this.width)*e*f,g,h,ig.system.getDrawPos(a)*i,ig.system.getDrawPos(b)*j,g,h),ig.Image.drawCount++}}}),ig.Image.drawCount=0,ig.Image.cache={},ig.Image.reloadCache=function(){for(var a in ig.Image.cache)ig.Image.cache[a].reload()}}),ig.baked=!0,ig.module("impact.font").requires("impact.image").defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,letterSpacing:1,lineSpacing:0,fscale:2,sCharX:0,onload:function(a){this._loadMetrics(this.data),this.parent(a)},widthForString:function(a){if(-1!==a.indexOf("\n")){for(var b=a.split("\n"),c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(a)},_widthForLine:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.widthMap[a.charCodeAt(c)-this.firstChar]+this.letterSpacing;return b},heightForString:function(a){return a.split("\n").length*(this.height+this.lineSpacing)},draw:function(a,b,c,d){if("string"!=typeof a&&(a=a.toString()),-1===a.indexOf("\n")){if(d==ig.Font.ALIGN.RIGHT||d==ig.Font.ALIGN.CENTER){var h=this._widthForLine(a);b-=d==ig.Font.ALIGN.CENTER?h/2:h}for(var g=0;g<a.length;g++){var i=a.charCodeAt(g);0==g&&(this.sCharX=ig.system.getDrawPos(b)),b+=this._drawChar(i-this.firstChar,b,c)}ig.Image.drawCount+=a.length}else for(var e=a.split("\n"),f=this.height+this.lineSpacing,g=0;g<e.length;g++)this.draw(e[g],b,c+g*f,d)},_drawChar:function(a,b,c){if(!this.loaded||0>a||a>=this.indices.length)return 0;var d=ig.system.scale,e=this.indices[a]*d,f=0,g=this.widthMap[a]*d,h=(this.height-2)*d;return ig.system.context.drawImage(this.data,e,f,g,h,this.sCharX+(ig.system.getDrawPos(b)-this.sCharX)*this.fscale,ig.system.getDrawPos(c),g*this.fscale,h*this.fscale),this.widthMap[a]+this.letterSpacing},_loadMetrics:function(a){this.height=a.height-1,this.widthMap=[],this.indices=[];for(var b=ig.getImagePixels(a,0,a.height-1,a.width,1),c=0,d=0,e=0;e<a.width;e++){var f=4*e+3;b.data[f]>127?d++:b.data[f]<128&&d&&(this.widthMap.push(d),this.indices.push(e-d),c++,d=0)}this.widthMap.push(d),this.indices.push(e-d)}}),ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}}),ig.baked=!0,ig.module("impact.loader").requires("impact.image","impact.font").defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(a,b){this.gameClass=a,this.resources=b,this._loadCallbackBound=this._loadCallback.bind(this);for(var c=0;c<this.resources.length;c++)this._unloaded.push(this.resources[c].path)},load:function(){if(ig.system.clear("#000"),!this.resources.length)return this.end(),void 0;for(var a=0;a<this.resources.length;a++)this.loadResource(this.resources[a]);this._intervalId=setInterval(this.draw.bind(this),16)},loadResource:function(a){a.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId),ig.system.setGame(this.gameClass))},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var a=ig.system.scale,b=.6*ig.system.width,c=.1*ig.system.height,d=.5*ig.system.width-b/2,e=.5*ig.system.height-c/2;ig.system.context.fillStyle="#000",ig.system.context.fillRect(0,0,480,320),ig.system.context.fillStyle="#fff",ig.system.context.fillRect(d*a,e*a,b*a,c*a),ig.system.context.fillStyle="#000",ig.system.context.fillRect(d*a+a,e*a+a,b*a-a-a,c*a-a-a),ig.system.context.fillStyle="#fff",ig.system.context.fillRect(d*a,e*a,b*a*this._drawStatus,c*a)},_loadCallback:function(a,b){if(!b)throw"Failed to load resource: "+a;this._unloaded.erase(a),this.status=1-this._unloaded.length/this.resources.length,0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})}),ig.baked=!0,ig.module("impact.timer").defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(a){this.base=ig.Timer.time,this.last=ig.Timer.time,this.target=a||0},set:function(a){this.target=a||0,this.base=ig.Timer.time,this.pausedAt=0},reset:function(){this.base=ig.Timer.time,this.pausedAt=0},tick:function(){var a=ig.Timer.time-this.last;return this.last=ig.Timer.time,this.pausedAt?0:a},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}}),ig.Timer._last=0,ig.Timer.time=Number.MIN_VALUE,ig.Timer.timeScale=1,ig.Timer.maxStep=.05,ig.Timer.step=function(){var a=Date.now(),b=(a-ig.Timer._last)/1e3;ig.Timer.time+=Math.min(b,ig.Timer.maxStep)*ig.Timer.timeScale,ig.Timer._last=a}}),ig.baked=!0,ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(a,b,c,d,e){this.fps=b,this.clock=new ig.Timer,this.canvas=ig.$(a),this.resize(c,d,e),this.context=this.canvas.getContext("2d"),this.getDrawPos=ig.System.drawMode,ig.System.scaleMode(this.canvas,this.context)},resize:function(a,b,c){this.width=a,this.height=b,this.scale=c||this.scale,this.realWidth=this.width*this.scale,this.realHeight=this.height*this.scale,this.canvas.width=this.realWidth,this.canvas.height=this.realHeight},setGame:function(a){this.running?this.newGameClass=a:this.setGameNow(a)},setGameNow:function(a){ig.game=new a,ig.system.setDelegate(ig.game)},setDelegate:function(a){this.delegate=a,this.startRunLoop()},stopRunLoop:function(){ig.clearAnimation(this.animationId),this.running=!1},startRunLoop:function(){this.stopRunLoop(),this.animationId=ig.setAnimation(this.run.bind(this),this.canvas),this.running=!0},clear:function(a){this.context.fillStyle=a,this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step(),this.tick=this.clock.tick(),this.delegate.run(),ig.input.clearPressed(),this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null}),ig.System.DRAW={SMOOTH:function(a){return Math.round(a*this.scale)}},ig.System.drawMode=ig.System.DRAW.SMOOTH,ig.System.SCALE={CRISP:function(a,b){ig.setVendorAttribute(b,"imageSmoothingEnabled",!1),a.style.imageRendering="-moz-crisp-edges",a.style.imageRendering="-o-crisp-edges",a.style.imageRendering="-webkit-optimize-contrast",a.style.imageRendering="crisp-edges",a.style.msInterpolationMode="nearest-neighbor"}},ig.System.scaleMode=ig.System.SCALE.CRISP}),ig.baked=!0,ig.module("impact.input").defines(function(){"use strict";ig.KEY={},ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingKeyboard:!1,initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},keydown:function(a){var b=a.target.tagName;if("INPUT"!=b&&"TEXTAREA"!=b){var c=a.keyCode;0>c&&window.focus();var d=this.bindings[c];d&&(this.actions[d]=!0,this.locks[d]||(this.presses[d]=!0,this.locks[d]=!0),a.preventDefault())}},keyup:function(a){var b=a.target.tagName;if("INPUT"!=b&&"TEXTAREA"!=b){var c=a.keyCode,d=this.bindings[c];d&&(this.delayedKeyup[d]=!0,a.preventDefault())}},bind:function(a,b){a>0&&this.initKeyboard(),this.bindings[a]=b},unbind:function(a){var b=this.bindings[a];this.delayedKeyup[b]=!0,this.bindings[a]=null},unbindAll:function(){this.bindings={},this.actions={},this.presses={},this.locks={},this.delayedKeyup={}},state:function(a){return this.actions[a]},pressed:function(a){return this.presses[a]},released:function(a){return!!this.delayedKeyup[a]},clearPressed:function(){for(var a in this.delayedKeyup)this.actions[a]=!1,this.locks[a]=!1;this.delayedKeyup={},this.presses={}}})}),ig.baked=!0,ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input").defines(function(){"use strict";ig.main=function(a,b,c,d,e,f,g){ig.system=new ig.System(a,c,d,e,f||1),ig.input=new ig.Input,ig.ready=!0;var h=new(g||ig.Loader)(b,ig.resources);h.load()}}),ig.baked=!0,ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(a,b,c){this.width=b,this.height=c,this.image=new ig.Image(a)}}),ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,angle:0,init:function(a,b,c,d){this.sheet=a,this.pivot={x:a.width/2,y:a.height/2},this.timer=new ig.Timer,this.frameTime=b,this.sequence=c,this.stop=!!d,this.tile=this.sequence[0]},rewind:function(){return this.timer.set(),this.loopCount=0,this.frame=0,this.tile=this.sequence[0],this},update:function(){var a=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(a/this.sequence.length),this.frame=this.stop&&this.loopCount>0?this.sequence.length-1:a%this.sequence.length,this.tile=this.sequence[this.frame]},draw:function(a,b){var c=Math.max(this.sheet.width,this.sheet.height);a>ig.system.width||b>ig.system.height||0>a+c||0>b+c||(0==this.angle?this.sheet.image.drawTile(a,b,this.tile,this.sheet.width,this.sheet.height):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(a+this.pivot.x),ig.system.getDrawPos(b+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height),ig.system.context.restore()))}})}),ig.baked=!0,ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,type:0,checkAgainst:0,collides:0,_killed:!1,init:function(a,b,c){this.id=++ig.Entity._lastId,this.pos.x=this.last.x=a,this.pos.y=this.last.y=b,ig.merge(this,c)},reset:function(a,b,c){var d=this.constructor.prototype;this.pos.x=a,this.pos.y=b,this.last.x=a,this.last.y=b,this.vel.x=d.vel.x,this.vel.y=d.vel.y,this.accel.x=d.accel.x,this.accel.y=d.accel.y,this._killed=d._killed,this.standing=d.standing,this.type=d.type,this.checkAgainst=d.checkAgainst,this.collides=d.collides,ig.merge(this,c)},addAnim:function(a,b,c,d){var e=new ig.Animation(this.animSheet,b,c,d);return this.anims[a]=e,this.currentAnim||(this.currentAnim=e),e},update:function(){this.last.x=this.pos.x,this.last.y=this.pos.y,this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor,this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.maxVel.x),this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.maxVel.y);var a=this.vel.x*ig.system.tick,b=this.vel.y*ig.system.tick,c=ig.game.collisionMap.trace(this.pos.x,this.pos.y,a,b,this.size.x,this.size.y);this.handleMovementTrace(c),this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(a,b,c){return b?(a+b*ig.system.tick).limit(-c,c):a.limit(-c,c)},handleMovementTrace:function(a){this.standing=!1,a.collision.y&&(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(this.vel.y>0&&(this.standing=!0),this.vel.y=0)),a.collision.x&&(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*=-this.bounciness:this.vel.x=0),this.pos=a.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},touches:function(a){return!(this.pos.x>=a.pos.x+a.size.x||this.pos.x+this.size.x<=a.pos.x||this.pos.y>=a.pos.y+a.size.y||this.pos.y+this.size.y<=a.pos.y)},distanceTo:function(a){var b=this.pos.x+this.size.x/2-(a.pos.x+a.size.x/2),c=this.pos.y+this.size.y/2-(a.pos.y+a.size.y/2);return Math.sqrt(b*b+c*c)},angleTo:function(a){return Math.atan2(a.pos.y+a.size.y/2-(this.pos.y+this.size.y/2),a.pos.x+a.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}}),ig.Entity._lastId=0,ig.Entity.COLLIDES={NEVER:0,ACTIVE:4,FIXED:8},ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3},ig.Entity.checkPair=function(a,b){a.checkAgainst&b.type&&a.check(b),b.checkAgainst&a.type&&b.check(a),a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE&&ig.Entity.solveCollision(a,b)},ig.Entity.solveCollision=function(a,b){a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x?(a.last.y<b.last.y?ig.Entity.seperateOnYAxis(a,b):ig.Entity.seperateOnYAxis(b,a),a.collideWith(b,"y"),b.collideWith(a,"y")):a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y&&(a.last.x<b.last.x?ig.Entity.seperateOnXAxis(a,b):ig.Entity.seperateOnXAxis(b,a),a.collideWith(b,"x"),b.collideWith(a,"x"))},ig.Entity.seperateOnXAxis=function(a,b){var c=a.pos.x+a.size.x-b.pos.x,d=(a.vel.x-b.vel.x)/2;a.vel.x=-d,b.vel.x=d;var e=ig.game.collisionMap.trace(a.pos.x,a.pos.y,-c/2,0,a.size.x,a.size.y);a.pos.x=Math.floor(e.pos.x);var f=ig.game.collisionMap.trace(b.pos.x,b.pos.y,c/2,0,b.size.x,b.size.y);b.pos.x=Math.ceil(f.pos.x)},ig.Entity.seperateOnYAxis=function(a,b){var c=a.pos.y+a.size.y-b.pos.y;if(ig.game.gravity&&(b.standing||a.vel.y>0)){var d=ig.game.collisionMap.trace(a.pos.x,a.pos.y,0,-(a.pos.y+a.size.y-b.pos.y),a.size.x,a.size.y);a.pos.y=d.pos.y,a.bounciness>0&&a.vel.y>a.minBounceVelocity?a.vel.y*=-a.bounciness:(a.standing=!0,a.vel.y=0)}else{var e=(a.vel.y-b.vel.y)/2;a.vel.y=-e,b.vel.y=e;var f=b.vel.x*ig.system.tick,d=ig.game.collisionMap.trace(a.pos.x,a.pos.y,f,-c/2,a.size.x,a.size.y);a.pos.y=d.pos.y;var g=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,c/2,b.size.x,b.size.y);b.pos.y=g.pos.y}}}),ig.baked=!0,ig.module("impact.map").defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(a,b){this.tilesize=a,this.data=b,this.height=b.length,this.width=b[0].length,this.pxWidth=this.width*this.tilesize,this.pxHeight=this.height*this.tilesize},getTile:function(a,b){var c=Math.floor(a/this.tilesize),d=Math.floor(b/this.tilesize);return c>=0&&c<this.width&&d>=0&&d<this.height?this.data[d][c]:0},setTile:function(a,b,c){var d=Math.floor(a/this.tilesize),e=Math.floor(b/this.tilesize);d>=0&&d<this.width&&e>=0&&e<this.height&&(this.data[e][d]=c)}})}),ig.baked=!0,ig.module("impact.collision-map").requires("impact.map").defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,init:function(a,b){this.parent(a,b)},trace:function(a,b,c,d,e,f){var g={collision:{x:!1,y:!1},pos:{x:a,y:b},tile:{x:0,y:0}},h=Math.ceil(Math.max(Math.abs(c),Math.abs(d))/this.tilesize);if(h>1)for(var i=c/h,j=d/h,k=0;h>k&&(i||j);k++)this._traceStep(g,a,b,i,j,e,f,c,d,k),a=g.pos.x,b=g.pos.y,g.collision.x&&(i=0,c=0),g.collision.y&&(j=0,d=0);else this._traceStep(g,a,b,c,d,e,f,c,d,0);return g},_traceStep:function(a,b,c,d,e,f,g,h){a.pos.x+=d,a.pos.y+=e;var k=0;if(d){var l=d>0?f:0,m=0>d?this.tilesize:0,n=Math.max(Math.floor(c/this.tilesize),0),o=Math.min(Math.ceil((c+g)/this.tilesize),this.height),p=Math.floor((a.pos.x+l)/this.tilesize);if(p>=0&&p<this.width)for(var q=n;o>q;q++)if(k=this.data[q][p],1==k||k>this.lastSlope){a.collision.x=!0,a.tile.x=k,b=a.pos.x=p*this.tilesize-l+m,h=0;break}}if(e){var r=e>0?g:0,s=0>e?this.tilesize:0,t=Math.max(Math.floor(a.pos.x/this.tilesize),0),u=Math.min(Math.ceil((a.pos.x+f)/this.tilesize),this.width),q=Math.floor((a.pos.y+r)/this.tilesize);if(q>=0&&q<this.height)for(var p=t;u>p;p++)if(k=this.data[q][p],1==k||k>this.lastSlope){a.collision.y=!0,a.tile.y=k,a.pos.y=q*this.tilesize-r+s;break}}}})}),ig.baked=!0,ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(a,b,c){this.parent(a,b),this.setTileset(c)},setTileset:function(a){this.tilesetName=a instanceof ig.Image?a.path:a,this.tiles=new ig.Image(this.tilesetName),this.preRenderedChunks=null},setScreenPos:function(a,b){this.scroll.x=a/this.distance,this.scroll.y=b/this.distance},preRenderMapToChunks:function(){var a=this.width*this.tilesize*ig.system.scale,b=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(a,b),this.chunkSize);var c=Math.ceil(a/this.chunkSize),d=Math.ceil(b/this.chunkSize);this.preRenderedChunks=[];for(var e=0;d>e;e++){this.preRenderedChunks[e]=[];for(var f=0;c>f;f++){var g=f==c-1?a-f*this.chunkSize:this.chunkSize,h=e==d-1?b-e*this.chunkSize:this.chunkSize;this.preRenderedChunks[e][f]=this.preRenderChunk(f,e,g,h)}}},preRenderChunk:function(a,b,c,d){var e=c/this.tilesize/ig.system.scale+1,f=d/this.tilesize/ig.system.scale+1,g=a*this.chunkSize/ig.system.scale%this.tilesize,h=b*this.chunkSize/ig.system.scale%this.tilesize,i=Math.floor(a*this.chunkSize/this.tilesize/ig.system.scale),j=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale),k=ig.$new("canvas");k.width=c,k.height=d,k.retinaResolutionEnabled=!1;var l=k.getContext("2d");ig.System.scaleMode(k,l);var m=ig.system.context;ig.system.context=l;for(var n=0;e>n;n++)for(var o=0;f>o;o++)if(n+i<this.width&&o+j<this.height){var p=this.data[o+j][n+i];p&&this.tiles.drawTile(n*this.tilesize-g,o*this.tilesize-h,p-1,this.tilesize)}return ig.system.context=m,k},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var a=ig.system.getDrawPos(this.scroll.x),b=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var c=this.width*this.tilesize*ig.system.scale;a=(a%c+c)%c;var d=this.height*this.tilesize*ig.system.scale;b=(b%d+d)%d}var e=Math.max(Math.floor(a/this.chunkSize),0),f=Math.max(Math.floor(b/this.chunkSize),0),g=Math.ceil((a+ig.system.realWidth)/this.chunkSize),h=Math.ceil((b+ig.system.realHeight)/this.chunkSize),i=this.preRenderedChunks[0].length,j=this.preRenderedChunks.length;this.repeat||(g=Math.min(g,i),h=Math.min(h,j));for(var k=0,l=f;h>l;l++){for(var m=0,n=e;g>n;n++){var o=this.preRenderedChunks[l%j][n%i],p=-a+n*this.chunkSize-m,q=-b+l*this.chunkSize-k;ig.system.context.drawImage(o,p,q),ig.Image.drawCount++,this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(p,q,this.chunkSize,this.chunkSize)),this.repeat&&o.width<this.chunkSize&&p+o.width<ig.system.realWidth&&(m+=this.chunkSize-o.width,g++)}this.repeat&&o.height<this.chunkSize&&q+o.height<ig.system.realHeight&&(k+=this.chunkSize-o.height,h++)}},drawTiled:function(){for(var a=0,b=null,c=parseInt(this.scroll.x/this.tilesize,10),d=parseInt(this.scroll.y/this.tilesize,10),e=this.scroll.x%this.tilesize,f=this.scroll.y%this.tilesize,g=-e-this.tilesize,h=-f-this.tilesize,i=ig.system.width+this.tilesize-e,j=ig.system.height+this.tilesize-f,k=-1,l=h;j>l;k++,l+=this.tilesize){var m=k+d;if(m>=this.height||0>m){if(!this.repeat)continue;m=(m%this.height+this.height)%this.height}for(var n=-1,o=g;i>o;n++,o+=this.tilesize){var p=n+c;if(p>=this.width||0>p){if(!this.repeat)continue;p=(p%this.width+this.width)%this.width}(a=this.data[m][p])&&((b=this.anims[a-1])?b.draw(o,l):this.tiles.drawTile(o,l,a-1,this.tilesize))}}}})}),ig.baked=!0,ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:[],backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_doSortEntities:!1,staticInstantiate:function(){return this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX,ig.game=this,null},spawnEntity:function(a,b,c,d){var e="string"==typeof a?ig.global[a]:a,f=new e(b,c,d||{});return this.entities.push(f),f.name&&(this.namedEntities[f.name]=f),f},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(a){a.name&&delete this.namedEntities[a.name],a._killed=!0,a.type=ig.Entity.TYPE.NONE,a.checkAgainst=ig.Entity.TYPE.NONE,a.collides=ig.Entity.COLLIDES.NEVER,this._deferredKill.push(a)},run:function(){this.update(),this.draw()},update:function(){this.updateEntities(),this.checkEntities();for(var a=0;a<this._deferredKill.length;a++)this._deferredKill[a].erase(),this.entities.erase(this._deferredKill[a]);this._deferredKill=[],(this._doSortEntities||this.autoSort)&&(this.sortEntities(),this._doSortEntities=!1);for(var b in this.backgroundAnims){var c=this.backgroundAnims[b];for(var d in c)c[d].update()}},updateEntities:function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];b._killed||b.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor),this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale,this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var a;for(a=0;a<this.backgroundMaps.length;a++){var b=this.backgroundMaps[a];if(b.foreground)break;b.setScreenPos(this.screen.x,this.screen.y),b.draw()}for(this.drawEntities(),a=0;a<this.backgroundMaps.length;a++){var b=this.backgroundMaps[a];b.setScreenPos(this.screen.x,this.screen.y),b.draw()}},drawEntities:function(){for(var a=0;a<this.entities.length;a++)this.entities[a].draw()},checkEntities:function(){for(var a={},b=0;b<this.entities.length;b++){var c=this.entities[b];if(c.type!=ig.Entity.TYPE.NONE||c.checkAgainst!=ig.Entity.TYPE.NONE||c.collides!=ig.Entity.COLLIDES.NEVER)for(var d={},e=Math.floor(c.pos.x/this.cellSize),f=Math.floor(c.pos.y/this.cellSize),g=Math.floor((c.pos.x+c.size.x)/this.cellSize)+1,h=Math.floor((c.pos.y+c.size.y)/this.cellSize)+1,i=e;g>i;i++)for(var j=f;h>j;j++)if(a[i])if(a[i][j]){for(var k=a[i][j],l=0;l<k.length;l++)c.touches(k[l])&&!d[k[l].id]&&(d[k[l].id]=!0,ig.Entity.checkPair(c,k[l]));k.push(c)}else a[i][j]=[c];else a[i]={},a[i][j]=[c]}}}),ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex},POS_X:function(a,b){return a.pos.x+a.size.x-(b.pos.x+b.size.x)},POS_Y:function(a,b){return a.pos.y+a.size.y-(b.pos.y+b.size.y)}}}),ig.baked=!0,ig.module("game.entities.player").requires("impact.entity").defines(function(){EntityPlayer=ig.Entity.extend({size:{x:10,y:15},offset:{x:3,y:0},animSheet:new ig.AnimationSheet("media/player.png",16,16),maxVel:{x:100,y:100},bounciness:.3,type:ig.Entity.TYPE.A,force:120,angleto:-1.1,cangle:0,dangle:0,rangle:0,dinc:9,gamestart:!1,timershake:null,timersmoke:null,init:function(a,b,c){this.addAnim("idle",.08,[0,1]),this.addAnim("flyleft",.08,[2,3]),this.addAnim("flyright",.08,[4,5]),this.addAnim("empty",1,[10],!0),this.currentAnim=this.anims.idle,this.parent(a,b,c)},update:function(){if(this.parent(),this.gamestart||(this.currentAnim==this.anims.empty&&ig.input.pressed("space")?(this.pos.x=160,this.pos.y=32*ig.game.cmap.length-32,this.vel.y=0,this.vel.x=0,this.accel.y=0,this.accel.x=0,ig.game.score>ig.game.hiscore&&(ig.game.hiscore=ig.game.score),ig.game.score=0,this.currentAnim=this.anims.idle):ig.input.pressed("space")&&(this.timersmoke=new ig.Timer(.3),this.gamestart=!0)),this.gamestart){ig.input.pressed("space")&&(this.angleto=-this.angleto,this.currentAnim=this.angleto>0?this.anims.flyright:this.anims.flyleft);var a=Math.random()-.5;this.dangle=((this.cangle-(this.angleto+a))/this.dinc).toFixed(3),this.cangle=Number(this.cangle-this.dangle);var b=Math.sin(this.cangle)*this.force,c=Math.cos(this.cangle)*this.force;this.accel.x=b,this.accel.y=-c,this.currentAnim.angle=this.cangle,this.timersmoke&&this.timersmoke.delta()>0&&(this.timersmoke.reset(),ig.game.spawnEntity(EntitySmoke,this.pos.x+1,this.pos.y+8))}var d=0,e=0;this.timershake&&this.timershake.delta()<0?(d=Math.floor(10*Math.random())-4,e=Math.floor(10*Math.random())-4):this.timershake=null;var f=this.pos.x+d+this.size.x/2-ig.system.width/2,g=this.pos.y+e+this.size.y-ig.system.height+16;0>f&&(f=0),f>77&&(f=77),ig.game.screen.x=f,ig.game.screen.y=g},handleMovementTrace:function(a){this.parent(a),this.gamestart&&(a.collision.y||a.collision.x)&&(ig.game.spawnEntity(EntityPlayerDeath,this.pos.x+1,this.pos.y+4),this.currentAnim=this.anims.empty,this.anims.empty.rewind(),this.vel.y=0,this.vel.x=0,this.accel.y=0,this.accel.x=0,this.gamestart=!1,this.timershake=new ig.Timer(.4))},draw:function(){this.parent()}}),EntityPlayerDeath=ig.Entity.extend({size:{x:6,y:6},offset:{x:5,y:6},animSheet:new ig.AnimationSheet("media/player.png",16,16),type:ig.Entity.TYPE.A,maxVel:{x:100,y:100},bounciness:.5,anglerot:0,dangle:0,cangle:0,init:function(a,b,c){this.addAnim("die",.16,[6,7,8,9],!0),this.anglerot=(Math.random()-.5)/20,this.parent(a,b,c)
},handleMovementTrace:function(a){this.parent(a),a.collision.y||a.collision.x},update:function(){this.parent(),this.dangle=this.vel.y*this.anglerot,this.cangle=Number(this.cangle-this.dangle),this.currentAnim.angle=this.cangle}}),EntitySmoke=ig.Entity.extend({size:{x:16,y:16},offset:{x:0,y:0},animSheet:new ig.AnimationSheet("media/player.png",16,16),type:ig.Entity.TYPE.NONE,maxVel:{x:100,y:100},bounciness:0,gravityFactor:0,timerdeath:null,init:function(a,b,c){this.addAnim("smoke",.32,[11,12,13],!0),this.timerdeath=new ig.Timer(1.5),this.vel.y=-28,this.parent(a,b,c)},update:function(){this.parent(),this.timerdeath.delta()>0&&this.kill()}})}),ig.baked=!0,ig.module("game.main").requires("impact.game","impact.font","game.entities.player").defines(function(){MyGame=ig.Game.extend({gravity:50,map:[],cmap:[],score:0,hiscore:0,newhiscore:!1,tiles:new ig.Image("media/tiles.png"),fontscore:new ig.Font("media/04b03.font.png"),fontstatus:new ig.Font("media/04b03.font.png"),player:null,init:function(){ig.input.bind(32,"space"),ig.game.clearColor="#e5ddac",this.fontscore.fscale=4,this.map=[[4,4,4,4,4,4,4,4,4,4,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[1,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[3,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,4,4,4,4,4,4,4],[5,0,0,0,0,0,0,0,0,0,4],[6,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[1,3,1,4,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[3,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,4,3,4,2,4,4,4],[5,0,0,0,0,0,0,0,0,0,4],[6,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[1,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[4,0,0,1,2,2,2,2,1,2,4],[4,0,0,0,0,0,0,0,0,0,4],[1,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[3,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[5,4,4,4,3,0,0,0,0,0,4],[6,4,1,4,2,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[1,0,0,0,0,0,0,4,4,1,4],[2,0,0,0,0,0,0,4,4,4,4],[3,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[5,0,0,0,0,0,0,0,0,0,4],[6,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[4,2,2,2,2,2,1,0,0,0,4],[1,2,2,5,4,4,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[3,0,0,0,0,0,0,0,0,0,4],[4,0,0,0,0,0,0,0,0,0,4],[5,0,0,0,0,0,0,0,0,0,4],[6,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,4,4,2,2,2,4],[4,0,0,0,0,4,3,2,2,2,4],[4,0,0,0,0,0,0,0,0,0,4],[1,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,0,4],[3,0,0,0,0,0,0,0,0,0,3],[4,0,0,0,0,0,0,0,0,0,8],[5,1,2,3,2,6,0,0,0,0,4],[4,3,3,2,1,0,0,0,0,0,4],[3,0,0,0,0,0,0,0,0,0,4],[2,0,0,0,0,0,0,0,0,1,4],[4,0,0,0,0,0,0,0,0,4,4],[4,0,0,0,0,0,0,0,2,4,4],[1,0,0,0,0,0,0,8,2,1,4],[2,0,0,0,0,0,0,4,4,4,4],[3,0,0,0,0,0,0,3,4,4,4],[4,0,0,0,0,0,0,0,1,4,4],[5,0,0,0,0,0,0,0,2,3,4],[4,0,0,0,0,0,0,0,3,5,4],[2,0,0,0,0,0,0,0,0,1,4],[4,0,0,0,0,0,0,0,0,1,4],[4,3,0,0,0,0,0,0,0,4,4],[4,2,0,0,0,0,0,0,0,4,4],[1,1,0,0,0,0,0,0,0,1,4],[2,1,0,0,0,0,0,0,0,4,4],[3,3,0,0,0,0,0,0,0,4,4],[4,2,0,0,0,0,0,0,0,4,4],[5,3,0,0,0,0,0,0,0,8,4],[3,4,0,0,0,0,0,0,0,5,4],[2,4,0,0,0,0,0,0,0,1,4],[4,4,2,4,5,3,4,4,3,4,4]],this.cmap=[[1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,0,1],[1,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,1,1,1,1,1,1],[1,0,0,0,0,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1]],this.collisionMap=new ig.CollisionMap(32,this.cmap),this.backgroundMaps.push(new ig.BackgroundMap(32,this.map,"media/tiles.png")),this.player=this.spawnEntity(EntityPlayer,160,32*this.cmap.length-32)},update:function(){this.parent()},draw:function(){this.parent();var a=Math.floor((32*this.cmap.length-32-15-this.player.pos.y)/8);this.score=a>this.score?a:this.score,this.fontscore.draw(this.score+"m",5,5,ig.Font.ALIGN.LEFT),this.fontscore.fscale=2,this.fontstatus.draw("hiscore:"+this.hiscore+"m",220,12,ig.Font.ALIGN.RIGHT),this.fontscore.fscale=4}}),ScreenStart=ig.Game.extend({fontinstruct:new ig.Font("media/04b03.font.png"),background:new ig.Image("media/screenstart.png"),init:function(){ig.input.bind(32,"start"),this.fontinstruct.fscale=1},update:function(){ig.input.pressed("start")&&ig.system.setGame(MyGame),this.parent()},draw:function(){this.parent(),this.background.draw(0,0);var a=ig.system.width/2,b=ig.system.height-10;this.fontinstruct.fscale=3,this.fontinstruct.draw("The Minion Escapes",60,b-230,ig.Font.ALIGN.CENTER),this.fontinstruct.fscale=1,this.fontinstruct.draw("Instructions:",a+10,b-120,ig.Font.ALIGN.LEFT),this.fontinstruct.draw("Keep Pressing the spacebar",a+10,b-110,ig.Font.ALIGN.LEFT),this.fontinstruct.draw("Credits:",a+10,b-50,ig.Font.ALIGN.LEFT),this.fontinstruct.draw("Sound by as3fxr",a+10,b-40,ig.Font.ALIGN.LEFT),this.fontinstruct.draw("Design Graphics Code by Louai",a+10,b-30,ig.Font.ALIGN.LEFT),this.fontinstruct.draw("Press Spacebar to Start",a,b,ig.Font.ALIGN.CENTER)}}),ig.main("#canvas",ScreenStart,60,275,275,2,ig.Loader)});