!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var o,a,i;a=[e],void 0===(i="function"==typeof(o=function(t){var e=440*Math.pow(Math.pow(2,1/12),-9),n=/^[0-9.]+$/,o=/\s+/,a=/(\d+)/,i={};function r(t){var e=t.split(o);this.frequency=r.getFrequency(e[0])||0,this.duration=r.getDuration(e[1])||0}function s(t,e,n){this.ac=t||new AudioContext,this.createFxNodes(),this.tempo=e||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,n||[])}"B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb".split("|").forEach(function(t,e){t.split("-").forEach(function(t){i[t]=e})}),r.getFrequency=function(t){var n=t.split(a),o=i[n[0]],r=(n[1]||4)-4,s=e*Math.pow(Math.pow(2,1/12),o);return s*Math.pow(2,r)},r.getDuration=function(t){return n.test(t)?parseFloat(t):t.toLowerCase().split("").reduce(function(t,e){return t+("w"===e?4:"h"===e?2:"q"===e?1:"e"===e?.5:"s"===e?.25:0)},0)},s.prototype.createFxNodes=function(){var t=this.gain=this.ac.createGain();return[["bass",100],["mid",1e3],["treble",2500]].forEach(function(e,n){(n=this[e[0]]=this.ac.createBiquadFilter()).type="peaking",n.frequency.value=e[1],t.connect(t=n)}.bind(this)),t.connect(this.ac.destination),this},s.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(t){this.notes.push(t instanceof r?t:new r(t))}.bind(this)),this},s.prototype.createCustomWave=function(t,e){e||(e=t),this.waveType="custom",this.customWave=[new Float32Array(t),new Float32Array(e)]},s.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},s.prototype.scheduleNote=function(t,e){var n=60/this.tempo*this.notes[t].duration,o=n*(1-(this.staccato||0));return this.setFrequency(this.notes[t].frequency,e),this.smoothing&&this.notes[t].frequency&&this.slide(t,e,o),this.setFrequency(0,e+o),e+n},s.prototype.getNextNote=function(t){return this.notes[t<this.notes.length-1?t+1:0]},s.prototype.getSlideStartDelay=function(t){return t-Math.min(t,60/this.tempo*this.smoothing)},s.prototype.slide=function(t,e,n){var o=this.getNextNote(t),a=this.getSlideStartDelay(n);return this.setFrequency(this.notes[t].frequency,e+a),this.rampFrequency(o.frequency,e+n),this},s.prototype.setFrequency=function(t,e){return this.osc.frequency.setValueAtTime(t,e),this},s.prototype.rampFrequency=function(t,e){return this.osc.frequency.linearRampToValueAtTime(t,e),this},s.prototype.play=function(t){return t="number"==typeof t?t:this.ac.currentTime,this.createOscillator(),this.osc.start(t),this.notes.forEach(function(e,n){t=this.scheduleNote(n,t)}.bind(this)),this.osc.stop(t),this.osc.onended=this.loop?this.play.bind(this,t):null,this},s.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this},t.Note=r,t.Sequence=s})?o.apply(e,a):o)||(t.exports=i)},function(t,e){kontra.init(),canvas=kontra.canvas,context=kontra.context,canvas.width=500,canvas.height=750,kontra.width=canvas.width/5,kontra.height=canvas.height/5,context.mozImageSmoothingEnabled=!1,context.imageSmoothingEnabled=!1,context.scale(5,5),kontra.getImage=function(t){const e=new Image;return e.src=t,e},kontra.clear=function(){context.clearRect(0,0,kontra.width,kontra.height)},kontra.gameLoopEmpty=function(){return kontra.gameLoop({clearCanvas:!1,update(t){},render(){}})},kontra.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t}},function(t,e){!function(){var t=t={A:[[,1],[1,,1],[1,,1],[1,1,1],[1,,1]],B:[[1,1],[1,,1],[1,1,1],[1,,1],[1,1]],C:[[1,1,1],[1],[1],[1],[1,1,1]],D:[[1,1],[1,,1],[1,,1],[1,,1],[1,1]],E:[[1,1,1],[1],[1,1,1],[1],[1,1,1]],F:[[1,1,1],[1],[1,1],[1],[1]],G:[[,1,1],[1],[1,,1,1],[1,,,1],[,1,1]],H:[[1,,1],[1,,1],[1,1,1],[1,,1],[1,,1]],I:[[1,1,1],[,1],[,1],[,1],[1,1,1]],J:[[1,1,1],[,,1],[,,1],[1,,1],[1,1,1]],K:[[1,,,1],[1,,1],[1,1],[1,,1],[1,,,1]],L:[[1],[1],[1],[1],[1,1,1]],M:[[1,1,1,1,1],[1,,1,,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,1],[1,1,,1],[1,,1,1],[1,,,1],[1,,,1]],O:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],P:[[1,1,1],[1,,1],[1,1,1],[1],[1]],Q:[[0,1,1],[1,,,1],[1,,,1],[1,,1,1],[1,1,1,1]],R:[[1,1],[1,,1],[1,,1],[1,1],[1,,1]],S:[[1,1,1],[1],[1,1,1],[,,1],[1,1,1]],T:[[1,1,1],[,1],[,1],[,1],[,1]],U:[[1,,1],[1,,1],[1,,1],[1,,1],[1,1,1]],V:[[1,,,,1],[1,,,,1],[,1,,1],[,1,,1],[,,1]],W:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,1,1,1]],X:[[1,,,,1],[,1,,1],[,,1],[,1,,1],[1,,,,1]],Y:[[1,,1],[1,,1],[,1],[,1],[,1]],Z:[[1,1,1,1,1],[,,,1],[,,1],[,1],[1,1,1,1,1]],0:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],1:[[,1],[,1],[,1],[,1],[,1]],2:[[1,1,1],[0,0,1],[1,1,1],[1,0,0],[1,1,1]],3:[[1,1,1],[0,0,1],[1,1,1],[0,0,1],[1,1,1]],4:[[1,0,1],[1,0,1],[1,1,1],[0,0,1],[0,0,1]],5:[[1,1,1],[1,0,0],[1,1,1],[0,0,1],[1,1,1]],6:[[1,1,1],[1,0,0],[1,1,1],[1,0,1],[1,1,1]],7:[[1,1,1],[0,0,1],[0,0,1],[0,0,1],[0,0,1]],8:[[1,1,1],[1,0,1],[1,1,1],[1,0,1],[1,1,1]],9:[[1,1,1],[1,0,1],[1,1,1],[0,0,1],[1,1,1]],"|":[[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1]],"-":[[0,0,0],[0,0,0],[1,1,1],[0,0,0],[0,0,0]],"+":[[0,1,0],[0,1,0],[1,1,1],[0,1,0],[0,1,0]],"/":[[0,0,0,1,0,0],[0,0,1,0,1,0],[0,1,0,0,0,1],[1,0,0,0,1,0],[0,1,0,1,0,0],[0,0,1,0,0,0]],"\\":[[0,0,1,0,0,0],[0,1,0,1,0,0],[1,0,0,0,1,0],[0,1,0,0,0,1],[0,0,1,0,1,0],[0,0,0,1,0,0]],"=":[[0,0,0,0,0,0],[1,1,1,1,1,1],[1,0,0,0,0,1],[1,1,1,1,1,1],[0,0,0,0,0,0]],$:[[0,1,0,0,1,1],[1,1,1,1,0,1],[0,0,1,1,0,0],[1,0,1,1,1,1],[1,1,0,0,1,0]],"*":[[0,0,0,0,0,0],[0,0,1,0,0,0],[0,0,1,1,0,0],[0,0,0,1,0,0],[0,0,0,0,0,0]]," ":[[,,],[,,],[,,],[,,],[,,]]},e=kontra.context;kontra.drawText=function(n,o,a,i){var r=[];n=(n=String(n)).toUpperCase();for(var s=0;s<n.length;s++){var h=t[n.charAt(s)];h&&r.push(h)}e.fillStyle=i||"black";var c=a&&a.x||0;for(s=0;s<r.length;s++){h=r[s];for(var l=a&&a.y||0,u=0,d=0;d<h.length;d++){for(var p=h[d],f=0;f<p.length;f++)p[f]&&e.fillRect(c+f*o,l,o,o);u=Math.max(u,p.length*o),l+=o}c+=o+u}},kontra.drawTextCenter=function(t,e,n,o){(n=n||{}).x=n.x||0,n.x+=kontra.width/2-(3*t.length+t.length)*e/2,kontra.drawText(t,e,n,o)}}()},function(t,e,n){"use strict";n.r(e);n(1),n(2);var o,a,i,r,s={states:[],state:null,store:{},clear(){kontra.context.clearRect(0,0,kontra.width,kontra.height)},init(){const t=this;return window.addEventListener("deviceorientation",function(e){let n=e.beta,o=e.gamma;t.state&&t.state.scene.deviceorientation&&t.state.scene.deviceorientation({x:n,y:o})}),["onUp","onDown"].forEach(function(e){kontra.pointer[e](function(n,o){const a=kontra.canvas.offsetTop,i=kontra.canvas.offsetLeft;let r=Math.floor((n.x-i)/5),s=Math.floor((n.y-a)/5);r<=kontra.width&&s<=kontra.height&&r>=0&&s>=0&&t.state&&t.state.scene[e]&&t.state.scene[e]({x:r,y:s},o)})}),this},switch(t){if(this.clear(),this.states.forEach(t=>{t.scene.isStopped||(t.scene.destroy&&t.scene.destroy(),t.scene.stop())}),"string"==typeof t)this.states.forEach(e=>{e.key==t&&(e.scene.init&&e.scene.init(),e.scene.start(),this.state=e)});else{const e=this.states[t];e.scene.init&&e.scene.init(),e.scene.start(),this.state=e}},addScene(t,e){return e.load&&e.load(),this.states.push({key:t,scene:e}),this}}.init(),h=n(0),c=n.n(h),l="undefined"!=typeof AudioContext?new AudioContext:new webkitAudioContext,u=l.currentTime;o=new c.a.Sequence(l,132,["-   e","Bb3 e","A3  e","- n","G3  e","A3  e","F3  e","A3  e"]),a=new c.a.Sequence(l,132,["A3  s"]),i=new c.a.Sequence(l,132,["A3  q"]),r=new c.a.Sequence(l,132,["E3  e","F3  e","D3  q"]),o.loop=!1,a.loop=!1,i.loop=!1,r.loop=!1,o.staccato=.55,a.staccato=.55,i.staccato=.55,r.staccato=.55,o.gain.gain.value=.5,a.gain.gain.value=.5,i.gain.gain.value=.5,r.gain.gain.value=.5,o.mid.frequency.value=600,o.mid.gain.value=6,a.mid.frequency.value=600,a.mid.gain.value=6,i.mid.frequency.value=600,i.mid.gain.value=6,r.mid.frequency.value=600,r.mid.gain.value=6;var d={ttPlay:function(){u=l.currentTime,o.play(u)},ttStop:function(){o.stop()},enemyKillPlay:function(){u=l.currentTime,a.play(u)},enemyKillStop:function(){a.stop()},goldPlay:function(){u=l.currentTime,i.play(u)},goldStop:function(){i.stop()},gameoverPlay:function(){u=l.currentTime,r.play(u)},gameoverStop:function(){r.stop()}};let p,f,y,m,g,k=[],w=[],x=[],v=0,b={x:0,y:0};const S=kontra.gameLoop({fps:45,update(t){w.forEach(e=>{e.update(t)}),x.forEach(e=>{e.update(t)}),k.forEach(e=>{e.update(t)}),p.update(t),p.swordRoll&&f.update(t),m(),g(),0===b.x&&0===b.y||(0!==b.x&&(p.y+=b.x/Math.abs(b.x)),0!==b.y&&(p.x+=b.y/Math.abs(b.y)))},render(){w.forEach(t=>{t.render()}),x.forEach(t=>{t.render()});const t=[p,...k];p.swordRoll&&t.push(f),t.sort((t,e)=>t.y-e.y),t.forEach(t=>{t.render()});let e=Math.floor(p.score);Date.now()-p.lastScoreTime<1e3&&(e+=" "+(p.lastScore>0?"+":"")+Math.floor(p.lastScore)),kontra.drawText(e,1,{x:1,y:1},"#fff");const n=Array(p.health+1).join("|");kontra.drawText(n,1,{x:kontra.width-(3*p.health+p.health),y:1},"red"),Date.now()-p.lastDamageTime<500&&y.render();let o=p.swordRollExpiration+p.swordRollTime-Date.now();o>0?kontra.drawText(Math.round(o/1e3),1,{x:kontra.width/2,y:1},"#00719dff"):(kontra.drawText("$",1,{x:kontra.width/2,y:1},"#6fddd5ff"),kontra.drawText("*",1,{x:kontra.width/2,y:1},"#00abc4ff"))}});S.load=function(){s.store.score=s.store.score||0,s.store.bestScore=s.store.bestScore||0;const t=kontra.spriteSheet({image:kontra.getImage("./assets/runner13k.png"),frameWidth:16,frameHeight:16,animations:{player:{frames:[0,1,2,2,1,0],frameRate:8},playerRotation:{frames:[0,1,2,2,3,4,0],frameRate:8},swordRoll:{frames:[5,6,7,8],frameRate:4},enemyWalk:{frames:[9,10],frameRate:6},enemyDead:{frames:11,frameRate:1,loop:!1},gold:{frames:[13,14],frameRate:2},grass:{frames:12,frameRate:1,loop:!1}}});(p=kontra.sprite({type:"player",x:0,y:kontra.height-16,animations:t.animations,swordRoll:!1,swordRollTime:5e3,swordRollExpiration:0,health:3,score:0,lastDamageTime:0,lastScore:0,lastScoreTime:0,addScore(t){this.score+=t,Date.now()-this.lastScoreTime<1e3?this.lastScore+=t:this.lastScore=t,this.lastScoreTime=Date.now()},skill(){!this.swordRoll&&Date.now()>this.swordRollExpiration+this.swordRollTime&&(this.swordRoll=!0,f.radius=0,this.playAnimation("playerRotation"),this.swordRollExpiration=Date.now()+this.swordRollTime)},update(t){this.advance(t),this.x+this.width>kontra.width&&(this.x=kontra.width-this.width),this.x<0&&(this.x=0),this.y+this.height>kontra.height&&(this.y=kontra.height-this.height),this.y<0&&(this.y=0),this.swordRoll&&Date.now()>this.swordRollExpiration&&(this.swordRoll=!1,this.playAnimation("player")),kontra.keys.pressed("space")&&this.skill(),kontra.keys.pressed("left")?this.x-=1:kontra.keys.pressed("right")&&(this.x+=1),kontra.keys.pressed("up")?this.y-=1:kontra.keys.pressed("down")&&(this.y+=1),x.forEach((t,e)=>{this.collidesWith(t)&&(d.goldStop(),d.goldPlay(),this.addScore(50),x.splice(e,1))}),this.health<=0&&(d.gameoverPlay(),s.switch("gameover"),this.health=3,this.score=0,this.swordRollExpiration=0,this.swordRoll=!1,k=[])}})).playAnimation("player"),(f=kontra.sprite({type:"swordRoll",x:0,y:0,animations:t.animations,radius:0,maxRadius:26,angle:0,speed:4,update(t){this.advance(t),this.radius<this.maxRadius&&this.radius++,this.angle-=t,this.x=Math.cos(this.angle*this.speed)*this.radius+p.x,this.y=Math.sin(this.angle*this.speed)*this.radius+p.y}})).playAnimation("swordRoll"),y=kontra.sprite({x:0,y:kontra.height-5,width:kontra.width,height:5,color:"#DC143C"}),m=function(){if(k.length<5&&Date.now()-v>1e3){v=Date.now();var e=kontra.sprite({type:"enemy",x:kontra.getRandomInt(0,kontra.width-16),y:kontra.getRandomInt(-kontra.height,-16),animations:t.animations,isDead:!1,speed:2,update(t){this.advance(t),this.y+=this.speed,this.y>kontra.height&&(this.isDead||(p.health--,p.lastDamageTime=Date.now()),k.forEach((t,e)=>{t==this&&k.splice(e,1)})),this.isDead||(this.collidesWith(p)||this.collidesWith(f)&&p.swordRoll)&&(this.isDead=!0,this.speed=1,this.playAnimation("enemyDead"),d.enemyKillStop(),d.enemyKillPlay())}});e.playAnimation("enemyWalk"),k.push(e)}};const e=function(e,n,o){return{type:o,x:e,y:n,animations:t.animations,update(t){this.advance(t),this.y+=1,this.y>kontra.height&&("gold"===this.type&&p.addScore(-100),this.y=-this.height,this.x=kontra.getRandomInt(0,kontra.width-16))}}};for(let t=0;t<kontra.height/16;t++)w.push(kontra.sprite(e(kontra.getRandomInt(0,kontra.width-16),16*t,"grass")));w.forEach(t=>{t.playAnimation("grass")}),g=function(){if(x.length<2){var t=kontra.sprite(e(kontra.getRandomInt(0,kontra.width-16),kontra.getRandomInt(0,-kontra.height-16),"gold"));t.playAnimation("gold"),x.push(t)}}},S.init=function(){kontra.canvas.style.background="#66b632ff",kontra.keys.bind("esc",function(){s.switch("menu")})},S.destroy=function(){s.store.score=p.score,s.store.bestScore=p.score>s.store.bestScore?p.score:s.store.bestScore,kontra.keys.unbind("esc")},S.onUp=function(){p.skill()},S.deviceorientation=function(t){b=t};var R=S;const T=["\\","=","/","="];let E=0;const D=kontra.gameLoop({fps:2,update(){4===++E&&(E=0)},render(){kontra.context.fillStyle="#000",kontra.context.fillRect(3,30,kontra.width-6,kontra.height-60);const t=[["FKnight",3,{x:-3,y:kontra.height/2-30},"#CF6A39"],["Press enter",1,{y:kontra.height/2},"#7B112B"],["LRUD - move",1,{x:-1,y:kontra.height/2+10},"#E79269"],["space - skill",1,{x:1,y:kontra.height/2+20},"#E79269"],[T[E],3,{x:-2,y:kontra.height/2+50},"#000"]];s.store.bestScore>0&&t.push(["Best: "+s.store.bestScore,1,{x:1,y:kontra.height/2+30}]),t.forEach(t=>{kontra.drawTextCenter(t[0],t[1],t[2],t[3]||"#fff")})}});D.init=function(){d.ttStop(),d.ttPlay(),kontra.canvas.style.background="#66b632ff",kontra.keys.bind("enter",function(){setTimeout(()=>{s.switch("game")})})},D.destroy=function(){kontra.keys.unbind("enter")},D.onUp=function(){s.switch("game")};var q=D;const A=kontra.gameLoopEmpty();A.init=function(){kontra.canvas.style.background="#66b632ff",kontra.keys.bind("enter",function(){setTimeout(()=>{s.switch("menu")})}),setTimeout(()=>{kontra.clear(),kontra.context.fillStyle="#000",kontra.context.fillRect(3,30,kontra.width-6,kontra.height-60),[["Game Over",2,{x:-2,y:kontra.height/2-15},"#CF6A39"],["Press enter",1,{y:kontra.height/2},"#7B112B"],[s.store.score+"",1,{y:kontra.height/2+10}]].forEach(t=>{kontra.drawTextCenter(t[0],t[1],t[2],t[3]||"#fff")})})},A.destroy=function(){kontra.keys.unbind("enter")},A.onUp=function(){s.switch("menu")};var F=A;kontra.assets.load("./assets/runner13k.png").then(function(){s.addScene("menu",q).addScene("game",R).addScene("gameover",F).switch("menu")}).catch(function(t){console.error(t)})}]);