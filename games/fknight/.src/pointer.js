!function(){let n,t=[],e=[],o={},i=[],r={},a={0:"left",1:"middle",2:"right"};function c(t){let e=n.x-Math.max(t.x,Math.min(n.x,t.x+t.width)),o=n.y-Math.max(t.y,Math.min(n.y,t.y+t.height));return e*e+o*o<n.radius*n.radius}function u(){let o,i,r=e.length?e:t;for(let t=r.length-1;t>=0;t--)if(i=(o=r[t]).collidesWithPointer?o.collidesWithPointer(n):c(o))return o}function s(n){r[a[n.button]]=!0,h(n,"onDown")}function d(n){r[a[n.button]]=!1,h(n,"onUp")}function h(t,e){if(!kontra.canvas)return;let i,r,a;-1!==t.type.indexOf("mouse")?(i=t.clientX,r=t.clientY):(i=(t.touches[0]||t.changedTouches[0]).clientX,r=(t.touches[0]||t.changedTouches[0]).clientY),n.x=i-kontra.canvas.offsetLeft,n.y=r-kontra.canvas.offsetTop,t.target===kontra.canvas&&(a=u())&&a[e]&&a[e](),o[e]&&o[e](t,a)}addEventListener("mousedown",s),addEventListener("touchstart",s),addEventListener("mouseup",d),addEventListener("touchend",d),addEventListener("blur",function(n){r={}}),addEventListener("mousemove",function(n){h(n,"onOver")}),n=kontra.pointer={x:0,y:0,radius:5,track(n){[].concat(n).map(function(n){n._r||(n._r=n.render,n.render=function(){t.push(this),this._r()},i.push(n))})},untrack(n,t){[].concat(n).map(function(n){n.render=n._r,n._r=t;let e=i.indexOf(n);-1!==e&&i.splice(e,1)})},over:n=>-1!==i.indexOf(n)&&u()===n,onDown(n){o.onDown=n},onUp(n){o.onUp=n},pressed:n=>!!r[n]},kontra._tick=function(){e.length=0,t.map(function(n){e.push(n)}),t.length=0}}();