'use strict';function aa(a){a.a.clearRect(0,0,a.canvas.width,a.canvas.height)}function k(a){let b;a.g.length=0;let c=[],d=null;for(let e=0;e<a.children.length;e++)for(a.children[e].visible?(d=a.children[e],c.push(d),b=!1):b=!0;!b;){let f=!0;for(let g=d.Za;g<d.children.length;g++)if(d.children[g].visible){d.Za=g+1;d=d.children[g];c.push(d);f=!1;break}d.Za=0;f&&(d.parent!==a?d=d.parent:(b=!0,a.g=a.g.concat(c),c.length=0))}}function E(a,b){a.Ka.push(b);return b}
class ba{constructor(a,b,c,d){this.canvas=document.createElement("canvas");this.canvas.width=c*a;this.canvas.height=c*b;this.a=this.canvas.getContext("2d");this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto";this.canvas.style.display="block";this.h=new da(new F(0,0),this.canvas.width,this.canvas.height);document.body.appendChild(this.canvas);this.f=c;this.O=d;this.children=[];this.Ka=[];this.jb=[];this.c=null;this.m=0;this.g=[];this.A=0;this.L=null;this.M={ma:null,fa:null};this.ab=
[];document.addEventListener("keydown",e=>{this.M.fa&&this.M.fa(e);this.g.forEach(f=>{f.M.fa&&f.M.fa(e)})});document.addEventListener("keyup",e=>{this.M.ma&&this.M.ma(e);this.g.forEach(f=>{f.M.ma&&f.M.ma(e)})})}start(){this.A=setInterval(this.B.bind(this),16.666);this.m=Date.now()}stop(){clearInterval(this.A)}B(){aa(this);let a=Date.now(),b=(a-this.m)/1E3;this.ab.forEach(c=>{c.update(b)});this.m=a;this.Ka.forEach(c=>{if(c.Ka)c.Ka.some(d=>{if(d.K.j.Z&&d.active)return d.update(b),!0});else if(c.K.j.Z&&
c.active)return c.update(b),!0});this.L&&(this.L.update(),ea(this.L,b));this.g.forEach(c=>{!c.fixed&&c.active&&(c.oa||(c.position.x+=c.speed.x*b),c.pa||(c.position.y+=c.speed.y*b));fa(c);ha(c)});this.g.forEach(c=>{c.qa&&(c.aa=(c.j.J.y+.5*c.height)/this.f*this.O.ya,c.ca=(c.j.J.y+.5*c.height)/this.f*this.O.za);c.Ta=c.j.J.x+c.width-this.O.ya+c.aa>this.h.position.x&&c.j.J.x+c.aa<this.h.position.x+this.h.width&&c.j.J.y+c.height-this.O.za+c.ca>this.h.position.y&&c.j.J.y+c.ca<this.h.position.y+this.h.height?
!0:!1});this.jb.forEach(c=>{let d=[];c.ja.forEach(e=>{e.Ta&&d.push(e)});(()=>{let e=0,f=[];for(;e<c.C.children.length;){let g=c.C.children[e];g.frame?(f.push(g),c.C.children.splice(e,1)):e++}f.forEach(g=>{0>G(d,g)&&c.C.children.push(g)})})();d.forEach(e=>{let f=(h,l,q)=>{do if(0<l)l--;else break;while(q[l].frame&&q[l].la>h.la);if(q[l].frame){for(;q[l].frame&&q[l].la===h.la&&q[l].position.x>h.position.x;)if(0<l)l--;else break;l++}else l++;return l},g=0,m=0,n=!1,p=Math.floor(e.position.y/this.f)+Math.floor((e.position.y+
e.height)/this.f)+1;do c.C.children[g].frame||(m===p?(c.C.children.splice(f(e,g,c.C.children),0,e),n=!0):m++),g++;while(!n)})});k(this);this.g.forEach(c=>{let d=c.j.J.x+.5*c.width-this.h.position.x,e=c.j.J.y+.5*c.height-this.h.position.y;c.Ta&&(this.a.save(),this.a.translate(d+c.aa,e+c.ca),this.a.rotate(c.angle),this.a.scale(c.j.ha.x,c.j.ha.y),this.a.globalAlpha=c.j.Na,c.Kb&&this.a.scale(-1,1),c.type===I.a.ia?this.a.drawImage(c.pb.image,c.$.position.x,c.$.position.y,c.$.width,c.$.height,-.5*c.width,
-.5*c.height,c.$.width,c.$.height):c.type===I.a.Sa?(this.a.font=c.frame.font,this.a.fillStyle=c.frame.fillStyle,this.a.fillText(c.frame.text,-.5*c.width,.5*c.height)):c.type===I.a.Aa&&c.frames.forEach(f=>{ia(this.a,-.5*c.width,-.5*c.height,f.Xa,f.fillStyle,null,null)}),this.a.restore())});this.c.update(b);this.g.forEach(c=>{c.active&&c.update(b)})}o(a){a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;k(this);fa(a);ha(a);ja(a)}removeChild(a){this.children.splice(G(this.children,
a,null),1);k(this)}}
function ka(a){let b=()=>{if(a.ga[a.a]){let c=a.ga[a.a];aa(a.b);let d=c.rows,e=[];a.canvas.width=d*c.xa+2*d;let f=Math.ceil(c.ob.length/d);a.canvas.height=f*c.wa+2*f;let g=0,m=-1;c.ob.forEach((n,p)=>{p/d===g+1?(g++,m=0):m++;n.forEach(h=>{a.g.save();ia(a.g,m*c.xa+2*m,g*c.wa+2*g,h.Xa,h.fillStyle,h.strokeStyle,h.lineWidth);a.g.restore();h.name&&e.push(new la(new F(m*c.xa+2*m,g*c.wa+2*g),c.xa,c.wa,h.name))})});c.image.src=a.canvas.toDataURL("image/png");c.nb=e;c.image.onload=()=>{a.a<a.ga.length-1?(a.a++,
b()):(a.canvas.width=a.B,a.canvas.height=a.A,a.create())}}};a.B=a.canvas.width;a.A=a.canvas.height;a.a=0;b()}class na{constructor(a,b,c,d={ya:0,za:0,Ba:0}){this.b=new ba(a,b,c,d);this.canvas=this.b.canvas;this.g=this.b.a;this.ga=[];this.a=0;this.B=this.canvas.width;this.A=this.canvas.height;this.f=c;this.O=d}m(){}create(){this.b.c=this}update(){}}function oa(a){var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b))+b}
function pa(){var a=M.a.Ra-1;var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b+1))+b}function N(a){return a[oa(a.length)]}function G(a,b,c=null){let d=-1,e=!1;return d=c?a.findIndex(f=>{c(f)===b&&(e=!0);return e}):a.findIndex(f=>{f===b&&(e=!0);return e})}function qa(a,b,c){b=G(a,b,c);return a[b]}function P(a,b){a.x=b.x;a.y=b.y;return a}class F{constructor(a=0,b=0){this.x=a;this.y=b}compare(a){return a?a.x===this.x&&a.y===this.y?!0:!1:!1}add(a){a&&(this.x+=a.x,this.y+=a.y)}}
class la{constructor(a,b,c,d=""){this.position=a;this.width=b;this.height=c;this.name=d}}class da extends la{constructor(a,b,c){super(a,b,c)}}function ra(a,b){b.reset();a.g.length<a.m&&a.g.push(b)}function va(a,b){for(let c=0;c<b.length;c++)ra(a,b[c])}function Q(a,b){let c;0<a.g.length?(c=a.g[a.g.length-1],c.set(b),a.g.splice(a.g.length-1,1)):c=a.a(b);return c}class R{constructor(a=100){this.g=[];this.m=a}a(){return{}}}
class wa{constructor(a,b,c,d){this.image=document.createElement("img");this.nb=null;this.rows=a;this.xa=b;this.wa=c;this.ob=d}}function fa(a){P(a.j.J,a.position);P(a.j.ha,a.scale);a.j.Na=a.alpha;a.j.Z=a.visible;let b=a.parent;for(;b!==a.c.b&&b;)a.j.J.x+=b.position.x,a.j.J.y+=b.position.y,a.j.ha.x*=b.scale.x,a.j.ha.y*=b.scale.y,a.j.Na*=b.alpha,a.j.Z&&!b.visible&&(a.j.Z=!1),b=b.parent,a.j.Z&&!b&&(a.j.Z=!1)}function ha(a){a.m.x=a.j.J.x+.5*a.width;a.m.y=a.j.J.y+.5*a.height}
function ja(a){a.R.x=Math.floor(Math.floor(a.position.x/a.c.b.f));a.R.y=Math.floor(Math.floor(a.position.y/a.c.b.f))}function xa(a,b=I.a.ia,c=[]){Array.isArray(c)?a.frames=c:a.frames=[c];a.frame=a.frames[0];a.$=null;if(b===I.a.ia)ya(a);else if(b===I.a.Sa){b=a.c;var d=a.frame;c=b.b.a.font;b.b.a.font=d.font;d=b.b.a.measureText(d.text).width;b.b.a.font=c;b=d;a.width=b}}function ya(a){for(let b=0;b<a.frames.length;b++)a.Y.push(qa(a.pb.nb,a.frames[b],c=>c.name));a.$=a.Y[0]}
function S(a,b){a.visible=b;k(a.c.b);fa(a)}function za(a,b){b.forEach(c=>{a.removeChild(c)})}function Aa(a){a.children.forEach(b=>{b.parent=null});a.children.length=0;k(a.c.b)}
class I{static get a(){return{ia:0,Sa:1,Aa:2}}static get G(){return 0}constructor(a,b,c,d,e,f,g=a.ga[0],m=!1,n=g.xa,p=g.wa){this.active=!0;this.c=a;this.type=b;this.Y=[];this.frame=this.frames=null;this.pb=g;this.width=n;this.height=p;this.qa=m;this.hb=this.width;this.gb=this.height;this.$=null;xa(this,b,c);this.Kb=!1;this.fb=new F(0,0);this.ca=this.aa=0;this.Ta=!0;this.la=0;f?this.fixed=f:this.fixed=!1;this.position=new F(d,e);this.speed=new F(0,0);this.m=new F(0,0);this.children=[];this.parent=
null;this.visible=!0;this.M={ma:null,fa:null};this.angle=0;this.scale=new F(1,1);this.Za=0;this.alpha=1;this.R=new F(0,0);this.pa=this.oa=!1;this.Da=null;this.Ja=new Ba(a,this);this.kb=new Ba(a,this);this.j={J:new F(1,1),ha:new F(1,1),Na:1,Z:!1};ha(this);this.$a=!0}update(){}o(a){a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;k(this.c.b);fa(a);ha(a);ja(a)}removeChild(a){let b=-1;b=this.children.findIndex(c=>c===a?!0:!1);0<=b&&(this.children.splice(b,1),a.parent=null);k(this.c.b)}reset(){this.position.x=
0;this.position.y=0;this.speed.x=0;this.angle=this.speed.y=0}set(a){a.x?this.position.x=a.x:this.position.x=0;a.y?this.position.y=a.y:this.position.y=0;a.frames&&(this.Y.length=0,xa(this,a.type,a.frames));a.fixed?this.fixed=a.fixed:this.fixed=!1;S(this,!0);this.active=!0;ha(this);ja(this)}}class T extends I{constructor(a,b,c){super(a,null,null,b,c,!0)}}class Ca extends I{static get G(){return 1}constructor(a,b,c,d,e,f,g){super(a,I.a.ia,b,c,d,!0,void 0,e,f,g)}}
class Da extends R{constructor(){super()}a(a){return new Ca(a.c,a.frames,a.x,a.y,a.qa,a.width,a.height)}}function Ea(a,b=null){b&&Fa(b,a.N,!0);Aa(a.A);Aa(a.C);Aa(a.g);a.a.forEach((c,d)=>{va(a.da[d],c);c.length=0})}
function Ga(a,b,c=null){for(var d=0;d<b.v;d++){a.C.o(new T(a.c,0,0));a.C.o(new T(a.c,0,0));for(let e=0;e<b.s;e++)if(b.i[e][d].V)for(let f=0;4>f;f++){let g=Q(a.da[f],{c:a.c,frames:b.i[e][d].frames[f],x:e*a.c.b.f,y:d*a.c.b.f,qa:!0,width:a.c.f,height:a.c.f});a.a[f].push(g);1!==f&&2!==f||a.C.children[a.C.children.length-1-(1-(f-1))].o(g);1===f?e<b.s-1&&0<b.i[e+1][d].V&&S(g,!1):(2===f||0===f)&&d<b.v-1&&0<b.i[e][d+1].V&&S(g,!1)}}for(d=1;d<a.C.children.length-1;d+=2)[a.C.children[d],a.C.children[d+1]]=[a.C.children[d+
1],a.C.children[d]];k(a.c.b);a.a[3].forEach(e=>{a.g.o(e)});a.a[0].forEach(e=>{a.A.o(e)});c&&(Ha(c,b),a.g.children.forEach(e=>{Ia(c,e)}))}function Ja(a){var b=Ka.G;a.N.forEach(c=>{c.Da=b})}function La(a,b){a.ja.push(b);a.C.o(b)}function Ma(a,b){b.forEach(c=>{a.ja.splice(G(a.ja,c),1);a.C.removeChild(c)})}
class Na extends I{constructor(a){super(a,null,null,0,0,!0,!1);this.B=new Da;this.va=new Da;this.B=new Da;this.La=new Da;this.da=[this.B,this.va,this.B,this.La];this.ja=[];this.sa=[];this.ta=[];this.N=[];this.ra=[];this.a=[this.ra,this.ta,this.sa,this.N];this.A=new T(a,0,0);this.C=new T(a,0,0);this.g=new T(a,0,0);this.o(this.A);this.o(this.C);this.o(this.g)}}function Oa(a){a.Y=2*a.A/Math.pow(a.duration,2);a.La=a.Y*a.duration;a.Y*=-1}function Pa(a){a.active=!1;a.ra=a.qb;a.da=!0;a.g=0;a.a=0}
class U{static get a(){return 1}static get g(){return 2}constructor(a,b,c,d){this.K=a;this.duration=b;d?this.type=d:this.type=U.a;this.H=null;this.ra=this.qb=c;this.g=0;this.active=!1;this.a=0;this.La=null;this.da=!0;this.Y=this.A=this.sa=0}ba(){}B(a){a&&(this.duration=a)}update(a){if(this.active&&a&&(this.a+=a,this.a>this.duration&&(this.a=this.duration),this.type===U.a?this.g=this.a*this.sa/this.A:this.type===U.g&&(this.g=(this.La*this.a+.5*this.Y*Math.pow(this.a,2))/this.A),this.da||(this.g=1-
this.g),this.a===this.duration)){this.a=0;this.update(0);a:{if(0<=this.qb&&(this.ra--,0>this.ra)){Pa(this);this.H&&this.H(this);a=!0;break a}a=!1}a||(this.da=this.da?!1:!0)}}}
class Qa extends U{constructor(a,b,c,d,e,f){super(a,b,c,d);this.va=this.ta=0;this.m=new F(0,0);this.N=new F(0,0);this.ba(e,f)}update(a){super.update(a)}ba(a,b){P(this.m,a);P(this.N,b);this.ta=this.N.x-this.m.x;this.va=this.N.y-this.m.y;a=this.m;b=this.N;this.A=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));this.B(null);Oa(this)}B(a){super.B(a);this.sa=this.A/this.duration}}
class Ra extends Qa{constructor(a,b,c,d,e,f){super(a,b,c,d,e,f)}update(a){super.update(a);this.active&&(this.K.position.x=this.m.x+this.g*this.ta,this.K.position.y=this.m.y+this.g*this.va)}}class Sa extends Qa{constructor(a,b,c,d,e,f){super(a,b,c,d,e,f)}update(a){super.update(a);this.active&&(this.K.scale.x=this.m.x+this.g*this.ta,this.K.scale.y=this.m.y+this.g*this.va)}}
class Ta extends U{constructor(a,b,c,d,e,f){super(a,b,c,d);this.m=0;this.ba(e,f)}ba(a,b){this.m=a;this.A=b-a;this.B(null);Oa(this)}B(a){super.B(a);this.sa=this.A/this.duration}update(a){super.update(a);this.active&&(this.K.alpha=this.m+this.g*this.A)}}function ia(a,b,c,d,e,f,g){b||(b=0);c||(c=0);e&&(a.fillStyle=e);f&&(a.strokeStyle=f);g&&(a.lineWidth=g);a.beginPath();a.moveTo(d[0].x+b,d[0].y+c);for(f=1;f<d.length;f++)a.lineTo(d[f].x+b,d[f].y+c),e||a.stroke();a.closePath();e&&a.fill()}
function Ua(a,b,c,d,e,f){return new Va([new F(a,b),new F(a+c,b),new F(a+c,b+d),new F(a,b+d),new F(a,b)],e,f,null,null)}class Va{constructor(a,b="",c=null,d=null,e=null){this.Xa=a;this.name=b;this.fillStyle=c;this.strokeStyle=d;this.lineWidth=e}}function Wa(a){let b=[];for(let d=0;d<a.length;d++){{var c=Math.floor(d/a.s);let e=d-c*a.s;c={ea:a.i[e][c],x:e,y:c}}b.push(c)}return b}
class Xa{constructor(a,b,c=null){let d=null;d="object"===typeof c?(e,f,g)=>{f[g].push(JSON.parse(JSON.stringify(e)))}:(e,f,g)=>{f[g].push(e)};this.i=[];this.s=a;this.v=b;for(let e=0;e<a;e++){this.i.push([]);for(let f=0;f<b;f++)d(c,this.i,e)}this.length=a*b;this.a=Wa(this)}getAll(){return this.a}}function ea(a,b){a.getAll().forEach(c=>{c.ea.U.forEach(d=>{d.oa=!1;d.pa=!1})});a.getAll().forEach(c=>{c.ea.U.forEach(d=>{d.j.Z&&Ya(a,d,c.x,c.y,b)})})}function Fa(a,b,c=!1){b.forEach(d=>{Za(a,d,c)})}
function Ha(a,b){b.getAll().forEach(c=>{c.ea.V&&(a.i[c.x][c.y].V=!0)})}function Ia(a,b){let c=$a(a,b);a.i[c.x][c.y].U.push(b)}
function $a(a,b){let c=new F(b.R.x,b.R.y);b.speed.x?b.oa&&b.speed.x?c.x=Math.round(b.position.x/a.c.b.f):0>b.speed.x&&b.position.x<=(c.x-1)*a.c.b.f?c.x--:0<b.speed.x&&b.position.x>=(c.x+1)*a.c.b.f&&c.x++:c.x=Math.round(b.position.x/a.c.b.f);b.speed.y?b.pa&&b.speed.y?c.y=Math.round(b.position.y/a.c.b.f):0>b.speed.y&&b.position.y<=(c.y-1)*a.c.b.f?c.y--:0<b.speed.y&&b.position.y>=(c.y+1)*a.c.b.f&&c.y++:c.y=Math.round(b.position.y/a.c.b.f);return c}
function Za(a,b,c=!1){a.getAll().some(d=>{if(d.ea.U.some((e,f)=>{if(e===b)return d.ea.U.splice(f,1),c&&(d.ea.V=!1),!0}))return!0})}
function Ya(a,b,c,d,e=0){let f=(t,w)=>{let x=0;w&&!t.oa&&(x=t.speed.x*e);return t.position.x+t.fb.x+x+t.width/2},g=(t,w)=>{let x=0;w&&!t.pa&&(x=t.speed.y*e);return t.position.y+t.fb.y+x+t.height/2},m=!1,n=[],p=[],h=0,l=0,q=0,A=0;p.push(new F(f(b,!0),g(b,!1)));p.push(new F(f(b,!1),g(b,!0)));var u=c-3;0>u&&(u=0);c+=3;c>a.s&&(c=a.s);let H=d-3;0>H&&(H=0);d+=3;d>a.v&&(d=a.v);for(;u<c;u++)for(let t=H;t<d;t++)a.i[u][t].U.forEach(w=>{if(w.j.Z&&w!==b&&w.constructor.G&b.Da){n.length=0;n.push(new F(f(w,!0),
g(w,!1)));n.push(new F(f(w,!1),g(w,!0)));m=!1;for(let x=0;2>x;x++)h=n[x].x-p[x].x,l=n[x].y-p[x].y,q=w.hb/2+b.hb/2,A=w.gb/2+b.gb/2,Math.abs(h)<q&&Math.abs(l)<A&&(m=!0,0===x?b.$a&&(w.oa=!0):b.$a&&(w.pa=!0));m&&(V(b.Ja,b,w),V(w.Ja,w,b))}})}
class ab extends Xa{constructor(a,b,c){super(b,c,{U:[],V:!1});this.c=a}update(){let a=[];this.getAll().forEach(b=>{b.ea.U.forEach(c=>{if(!c.fixed){let d=new F(b.x,b.y),e=$a(this,c);e.compare(d)||a.push({K:c,Ia:d,Ua:e})}})});a.forEach(b=>{let c=G(this.i[b.Ia.x][b.Ia.y].U,b.K,null);this.i[b.Ia.x][b.Ia.y].U.splice(c,1)});a.forEach(b=>{this.i[b.Ua.x][b.Ua.y].U.push(b.K);P(b.K.R,b.Ua);V(b.K.kb)})}}
class eb{constructor(a){this.endTime=a;this.a=0;this.g=!1;this.H=null;this.active=!1}update(a){!this.g&&this.active&&(this.a+=a,this.a>this.endTime&&(this.g=!0,this.H&&this.H(this)))}reset(a){this.active=a;this.g=!1;this.a=0}}function V(a,...b){a.a.forEach(c=>{let d=a.K;for(;d&&(c.Mb!==d||(c.Gb(...b),!c.terminate));)d.parent?d=d.parent:d=null})}class Ba{constructor(a,b){this.c=a;this.K=b;this.a=[]}addListener(a,b,c=!1){a=new fb(a,b,c);this.a.push(a);return a}}
class fb{constructor(a,b,c=!1){this.Mb=a;this.Gb=b;this.terminate=c}}class M{static get a(){return{E:1,yb:2,Eb:3,Ra:4,NONE:5}}constructor(){this.P=[];this.P.push({id:M.a.E,I:new F(1,0),Ca:[]},{id:M.a.yb,I:new F(0,-1),Ca:[]},{id:M.a.Eb,I:new F(-1,0),Ca:[]},{id:M.a.Ra,I:new F(0,1),Ca:[]},{id:M.a.NONE,I:new F(0,0),Ca:[]})}static get g(){return new M}}function gb(a){a.i.forEach(b=>{for(let c=0;c<b.length;c++)b[c]=!1})}
class hb{constructor(a,b){this.i=[];this.s=a;this.v=b;for(let c=0;c<a;c++){let d=[];this.i.push(d);for(let e=0;e<b;e++)d.push(!1)}}}class ib{constructor(a,b){this.i=[];this.s=a;this.v=b;this.W=M.g;for(let c=0;c<a;c++){let d=[];this.i.push(d);for(let e=0;e<b;e++)d.push({filled:!1,Lb:!1,ka:[!0,!0,!0,!0]})}}forEach(a){for(let b=0;b<this.s;b++)for(let c=0;c<this.v;c++)a(this.i[b][c],b,c)}};class jb extends R{constructor(){super()}a(a){return new kb(a.position,a.direction)}}class lb extends R{constructor(){super()}a(a){return new mb(a.i,a.start,a.end,a.u,a.F)}}class nb extends R{constructor(){super()}a(a){return new ob(a.l,a.start,a.end,a.D,a.F,a.X)}}
class kb{constructor(a,b){this.position=a?new F(a.x,a.y):new F(0,0);b?this.direction=b:this.direction=M.a.NONE}reset(){this.direction=M.a.NONE;this.position.x=0;this.position.y=0}set(a){P(this.position,a.position);this.direction=a.direction}}
class mb{static get a(){return{vb:1,eb:2,bb:4,zb:8}}constructor(a,b,c,d,e){this.i=a;this.start=b?new F(b.x,b.y):new F(0,0);this.end=c?new F(c.x,c.y):new F(0,0);this.F=e;if(d)for(this.u=[],a=0;a<d.length-1;a++)this.u.push(Q(this.F,{position:d[a].position,direction:d[a].direction}));else this.u=[],this.u.push(Q(this.F,{position:b,direction:M.a.NONE}));this.Ea=this.Ya=!1}reset(){va(this.F,this.u);this.u.length=0;this.Ea=this.Ya=!1}set(a){P(this.start,a.start);P(this.end,a.end);this.i=a.i;if(a.u)for(let b=
0;b<a.u.length-1;b++)this.u.push(Q(this.F,{position:a.u[b].position,direction:a.u[b].direction}));else this.u.push(Q(this.F,{position:a.start,direction:M.a.NONE}))}}
class ob{constructor(a,b,c,d,e,f){this.l=a;this.F=e;this.X=f;b||(b=new F(0,0));c||(c=new F(0,0));this.a=new hb(a.s,a.v);d?this.D=d:(this.D=[],this.D.push(Q(this.X,{i:a,start:b,end:c,u:null,F:this.F})))}process(){let a=0,b=0,c=!1;let d=!1;if(this.D[0].start.compare(this.D[0].end))d=!0;else{do if(this.D[a].Ya||this.D[a].Ea)a<this.D.length-1?a++:d?(a=0,d=!1):c=!0;else{a:{var e=this.D[a];var f=this.a;let l=e.u[e.u.length-1];var g=0,m=new F(0,0);l.direction!==M.a.NONE&&(g=l.direction);for(var n=g;n<M.a.Ra;n++){g=
e.i.W.P[n];var p=l.position,h=g.I;P(m,new F(p.x+h.x,p.y+h.y));if(p=m.x<e.i.s&&0<=m.x&&m.y<e.i.v&&0<=m.y)if(p=!e.i.i[m.x][m.y].filled){p=!1;for(h=0;h<e.u.length;h++)if(e.u[h].position.x===m.x&&e.u[h].position.y===m.y){p=!0;break}p=!p}if(p){n=!1;m.compare(e.end)&&(n=!0);if(n){l.direction=g.id;e.Ya=!0;e.u.push(Q(e.F,{position:m,direction:M.a.NONE}));e=mb.a.eb;break a}n=mb.a.bb;f.i[m.x][m.y]?e.Ea=!0:f.i[m.x][m.y]=!0;l.direction=g.id;e.u.push(Q(e.F,{position:m,direction:M.a.NONE}));e=n;break a}}e.Ea=!0;
e=mb.a.vb}e===mb.a.bb?(this.D.push(Q(this.X,{i:this.l,start:this.D[a].start,end:this.D[a].end,u:this.D[a].u,F:this.F})),a++,d||(d=!0)):e===mb.a.zb?d||(d=!0):e===mb.a.eb&&(b=a,c=!0,d||(d=!0))}while(!c)}return{Qb:d,lb:b}}set(a){this.l=a.l;this.D.push(Q(this.X,{i:this.l,start:a.start,end:a.end,u:null,F:this.F}));this.l.s!==this.a.s||this.l.v!==this.a.v?this.a=new hb(this.l.s,this.l.v):gb(this.a)}reset(){va(this.X,this.D);this.D.length=0}};function pb(a,b){let c=G(a,!0,d=>{let e=!1;d.x===b.x&&d.y===b.y&&(e=!0);return e});0<=c&&a.splice(c,1)}
function qb(a,b,c){let d=[],e=[];for(var f=3;f<a.l.s-2-2;f++)for(let g=3;g<a.l.v-2-2;g++)d.push(new F(f,g));for(f=g=>{e.push(new F(g.x,g.y));for(let m=g.x-1;m<g.x+1;m++)for(let n=g.y-1;n<g.y+1;n++)pb(d,new F(m,n))};0<b&&0<d.length;){let g=N(d);0===e.length?(f(g),b--):e.some(m=>{if(6>Math.abs(g.x-m.x)&&6>Math.abs(g.y-m.y))return!0})?pb(d,g):(f(g),b--)}e.forEach(g=>{for(let m=g.x-1;m<g.x+1+1;m++)for(let n=g.y-1;n<g.y+1+1;n++){let p=a.l.i[m][n];p.filled=!0;p.Lb=!1;p.ka.forEach((h,l)=>{p.ka[l]=!1});pb(c,
new F(m,n))}});return e}function rb(a,b){let c=new F(0,0),d=!0;for(let e=0;e<a.l.W.P.length-1;e++)if(c.x=a.l.W.P[e].I.x+b.x,c.y=a.l.W.P[e].I.y+b.y,0<=c.x&&c.x<a.l.s&&0<=c.y&&c.y<a.l.v&&!a.l.i[c.x][c.y].filled){d=!1;break}return d}
function sb(a,b,c,d=0){a.l=new ib(b,c);let e=[];b=[];let f=[];for(c=0;c<a.l.s;c++)for(var g=0;g<a.l.v;g++)e.push(new F(c,g));d=qb(a,d,e);g=N(e);c=P(new F,g);g=N(e);g=P(new F,g);let m=!1;do{let n=Q(a.g,{l:a.l,start:c,end:g,D:null,F:a.F,X:a.X}),p=n.process();if(p.Qb){let h=M.a.NONE;n.D[p.lb].u.forEach(l=>{let q=a.l.i[l.position.x][l.position.y];l.direction!==M.a.NONE&&(q.ka[l.direction-1]=!1);if(h!==M.a.NONE){let A=a.l.W.P[h-1].I,u=G(a.l.W.P,!0,H=>{let t=!1;H.I.x===-1*A.x&&H.I.y===-1*A.y&&(t=!0);return t});
q.ka[u]=!1}h=l.direction;q.filled=!0;pb(e,l.position);f.push(new F(l.position.x,l.position.y))});if(0<e.length){do P(c,N(f)),pb(f,c);while(rb(a,c));b=[...e];P(g,N(b));pb(b,g)}else m=!0}else{if(!(0<b.length)){do P(c,N(f)),pb(f,c);while(rb(a,c));b=[...e]}P(g,N(b));pb(b,g)}ra(a.g,n)}while(!m);a.a.length=0;d.forEach(n=>{let p=a.l.W.P[pa()].I,h=G(a.l.W.P,!0,A=>{let u=!1;A.I.x===-1*p.x&&A.I.y===-1*p.y&&(u=!0);return u}),l=2*p.x,q=2*p.y;a.a.push(new F(n.x+l,n.y+q));a.l.i[n.x+l][n.y+q].ka[h]=!1});return a.l}
class tb{constructor(a,b,c){this.F=a;this.X=b;this.g=c;this.l=null;this.a=[]}};function W(a,b,c,d,e=7,f=0,g=0,m=Z.a.cb,n=Z.a.Ab,p=Z.a.Bb){let h=c*Math.sin(a.O.Ba);a=c*Math.cos(a.O.Ba);c=[];e&1&&(c.push(Ua(0,h,b,35,d,m)),d="");e&2&&(c.push(new Va([new F(a+b,0),new F(a+b,35),new F(b,h+35),new F(b,h),new F(a+b,0)],d,p)),d="");e&4&&c.push(new Va([new F(a,0),new F(a+b,0),new F(b,h),new F(0,h),new F(a,0)],d,n));e&8&&c.push(new Va([new F(a+b,0),new F(b,h),new F(0,h),new F(a+b,0)],d,n));e&16&&c.push(new Va([new F(a,0),new F(a+b,0),new F(0,h),new F(a,0)],d,n));e&32&&c.push(new Va([new F(a+
b,0),new F(a+b,35),new F(0,h+35),new F(0,h),new F(a+b,0)],d,p));c.forEach(l=>{l.Xa.forEach(q=>{q.x+=f;q.y+=g})});return c}
class Z extends na{static get a(){return{cb:"#ff71ce",Ab:"#ff24b3",Bb:"#d6008d",Oa:"#01cdfe",tb:"#018fb2",ub:"#015165",Pa:"#05ffa1",wb:"#00b873",xb:"#006b43",Qa:"#b967ff",Cb:"#951aff",Db:"#6e00cc",Fb:"#fffb9f"}}constructor(a,b,c,d){super(a,b,c,d);window.addEventListener("keydown",function(e){-1<[37,38,39,40].indexOf(e.keyCode)&&e.preventDefault()},!1)}m(){super.m();let a=[],b=[],c=(88-this.f)/Math.cos(this.O.Ba);a.push(W(this,this.f/2,c,"w0",1,this.f/2));a.push(W(this,this.f,c,"w1",2));a.push(W(this,
this.f/2,c,"w2",1));a.push(W(this,this.f,c,"w3",4));a.push(W(this,this.f,c,"w4",8));a.push(W(this,this.f,c,"w5",16));a.push(W(this,this.f,c,"w6",32));a.push([Ua(0,0,0,0,"w7",Z.a.cb)]);a.push(W(this,this.f/3,c/8,"pg",7,0,0,Z.a.Pa,Z.a.wb,Z.a.xb));a.push(W(this,2/3*this.f,2/3*c,"p1",7,0,0,Z.a.Oa,Z.a.tb,Z.a.ub));a.push(W(this,2/3*this.f,2/3*c,"p2",7,0,0,Z.a.Qa,Z.a.Cb,Z.a.Db));b.push([Ua(0,0,this.b.h.width,this.b.h.height,"b",Z.a.Fb)]);this.ga.push(new wa(10,88,81,a));this.ga.push(new wa(1,this.b.h.width,
this.b.h.height,b));ka(this)}create(){super.create();let a=new ub(this,0,0);this.b.o(a);let b=new vb(this,0,0);a.o(b);let c=new wb(this,0,0);S(c,!1);a.o(c);this.b.start();this.b.M.fa=()=>{b.visible&&(S(b,!1),S(c,!0),c.g())}}}class xb{constructor(a,b,c,d){this.Jb=a;this.Pb=b;this.size=c;this.Hb=d}}class yb extends I{constructor(a,b,c,d,e=Z.a.Pa,f=32){super(a,I.a.Sa,{font:"bold "+f+"px Courier",text:d,fillStyle:e},b,c,!0)}}
class zb extends yb{constructor(a,b,c,d,e,f,g=1,m=1,n=1){super(a,b,c,d,e,f);let p=E(a.b,new Ra(this,g,0,U.a,new F(0,0),new F(0,0))),h=E(a.b,new Ra(this,m,0,U.a,new F(0,0),new F(0,0))),l=new eb(n);this.H=new Ba(a,this);p.H=()=>{l.reset(!0)};l.H=()=>{h.active=!0};h.H=()=>{V(this.H)};a.b.ab.push(l);this.a=(q,A,u)=>{p.ba(q,A);h.ba(A,u)};this.start=()=>{p.active=!0}}}
class ub extends T{constructor(a,b,c){super(a,b,c);this.a=new I(a,I.a.ia,["b"],0,0,!1,a.ga[1]);this.o(this.a)}update(){this.a.position.x=this.c.b.h.position.x;this.a.position.y=this.c.b.h.position.y}}
class vb extends T{constructor(a,b,c){super(a,b,c);b=new I(a,I.a.Aa,[new Va([new F(0,0),new F(450,250),new F(90,425),new F(0,0)],"",Z.a.Qa)],b,c,!0,!1);b.width=450;b.height=425;b.position.x=(a.b.h.width-b.width)/2;b.position.y=(a.b.h.height-b.height)/2;this.o(b);b=new yb(a,0,0,"Information Super Highway",void 0,a.f);b.position.x=(a.b.h.width-b.width)/2;this.o(b);b=new yb(a,0,0,"Press any key");b.position.x=(a.b.h.width-b.width)/2;b.position.y=a.b.h.height-2*b.height;this.o(b);E(this.c.b,new Ta(b,
.3,-1,U.a,1,.3)).active=!0;var d=["w6","w6","w7"];b=[...d].concat(["w4"]);c=["w0","w1","w2"].concat(["w3"]);d=[...d].concat(["w5"]);let e=[[],c,b,d];b=[[0,0,2,1,0],[0,2,3,1,0],[2,3,0,1,0],[1,1,1,1,1],[0,0,0,1,0]];let f=[];[b,[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]],b].forEach(m=>{let n=new Na(a),p=new Xa(5,5,{frames:[],V:!1,qa:!0});for(let h=0;5>h;h++)for(let l=0;5>l;l++)if(m[l][h]){let q=p.i[h][l];q.V=!0;q.frames=e[m[l][h]]}Ga(n,p);n.width=p.s*a.f;n.height=p.v*a.f;this.o(n);
f.push(n)});let g=(5*f.length+(f.length-1))*a.f;f.forEach((m,n)=>{m.position.y=(this.c.b.h.height-m.height)/2;m.position.y+=(m.position.y+.5*m.height)/a.f*-a.O.ya;m.position.x=(m.position.y+.5*m.height)/a.f*-a.O.ya+(a.b.h.width-g)/2+g/f.length*n});E(a.b,new Ra(f[0],1,0,U.a,new F(f[0].position.x,-f[0].height),new F(f[0].position.x,f[0].position.y))).active=!0;E(a.b,new Ra(f[1],1,0,U.a,new F(f[1].position.x,a.b.h.height+f[1].height),new F(f[1].position.x,f[1].position.y))).active=!0;E(a.b,new Ra(f[2],
1,0,U.a,new F(f[2].position.x,-f[2].height),new F(f[2].position.x,f[2].position.y))).active=!0}}
class wb extends T{constructor(a,b,c){super(a,b,c);b=new jb;c=new lb;let d=new nb,e=new ab(a,100,100);a.b.L=e;this.a=new Na(a);this.o(this.a);a.b.jb.push(this.a);let f=new tb(b,c,d),g=new Ab,m=new Bb,n=new Cb,p=new Db,h=null,l=null,q=[],A=[],u=[],H=0,t=new eb(.1);a.b.ab.push(t);let w=new Ba(a,this),x=new zb(a,0,0,"Level Complete!",void 0,2*a.f),y=new zb(a,0,0,"Try Again!",void 0,2*a.f);w.addListener(this,()=>{A.forEach(v=>{v.navigate()});l.Sb()});t.H=()=>{let v=H;u.length<v&&(v=u.length);do{let z=
oa(u.length);S(u[z],!0);u.splice(z,1);v--}while(0<v);0===u.length?V(w):t.reset(!0)};y.H.addListener(this,()=>{r();this.g(C[L])});x.H.addListener(this,()=>{r();this.g(C[L])});let C=[new xb(10,5,5,0),new xb(20,10,6,0),new xb(30,15,7,0),new xb(40,20,8,0),new xb(50,25,9,1),new xb(60,30,10,1),new xb(70,35,11,1)],L=0,B=(v,z,K=1)=>{let D=z.s*(K+1)+1,J=z.v*(K+1)+1,X=new Xa(D,J,{frames:[],V:!1,qa:!0}),O=new ib(D,J);z.i.forEach((Y,sa)=>{Y.forEach((Kb,Lb)=>{Kb.ka.forEach((ca,ma)=>{if(ca){ca=f.l.W.P[ma].I;let bb=
(K+1)*sa+(1+K/2),Mb=(K+1)*Lb+(1+K/2),ta=bb-((K+1)*sa+1);for(let ua=-ta-1;ua<ta+1;ua++){let cb=bb+ua*(1-Math.abs(ca.x))+ca.x*(ta+Math.abs(Math.min(ca.x,0))),db=Mb+ua*(1-Math.abs(ca.y))+ca.y*(ta+Math.abs(Math.min(ca.y,0)));ma=X.i[cb][db];ma.V=!0;0===ma.frames.length&&(ma.frames=v,O.i[cb][db].filled=!0)}}})})});return{Nb:X,T:O}},r=()=>{t.reset(!1);u.length=0;Ea(this.a,a.b.L);ra(g,l);var v=this.a,z=l;v.ja.splice(G(v.ja,z),1);v.C.removeChild(z);Za(a.b.L,l);l=null;va(n,q);Ma(this.a,q);Fa(a.b.L,q);q.length=
0;va(m,A);Ma(this.a,A);Fa(a.b.L,A);A.length=0;ra(p,h);this.removeChild(h);h=null;this.removeChild(x);this.removeChild(y)};this.g=(v=C[L])=>{this.c.b.stop();var z=sb(f,v.size,v.size,v.Hb);z=B(["w0","w1","w2","w3"],z,3);Ga(this.a,z.Nb,a.b.L);Ja(this.a);this.a.a.forEach(O=>{O.forEach(Y=>{Y.visible&&(S(Y,!1),u.push(Y))})});H=Math.floor(.1*u.length);t.reset(!0);z=z.T;let K=[];z.forEach((O,Y,sa)=>{O.filled||K.push(new F(Y,sa))});var D=N(K);l=Q(g,{c:a,x:D.x*a.f,y:D.y*a.f,T:z});l.Wa.addListener(this,O=>{h.Ib(O);
S(O,!1);O.active=!1;q.some(Y=>Y.visible)||(L<C.length-1?L++:L=0,this.o(x),x.a(new F(a.b.h.position.x+a.b.h.width,a.b.h.position.y+(a.b.h.height-x.height)/2),new F(a.b.h.position.x+(a.b.h.width-x.width)/2,a.b.h.position.y+(a.b.h.height-x.height)/2),new F(a.b.h.position.x-x.width,a.b.h.position.y+(a.b.h.height-x.height)/2)),x.start(),l.Rb())});l.Va.addListener(this,()=>{this.o(y);y.a(new F(a.b.h.position.x+a.b.h.width,a.b.h.position.y+(a.b.h.height-y.height)/2),new F(a.b.h.position.x+(a.b.h.width-y.width)/
2,a.b.h.position.y+(a.b.h.height-y.height)/2),new F(a.b.h.position.x-y.width,a.b.h.position.y+(a.b.h.height-y.height)/2));y.start()});Ia(a.b.L,l);for(D=0;D<v.Jb;D++){var J=Q(m,{c:a,x:0,y:0,ib:K,T:z});A.push(J);Ia(a.b.L,J);La(this.a,J)}D=[...K];for(J=0;J<v.Pb;J++){let O=oa(D.length);var X=D[O];X=Q(n,{c:a,rb:X.x,sb:X.y});q.push(X);D.splice(O,1);Ia(a.b.L,X);La(this.a,X)}h=Q(p,{c:a,x:0,y:0,T:z,Ob:q,mb:l});this.o(h);La(this.a,l);this.c.b.start()}}}
class Eb extends I{constructor(a,b,c,d,e=2/3*a.f,f=2/3*a.f){super(a,I.a.ia,b,c,d,!1,void 0,!0,e,f);this.A=new Ba(a,this)}}
class Fb extends Eb{static get G(){return 32}constructor(a,b,c){super(a,["pg"],0,0,a.f/3,a.f/8);this.position.x=b*a.f+(a.f-this.width)/2;this.position.y=c*a.f+(a.f-this.height)/2;this.$a=!1;this.B=new F(1,1);this.g=new F(.75,.75);this.a=E(a.b,new Sa(this,.5,-1,U.g,this.B,this.g));this.a.active=!0}reset(){super.reset();this.a.active=!1;Pa(this.a)}set(a){super.set(a);this.position.x=a.rb*this.c.f+(this.c.f-this.width)/2;this.position.y=a.sb*this.c.f+(this.c.f-this.height)/2;this.a.active=!0}}
class Ka extends Eb{static get G(){return 2}constructor(a,b,c,d){super(a,["p2"],b,c);this.position.x+=(a.f-this.width)/2;this.position.y+=(a.f-this.height)/2;this.Wa=new Ba(a,this);this.Va=new Ba(a,this);this.B=3*this.c.f;let e=new F(1,1),f=new F(0,0),g=E(a.b,new Sa(this,.5,0,U.a,e,f)),m=E(this.c.b,new Ta(this,.2,11,U.a,1,.2)),n=!0;this.N=!1;this.la=1;let p=!0;m.H=()=>{n=!1};g.H=()=>{V(this.Va)};this.Rb=()=>{n=!0;this.speed.x=0;this.speed.y=0;this.active=!1};this.A.addListener(this,()=>{g.ba(e,f);
g.active=!1;m.ba(1,.2);n=!0;this.a.left=!1;this.a.right=!1;this.a.Ma=!1;this.a.Fa=!1;this.active=p=!0});this.Sb=()=>{this.N=!0;m.active=!0};this.g=new F(0,0);this.g.x=d.s*a.f;this.g.y=d.v*(a.f+(a.O.za+1));this.Ja.addListener(this,(h,l)=>{!p||n||g.active||l.constructor.G!==Gb.G?l.constructor.G===Fb.G&&p&&V(this.Wa,l):(g.active=!0,p=!1)});this.a={left:!1,right:!1,Ma:!1,Fa:!1};this.M.fa=h=>{if(39===h.keyCode||"d"===h.key||"D"===h.key)this.a.right=!0;else if(37===h.keyCode||"a"===h.key||"A"===h.key)this.a.left=
!0;if(38===h.keyCode||"w"===h.key||"W"===h.key)this.a.Ma=!0;else if(40===h.keyCode||"s"===h.key||"S"===h.key)this.a.Fa=!0};this.M.ma=h=>{if(39===h.keyCode||"d"===h.key||"D"===h.key)this.a.right=!1;else if(37===h.keyCode||"a"===h.key||"A"===h.key)this.a.left=!1;else if(38===h.keyCode||"w"===h.key||"W"===h.key)this.a.Ma=!1;else if(40===h.keyCode||"s"===h.key||"S"===h.key)this.a.Fa=!1};this.Da=Ca.G+Gb.G+Fb.G}update(){this.N&&(this.speed.x=0,this.speed.y=0,this.a.right?this.speed.x=this.B:this.a.left&&
(this.speed.x=-this.B),this.a.Ma?this.speed.y=-this.B:this.a.Fa&&(this.speed.y=this.B));this.c.b.h.position.x=this.g.x<this.c.canvas.width?this.aa:this.m.x+this.c.canvas.width/2>this.g.x?this.g.x+this.aa-this.c.canvas.width:this.m.x>this.c.canvas.width/2?this.m.x+this.aa-this.c.canvas.width/2:this.aa;this.c.b.h.position.y=this.g.y<this.c.canvas.height?0:this.m.y+this.ca+this.c.canvas.height/2>this.g.y?this.g.y-this.c.canvas.height:this.m.y+this.ca>this.c.canvas.height/2?this.m.y+this.ca-this.c.canvas.height/
2:0}reset(){super.reset();this.Wa.a.length=0;this.Va.a.length=0}set(a){super.set(a);this.g.x=a.T.s*this.c.f;this.g.y=a.T.v*(this.c.f+(this.c.O.za+1));this.position.x+=(this.c.f-this.width)/2;this.position.y+=(this.c.f-this.height)/2;this.scale.x=1;this.scale.y=1;this.N=!1;V(this.A)}}
class Gb extends Eb{static get G(){return 4}constructor(a,b,c,d,e){super(a,["p1"],b,c);let f=new jb,g=new lb,m=new nb;this.la=1;let n=!1,p=d,h=e,l=null;this.A.addListener(this,(y,C)=>{p=y;h=C;u=0;H=null;n=!1;q()});let q=()=>{var y=[...p],C=null;let L=0;for(C=!1;!C;)L=oa(y.length),a.b.L.i[y[L].x][y[L].y].U.some(B=>{if(B.constructor.G===Ka.G||B.constructor.G===Gb.G)return!0})?y.splice(L,1):C=!0;C=y[L];y.splice(L,1);l=Q(m,{l:h,start:C,end:N(y),D:null,F:f,X:g});y=l.process();A=JSON.parse(JSON.stringify(l.D[y.lb]));
ra(m,l);t=A.u[u].position;this.position.x=t.x*a.f+(a.f-this.width)/2;this.position.y=t.y*a.f+(a.f-this.height)/2},A=null,u=0,H=null,t=null,w=1.5*a.f,x=new M;q();this.navigate=()=>{let y=!1,C=x.P[A.u[u].direction-1].I;H!==C&&(this.position.x=this.R.x*a.f+(a.f-this.width)/2,this.position.y=this.R.y*a.f+(a.f-this.height)/2);n?(this.speed.x=-C.x*w,this.speed.y=-C.y*w,0===u?(u=-1,n=!1):H=C):(this.speed.x=C.x*w,this.speed.y=C.y*w,0===C.x&&0===C.y?(n=!0,u--,y=!0):H=C);return y};this.kb.addListener(this,
()=>{n?u--:u++;this.navigate()&&this.navigate()});this.Da=Ka.G}reset(){super.reset();this.Ja.a.length=0}set(a){super.set(a);V(this.A,a.ib,a.T)}}
class Hb extends T{constructor(a,b,c,d,e,f){super(a,b,c);let g=new I(a,I.a.Aa,null,0,0,!0);g.frames.length=0;this.o(g);let m=new T(a,0,0);this.o(m);let n=new T(a,0,0);this.o(n);let p=this.c.canvas.width/5,h=d,l=p/h.s,q=[],A=new Ib,u=new Jb,H=f,t=null;this.a=new Ba(a,this);this.Ib=B=>{B=G(q,B,r=>r.ua);if(0<=B){let r=q[B];ra(A,r);m.removeChild(r);q.splice(B,1)}};this.a.addListener(this,(B,r)=>{w.length=0;x.length=0;g.frames.length=0;h=B;l=p/h.s;va(A,q);za(m,q);q.length=0;H=r;ra(u,t);n.removeChild(t);
t=null;y();C();L()});let w=[],x=[],y=()=>{h.i.forEach((r,v)=>{for(r=0;r<h.v;r++)if(h.i[v][r].filled){let K=new F(v,r);var z=void 0;let D=!1,J=r+1;for(;!D&&J<h.v;){z=h.i[v][J];if(!z.filled||z.filled&&J===h.v-1)D=!0,1<J-r&&(z=new F(v,J),J===h.v-1&&z.y++,w.push([K,z]));J++}r=J}});for(let r=0;r<h.v;r++)for(let v=0;v<h.s;v++)if(h.i[v][r].filled){let z=new F(v,r);var B=null;let K=!1,D=v+1;for(;!K&&D<h.s;){B=h.i[D][r];if(!B.filled||B.filled&&D===h.s-1)K=!0,1<D-v&&(B=new F(D,r),D===h.s-1&&B.x++,x.push([z,
B]));D++}v=D}w.forEach(r=>{g.frames.push(Ua(r[0].x*l,r[0].y*l,l,(r[1].y-r[0].y)*l,void 0,Z.a.Oa))});x.forEach(r=>{g.frames.push(Ua(r[0].x*l,r[0].y*l,(r[1].x-r[0].x)*l,l,void 0,Z.a.Oa))})},C=()=>{e.forEach(B=>{B=Q(A,{c:a,Ga:B.R.x,Ha:B.R.y,S:l,ua:B});m.o(B);q.push(B)})},L=()=>{t=Q(u,{c:a,Ga:H.R.x,Ha:H.R.y,S:l,na:H});n.o(t)};y();C();L()}update(){this.position.x=this.c.b.h.position.x;this.position.y=this.c.b.h.position.y}set(a){super.set(a);V(this.a,a.T,a.mb)}}
function Nb(a){a.frames.length=0;a.frames.push(Ua(0,0,a.size,a.size,null,a.g))}class Ob extends I{constructor(a,b,c,d,e,f){super(a,I.a.Aa,null,0,0,e);this.S=d;this.size=.75*d;this.a=(d-this.size)/2;this.position.x=b*d+this.a;this.position.y=c*d+this.a;this.g=f;Nb(this)}set(a){super.set(a);this.S=a.S;this.size=.75*a.S;this.position.x=a.Ga*a.S+this.a;this.position.y=a.Ha*a.S+this.a;Nb(this)}}
class Pb extends Ob{constructor(a,b,c,d,e){super(a,b,c,d,!0,Z.a.Pa);this.ua=e}set(a){super.set(a);this.ua=a.ua}}class Qb extends Ob{constructor(a,b,c,d,e){super(a,b,c,d,!0,Z.a.Qa);this.na=e}update(){this.position.x=this.S/this.c.f*this.na.position.x;this.position.y=this.S/this.c.f*this.na.position.y}set(a){super.set(a);this.na=a.na}}class Ib extends R{constructor(){super()}a(a){return new Pb(a.c,a.Ga,a.Ha,a.S,a.ua)}}
class Jb extends R{constructor(){super()}a(a){return new Qb(a.c,a.Ga,a.Ha,a.S,a.na)}}class Cb extends R{constructor(){super()}a(a){return new Fb(a.c,a.rb,a.sb)}}class Ab extends R{constructor(){super()}a(a){return new Ka(a.c,a.x,a.y,a.T)}}class Bb extends R{constructor(){super()}a(a){return new Gb(a.c,a.x,a.y,a.ib,a.T)}}class Db extends R{constructor(){super()}a(a){return new Hb(a.c,a.x,a.y,a.T,a.Ob,a.mb)}}let Rb=Math.atan2(3,4);
(new Z(20,9.375,64,{ya:30*-Math.cos(Rb),za:30*-Math.sin(Rb),Ba:Math.atan(23/12)})).m();
