<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>SPACE ARCADE</title><script>function HH(){this.A=function(e){for(var f=0;24>f;f++)this[String.fromCharCode(97+f)]=e[f]||0;0.01>this.c&&(this.c=0.01);e=this.b+this.c+this.e;0.18>e&&(e=0.18/e,this.b*=e,this.c*=e,this.e*=e)}}var UU=new function(){this.z=new HH;var e,f,d,h,j,w,I,J,K,y,k,L;this.reset=function(){var b=this.z;h=100/(b.f*b.f+0.001);j=100/(b.g*b.g+0.001);w=1-0.01*b.h*b.h*b.h;I=1E-6*-b.i*b.i*b.i;b.a||(k=0.5-b.n/2,L=5E-5*-b.o);J=1+b.l*b.l*(0<b.l?-0.9:10);K=0;y=1==b.m?0:2E4*(1-b.m)*(1-b.m)+32};this.C=function(){this.reset();var b=this.z;e=1E5*b.b*b.b;f=1E5*b.c*b.c;d=1E5*b.e*b.e+12;return 3*((e+f+d)/3|0)};this.B=function(b,M){var a=this.z,N=1!=a.s||a.v,o=0.1*a.v*a.v,O=1+3E-4*a.w,l=0.1*a.s*a.s*a.s,V=1+1E-4*a.t,W=1!=a.s,X=a.x*a.x,Y=a.g,P=a.q||a.r,Z=0.2*a.r*a.r*a.r,B=a.q*a.q*(0>a.q?-1020:1020),Q=a.p?(2E4*(1-a.p)*(1-a.p)|0)+32:0,$=a.d,R=a.j/2,aa=0.01*a.k*a.k,C=a.a,D=e,ba=1/e,ca=1/f,da=1/d,a=5/(1+20*a.u*a.u)*(0.01+l);0.8<a&&(a=0.8);for(var a=1-a,E=!1,S=0,s=0,t=0,z=0,q=0,u,r=0,g,m=0,p,F=0,c,T=0,n,G=0,A=Array(1024),v=Array(32),i=A.length;i--;)A[i]=0;for(i=v.length;i--;)v[i]=2*Math.random()-1;for(i=0;i<M;i++){if(E)return i;Q&&++T>=Q&&(T=0,this.reset());y&&++K>=y&&(y=0,h*=J);w+=I;h*=w;h>j&&(h=j,0<Y&&(E=!0));g=h;0<R&&(G+=aa,g*=1+Math.sin(G)*R);g|=0;8>g&&(g=8);C||(k+=L,0>k?k=0:0.5<k&&(k=0.5));if(++s>D)switch(s=0,++S){case 1:D=f;break;case 2:D=d}switch(S){case 0:t=s*ba;break;case 1:t=1+2*(1-s*ca)*$;break;case 2:t=1-s*da;break;case 3:t=0,E=!0}P&&(B+=Z,p=B|0,0>p?p=-p:1023<p&&(p=1023));N&&O&&(o*=O,1E-5>o?o=1E-5:0.1<o&&(o=0.1));n=0;for(var ea=8;ea--;){m++;if(m>=g&&(m%=g,3==C))for(u=v.length;u--;)v[u]=2*Math.random()-1;switch(C){case 0:c=m/g<k?0.5:-0.5;break;case 1:c=1-2*(m/g);break;case 2:c=m/g;c=6.28318531*(0.5<c?c-1:c);c=1.27323954*c+0.405284735*c*c*(0>c?1:-1);c=0.225*((0>c?-1:1)*c*c-c)+c;break;case 3:c=v[Math.abs(32*m/g|0)]}N&&(u=r,l*=V,0>l?l=0:0.1<l&&(l=0.1),W?(q+=(c-r)*l,q*=a):(r=c,q=0),r+=q,z+=r-u,c=z*=1-o);P&&(A[F%1024]=c,c+=A[(F-p+1024)%1024],F++);n+=c}n*=0.125*t*X;b[i]=1<=n?32767:-1>=n?-32768:32767*n|0}return M}};window.jsfxr=function(e){UU.z.A(e);var f=UU.C(),e=new Uint8Array(4*((f+1)/2|0)+44),f=2*UU.B(new Uint16Array(e.buffer,44),f),d=new Uint32Array(e.buffer,0,44);d[0]=1179011410;d[1]=f+36;d[2]=1163280727;d[3]=544501094;d[4]=16;d[5]=65537;d[6]=44100;d[7]=88200;d[8]=1048578;d[9]=1635017060;d[10]=f;for(var f=f+44,d=0,h="data:audio/wav;base64,",x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";d<f;d+=3)var j=e[d]<<16|e[d+1]<<8|e[d+2],h=h+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[j>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[j>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[j>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[j&63]);return h};</script><style>html,
    body {
      width: 100%;
      height: 100%;
      margin: 0px;
      border: 0;
      overflow: hidden;
      display: block;
      background: black;
    }</style></head><body><canvas id=c></canvas><canvas id=menu></canvas><script>const e=({height:e=5,...t}={},n)=>{if(!t)return void console.error("No font provided!");if(!n)return void console.error("No context provided");return(o,r=0,a=0,i=24,l="#000")=>{console.debug("Rendering string",o),[...o].reduce(((o,c)=>{const f=i/e,u=t[c.charCodeAt()]||"",s=u>0?u:u.codePointAt();const d=(s||0).toString(2),h=Math.ceil(d.length/e),g=o+f,p=((e,t)=>e.match(new RegExp(`.{${t}}`,"g")))(d.padStart(h*e,0),e);return console.debug("Rendering char",c,c.charCodeAt(),u,s,p),p.map(((e,t)=>[...e].map(((e,o)=>{n.fillStyle=+e?l:"transparent",n.fillRect(r+g+t*f,a+o*f,f,f)})))),o+(h+1)*f}),0)}},t=[...Array(33),29,,,,,,12,,,,"ᇄ",3,"ႄ",1,1118480,"縿",31,"庽","嚿","炟","皷","纷","䈟","线","皿",17,,,"⥊",,"䊼",,"㹏","纮","縱","縮","纵","纐","񴚦","粟","䟱","丿",1020241,"簡",33059359,1024159,"縿","纜","񼙯","繍","皷","䏰","簿",25363672,32541759,18157905,"惸",18470705,,,,,"С"];function n(e){let t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1)},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0)},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}function o(e){let t=e.data,n=t.length;for(i=0;i<n;i+=4)t[i+3]=t[i+3]<127.5?0:255;return t}const r=e=>Math.random()<e/100;function a(e,t){return e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.y+e.h>t.y}function l(e,t,n){let o=2+(r(50)?1:0),a=Math.random()*(2*Math.PI),i=o*Math.cos(a),l=o*Math.sin(a),c=0;return{update:function(){return e+=i,t+=l,c++<20},draw:function(o){o.fillStyle=n,o.fillRect(e,t,1,1)}}}function f(e,t,n,o,a,i){let c=function(e,t,n){let o=[];for(let r=0;r<e*t;r++)o.push(n&1<<r);return{getPixelAt:(t,n)=>(t>=e&&(t=2*e-2-t),o[n*e+t])}}(n,o,a),f=0,s=0,d={x:e,y:t,w:2*(n=2*n-1),h:2*o},h=function(){let e=u(0,360),t=u(42,98),n=u(40,90);return`hsl(${e},${t}%,${n}%)`}(),g=r(50)?-n:n,p={x:e+d.w/2,y:t+d.h/2};return{bounds:d,origin:p,update:function(n){if(s=r(25)?r(75)?1:2:0,f=r(.5)?g:0,r(.1)&&(g*=-1),(e+=f)<0&&(e=0),e+d.w>1024&&(e-=d.w),d.x=e,d.y=t+=s,p.x=e+d.w/2,p.y=t+d.h/2,t>318){if(n.getPixelAlpha(p.x,p.y))return n.explode(p.x,p.y-1.5*d.h,2*d.h),!1}return!0},draw:function(r){r.fillStyle=h;for(let a=0;a<n;a++)for(let n=0;n<o;n++)c.getPixelAt(a,n)&&r.fillRect(e+2*a,t+2*n,2,2)},explode:function(){let a=t/352,i=[];for(let f=0;f<n;f++)for(let n=0;n<o;n++)c.getPixelAt(f,n)&&r(50+50*a)&&i.push(l(e+2*f,t+2*n,h));return i},getSector:()=>i}}function u(e,t){return Math.floor(Math.random()*(t-e+1))+e}const s=1e3/60;function d(e,t,n,o){if(t+1==n)return;let r=Math.floor((t+n)/2);e[r]=Math.round((e[t]+e[n])/2+(2*Math.random()-1)*o),d(e,t,r,o*=.65),d(e,r,n,o)}function h(e,t,n,r,a){let i=["#055dd7","#568d2e","#c43653","#b6213d"],l=0;e.clearRect(0,0,t,n),e.fillStyle=i[l++],e.fillRect(0,r-8,t,n-(r-8));let c=128,f=Math.floor(t/c),u=Math.floor((t-f*c)/2),s=new Array(129).fill(r);d(s,0,c,a),e.fillStyle=i[l++],e.beginPath(),e.moveTo(0,r);for(let t=0;t<s.length;t++)e.lineTo(u+f*t,s[t]);e.lineTo(t,r),e.lineTo(t,n),e.lineTo(0,n),e.lineTo(0,r),e.fill(),e.fillStyle=i[l++],e.beginPath(),e.moveTo(0,r);for(let t=0;t<s.length;t++)e.lineTo(u+f*t,n-.75*(n-s[t]));e.lineTo(t,r),e.lineTo(t,n),e.lineTo(0,n),e.lineTo(0,r),e.fill(),e.strokeStyle="#d42449",e.lineWidth=4,e.beginPath(),e.moveTo(0,n-92),e.lineTo(t,n-92),e.stroke(),e.fillStyle=i[l++],e.fillRect(0,n-92,t,92);let h=e.getImageData(0,0,t,n);return{imageData:h,pixels:o(h)}}c.width=1024,c.height=512,c.style["image-rendering"]="pixelated",c.style.display="none";let g=c.getContext("2d");g.imageSmoothingEnabled=!1;let p=.89,x=0,m=0,y={scale:p,angle:m,offX:.5,offY:x,easing:.3},w=.24,R=.95,T=!1,E=0,S=[],P=[],A=[],v=function(e,t){const n=document.createElement("canvas");n.width=e,n.height=t,n.style.height=window.innerHeight-30+"px",document.body.appendChild(n);const o=n.getContext("webgl",{alpha:!1});let r,a,i;return{init:function(n,l){let c=o.createShader(o.VERTEX_SHADER),f=o.createShader(o.FRAGMENT_SHADER),u=o.createProgram(),s=o.createBuffer(),d=o.createTexture();o.shaderSource(c,"\nattribute vec2 aVertPos;\nvarying vec2 vTexCoord;\nvoid main() {\n  vTexCoord=(aVertPos+1.0)*0.5;\n  gl_Position=vec4(aVertPos,0,1);\n}"),o.compileShader(c),o.shaderSource(f,"\nprecision mediump float;\nvarying vec2 vTexCoord;\nuniform sampler2D uSampler;\nuniform vec2 uRes;\nuniform vec2 uOff;\nuniform float uScale;\nuniform float uAngle;\n#define PI 3.14159265358979323844\nfloat hash(vec2 co){return fract(sin(dot(co,vec2(12.9898, 78.233)))*43758.5453);}\nfloat hash(float x,float y){return hash(vec2(x, y));}\nfloat draw_circle(vec2 coord,float radius){\n  return step(length(coord),radius);\n}\nvoid main() {\n  vec2 pos=gl_FragCoord.xy/uRes;\n  vec2 p=(pos-uOff)*uScale; \n  float circle=draw_circle(p,1.0);\n  float r=length(p);\n  float a=0.25-atan(p.y,p.x)/(PI*2.0)+uAngle;\n  vec4 color=texture2D(uSampler,vec2(a, r));\n  vec2 co=gl_FragCoord.xy/float(uRes.y);\n  vec3 col=vec3(0.0);\n  vec2 sco=co*500.0;\n  if(hash(floor(sco))<0.005){\n    float s1=hash(floor(sco)*floor(sco));\n    float s2=max(1.-2.*distance(vec2(0.5),fract(sco)),0.0);\n    col+=vec3(s1*s2);\n  }\n  if(color.xyz==vec3(0.0))color.xyz+=col;\n  gl_FragColor=vec4(color.xyz*vec3(circle),1.0);\n}"),o.compileShader(f),o.attachShader(u,c),o.attachShader(u,f),o.linkProgram(u),o.useProgram(u),o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),o.STATIC_DRAW);let h=o.getAttribLocation(u,"aVertPos"),g=o.getUniformLocation(u,"uSampler"),p=o.getUniformLocation(u,"uRes");i=o.getUniformLocation(u,"uOff"),r=o.getUniformLocation(u,"uScale"),a=o.getUniformLocation(u,"uAngle"),o.enableVertexAttribArray(h),o.vertexAttribPointer(h,2,o.FLOAT,!1,0,0),o.uniform1i(g,0),o.uniform2f(p,e,t),o.uniform2f(i,n.offX,n.offY),o.uniform1f(r,n.scale),o.uniform1f(a,n.angle),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,d),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l)},draw:function(e){o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,e),o.drawArrays(o.TRIANGLE_STRIP,0,4)},setScale:function(e){o.uniform1f(r,e)},setAngle:function(e){o.uniform1f(a,e)},setOffset:function(e,t){o.uniform2f(i,e,t)}}}(1024,1024),M=function(e,t){let n,o=0;function r(t,o){let r=4*(o*e+t);return n.pixels[r+3]}function a(t,o){let r=4*(o*e+t);n.pixels[r]=0,n.pixels[r+1]=0,n.pixels[r+2]=0,n.pixels[r+3]=0}return speed=2,{init:function(o){n=h(o,e,t,t-160,34)},update:()=>{o+=0,o>=e&&(o=0),o<=-e&&(o=0)},draw:t=>{t.putImageData(n.imageData,o,0),o>0?t.putImageData(n.imageData,o-e,0):o<0&&t.putImageData(n.imageData,o+e,0)},getPaddleHeight:e=>{let n=t;for(;0!==r(e,n);)n--;return n},getPixelAlpha:r,explode:function(e,t,n){for(xPos=e-n;xPos<=e+n;xPos++)for(yPos=t-n;yPos<=t+n;yPos++)Math.pow(xPos-e,2)+Math.pow(yPos-t,2)<n*n&&0!==r(xPos,yPos)&&a(xPos,yPos)}}}(1024,512),b=function(e){let t,n=16,r=0,a=512,i=0,l=0,c=1,f=()=>Math.round((r%1024+1024)%1024),u={x:r-4,y:a-4,w:8,h:4};return{hitBox:u,init:function(e){e.clearRect(0,0,n,8),e.fillStyle="#F5F5F5",e.beginPath(),e.moveTo(0,8),e.lineTo(8,0),e.lineTo(n,8),e.fill();let r=e.getImageData(0,0,n,8);o(r),createImageBitmap(r).then((e=>t=e))},update:function(t){i+=l,i*=e,r+=i;let n=f();a=t.getPaddleHeight(n)-c,u.x=n-4,u.y=a-4,c=1},draw:function(e){if(t){let o=f(),r=o-8;r<0&&e.drawImage(t,1024+r,a-8),r=8-(1024-o),r>=0&&e.drawImage(t,r-n,a-8),e.drawImage(t,o-8,a-8)}},getPosRatio:()=>r/1024,getAngleRatio:()=>f()/1024,setVelX:e=>i=e,getVelX:()=>i,setAccX:e=>l=e,getBulletSpawnPos:function(){return c=0,{x:f(),y:a-8}},setFriction:t=>{e=t}}}(R),_=function(e,t){let n=new Array(e).fill(0),o=Math.round(1024/e),a=0,i=0;return{getSpawnPos:function(){r(1)&&(i=Math.floor(Math.random()*e));let l=function(t){let n=[t],o=(e-1)/2;for(let a=1;a<=o;a++){let o=(t+a)%e,i=t-a;i<0&&(i=e+i),r(50)?n.push(o,i):n.push(i,o)}return n}(i),c=l.shift();for(;!(n[c]<t);)c=l.shift();return n[c]++,a++,{x:c*o+Math.round(Math.random()*o),sector:c}},decreaseSectorCount:function(e){n[e]--,a--},canSpawn:()=>a<t*e}}(7,20),D=function(){menu.width=1024,menu.height=30;let n=menu.getContext("2d"),o=e(t,n);function r(e){n.fillStyle="black",n.fillRect(0,0,1024,30),o(e,0,5,20,"white")}return r(""),{writeLine:r}}(),U=function(){let e=!1,t=jsfxr([2,0,.22489224400401017,.09549238635077185,.23635858232669682,.7904206221041251,.22076118216218082,-.334590885536479,0,0,0,0,0,.14268572930257606,.1407204766846248,0,0,0,1,0,0,.023957396765223016,0,.5]),n=new Audio;n.src=t;let o=jsfxr([3,0,.10620194759539255,.7098552264702449,.19705566552118225,.23804260137273073,0,.29205304349669536,0,0,0,0,0,0,0,0,.5381613843694975,-.28664236647301367,1,0,0,0,0,.5]),r=new Audio;return r.src=o,{playHit:()=>{e||r.play()},playPew:()=>{e||n.play()},switchMute:()=>e=!e}}(),X=function(e,t,n){let o=s,r=0,a=!0;return e(),function e(){if(!a)return;requestAnimationFrame(e);let i=performance.now(),l=i-r;for(r=i,o+=l,o>33.333333333333336&&(o=33.333333333333336);o>=s;)t(),o-=s;n()}(),{stop:()=>a=!1}}((function(){D.writeLine(`SCORE: ${E}`),b.init(g),M.init(g);for(let e=0;e<60;e++)_.canSpawn()&&C();v.init(y,c)}),(function(){M.update(),b.update(M),S=S.filter((e=>{let t=e.update(M);if(t){a(e.bounds,b.hitBox)&&(E++,D.writeLine(`SCORE: ${E}00`),t=!1)}if(t){let{bounds:t}=e;t.y+t.h>420&&(D.writeLine(`SCORE: ${E}00 - GAME OVER - PRESS R TO RESTART`),X.stop())}else U.playHit(),_.decreaseSectorCount(e.getSector()),A.push(...e.explode());return t})),P=P.filter((e=>{let t=e.update();for(let t=S.length-1;t>-1;t--){let n=S[t];if(a(n.bounds,e.bounds)){U.playHit(),E++,D.writeLine(`SCORE: ${E}00`),_.decreaseSectorCount(n.getSector()),A.push(...n.explode()),S.splice(t,1);break}}let{origin:n}=e;if(n.y>352){let e=Math.round(n.x);M.getPixelAlpha(e,n.y)&&M.explode(e,n.y,4)}return t})),(S.length<60||r(2))&&_.canSpawn()&&C();A=A.filter((e=>e.update()));let e=y.scale;Math.abs(p-e)>.001&&(e+=(p-e)*y.easing/2,v.setScale(y.scale=e));let t=y.offY;Math.abs(x-t)>.001&&(t+=(x-t)*y.easing/2,v.setOffset(y.offX,y.offY=t));let n=y.angle;if(Math.abs(m-n)>.001)n+=(m-n)*y.easing/2,v.setAngle(y.angle=n);else{let e=b.getPosRatio()%1,t=y.angle;t<0&&e>.5&&(e-=1),Math.abs(e-t)>.25&&(O(),T||(T=!0))}T&&Math.abs(b.getVelX())<.01&&G()}),(function(){g.clearRect(0,0,1024,512),M.draw(g),b.draw(g),S.forEach((e=>e.draw(g))),P.forEach((e=>e.draw(g))),A.forEach((e=>e.draw(g))),v.draw(c)}));function C(){let e=_.getSpawnPos(),t=f(e.x,Math.round(64*Math.random()),3,5,Math.floor(32768*Math.random()),e.sector);S.push(t)}let I=n(37),L=n(39),F=n(16),B=n(32),H=n(77),N=n(82);function O(){m=0,p=1.41,x=.5}function G(){m=b.getPosRatio()%1,m>.5?m-=1:m<-.5&&(m=1+m),p=.89,x=0,T=!1}I.press=()=>b.setAccX(-w),I.release=()=>b.setAccX(0),L.press=()=>b.setAccX(w),L.release=()=>b.setAccX(0),B.press=()=>{U.playPew();let{x:e,y:t}=b.getBulletSpawnPos();P.push(function(e,t,n,o){let r={x:e-1,y:t-1,w:2,h:2},a={x:e,y:t};return{bounds:r,origin:a,update:function(){return a.x=e+=Math.random()-.5,a.y=t+=n,r.x=e-1,r.y=t-1,t>=0},draw:function(e){e.fillStyle=o,e.fillRect(r.x,r.y,2,2)}}}(e,t,-4,"red"))},H.press=()=>{U.switchMute()},N.press=()=>{window.location.reload()},F.press=O,F.release=G;</script></body></html>