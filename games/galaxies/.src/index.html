<!DOCTYPE html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Galaxies</title><style>*{user-select:none;-webkit-user-select:none}body{background:#000;color:#fff;font-family:sans-serif;font-size:max(1rem,3vmin);font-weight:700;margin:0;overflow:hidden;text-shadow:0 0 .1em #000}.n{align-items:center;background:#05000d;display:flex;inset:0;justify-content:center;position:fixed;z-index:1000}.c{align-items:center;border:1px solid;border-radius:.25em;cursor:pointer;display:flex;justify-content:center;max-width:40vw;min-width:5em;padding:.5em 1em;text-align:center;transition:all .2s ease}.r,.q{--p:max(25px, 1em);position:fixed;transition:all .2s ease;z-index:1}.q{display:flex;left:50%;top:var(--p);transform:translateX(-50%)}.r{align-items:center;bottom:var(--p);display:flex;justify-content:space-between;left:var(--p);right:var(--p)}.o{border-radius:.25em 0 0 .25em}.j{border-left:none;border-radius:0}.p{border-left:none;border-radius:0 .25em .25em 0}.e .c,.k .c,.d{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:rgba(5,0,13,.7)}.c:hover{background:rgba(25,0,25,.7)}.c.b,.c:active,.c:focus{box-shadow:0 0 2em #fffa inset,0 0 1em #fffa inset}.m{align-items:center;display:flex;inset:0;justify-content:center;position:fixed;z-index:100}.d{align-items:center;border-radius:.5vmin;box-shadow:0 0 2vmin #000;display:flex;flex-direction:column;max-width:30em;min-width:10em;padding:2em}h1,h3{margin-top:0;text-align:center}h1{margin-bottom:2em;text-shadow:0 0 .1em #000,0 0 1em #000}.s{align-items:center;display:flex;font-size:12vh;inset:0;justify-content:center;margin:0;pointer-events:none;position:fixed;transition:all .5s ease}.e .c+.c{margin-top:.5em}.l{opacity:0;pointer-events:none}.w{top:auto}.w .d{align-self:flex-end}.w .l{display:none}p:first-child{margin-top:0}.grid{display:flex;gap:.5em;margin-bottom:1em}.grid>div{display:flex;flex-direction:column;gap:.5em}</style><style></style><canvas></canvas><div class=n>Loading.</div><div class="m e"><div><h1>Galaxies</h1><div class="c t">Start</div><div class="c u">Tutorial</div></div></div><div class="m w l"><div class=d><div class=y><p>Your goal is to fill all spaces with galaxies, but there are rules:<p>All galaxies have to keep their rotational symmetry, cannot be destroyed and there cannot be any overlap.</div><div class="y l"><p>Drag a galaxy piece to a space to fill or to replace that space with the selected galaxy.<p>You'll notice that the galaxy will stay symmetrical, sometimes changing an other galaxy in the process as well if possible.</div><div class="y l"><p>To remove a galaxy piece, you can either drag empty spaces onto it, or drag pieces of the same galaxy onto each other.<p>The centers of galaxies cannot be removed.</div><div class="y l"><p>You cannot go over the edge of the board and another galaxy's center cannot be changed. If something does not work even though the space at the cursor is free, check at the galaxy's opposite end.</div><div class="y l"><p>Finally, if you are confident a space is filled with the correct galaxy, you can click/tap and hold for a bit to lock it in place.<p>Clicking/tapping a locked piece will unlock it.</div><div class="y l"><p>And that's it! Have fun!</div><div class="c x">Next</div><div class="c v l">Let's play</div></div></div><div class="m g l"><div class=d><div class=grid><div><h3>Size</h3><div class=c data-s=5>5x5</div><div class="c b" data-s=7>7x7</div><div class=c data-s=9>9x9</div><div class=c data-s=11>11x11</div><div class=c data-s=13>13x13</div></div><div><h3>Endless</h3><div class="c b" data-w=0>No</div><div class=c data-w=1>Yes</div></div><div><h3>Difficulty</h3><div class="c b" data-d=0>Normal</div><div class=c data-d=1>Ridiculous</div></div></div><div class="c z">Update</div></div></div><div class=k><h1 class="s l">Nice!</h1><div class="q l"><div class="c o">Restart</div><div class="c j">New game</div><div class="c p">Solve</div></div><div class=r><div class="c i l"></div><div class="c h l">Undo</div></div></div><script>function aa(a,b){let c=a.x,d=a.y,e=a.z;b=b.u;let f=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);return a.set((b[0]*c+b[4]*d+b[8]*e+b[12])*f,(b[1]*c+b[5]*d+b[9]*e+b[13])*f,(b[2]*c+b[6]*d+b[10]*e+b[14])*f)}function ba(a){let b=a.length();a.x/=b;a.y/=b;a.z/=b}function ca(a,b){return Math.sqrt((b.x-a.x)**2+(b.y-a.y)**2+(b.z-a.z)**2)}function da(a,b,c){a.set(b.y*c.z-b.z*c.y,b.z*c.x-b.x*c.z,b.x*c.y-b.y*c.x)}
class h{constructor(a,b,c){this.x=a;this.y=b;this.z=c}set(a,b,c){this.x=a;this.y=b;this.z=c;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this}length(){return Math.sqrt(this.x**2+this.y**2+this.z**2)}X(a){this.x*=a;this.y*=a;this.z*=a;return this}clone(){return new h(this.x,this.y,this.z)}M(){return new Float32Array([this.x,this.y,this.z])}}let ea=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],fa=new h,ha=new h,k=new h;function ia(a,b){a.u[12]=b.x;a.u[13]=b.y;a.u[14]=b.z;return a}
function ja(a,b){var c=b.u;b=c[0];let d=c[1],e=c[2],f=c[3],g=c[4],m=c[5],n=c[6],q=c[7],r=c[8],v=c[9],z=c[10],G=c[11],P=c[12],M=c[13],Q=c[14];c=c[15];let pa=b*m-d*g,qa=b*n-e*g,ra=b*q-f*g,sa=d*n-e*m,ta=d*q-f*m,ua=e*q-f*n,va=r*M-v*P,wa=r*Q-z*P,xa=r*c-G*P,ya=v*Q-z*M,za=v*c-G*M,Aa=z*c-G*Q,A=1/(pa*Aa-qa*za+ra*ya+sa*xa-ta*wa+ua*va);a.u.set([(m*Aa-n*za+q*ya)*A,(e*za-d*Aa-f*ya)*A,(M*ua-Q*ta+c*sa)*A,(z*ta-v*ua-G*sa)*A,(n*xa-g*Aa-q*wa)*A,(b*Aa-e*xa+f*wa)*A,(Q*ra-P*ua-c*qa)*A,(r*ua-z*ra+G*qa)*A,(g*za-m*xa+q*
va)*A,(d*xa-b*za-f*va)*A,(P*ta-M*ra+c*pa)*A,(v*ra-r*ta-G*pa)*A,(m*wa-g*ya-n*va)*A,(b*ya-d*wa+e*va)*A,(M*qa-P*sa-Q*pa)*A,(r*sa-v*qa+z*pa)*A])}class l{constructor(a=ea){this.u=new Float32Array(a)}clone(){return new l(this.u)}}let p=document.querySelector("canvas"),t=p.getContext("webgl");t.enable(2884);t.enable(3042);t.enableVertexAttribArray(0);let u,w,ka,la={size:7,I:0,j:!1};function x(a){return document.querySelector("."+a)}function y(a,b){a.classList.toggle("l",!b)}
let ma=x("e"),na=x("t"),oa=x("u"),Ba=x("v"),Ca=x("x"),Da=x("w"),B=x("g"),Ea=x("i"),Fa=x("z"),Ga=x("j"),Ha=x("o"),Ia=x("p"),Ja=x("h"),Ka=x("n"),La=x("q"),Ma=x("s"),Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua;function Va(){y(Ma,!0);setTimeout(()=>{y(Ma,!1)},5E3)}let C;
function Wa(){document.querySelectorAll(".c").forEach(a=>{a.classList.remove("b")});B.querySelector(`[data-s="${C.size}"]`).classList.add("b");B.querySelector(`[data-w="${+C.j}"]`).classList.add("b");B.querySelector(`[data-d="${C.I}"]`).classList.add("b")}
function Xa(){y(Ka,!1);na.onclick=()=>{y(ma,!1);y(Da,!1);Na()};oa.onclick=()=>{y(ma,!1);Oa()};Ca.onclick=()=>{let a=[...document.querySelectorAll(".y")],b=!1;for(let c=0;c<a.length;c++){let d=a[c];if(!d.classList.contains("l"))b=!0,y(d,!1);else if(b){y(d,!0);c===a.length-1&&(y(Ca,!1),y(Ba,!0));break}}};Ba.onclick=()=>{y(ma,!1);y(Da,!1);Pa()};Ea.onclick=()=>{C={...la};Wa();y(B,!0)};Ga.onclick=()=>{Sa()};Ja.onclick=()=>{Ra()};Ha.onclick=()=>{Ua()};Ia.onclick=()=>{Ta()};document.addEventListener("keypress",
a=>{"z"===a.key&&Ra()});B.onclick=a=>{a.target===B?y(B,!1):a.target.dataset.s?C.size=Number(a.target.dataset.s):a.target.dataset.w?C.j=Number(a.target.dataset.w):a.target.dataset.d?C.I=Number(a.target.dataset.d):a.target===Fa&&(Qa(),y(B,!1));Wa()}}let Ya=()=>{};function Za(a,b,c){return Math.min(Math.max(a,b),c)}function $a(a,b,c){for(;b<a-c/2;)b+=c;for(;b>a+c/2;)b-=c;return b}
function ab(a){for(let b=0;b<a.length;b++){let c=b+Math.floor(Math.random()*(a.length-b)),d=a[b];a[b]=a[c];a[c]=d}return a}function bb(a){for(let b of a)return a.delete(b),b;return null}async function cb(a){let b=document.createElement("canvas");b.width=512;b.height=512;await a(b.getContext("2d"));let c=await new Promise(d=>b.toBlob(d));return new Promise(d=>{let e=new Image;e.onload=()=>d(e);e.src=URL.createObjectURL(c)})}
function db(a,b){for(;a.h<a.g.length-1;){let [c,d,e=1]=a.g[a.h],[f,g]=a.g[a.h+1];if(c<=b&&b<f)return b=(b-c)/(f-c),b=1<e?b**e:1-(1-b)**(1/e),a.i?d*(g/d)**b:d+b*(g-d);a.h++}return a.g[a.g.length-1][1]}class eb{constructor(a,b=!1){this.g=a;this.i=b;this.reset()}reset(){this.h=0}}async function D(){Ka.textContent+=".";await new Promise(a=>requestAnimationFrame(a))}var fb=300,gb=300,hb=!1,E=!1,ib=Ya,jb=Ya,kb=Ya;function lb(a){fb=a.pageX;gb=a.pageY}
p.addEventListener("mousedown",a=>{hb&&0===a.button&&(lb(a),E=!0)});document.body.addEventListener("mouseup",a=>{hb&&0===a.button&&(lb(a),E=!1)});document.addEventListener("gesturestart",a=>{a.preventDefault()});let mb={};function nb(a){hb=!0;lb(a)}function ob(a){for(let b of a.changedTouches)delete mb[b.identifier];1>=a.touches.length&&(E=!1,kb())}document.body.addEventListener("mousemove",nb);
p.addEventListener("touchstart",function(a){document.body.removeEventListener("mousemove",nb);hb=!1;for(let b of a.changedTouches)mb[b.identifier]=b;1<a.touches.length?ib(mb):(lb(a.changedTouches[0]),E=!0)});p.addEventListener("touchmove",function(a){lb(a.touches[0]);let b={};for(let c of a.touches)b[c.identifier]=c;jb(b)});p.addEventListener("touchend",ob);p.addEventListener("touchcancel",ob);
function pb(a){a.O=3*Math.max(w.size/Math.tan(2*Math.atan(p.width/p.height*Math.tan(.25))),w.size/Math.tan(.5));a.ea=(w.j?1.6:1)*a.O}function qb(){var a=F;a.zoom=Za(a.zoom,16,a.ea);var b=new h(0,1,0);ia(a.v,a.P);var c=a.v,d=a.P;a=a.V;k.set(d.x-a.x,d.y-a.y,d.z-a.z);ba(k);da(fa,b,k);ba(fa);da(ha,k,fa);b=ha.x;d=k.x;a=fa.y;var e=ha.y,f=k.y,g=fa.z,m=ha.z,n=k.z;c=c.u;c[0]=fa.x;c[1]=a;c[2]=g;c[4]=b;c[5]=e;c[6]=m;c[8]=d;c[9]=f;c[10]=n}
function rb(a,b){var c=F;a=2*a/p.width-1;b=1-2*b/p.height;var d=c.v,e=new h;e.x=d.u[12];e.y=d.u[13];e.z=d.u[14];a=new h(a,b,.5);aa(aa(a,c.R),c.v);a.x-=e.x;a.y-=e.y;a.z-=e.z;ba(a);c=-e.z/a.z;e.x+=a.x*c;e.y+=a.y*c;e.z+=a.z*c;return e}
class sb{constructor(){this.v=new l;this.J=new l;this.R=new l;this.T=new l;this.i=this.h=this.y=this.x=0;this.zoom=1E3;document.addEventListener("wheel",this.fa.bind(this))}reset(){this.x=w.size-1;this.y=w.size-1;pb(this);this.zoom=this.O}get V(){return new h(this.x,this.y,0)}get P(){return new h(this.x,this.y-.1*this.zoom,this.zoom)}fa(a){w.j&&(this.zoom*=Math.pow(2,.04*Math.sign(a.deltaY)))}}let F=new sb,H=new window.AudioContext({sampleRate:22050}),tb=H.createDynamicsCompressor();tb.connect(H.destination);
let ub,I=H.sampleRate;function J(a){return Math.sin(2*Math.PI*a)}function vb(){return 2*Math.random()-1}function wb(a){return"number"===typeof a?[[0,a],[1,a]]:a}function xb(a,b){let c=0,d=0;for(let e=0;e<a.length;++e){let f=b(e/(a.length-1)),g=a[e],m=g*f[0]+c;a[e]=m;c=g*f[1]-m*f[3]+d;d=g*f[2]-m*f[4]}return a}
function yb(a,b,c=Math.SQRT1_2){let d=new eb(wb(b),!0),e=new eb(wb(c));return xb(a,f=>{var g=db(d,f),m=db(e,f);g=1/Math.tan(Math.PI*g/I);f=g*g;m=1/m;let n=1/(1+m*g+f);return[n,2*n,n,2*n*(1-f),n*(1-m*g+f)]})}function zb(){var a=K(L(.1,vb),[[0,.3,.2],[.5,0],[.501,.5,.2],[1,0]]);let b=new eb(wb(1800),!0),c=new eb(wb(3));return xb(a,d=>{var e=db(b,d),f=db(c,d);e=1/Math.tan(Math.PI*e/I);d=e*e;f=1/f;let g=1/(1+f*e+d);return[g*e*f,0,-g*e*f,2*g*(1-d),g*(1-f*e+d)]})}
function L(a,b){a=new Float32Array(a*I);for(let c=0;c<a.length;c++)a[c]=b(c/a.length,c/I);return a}function K(a,b){b=new eb(b);for(let c=0;c<a.length;c++)a[c]*=db(b,c/a.length);return a}function N(a){Array.isArray(a)||(a=[a]);let b=H.createBuffer(a.length,a[0].length,I);for(let c=0;c<a.length;c++)b.getChannelData(c).set(a[c]);return b}
function Ab(){function a(){let e=0,f=[];do f.push([e,Math.random()]),e+=.01;while(1>=e);return f}let b=a(),c=a(),d=[[0,0,.5],[.05,1,.5],[1,0]];return[K(K(L(4,vb),b),d),K(K(L(4,vb),c),d)]}
class Bb{constructor({width:a,height:b,source:c,repeat:d}){this.D=t.createTexture();t.bindTexture(3553,this.D);t.texParameteri(3553,10241,9729);t.texParameteri(3553,10240,9729);t.texParameteri(3553,10242,d?10497:33071);t.texParameteri(3553,10243,d?10497:33071);c?t.texImage2D(3553,0,6408,6408,5121,c):t.texImage2D(3553,0,6408,a,b,0,6408,5121,null)}use(a=0){t.activeTexture(33984+a);t.bindTexture(3553,this.D)}}
async function Cb(){let a=await cb(b=>{let c=b.getImageData(0,0,512,512),d=c.data;for(var e=0;262144>e;e++)d[4*e]=.005>Math.random()?255:0,d[4*e+1]=255*Math.random()**6,d[4*e+2]=255*Math.random()**6,d[4*e+3]=255;b.putImageData(c,0,0)});return new Bb({source:a,repeat:!0})}function Db(){Eb.channels.forEach(a=>{a.$.linearRampToValueAtTime(0,H.currentTime+.02);a.$.linearRampToValueAtTime(a.volume,H.currentTime+4)})}
class Fb{constructor(a,b){this.ca=!1;this.g=b;let c=H.createGain();this.channels=a.map(d=>{let e=H.createGain();e.connect(c);if(d.U){let f=H.createGain();f.gain.value=d.U;e.connect(f);f.connect(ub)}return{buffer:d.buffer,ga:e,volume:d.volume,$:e.gain}});c.connect(tb)}play(){this.ca=!0;this.channels.forEach(a=>{a.source&&a.source.disconnect();let b=H.createBufferSource();b.loop=this.g;b.loopEnd=a.buffer.duration;b.buffer=a.buffer;b.connect(a.ga);b.start();a.source=b;a.$.value=a.volume})}}
function Gb(a,b,c,d=!1){let e=Math.min(c+a.length,b.length);if(d)b.set(a.subarray(0,e-c),c);else for(d=c;d<e;d++)b[d]+=a[d-c]}function O(a){return new Float32Array(Math.ceil(I*a*60/55))}let Hb={};function Ib(a,b,c,d=!1){Array.isArray(b)||(b=[b]);let e=c.toString().substr(0,20);a.forEach(f=>{let g=e+f.slice(1).join("|");Hb[g]||(Hb[g]=c(440*2**(f[1]/12),60*(f[2]||1)/55,...f.slice(3)));Array.isArray(Hb[g])||(Hb[g]=[Hb[g]]);for(let m=0;m<b.length;m++)Gb(Hb[g][m],b[m],Math.floor(I*f[0]*60/55),d)})}
function Jb(a){return Math.floor(4*I*a*60/55)}let Kb=[[0,0],[.01,1,.9],[.999,.43],[1,0]];function Lb(a,b){let c=0;return K(L(b,function(){c+=a/I;return J(c)+.21*J(2*c)}),Kb)}let Mb=[[0,0],[.01,.3,.9],[.02,.15,.8],[.99,.03],[1,0]];
function Nb(a,b){let c=Math.random(),d=Math.random(),e=Math.random(),f=Math.random(),g=0,m=vb(),n=1-Math.exp(-100/I),q=a*Math.pow(2,-.1/12),r=a*Math.pow(2,.005),v=a*Math.pow(2,.1/12),z=a*Math.pow(2,-.005);return[K(L(b,function(){c+=q/I;d+=r/I;e+=a/I;f+=.25*a/I;1<=f&&(--f,m=vb());g=n*m+(1-n)*g;return J(c)+.25*J(2*d)+J(4*e)*g}),Mb),K(L(b,function(){c+=v/I;d+=z/I;e+=a/I;f+=.25*a/I;1<=f&&(--f,m=vb());g=n*m+(1-n)*g;return J(c)+.25*J(2*d)+J(4*e)*g}),Mb)]}
let Ob=[[0,0],[1E-4,.1],[.01,.5,.3],[.1,.25,.5],[1,0]];function Pb(a){let b=0;return K(L(2,function(){b+=a/I;return 2*Math.abs(b%1*2-1)-1}),Ob)}async function Qb(){let a=O(32);Ib([[0,-31,4],[4,-35,4],[8,-31,4],[12,-40,4],[16,-38,4],[20,-36,4],[24,-35,4],[28,-33,4]],a,Lb,!0);let b=new Float32Array(a);Ib([[12,-39,4]],b,Lb,!0);await D();let c=O(128);c.set(a,0);c.set(b,Jb(8));c.set(a,Jb(16));c.set(b,Jb(24));return N(c)}
async function Rb(){function a(P){let M=[O(4),O(4)];Ib(P.map(Q=>[0,Q,4]),M,Nb);return M}let b=[O(128),O(128)];var c=a([-19,-12,-5]),d=a([-23,-16,-9]),e=a([-28,-16,-9]);await D();var f=a([-26,-19,-12,-7]);let g=a([-24,-17,-12,-9]);await D();let m=a([-23,-16,-9,-4]),n=a([-21,-14,-9,0]);await D();let q=a([-19,-12,-3]),r=a([-23,-16,-7]),v=a([-27,-15,-7]);await D();let z=a([-23,-16,-7,-4]),G=a([-21,-14,-9,-5]);c=[c,d,c,e,f,g,m,n,q,r,q,v,f,g,z,G];for(d=0;d<c.length;d++)e=c[d],f=Jb(d),b[0].set(e[0],f),b[1].set(e[1],
f),f=Jb(d+16),b[0].set(e[0],f),b[1].set(e[1],f);return N(b)}async function Sb(){let a=O(64);Ib([[16,5],[17,12],[18,8],[19,3],[20,5],[22,0],[23,3],[24,5],[25,12],[26,8],[27,15],[28,7]],a,Pb,!0);var b=Jb(8);a.set(a.slice(0,b),b);await D();Ib([[0,5],[1,12],[2,8],[3,3],[4,5],[8,5],[9,12],[10,8],[11,15],[12,5],[32,5],[33,12],[34,10],[35,9],[36,8],[38,5],[39,3],[40,5],[41,12],[42,9],[43,15],[44,5]],a,Pb,!0);await D();b=O(128);b.set(a,Jb(16));return N(b)}
async function Tb(){let a=await Qb(),b=await Rb(),c=await Sb();return new Fb([{buffer:a,volume:.2},{buffer:b,volume:.32,U:2},{buffer:c,volume:.2,U:2}],!0)}async function Ub(){let a=[O(8),O(8)];Ib([[0,-19,4],[.1,-12,4],[.2,-7,4],[.3,-3,4],[.4,5,4]],a,Nb);let b=[[0,1],[.2,1,.9],[1,0]];await D();K(a[0],b);K(a[1],b);return N(a)}async function Vb(){let [a]=await Promise.all([Ub()]);return new Fb([{buffer:a,volume:.32,U:2}],!1)}let Wb=[[0,0],[.001,.5,.5],[.5,0],[.501,.5,.5],[1,0]];
function Xb(){let a=0;return K(yb(L(.25,function(){a+=44/I;return a%1*2-1}),500,1.5),Wb)}let Yb=[[0,0],[.01,.5,.5],[1,0]];function Zb(){let a=0;return K(yb(L(.1,function(){a+=44/I;return 2*Math.abs(a%1*2-1)-1}),2E3),Yb)}let Eb,$b,ac,bc,cc,dc;function ec(a){t.bindBuffer(34962,a.h);t.vertexAttribPointer(0,3,5126,!1,0,0);t.bindBuffer(34963,a.g);t.drawElements(4,a.i,5123,0)}
class fc{constructor({da:a,ba:b}){this.h=t.createBuffer();t.bindBuffer(34962,this.h);t.bufferData(34962,new Float32Array(a),35044);this.g=t.createBuffer();t.bindBuffer(34963,this.g);t.bufferData(34963,new Uint16Array(b),35044);this.i=b.length}}let gc=new fc({da:[-1,-1,0,1,-1,0,1,1,0,-1,1,0],ba:[0,1,2,0,2,3]});
class hc extends Bb{constructor(){super({width:1024,height:1024});this.g=t.createFramebuffer();t.bindFramebuffer(36160,this.g);t.framebufferTexture2D(36160,36064,3553,this.D,0);t.bindFramebuffer(36160,null)}bind(){t.bindFramebuffer(36160,this.g)}}class R{constructor(a,b){this.x=a;this.y=b}set(a,b){this.x=a;this.y=b;return this}length(){return Math.sqrt(this.x**2+this.y**2)}X(a){this.x*=a;this.y*=a;return this}clone(){return new R(this.x,this.y)}M(){return new Float32Array([this.x,this.y])}}
class ic{constructor(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d}set(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this}M(){return new Float32Array([this.x,this.y,this.z,this.w])}}function jc(a,b){a=t.createShader(a);t.shaderSource(a,b);t.compileShader(a);return a}
class kc{constructor(a,b){this.g=t.createProgram();t.attachShader(this.g,jc(35633,"attribute vec3 ap;uniform mat4 u1;uniform mat4 u2;uniform mat4 u3;"+a));t.attachShader(this.g,jc(35632,"precision highp float; vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 perm(vec4 x){return mod289(((x*34.)+1.)*x);}float noise(vec3 p){vec3 a=floor(p);vec3 d=p-a;d=d*d*(3.-2.*d);vec4 b=a.xxyy+vec4(.0,1.,.0,1.);vec4 k1=perm(b.xyxy);vec4 k2=perm(k1.xyxy+b.zzww);vec4 c=k2+a.zzzz;vec4 k3=perm(c);vec4 k4=perm(c+1.);vec4 o1=fract(k3*(1./41.));vec4 o2=fract(k4*(1./41.));vec4 o3=o2*d.z+o1*(1.-d.z);vec2 o4=o3.yw*d.x+o3.xz*(1.-d.x);return o4.y*d.y+o4.x*(1.-d.y);}"+b));
t.linkProgram(this.g);this.h={};a=t.getProgramParameter(this.g,35718);for(b=0;b<a;b++){let c=t.getActiveUniform(this.g,b);this.h[c.name]=t.getUniformLocation(this.g,c.name)}}use(a={}){a.u3=F.J;a.u2=F.T;t.useProgram(this.g);for(let b in a){let c=this.h[b];if(a[b]instanceof h)t.uniform3fv(c,a[b].M());else if(a[b]instanceof R)t.uniform2fv(c,a[b].M());else if(a[b]instanceof ic)t.uniform4fv(c,a[b].M());else if(a[b]instanceof l)t.uniformMatrix4fv(c,!1,a[b].u);else if(a[b].D){let d=a[b].slot||0;a[b].D.use(d);
t.uniform1i(c,d)}else t.uniform1f(c,a[b])}}}let lc=new kc("varying vec3 vp;void main(){vp=(u1*vec4(ap,1.)).xyz;gl_Position=u3*u2*u1*vec4(ap,1.);}","uniform float u15;varying vec3 vp;void main(){vec2 c=vp.xy-1.;float d=abs(2.*fract(.5*c.x)-1.),e=abs(2.*fract(.5*c.y)-1.),f=smoothstep(.2,.4,sqrt(pow(d,16.)+pow(e,16.))*2.-1.);gl_FragColor=vec4(vec3(1),f*.08*(1.-u15));}");
class mc{C(a){t.blendFunc(770,771);var b=w.j?100:w.size+.1;let c=w.j?F:{x:w.size-1,y:w.size-1};b=new l([b,0,0,0,0,b,0,0,0,0,1,0,c.x,c.y,0,1]);lc.use({u7:{slot:0,D:dc},u1:b,u15:a});ec(gc)}}
let nc=new kc("varying vec2 uv;varying vec3 vp;void main(){uv=ap.xy*.5+.5;vp=(u1*vec4(ap,1.)).xyz;gl_Position=u3*u2*u1*vec4(ap,1.);}","uniform sampler2D u6;uniform sampler2D u7;uniform float u5;uniform float u15;varying vec2 uv;varying vec3 vp;vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,.0,1.),c.y);}void main(){float t=u5*.1;float fi=1.-u15;vec4 data=texture2D(u6,uv);vec4 starData=texture2D(u7,(vp.xy+t)*.1);float sn=noise(vec3(vp+t));vec3 color=hsv2rgb(vec3(data.b+sn*.08,1.,1.))+.15;vec3 cc=mix(color,vec3(1.3),(data.g+starData.y*starData.x)*data.g+starData.y*starData.x*.5);cc=mix(cc,vec3(1.),starData.x);float a=(1.+data.g+u15+starData.y)*data.r*data.r*fi;a=sqrt(a)-pow(u15*.5,2.);if(data.w<.5){a*=(sin(t*50.)+2.)*.333;}gl_FragColor=vec4(cc*a,1.);}"),oc=
new kc("uniform vec2 u12;uniform vec2 u11;varying vec2 vp;varying vec2 wp;void main(){vp=ap.xy;wp=ap.xy*.5+u12;gl_Position=vec4((wp*2.)/u11-1.,.0,1.);}","uniform vec4 u10;uniform vec2 u8;uniform vec2 u11;uniform float u4;uniform float u14;uniform float u16;uniform float u5;varying vec2 vp;varying vec2 wp;float a(in vec2 c,in float d,in float e,in float f){if(f>0.)return 1.;if(d<=0.&&e<=0.)return 1.-length(c);if(d>0.&&e>0.)return length(1.-c);if(d>0.)return 1.-c.y;if(e>0.)return 1.-c.x;return 0.;}void main(){vec4 d=u10;float e=d.x>1.5?1.:-d.x,f=d.x,g=d.y,h=d.y>1.5?1.:-d.y,i=d.z,j=d.z>1.5?1.:-d.z,k=d.w,l=d.w>1.5?1.:-d.w,m=0.;if(vp.x<0.){if(vp.y>0.)m=a(abs(vp),e,g,k);else m=a(abs(vp),e,h,j);}else if(vp.y>0.)m=a(abs(vp),f,g,i);else m=a(abs(vp),f,h,l);float n=100.;for(int p=-1;p<=1;p++)for(int s=-1;s<=1;s++)n=min(n,length(wp+u11*vec2(p,s)-u8));float o=1.-n*.7;if(u16>0.)o=max(o,1.-length(vp));gl_FragColor=vec4(m,o,u4,u14);}");
function pc(a){switch(a%6){case 0:return.985;case 1:return.067;case 2:return.32;case 3:return.51;case 4:return.667;case 5:return.83}}
class qc{constructor(){this.v=new hc;this.h=.5;this.i=0;this.B=new mc}C(){this.B.C(this.g);let {size:a}=w;this.v.bind();t.viewport(0,0,1024,1024);t.clearColor(0,0,0,1);t.clear(16640);t.blendFunc(1,0);for(var b of w.B)if(!(0>b.id)){var c=b;oc.use({u12:new R(c.x+.5,c.y+.5),u11:new R(w.size,w.size),u4:pc(w.aa[c.id%w.aa.length]),u8:w.N[c.id],u16:rc(w,c)?1:0,u10:sc(c),u14:tc(c),u5:ka});ec(gc)}t.enable(2929);t.bindFramebuffer(36160,null);t.viewport(0,0,p.width,p.height);
t.disable(2929);t.blendFunc(1,1);nc.use({u6:{slot:0,D:this.v},u7:{slot:1,D:dc},u15:this.g,u5:ka});c=new l([a,0,0,0,0,a,0,0,0,0,1,0,0,0,0,1]);b=rb(p.width/2,p.height/2);b.x=Math.floor((b.x+1)/(2*a));b.y=Math.floor((b.y+1)/(2*a));let d=w.j?3:0,e=w.j?2:0,f=(a-1)/2,g=(a-1)/2;for(let m=-d;m<=d;m++)for(let n=-e;n<=e;n++)nc.use({u1:ia(c,new h(2*((m+b.x)*a+f),2*((n+b.y)*a+g),-.5))}),ec(gc);t.enable(2929)}}
function uc(a){let b=H.createBufferSource();b.buffer=a;b.playbackRate.value=Math.pow(2,.1*vb());b.connect(tb);b.start()}function S(a,b){a.i[a.g].L?.();a.h=b}function vc(a){a.h&&(a.g=a.h,a.h=null,a.i[a.g].A?.());a.i[a.g].G?.()}class wc{constructor(a){this.i=a;this.h=1}}
let xc=new fc({da:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,1,0,-1,-1,0,-1,-1,1,-1,1,1,1,-1,0,1,1,0,1,1,1,1,-1,1,-1,-1,0,1,-1,0,1,-1,1,-1,-1,1],ba:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15]}),yc=new kc("varying vec3 vp;void main(){vp=ap;gl_Position=u3*u2*u1*vec4(ap,1.);}","uniform float u5;uniform float u13;varying vec3 vp;void main(){float c=u5*(u13+1.),d=abs(2.*fract(.5*vp.x+c)-1.),e=abs(2.*fract(.5*vp.y+.33+c)-1.),f=abs(2.*fract(.5*vp.z+.66+c)-1.),g=d*e*f;gl_FragColor=vec4(1.,1.,1.,g*(g+1.));}");
class zc{constructor({x:a,y:b}){this.x=a;this.y=b;this.g=new l([1,0,0,0,0,1,0,0,0,0,1,0,2*this.x,2*this.y,0,1])}C(){yc.use({u5:ka,u1:this.g});ec(xc)}}function*Ac(a,b){let c=b.x-a.start.x,d=b.y-a.start.y,{x:e,y:f}=a.start;for(;e!==b.x||f!==b.y;){a=Math.abs(e-b.x);let g=Math.abs(f-b.y);a>g?e+=Math.sign(c):a<g?f+=Math.sign(d):T(w,{x:e+Math.sign(c),y:f})===T(w,{x:e,y:f})?e+=Math.sign(c):f+=Math.sign(d);yield{x:e,y:f}}}
function Bc(a){var b=Cc();for(let c of Ac(a,b)){if(!a.g(c))break;a.start=c}}class Dc{constructor(a,b){this.start=a;this.g=b}}function Ec(a){a.T={};a.P={}}function Cc(){let {x:a,y:b}=rb(fb,gb);a=Math.floor((a+1)/2);b=Math.floor((b+1)/2);w.j||(a=Za(a,0,w.size-1),b=Za(b,0,w.size-1));return{x:a,y:b}}function Fc(){let a=Cc();return T(w,a)}function Gc(a,b,c=a.g){a=T(w,b)===c?a.T:a.P;c=`${b.x},${b.y}`;if(a[c])return!1;a[c]=new zc(b);return!0}
function Hc(a,{x:b,y:c},d=a.g){let e=Ic({x:b,y:c},w.l[d].o);if(w.j)for(e.x=$a(b,e.x,w.size),e.y=$a(c,e.y,w.size),b=-1;1>=b;b++)for(c=-1;1>=c;c++)Gc(a,{x:e.x+b*w.size,y:e.y+c*w.size},d);else Gc(a,{x:e.x,y:e.y},d)}function U(){return w.B.map(a=>a.id)}function Jc(a,b){let c=w.S(b),d=Gc(a,b,-1);c?a.h=bc:d&&-1!==T(w,b)&&(a.h=ac)}function Kc(a,b,c){b.toString()!==c.toString()&&a.J.push(b)}
class Lc{constructor(){Ec(this);this.g=-1;let a;this.J=[];this.R=0;let b=this.V=new wc({1:{A:()=>{Ec(this)},G:()=>{if(E)S(b,2);else if(hb){Ec(this);let c=Cc(),d=Fc();Gc(this,c,d);-1<d&&Hc(this,c,d)}},L:()=>{Ec(this)}},2:{A:()=>{this.R=ka;this.v=U();a=Cc();this.g=Fc();Gc(this,a);-1<this.g&&Hc(this,a,this.g)},G:()=>{if(E){var c=Cc();if(c.x!==a.x||c.y!==a.y)-1===this.g?S(b,4):T(w,c)!==this.g||Mc(w,c)?S(b,5):S(b,4)}else{c=V(w,a);if(ka>=this.R+.2||rc(w,c)){{var d=a;c=w;let f=V(c,d);if(!f||-1===f.id||
Mc(c,d))c=!1;else{var e=Nc(c,d,f.id);d=!rc(c,d);c.g.set(f,d);c.g.set(e,d);c=!0}}c&&uc(cc)}else Jc(this,a);S(b,1)}},L:()=>{Kc(this,this.v,U());Ec(this)}},4:{A:()=>{Jc(this,a);this.i=new Dc(a,c=>-1===this.g||T(w,c)===this.g?(Jc(this,c),!0):!1);Bc(this.i)},G:()=>{E?Bc(this.i):S(b,1)},L:()=>{Kc(this,this.v,U())}},5:{A:()=>{this.i=new Dc(a,c=>{let d=w.H(c,this.g),e=Gc(this,c);Hc(this,c);d?this.h=bc:e&&T(w,c)!==this.g&&(this.h=ac);return T(w,c)===this.g});Bc(this.i)},G:()=>{E?Bc(this.i):S(b,1)},L:()=>
{Kc(this,this.v,U())}},3:{A:()=>{Ec(this);jb=c=>{F.x=F.g.x;F.y=F.g.y;F.zoom=F.g.zoom;qb();var d=Object.keys(c),e={};for(var f in c)e[f]=rb(c[f].pageX,c[f].pageY);f=F.g.Z[d[0]];var g=F.g.Z[d[1]];c=e[d[0]];e=e[d[1]];d=f.clone().add(g).X(.5);g=ca(f,g);f=c.clone().add(e).X(.5);c=g/ca(c,e);F.x=F.g.x-(f.x-d.x)*c;F.y=F.g.y-(f.y-d.y)*c;F.zoom=F.g.zoom*c};kb=()=>{S(b,6)}},L:()=>{jb=kb=Ya}},6:{G:()=>{E&&S(b,1)}}});ib=c=>{if(3!==b.g){S(b,3);F.g={x:F.x,y:F.y,zoom:F.zoom,Z:{}};for(let d in c)F.g.Z[d]=rb(c[d].pageX,
c[d].pageY)}}}C(){t.blendFunc(770,1);yc.use({u5:ka,u13:0});for(let a of Object.values(this.T))a.C()}}let Oc=new kc("varying vec3 vp;void main(){vp=(u1*vec4(ap,1.)).xyz;gl_Position=u3*u2*u1*vec4(ap,1.);}","uniform lowp sampler2D u7;varying vec3 vp;void main(){vec4 c=texture2D(u7,vp.xy*.211);gl_FragColor=vec4(vec3(1),c.x*c.y);}");
class Pc{constructor(a){this.z=a}C(){let a=new l([50,0,0,0,0,50,0,0,0,0,1,0,Math.round(F.x),Math.round(F.y),this.z,1]);t.blendFunc(770,771);Oc.use({u7:{slot:0,D:dc},u1:a});ec(gc)}}function Mc(a,b){b=V(a,b);return-1===b.id?!1:a.l[b.id].F.has(b)}function V(a,{x:b,y:c}){if(a.j)b%=a.size,c%=a.size,0>b&&(b+=a.size),0>c&&(c+=a.size);else if(0>b||0>c||b>=a.size||c>=a.size)return null;return a.B[b+c*a.size]}function Ic({x:a,y:b},{x:c,y:d}){return{x:2*c-a-1,y:2*d-b-1}}
function Qc(a){a.B=[];a.l=[];for(let b=0;b<a.size;b++)for(let c=0;c<a.size;c++)a.B.push({x:c,y:b,id:-1})}function Rc(a,{x:b,y:c}){return.5===b%1&&.5===c%1?[V(a,{x:b-.5,y:c-.5})]:.5===b%1?[V(a,{x:b-.5,y:c-1}),V(a,{x:b-.5,y:c})]:.5===c%1?[V(a,{x:b-1,y:c-.5}),V(a,{x:b,y:c-.5})]:[V(a,{x:b-1,y:c-1}),V(a,{x:b,y:c-1}),V(a,{x:b-1,y:c}),V(a,{x:b,y:c})]}function Sc(a,b,c){b=V(a,b);b.id=c;a.l[c].m.add(b)}
function Tc(a,{x:b,y:c}){b=new R(b,c);let d=a.l.length;c=Rc(a,b);c.some(e=>-1!==e.id)||(a.l.push({o:b,id:d,F:new Set(c),m:new Set(c)}),c.forEach(e=>Sc(a,e,d)))}function Nc(a,b,c){return V(a,Ic(b,a.l[c].o))}function Uc(a,{x:b,y:c}){return[V(a,{x:b,y:c-1}),V(a,{x:b-1,y:c}),V(a,{x:b+1,y:c}),V(a,{x:b,y:c+1})].filter(d=>d)}function Vc(a,b){let c=new Set;for(let d of b)for(let e of Uc(a,d))c.add(e);return[...c]}
class Wc{constructor(a,b){this.size=a;this.j=b;Qc(this)}H(a,b,c=!1){let d=V(this,a);a=Nc(this,a,b);if(!d||!a)return!1;for(let e of this.l)if(e.id!==b&&(e.F.has(d)||e.F.has(a)))return!1;if(-1!==d.id&&d.id!==b||-1!==a.id&&a.id!==b)if(c)this.S(d),this.S(a);else return!1;Sc(this,d,b);Sc(this,a,b);return!0}S(a){let b=V(this,a),c=b.id;if(!b||-1===b.id)return!1;a=V(this,Ic(a,this.l[c].o));b.id=-1;a.id=-1;this.l[c].m.delete(b);this.l[c].m.delete(a);return!0}}function rc(a,b){return a.g.get(V(a,b))}
function sc({x:a,y:b}){var c=w;return c.h[a+b*c.size]}function tc({x:a,y:b}){return!w.W.has(`${a}_${b}`)}function T(a,b){return(a=V(a,b))?a.id:-2}
function Xc(a){let b=new Set,c=[...a.F];for(;0<c.length;){let d=c.pop();b.add(d);Uc(a,d).forEach(e=>{e.id!==d.id||b.has(e)||c.push(e)})}a.W=new Set;a.h=[];a.B.forEach(d=>{let {x:e,y:f,id:g}=d;b.has(d)||a.W.add(`${d.x}_${d.y}`);d=W(a,g,{x:e-1,y:f});let m=W(a,g,{x:e+1,y:f}),n=W(a,g,{x:e,y:f-1}),q=W(a,g,{x:e,y:f+1}),r=d&&q&&W(a,g,{x:e-1,y:f+1}),v=m&&q&&W(a,g,{x:e+1,y:f+1}),z=d&&n&&W(a,g,{x:e-1,y:f-1}),G=m&&n&&W(a,g,{x:e+1,y:f-1});a.h.push(new ic(d&&m?2:d?-1:m?1:0,q&&n?2:n?-1:q?1:0,v&&z?2:v?1:z?-1:0,
r&&G?2:r?1:G?-1:0))})}function W(a,b,c){return T(a,c)===b}
class Yc extends Wc{constructor(a,b,c){super(a,c);this.i=b.map(d=>({o:d.o,m:[...d.m]}));this.N=b.map(d=>d.o);this.aa=ab([0,1,2,3,4,5]);this.reset()}reset(){Qc(this);for(let a of this.N)Tc(this,a);this.F=[];this.l.forEach(a=>{this.F.push(...a.F)});this.g=new Map;for(let a of this.B)this.g.set(a,!1);Xc(this)}Y(){this.i.forEach((a,b)=>{for(let c of a.m)Sc(this,c,b)});Xc(this)}H(a,b){let c=V(this,a);if(c.id===b)return!1;let d=Nc(this,a,b);if(rc(this,c)||!d||rc(this,d))return!1;a=super.H(a,b,!0);Xc(this);
return a}S(a){let b=V(this,a);var c;(c=-1===b.id)||(c=!(Mc(this,a)?0:null!==V(this,a)));if(c||rc(this,b))return!1;super.S(a);Xc(this);return!0}}
function Zc(a){a.l.forEach(r=>{1===r.m.size&&([...r.m][0].K=!0)});let b=[],c=(r,v)=>{1>=v.length||(v=new Set(v),a.l.push({o:r,m:v,F:v}),v.forEach(z=>{b.push(z.id);z.K=!1}))};var d=a.j?a.size:a.size-1;let e=a.j?a.size:a.size-1;for(var f=0;f<d;f++)for(var g=0;g<e;g++){var m=new R(f+1,g+1),n=[V(a,{x:f,y:g}),V(a,{x:f+1,y:g}),V(a,{x:f,y:g+1}),V(a,{x:f+1,y:g+1})];n.every(r=>r.K)&&c(m,n)}for(f=0;f<d;f++)for(g=0;g<a.size;g++)if(m=[V(a,{x:f,y:g})],m[0].K){n=a.j?f+a.size:a.size;for(var q=f+1;q<n;q++){let r=
V(a,{x:q,y:g});if(r.K)m.push(r);else break}c(new R(f+m.length/2,g+.5),m)}for(d=0;d<e;d++)for(f=0;f<a.size;f++)if(g=[V(a,{x:f,y:d})],g[0].K){m=a.j?d+a.size:a.size;for(n=d+1;n<m;n++)if(q=V(a,{x:f,y:n}),q.K)g.push(q);else break;c(new R(f+.5,d+g.length/2),g)}b.sort((r,v)=>v-r);for(let r of b)a.l.splice(r,1)}class $c extends Wc{constructor(a,b){super(a,b);this.g=2*this.size-(this.j?1:0)}}
function ad(a,b){b=Rc(a,b);if(b.some(d=>-1!==d.id))return!1;var c=Vc(a,b);ab(c);for(let d of c)if(c=d.id,-1!==c&&a.l[c].m.size<a.g&&bd(a,c,b))return!0;return!1}
function bd(a,b,c){let d=a.l[b].o;var e=a.l[b].m.size;if(c.map(g=>V(a,Ic(g,d))).every(g=>g&&(-1===g.id||g.id===b))){for(let g of c)a.H(g,b);return!0}let f=new R(d.x*e,d.y*e);c.forEach(g=>{f.x+=a.j?$a(d.x,g.x+.5,a.size):g.x+.5;f.y+=a.j?$a(d.y,g.y+.5,a.size):g.y+.5});f.x/=e+c.length;f.y/=e+c.length;f.x=(f.x+a.size)%a.size;f.y=(f.y+a.size)%a.size;if(0!==f.x%.5||0!==f.y%.5)return!1;c=[...a.l[b].m,...c];for(let g of c)if(e=V(a,Ic(g,f)),!e||-1!==e.id&&e.id!==b)return!1;a.l[b].o=f;for(let g of c)a.H(g,b);
return!0}class cd extends $c{}function dd(a,b,c){a.g.H(b,c);a.h.delete(Nc(a.g,b,c));a.h.delete(b);a.i[c].push(b)}function ed(a,b){let c=new Set,d=new Set(a.i[b]),e=new Set;for(;0<d.size;){var f=bb(d);e.add(f);f=Uc(a.g,f).filter(g=>g&&-1===g.id?(g=Nc(a.g,g,b))&&-1===g.id?!0:!1:!1);for(let g of f)e.has(g)||d.add(g),c.add(g),c.add(Nc(a.g,g,b))}return c}
class fd{constructor(a){this.g=a;this.h=new Set(this.g.B);this.i=this.g.N.map(b=>Rc(this.g,b))}Y(){for(;0<this.h.size;){var a=!1;for(let e of this.h)if(-1!==e.id)this.h.delete(e);else{var b=[];for(var c=0;c<this.g.N.length;c++){var d=Nc(this.g,e,c);d&&-1===d.id&&b.push(c)}1===b.length&&(dd(this,e,b[0]),a=!0)}if(a=!a){a=!1;b=new Map;for(c=0;c<this.g.N.length;c++){d=ed(this,c);for(let e of d)b.has(e)||b.set(e,[]),b.get(e).push(c)}for(let [e,f]of b.entries())1===f.length&&(dd(this,e,f[0]),a=!0);a=!a}if(a)return!1}return!0}}
function gd(){var a=new hd;let b,c,d;for(d=0;200>d;d++){var e=b=new cd(a.size,a.j),f=e.j?0:.5,g=e.size-.5,m=[];for(let n=f;n<=g;n+=.5)for(let q=f;q<=g;q+=.5)m.push({x:q,y:n,type:.5===q%1&&.5===n%1?0:.5===q%1?1:.5===n%1?2:3});ab(m);for(f=0;f<m.length;f++)g=m[f],3!==g.type&&ad(e,g)||(1===g.type||2===g.type)&&f%2||Tc(e,g);Zc(e);e=a;({l:m}=b);e=(new fd(new Yc(e.size,m,e.j))).Y()?1===e.I?-1:0:1===e.I?0:1;if(0===e){c=b;break}else c&&-1!==e||(c=b)}return new Yc(a.size,c.l,a.j)}
class hd{constructor(){var {size:a,j:b,I:c}=la;this.size=a;this.j=b;this.I=c}}function id(){p.width=window.innerWidth;p.height=window.innerHeight;pb(F)}window.onresize=id;let jd=new Pc(-2),kd=new Pc(5),X,Y,ld;async function md(){await H.resume();Eb.ca||Eb.play()}
let Z=new wc({1:{A(){w=gd();id();X=new qc;F.reset();Na=()=>{md();S(Z,3)};Oa=()=>{6!==Z.g&&(md(),S(Z,5))};Pa=()=>{S(Z,4)};Qa=()=>{la=C;S(Z,4)};Sa=()=>{S(Z,4)};Ra=()=>{if(Y){let a=Y.J.pop();if(a){for(let b=0;b<a.length;b++)w.B[b].id=a[b];Xc(w)}}};Ta=()=>{if(Y){var a=Y;a.O=!0;let b=U();w.Y();let c=U();Kc(a,b,c)}};Xa()}},5:{A(){ld=0;X.h=-2},G(){ld+=u;.5<=ld&&S(Z,6)}},6:{A(){y(Da,!0);let a=new Yc(6,[{o:new R(1,.5),m:[]},{o:new R(2,1.5),m:[]},{o:new R(4,.5),m:[]},{o:new R(4.5,2.5),m:[]},{o:new R(.5,
2.5),m:[]},{o:new R(2,3.5),m:[]},{o:new R(3.5,4.5),m:[]},{o:new R(2.5,5.5),m:[]},{o:new R(5.5,3),m:[]}],!1);a.H({x:0,y:1},1);a.H({x:1,y:2},1);w=a;X=new qc;Y=new Lc;F.reset();F.y=2}},2:{A(){w=gd();X=new qc;y(Ja,!1);F.reset()},G(){.2>X.g&&S(Z,3)}},3:{A(){Y=new Lc;y(La,!0);y(Ea,!0);Ua=()=>{var a=Y;let b=U();w.reset();let c=U();Kc(a,b,c)}},L(){y(Ja,!1);y(La,!1);y(Ea,!1)}},4:{A(){ld=0;Y=null;X.h=-2;y(Ma,!1)},G(){ld+=u;.5<=ld&&S(Z,2)}}}),nd=0;
function od(a){u=Za((a-nd)/1E3,.001,.5);ka=performance.now()/1E3;nd=a;if(!isNaN(u)){vc(Z);if(hb&&w.j){a=.1*Math.min(p.width,p.height);var b=F.zoom*u;fb<a&&(F.h-=b);gb<a&&(F.i+=b);fb>p.width-a&&(F.h+=b);gb>p.height-a&&(F.i-=b);F.h-=4*F.h*u;F.i-=4*F.i*u;F.x+=F.h*u;F.y+=F.i*u}w.j||(F.x=Za(F.x,0,2*(w.size-1)),F.y=Za(F.y,0,2*(w.size-1)));qb();ja(F.T,F.v);a=1/Math.tan(.25);b=1/-999;F.J.u.set([a/(p.width/p.height),0,0,0,0,a,0,0,0,0,1001*b,-1,0,0,2E3*b,0]);ja(F.R,F.J);if(Y){a=Y;vc(a.V);a.h&&(uc(a.h),a.h=
null);if(b=!a.O)a:{b=w;for(var c of b.B)if(-1===c.id){b=!1;break a}b=0===b.W.size}b&&(a.O=!0,$b.play(),Db(),Va());3===Z.g&&y(Ja,0<Y.J.length)}c=X;c.i=Math.min(1,c.i+u*c.h);a=Za((c.i-1)/-1,0,1);c.g=a*a*(3-2*a);t.viewport(0,0,p.width,p.height);t.clearColor(.02,0,.05,1);t.clear(16640);jd.C();Y&&Y.C();X.C();if(Y){c=Y;t.blendFunc(770,771);t.blendEquation(32779);yc.use({u13:1});for(let d of Object.values(c.P))d.C();t.blendEquation(32774)}kd.C();Ea.textContent=`${la.size}x${la.size}${la.j?" Endless":
""} - ${la.I?"Ridiculous":"Normal"}`}requestAnimationFrame(od)}(async function(){dc=await Cb();ac=N(await Xb());bc=N(await Zb());cc=N(await zb());let a=H.createConvolver();a.buffer=N(Ab());ub=H.createGain();ub.gain.value=.7;ub.connect(a);a.connect(tb);Eb=await Tb();$b=await Vb()})().then(od);
</script>