<!DOCTYPE html><html><head><title>Popnoid</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>var bonusL=[],font=[],monsters=[],imgsNames=["t","e","pad","f"],imgs=[],score=0,auto=!0,level,sc,menu=1,sb,maps=[103,107,115,117,131,135,137,141,147,151,163,169,187,203,205,220,231,245,23,250,253,256,261,265,267,272,277,287,27,317,32,64,7,89,108,113,124,127,130,12,157,159,15,189,193,201,209,211,215,217,241,242,246,251,259,260,262,282,297,1,29,315,316,39,41,46,49,54,57,63,65,5,87,9,109,10,120,123,128,138,139,143,148,13,150,156,14,167,172,173,176,177,183,17,191,192,197,18,199,208,19,216,20,223,225,21,237,22,243,249,263,268,270,285,288,292,313,30,31,35,42,44,45,47,52,53,60,61,69,71,73,75,81,86,91,93,99,105,111,114,11,129,145,160,162,165,174,175,178,16,202,229,233,236,240,248,255,24,25,284,299,301,304,308,33,37,50,51,66,77,78,84,85,95,97,100,101,144,149,210,230,254,274,275,296,28,43,55,56,68],dares=["5UX805VX804U2X804VX90302X9030X202X602T2X203X5J3X205X4U50X2F2X4U402X2J2X4U40X4JX4U302X405X30Xa0","4X604X3X803X2X304H302X2X30HUVH302XX40HVUH40XXT304H30TX2Xa02X4X604X6X206XeXeXeXe0e0e02X705XFX70X4009X4080X203T6X20X203X6","U0UXa0U0UX30G03G20U0UX30G0G40U0UX0G0G03G20U0UX0G0G30G20U0UX20G203G20U0UXa0U0UXa0U0UX0G03G0G0GU0UX2G30G0G0GU0UX0G202G02G0U0UX0G30G0G0GU0UX6G0G0GU0UXa020cX20cX40X306X3X0X0X06X3X0X0X06X3X0X0X06X3X0X0X06X3X0X0X06X02X30X06X60X06X","e0602U60504V50406U4020X8VX202RX8UX2R2RX8VX2RRcXRe0e0e0e0602X60602X60e0e0e0e0Xc0X2Xa02X","e005X205X050X2UX5050X2VX50504X50","U02XU202XU40302X302X40X302X302X302X302X302X20U2X302X302X0U02X302X30X0302X302X40X302X30X402X302X70U2X302X60U02X302X50302X30X50X302X802X302X7002X30X70202Xa0302X9040X90","504G50402G202G40302G402G30202G602G2002G302X302G02G304X302GG40X2UX40G30X60X30202X602X2002XV60V2X002XV60V2X0202X602X20302X402X30402X2W2X40504X50602X60","2H0U202U20U02H30U202U20U3030U202U20U3003U202U203U003U202U203U030U202U20U3030U202U20U302H0UT4UTU02HeXe0e09VX0X2V9VXFX2V9V3X2V","5X405XX502U50XX502U50X40X40X40406X40602X60X502X50XX502X50X2X4U2X4U2X2X4V2X4V2XeW","40X90T20TXFU704U8X205X9040X9040X207X4VX904WX90408X2040X9040X9040X207X40X9040X904U8X20","0Uc03Ub00Uc0bX30UVc0VUc0bX30VWc0WVc0bX30WVc0VWc0bX30VUc0UVc0bX30","e0e0e0e030X6JX30308X30"];bonusL[1]={chance:3,letter:"d",name:"double ball"},bonusL[2]={chance:6,letter:">",name:"increase pad size"},bonusL[3]={chance:6,letter:"<",name:"decrease pad size"},bonusL[4]={chance:6,letter:"+",name:"increase balls speed"},bonusL[5]={chance:6,letter:"-",name:"decrease balls speed"},bonusL[6]={chance:6,letter:"i",time:5,name:"invisible"},bonusL[9]={chance:15,letter:"t",time:5,name:"tesla"},bonusL[13]={chance:13,letter:"c",time:5,name:"crazy balls"},bonusL[14]={chance:23,letter:"JS",time:2,name:"JS glitch"},bonusL[15]={chance:8,letter:"l",time:10,name:"laser"},bonusL[16]={chance:8,letter:"g",time:20,name:"glue"},font[0]="111101101101111",font[1]="010110010010111",font[2]="111001111100111",font[3]="111001111001111",font[4]="101101111001001",font[5]="111100111001111",font[6]="111100111101111",font[7]="111001010010010",font[8]="111101111101111",font[9]="111101111001111",font.L="100100100100111",font.E="111100111100111",font.V="101101101101010",font.I="111010010010111",font.F="111100111100100",font["-"]="000000111000000",font[":"]="000010000010000",font.D="110101101101110",font.A="111101111101101",font.R="111101111110101",monsters[1]="11:0010000010000010001000001111111000110111011011111111111101111111011010000010100011011000",monsters[2]="8:0001100000111100011111101101101111111111001001000100001000100100",monsters[3]="12:000011110000011111111110111111111111111001100111111111111111000110011000001001100100000100001000",monsters[4]="14:000001111000000001111111100000111111111100011100111100100110000110000101100001100001111000011000011111001111001111111111111111111111111111111111111111111111111111111111111111111111111101110011101110001100110001",monsters[5]="32:0000000011111111111111111000000000000001000000000000000001000000000000100000000000000000001000000000001000000000000000000010000000000010000000000000000000100000000000100000000000110000001011000000001000000000010010000011001011110010000000000100010000100010100110100000000001000011110000101100111000000000010000000000001001100110000000001000000000000001001100100000000010000100000010010001111000000000100011000101100100000110000000001000000000000001000000100000000010000100100100010000001000000000010001111111001000000111000000000010000000000100000010001111111111111111111110000000100110100100000100101001000000001111001110000000111001100000",monsters[6]="20:0011000000000000110001100000000000000110011000000000000001101100000000000000001111000000000000000011110000011111100000111100001101101100001111000110011001100011111001001001001001111111110100001011111111111101000010111111111001001001001001111100011001100110001111000011011011000011110000011111100000111100000000000000001111000000000000000011011000000000000001100110000000000000011000110000000000001100",BRICK0=function(){BRICK.apply(this,arguments)},BRICKU=function(){BRICK.apply(this,arguments),this.value=100,this.onCollid=function(){return 0}},BRICKV=function(){BRICK.apply(this,arguments),this.value=200,this.onCollid=function(){return 0}},BRICKW=function(){BRICK.apply(this,arguments),this.value=400,this.onCollid=function(){return 0}},BRICKH=function(){BRICK.apply(this,arguments),this.onCollid=function(){return"U"}},BRICKI=function(){BRICK.apply(this,arguments),this.onCollid=function(){return"H"}},BRICKJ=function(){BRICK.apply(this,arguments),this.onCollid=function(){return"I"}},BRICKF=function(){BRICK.apply(this,arguments),this.onCollid=function(a){if(a){var b=[];for(y=0;y<24;y++)for(x=0;x<14;x++)"T"==level[y][x].type&&b.push({x:x,y:y});var c=Math.floor(Math.random()*b.length);return a.x=34*b[c].x+17,a.y=20*b[c].y-10,a.angle=a.angle+(60*Math.random()-30),"F"}}},BRICKG=function(){BRICK.apply(this,arguments)},BRICKM=function(){BRICK.apply(this,arguments),this.expSize=2,this.expColor=[255,62,32],this.value=400,this.explode=!1,this.onCollid=function(){for(this.explode=!0,y=this.y-2;y<=this.y+2;y++)for(x=this.x-2;x<=this.x+2;x++)if((y!=this.y||x!=this.x)&&level[y]&&level[y][x]){var a=level[y][x];0!=a.type&&("M"==a.type&&a.explode||a.onTouch(null))}return 0}},BRICKN=function(){BRICK.apply(this,arguments),this.value=100,this.expColor=[234,213,34],this.onCollid=function(){return G.addBall(34*this.x+17,20*this.y+10,360*Math.random()),0}},BRICKR=function(){BRICK.apply(this,arguments),this.expColor=[228,106,218],this.value=400,this.onCollid=function(){return setTimeout(this.reborn.bind(this),1e4),0},this.reborn=function(){this.expColor=[228,106,218],this.type="R",this.value=50,G.updateBricks()}},BRICKT=function(){BRICK.apply(this,arguments)},BRICKX=function(){BRICK.apply(this,arguments)},BRICK=function(a,b,c){this.x=a,this.y=b,this.type=c,this.value=0,this.expColor=[203,174,169],this.expSize=1,this.onTouch=function(a){if(0!=this.type&&this.onCollid){var b=this.onCollid(a);if(0==b){if(G.addText(34*this.x,20*this.y,this.value),G.updateScore(this.value),G.addExp(34*this.x,20*this.y,this.expColor,this.expSize),G.nbBrick-=["G","R","N","M"].indexOf(this.type)!=-1?0:1,0==G.nbBrick&&(G.explodeAll(),setTimeout("G.endLevel(true)",3e3)),this.type="0",10*Math.random()<3&&G.bonus.length<=3){var c=Math.round(100*Math.random()),d=0,e=!1;for(var f in bonusL)if(d+=bonusL[f].chance,c<=d){e=f;break}G.addBonus(34*this.x,20*this.y,parseInt(e))}G.updateBricks()}else if(b){var g=new window["BRICK"+b](this.x,this.y,b);for(var h in g)this[h]=g[h];G.updateBricks()}}}},G={balls:[],sprites:[],players:[],monsters:[],bonus:[],effects:[],glitchMode:!1,mode:"menu",text:"",life:1,ptTime:1e4,updateBricks:function(){for(ctx2.clearRect(0,0,476,500),dS(444,6,19),dS(328,333,10),dS(146,181,17),dS(153,204,15),dS(303,368,12),dS(312,353,14),dS(112,447,15),dS(170,242,11),dS(169,280,13),dS(184,60,12),dS(61,140,16),dS(28,238,18),dS(291,330,11),dS(143,183,10),dS(350,222,11),dS(253,162,13),dS(200,451,11),dS(55,128,17),dS(361,288,11),dS(178,144,15),y=0;y<24;y++)for(x=0;x<14;x++)if(l=level[y][x],"0"!=l.type)switch(l.type){case"R":case"M":drawBrick(34*x,20*y,1,1,1,l.type);break;default:drawBrick(34*x,20*y,l.r,l.g,l.b,l.type)}},updateScore:function(a){score+=a;var b=score;b=b.toString(),b=("career"==G.mode?"LEVEL":"DARE")+" "+G.level+" - "+("0000000"+b).substring(b.length),sp.fillStyle="#FFF",sp.fillRect(522,206,370,45),sp.fillStyle="#F00",drawDigits(707-10*b.length,216,b,sp)},checkPt:function(){if(!(Math.random()<.5)){var a=[];0==level[6][0].type&&0==level[7][0].type&&a.push(1),0==level[14][0].type&&0==level[15][0].type&&a.push(2),0==level[6][13].type&&0==level[7][13].type&&a.push(5),0==level[14][13].type&&0==level[15][13].type&&a.push(6),a.length&&(pt=a[Math.floor(Math.random()*a.length)],document.getElementById("pt"+pt).classList.add("opened"),setTimeout("G.addMonsterInPt("+pt+")",1500))}},addMonsterInPt:function(a){document.getElementById("pt"+a).classList.remove("opened");var b,c;switch(a){case 1:b=0,c=130;break;case 2:b=0,c=285;break;case 5:b=500,c=130;break;case 6:b=500,c=285}G.addMonster(b,c,Math.floor(Math.random()*(monsters.length-1))+1)},initStart:function(){this.players=[],this.addPlayer(175),this.addBall(238,478,0),this.balls[0].speed=0,this.wait=!0,this.updateScore(0),this.updateBricks()},addBall:function(a,b,c){this.balls.push(new BALL(a,b,c))},addText:function(a,b,c){this.sprites.push(new TEXT(a,b,c))},drawText:function(a,b,c){new TEXT2(a,b,c)},addPlayer:function(a){this.players.push(new PLAYER(a))},addExp:function(a,b,c,d,e){this.sprites.push(new EXPLOSION(a,b,c,d,e))},addLaser:function(){var a=this.players[0];a.gun&&(this.sprites.push(new LASER(a.x+24,478,0)),this.sprites.push(new LASER(a.x+a.size-22,478,0)))},addMonster:function(a,b,c){this.monsters.push(new MONSTER(a,b,c))},addBonus:function(a,b,c){this.bonus.push(new BONUS(a,b,c))},setEffects:function(a){var b=this.players[0];switch(a){case 9:b.rope=!0;break;case 6:b.invisible=!0;break;case 13:b.crazy=!0;break;case 14:this.glitchMode=!0;break;case 15:b.gun=!0;break;case 16:b.glue=!0}this.effects[a]=60*bonusL[a].time,document.querySelector("#bonus"+a+">span").style.height="100%"},cancelEffects:function(a){var b=this.players[0];switch(a){case 9:b.rope=!1;break;case 6:b.invisible=!1;break;case 13:b.crazy=!1;break;case 14:this.glitchMode=!1;break;case 15:b.gun=!1;break;case 16:b.glue=!1,b.dropGlueBalls()}document.querySelector("#bonus"+a+">span").style.height="0%",delete this.effects[a]},updateEffects:function(){for(var a in this.effects)this.effects[a]--,this.effects[a]<=0&&this.cancelEffects(parseInt(a)),document.querySelector("#bonus"+a+">span").style.height=100/(60*bonusL[a].time)*this.effects[a]+"%"},cancelAllEffects:function(){this.cancelEffects(9),this.cancelEffects(6),this.cancelEffects(13),this.cancelEffects(14),this.cancelEffects(15),this.cancelEffects(16)},explodeAll:function(){for(y=0;y<24;y++)for(x=0;x<14;x++)"0"!=level[y][x].type&&(this.addExp(34*x,20*y,[127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random())],2),level[y][x].type=0);for(var a=0;a<this.balls.length;a++)this.addExp(this.balls[a].x,this.balls[a].y,[255,255,255],2);for(a=0;a<this.monsters.length;a++)this.addExp(this.monsters[a].x,this.monsters[a].y,[255,255,255],2);this.balls=[],this.monsters=[]},endLevel:function(a){auto=!1,this.cancelAllEffects(),displayEndLevel(a)},updateLives:function(){sp.fillStyle="#FFF",sp.fillRect(740,263,152,118),sp.fillStyle="#F00",drawDigits(776,286,"LIFE",sp);var a=this.life.toString();drawDigits(816-10*a.length,333,a,sp)}},BONUS=function(a,b,c){this.x=a,this.y=b,this.type=c,this.time=bonusL[this.type].time?bonusL[this.type].time:0,this.update=function(){var c,d,e,f,g,h;if(this.y+=2,this.y>500)return!1;if(this.y>460&&(d=G.players[0],this.x>d.x-32&&this.x<d.x+d.size)){switch(this.type){case 1:for(e=[],c=0;c<G.balls.length;c++)f=G.balls[c],e.push({x:f.x,y:f.y,angle:f.angle+15});for(c=0;c<e.length;c++)G.addBall(e[c].x,e[c].y,e[c].angle+15);break;case 2:g=d.size,d.size=Math.min(1.2*d.size,250),d.x-=(d.size-g)/2;break;case 3:g=d.size,d.size=Math.max(d.size/1.2,80),d.x-=(d.size-g)/2;break;case 4:for(c=0;c<G.balls.length;c++)G.balls[c].speed=Math.min(1.2*G.balls[c].speed,12);break;case 5:for(c=0;c<G.balls.length;c++)G.balls[c].speed=Math.max(G.balls[c].speed/1.2,2)}return G.text=bonusL[this.type].name,G.textX=500,G.textFrame=0,bonusL[this.type].time&&G.setEffects(this.type),!1}return a=this.x,b=this.y,ctx.beginPath(),ctx.moveTo(a+6,b),ctx.lineTo(a+24,b),ctx.arcTo(a+30,b,a+30,b+6,6),ctx.lineTo(a+30,b+14),ctx.arcTo(a+30,b+20,a+24,b+20,6),ctx.lineTo(a+6,b+20),ctx.arcTo(a,b+20,a,b+14,6),ctx.lineTo(a,b+6),ctx.arcTo(a,b,a+6,b,6),ctx.closePath(),h=ctx.createLinearGradient(a,b,a,b+20),h.addColorStop(0,"#466BA9"),h.addColorStop(.25,"#6FB5FF"),h.addColorStop(.5,"#6FB5FF"),h.addColorStop(.75,"#6FB5FF"),h.addColorStop(1,"#4772B8"),ctx.fillStyle=h,ctx.fill(),ctx.strokeStyle="rgba(37,60,99,0.5)",ctx.stroke(),ctx.fillStyle="#FFF",ctx.fillRect(a+4,b+4,22,12),G.drawText(a+8,b+3,bonusL[this.type].letter),!0}},MONSTER=function(a,b,c){this.x=a,this.y=b,this.type=c,this.speed=1,this.angle=90;var d=monsters[c].split(":");this.width=d[0],this.pixels=d[1],this.height=this.pixels.length/this.width,this.factor=5==c||6==c?1:2,this.explode=function(){G.updateScore(1e3),G.addText(this.x,this.y,1e3),G.addExp(this.x,this.y,[255,255,255],2);for(var a=0;a<G.monsters.length;a++)if(G.monsters[a]==this)return void G.monsters.splice(a,1)},this.update=function(){var a=this.x,b=this.y;this.x+=Math.sin(this.angle/180*3.14)*this.speed,this.y+=Math.cos(this.angle/180*3.14)*this.speed,this.angle+=10*Math.random()-5;var c=!1;if(this.y>500)return!1;for(var d=this.x;d<=this.x+this.width*this.factor;d+=this.width*this.factor)for(var e=this.y;e<=this.y+this.height*this.factor;e+=this.height*this.factor){var f={x:Math.floor(d/34),y:Math.floor(e/20)};f.x>=0&&f.x<14&&f.y>=0&&"0"!=level[f.y][f.x].type&&(c=!0)}c&&(this.x=a,this.y=b,this.angle=360*Math.random()),this.y<0&&(this.angle-=180,this.y=0),this.x<0&&(this.angle=360-this.angle,this.x=0),this.x>476-this.width*this.factor&&(this.angle=360-this.angle,this.x=476-this.width*this.factor),ctx.fillStyle="#FFFFFF";var g=0;for(e=0;e<this.pixels.length/this.width;e++)for(d=0;d<this.width;d++)"1"==this.pixels[g]&&ctx.fillRect(this.x+d*this.factor,this.y+e*this.factor,this.factor,this.factor),g++;return!0}},EXPLOSION=function(a,b,c,d,e){this.x=a,this.y=b,this.color=c,this.size=d,this.opacity=1,this.pixels=[],this.gravity=e?e:0;for(var a=0;a<34;a+=3)for(var b=0;b<24;b+=3){var f={};f.x=this.x+a,f.y=this.y+b,f.tx=(a-17)*(Math.random()-.5),f.ty=(b-10)*(Math.random()-.5),this.pixels.push(f)}this.update=function(){if(this.opacity-=.01,this.opacity<=0)return!1;ctx.fillStyle="rgba("+this.color[0]+","+this.color[1]+","+this.color[2]+","+this.opacity+")";for(var a=0;a<this.pixels.length;a++){var b=this.pixels[a];b.ty+=this.gravity,b.x+=b.tx,b.y+=b.ty,ctx.fillRect(b.x,b.y,2*this.size,2*this.size)}return!0}},PLAYER=function(a){this.x=a,this.size=125,this.invisible=!1,this.crazy=!1,this.rope=!1,this.gun=!1,this.glue=!1,this.visible=!0,this.blocked=!0,this.explode=function(){for(var a=G.players[0],b=a.x;b<a.x+a.size;b+=10)G.addExp(b,470,[255,255/a.size*(b-a.x),50],2,.05);this.visible=!1,G.cancelAllEffects(),G.life--,G.updateLives(),0==G.life?setTimeout("G.endLevel(false)",3e3):setTimeout("G.initStart()",2e3)},this.update=function(){return!!this.visible&&(ctx.drawImage(imgs.pad,0,0,34,18,this.x,480,34,18),ctx.drawImage(imgs.pad,34,0,1,18,this.x+34,480,this.size-67,18),ctx.drawImage(imgs.pad,35,0,33,18,this.x+this.size-33,480,33,18),this.gun&&(ctx.drawImage(imgs.t,0,0,10,27,this.x+20,464,10,27),ctx.drawImage(imgs.t,0,0,10,27,this.x+this.size-27,464,10,27)),void(this.glue&&ctx.drawImage(imgs.t,11,0,81,9,this.x+34,483,this.size-67,9)))},this.dropGlueBalls=function(){for(var a=0;a<G.balls.length;a++){var b=G.balls[a];b.glue&&(b.glue=!1,b.speed=b.oldSpeed)}}},LASER=function(a,b,c){this.x=a,this.y=b,this.angle=c,this.update=function(){var a,b,c,d={x:Math.floor(this.x/34),y:Math.floor(this.y/20)};if(d.x>=0&&d.x<14&&d.y>=0&&(a=level[d.y][d.x],"0"!=a.type))return a.onTouch(null),!1;for(b=0;b<G.monsters.length;b++)if(c=G.monsters[b],this.x>c.x&&this.x<c.x+2*c.width&&this.y>c.y&&this.y<c.y+2*c.height)return c.explode(),!1;return this.x+=20*Math.sin(this.angle/180*Math.PI),this.y-=20,ctx.fillStyle="#F00",ctx.fillRect(this.x,this.y,2,20),!0}},TEXT=function(a,b,c){this.x=a,this.y=b,this.text=c.toString(),this.frame=0,this.opacity=1,this.update=function(){var c;if(this.frame++,this.y-=.5,this.frame>30&&(this.opacity-=.05),this.opacity<0)return!1;ctx.fillStyle="rgba(80,80,255,"+this.opacity+")";var d=this.x+5;for(c=0;c<this.text.length;c++){var e=this.text[c],f=0;for(b=0;b<5;b++)for(a=0;a<3;a++)"1"==font[e][f++]&&ctx.fillRect(d+2*a,this.y+5+2*b,2,2);d+=8}return!0}},TEXT2=function(a,b,c,d,e){this.x=a,this.y=b,this.text=c.toString(),this.frame=0,this.opacity=1;var f,g,h,i;d?f=!0:(d=ctx,f=!1);var j="abcdefghijklmnopqrstuvwxyz0123<>!.+-JS";d.fillStyle="rgba(0,0,255,"+this.opacity+")";var k=a,l=b;for(g=0;g<this.text.length;g++){var m=this.text[g];if("@"!=m)if("#"!=m)if("J"==m&&(k-=7),f){d.mozImageSmoothingEnabled=!1,d.webkitImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1,d.drawImage(imgs.f,14*j.indexOf(m),0,14,14,k,l,14*e,14*e);var n=d.getImageData(k,l,14*e,14*e);for(h=n.data,line=0,i=0;i<h.length;i+=4)i%(56*e)==0&&line++,255==h[i]||(line<e?(h[i]=154,h[i+1]=134,h[i+2]=249):line>13*e?(h[i]=81,h[i+1]=59,h[i+2]=191):i%(56*e)>=52*e?(h[i]=81,h[i+1]=59,h[i+2]=191):i%(56*e)<=4*e?(h[i]=154,h[i+1]=134,h[i+2]=249):(h[i]="@"==this.text[0]?205:114,h[i+1]="@"==this.text[0]?155:84,h[i+2]=("@"==this.text[0],252)));d.putImageData(n,k,l,0,0,14*e,14*e),k+=16*e}else d.drawImage(imgs.f,14*j.indexOf(m),0,14,14,k,l,14,14),k+="J"==m?14:16;else k=a,l+=18*e}},BALL=function(a,b,c){this.x=a,this.y=b,this.speed=5,this.angle=c,this.glue=!1,this.size=5,this.update=function(){this.angle+=.01,this.speed&&(this.speed+=5e-4);var b,c,d,f,g,h,a=G.players[0];a.crazy&&(this.angle+=20*Math.random()-10);for(var i=Math.ceil(this.speed),j=0;j<i;j++){this.x+=Math.sin(this.angle/180*Math.PI)*(this.speed/i),this.y-=Math.cos(this.angle/180*Math.PI)*(this.speed/i);var k=!1,l=!1,m=!1;if(this.y>500-this.size)return!1;(this.x>476-this.size||this.x<this.size)&&(k=!0,this.x=Math.max(this.x,this.size),this.x=Math.min(this.x,476-this.size)),this.y<this.size&&(l=!0,this.y=Math.max(this.y,this.size));var n=[],o=1,p=0,q=[];for(b=this.x-5;b<=this.x+5;b+=5)for(c=this.y-5;c<=this.y+5;c+=5){var r={x:Math.floor(b/34),y:Math.floor(c/20)};if(r.x>=0&&r.x<14&&r.y>=0&&r.y<30&&"0"!=level[r.y][r.x].type){var s=!1;for(d=0;d<q.length;d++)q[d]==r.y+"/"+r/b&&(s=!0);s||(q.push(r.y+"/"+r/b),n.push(r)),p+=o}o*=2}for(this.y>480&&this.x+5>a.x&&this.x-5<a.x+a.size&&(this.angle=360-(50*a.x+25*a.size-50*this.x)/a.size*1.9,p=0,a.glue&&(this.y=480,this.glue=!0,this.oldSpeed=this.speed,this.speed=0)),f=0;f<G.monsters.length;f++)h=G.monsters[f],this.x>h.x&&this.x<h.x+2*h.width&&this.y>h.y&&this.y<h.y+2*h.height&&(this.angle=360*Math.random(),this.speed.vitesse+=this.speed/10,h.explode());if(p&&((2&p||128&p)&&(k=!0),(8&p||32&p)&&(l=!0),k||l||(g=10*Math.random(),1&p?this.angle=135+g:64&p?this.angle=225+g:4&p?this.angle=45+g:256&p?this.angle=315+g:k=l=!0,(1&p||64&p||4&p||256&p)&&(m=!0))),k||l||m)for(d=0;d<n.length;d++)r=n[d],level[r.y][r.x].onTouch(this);a.rope&&this.y>450&&(l=!0),k&&l?this.angle-=180:k?this.angle=360-this.angle:l&&(this.angle=180-this.angle),this.angle<0&&(this.angle=360+this.angle),this.angle=this.angle%360}return this.draw(),!0},this.draw=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.size,0,2*Math.PI,!1),ctx.fillStyle="rgba(255,255,255,"+(G.players[0].invisible?"0.05":"1")+")",ctx.fill()}},dS=function(a,b,c,d){d||(d=ctx2);var e=d.createRadialGradient(a,b,0,a,b,c);e.addColorStop(0,"rgba(255,255,255,0.7)"),e.addColorStop(.1,"rgba(255,255,255,0.7)"),e.addColorStop(.11,"rgba(127,127,127,0.3)"),e.addColorStop(1,"rgba(127,127,127,0)"),d.fillStyle=e,d.fillRect(a-c,b-c,2*c,2*c)},drawDigits=function(a,b,c,d){for(var e=0;e<c.length;e++){var f=0;for(y=0;y<5;y++)for(x=0;x<3;x++)" "!=c[e]&&"1"==font[c[e]][f++]&&d.fillRect(a+5*x,b+5*y,4,4);a+=20}},gameLoop=function(){if(auto){window.requestAnimationFrame(gameLoop);var a=ctx.createLinearGradient(0,0,476,500);a.addColorStop(0,"rgba(15, 0, 63,0.3)"),a.addColorStop(1,"rgba(53, 1, 84,0.3)"),ctx.fillStyle=a,ctx.fillRect(0,0,476,500),ctx.drawImage(ctx2.canvas,0,0);var c;for(c=0;c<G.balls.length;c++)G.balls[c].update()||(G.balls.splice(c--,1),0==G.balls.length&&G.players[0].explode());for(c=0;c<G.sprites.length;c++)G.sprites[c].update()||G.sprites.splice(c--,1);for(c=0;c<G.players.length;c++)G.players[c].update();for(c=0;c<G.monsters.length;c++)G.monsters[c].update()||G.monsters.splice(c--,1);for(c=0;c<G.bonus.length;c++)G.bonus[c].update()||G.bonus.splice(c--,1);if(G.players[0].rope){for(ctx.shadowBlur=10,ctx.shadowColor="rgba(172,19,222,1)",ctx.beginPath(),ctx.lineWidth=2,ctx.moveTo(0,450),c=0;c<500;c+=10)ctx.lineTo(c,450+10*Math.random());ctx.strokeStyle="#FFF",ctx.stroke()}G.text&&(G.textFrame++,G.textFrame>60?G.text=!1:G.textFrame<10||G.textFrame>50?G.textX-=(4*G.text.length+131)/5:G.textX=238-8*G.text.length,ctx.shadowBlur=20,ctx.shadowColor="rgba(255,255,255,1)",ctx.fillStyle="rgba(255,255,255,0.5)",ctx.fillRect(0,50,476,50),new TEXT2(G.textX,68,G.text,null,2)),ctx.shadowBlur=0,G.glitchMode&&(glitch(0,0,476,100,-10,0),glitch(0,100,476,100,10,100),glitch(0,200,476,100,-22,200),glitch(0,300,476,100,7,300),glitch(0,400,476,100,-80,400)),G.updateEffects(),G.wait&&(ctx.fillStyle="#E4BD3B",ctx.fillRect(50,370,376,70),new TEXT2(110,398,"click on the ball"))}},glitch=function(a,b,c,d,e,f){for(var g=ctx.getImageData(a,b,c,d),h=g.data,i=Math.random()>.5?7:2,j=0;j<h.length;j+=1+i)h[j]=h[j+1];ctx.putImageData(g,e,f)},drawBrick=function(a,b,c,d,e,f){c&&(ctx2.fillStyle="rgb("+c+","+d+","+e+")",ctx2.fillRect(a+2,b+2,30,16),ctx2.beginPath(),ctx2.lineWidth=1,ctx2.moveTo(a,b),ctx2.lineTo(a,b+20),ctx2.lineTo(a+34,b+20),ctx2.moveTo(a+1,b+1),ctx2.lineTo(a+1,b+19),ctx2.lineTo(a+33,b+19),ctx2.strokeStyle="#765954",ctx2.stroke(),ctx2.beginPath(),ctx2.moveTo(a+1,b),ctx2.lineTo(a+34,b),ctx2.lineTo(a+34,b+20),ctx2.moveTo(a+2,b+1),ctx2.lineTo(a+33,b+1),ctx2.lineTo(a+33,b+19),ctx2.strokeStyle="#e5d7d4",ctx2.stroke()),"X"!=f&&"G"!=f||ctx2.drawImage(imgs.e,a+2,b+2),"R"!=f&&"M"!=f||ctx2.drawImage(imgs.t,"M"==f?44:14,11,30,16,a+2,b+2,30,16),["H","I","J"].indexOf(f)>-1?(c*=1.2,d*=1.2,e*=1.2,ctx2.fillStyle="rgb("+Math.round(c)+","+Math.round(d)+","+Math.round(e)+")",ctx2.shadowBlur=10,ctx2.shadowColor="#000","J"==f&&(ctx2.fillRect(a+4,b+4,7,12),ctx2.fillRect(a+13,b+4,7,12),ctx2.fillRect(a+22,b+4,7,12)),"I"==f&&(ctx2.fillRect(a+4,b+4,11,12),ctx2.fillRect(a+18,b+4,11,12)),"H"==f&&ctx2.fillRect(a+6,b+4,24,12)):"T"==f||"F"==f?(ctx2.beginPath(),ctx2.arc(a+17,b+10,8,0,2*Math.PI,!1),ctx2.fillStyle="#000",ctx2.fill(),ctx2.lineWidth=3,ctx2.strokeStyle="#FFF",ctx2.stroke()):"N"==f&&(ctx2.shadowOffsetX=2,ctx2.shadowOffsetY=2,ctx2.shadowBlur=3,ctx2.shadowColor="#000",ctx2.beginPath(),ctx2.arc(a+17,b+10,4,0,2*Math.PI,!1),ctx2.lineWidth=1,ctx2.strokeStyle="#00F",ctx2.stroke(),ctx2.fillStyle="#FFF",ctx2.fill(),ctx2.shadowOffsetX=0,ctx2.shadowOffsetY=0),ctx2.shadowBlur=0},init=function(){generateLevel(),auto=!0,G.sprites=[],G.players=[],G.effects=[],G.bonus=[],G.monsters=[],ctx=document.getElementById("c").getContext("2d"),canvas=document.createElement("CANVAS"),canvas.width=476,canvas.height=500,ctx2=canvas.getContext("2d"),G.intervalPt&&clearInterval(G.intervalPt),G.intervalPt=setInterval("G.checkPt()",G.ptTime),G.level++,G.updateLives(),G.initStart(),gameLoop()},initLevel=function(a){for(G.nbBrick=0,level=[],y=0;y<30;y++)for(level[y]=[],a[y]||(a[y]="00000000000000"),x=0;x<14;x++)level[y][x]=new window["BRICK"+a[y][x]](x,y,a[y][x]);for(y=0;y<24;y++)for(x=0;x<14;x++){var b=level[y][x];switch(b.type){case"U":case"V":case"W":case"H":case"I":case"J":G.nbBrick++;var c=[];c[1]=!(!level[y-1]||!level[y-1][x-1])&&level[y-1][x-1],c[2]=!(!level[y-1]||!level[y-1][x])&&level[y-1][x],c[3]=!(!level[y-1]||!level[y-1][x+1])&&level[y-1][x+1],c[4]=level[y][x-1];for(var d=0,e=0,g=0,h=0,i=1;i<5;i++)c[i]&&c[i].r&&c[i].type==b.type&&(d++,e+=c[i].r,g+=c[i].g,h+=c[i].b);if(d>=1)"U"==b.type||"V"==b.type?f=d>1?8:32:f=d>1?4:8,b.r=Math.floor(e/d+(Math.random()*f-f/2)),b.g=Math.floor(g/d+(Math.random()*f-f/2)),b.b=Math.floor(h/d+(Math.random()*f-f/2)),b.r>255&&(b.r=255-b.r%255),b.g>255&&(b.g=255-b.g%255),b.b>255&&(b.b=255-b.b%255);else switch(b.type){case"V":b.r=136,b.g=204,b.b=136;break;case"W":b.r=87,b.g=168,b.b=221;break;case"H":case"I":case"J":case"U":b.r=221,b.g=168,b.b=87}break;case"T":b.r=27,b.g=54,b.b=81;break;case"X":b.r=255,b.g=255,b.b=255;break;case"G":b.r=236,b.g=234,b.b=35;break;case"N":b.r=231,b.g=34,b.b=169}}G.balls=[]},generateLevel=function(){function b(a){switch(a){case 0:case"U":case"V":case"W":case"X":return 3;case"M":case"F":case"N":return 0;default:return 1}}if(G.ptTime=1e4,"career"!=G.mode)return 11==G.level&&(G.ptTime=1e3),inflateLevel(dares[G.level]);seed=maps[G.level];var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,"U","U","U","U","U","U","V","V","V","V","V","W","W","W","W","H","H","H","I","I","J","G","X","X","X","R","M","N","F"];fakeRand=function(){return seed%=1e4,ret=seed/1e4,seed*=1215154987,ret},rand=function(a,b){return a+Math.round(fakeRand()*(b-a))},gettype=function(a,b){return!(!c[a]||!c[a][b])&&c[a][b].type};var c=[];for(d=0;d<21;d++)for(c[d]=[],x=0;x<14;x++)c[d][x]={type:0};for(areas=[],d=0;d<rand(8,21);d++){for(area="",x=0;x<14;x++)gettype(d,x-1)!==!1&&gettype(d-1,x)!==!1?0==rand(0,1)?0==rand(0,b(gettype(d,x-1)))?(type=a[rand(0,a.length-1)],c[d][x].type=type):c[d][x].type=gettype(d,x-1):0==rand(0,b(gettype(d-1,x)))?(type=a[rand(0,a.length-1)],c[d][x].type=type):c[d][x].type=gettype(d-1,x):gettype(d,x-1)!==!1?0==rand(0,b(gettype(d,x-1)))?(type=a[rand(0,a.length-1)],c[d][x].type=type):c[d][x].type=gettype(d,x-1):gettype(d-1,x)!==!1?0==rand(0,b(gettype(d-1,x)))?(type=a[rand(0,a.length-1)],c[d][x].type=type):c[d][x].type=gettype(d-1,x):(type=a[rand(0,a.length-1)],c[d][x].type=type),x>6&&(c[d][x].type=gettype(d,13-x)),area+=c[d][x].type;areas.push(area)}for(var d=0;d<areas.length;d++)if(areas[d].indexOf("F")!=-1){var e=rand(1,6),f=rand(1,areas.length-1);areas[f]=areas[f].substr(0,e)+"T"+areas[f].substr(e+1),areas[f-1]=areas[f-1].substr(0,e)+"0"+areas[f-1].substr(e+1),areas[f]=areas[f].substr(0,13-e)+"T"+areas[f].substr(14-e),areas[f-1]=areas[f-1].substr(0,13-e)+"0"+areas[f-1].substr(14-e);break}initLevel(areas)},inflateLevel=function(a){for(var b=[],c="",d=1,e=0;e<a.length;e++)new RegExp(/^[1-9a-e]$/).test(a[e])?d=parseInt(a[e],16):(c+=a[e].repeat(d),d=1,14==c.length&&(b.push(c),c=""));initLevel(b)},displayHome=function(){sp.clearRect(0,0,898,500),new TEXT2(10,40,"popnoid",sp,8),new TEXT2(245,250,(1==menu?"@":"")+" career mode",sp,2),new TEXT2(180,310,(2==menu?"@":"")+" challenges mode",sp,2),new TEXT2(245,370,(3==menu?"@":"")+" how to play",sp,2)},displayHowTo=function(){sp.clearRect(0,0,898,500),new TEXT2(10,40,"popnoid",sp,8),new TEXT2(270,200,"how to play",sp,2),new TEXT2(20,270,"use mouse to move the pad#you can direct the balls depending on the position of #your pad##there is a lot of bonus you can catch#few of them will help you when others do not...##the career mode request you to finish all the 123 levels#the challenge mode request you to win all the 12 dares#i made for you.",sp,1),new TEXT2(270,480,"click to return to menu",sp,1)},displayEndLevel=function(a){sp.clearRect(0,0,898,500),document.body.classList.remove("inGame"),G.players=[],new TEXT2(10,40,"popnoid",sp,8),a?(G.mode="career"==G.mode?"levelCompleted":"challengeCompleted",new TEXT2(220,280,"level completed",sp,2),new TEXT2(270,480,"click to play next level",sp,1)):(G.mode="gameOver",new TEXT2(310,280,"game over",sp,2),new TEXT2(270,480,"click to return to menu",sp,1))},displayInGame=function(){document.body.classList.add("inGame"),sp.clearRect(0,0,898,500),sp.fillStyle="#FFF",sp.fillRect(522,263,206,118),new TEXT2(540,80,"popnoid",sp,3),new TEXT2(541,355,"g",sp,1),new TEXT2(572,355,"l",sp,1),new TEXT2(603,355,"i",sp,1),new TEXT2(633,355,"t",sp,1),new TEXT2(666,355,"c",sp,1),new TEXT2(695,355,"JS",sp,1),init()},initBoard=function(){for(var a=0;a<imgsNames.length;a++)imgs[imgsNames[a]]=new Image,imgs[imgsNames[a]].onload=function(){displayHome()},imgs[imgsNames[a]].src=imgsNames[a]+".png";sb=document.getElementById("bg").getContext("2d"),sp=document.getElementById("speech").getContext("2d");var b=sb.createLinearGradient(0,0,476,500);b.addColorStop(0,"rgba(15, 0, 63,1)"),b.addColorStop(1,"rgba(53, 1, 84,1)"),sb.fillStyle=b,sb.fillRect(0,0,1920,1080);for(var a=0;a<100;a++)dS(1920*Math.random(),1080*Math.random(),10+10*Math.random(),sb);var c=0;for(x=0;x<2;x++)for(var d=12;d<500;d+=160){c++;var e=document.createElement("DIV");e.className="pt",e.id="pt"+c,0==x&&(e.style.transform="scaleX(-1)"),492==d&&(e.className+=" bottom"),0==x?e.style.left="0":e.style.right="0",e.style.top=d+"px",document.getElementById("game").appendChild(e)}var f;"undefined"!=typeof document.hidden?f="visibilitychange":"undefined"!=typeof document.mozHidden?f="mozvisibilitychange":"undefined"!=typeof document.webkitHidden&&(f="webkitvisibilitychange"),document.addEventListener("visibilitychange",function(){document.hidden?clearInterval(G.intervalPt):G.intervalPt=setInterval("G.checkPt()",G.ptTime)},!1),document.addEventListener("mousemove",function(a){var b=a.movementX||a.mozMovementX||a.webkitMovementX||0;if(G.players.length){var c=G.players[0];if(!c.blocked&&(c.x=a.clientX-(window.innerWidth-898)/2-c.size/2-17,c.glue))for(var d=0;d<G.balls.length;d++)G.balls[d].glue&&(G.balls[d].x+=b)}else"menu"==G.mode&&(a.clientY>239&&a.clientY<287&&(menu=1,displayHome()),a.clientY>298&&a.clientY<347&&(menu=2,displayHome()),a.clientY>359&&a.clientY<407&&(menu=3,displayHome()))},!1),document.onmousedown=function(a){if(G.wait){var b=document.getElementById("c").getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;c>227&&c<248&&d>466&&d<483&&(G.players[0].blocked=!1,G.balls[0].speed=5,G.wait=!1)}else if("gameOver"==G.mode)G.mode="menu",displayHome();else if("levelCompleted"==G.mode)G.mode="career",displayInGame();else if("challengeCompleted"==G.mode)G.mode="chalenge",displayInGame();else if("menu"==G.mode)switch(menu){case 1:G.mode="career",G.life=10,G.level=0,displayInGame();break;case 2:G.mode="challenge",G.life=30,G.level=0,displayInGame();break;case 3:G.mode="howTo",displayHowTo()}else"howTo"==G.mode?(G.mode="menu",displayHome()):G.players.length&&(G.addLaser(),G.players[0].dropGlueBalls())},displayHome()};</script><style type="text/css">#all,#board,#speech{width:898px;margin:0 auto}#speech,body.inGame #board{display:block}#board,#speech,.pt{z-index:100}#bonus,.pt,body.inGame #speech{position:absolute}body{margin:0}#board,#game,#speech{position:relative}#game{height:500px;width:476px;padding:12px}#board{display:none}#bg{width:1920px;height:1080px;background-color:#2E0150;position:fixed}
.pt::before, .pt::after {background-image: url("p.png");content: "";height: 20px;left: -2px;position: absolute;width: 12px;}
.pt::after {background-position: -12px 0;bottom: 0;}
.pt {background: url("p.png") -24px 0 repeat-y;height: 160px;transition: height 2s linear 0s;width: 8px;}
.pt.opened{height:116px}.pt.bottom::after{content: none;}.pt.bottom{height:20px}#bonus{color:#fff;left:516px;padding:10px;top:257px;height:98px;border:6px solid #ccd;border-color:#ccd #668 #668 #bbc;box-shadow:0 0 1px rgba(0,0,0,1) inset}#bonus>div{float:left;margin:0 5px;vertical-align:baseline;background-color:#fff;border:2px solid #333;display:inline-block;height:73px;position:relative;width:17px}#bonus>div>*{background-image:-webkit-linear-gradient(bottom,#85FF85 0,#FD3131 50px);background-image:-moz-linear-gradient(center bottom ,#85FF85 0,#FD3131 50px);border-radius:3px 3px 0 0;bottom:0;display:block;height:0%;position:absolute;width:100%}#score{left:516px;top:200px}#life{height:98px;left:734px;top:257px;width:132px}#life,#score{position:absolute;border:6px solid #ccd;border-color:#ccd #668 #668 #bbc;box-shadow:0 0 1px #000 inset;padding:10px}
</style></head><body onload="initBoard();"><canvas id="bg" width="1920" height="1080"></canvas><div id="all"><canvas id="speech" width="898" height="500"></canvas><div id="board"><div id="game"><canvas id="c" width="476" height="500"></canvas><canvas id="b" width="476" height="500"></canvas></div><canvas id="score" width="350" height="25"></canvas><div id="bonus"><div id="bonus16"><span></span></div><div id="bonus15"><span></span></div><div id="bonus6"><span></span></div><div id="bonus9"><span></span></div><div id="bonus13"><span></span></div><div id="bonus14"><span></span></div></div><div id="life"></div></div></div> </body></html>