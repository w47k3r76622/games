var ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)},m="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function w(){w=function(){};m.Symbol||(m.Symbol=ca)}var ca=function(){var a=0;return function(c){return"jscomp_symbol_"+(c||"")+a++}}();
function x(){w();var a=m.Symbol.iterator;a||(a=m.Symbol.iterator=m.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ba(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return z(this)}});x=function(){}}function z(a){var c=0;return da(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})}function da(a){x();a={next:a};a[m.Symbol.iterator]=function(){return this};return a}function A(a){x();w();x();var c=a[Symbol.iterator];return c?c.call(a):z(a)}
function B(a){if(!(a instanceof Array)){a=A(a);for(var c,b=[];!(c=a.next()).done;)b.push(c.value);a=b}return a}function C(){this.wa=this.va=0;D(this);this.ga=1}C.prototype={};function E(a,c){"changedTouches"in c&&0<c.changedTouches.length&&(a.va=c.changedTouches[0].clientX,a.wa=c.changedTouches[0].clientY);"clientX"in c&&"clientY"in c&&(a.va=c.clientX,a.wa=c.clientY);return!0}function F(a){var c=controls;a.preventDefault();return G(c)}function I(a){var c=controls;E(c,a);return J(c)}
function J(a){a.wa>window.innerHeight/2?a.na=!0:(a.Aa=!0,a.ga=1);a.va<window.innerWidth/2?a.K=!0:a.L=!0;return!0}function G(a){a.wa>window.innerHeight/2&&(a.na=!1);a.va<window.innerWidth/2?a.K=!1:a.L=!1;return!1}
function K(a,c){var b=controls,d=!0;var e=window.event?window.event.keyCode:a.which;if("Alt"==a.key||"Control"==a.key||"Meta"==a.key)1==a.location&&(b.K=c),2==a.location&&(b.L=c);switch(e){case 20:case 65:case 81:case 83:case 68:case 70:case 71:case 60:case 87:case 90:case 88:case 67:case 86:case 66:case 37:b.K=c;break;case 38:case 112:case 113:case 114:case 115:b.Aa=c;b.ga=e-111;break;case 72:case 74:case 75:case 76:case 77:case 165:case 170:case 222:case 78:case 188:case 190:case 191:case 59:case 58:case 161:case 39:b.L=
c;break;case 40:b.na=c;break;case 32:b.ya=c;break;case 80:b.za=c;break;case 27:b.Ta=c;break;default:d=!1}return d}function D(a){a.Aa=!1;a.na=!1;a.K=!1;a.L=!1;a.Ta=!1;a.ya=!1;a.za=!1}function L(a,c){this.controls=a;this.v=new M(c);this.a=new N(a,this.v);this.state=-1}L.prototype={};function O(){ea();requestAnimationFrame(function(){O()})}
function P(a,c){D(a.controls);if(0==c){var b=a.Ga;b.u[0]=b.u[2]=b.u[4]=255;b.u[1]=b.u[3]=b.u[5]=65280;b.Z=[1375,2735,1375,2735];b.m=[255,510,1020,2040,4080,8160,255,65280,255,65280];b.A=[4095,2046,1020,504,240,96];b.G=[65295,65031,64515,63489,61440,24576];b.D=[61680,3855,61680,3855,61680,3855];b.ea=[23130,23130,23130];b.ja=0;b.Ea="";b.Xa=0;a.a.time=0}1==c&&(a.Ga.ja=0,1>a.state&&Q(a.a,a.controls.ga),b=a.a,b.message=0,b.i=775,b.j=1200,b.la=0,b.l=0,b.g=0,b.V=0,b.pa=0,b.o=0,b.w=0,b.Y=0,b.H=0,b.W=0,b.J=
0,b.$=1,b.O=0,b.Ia=0,b.Ca=0,b.s=!1,b.M=0,++b.R,b.R>=b.ga&&(b.R=0,++b.Ba),b.h=b.Fa[b.R],b.oa=0,b.ka=0,b.c=!1,b.Ua=!1,b.Va=!1,b.C=0,b.X=1,b.aa=0,b.ma=1,b.P=0,b.qa=0);a.state=c}
function fa(){var a=game;ha(a.v);P(a,0);setInterval(function(){var a=game;0==a.state&&(++a.a.time,a.a.R=Math.floor(a.a.time/100)%a.a.ga,a.a.h=a.a.Fa[a.a.R],a.controls.Aa&&P(a,1),a.controls.K=a.controls.L=!1);var b=a.a;if(b.controls.ya&&(b.oa+=10,--b.g,b.controls.ya=!1,b.ka+=8,30<b.ka)){b.c=!0;var d=b.v;d.I&&d.T.U&&(d.Sa.currentTime=0,d.Sa.play())}b.c&&(b.controls.K=!1,b.controls.L=!1);b.controls.K&&!b.Ua&&(b.w=(b.w>>1)+(b.w&1?8:0),d=b.v,d.I&&d.T.U&&(d.Na.currentTime=0,d.Na.play()));b.controls.L&&
!b.Va&&(b.w=(b.w<<1&15)+(b.w&8?1:0),d=b.v,d.I&&d.T.U&&(d.Qa.currentTime=0,d.Qa.play()));b.Ua=b.controls.K;b.Va=b.controls.L;b.fa=b.controls.K?Math.min(b.fa+.1,1):Math.max(b.fa-.1,0);b.ta=b.controls.K&&1>b.fa?-.4:!b.controls.K&&0<b.fa?.4:0;b.ha=b.controls.L?Math.min(b.ha+.1,1):Math.max(b.ha-.1,0);b.xa=b.controls.L&&1>b.ha?.4:!b.controls.L&&0<b.ha?-.4:0;b.controls.na&&(b.pa=Math.min(360,b.pa+2));!b.controls.na&&0<b.pa&&(d=b.v,d.I&&d.T.U&&(d.Ma.currentTime=0,d.Ma.play()),750<b.i&&1197<b.j&&(b.g=-b.pa),
b.pa=0);b.controls.za&&(b.pause=!b.pause,b.controls.za=!1);if(1==a.state&&!a.a.pause){a.controls.Ta&&P(a,0);b=a.a;b.oa=Math.max(0,b.oa-2);b.ka=Math.max(0,b.ka-1);var e=1;for(d=b.i;0<e;){var f=1==b.V?b.Da:b.Ha;b.ra=[e];R(b,f,e,0,0,0,0,b.i,b.j,b.l,b.g);for(f=0;f<b.ba.length;++f){var g=b.ba[f];var l=b.i-g[0];var k=b.j-g[1];var h=b.l*b.l+b.g*b.g;var r=2*(b.l*l+b.g*k);l=r*r-4*h*(l*l+k*k-(g[2]+b.B)*(g[2]+b.B));0<=l&&(h=-.5*(r+Math.sqrt(l))/h,0<=h&&1>=h&&(k=Math.atan2(b.j+h*b.g-g[1],b.i+h*b.l-g[0]),l=Math.cos(k),
k=Math.sin(k),S(b,h,0,0,0,0,b.i,b.j,b.l,b.g,l,k,g[3])&&!b.c&&(l=b.v,l.I&&l.T.U&&(l.La.currentTime=0,l.La.play()),b.h+=500,b.C+=50)))}for(f=0;f<b.da.length;++f){k=b.da[f];g=k[0];h=k[1];l=k[2];k=k[3];r=l-g;var u=k-h;k=Math.sqrt(r*r+u*u);l=-u/k;k=r/k;var n=b.i-b.B*l,p=b.j-b.B*k,q=(b.g*(n-g)-b.l*(p-h))/(b.g*r-b.l*u);0<=q&&1>=q&&(h=((h-p)*r-(g-n)*u)/(b.g*r-b.l*u),-1<=h&&1>=h&&S(b,h,0,0,0,0,b.i,b.j,b.l,b.g,l,k,1)&&!b.c&&(b.o|=1<<f,b.h+=2E3,63==(b.o&63)&&(b.o&=960,T(b,2)),960==(b.o&960)&&(b.o&=63,++b.Y,
6==b.Y?(T(b,4),b.Y=0,b.Ca=b.time,b.s=!0,b.M=0):T(b,5))))}h=.5-b.fa;l=(b.i-240)*Math.cos(h)+(b.j-1290)*Math.sin(h);k=-(b.i-240)*Math.sin(h)+(b.j-1290)*Math.cos(h);f=b.l*Math.cos(h)+b.g*Math.sin(h);g=-b.l*Math.sin(h)+b.g*Math.cos(h);f+=b.ta*k;g-=b.ta*l;R(b,b.sa,e,240,1290,h,b.ta,l,k,f,g);h=Math.PI-.5+b.ha;l=(b.i-510)*Math.cos(h)+(b.j-1290)*Math.sin(h);k=-(b.i-510)*Math.sin(h)+(b.j-1290)*Math.cos(h);f=b.l*Math.cos(h)+b.g*Math.sin(h);g=-b.l*Math.sin(h)+b.g*Math.cos(h);f+=b.xa*k;g-=b.xa*l;R(b,b.sa,e,510,
1290,h,b.xa,l,k,f,g);1==b.ra.length?(b.i+=e*b.l,b.j+=e*b.g,e=0):(e=A(b.ra),time=e.next().value,rotationCenterX=e.next().value,rotationCenterY=e.next().value,rotationAngle=e.next().value,rotationSpeed=e.next().value,localPosX=e.next().value,localPosY=e.next().value,f=e.next().value,g=e.next().value,l=e.next().value,k=e.next().value,elasticity=e.next().value,b.c&&(elasticity=Math.min(elasticity,1)),localPosX+=time*f,localPosY+=time*g,1.1<elasticity&&(e=b.v,e.I&&e.T.U&&(e.Ra.currentTime=0,e.Ra.play()),
b.h+=100,b.C+=20),e=f*l+g*k,f-=2*e*l,g-=2*e*k,e=.9*(f*l+g*k)+12*Math.max(0,elasticity-1),g=-f*k+g*l,f=Math.max(0,1.02-elasticity),0<f&&(b.la+=f*g,g*=1-f,g+=f*b.la,b.la*=1-f),f=e*l-g*k,g=g*l+e*k,b.i=rotationCenterX+localPosX*Math.cos(rotationAngle)-localPosY*Math.sin(rotationAngle),b.j=rotationCenterY+localPosX*Math.sin(rotationAngle)+localPosY*Math.cos(rotationAngle),f-=rotationSpeed*localPosY,g+=rotationSpeed*localPosX,b.l=f*Math.cos(rotationAngle)-g*Math.sin(rotationAngle),b.g=f*Math.sin(rotationAngle)+
g*Math.cos(rotationAngle),e=1-time)}for(f=e=0;f<b.F.length;++f)k=b.F[f],l=k[0]-b.i,k=k[1]-b.j,5*l*l+k*k<b.B*b.B&&(e=f+1);e&&!b.Ia&&0<e&&5>e&&(b.w|=1<<e-1,15==b.w&&(++b.X,b.w=0,T(b,1)));b.Ia=e;for(f=0;f<b.Ya.length;++f)e=b.Ya[f],b.i>e[0]&&b.i<e[2]&&b.j>e[1]&&b.j<e[3]&&(b.V=0>b.g?f+1:0);1==b.V&&400<=b.i&&400>d&&(U(b.v),b.s?(b.M|=1,T(b,7==b.M?24:23)):b.W>b.H?(b.h+=[5E4,2E5,5E5,1E6,2E6,5E6,5E6][b.H],T(b,6+b.H),6>b.H?++b.H:--b.W):(b.C+=1E5,T(b,13)));2==b.V&&615>b.i&&615<=d&&(U(b.v),b.s?(b.M|=2,T(b,7==
b.M?24:23)):b.$>b.J?(b.h+=[5E4,1E5,3E5,8E5,3E6,8E6,2E6][b.J],T(b,14+b.J),6>b.J?++b.J:--b.$):(b.C+=5E4,b.h+=5E4,T(b,21)));3==b.V&&615<=b.i&&615>d&&(U(b.v),b.s?(b.M|=4,T(b,7==b.M?24:23)):(b.C+=1E5,b.h+=1E6,T(b,22)));7==b.M&&b.s&&(b.h+=1E7,b.s=!1);b.s&&2E3<b.time-b.Ca&&(b.s=!1);f=Math.min(.5,1E-5*(b.l*b.l+b.g*b.g));b.l*=1-f;b.g*=1-f;b.g+=.3;1==b.V&&920<b.j&&(d=(1020-b.j)/100,b.l*=d,b.g*=d,965<b.j&&(b.V=0,b.i=671));++b.time;--b.ua;b.ua||(b.message=0);b=a.a;1400<b.j-b.B&&(b=a.v,b.I&&b.T.U&&(b.Oa.currentTime=
0,b.Oa.play()),P(a,2))}if(2==a.state){b=a.a;b.O||(T(b,3),b.P=0,b.qa=0);25<b.O&&(b.message=0);switch(b.P){case 0:110<b.O&&(b.P=1,b.aa=b.C);break;case 1:0==b.O%10&&(b.ma+.5>b.X?(b.qa=b.O+50,++b.P):(++b.ma,b.aa=b.C*b.ma,d=b.v,d.I&&d.T.U&&(d.Ka.currentTime=0,d.Ka.play())));break;case 2:case 3:case 5:b.O>b.qa&&(++b.P,b.C||(b.P=6),b.qa=b.O+50);break;case 4:if(0==b.O%4){for(d=10;0==b.aa%d;)d*=10;b.aa-=d/10;b.h+=d/10;d=b.v;d.I&&d.T.U&&(d.Ja.currentTime=0,d.Ja.play());b.aa||(b.qa=b.O+30,b.P=5)}}6==b.P&&(b.Fa[b.R]=
b.h);++b.O;++b.time;5<a.a.P&&(b=a.a,P(a,3==b.Ba&&b.R==b.ga-1?0:1))}},20);requestAnimationFrame(function(){O()})}
window.addEventListener("load",function(){controls=new C;"ontouchstart"in document.documentElement?(document.ontouchstart=function(a){return I(a)},document.Za=function(a){return I(a)},document.ontouchend=function(a){return F(a)},document.$a=function(a){return F(a)},document.ontouchmove=function(a){var b=controls;a.preventDefault();return E(b,a)}):(document.onmousedown=function(){return J(controls)},document.onmouseup=function(){return G(controls)},document.onmousemove=function(a){return E(controls,
a)});document.onkeydown=function(a){return!K(a,!0)};document.onkeyup=function(a){return!K(a,!1)};var a=localStorage.getItem("PinballData"),c={};a&&(c=JSON.parse(a));c.U=!0;game=new L(controls,c);renderer=new V(document.getElementById("c"),document.getElementById("o"),document.getElementById("s"),game);game.Ga=renderer;fa()});
function N(a,c){this.controls=a;this.v=c;this.B=18;this.Ha=[[8],[2,186,180,16,-.6*Math.PI,0,1],[2,196.15,211.25,48.85,-Math.PI,-.6*Math.PI,1],[2,196.15,211.25,48.85,5/6*Math.PI,Math.PI,1],[0,153.84,235.68,287.55,467.26,1],[2,291.86,464.77,5,-1/6*Math.PI,5/6*Math.PI,1],[0,296.2,462.27,215.4,322,1],[1,302,272,100,5/6*Math.PI,Math.PI,1],[0,202,272,202,180,1],[9],[8],[0,250,180,250,220,1],[2,266,220,16,0,Math.PI,1],[0,282,220,282,180,1],[2,266,180,16,-Math.PI,0,1],[9],[8],[0,330,180,330,220,1],[2,346,
220,16,0,Math.PI,1],[0,362,220,362,180,1],[2,346,180,16,-Math.PI,0,1],[9],[8],[0,410,180,410,220,1],[2,426,220,16,0,Math.PI,1],[0,442,220,442,180,1],[2,426,180,16,-Math.PI,0,1],[9],[8],[0,102,957,102,1110,1],[2,120,1110,18,Math.PI-Math.atan(1.5),Math.PI,1],[0,110,1125,185,1175,1],[2,195,1160,18,-Math.atan2(71,204),Math.PI-Math.atan(1.5),1],[0,212,1154.1,140.74,949.3,1.2],[2,122,957,20,-Math.PI,-Math.atan2(71,204),1],[9],[8],[0,647,1110,647,957,1],[2,627,957,20,Math.atan2(71,204)-Math.PI,0,1],[0,608.26,
949.3,537,1154.1,1.2],[2,554,1160,18,-Math.PI,Math.atan2(71,204)-Math.PI,1],[2,554,1160,18,Math.atan(1.5),Math.PI,1],[0,564,1175,639,1125,1],[2,629,1110,18,0,Math.atan(1.5),1],[9],[8],[0,565,519,630,584,1],[2,637.5,576.5,10.6,Math.PI/4,.75*Math.PI,1],[2,541,480,147,0,Math.PI/4,1],[0,688,480,688,269,1],[2,616,269,72,-Math.PI,0,1],[2,616,269,72,.75*Math.PI,Math.PI,1],[1,470.5,414.5,133.8,-Math.PI/4,Math.PI/4,1],[2,570,514,7,-Math.PI,-.75*Math.PI,1],[2,570,514,7,.75*Math.PI,Math.PI,1],[9],[8],[0,235,
1265,70,1155,1],[1,86,1131,28.9,2.16,Math.PI,1],[0,57,1131,57,940,1],[2,54,940,3,-Math.PI,0,1],[0,51,940,51,1151,1],[2,87,1151,36,2.16,Math.PI,1],[0,67,1181,217,1281,1],[9],[8],[0,532,1281,682,1181,1],[2,662,1151,36,0,.98,1],[0,698,1151,698,940,1],[2,695,940,3,-Math.PI,0,1],[0,692,940,692,1131,1],[1,663,1131,28.9,0,.98,1],[0,679,1155,514,1265,1],[9],[8],[0,231,1400,24,1262,1],[1,57,1219,54,2.16,Math.PI,1],[0,3,1219,3,929.8,1],[1,27.8,929.8,24.8,-Math.PI,-.75*Math.PI,1],[0,10.2,912.2,51.7,870.6,1],
[2,41.1,860,15,0,Math.PI/4,1],[0,56.1,860,56.1,824.9,1],[2,7.6,824.9,48.5,-Math.PI/6,0,1],[0,49.6,800.7,29,765,1],[1,87.5,731.3,67.5,5/6*Math.PI,Math.PI,1],[1,87.5,731.3,67.5,-Math.PI,-5/6*Math.PI,1],[0,29,697.6,104.1,567.5,1],[2,77.3,552,31,-Math.PI/8,Math.PI/6,1],[0,106,540,17.8,327.2,1],[1,197,253,194,.875*Math.PI,Math.PI,1],[1,197,253,194,-Math.PI,-2*Math.PI/3,1],[1,400,605,600,-2*Math.PI/3,-Math.PI/2,1],[4,400,5,400,49,1],[2,400,605,556,-2*Math.PI/3,-Math.PI/2,1],[2,171,207,97,-Math.PI,-2*Math.PI/
3,1],[2,171,207,97,.875*Math.PI,Math.PI,1],[0,81.4,244.1,111.8,317.7,1],[2,119.3,314.7,8,-Math.PI/8,.875*Math.PI,1],[0,126.7,311.7,96.2,238,1],[1,171,207,81,.875*Math.PI,Math.PI,1],[1,171,207,81,-Math.PI,-2*Math.PI/3,1],[1,400,605,540,-2*Math.PI/3,-.6*Math.PI,1],[1,271,208,122.5,-.6*Math.PI,-Math.PI/3,1],[2,387.7,6.2,110.5,Math.PI/3,2/3*Math.PI,1],[1,561,306,236,-2/3*Math.PI,0,1],[0,797,306,797,1219,1],[0,797,1219,753,1219,.4],[0,753,1219,753,306,1],[2,561,306,192,-.6*Math.PI,0,1],[2,506.9,139.5,
16.9,-Math.PI,-.6*Math.PI,1],[0,490,139.5,490,280,1],[1,303,280,187,0,Math.PI/6,1],[0,465,373.5,377,526,1],[2,381.4,528.5,5,-Math.PI,-5/6*Math.PI,1],[2,381.4,528.5,5,Math.PI/3,Math.PI,1],[0,383.9,532.8,518.2,455.3,1],[2,484.7,397.3,67,-Math.PI/4,Math.PI/3,1],[1,615.8,266.2,118.4,.75*Math.PI,Math.PI,1],[1,613.2,266.2,115.8,-Math.PI,-Math.PI/4,1],[1,583.5,295.9,157.8,-Math.PI/4,0,1],[0,741.3,295.9,741.3,500,1],[1,460,500,281.3,0,Math.PI/7,1],[2,938.7,730.5,250,-Math.PI,-6/7*Math.PI,1],[2,938.7,730.5,
250,5/6*Math.PI,Math.PI,1],[1,574.8,940.6,170.2,-Math.PI/6,0,1],[0,745,940.6,745,1219,1],[1,691,1219,54,0,.98,1],[0,724,1262,517,1400,1],[4,517,1400,799,1400,1],[4,799,1400,799,0,1],[4,799,0,0,0,1],[4,0,0,0,1400,1],[4,0,1400,231,1400,1],[9],[0,487,83,502,123,1]];this.Da=[[1,400,605,600,-Math.PI/2,-Math.PI/3,1],[3,400,605,578,-Math.PI/2,-Math.PI/3,1],[2,400,605,556,-Math.PI/2,-Math.PI/3,1],[1,604,251.7,192,-Math.PI/3,0,1],[3,604,251.7,170,-Math.PI/3,0,1],[2,604,251.7,148,-Math.PI/3,0,1],[0,796,251.7,
796,740,1],[0,752,740,752,251.7,1],[4,774,740,774,251.7,1],[1,693,740,103,0,Math.PI/3,1],[2,693,740,59,0,Math.PI/3,1],[3,693,740,81,0,Math.PI/3,1],[2,796,918.5,103,-Math.PI,-2/3*Math.PI,1],[1,796,918.5,147,-Math.PI,-2/3*Math.PI,1],[3,796,918.5,125,-Math.PI,-2/3*Math.PI,1],[0,693,918.5,693,965,1],[4,671,918.5,671,943,1],[0,649,965,649,918.5,1],[3,671,965,22,-Math.PI,Math.PI,1],[10,106,540,17.8,327.2,1],[11,197,253,194,.875*Math.PI,Math.PI,1],[11,197,253,194,-Math.PI,-2*Math.PI/3,1],[11,400,605,600,
-2*Math.PI/3,-Math.PI/2,1],[12,400,605,556,-2*Math.PI/3,-Math.PI/2,1],[12,171,207,97,-Math.PI,-2*Math.PI/3,1],[12,171,207,97,.875*Math.PI,Math.PI,1],[10,81.4,244.1,111.8,317.7,1]];this.Wa=[[4,658,982,658,930,1],[4,684,982,684,930,1],[4,649,965,693,965,1]];var b=Math.acos(8/90);this.sa=[[8],[0,20*Math.cos(b),20*Math.sin(b),90+12*Math.cos(b),12*Math.sin(b),.7],[2,90,0,12,-b,b,.7],[0,90+12*Math.cos(b),-12*Math.sin(b),20*Math.cos(b),-20*Math.sin(b),.7],[2,0,0,20,-Math.PI,-b,.7],[2,0,0,20,b,Math.PI,.7],
[9]];this.ba=[[300,320,24,1.1],[355,420,24,1.1],[410,320,24,1.1]];this.da=[[208,355,232,397],[232,397,256,439],[256,439,280,481],[390,547,432,523],[432,523,474,499],[474,499,516,475],[25,732,49,690],[49,690,73,648],[73,648,97,606],[97,606,121,564]];this.F=[[226,200],[306,200],[386,200],[466,200],[79,1010],[670,1010],[25,1010],[724,1010]];this.Ya=[[0,210,85,260],[680,460,742,520],[550,370,610,440]];Q(this,1);this.message=25;this.pause=!1}N.prototype={};
function R(a,c,b,d,e,f,g,l,k,h,r){for(var u,n,p,q,H=0;H<c.length;++H){var t=c[H];switch(t[0]){case 0:case 10:q=t[1];p=t[2];var v=t[3];n=t[4];v-=q;var y=n-p;u=Math.sqrt(v*v+y*y);n=-y/u;u=v/u;var Y=l-a.B*n,Z=k-a.B*u,aa=(r*(Y-q)-h*(Z-p))/(r*v-h*y);0<=aa&&1>=aa&&(q=((p-Z)*v-(q-Y)*y)/(r*v-h*y),-.5<=q&&q<=b&&S(a,q,d,e,f,g,l,k,h,r,n,u,t[5]));break;case 1:case 11:v=l-t[1];n=k-t[2];q=h*h+r*r;p=2*(h*v+r*n);n=v*v+n*n-(t[3]-a.B)*(t[3]-a.B);n=p*p-4*q*n;0<=n&&(q=.5*(-p+Math.sqrt(n))/q,-.5<=q&&q<=b&&(p=l+q*h,n=
k+q*r,p=Math.atan2(n-t[2],p-t[1]),p>=t[4]&&p<=t[5]&&(n=-Math.cos(p),u=-Math.sin(p),S(a,q,d,e,f,g,l,k,h,r,n,u,t[6]))));break;case 2:case 12:v=l-t[1],n=k-t[2],q=h*h+r*r,p=2*(h*v+r*n),n=v*v+n*n-(t[3]+a.B)*(t[3]+a.B),n=p*p-4*q*n,0<=n&&(q=-.5*(p+Math.sqrt(n))/q,-.5<=q&&q<=b&&(p=l+q*h,n=k+q*r,p=Math.atan2(n-t[2],p-t[1]),p>=t[4]&&p<=t[5]&&(n=Math.cos(p),u=Math.sin(p),S(a,q,d,e,f,g,l,k,h,r,n,u,t[6]))))}}}
function S(a,c,b,d,e,f,g,l,k,h,r,u,n){if(0<k*r+h*u)return!1;c<a.ra[0]&&(a.ra=[c,b,d,e,f,g,l,k,h,r,u,n]);return!0}function T(a,c){0>=a.ua&&(a.message=c,a.ua=50)}function Q(a,c){a.Fa=[0,0,0,0];a.ga=c;a.h=0;a.Ba=0;a.time=0;a.ua=0;a.R=c-1;a.fa=0;a.ha=0;a.ta=0;a.xa=0}function M(a){this.T=a;try{var c=(new Audio("")).canPlayType("audio/wav");this.I="probably"==c||"maybe"==c}catch(b){this.I=!1}}M.prototype={};function U(a){a.I&&a.T.U&&(a.Pa.currentTime=0,a.Pa.play())}
function ha(a){if(a.I){for(var c="RIFF_oO_WAVEfmt "+atob("EAAAAAEAAQAcRwAAHEcAAAEACABkYXRh"),b="",d=0;1280>d;++d){var e=150>d?25:200>d?25+2*(d-150):320>d?125:125*Math.exp((320-d)/300);var f=0<Math.sin(d*e*Math.PI/1E3)?1:-1;var g=(7.04*d&255)/255;e=Math.floor(128+.5*e*(f+g));b+=String.fromCharCode(e)}a.Na=new Audio("data:audio/wav;base64,"+btoa(c+b));a.Qa=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;2E3>d;++d)e=150>d?25:200>d?25+2*(d-150):320>d?125:125*Math.exp((320-d)/500),g=Math.sin(d*
e*Math.PI/1E5),f=0<Math.sin(d*e*Math.PI/1E3)?1:-1,e=Math.floor(128+.5*e*(g+f)),b+=String.fromCharCode(e);a.La=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;1200>d;++d)e=50>d?25:100>d?25+2*(d-50):160>d?125:125*Math.exp((160-d)/300),f=0<Math.sin(d*e*Math.PI/500)?1:-1,g=(56.32*d&255)/255,e=Math.floor(128+.5*e*(f+g)),b+=String.fromCharCode(e);a.Ma=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;1280>d;++d)e=150>d?25:200>d?25+2*(d-150):320>d?125:125*Math.exp((320-d)/300),f=0<Math.sin(d*
e*Math.PI/1E3)?1:-1,e=Math.floor(128+.5*e*f),b+=String.fromCharCode(e);a.Ra=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;24E3>d;++d)e=800>d?d/7:1E3>d?114:114*Math.exp((800-d)/2E4),g=(256*(6E3-d/8)/8E3*d&255)/255,e=Math.floor(128+.5*e*g),b+=String.fromCharCode(e);a.Sa=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;2400>d;++d)e=125*Math.exp(-(d%800)/2E4),f=150>d?25:200>d?25+2*(d-150):320>d?125:125*Math.exp((320-d)/300),g=Math.sin(.2*d*(250-e)*Math.PI/880),f=0<Math.sin(d*f*
Math.PI/1E3)?1:-1,e=Math.floor(128+.5*e*(g+f)),b+=String.fromCharCode(e);a.Ka=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;1200>d;++d)e=150>d?25:200>d?25+2*(d-150):320>d?125:125*Math.exp((320-d)/300),g=Math.sin(d*(100+30*Math.sin(d/60))*Math.PI/880),f=0<Math.sin(d*e*Math.PI/1E3)?1:-1,e=Math.floor(128+.5*e*(g+.5*f)),b+=String.fromCharCode(e);a.Ja=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=24575;d;--d)e=(d&1023)>>3,f=0<Math.sin((100+d)*d*Math.PI/3E6)?1:-1,e=Math.floor(128+
e*f),b+=String.fromCharCode(e);a.Oa=new Audio("data:audio/wav;base64,"+btoa(c+b));b="";for(d=0;24576>d;++d)e=1023-(d&1023)>>3,g=((500+d)/8E3*d&255)/255,e=Math.floor(128+e*g),b+=String.fromCharCode(e);a.Pa=new Audio("data:audio/wav;base64,"+btoa(c+b))}}
function V(a,c,b,d){this.S=d;this.a=d.a;this.ca=a;this.ia=c;this.b=a.getContext("2d");this.f=c.getContext("2d");this.u=[0,0,0,0,0,0];this.Z=[0,0,0,0];this.m=[0,0,0,0,0,0,0,0,0];this.A=[0,0,0,0,0,0];this.G=[0,0,0,0,0,0];this.D=[0,0,0,0,0,0];this.ea=[0,0,0];this.N=document.createElement("canvas");this.N.width=800;this.N.height=800;a=this.N.getContext("2d");a.fillStyle="#000";for(c=0;800>c;c+=4)a.fillRect(c+2,0,2,64);for(c=0;64>c;c+=4)a.fillRect(0,c+2,800,2);a.strokeStyle="#000";a.textAlign="center";
a.font="bold 22px Verdana";a.textBaseline="middle";a.lineWidth=4;for(d=0;4>d;++d)for(c=0;6>c;++c){a.fillStyle=["#006","#006","#600","#066"][d];a.beginPath();a.arc(32+64*c,104+80*d,19,0,7);a.stroke();a.fill();a.fillStyle="#000";var e=["x2 x3 x4 x5 x6 x7".split(" "),"L O S T  ".split(" "),"ISLAND".split(""),"R A F T  ".split(" ")][d][c];a.fillText(e,32+64*c,105+80*d);a.fillStyle=["#22f","#22f","#f22","#2ff"][d];a.beginPath();a.arc(416+64*c,104+80*d,19,0,7);a.stroke();a.fill();a.fillStyle="#000";a.fillText(e,
416+64*c,105+80*d)}a.font="14px Verdana";for(c=0;6>c;++c)a.save(),a.fillStyle="#660",a.translate(64*c,384),a.beginPath(),a.moveTo(2,28),a.lineTo(41,6),a.lineTo(62,52),a.lineTo(23,74),a.lineTo(2,28),a.stroke(),a.fill(),a.fillStyle="#000",a.fillText("Pilot 100k 500k  VOD DVD".split(" ")[c],32,40),a.fillStyle="#ff2",a.translate(384,0),a.beginPath(),a.moveTo(2,28),a.lineTo(41,6),a.lineTo(62,52),a.lineTo(23,74),a.lineTo(2,28),a.stroke(),a.fill(),a.fillStyle="#000",a.fillText("Pilot 100k 500k  VOD DVD".split(" ")[c],
32,40),a.restore();a.fillText("Prime",223,414);a.fillText("Time",225,434);a.fillText("Prime",607,414);a.fillText("Time",609,434);a.font="13px Verdana";for(c=0;6>c;++c)a.save(),a.fillStyle="#840",a.translate(64*c,464),a.beginPath(),a.moveTo(62,28),a.lineTo(23,6),a.lineTo(2,52),a.lineTo(41,74),a.lineTo(62,28),a.stroke(),a.fill(),a.fillStyle="#000",a.fillText("Plane     Time".split(" ")[c],34,30),a.fillText("Crash     Travel".split(" ")[c],28,50),a.fillText(" Bears Dharma Ghosts Aliens ".split(" ")[c],
32,40),a.fillStyle="#fa2",a.translate(384,0),a.beginPath(),a.moveTo(62,28),a.lineTo(23,6),a.lineTo(2,52),a.lineTo(41,74),a.lineTo(62,28),a.stroke(),a.fill(),a.fillStyle="#000",a.fillText("Plane     Time".split(" ")[c],34,30),a.fillText("Crash     Travel".split(" ")[c],28,50),a.fillText(" Bears Dharma Ghosts Aliens ".split(" ")[c],32,40),a.restore();a.font="72px Impact";a.strokeStyle="#000";a.lineWidth=6;for(c=0;6>c;++c)a.fillStyle="#262",a.strokeText("ESCAPE".split("")[c],32+64*c,592),a.fillText("ESCAPE".split("")[c],
32+64*c,592),a.fillStyle="#6f6",a.strokeText("ESCAPE".split("")[c],416+64*c,592),a.fillText("ESCAPE".split("")[c],416+64*c,592);a.drawImage(b,0,624);b=a.createRadialGradient(18,722,18,14,714,2);b.addColorStop(0,"#223");b.addColorStop(1,"#ccc");a.fillStyle=b;a.beginPath();a.arc(18,722,18,0,7,0);a.fill();this.ia.width=this.ca.width=800;this.ia.height=64;this.ca.height=1400;this.ia.style.width=this.ca.style.width="800px";this.ia.style.height="64px";this.ca.style.height="1400px"}V.prototype={};
function W(a,c){for(var b=0;b<c.length;++b){var d=c[b];switch(d[0]){case 0:case 4:first&&a.b.moveTo(d[1],d[2]);a.b.lineTo(d[3],d[4]);first=!1;break;case 1:a.b.arc.apply(a.b,[].concat(B(d.slice(1,6))));break;case 2:a.b.arc(d[1],d[2],d[3],d[5],d[4],-1);break;case 8:a.b.beginPath();first=!0;break;case 9:a.b.fill()}}}function ia(a){a.b.drawImage(a.N,0,704,37,37,a.a.i-18,a.a.j-18,37,37)}function X(a,c,b,d,e,f,g){a.b.drawImage(a.N,64*c+(1<<(d&15)&e?384:0),80*b+64,64,80,f-32,g-40,64,80)}
function ea(){var a=game.Ga;a.f.fillStyle="#600";a.f.fillRect(0,0,a.ia.width,a.ia.height);a.f.fillStyle="#FC0";a.f.font="64px Impact";a.a.message&&!a.ja&&(a.Xa=a.a.time,a.ja=a.a.message,a.Ea=["","ANOTHER EPISODE - BONUS X"+a.a.X,"HIT THE RAMPS TO IMPROVE THE SCENARIO AND ATTRACT AUDIENCE","CLIFFHANGER - SEASON ENDS","SHOOT RAMPS - 30 SECONDS TO ESCAPE","PREPARING YOUR ESCAPE","PILOT EPISODE BREAKS RATING RECORDS","100.000 PEOPLE WATCHING EAGERLY","500.000 VIEWERS GLUED TO THEIR TV","NOW AIRING ON PRIME TIME",
"CATCH-UP TV GATHERS MILLIONS","FULL SEASON NOW ON DVD AND BLU-RAY - EARNING YOU BIG BUCKS","LICENSED MERCHANDISE INCREASE REVENUE STREAM","FANS ADVERTISE THE SERIES ON FORUMS - AUDIENCE GROWS","CHARACTERS STRANDED ON AN ISLAND AFTER THEIR AIRLINER CRASHES","POLAR BEARS SPOTTED IN THE TROPICAL FOREST","DHARMA RESEARCH STATION FOUND","SMOKE GHOSTS WREAK HAVOC IN SURVIVORS CAMP","PROOF OF ALIEN ACTIVITY LEAVE HEROES PUZZLED","CHARACTERS TRANSPORTED BACK AND FORWARD THROUGH TIME","MULTIPLE TIMELINES SET UP ALTERNATIVE FUTURES",
"HEROES STRUGGLE TO SURVIVE IN THE JUNGLE","ATTEMPTING TO GET A RADIO SIGNAL","ONE STEP TOWARDS THE EXIT","JACKPOT","WELCOME TO ESCAPE - THE PINBALL SIMULATION RELEASED FOR JS13KGAMES 2017                  ADD PLAYERS WITH F1-F4, USE DOWN ARROW TO LAUNCH THE BALL, CONTROL FLIPPERS WITH BOTTOM TWO ROWS OF THE KEYBOARD . HIT SPACE TO GENTLY NUDGE THE TABLE .  PRESS P TO PAUSE .                             WINNERS DON'T USE DRUGS"][a.ja]);if(a.ja){a.f.textAlign="left";var c=796-8*(a.a.time-a.Xa);a.f.fillText(a.Ea,
c,58);0>c+a.f.measureText(a.Ea).width&&(a.ja=0)}else if(2==a.S.state)switch(a.f.textAlign="right",a.a.P){case 1:case 2:a.f.fillText(a.a.aa,796,58);a.f.textAlign="left";a.f.fillText("BONUS "+(1<a.a.ma?"x"+a.a.ma:""),0,58);break;case 3:case 4:case 5:a.f.fillText(a.a.aa,396,58),a.f.fillText(a.a.h,796,58)}else 0==a.S.state&&0<a.a.h&&50>a.a.time%100?(a.f.textAlign="center",a.f.fillText("GAME OVER",400,58)):1==a.S.state&&a.a.pause?(a.f.textAlign="center",a.f.fillText("GAME  PAUSED",400,58)):1==a.S.state&&
a.a.c?(a.f.textAlign="center",a.f.fillText("TILT",400,58)):1==a.S.state&&15<a.a.ka?(a.f.textAlign="center",a.f.fillText("DANGER",400,58)):1==a.S.state&&a.a.s?(25>a.a.time%50&&(a.f.textAlign="left",a.f.fillText("ESCAPE RUN",4,58)),a.f.textAlign="right",a.f.fillText(Math.floor((a.a.Ca+2E3-a.a.time)/60),796,58)):(a.f.textAlign="right",a.f.fillText(a.a.h,796,58),a.f.textAlign="left",1==a.S.state?(a.f.save(),a.f.scale(1,.5),a.f.fillText("PLAYER "+(a.a.R+1),0,58),a.f.fillText("BALL "+a.a.Ba,0,118),a.f.restore()):
0==a.S.state&&0<a.a.h&&a.f.fillText("PLAYER "+(a.a.R+1),0,58));a.f.drawImage(a.N,0,0,800,64,0,0,800,64);c=a.ca.height-window.innerHeight+68;if(0==a.S.state){var b=4*a.a.time%(2*c);c=(b>c?2*c-b:b)-68}else c=a.a.oa+c/2*(1+Math.sin((Math.max(200,Math.min(1200,a.a.j))-700)/500*Math.PI/2))-68;a.ca.style.top=-c+"px";a.b.fillStyle="#003";a.b.fillRect(0,0,a.ca.width,a.ca.height);1==a.S.state&&(a.u[0]=a.a.c?0:1<a.a.X?65535:0,a.u[1]=a.a.c?0:2<a.a.X?65535:0,a.u[2]=a.a.c?0:3<a.a.X?65535:0,a.u[3]=a.a.c?0:4<a.a.X?
65535:0,a.u[4]=a.a.c?0:5<a.a.X?65535:0,a.u[5]=a.a.c?0:6<a.a.X?65535:0,a.Z[0]=a.a.c?0:a.a.w&1?65535:0,a.Z[1]=a.a.c?0:a.a.w&2?65535:0,a.Z[2]=a.a.c?0:a.a.w&4?65535:0,a.Z[3]=a.a.c?0:a.a.w&8?65535:0,a.m[0]=a.a.c?0:a.a.o&1?65535:0,a.m[1]=a.a.c?0:a.a.o&2?65535:0,a.m[2]=a.a.c?0:a.a.o&4?65535:0,a.m[3]=a.a.c?0:a.a.o&8?65535:0,a.m[4]=a.a.c?0:a.a.o&16?65535:0,a.m[5]=a.a.c?0:a.a.o&32?65535:0,a.m[6]=a.a.c?0:a.a.o&64?65535:0,a.m[7]=a.a.c?0:a.a.o&128?65535:0,a.m[8]=a.a.c?0:a.a.o&256?65535:0,a.m[9]=a.a.c?0:a.a.o&
512?65535:0,a.A[0]=a.a.c?0:0<a.a.H?65535:0<a.a.W?255:0,a.A[1]=a.a.c?0:1<a.a.H?65535:1<a.a.W?255:0,a.A[2]=a.a.c?0:2<a.a.H?65535:2<a.a.W?255:0,a.A[3]=a.a.c?0:3<a.a.H?65535:3<a.a.W?255:0,a.A[4]=a.a.c?0:4<a.a.H?65535:4<a.a.W?255:0,a.A[5]=a.a.c?0:5<a.a.H?65535:5<a.a.W?255:0,a.G[0]=a.a.c?0:0<a.a.J?65535:0<a.a.$?255:0,a.G[1]=a.a.c?0:1<a.a.J?65535:1<a.a.$?255:0,a.G[2]=a.a.c?0:2<a.a.J?65535:2<a.a.$?255:0,a.G[3]=a.a.c?0:3<a.a.J?65535:3<a.a.$?255:0,a.G[4]=a.a.c?0:4<a.a.J?65535:4<a.a.$?255:0,a.G[5]=a.a.c?0:5<
a.a.J?65535:5<a.a.$?255:0,a.D[0]=a.a.c?0:a.a.s?43690:0<a.a.Y?65535:0,a.D[1]=a.a.c?0:a.a.s?43690:1<a.a.Y?65535:0,a.D[2]=a.a.c?0:a.a.s?43690:2<a.a.Y?65535:0,a.D[3]=a.a.c?0:a.a.s?43690:3<a.a.Y?65535:0,a.D[4]=a.a.c?0:a.a.s?43690:4<a.a.Y?65535:0,a.D[5]=a.a.c?0:a.a.s?43690:5<a.a.Y?65535:0,a.ea[0]=a.a.c?0:a.a.s?43690:a.a.W>a.a.H?255:0,a.ea[1]=a.a.c?0:a.a.s?43690:a.a.$>a.a.J?255:0,a.ea[2]=a.a.c?0:a.a.s?43690:0);a.b.fillStyle="#00001f";a.b.translate(5,10);W(a,a.a.Ha);for(c=0;c<a.a.ba.length;++c)a.b.beginPath(),
a.b.arc(a.a.ba[c][0],a.a.ba[c][1],40,0,2*Math.PI),a.b.fill();a.b.translate(-5,-10);a.b.fillStyle="#2af";W(a,a.a.Ha);c=a.a.time>>1;X(a,0,0,c,a.u[0],105,1150);X(a,1,0,c,a.u[1],150,1180);X(a,2,0,c,a.u[2],195,1210);X(a,3,0,c,a.u[3],553,1210);X(a,4,0,c,a.u[4],598,1180);X(a,5,0,c,a.u[5],643,1150);X(a,0,1,c,a.Z[0],a.a.F[0][0],a.a.F[0][1]+50);X(a,1,1,c,a.Z[1],a.a.F[1][0],a.a.F[1][1]+50);X(a,2,1,c,a.Z[2],a.a.F[2][0],a.a.F[2][1]+50);X(a,3,1,c,a.Z[3],a.a.F[3][0],a.a.F[3][1]+50);X(a,0,2,c,a.m[0],187,393);X(a,
1,2,c,a.m[1],211,435);X(a,2,2,c,a.m[2],235,477);X(a,3,2,c,a.m[3],428,568);X(a,4,2,c,a.m[4],470,544);X(a,5,2,c,a.m[5],512,520);X(a,0,3,c,a.m[6],60,729);X(a,1,3,c,a.m[7],84,687);X(a,2,3,c,a.m[8],108,645);X(a,3,3,c,a.m[9],132,603);X(a,0,4,c,a.A[0],270,750);X(a,1,4,c,a.A[1],246,698);X(a,2,4,c,a.A[2],222,646);X(a,3,4,c,a.A[3],198,594);X(a,4,4,c,a.A[4],174,542);X(a,5,4,c,a.A[5],150,490);X(a,0,5,c,a.G[0],530,930);X(a,1,5,c,a.G[1],554,878);X(a,2,5,c,a.G[2],578,826);X(a,3,5,c,a.G[3],602,774);X(a,4,5,c,a.G[4],
626,722);X(a,5,5,c,a.G[5],650,670);X(a,0,6,c,a.D[0],275,1E3);X(a,1,6,c,a.D[1],315,1030);X(a,2,6,c,a.D[2],355,1E3);X(a,3,6,c,a.D[3],395,1030);X(a,4,6,c,a.D[4],435,1E3);X(a,5,6,c,a.D[5],475,1030);X(a,a.a.s?1:0,7,c,a.ea[0],318,854);X(a,a.a.s?3:2,7,c,a.ea[1],692,576);X(a,3,7,c,a.ea[2],562,456);for(c=0;3>c;++c)b=a.a.o&1<<c,a.b.drawImage(a.N,b?96:64,704,32,48,a.a.da[c][0],a.a.da[c][1],32,48);for(c=3;6>c;++c)b=a.a.o&1<<c,a.b.drawImage(a.N,128,b?744:704,48,32,a.a.da[c][0],a.a.da[c][3]-8,48,32);for(c=6;10>
c;++c)b=a.a.o&1<<c,a.b.drawImage(a.N,b?224:192,704,32,48,a.a.da[c][0]-6,a.a.da[c][3]-4,32,48);a.b.strokeStyle="#00F";a.b.lineWidth=2;a.b.fillStyle="#ddd";a.b.save();a.b.translate(240,1290);a.b.rotate(.5-a.a.fa);W(a,a.a.sa);a.b.fill();a.b.stroke();a.b.restore();a.b.save();a.b.translate(510,1290);a.b.rotate(Math.PI-.5+a.a.ha);W(a,a.a.sa);a.b.fill();a.b.stroke();a.b.restore();for(c=0;c<a.a.F.length;++c)a.b.drawImage(a.N,352,624,6,29,a.a.F[c][0]-2,a.a.F[c][1]-14,6,29);a.a.V||ia(a);for(c=0;c<a.a.ba.length;++c)a.b.drawImage(a.N,
256,624,80,80,a.a.ba[c][0]-40,a.a.ba[c][1]-40,80,80);a.b.strokeStyle="#CCC";a.b.lineWidth=3;for(c=0;c<a.a.Da.length;++c)switch(b=a.a.Da[c],b[0]){case 0:case 4:a.b.beginPath();a.b.moveTo(b[1],b[2]);a.b.lineTo(b[3],b[4]);a.b.stroke();break;case 1:case 2:case 3:a.b.beginPath(),a.b.arc.apply(a.b,[].concat(B(b.slice(1,6)))),a.b.stroke()}a.a.V&&ia(a);for(c=0;c<a.a.Wa.length;++c)b=a.a.Wa[c],a.b.beginPath(),a.b.moveTo(b[1],b[2]),a.b.lineTo(b[3],b[4]),a.b.stroke()};