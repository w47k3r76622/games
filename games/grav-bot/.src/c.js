'use strict';var e,aa=Date.now(),h=null,m=800,p=null,s=null;
window.onload=function(){var a=document.getElementById("game");m=window.innerWidth/window.innerHeight*896;var b=window.innerHeight/896;h=a.getContext("2d");h.canvas.width=window.innerWidth;h.canvas.height=window.innerHeight;p=document.createElement("canvas");p.width=m;p.height=896;s=p.getContext("2d");t.Qa(m,896,b,a);requestAnimationFrame(ba);document.addEventListener("keydown",function(a){t.pa(a.keyCode||a.which)},!1);document.addEventListener("keyup",function(a){t.ra(a.keyCode||a.which)},!1);a.addEventListener("mousemove",
function(b){b=ca(a,b);t.ua(b.x/t.scale,b.y/t.scale)},!1);a.addEventListener("mousedown",function(b){b=ca(a,b);t.ca(b.x/t.scale,b.y/t.scale)},!1);a.addEventListener("mouseup",function(b){b=ca(a,b);t.da(b.x/t.scale,b.y/t.scale)},!1)};
function ba(){h.clearRect(0,0,m,896);s.save();s.clearRect(0,0,m,896);var a=Date.now(),b=Math.min(1E3,a-aa)/1E3;t.bb(b);t.Xa(s);s.fillStyle="#000";s.fillRect(0,0,60,15);s.fillStyle="#fff";b=Math.floor(1/b);s.font="10px Roboto";s.fillText("FPS: "+b,10,10);s.restore();h.setTransform(t.scale,0,0,t.scale,0,0);h.drawImage(p,0,0,m,896);requestAnimationFrame(ba);aa=a}
window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};Math.Za=function(a){return a?0>a?-1:1:0};function ca(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}Array.prototype.clone=function(){return this.slice(0)};Math.Pa=function(a){return Math.min(Math.max(a,-u.H.width+t.width),0)};
Array.prototype.remove=function(a){this.splice(this.indexOf(a),1)};function z(a){a.prototype.constructor=a}function B(a,b){a.prototype=Object.create(b.prototype);a.gb=a.prototype}
var t=function(){var a={ga:{},L:null,I:null,scale:1,width:0,height:0,canvas:null,ta:[],qa:"js13adg_currentLevel",Qa:function(b,c,d,f){a.scale=d;a.canvas=f;a.width=b;a.height=c;a.audio=new fa;a.ga.menu=new D;a.ga.game=new ga;a.ga.pp=new E;a.oa("menu")},bb:function(b){a.L.update(b);a.I&&a.I.update(b)},Xa:function(b){a.L.D(b);a.I&&a.I.D(b)},oa:function(b,c){a.L=a.ga[b];a.L.N(c)},U:function(b){a.I=a.ga.pp;a.I.N(b)},da:function(b,c){a.I&&!a.I.fa?(t.audio.play("start"),a.I=null):a.L.da(b,c)},ca:function(b,
c){a.I||a.L.ca(b,c)},ua:function(b,c){a.I||a.L.ua(b,c)},pa:function(b){a.I||a.L.pa(b)},ra:function(b){a.I&&!a.I.fa?a.I=null:a.L.ra(b)}};return a}();function na(a,b){var c=new XMLHttpRequest;c.onload=function(){a.call(b,c.responseText)};c.open("GET","levels.txt",!0);c.send()}function F(a,b){this.x=a;this.y=b;this.height=this.width=0;this.Wa=this.Ta=this.Ua=this.Va=this.Ja=null}B(F,Object);e=F.prototype;e.update=function(){};e.D=function(){};e.ca=function(){var a=this.Ta;a&&a(this)};
e.da=function(){var a=this.Ja;a&&a(this);(a=this.Wa)&&a(this)};e.contains=function(a,b){return a>this.x&&a<this.x+this.width&&b>this.y&&b<this.y+this.height?!0:!1};z(F);
function G(a,b,c,d,f){F.call(this,a,b);this.Aa=d||1;this.Na=f||1;this.time=this.frame=0;this.za=15;this.xa=!1;this.la=0;this.loop=!1;this.Ma=null;this.visible=!0;this.Ka=null;this.loaded=!1;"string"===typeof c?(a=new Image,a.src=c,this.aa=a,this.aa.onload=function(){this.width=this.aa.width/this.Aa;this.height=this.aa.height/this.Na;this.loaded=!0}.bind(this)):"object"===typeof c&&(this.aa=c,this.loaded=!0);this.na=this.O=!1;this.Y=!0;this.F={top:!1,bottom:!1,left:!1,right:!1};this.T=null;this.va=
!1;this.P=8500;this.B={x:0,y:0}}B(G,F);function K(a,b,c,d,f){if(!a.Y)return!1;var k=a.x,q=a.x+a.width,v=a.y;a=a.y+a.height;return(k>=b&&k<=b+d||q>=b&&q<=b+d||k<=b&&q>=b||k<=b+d&&q>=b+d)&&(v>=c&&v<=c+f||a>=c&&a<=c+f)}
function oa(a,b){for(var c=a.x,d=a.y,f=10,k=a.B.x,q=a.B.y,v=[],A=0;10>A;A++){d+=a.B.y*b/10;if(0>a.B.y){var r=L(c,d),n=L(c+a.width-1,d),w=r&&K(r,c,d,a.width,a.height),x=n&&K(n,c,d,a.width,a.height);w&&v.push(r);x&&v.push(n);a.F.top=w||x}else 0<a.B.y&&(n=L(c,d+a.height-1),r=L(c+a.width-1,d+a.height-1),x=n&&K(n,c,d,a.width,a.height),w=r&&K(r,c,d,a.width,a.height),x&&v.push(n),w&&v.push(r),a.F.bottom=x||w);if(a.F.bottom||a.F.top){a.B.y=0;f=A;break}}a.y+=b*f/10*q;d=a.y;f=10;for(A=0;10>A;A++)if(c+=a.B.x*
b/10,0>a.B.x?(r=L(c,d),n=L(c,d+a.height-1),w=r&&K(r,c,d,a.width,a.height),x=n&&K(n,c,d,a.width,a.height),w&&v.push(r),x&&v.push(n),a.F.left=w||x):0<a.B.x&&(n=L(c+a.width-1,d),r=L(c+a.width-1,d+a.height-1),x=n&&K(n,c,d,a.width,a.height),w=r&&K(r,c,d,a.width,a.height),x&&v.push(n),w&&v.push(r),a.F.right=x||w),a.F.left||a.F.right){a.B.x=0;f=A;break}v.forEach(function(a){a&&a.Y&&a.Q(this)}.bind(a));a.x+=b*f/10*k}e=G.prototype;e.Q=function(){this.T&&this.T()};
e.ma=function(){pa(this.x,this.y);this.Ka&&this.Ka(this)};e.play=function(a,b,c){this.la!=a&&(this.time=0);this.loop=void 0===b?this.loop:b;this.la=a||0;this.za=c||this.za;this.xa=!0};e.stop=function(){this.xa=!1};e.update=function(a){this.va&&(this.B.y+=this.P*a,this.F.top=this.F.bottom=this.F.left=this.F.right=!1,oa(this,a));this.xa?(this.time+=a,this.frame=Math.floor(this.za*this.time),this.frame=this.loop?this.frame%this.Aa:Math.min(this.Aa-1,this.frame)):this.time+=a};
e.D=function(a){if(this.visible){if(this.O||this.na){a.save();var b=this.x+this.width/2,c=this.y+this.height/2;a.translate(b,c);a.scale(this.na?-1:1,this.O?-1:1);a.translate(-b,-c)}this.loaded&&a.drawImage(this.aa,this.frame*this.width,this.la*this.height,this.width,this.height,this.x,this.y,this.width,this.height);(this.O||this.na)&&a.restore()}};z(G);function Text(a,b,c,d,f){F.call(this,a,b);this.text=f;this.font=d;this.height=c;this.style=this.height+"px "+d;this.color="#333"}B(Text,F);
Text.prototype.update=function(){};Text.prototype.D=function(a){a.font=this.style;this.width||(this.width=a.measureText(this.text).width);a.fillStyle=this.color;a.fillText(this.text,this.x,this.y+this.height)};z(Text);function O(a,b,c,d,f,k){F.call(this,a,b);this.width=c;this.height=d;this.P=1500;this.B={x:f,y:k}}B(O,Object);O.prototype.ma=function(){pa(this.x,this.y)};O.prototype.update=function(a){a=Math.min(a,.016);this.B.y+=this.P*a;this.x+=this.B.x*a;this.y+=this.B.y*a};
O.prototype.D=function(a){a.fillRect(this.x,this.y,this.width,this.height)};z(O);function R(a,b,c){F.call(this,a,b);this.Sa=30;this.K=[];this.time=0;this.Ca=c;this.color="#FFFFFF";for(c=0;c<this.Sa;c++)this.K.push(new O(a,b,8,8,300*Math.random()-150,-200-250*Math.random()));this.ka=!1}B(R,Object);function ra(a,b,c){var d=u.H.K;d.color=c||d.color;d.K.forEach(function(c){c.x=a;c.y=b});d.ka=!0}R.prototype.update=function(a){this.ka&&(this.time+=a,this.time>this.Ca&&(this.time=this.Ca,this.ka=!1),this.K.forEach(function(b){b.update(a)}))};
R.prototype.D=function(a){this.ka&&(a.globalAlpha=1-this.time/this.Ca,a.fillStyle=this.color,this.K.forEach(function(b){b.D(a)}),a.globalAlpha=1)};z(R);function S(){this.G=[];this.Z=null}B(S,Object);e=S.prototype;e.N=function(){};e.add=function(a){this.G.push(a)};e.remove=function(a){a=this.G.indexOf(a);-1!=a&&this.G.splice(a,1)};e.clear=function(){this.G=[]};e.update=function(a){this.G.forEach(function(b){b.update(a)})};e.D=function(a){this.G.forEach(function(b){b.D(a)})};
e.da=function(a,b){for(var c=this.G.length-1;0<=c;c--){var d=this.G[c];if(d.contains(a,b)){d.da();break}}};e.ca=function(a,b){for(var c=this.G.length-1;0<=c;c--){var d=this.G[c];if(d.contains(a,b)){d.ca();break}}};e.ua=function(a,b){if(this.Z){if(this.Z.contains(a,b))return;var c=this.Z,d=c.Ua;d&&d(c);this.Z=null}for(d=this.G.length-1;0<=d;d--)if(c=this.G[d],c.contains(a,b)){(d=c.Va)&&d(c);this.Z=c;break}};e.pa=function(){};e.ra=function(){};z(S);function fa(){this.wa={}}
fa.prototype.add=function(a,b,c){this.wa[a]=[];c.forEach(function(c,f){this.wa[a].push({ha:0,count:b,Ea:[]});for(var k=0;k<b;k++){var q=new Audio;q.src=jsfxr(c);this.wa[a][f].Ea.push(q)}},this)};fa.prototype.play=function(a){a=this.wa[a];a=1<a.length?a[Math.floor(Math.random()*a.length)]:a[0];a.Ea[a.ha].duration&&a.Ea[a.ha].play();a.ha<a.count-1?a.ha++:a.ha=0};function T(a,b){G.call(this,a,b,"Enemy.png");this.X=!1;this.B.x=55}B(T,G);z(T);
T.prototype.update=function(a){this.Ia=this.O?this.y-1:this.y+this.height;var b=L(this.x+this.width,this.Ia);if(this.F.right||(!b||b instanceof U)&&0<this.B.x)this.B.x=-55;b=L(this.x,this.Ia);if(this.F.left||(!b||b instanceof U)&&0>this.B.x)this.B.x=55;!this.X&&K(this,u.H.A.x,u.H.A.y,u.H.A.width,u.H.A.height)&&(G.prototype.Q.call(this),this.X=!0);G.prototype.update.call(this,a)};function ga(){S.call(this);this.C=null;this.ya=0}B(ga,S);e=ga.prototype;
e.N=function(a){t.canvas.style.backgroundColor="#111";S.prototype.N.call(this,h);this.ya=0;var b;a:{b=decodeURIComponent(window.location.search.substring(1)).split("&");var c,d;for(d=0;d<b.length;d++)if(c=b[d].split("="),"level"===c[0]){b=void 0===c[1]?!0:c[1];break a}b=void 0}a=parseInt(b||a.C);this.C=new u(a);1==a?t.U({title:"Tutorial",R:["Use LEFT and RIGHT to move","Use UP to jump"]}):2==a?t.U({title:"Tutorial",R:["Use SPACE to flip gravity"]}):3==a?t.U({title:"Tutorial",R:["Watch out for those spikes!",
"Collect keys to unlock doors"]}):4==a?t.U({title:"Tutorial",R:["Moving spikes are even worse!!"]}):7==a&&t.U({title:"Tutorial",R:["Sometimes it helps to flip","gravity while falling/jumping"]})};e.update=function(a){this.C.update(a);S.prototype.update.call(this,a)};
e.D=function(a){if(this.C.A){var b=(t.width-this.C.V*this.C.J)/2,c=(t.height-this.C.W*this.C.J)/2;this.ya=Math.floor(Math.Pa(-this.C.A.x+t.width/2));a.setTransform(1,0,0,1,this.ya+Math.max(b,0),c)}this.C.D(a);S.prototype.D.call(this,a);a.setTransform(1,0,0,1,0,0)};e.ua=function(){};
e.pa=function(a){if(this.C.A){37==a&&this.C.A.move(-1);39==a&&this.C.A.move(1);if(38==a){var b=this.C.A;b.ba||!b.F.bottom&&!b.F.top||(t.audio.play("jump"),b.play(1,!1),b.B.y=-1300*Math.Za(b.P))}32==a&&(a=this.C.A,a.ba||(t.audio.play("flip"),a.P*=-1,a.O=!a.O))}};e.ra=function(a){this.C.A&&(37!=a&&39!=a||this.C.A.stop())};z(ga);function V(a,b,c){G.call(this,a,b,c);this.ea=null;this.Oa=b}B(V,G);V.prototype.Q=function(){this.Y=!1;this.ma();this.ea&&this.ea(this.x+this.width/2,this.y+this.height/2)};
V.prototype.update=function(a){this.y=this.Oa+this.height*Math.sin(3*this.time)*.2;G.prototype.update.call(this,a)};z(V);
function u(a){this.J=64;this.Fa=this.fb=this.eb=1;this.Ga=!1;this.frames=0;this.A=this.Ba=null;this.$=[];this.height=this.width=0;this.ia=[];this.M=[];this.Ha=[];this.G=[];var b=a;b>t.ta.length&&(b=1);a=[];var c=[];a=t.ta[b-1].split("\n");for(b=0;b<a.length;b++)c.push(a[b].trim().split(""));this.ia=c;this.V=this.ia[0].length+2;this.W=this.ia.length+2;for(a=0;a<this.W;a++)for(this.M[a]=[],c=0;c<this.V;c++)0!==c&&c!==this.V-1&&0!==a&&a!==this.W-1||sa(this,"Y",c,a);for(a=0;a<this.ia.length;a++)for(b=
this.ia[a],c=0;c<b.length;c++)sa(this,b[c],c+this.eb,a+this.fb);for(a=0;100>a;a++)this.Ha.push({x:Math.random()*(this.V*this.J-20)+10,y:Math.random()*(this.W*this.J-20)+10,size:10*Math.random()});this.width=this.V*this.J;this.height=this.W*this.J;this.K=new R(0,0,this.Fa);t.audio.add("win",1,[[0,,.52,.39,.27,.35,,.12,,.14,.56,.2085,.673,,,,,,1,,,,,.3]]);u.H=this}B(u,Object);
function sa(a,b,c,d){var f=null,k=c*a.J,q=d*a.J;switch(b){case "Y":f=new G(k,q,"wall.png");f.Ma="#644637";break;case "W":f=new G(k,q,"wall2.png");f.Ma="#2277aa";break;case "D":f=new ta(20+k,q,"door.png");break;case "K":f=new Ba(17+k,24+q,"key.png");break;case "X":f=new V(k+17,q+17,"win.png");f.ea=a.Ra;a.Ba=f;break;case "^":f=new U(k,q,"spike.png");f.O=!0;f.T=a.sa;break;case "+":f=new U(k,q+44,"spike.png");f.T=a.sa;break;case "S":a.A=new W(k+4,q-4);
break;case "E":b=new T(k,q+40);b.T=a.sa;a.$.push(b);break;case "F":b=new T(k,q),b.O=!0,b.P=-b.P,b.T=a.sa,a.$.push(b)}f&&(a.G.push(f),a.M[d][c]=f)}u.prototype.sa=function(){var a=u.H.A;ra(a.x+a.width/2,a.y+a.height/2,"#AAAAAA");Ca();var b=parseInt(localStorage[t.qa]||1);setTimeout(function(){t.oa("game",{C:b})}.bind(this),1E3*u.H.Fa)};
u.prototype.Ra=function(a,b){t.audio.play("win");ra(a,b,"#AAFFAA");var c=parseInt(localStorage[t.qa]||1);c++;c>t.ta.length?(t.U({title:"Congrats!",R:["You finished the game!","Reload the page to play again!"],fa:!0}),c=1):setTimeout(function(){t.oa("game",{C:c})},1E3*u.H.Fa);localStorage[t.qa]=c};function L(a,b){var c=u.H,d=Math.floor(a/c.J),f=Math.floor(b/c.J);return f>=c.M.length||d>c.M[f].length?null:c.M[f][d]}
function pa(a,b){var c=u.H,d=Math.floor(a/c.J),f=Math.floor(b/c.J);if(!(f>=c.M.length||d>c.M[f].length)){var k=c.M[f][d];c.M[f][d]=null;c.G.remove(k)}}u.prototype.update=function(a){this.A&&this.A.update(a);this.$.forEach(function(b){b.update(a)});this.key&&this.key.update(a);this.Ba&&this.Ba.update(a);this.K&&this.K.update(a);!this.Ga&&this.A&&(this.frames++,3<this.frames&&(this.Ga=!0,this.$.forEach(function(a){a.va=!0}),this.A.va=!0))};
u.prototype.D=function(a){a.fillStyle="#222";a.fillRect(0,0,this.V*this.J,this.W*this.J);a.fillStyle="#2A2A2A";this.Ha.forEach(function(b){a.fillRect(b.x,b.y,b.size,b.size)});this.G.forEach(function(b){b.D(a)});this.$.forEach(function(b){b.D(a)});this.A&&this.A.D(a);this.K&&this.K.D(a)};z(u);function D(){S.call(this)}B(D,S);
D.prototype.N=function(){t.canvas.style.backgroundColor="#ffffff";t.audio.add("start",1,[[2,,.18,,,.23,,,,,,,,,,,,,1,,,.1,,.3]]);S.prototype.N.call(this);var a=new Text(m/2-250,179.2,120,"Trebuchet MS","Grav Bot");this.add(a);this.La=new Text(m/2-50,537.6,60,"Trebuchet MS ","Play");na(function(a){t.ta=a.split("&");this.add(this.La)},this);this.La.Ja=function(){var a=parseInt(localStorage[t.qa]||1);t.audio.play("start");t.oa("game",{C:a})};a=new Text(m/2-130,856,20,"Trebuchet MS","by David & Amy Goemans");
this.add(a)};D.prototype.update=function(a){S.prototype.update.call(this,a)};z(D);
function W(a,b){G.call(this,a,b,"player.png",2,2);this.cb=300;this.S=0;this.ba=!1;this.Da=0;t.audio.add("jump",1,[[0,,.22,,.1871,.3251,,.2199,,,,-.2199,,.1513,.02,,,,.74,,,,-.02,.3]]);t.audio.add("flip",1,[[0,,.18,.49,,.49,,.7,-.02,,,-.24,,.12,-.04,,-.02,-.02,.48,,,,,.3]]);t.audio.add("die",1,[[1,.0273,.01,.16,.71,.56,,-.4599,.3519,.4213,.0476,.1725,,.9815,.1661,.6997,6E-4,-.1146,.7501,.7435,.0332,.4191,.422,.3]])}B(W,G);W.prototype.move=function(a){this.ba||(this.S=a,this.play(0,!0,15))};
function Ca(){var a=u.H.A;t.audio.play("die");a.va=!1;a.ba=!0;a.visible=!1;a.stop()}W.prototype.stop=function(){this.S=this.B.x=0;G.prototype.stop.call(this)};W.prototype.update=function(a){this.ba||(0!==this.S&&(this.na=0>this.S),this.B.x=this.S*this.cb);G.prototype.update.call(this,a);1===this.la&&(this.F.bottom||this.F.top)&&(G.prototype.stop.call(this),this.frame=0,0!==this.S&&this.play(0,!0,15))};z(W);function E(){this.fa=!1;S.call(this);this.width=400;this.height=150}B(E,S);
E.prototype.N=function(a){S.prototype.N.call(this);this.fa=a.fa;this.height=150;this.clear();var b=new Text(this.width/2-50,6,28,"Trebuchet MS",a.title);b.color="#222";this.add(b);var c=100;a.R.forEach(function(a){b=new Text(this.width/2-160,c,24,"Trebuchet MS ",a);this.add(b);c+=40;this.height+=40}.bind(this))};
E.prototype.D=function(a){a.globalAlpha=.5;a.fillStyle="#000";a.fillRect(0,0,t.width,t.height);a.globalAlpha=1;a.setTransform(1,0,0,1,(t.width-this.width)/2,t.height/2-this.height/2);a.strokeStyle="#999";a.lineWidth=10;a.strokeRect(0,0,this.width,this.height);a.fillStyle="#eee";a.fillRect(0,0,this.width,this.height);a.fillStyle="#999";a.fillRect(-1,0,this.width+2,50);S.prototype.D.call(this,a);a.setTransform(1,0,0,1,0,0)};z(E);function U(a,b,c){G.call(this,a,b,c);this.X=!1}B(U,G);z(U);
U.prototype.Q=function(a){!this.X&&a instanceof W&&(G.prototype.Q.call(this,a),this.X=!0)};function ta(a,b,c){G.call(this,a,b,c);this.ea=null;t.audio.add("door",1,[[1,,.01,,.2298,.6306,,-.53,,,,,,,,,,,1,,,,,.3]]);t.audio.add("door_no",1,[[0,,.18,.41,,.24,,,,,,.4625,.6586,,,,,,1,,,,,.3]])}B(ta,G);z(ta);ta.prototype.Q=function(a){a instanceof W&&(u.H.A.Da?(u.H.A.Da--,this.Y=!1,this.ma(),t.audio.play("door")):t.audio.play("door_no"))};
function Da(){this.Ya=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;.01>this.c&&(this.c=.01);a=this.b+this.c+this.e;.18>a&&(a=.18/a,this.b*=a,this.c*=a,this.e*=a)}}
var Ea=new function(){this.ja=new Da;var a,b,c,d,f,k,q,v,A,r,n,w;this.reset=function(){var a=this.ja;d=100/(a.f*a.f+.001);f=100/(a.g*a.g+.001);k=1-a.h*a.h*a.h*.01;q=-a.i*a.i*a.i*1E-6;a.a||(n=.5-a.n/2,w=5E-5*-a.o);v=1+a.l*a.l*(0<a.l?-.9:10);A=0;r=1==a.m?0:(1-a.m)*(1-a.m)*2E4+32};this.ab=function(){this.reset();var d=this.ja;a=d.b*d.b*1E5;b=d.c*d.c*1E5;c=d.e*d.e*1E5+12;return 3*((a+b+c)/3|0)};this.$a=function(x,qa){var g=this.ja,ua=1!=g.s||g.v,M=g.v*g.v*.1,va=1+3E-4*g.w,H=g.s*g.s*g.s*.1,Fa=1+1E-4*g.t,
Ga=1!=g.s,Ha=g.x*g.x,Ia=g.g,wa=g.q||g.r,Ja=g.r*g.r*g.r*.2,ha=g.q*g.q*(0>g.q?-1020:1020),xa=g.p?((1-g.p)*(1-g.p)*2E4|0)+32:0,Ka=g.d,ya=g.j/2,La=g.k*g.k*.01,ia=g.a,ja=a,Ma=1/a,Na=1/b,Oa=1/c,g=5/(1+g.u*g.u*20)*(.01+H);.8<g&&(g=.8);for(var g=1-g,ka=!1,za=0,X=0,Y=0,da=0,P=0,Z,Q=0,y,I=0,N,la=0,l,Aa=0,J,ma=0,ea=Array(1024),$=Array(32),C=ea.length;C--;)ea[C]=0;for(C=$.length;C--;)$[C]=2*Math.random()-1;for(C=0;C<qa;C++){if(ka)return C;xa&&++Aa>=xa&&(Aa=0,this.reset());r&&++A>=r&&(r=0,d*=v);k+=q;d*=k;d>f&&
(d=f,0<Ia&&(ka=!0));y=d;0<ya&&(ma+=La,y*=1+Math.sin(ma)*ya);y|=0;8>y&&(y=8);ia||(n+=w,0>n?n=0:.5<n&&(n=.5));if(++X>ja)switch(X=0,++za){case 1:ja=b;break;case 2:ja=c}switch(za){case 0:Y=X*Ma;break;case 1:Y=1+2*(1-X*Na)*Ka;break;case 2:Y=1-X*Oa;break;case 3:Y=0,ka=!0}wa&&(ha+=Ja,N=ha|0,0>N?N=-N:1023<N&&(N=1023));ua&&va&&(M*=va,1E-5>M?M=1E-5:.1<M&&(M=.1));J=0;for(var Pa=8;Pa--;){I++;if(I>=y&&(I%=y,3==ia))for(Z=$.length;Z--;)$[Z]=2*Math.random()-1;switch(ia){case 0:l=I/y<n?.5:-.5;break;case 1:l=1-I/y*
2;break;case 2:l=I/y;l=6.28318531*(.5<l?l-1:l);l=1.27323954*l+.405284735*l*l*(0>l?1:-1);l=.225*((0>l?-1:1)*l*l-l)+l;break;case 3:l=$[Math.abs(32*I/y|0)]}ua&&(Z=Q,H*=Fa,0>H?H=0:.1<H&&(H=.1),Ga?(P+=(l-Q)*H,P*=g):(Q=l,P=0),Q+=P,da+=Q-Z,l=da*=1-M);wa&&(ea[la%1024]=l,l+=ea[(la-N+1024)%1024],la++);J+=l}J=.125*J*Y*Ha;x[C]=1<=J?32767:-1>=J?-32768:32767*J|0}return qa}};
window.jsfxr=function(a){Ea.ja.Ya(a);var b=Ea.ab();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*Ea.$a(new Uint16Array(a.buffer,44),b),c=new Uint32Array(a.buffer,0,44);c[0]=1179011410;c[1]=b+36;c[2]=1163280727;c[3]=544501094;c[4]=16;c[5]=65537;c[6]=44100;c[7]=88200;c[8]=1048578;c[9]=1635017060;c[10]=b;for(var b=b+44,c=0,d="data:audio/wav;base64,";c<b;c+=3)var f=a[c]<<16|a[c+1]<<8|a[c+2],d=d+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f>>
12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f&63]);return d};function Ba(a,b,c){G.call(this,a,b,c);this.ea=null;t.audio.add("key",1,[[0,,.0289,.5117,.151,.7819,,,,,,,,,,,,,1,,,,,.3]])}B(Ba,G);z(Ba);Ba.prototype.Q=function(a){a instanceof W&&(this.Y=!1,this.ma(),u.H.A.Da++,t.audio.play("key"))};
