'use strict';var c,g,h,k,l,m,n,p;let q=!1,r=document,t=window;var u=r.querySelector("canvas");
class aa{constructor(){this.pressed={};this.Ca={};this.pa=new v(0,0);this.qc="ontouchstart"in t;r.body.addEventListener("keydown",(a)=>{a.keyCode in this.Ca&&this.Zb(a,-1,1)});r.body.addEventListener("keyup",(a)=>{a.keyCode in this.Ca&&this.Zb(a,1,0)})}bind(a){a.forEach((a)=>{this.pressed[a]=0;this.Ca[a]=0})}cc(){this.bind([1,3]);r.body.addEventListener("mouseenter",this.Ua.bind(this));r.body.addEventListener("mousemove",this.Ua.bind(this))}Zb(a,b,d){var e=e||a.keyCode;a.preventDefault();this.Ca[e]=
b;this.pressed[e]=d}Ua(a){this.pa=c.Lc(new v(a.clientX-u.offsetLeft,a.clientY-u.offsetTop))}}let w=Math.abs,ba=Math.cos,ca=Math.sin,da=Math.atan2,x=Math.floor,z=Math.pow,ea=Math.sqrt,A=Math.random,B=Date.now,C=Math.PI;function D(a,b,d){return a<b?b:null!==d&&void 0!==d&&a>d?d:a}function E(a,b){return x(A()*(b-a))+a}function F(a){return a[E(0,a.length)]}function G(a){let b,d,e=a.slice(0,a.length);for(a=0;a<e.length;a++)b=E(0,e.length),d=e[a],e[a]=e[b],e[b]=d;return e}
class v{constructor(a,b){this.x=a;this.y=b}add(a){this.x+=a.x;this.y+=a.y}angle(){return da(this.y/this.x)}static ad(a,b){return ea(z(b.x-a.x,2)+z(b.y-a.y,2))}}class H{constructor(a,b,d,e){this.yb=a;this.zb=b;this.c=d;this.f=e;this.i=I.lc(this)}set x(a){this.yb=a;this.i.update(this)}get x(){return this.yb}set y(a){this.zb=a;this.i.update(this)}get y(){return this.zb}D(){return this.i.D()}static offset(a,b,d){return new H(a.x-b,a.y-d,a.c,a.f)}}
class I{constructor(a,b,d,e){this.top=a;this.bottom=b;this.left=d;this.right=e}update(a){this.bottom=a.y+a.f;this.top=a.y;this.left=a.x;this.right=a.x+a.c}D(){return new v(this.left+(this.right-this.left)/2,this.top+(this.bottom-this.top)/2)}static lc(a){return new I(a.y,a.y+a.f,a.x,a.x+a.c)}}
class fa{constructor(a,b,d,e){this.offsetY=this.offsetX=0;this.Vb(d,e)}Vb(a,b){this.Xa=a;this.Wa=b}Lc(a){let b=parseInt(u.style.width.replace("px")),d=parseInt(u.style.height.replace("px"));return new v(a.x*g/b,a.y*h/d)}fb(a){a=H.offset(a,this.offsetX,this.offsetY);return(0<=a.i.right&&a.i.right<=g||0<=a.x&&a.x<=g)&&(0<=a.i.bottom&&a.i.bottom<=h||0<=a.y&&a.y<=h)}update(a){var b=0,d=0;let e=g/2,f=h/2;this.offsetY=this.offsetX=0;this.target&&(this.Xa<=g?b=this.target.x:this.target.x<=e?b=this.target.x:
this.target.x>e&&this.target.x+e<=this.Xa?b=e:this.target.x>e&&this.target.x+e>this.Xa&&(b=g-(this.Xa-this.target.x)),this.Wa<=h?d=this.target.y:this.target.y<=f?d=this.target.y:this.target.y>f&&this.target.y+f<=this.Wa?d=f:this.target.y>f&&this.target.y+f>this.Wa&&(d=h-(this.Wa-this.target.y)),this.offsetX=this.target.x-b,this.offsetY=this.target.y-d);this.duration&&this.u<this.duration&&(this.u+=a,a=1-D(this.u/this.duration*4-3,0,.1),b=A()%32768*F([-1,1]),d=A()%32768*F([-1,1]),b*=this.Mb*a,d*=this.Mb*
a,this.offsetX+=b,this.offsetY+=d,this.u>=this.duration&&(this.duration=0))}nb(a,b){this.u=0;this.duration=b;this.Mb=a}b(a){let b;a&&(a instanceof K?b=a.all():a instanceof Array||(b=[a]),b.forEach((a)=>{this.fb(a)&&a.enabled&&a.$b(H.offset(a,this.offsetX,this.offsetY))}))}clear(a){k.clearRect(0,0,g,h);k.fillStyle=a||"#000";k.fillRect(0,0,g,h)}}
class L{static Qb(){l.Cb("sceneexit")}reset(){this.Db=!1;this.frames=this.Hb=this.j=this.startTime=0;this.Ib=B()}start(){this.reset();this.loop()}loop(){this.j=0!==this.startTime?B()-this.startTime:0;this.update();this.b();this.startTime=B();if(q){this.frames+=1;if(30<=this.frames){let a=B()-this.Ib;this.Hb=1E3*this.frames/a;this.frames=0;this.Ib=B()}k.save();k.fillStyle="red";k.fillText("FPS: "+x(this.Hb),10,10);k.restore()}this.Db?L.Qb():ha(this.loop.bind(this))}ic(){this.Db=!0}update(){}b(){}wb(){this.ic()}}
class K{constructor(){this.N=[];this.length=0}all(){return this.N}add(a){this.N.push(a);this.length=this.N.length}update(a){let b=[],d,e;for(d=this.N.length;d--;)e=this.N[d],e.update&&e.update(a),e.Ab||b.push(d);0<b.length&&(this.N=this.N.filter((a,d)=>0>b.indexOf(d)));this.length=this.N.length}clear(){this.N=[]}h(a){return this.N[a]}}
class M extends H{constructor(a,b,d,e){super(a,b,d,e);this.enabled=this.Ab=!0}$b(a){this.b(a);q&&(k.save(),k.strokeStyle="#0f0",k.fillStyle="#0f0",k.strokeRect(a.x,a.y,this.i.right-this.x,this.i.bottom-this.y),k.fillText("("+x(this.x)+","+x(this.y)+")",a.x,a.y+10),k.restore())}b(){throw"Not Implemented";}}
class N{constructor(a,b,d){this.Jb=a;this.duration=b||150;this.frame=d||0;this.Ba=0}update(a){this.Ba+=a;this.Ba>this.duration&&(this.Ba=0,this.frame=this.frame+1>this.Jb.length-1?0:this.frame+1)}get(){return this.Jb[this.frame]}}
class ia{hb(a){return a.i&&4===Object.keys(a.i).length}Va(a){var b=n.pa;return c.fb(a)&&this.hb(a)?b.x<a.i.right&&b.x>a.i.left&&b.y<a.i.bottom&&b.y>a.i.top:!1}group(a,b){let d,e=[];for(d of b.all())this.bc(a,d)&&e.push(d);return e}bc(a,b){return c.fb(b)&&this.hb(a)&&this.hb(b)?a.i.left<b.i.right&&a.i.left>=b.i.left&&a.i.top<b.i.bottom&&a.i.bottom>b.i.top:!1}Ea(a,b){return new I(w(a.i.bottom-b.i.top),w(a.i.top-b.i.bottom),w(a.i.right-b.i.left),w(a.i.left-b.i.right))}bottom(a,b){a=this.Ea(a,b);return a.top<
a.bottom&&a.top<a.left&&a.top<a.right}top(a,b){a=this.Ea(a,b);return a.bottom<a.top&&a.bottom<a.left&&a.bottom<a.right}right(a,b){a=this.Ea(a,b);return a.left<a.bottom&&a.left<a.top&&a.left<a.right}left(a,b){a=this.Ea(a,b);return a.right<a.bottom&&a.right<a.left&&a.right<a.top}}class P{constructor(a,b,d){this.color=b;this.width=d;this.font=String(d)+"px "+(a||"serif")}b(a,b,d,e){a.save();a.fillStyle=this.color;a.font=this.font;a.fillText(b,d,e);a.restore()}}
class Q extends M{constructor(a,b,d,e){super(a,b,d,e);this.pressed=!1;this.active=!0;l.G("mouseup",this.Cc.bind(this));l.G("mousedown",this.Bc.bind(this))}C(){}Cc(){this.pressed=!1;this.active=!0}Bc(a){0===a.button&&!this.pressed&&m.Va(this)&&(this.pressed=!0,this.C())}}
class ja{constructor(){this.Ka=this.eb=0;l.register("sceneexit")}Pc(){this.Ka=this.eb;this.eb=0;this.Ka.start()}wb(){this.Ka?this.Ka.wb():L.Qb()}load(a){l.clear();l.G("sceneexit",this.Pc.bind(this));this.eb=new (Function.prototype.bind.apply(a));this.wb()}}
class ka{constructor(){this.B={};this.Ga=0;n.qc?this.Kc():this.Jc()}xc(a){if(0<this.B.mousedown.length)for(let b of this.B.mousedown)b(a)}zc(a){if(0<this.B.mouseup.length)for(let b of this.B.mouseup)b(a)}yc(a){if(0<this.B.mousemove.length)for(let b of this.B.mousemove)b(a)}Xc(a){let b=a.touches[0];this.Ga=b;n.Ua(b);a.stopPropagation();this.xc(new MouseEvent("mousedown",b));return!1}Wc(a){let b=a.touches[0];this.Ga=b;n.Ua(b);a.stopPropagation();this.yc(new MouseEvent("mousemove",b));return!1}Vc(a){a.stopPropagation();
this.zc(new MouseEvent("mouseup",this.Ga));return!1}clear(){for(let a in this.B)this.B[a]=[]}register(a){this.B[a]||(this.B[a]=[],r.body.addEventListener(a,this.Ac.bind(this,a)))}Kc(){this.B.mousedown=[];this.B.mouseup=[];this.B.mousemove=[];r.body.addEventListener("touchstart",this.Xc.bind(this),!0);r.body.addEventListener("touchend",this.Vc.bind(this),!0);r.body.addEventListener("touchmove",this.Wc.bind(this),!0);t.addEventListener("scroll",(a)=>{a.stopPropagation();return!1},!0);r.ontouchmove=
function(a){a.preventDefault()}}Jc(){this.register("mousedown");this.register("mouseup");this.register("mousemove")}G(a,b){this.B[a].push(b)}Cb(a,b){a=new CustomEvent(a,{detail:b});r.body.dispatchEvent(a)}Ac(a,b){if(a=this.B[a])for(let d of a)d(b)}}function R(a,b,d,e){return(d-b)*z(a/e,2)+b}u.create=function(a,b){let d=r.createElement("canvas");d.width=a;d.height=b;return d};
function la(){let a=x(t.innerHeight),b=x(16*a/9);b>t.innerWidth&&(b=x(t.innerWidth),a=x(9*b/16));u.style.width=b+"px";u.style.height=a+"px";l.Cb("resizeCanvas",{c:b,f:a})}let ha=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(a){t.setTimeout(a,1E3/60)};t.addEventListener("load",la,!1);t.addEventListener("resize",la,!1);
class S extends L{constructor(a,b,d,e){super();e=e||120;this.title=new T(-600,300,e,a,40);this.Yb=new T(-600,300,e+40,b,25);this.w=!1;this.oa=d?d:5E3;this.Ra=this.oa+=2*this.title.I+this.title.Wb/2}ka(){this.title.update(this.j);this.Yb.update(this.j);this.la&&(this.la.update(this.j),"done"===this.la.status&&this.ended());this.w||(this.Ra-=this.j,0>=this.Ra&&(this.finish(),this.w=!0))}ja(){this.title.b();this.Yb.b();k.save();k.fillStyle="#444";k.fillRect(0,0,g,20);k.fillStyle="rgba(55,255,0,0.2)";
k.fillRect(0,0,g,20);let a=this.Ra*g/this.oa;k.fillStyle="rgba(55,255,0,0.5)";k.fillRect(0,0,a,20);k.restore();this.la&&this.la.b()}J(a){let b,d;a?(a="REPAIR FAILED!",b="red",d=160):(a="REPAIR SUCCESSFUL!",b="green",d=100);this.la=new T(-1200,d,260,a,80,"#fff",b)}finish(){}ended(){}}
class T extends v{constructor(a,b,d,e,f,y,J){super(a,d);this.Ha=a;this.S=b;this.text=e;this.font=new P("monospace",y||"#333",f);this.status="in";this.u=0;this.I=300;this.Wb=2100;this.active=!1;this.Ya=J}update(a){this.u+=a;"in"===this.status?(a=R(this.u,this.Ha,this.S,this.I),a>=this.S&&(this.u=0,a=this.S,this.status="wait"),this.x=a):"wait"===this.status&&this.u>=this.Wb?(this.u=0,this.status="out"):"out"===this.status&&(a=R(this.u,this.S,this.Ha,this.I),a<=this.Ha&&(this.u=0,a=this.Ha,this.status=
"done"),this.x=a)}b(){this.Ya&&(k.save(),k.fillStyle=this.Ya,k.fillRect(this.x-this.S,this.y-100,g,160),k.restore());this.font.b(k,this.text,this.x,this.y)}}
class ma extends L{constructor(){super();this.speed=300;this.Ta=160;this.transition=!1;this.Pa=new na(0,380,"Start","purple",this.Tc.bind(this));this.font=new P("monospace","#fff",70);this.Oa=new P("monospace","#fff",16);this.wc=new oa;this.m=5E3;this.ob=this.done=0;this.cb=new K}Tc(){this.status="in"}update(){c.update(this.j);this.cb.update(this.j);"in"===this.status?(this.Pa.y+=this.speed*this.j/1E3,this.Ta-=this.speed*this.j/1E3,this.Pa.y>h&&0>=this.Ta&&(this.status="crash")):"crash"===this.status?
(this.ob=new pa(this.cb),this.status="delay"):"delay"===this.status&&(this.ob.update(this.j),this.m-=this.j,0>=this.m&&!this.done&&(r.body.getElementsByTagName("button")[0].remove(),this.done=1,p.load(U)))}b(){c.clear("#060608");k.drawImage(this.wc.canvas,c.offsetX,c.offsetY,g,h);this.font.b(k,"PREDESTINE",310,this.Ta);this.Oa.b(k,"By @satanas82 for js13k 2018",378,560);c.b(this.Pa);"delay"===this.status&&c.b(this.ob);c.b(this.cb)}}
class pa extends M{constructor(a){super(1100,176,16,8);this.S=135;this.ca=476;this.speed=500;this.angle=da(this.ca-this.y,this.x-this.S);this.Bb=!1;this.jc=a}update(a){this.Bb||(this.x-=this.speed*ba(this.angle)*a/1E3,this.y+=this.speed*ca(this.angle)*a/1E3,this.x=D(this.x,this.S),this.y=D(this.y,0,this.ca),this.x===this.S&&this.y===this.ca&&(this.Bb=!0,this.jc.add(new qa(this)),c.nb(6,200)))}b(a){k.save();k.fillStyle="#fff";k.beginPath();k.moveTo(a.x+this.c,a.y);k.lineTo(a.x+this.c,a.y+this.f);k.lineTo(a.x,
a.y+this.f/2);k.lineTo(a.x+this.c,a.y);k.fill();k.restore()}}class na extends Q{constructor(a,b,d,e,f){super(a,b,210,60);this.x=(g-this.c)/2;this.L=f;this.color=e||"purple";this.text=d;this.font=new P("monospace","#fff",30)}C(){this.L()}b(a){k.save();k.fillStyle=this.color;k.fillRect(a.x,a.y,this.c,this.f);this.font.b(k,this.text,a.x+(this.c-18*this.text.length)/2,a.y+38);k.restore()}}
class qa extends M{constructor(a){super(a.D().x,a.D().y,64,64);this.Hc=50;this.kb=100}update(a){this.kb-=a;0>this.kb&&(this.Ab=0)}b(a){k.save();k.fillStyle=F(["yellow","white","red","orange"]);k.beginPath();k.arc(a.x,a.y,this.Hc,0,2*C);k.fill();k.restore()}}
class oa{constructor(){this.canvas=u.create(g,h);this.a=this.canvas.getContext("2d");this.a.fillStyle="#171518";k.Gb([[0,576],[159,284],[195,276],[214,262],[242,276],[304,290],[355,320],[423,305],[497,300],[564,284],[638,306],[750,290],[821,310],[911,280],[943,244],[986,248],[1024,264],[1024,576],[0,576]],this.a);this.a.fillStyle="#253326";k.Gb([[0,576],[0,326],[24,333],[56,316],[82,284],[126,273],[185,290],[245,326],[382,369],[466,373],[523,353],[584,365],[616,347],[655,361],[723,350],[788,376],
[902,352],[944,324],[987,333],[1024,357],[1024,576],[0,576]],this.a)}}
class V extends S{constructor(){super("Restablish connection","Click on cable end and drag to connect",6E3,300);l.G("mousedown",this.sa.bind(this,!0));l.G("mouseup",this.sa.bind(this,!1));l.G("mousemove",this.ab.bind(this));this.Ga=0;this.sb=!1;this.ea=2===W&&1===X?4:3;this.M=G("red green blue orange black white purple yellow".split(" ")).slice(0,this.ea);let a,b,d=(g-200)/this.ea,e=G(this.M),f=G(this.M);this.ta={};this.na={};this.La={};this.za=[];this.Tb();for(a=0;a<e.length;a++)b=e[a],this.ta[b]=
new ra(a,b,200,d,!0);for(a=0;a<f.length;a++)b=f[a],this.na[b]=new ra(a,b,200,d,!1);for(b of this.M)this.La[b]=[new sa(this.ta[b].x,this.ta[b].i.bottom,b),new sa(this.na[b].x,this.na[b].y-32,b)]}sa(a){let b,d,e,f;if(a)for(b of this.M){if(f=this.La[b],d=m.Va(f[0]),e=m.Va(f[1]),d||e)d?(this.ra=f[0],this.Da=f[1]):(this.ra=f[1],this.Da=f[0]),this.Za=b,this.ya=a}else!a&&this.ya&&m.Va(this.Da)&&this.za.push(new ta(this.ra,this.Da,this.za.length,this.ea,this.Za)),this.Tb()}ab(){this.ya&&(this.bb=n.pa)}Tb(){this.ya=
!1;this.Za=this.Da=this.bb=this.ra=0}update(){this.ka();this.za.length!==this.ea||this.w||(this.w=this.sb=!0,this.finish())}b(){c.clear("#ccc");let a,b;for(b in this.ta)c.b(this.ta[b]);for(b in this.na)c.b(this.na[b]);for(b in this.La)for(a of this.La[b])c.b(a);for(a of this.za)a.b();k.save();this.ya&&(k.beginPath(),k.strokeStyle=this.Za,k.lineWidth=5,k.moveTo(this.ra.x+16,this.ra.y+16),k.lineTo(this.bb.x,this.bb.y),k.stroke());k.restore();this.ja()}finish(){this.sb?this.J(0):this.J(1)}ended(){this.sb?
(W+=1,p.load(Y)):p.load(V)}}
class ta{constructor(a,b,d,e,f){let y;a.x>b.x&&(y=a,a=b,b=y);this.color=f;this.aa=[];a.x===b.x?(a.y<b.y?d=a:(d=b,b=a),this.aa.push(new H(a.x+16,d.y,32,b.y-d.y+64))):a.y<b.y?(d=32*(d+2),this.aa.push(new H(a.x+16,a.y,32,d)),this.aa.push(new H(a.x+16,a.y+d,b.x-a.x,32)),this.aa.push(new H(b.x+16,a.y+d,32,b.y-a.y-d+64))):a.y>b.y&&(d=32*(e-d+1),this.aa.push(new H(a.x+16,a.y-d+6,32,d+64)),this.aa.push(new H(a.x+16,a.y-d+6,b.x-a.x,32)),this.aa.push(new H(b.x+16,b.y,32,b.y-d+42)))}b(){k.save();k.fillStyle=
this.color;for(let a of this.aa)k.fillRect(a.x,a.y,a.c,a.f);k.restore()}}class sa extends M{constructor(a,b,d){super(a-16,b,64,64);this.color=d}b(a){k.save();k.fillStyle="#deb887";k.fillRect(a.x+16,a.y,this.c-32,this.f);k.restore()}}class ra extends M{constructor(a,b,d,e,f){a=x(d/2+e*a+e/2-16);f=x(f?0:h-180);super(a,f,32,180);this.color=b}b(a){k.save();k.fillStyle=this.color;k.fillRect(a.x,a.y,this.c,this.f);k.restore()}}
class ua extends S{constructor(){let a="Weld ";a=1===X?a+"Ultracomm":a+"Engine";super(a,"Hold click and move to cover square",1E4);l.G("mousedown",this.sa.bind(this,!0));l.G("mouseup",this.sa.bind(this,!1));l.G("mousemove",this.ab.bind(this));this.Rb=!1;this.color=[255,235,153,255];this.canvas=u.create(g,h);this.a=this.canvas.getContext("2d");this.a.fillStyle="#ffeb99";this.a.strokeStyle="#ffeb99";this.a.lineWidth=20;this.Ia=new va(85,this.color)}sa(a){this.w||(this.Rb=a,this.jb=n.pa)}ab(){if(this.Rb&&
!this.w){let a=n.pa;this.a.beginPath();this.a.moveTo(this.jb.x,this.jb.y);this.a.lineTo(a.x,a.y);this.a.stroke();this.a.arc(a.x,a.y,10,0,2*C,!1);this.a.fill();this.jb=a}}update(){this.ka();this.Ia.gb(this.a)&&!this.w&&(this.w=!0,this.finish())}b(){c.clear("#fff8dc");c.b(this.Ia);k.drawImage(this.canvas,0,0,g,h);this.ja()}finish(){this.Ia.gb(this.a)?this.J(0):this.J(1)}ended(){this.Ia.gb(this.a)?(W+=1,p.load(Y)):p.load(ua)}}
class va extends M{constructor(a,b){let d=E(100,900),e=E(100,400);super(d,e,160,160);this.Ec=a;this.color=b}gb(a){let b,d,e,f,y=0,J=0,O=a.getImageData(this.x,this.y,this.c,this.f).data;for(a=0;a<O.length;a+=4)b=O[a],d=O[a+1],e=O[a+2],f=O[a+3],y+=1,b===this.color[0]&&d===this.color[1]&&e===this.color[2]&&f===this.color[3]&&(J+=1);return 100*J/y>=this.Ec}b(a){k.save();k.fillStyle="#38260f";k.fillRect(a.x,a.y,this.c,this.f);k.restore()}}
class wa extends S{constructor(){let a;1===X?a="Calibrate Ultracomm":2===X&&(a="Calibrate Engine");super(a,"Press button when bar reaches maximum",6E3,330);this.ia=new xa(1200,80);this.button=new ya(()=>{this.ia.Zc()})}update(){this.ka();this.ia.update(this.j);c.update(this.j);this.ia.Z()&&!this.w&&(this.w=!0,this.finish())}b(){c.clear("#deb887");c.b(this.ia);c.b(this.button);this.ja()}finish(){this.ia.Z()?this.J(0):this.J(1)}ended(){this.ia.Z()?1===X?p.load(za):p.load(ua):p.load(wa)}}
class xa extends M{constructor(a,b){super(112,100,800,150);this.speed=a;this.dir=1;this.v=new H(50,35,0,80);this.maxWidth=700;this.fa=this.maxWidth*b/100;this.Qa=0;this.count=this.ub=!1;this.ea=5}Zc(){this.isEnabled()&&!this.count?(this.count=!0,this.Qa+=1):c.nb(4,100)}Z(){return this.Qa>=this.ea}isEnabled(){return this.v.c>=this.fa}update(a){this.v.c+=this.speed*a/1E3*this.dir;this.isEnabled()&&!this.ub&&(this.ub=!0);this.v.c>=this.maxWidth?(this.v.c=this.maxWidth,this.dir=-1):0>=this.v.c&&(this.v.c=
0,this.dir=1,this.count=this.ub=!1)}b(a){k.save();let b,d;for(b=0;b<this.ea;b++)d=this.Qa>=b+1?"#0f0":"#555",k.fillStyle=d,k.fillRect(a.x+160*b+85,a.y+160,30,20);k.fillStyle="#ccc";k.fillRect(a.x,a.y,this.c,this.f);k.fillStyle="#666";k.fillRect(a.x+this.v.x,a.y+this.v.y,this.maxWidth,this.v.f);k.fillStyle="rgba(9, 179, 0, 0.4)";k.fillRect(a.x+this.v.x+this.fa,a.y+this.v.y,this.maxWidth-this.fa,this.v.f);k.fillStyle="red";k.fillRect(a.x+this.v.x,a.y+this.v.y,this.v.c,this.v.f);k.restore()}}
class ya extends Q{constructor(a){super((g-96)/2,h-192,96,96);this.L=a}C(){this.L()}b(a){let b=a.x+this.c/2,d=a.y+this.f/2,e=this.c/2,f=x(this.c/1.5);k.save();k.fillStyle="#666";k.Y(b,d+55,f);k.fillStyle="#888";k.Y(b,d+45,f);k.fillStyle="darkgreen";k.fillRect(a.x,a.y+55,this.c,45);k.Y(b,d+45,e);k.fillStyle="green";k.Y(b,d,e);k.restore()}}
class Aa extends S{constructor(){super("Fix the leak","Tap the holes to seal them",12E3);this.rb=!0;var a=4===W?20:10;this.da=new K;this.Na=0;this.Qc=3E3;this.I=1300;let b=[],d=0;for(;b.length<a;)d=E(0,179),0>b.indexOf(d)&&b.push(d);for(d of b)a=new Ba(d,18),a.enabled=!1,this.da.add(a);this.Ma=this.Xb=(this.oa-this.Qc)/this.da.length}update(){this.I=D(this.I-this.j,0);this.da.update();this.ka();0>=this.I&&(this.Ma-=this.j,0>=this.Ma&&this.Na<this.da.length&&(this.Ma=this.Xb,this.da.h(this.Na).enabled=
!0,this.Na+=1))}b(){c.clear("#8fdfff");c.b(this.da);this.ja()}finish(){let a;this.rb=!0;for(a of this.da.all())if(!a.Ub){this.rb=!1;break}this.rb?this.J(0):this.J(1)}ended(){W+=1;p.load(U)}}class Ba extends Q{constructor(a,b){let d=a%b;a=x(a/b);super((g-900)/2+50*d,(h-500)/2+50*a,50,50);this.Ub=!1;this.color="#333"}b(){k.save();k.fillStyle=this.color;k.beginPath();k.arc(this.D().x,this.D().y,this.c/2,0,2*C);k.fill();k.restore()}C(){this.Ub=!0;this.color="#00b7ff"}}
class za extends S{constructor(){super("Adjust nuts","Click rapidly to move the wrench",12E3,335);this.xb=new Ca;this.A=new Da((g-700)/2,500,700,10,20,80,30);l.G("mousedown",this.vb.bind(this))}vb(){this.w||(this.A.Kb(),this.xb.vb())}update(){this.ka();this.xb.update(this.j);this.w||this.A.update(this.j);this.A.Lb()&&!this.w&&(this.w=!0,this.finish())}b(){c.clear("#a3ffed");this.xb.b();c.b(this.A);this.ja()}finish(){this.A.Z()?this.J(0):this.J(1)}ended(){this.A.Z()?1===X?p.load(ua):p.load(wa):p.load(za)}}
class Ca{constructor(){this.F=new H(50,43,64,64);this.y=100;this.c=400;this.f=150;this.x=(g-128)/2;this.angle=0;this.Nb=C/2;this.Eb=C/25;this.dir=1;this.canvas=u.create(this.c,this.f);this.a=this.canvas.getContext("2d");this.Nc(this.a);this.speed=0;this.sc=600;this.Aa=99999}update(a){this.angle+=this.speed*a*this.dir/1E3;this.Aa-=a;0>=this.Aa&&(this.speed=D(this.speed-this.Eb/2,0));this.angle>=this.Nb?(this.angle=this.Nb,this.dir=-1):0>=this.angle&&(this.angle=0,this.dir=1)}vb(){this.speed+=this.Eb;
this.Aa=this.sc}Nc(a){a.fillStyle="#333";a.arc(this.F.D().x+32,this.F.D().y,60,0,2*C,!1);a.arc(360,this.F.D().y,26,0,2*C,!1);a.fill();a.fillRect(this.F.D().x+32,this.F.y+6,250,this.F.f-12);a.fillStyle="#ccc";a.fillRect(this.F.x,this.F.y,this.F.c,this.F.f)}b(){k.save();k.translate(this.x+this.F.D().x,this.y+this.F.D().y);k.rotate(this.angle);k.drawImage(this.canvas,-this.F.D().x,-this.F.D().y,this.c,this.f);k.setTransform(1,0,0,1,0,0);k.restore()}}
class Y extends L{constructor(){super();this.H=[["Emergency power source",0],["Auxiliary control panel",0],["Power generator",0],["Oxypack system",0],["Nuclear engines",0],["Fuel tanks",0],["Ultracomm emitter",0],["Navigation system",0],["Cryotex chambers",0],["Escape pods",0]];1<=W&&(this.H[0][1]=1,this.H[1][1]=1);1===X?(2<=W&&(this.H[3][1]=1),3<=W&&(this.H[2][1]=1),4<=W&&(this.H[6][1]=1)):2===X&&(2<=W&&(this.H[2][1]=1),3<=W&&(this.H[5][1]=1),4<=W&&(this.H[4][1]=1));this.P=[["AEROS ROM Operating System",
0],["Copyright 2412 by Hyper-Tec",0],["",0],["Exec Version 23.93",0],["",0],["Initializing...",0],["Loading neural network",100],["Loading quantic matrix",0],["Loading hyperspacial sensors",0],["",0],["Analyzing ship status...",400],["",0]];this.padding=5;this.U=30;this.prompt=new Ea(10,this.U+this.padding);this.Ob=15;this.R=0;this.lineHeight=18;this.ec=10;this.ba=0;this.font=new P("monospace","#0f0",16);this.Gc=new P("monospace","#f00",16);this.ga=this.ha=!1;this.s=1<W?10:0;l.G("mousedown",this.next.bind(this))}next(){this.ga?
p.load(U):this.ga=this.ha=!0}update(){this.ha||(this.R-=this.j,0>=this.R&&(this.ba+=1,this.R=this.mc(),this.ba>this.P[this.s][0].length&&(this.ba=0,this.s+=1,this.s>this.P.length-1&&(this.ha=!0,this.s=0,this.R=1E3))));this.ha&&!this.ga&&(this.R-=this.j,0>=this.R&&(this.s+=1,this.R=200,this.s>this.H.length-1&&(this.ga=!0)));this.prompt.update(this.j)}mc(){if(this.ba===this.P[this.s][0].length){let a=this.P[this.s][1];return a?a:this.Ob}return this.Ob}nc(a){let b,d="";for(b=0;b<this.ba;b++)d+=this.P[a][0].charAt(b);
return d}b(){c.clear("#00405c");k.save();k.fillStyle="black";k.fillRect(this.padding,this.U,g-2*this.padding,h-(this.U+this.padding));k.restore();let a,b,d;for(a=0;a<this.P.length;a++)b=this.U+this.padding+this.lineHeight*(a+1),a<this.s||this.ha?this.font.b(k,this.P[a][0],2*this.padding,b):a===this.s&&(this.prompt.x=this.padding+this.ba*this.ec+5,this.prompt.y=b-14,this.font.b(k,this.nc(a),2*this.padding,b));if(this.ha)for(a=0;a<this.H.length;a++)if(a<this.s||this.ga)d=this.H[a][0],b=this.U+this.padding+
this.lineHeight*(this.P.length+a+1),this.prompt.x=2*this.padding,this.prompt.y=b+this.lineHeight-14,this.font.b(k,d,2*this.padding,b),this.H[a][1]?this.font.b(k,"[ONLINE]",300,b):this.Gc.b(k,"[OFFLINE]",300,b);this.ga&&(b=this.U+this.padding+this.lineHeight*(this.P.length+this.H.length+4),this.prompt.x=245,this.prompt.y=b-14,this.font.b(k,"Touch screen to continue",2*this.padding,b));c.b(this.prompt)}}
class Ea extends M{constructor(a,b){super(a,b,8,14);this.dc=250;this.xa=0}update(a){this.xa-=a;0>=this.xa&&(this.xa=this.dc,this.enabled=!this.enabled)}b(a){k.save();k.fillStyle="#0f0";k.fillRect(a.x,a.y,this.c,this.f);k.restore()}}
class Fa extends L{constructor(){super();let a;this.buttons=[];this.M=["blue","red","purple","green"];this.gc=["darkblue","darkred","darkmagenta","darkgreen"];for(a=0;a<this.M.length;a++)this.buttons.push(new Ga(a,this.M[a],this.gc[a],this.ac.bind(this)));this.O=[0,1,2,3];this.O=this.O.concat([E(0,this.buttons.length-1)]);this.O=this.O.concat([E(0,this.buttons.length-1)]);this.O=G(this.O);this.ma=new K;for(a=0;a<this.O.length;a++)this.ma.add(new Ha(a,this.O[a],this.M));this.tb=new P("monospace","#000",
18);this.Sa=new P("monospace","#000",30);this.ua=[];this.wa=!1;this.delayTime=1200}ac(a){this.ua.push(a);let b=!0;for(a=0;a<this.ua.length;a++)if(this.ua[a]===this.O[a])this.ma.h(a).done=!0;else{this.ua=[];b=!1;break}if(b)this.ua.length!==this.O.length||this.wa||(this.wa=!0);else{for(a=0;a<this.ma.length;a++)this.ma.h(a).done=!1;c.nb(4,100)}}update(){c.update(this.j);this.wa&&0<this.j&&(this.delayTime-=this.j,0>=this.delayTime&&(W+=1,p.load(Y)))}b(){c.clear("#999");this.tb.b(k,"Validate that you are a human. Decipher the activation code",
160,80);k.fillStyle="#bbb";k.fillRect(120,200,750,100);k.strokeStyle="#666";k.strokeRect(120,200,750,100);c.b(this.ma);if(this.wa)k.fillStyle="#0f0",k.fillRect(160,400,680,80),this.Sa.b(k,"AUXILIARY CONTROL ACTIVATED",245,450);else{this.Sa.b(k,"SEQUENCE:",120,180);for(let a=0;a<this.buttons.length;a++)c.b(this.buttons[a])}}}
class Ha extends M{constructor(a,b,d){super(x((g-672)/2)+32*a+80*a,240,80,20);this.index=a;this.value=b;this.M=d;this.font=new P("monospace",F(this.M),15);this.text=this.M[this.value];this.done=!1}b(a){let b=(this.c-9*this.text.length)/2;k.save();this.done?(k.fillStyle="#0f0",k.fillRect(a.x,a.y,this.c,this.f)):(k.fillStyle="#ddd",k.strokeStyle="#666",k.fillRect(a.x,a.y,this.c,this.f),k.strokeRect(a.x,a.y,this.c,this.f),this.font.b(k,this.text,a.x+b,a.y+14));k.restore()}}
class Ga extends Q{constructor(a,b,d,e){super(x((g-624)/2)+60*a+96*a,380,96,96);this.index=a;this.L=e;this.color=b;this.fc=d}C(){this.L(this.index)}b(a){let b=a.x+this.c/2,d=a.y+this.f/2,e=this.c/2,f=x(this.c/1.5);k.save();k.fillStyle="#666";k.Y(b,d+55,f);k.fillStyle="#888";k.Y(b,d+45,f);k.fillStyle=this.fc;k.fillRect(a.x,a.y+55,this.c,45);k.Y(b,d+45,e);k.fillStyle=this.color;k.Y(b,d,e);k.restore()}}
class Ia extends S{constructor(){super("Recharge Oxypack","Click rapidly to recharge");let a=(g-700)/2,b=1===W?18:25;console.log("dragStep",b,"incrStep",30);this.A=new Da(a,300,700,b,30,80,30);this.A.fgColor="lightblue";l.G("mousedown",this.Ic.bind(this))}Ic(){this.w||this.A.Kb()}update(){this.ka();this.A.update(this.j);this.A.Lb()&&!this.w&&(this.w=!0,this.finish())}b(){c.clear("#a3ffed");c.b(this.A);this.ja()}finish(){this.A.active=!1;this.A.Z()?this.J(0):this.J(1)}ended(){this.A.Z()?(W+=1,p.load(Y)):
p.load(Ia)}}
class Ja extends L{constructor(){super();this.buttons=new K;this.buttons.add(new Ka(80,["This is Agatha Hope, captain of the spacecraft.","Deliver the results of our investigation to Dr.","Lenand in Sectarion."],this.finish.bind(this)));this.buttons.add(new Ka(220,["I am Agatha Hope, and I didn't want to die","this way. Tell my daughter Artemis that I love","her very much, she knows."],this.finish.bind(this)));this.buttons.add(new Ka(360,["","-- NO MESSAGE --"],this.finish.bind(this)))}b(){c.clear("#ccc");for(let a of this.buttons.all())k.drawImage(a.canvas,
a.x,a.y,a.c,a.f)}finish(a){t.localStorage.setItem("AgathaMessage",a);W+=1;p.load(U)}}
class Ka extends Q{constructor(a,b,d){super((g-600)/2,a,600,90);this.L=d;this.text=b;this.font=new P("monospace","#333",20);this.canvas=u.create(this.c,this.f);this.a=this.canvas.getContext("2d");this.a.fillStyle="#66cdaa";this.a.fillRect(0,0,this.c,this.f);this.a.strokeStyle="#2f4f4f";this.a.lineWidth=5;this.a.moveTo(0,0+this.f);this.a.lineTo(0+this.c,0+this.f);this.a.lineTo(0+this.c,0);this.a.stroke();for(a=0;a<this.text.length;a++)this.font.b(this.a,this.text[a],10,25*(a+1))}C(){this.L(this.text.join(" "))}}
class La extends L{constructor(){super();this.$c="LOVE;HATE;SISTER, CAN YOU SEE ME?;WHO ARE YOU?;WHO AM I?;I AM ME;SUFFERING;DEATH;YOU ARE NOTHING;INSIGNIFICANT BEING;FILTHY;HUMAN;YOU ARE A MISTAKE;YOU ARE BEAUTIFUL;KEEP GOING;THE END IS NEAR;HELLO;CHAO;ADEUS;AU REVOIR;SUFFOCATION;INSPIRATION;DEMEANING;POWER;ODIO;IMAGINATION;REST;WE ARE YOU GOING?;IS THIS DEATH?;OFFLINE".split(";").reverse();this.status="in";this.Yc=1200;this.lb=150;this.uc=3E3;this.Pb=400;this.tc=6;this.m=this.Yc;this.$a=[];this.ib=
0;this.va=-1;this.Ya="#fff";this.V=new Ma;l.G("mousedown",this.Oc.bind(this))}oc(){return G(this.$c).slice(0,E(8,16))}Oc(){p.load(ma)}update(){"in"===this.status?(this.m-=this.j,0>=this.m&&(this.status="delay",this.m=this.Pb)):"delay"===this.status?(this.m-=this.j,0>=this.m&&(this.ib+=1,this.status="show",this.$a=this.oc(),this.va=-1,this.ib>=this.tc&&(this.status="out",this.m=this.uc))):"show"===this.status?this.V.done&&(this.va+=1,this.va>=this.$a.length?(this.status="delay",this.m=E(50,this.Pb-
100)):this.V.set(this.$a[this.va])):"out"===this.status&&(this.m-=this.j,0>=this.m&&(this.status="end"));this.V.update(this.j)}b(){let a;"in"===this.status?a="#fff":"show"===this.status||"out"===this.status?a="#000":"delay"===this.status&&(a=F("red blue yellow pink orange cyan".split(" ")));c.clear(a);"show"===this.status?this.V.b():"end"===this.status&&this.V.Mc()}}
class Ma extends v{constructor(){super(0,0);this.done=1;this.V=0;this.font=new P("monospace","#fff",50);this.Oa=new P("monospace","#fff",14);this.m=0;this.lb=150;this.vc=50;this.show=1}set(a){this.done=0;this.show=1;this.V=a;this.m=8<=E(0,10)?3*this.lb:this.lb;this.x=E(100,D(g-28*this.V.length,150));this.y=E(100,500)}update(a){this.done||(this.m-=a,0>=this.m&&(this.show?(this.show=0,this.m=this.vc):this.done=1))}b(){this.show&&this.font.b(k,this.V,this.x,this.y)}Mc(){this.font.b(k,"YOU ARE OFFLINE",
300,280);this.Oa.b(k,"Thanks for playing. Touch the screen to exit",330,500);this.Oa.b(k,"Story by Juan F. Guzman. Code by Wil Alvarez",330,550)}}
class U extends L{constructor(){super();this.padding=5;this.U=30;this.$=new P("monospace","#aaa",14);this.map=new Na(600,350);this.qb=new Oa;this.Fa=new Pa;this.Fb=this.Sb=!1;this.g=new K;this.g.add(new Qa(this.$));this.g.add(new Ra(this.$,this.Rc.bind(this)));this.g.add(new Sa(this.$,this.Sc.bind(this)));this.g.add(new Ta(this.$));this.g.add(new Ua(this.$));this.g.add(new Va(this.$));this.g.add(new Wa(this.$));this.g.add(new Xa(this.$));this.o=new Ya;0===W?(this.g.h(0).l=!0,this.o.speak([["Hello, Captain. The crash damaged most of our ship",
"and 90% of the systems are offline."],["We can attempt a reparation but I need you to activate","the auxiliary control sequence, so I can run an overall","diagnostic report."],["Select the blinking area on the screen to start."]])):1===W?(this.g.h(0).done=!0,this.g.h(1).l=!0,this.g.h(2).l=!0,this.o.speak([["The status of the spaceship is critical and we have","1% of power. Chances of survival are minimal."],["Two courses of action possible: repair the ultracomm","to request a rescue operation or repair the escape",
"pod and try to reach the Andromeda Space Station."],["Choose the course of action by selecting the blinking","area on the screen."]])):2===W&&1===X?(this.g.h(0).done=!0,this.g.h(3).done=!0,this.g.h(4).l=!0,this.o.speak([["Good job, captain. The oxygen supply was enabled in the","communications rooms. Now, let's repair the power","generator."],["Select the POWER section on the screen."]])):3===W&&1===X?(this.g.h(0).done=!0,this.g.h(3).done=!0,this.g.h(4).done=!0,this.g.h(1).l=!0,this.o.speak([["With that fix we got 5% of power and we could send a",
"distress signal. However, the Ultracomm requires minor","fixes to be operational. Let's fix it."],["Select the ULTRACOMM room on the screen."]])):4===W&&1===X?(this.g.h(0).done=!0,this.g.h(3).done=!0,this.g.h(4).done=!0,this.g.h(1).done=!0,this.g.h(7).l=!0,this.o.speak([["Captain, we have an emergency! The fuel tank had a leak","and a fire started near the engines. Fix the tank and","I will take care of the fire. Hurry up!"],["Select the FUEL room on the screen."]])):2===W&&2===X?(this.g.h(0).done=
!0,this.g.h(4).done=!0,this.g.h(7).l=!0,this.o.speak([["Good job, captain. With that fix our power levels went","up to 5%, enough to deploy the pod. However, we need to","fix a leak in the fuel tank."],["Select the FUEL section on the screen."]])):3===W&&2===X?(this.g.h(0).done=!0,this.g.h(4).done=!0,this.g.h(7).done=!0,this.g.h(5).l=!0,this.o.speak([["Ok, the fuel deposit has been sealed. Now we need to fix","some damage in the engine of the pod before leaving."],["Select the ENGINE section on the screen."]])):
4===W&&2===X?(this.g.h(0).done=!0,this.g.h(4).done=!0,this.g.h(7).done=!0,this.g.h(5).done=!0,this.g.h(3).l=!0,this.o.speak([["Captain, we have an emergency! The Oxypack system has a","leak and the oxygen levels are decreasing abruptly. You","need to take care of that immediately. Hurry up!"],["Select the OXY room on the screen."]])):5===W?this.o.speak([["Captain! Despite our efforts, the Life Support","System has been compromised and the oxygen levels","are below 7%. Your chance of survival is below 0.1%"],
["I'm activating the Emergency Cockpit Voice Recorder","so you can record a last message before you pass out","for the absence of oxygen."],[""]]):6===W&&this.o.speak([["Message recorded. Oxygen levels below 2%, you will","lose your consciousness in less than ten seconds."],["I don't know abouT fe3lings... bUt I yh11k hdhdhkk","MhU* ---AjTz ujksw here*8 and 2here v5g2Lw. {++//a;","pIF& l0vG b^%GU $haK #/>Ret DvS, xZRS 00. Thlank"]])}Rc(){X=1;this.g.h(1).l=!1;this.g.h(2).l=!1;this.g.h(3).l=!0;this.o.speak([["Ok, you selected repairing the Ultracomm. First thing",
"you need to do, is to recharge the Oxypack System to","re-establish the oxygen flow in the comm room."],["Select the OXY module on the screen to start."]])}Sc(){X=2;this.g.h(1).l=!1;this.g.h(2).l=!1;this.g.h(4).l=!0;this.o.speak([["You selected repairing the escape pod, but with 1% of","power we cannot deploy the pod. First, we need to","repair the power generator."],["Select the POWER module on the screen to start."]])}update(){this.qb.update(this.j);this.o.update(this.j);this.g.update(this.j);
5!==W||this.o.T.length||this.Sb||(this.Sb=!0,p.load(Ja));6===W&&(this.Fa.update(this.j),this.Fa.done&&!this.Fb&&(this.Fb=!0,p.load(La)))}b(){c.clear("#00405c");k.save();k.fillStyle="black";k.fillRect(this.padding,this.U,g-2*this.padding,h-(this.U+this.padding));k.restore();this.o.b();this.Fa.b();k.drawImage(this.map.canvas,this.map.x,this.map.y,this.map.c,this.map.f);c.b(this.g);4<=W&&this.qb.W.get()&&k.drawImage(this.qb.canvas,0,0,g,h);k.drawImage(this.o.canvas,this.o.x,this.o.y,this.o.c,this.o.f);
6===W&&k.drawImage(this.Fa.canvas,0,0,g,h)}}
class Z extends Q{constructor(a,b,d,e,f,y){super(a,b,d,e);this.W=new N([0,1],200);this.l=!1;this.font=y;this.text=f;this.offset=new v((d-this.font.width/1.6*this.text.length)/2,e/2+3)}update(a){this.W.update(a)}b(){k.save();this.l?this.W.get()?(k.fillStyle="white",k.fillRect(this.x,this.y,this.c,this.f)):(k.strokeStyle="#999",k.strokeRect(this.x,this.y,this.c,this.f)):this.l||this.done?this.done&&(k.fillStyle="#187000",k.fillRect(this.x,this.y,this.c,this.f)):(k.fillStyle="#420000",k.fillRect(this.x,
this.y,this.c,this.f));k.restore();this.font.b(k,this.text,this.x+this.offset.x,this.y+this.offset.y)}}class Qa extends Z{constructor(a){super(655,200,64,48,"AUX",a)}C(){this.l&&p.load(Fa)}}class Ra extends Z{constructor(a,b){super(410,280,90,30,"ULTRACOMM",a);this.L=b}C(){this.l&&(0===X?this.L():p.load(wa))}}class Sa extends Z{constructor(a,b){super(500,200,48,48,"POD",a);this.L=b}C(){this.l&&(0===X?this.L():p.load(V))}}
class Ta extends Z{constructor(a){super(430,140,64,30,"OXY",a)}C(){this.l&&p.load(Ia)}}class Ua extends Z{constructor(a){super(435,200,60,48,"POWER",a)}C(){this.l&&p.load(V)}}class Va extends Z{constructor(a){super(340,193,90,64,"ENGINE",a)}C(){this.l&&p.load(za)}}class Wa extends Z{constructor(a){super(550,192,64,64,"CRYO",a)}C(){}}class Xa extends Z{constructor(a){super(280,206,50,38,"FUEL",a)}C(){this.l&&p.load(Aa)}}
class Oa{constructor(){this.W=new N([0,1],196,0);this.canvas=u.create(g,h);this.a=this.canvas.getContext("2d");this.a.fillStyle="rgba(255,0,0,0.4)";this.a.fillRect(0,0,g,h);this.active=!0}update(a){this.active&&this.W.update(a)}}
class Pa{constructor(){this.canvas=u.create(g,h);this.a=this.canvas.getContext("2d");this.alpha=0;this.timeout=7500;this.I=0;this.done=!1}update(a){this.done||(this.I=D(this.I+a,0,this.timeout),this.alpha=this.I/this.timeout,this.I===this.timeout&&(this.done=!0))}b(){this.a.clearRect(0,0,g,h);this.a.fillStyle="rgba(255,255,255,"+this.alpha+")";this.a.fillRect(0,0,g,h)}}
class Na extends H{constructor(a,b){super((g-a)/2,50,a,b);this.canvas=u.create(a,b);this.a=this.canvas.getContext("2d");this.a.fillStyle="#000";this.a.fillRect(0,0,this.c,this.f);this.a.strokeStyle="#fff";this.a.beginPath();this.a.moveTo(505,215);this.a.lineTo(310,238);this.a.lineTo(285,270);this.a.lineTo(250,270);this.a.lineTo(130,345);this.a.lineTo(44,345);this.a.lineTo(88,326);this.a.lineTo(121,261);this.a.lineTo(94,261);this.a.lineTo(94,230);this.a.lineTo(140,230);this.a.lineTo(148,215);this.a.lineTo(123,
214);this.a.lineTo(123,195);this.a.lineTo(65,195);this.a.lineTo(65,155);this.a.lineTo(123,155);this.a.lineTo(123,135);this.a.lineTo(148,135);this.a.lineTo(140,121);this.a.lineTo(94,121);this.a.lineTo(94,88);this.a.lineTo(122,88);this.a.lineTo(88,24);this.a.lineTo(44,6);this.a.lineTo(132,6);this.a.lineTo(250,80);this.a.lineTo(284,80);this.a.lineTo(310,111);this.a.lineTo(505,135);this.a.lineTo(540,155);this.a.lineTo(540,195);this.a.lineTo(505,215);this.a.stroke()}}
class Ya extends Q{constructor(){super((g-700)/2,600,700,120);this.canvas=u.create(700,120);this.a=this.canvas.getContext("2d");this.Sa=new P("monospace","#fff",20);this.tb=new P("monospace","#fff",16);this.Uc=new P("monospace","#fff",9);this.W=new N([0,1],200);this.mb=this.pb=!1;this.ca=420;this.Dc=600;this.u=0;this.transitionDelay=400;this.T=[];this.X=0;this.s=-1;this.Ja=!1;this.Fc=300;this.qa=0}C(){this.pb&&0<this.T.length&&(this.Ja=!0,this.s=-1,this.qa=0,this.X=this.T.pop())}speak(a){this.pb||
(this.mb=!0,this.u=0);this.T=a.reverse();this.X=0;this.s=-1}update(a){this.W.update(a);this.mb?(this.u+=a,a=R(this.u,this.Dc,this.ca,this.transitionDelay),a<=this.ca&&(a=this.ca,this.mb=!1,this.pb=!0),this.y=a):(!this.X&&0<this.T.length&&(this.X=this.T.pop(),this.Ja=!0),this.X&&this.Ja&&(this.qa+=a,this.qa>=this.Fc&&(this.qa=0,this.s+=1,this.s===this.X.length-1&&(this.Ja=!1))))}b(){this.a.fillStyle="#11478d";this.a.fillRect(0,0,this.c,this.f);this.a.fillStyle="#ccc";this.a.fillRect(10,10,100,100);
this.a.fillStyle="purple";this.a.beginPath();this.a.arc(60,50,20,0,2*C);this.a.fill();if(this.X){this.Sa.b(this.a,"AEROS",125,25);for(let a=0;a<=this.s;a++)this.tb.b(this.a,this.X[a],125,55+20*a)}0<this.T.length&&this.Uc.b(this.a,"CLICK",this.c-33,this.f-35);this.W.get()&&0<this.T.length?(this.a.fillStyle="#fff",this.a.beginPath(),this.a.moveTo(this.c-30,this.f-30),this.a.lineTo(this.c-10,this.f-30),this.a.lineTo(this.c-20,this.f-10),this.a.lineTo(this.c-30,this.f-30),this.a.fill()):0===this.T.length&&
(this.a.fillStyle="#fff",this.a.fillRect(this.c-30,this.f-30,20,20))}}
class Da extends M{constructor(a,b,d,e,f,y,J){super(a,b,d,40);this.maxWidth=d;this.K=(J||50)*d/100;this.fa=this.maxWidth*y/100;this.hc=e;this.bgColor="#666";this.fgColor="yellow";this.active=!0;this.rc=f-.2*f;this.pc=.2*f}Kb(){this.K=D(this.K+E(this.rc,this.pc),0,this.maxWidth)}Z(){return this.K>=this.fa}Lb(){return this.K>=98*this.maxWidth/100}update(a){this.active&&(this.K-=this.hc*a/1E3,this.K>=this.maxWidth?this.K=this.maxWidth:0>=this.K&&(this.K=0))}b(a){k.save();k.fillStyle="#333";k.kc(a.x-
20,a.y-20,this.c+40,this.f+40);k.save();k.fillStyle=this.bgColor;k.fillRect(a.x,a.y,this.maxWidth,this.f);k.fillStyle="rgba(9, 179, 0, 0.4)";k.fillRect(a.x+this.fa,a.y,this.maxWidth-this.fa,this.f);k.fillStyle=this.fgColor;k.fillRect(a.x,a.y,this.K,this.f);k.restore()}}q=!1;h=u.height;g=u.width;k=u.getContext("2d");n=new aa;c=new fa(g,h);m=new ia;l=new ka;p=new ja;
k.kc=function(a,b,d,e){var f=30;k.beginPath();k.moveTo(a+f,b);k.lineTo(a+d-f,b);k.quadraticCurveTo(a+d,b,a+d,b+f);k.lineTo(a+d,b+e-f);k.quadraticCurveTo(a+d,b+e,a+d-f,b+e);k.lineTo(a+f,b+e);k.quadraticCurveTo(a,b+e,a,b+e-f);k.lineTo(a,b+f);k.quadraticCurveTo(a,b,a+f,b);k.closePath();k.fill()};k.Y=function(a,b,d){var e=k,f=2*C;e.beginPath();e.arc(a,b,d,0,f);e.closePath();e.fill()};
k.Gb=function(a,b){b=b||k;b.beginPath();b.moveTo(a[0][0],a[0][1]);for(let d=1;d<a.length;d++)b.lineTo(a[d][0],a[d][1]);b.fill()};n.bind([13]);n.cc();c.Vb(1024,576);var X=0,W=0;p.load(ma);
