!function(){"use strict";function e(e,t){const n=e.audioContext||new AudioContext,a=e.sampleRate||n.sampleRate,s=e.channels||2,r=1.5*e.decay,o=Math.ceil(a*r),l=Math.ceil(a*e.fadeIn),i=Math.ceil(a*e.decay),c=Math.pow(.001,1/i),f=n.createBuffer(s,o,a);for(let e=0;e<s;++e){const t=f.getChannelData(e);for(let e=0;e<o;++e)t[e]=(Math.floor(9007199254740992*Math.random())/9007199254740991*2-1)*Math.pow(c,e);for(let e=0;e<l;++e)t[e]*=e/l}!function(e,t,n,a,s){if(!t)return void s(e);t=Math.min(t,.5*e.sampleRate),n=Math.min(n,.5*e.sampleRate);const r=function(e){const t=[];for(let n=0;n<e.numberOfChannels;++n)t[n]=e.getChannelData(n);return t}(e),o=new OfflineAudioContext(e.numberOfChannels,r[0].length,e.sampleRate),l=o.createBufferSource(),i=o.createBiquadFilter();i.type="lowpass",i.Q.value=1e-4,i.frequency.setValueAtTime(t,0),i.frequency.linearRampToValueAtTime(n,a),i.connect(o.destination),l.buffer=e,l.connect(i),l.start(),o.oncomplete=function(e){s(e.renderedBuffer)},o.startRendering()}(f,e.lpFreqStart,e.lpFreqEnd,e.decay,t)}"undefined"==typeof AudioContext&&(window.AudioContext=window.webkitAudioContext,window.OfflineAudioContext=window.webkitOfflineAudioContext);const t=120/118;let n,a,s;function r(){return n=new AudioContext,(a=n.createGain()).gain.value=.4,function(){const s=n.createConvolver(),r=n.createGain(),o=n.createGain();return r.gain.value=2/3,o.gain.value=1/3,a.connect(s),a.connect(r),s.connect(o),r.connect(n.destination),o.connect(n.destination),new Promise((function(a){e({audioContext:n,fadeIn:1e-5,decay:1.5*t,lpFreqStart:16e3,lpFreqEnd:1e3},(function(e){s.buffer=e,a()}))}))}()}function o(e,r,o){const l=function(e){return 440*Math.pow(2,(e-69)/12)}(e);r*=t,o*=t;const i=n.createOscillator();i.type="square",i.frequency.value=l,function(e,a){const r=n.createGain();return r.gain.setValueAtTime(.5,s+a),r.gain.exponentialRampToValueAtTime(1e-5,s+a+1.5*t),e.connect(r),r}(i,r).connect(a),i.start(s+r),i.stop(s+o)}function l(e){switch(e>51?(e-8)%44+8:e){case 0:o(57,e+0,e+.25),o(45,e+0,e+2),o(60,e+.25,e+.5),o(57,e+.5,e+.75),o(64,e+.75,e+1.25);break;case 1:o(60,e+.25,e+.75),o(60,e+.75,e+1);break;case 2:o(52,e+0,e+1),o(60,e+.25,e+.5),o(57,e+.5,e+.75),o(64,e+.75,e+1.25);break;case 3:o(52,e+0,e+.75),o(60,e+.25,e+.75),o(60,e+.75,e+1),o(52,e+.75,e+1);break;case 4:o(45,e+0,e+1.75),o(57,e+.25,e+.5),o(60,e+.5,e+.75),o(64,e+.75,e+1.25),o(57,e+.75,e+1.25);break;case 5:o(57,e+.25,e+.5),o(60,e+.5,e+1),o(52,e+.75,e+1);break;case 6:o(60,e+0,e+1),o(52,e+0,e+.5),o(52,e+.5,e+1.5);break;case 7:o(64,e+0,e+1),o(52,e+.5,e+.75),o(52,e+.75,e+1);break;case 8:o(57,e+0,e+.25),o(45,e+0,e+.75),o(57,e+.25,e+.5),o(57,e+.5,e+.75),o(60,e+.75,e+1.25),o(52,e+.75,e+1.75);break;case 9:o(69,e+.25,e+.5),o(67,e+.5,e+.75),o(69,e+.75,e+1),o(52,e+.75,e+1);break;case 10:o(69,e+0,e+.75),o(41,e+0,e+.25),o(48,e+.25,e+.5),o(55,e+.5,e+1.5),o(57,e+.75,e+1.75);break;case 11:o(55,e+.5,e+.75),o(67,e+.75,e+1),o(50,e+.75,e+1);break;case 12:o(67,e+0,e+.25),o(55,e+0,e+.75),o(67,e+.25,e+.5),o(67,e+.5,e+.75),o(66,e+.75,e+1.25),o(57,e+.75,e+1.75),o(54,e+.75,e+1.75);break;case 13:o(67,e+.25,e+.5),o(66,e+.5,e+.75),o(64,e+.75,e+1),o(47,e+.75,e+1);break;case 14:o(52,e+0,e+.25),o(47,e+0,e+2),o(54,e+.25,e+.5),o(56,e+.5,e+.75),o(59,e+.75,e+1.75);break;case 15:o(57,e+.75,e+1);break;case 16:o(57,e+0,e+.25),o(45,e+0,e+.75),o(57,e+.25,e+.5),o(57,e+.5,e+.75),o(60,e+.75,e+1.25),o(52,e+.75,e+1.25);break;case 17:o(69,e+.25,e+.5),o(57,e+.25,e+1),o(67,e+.5,e+.75),o(69,e+.75,e+1);break;case 18:o(69,e+0,e+.75),o(57,e+0,e+.25),o(53,e+0,e+.25),o(48,e+0,e+.25),o(48,e+.25,e+.5),o(55,e+.5,e+.75),o(65,e+.75,e+1.75),o(57,e+.75,e+1.25);break;case 19:o(57,e+.25,e+.5),o(60,e+.5,e+1),o(67,e+.75,e+1);break;case 20:o(67,e+0,e+.25),o(43,e+0,e+.5),o(59,e+.25,e+.5),o(67,e+.5,e+.75),o(50,e+.5,e+.75),o(66,e+.75,e+1.25),o(47,e+.75,e+1.75);break;case 21:o(67,e+.25,e+.5),o(66,e+.5,e+.75),o(64,e+.75,e+1),o(47,e+.75,e+1);break;case 22:o(52,e+0,e+.25),o(47,e+0,e+2),o(54,e+.25,e+.5),o(56,e+.5,e+.75),o(59,e+.75,e+1.75);break;case 23:o(67,e+.75,e+1);break;case 24:o(67,e+0,e+.25),o(59,e+0,e+.5),o(55,e+0,e+.5),o(62,e+.25,e+.5),o(67,e+.5,e+.75),o(59,e+.5,e+.75),o(67,e+.75,e+1.25),o(57,e+.75,e+1.25);break;case 25:o(67,e+.25,e+.5),o(50,e+.25,e+.5),o(67,e+.5,e+.75),o(43,e+.5,e+1),o(68,e+.75,e+1),o(64,e+.75,e+1);break;case 26:o(68,e+0,e+.25),o(64,e+0,e+.25),o(40,e+0,e+.5),o(64,e+.25,e+.5),o(62,e+.5,e+.75),o(47,e+.5,e+.75),o(62,e+.75,e+1.25),o(52,e+.75,e+1.5);break;case 27:o(60,e+.25,e+.75),o(52,e+.5,e+.75),o(57,e+.75,e+1),o(47,e+.75,e+1);break;case 28:o(60,e+0,e+.5),o(45,e+0,e+.5),o(72,e+.5,e+1),o(64,e+.5,e+1),o(57,e+.5,e+.75),o(48,e+.75,e+1);break;case 29:o(60,e+0,e+.25),o(57,e+0,e+.75),o(53,e+0,e+.75),o(65,e+.25,e+.5),o(67,e+.5,e+.75),o(72,e+.75,e+1),o(43,e+.75,e+1);break;case 30:o(72,e+0,e+.25),o(64,e+0,e+.25),o(60,e+0,e+.25),o(48,e+0,e+.5),o(36,e+0,e+.5),o(72,e+.25,e+.5),o(64,e+.25,e+.5),o(60,e+.25,e+.5),o(72,e+.5,e+.75),o(64,e+.5,e+.75),o(60,e+.5,e+.75),o(55,e+.5,e+.75),o(72,e+.75,e+1.25),o(64,e+.75,e+1.25),o(60,e+.75,e+1.25),o(50,e+.75,e+1.5);break;case 31:o(71,e+.25,e+1),o(62,e+.25,e+1),o(59,e+.25,e+1),o(57,e+.5,e+.75),o(50,e+.75,e+1);break;case 32:o(72,e+0,e+.25),o(64,e+0,e+.25),o(60,e+0,e+.25),o(57,e+0,e+.5),o(52,e+0,e+.5),o(45,e+0,e+.5),o(72,e+.25,e+.5),o(72,e+.5,e+.75),o(59,e+.5,e+1),o(72,e+.75,e+1.25);break;case 33:o(57,e+0,e+.5),o(53,e+0,e+.5),o(48,e+0,e+.5),o(71,e+.25,e+.5),o(69,e+.5,e+.75),o(48,e+.5,e+1),o(67,e+.75,e+1),o(64,e+.75,e+1),o(60,e+.75,e+1);break;case 34:o(67,e+0,e+.25),o(64,e+0,e+.25),o(60,e+0,e+.25),o(36,e+0,e+.5),o(69,e+.25,e+.5),o(71,e+.5,e+.75),o(43,e+.5,e+.75),o(72,e+.75,e+1.25),o(68,e+.75,e+1.25),o(64,e+.75,e+1.25),o(48,e+.75,e+1);break;case 35:o(40,e+0,e+.5),o(71,e+.25,e+1),o(56,e+.5,e+.75),o(52,e+.75,e+1);break;case 36:o(60,e+0,e+.5),o(45,e+0,e+.25),o(52,e+.25,e+.5),o(72,e+.5,e+1),o(64,e+.5,e+1),o(60,e+.5,e+1),o(57,e+.5,e+1);break;case 37:o(60,e+0,e+.25),o(57,e+0,e+.5),o(53,e+0,e+.5),o(65,e+.25,e+.5),o(67,e+.5,e+.75),o(48,e+.5,e+.75),o(72,e+.75,e+1),o(60,e+.75,e+1),o(43,e+.75,e+1);break;case 38:o(72,e+0,e+.25),o(67,e+0,e+.25),o(60,e+0,e+.25),o(48,e+0,e+.5),o(72,e+.25,e+.5),o(60,e+.25,e+.5),o(72,e+.5,e+.75),o(60,e+.5,e+.75),o(55,e+.5,e+.75),o(72,e+.75,e+1.25),o(67,e+.75,e+1.25),o(62,e+.75,e+1.25),o(50,e+.75,e+1);break;case 39:o(43,e+0,e+.25),o(71,e+.25,e+.75),o(67,e+.25,e+.75),o(62,e+.25,e+.75),o(50,e+.25,e+.5),o(57,e+.5,e+1),o(59,e+.75,e+1);break;case 40:o(72,e+0,e+.5),o(64,e+0,e+.5),o(60,e+0,e+.5),o(52,e+0,e+.5),o(45,e+0,e+.5),o(72,e+.5,e+.75),o(64,e+.5,e+.75),o(60,e+.5,e+.75),o(57,e+.5,e+.75),o(72,e+.75,e+1.25),o(67,e+.75,e+1.25),o(60,e+.75,e+1.25),o(48,e+.75,e+1);break;case 41:o(57,e+0,e+.5),o(53,e+0,e+.5),o(48,e+0,e+.5),o(71,e+.25,e+.5),o(69,e+.5,e+.75),o(60,e+.5,e+.75),o(57,e+.5,e+.75),o(67,e+.75,e+1),o(53,e+.75,e+1);break;case 42:o(67,e+0,e+.25),o(48,e+0,e+.25),o(36,e+0,e+.25),o(69,e+.25,e+.5),o(43,e+.25,e+.5),o(71,e+.5,e+.75),o(48,e+.5,e+.75),o(72,e+.75,e+1.25),o(68,e+.75,e+1.25),o(64,e+.75,e+1.25),o(60,e+.75,e+1.25),o(44,e+.75,e+1);break;case 43:o(52,e+0,e+.25),o(71,e+.25,e+1),o(68,e+.25,e+1),o(64,e+.25,e+1),o(47,e+.25,e+.5),o(56,e+.5,e+.75),o(52,e+.75,e+1);break;case 44:o(72,e+0,e+.5),o(64,e+0,e+.5),o(60,e+0,e+.5),o(57,e+0,e+.25),o(45,e+0,e+.25),o(52,e+.25,e+.5),o(72,e+.5,e+.75),o(60,e+.5,e+.75),o(57,e+.5,e+.75),o(72,e+.75,e+1.25),o(67,e+.75,e+1.25),o(60,e+.75,e+1.25),o(48,e+.75,e+1);break;case 45:o(57,e+0,e+.25),o(53,e+0,e+.25),o(71,e+.25,e+.5),o(55,e+.25,e+.5),o(69,e+.5,e+.75),o(48,e+.5,e+1),o(67,e+.75,e+1),o(64,e+.75,e+1),o(60,e+.75,e+1);break;case 46:o(67,e+0,e+.25),o(64,e+0,e+.25),o(60,e+0,e+.25),o(48,e+0,e+.25),o(36,e+0,e+.25),o(69,e+.25,e+.5),o(43,e+.25,e+.5),o(71,e+.5,e+.75),o(48,e+.5,e+1),o(72,e+.75,e+1.25),o(68,e+.75,e+1.25),o(60,e+.75,e+1.25);break;case 47:o(52,e+0,e+.5),o(40,e+0,e+.5),o(71,e+.25,e+1),o(68,e+.25,e+1),o(62,e+.25,e+1),o(47,e+.5,e+.75),o(52,e+.75,e+1);break;case 48:o(71,e+0,e+2),o(68,e+0,e+2),o(62,e+0,e+2),o(52,e+0,e+.25),o(54,e+.25,e+.75),o(56,e+.75,e+1.25);break;case 49:o(54,e+.25,e+.5),o(56,e+.5,e+1);break;case 50:o(64,e+0,e+1.75);break;case 51:o(52,e+.75,e+1)}}let i=-1;function c(){let e=n.currentTime-s+4,a=(i+1)*t;if(!(a>e))for(e+=4;a<e;)l(++i),a+=t}function f(){s=n.currentTime+.05,c(),setInterval(c,999)}let u=!1;const d=464,h=125,b=["7c3f58","eb6b6f","f9a875","fff6d3"],p=["8b956d","c4cfa1","4d533c","1f1f1f"],k=["4c625a","7b9278","abc396","dbf4b4"],m=["2b2b26","706b66","a89f94","e0dbcd"],g=["203c56","544e68","8d697a","ffd4a3"],v=["","ffae00","ffd800","fff000"],w=["ffdc26","fdec4a","fff699","fffee6"],y=["8d684a","d1a575","ffec94","e0dbcd"],R=["","2ea2eb","2a81cb","e0dbcd"],S=["","fa6a39","e94525","fff6d3"],I=[38230,32765,32765,30685,16380,0,3440,0,32770,43018,43530],C=[4080,15016,59754,42682,42682,42682,44009,10916,1360],x=[16733695,16105055,14663415,14663415,12959315,7361805,8257725,1833956,4586321,7361805,8061165,14416871,12974931,15750415,16711935],A=[224,748,1902,1964,11,3847],M=[80,500,500,1785,2045,2045,2045,2045,1785,500,500,80],T=[66934271,66934271,67108863,66060351,63954895,63954895,63954895,63954895,63954895,63954895,63954895,63954895,0],B=[1,[0,18,8,27],[5,7,3,11],[14,7,3,11],2,[8,18,24,27],[8,7,2,11],[17,7,2,11],[6,2,1,1],[7,3,1,1],[15,1,1,1],[17,2,1,1],[16,3,1,1],0,[10,22,3,5],[16,22,2,3],[20,22,2,3],[5,5,5,2],[14,5,5,2],2],F=[1,[0,0,20,11],0,[9,0,2,4],[0,6,20,1],[0,11,20,2],2,[2,5,2,2],[16,5,2,2],[9,4,2,4],[8,5,4,2],3,[0,0,1,1],[19,0,1,1]];function q(e,t,n){return e*(1-n)+t*n}function D(e){return document.getElementById(e)}function P(e,t){t?function(e){D(e).removeAttribute("disabled")}(e):function(e){D(e).setAttribute("disabled","disabled")}(e)}function E(e,t){D(e).textContent=""+t}function O(e,t){D(e).addEventListener("click",e=>{e.preventDefault(),t()})}function W(e){D(e).className="obj spawn"}function G(e,t){D(e).className="obj despawn",setTimeout(()=>{D(e).style.display="none",t&&t()},500)}function L(e){D("fullscreen").style.display="block",W(e)}function V(e,t){G(e,()=>{D("fullscreen").style.display="none",t&&t()})}const j=[[0,0,0,0,0,0,0,0],[14,17,27,17,21,17,14,0],[14,31,21,31,17,31,14,0],[0,10,31,31,31,14,4,0],[0,0,10,14,14,4,0,0],[4,14,14,4,31,31,4,0],[0,4,14,31,31,4,14,0],[0,0,0,12,12,0,0,0],[63,63,63,51,51,63,63,63],[0,0,30,18,18,30,0,0],[63,63,33,45,45,33,63,63],[0,7,3,13,18,18,12,0],[14,17,17,14,4,14,4,0],[4,6,5,4,12,28,24,0],[3,13,11,13,11,27,24,0],[0,21,14,27,14,21,0,0],[8,12,14,15,14,12,8,0],[2,6,14,30,14,6,2,0],[4,14,31,4,31,14,4,0],[10,10,10,10,10,0,10,0],[15,21,21,13,5,5,5,0],[14,17,12,10,6,17,14,0],[0,0,0,0,0,30,30,0],[4,14,31,4,31,14,4,14],[4,14,31,4,4,4,4,0],[4,4,4,4,31,14,4,0],[0,4,6,31,6,4,0,0],[0,4,12,31,12,4,0,0],[0,0,0,16,16,16,31,0],[0,10,10,31,10,10,0,0],[4,4,14,14,31,31,0,0],[31,31,14,14,4,4,0,0],[0,0,0,0,0,0,0,0],[4,14,14,4,4,0,4,0],[27,27,18,0,0,0,0,0],[0,10,31,10,10,31,10,0],[8,14,16,12,2,28,4,0],[25,25,2,4,8,19,19,0],[2,36,20,21,4,0,0,0],[12,12,8,0,0,0,0,0],[4,8,8,8,8,8,4,0],[8,4,4,4,4,4,8,0],[0,10,14,31,14,10,0,0],[0,4,4,31,4,4,0,0],[0,0,0,0,0,12,12,8],[0,0,0,31,0,0,0,0],[0,0,0,0,0,12,12,0],[0,1,2,4,8,16,0,0],[14,17,19,21,25,17,14,0],[4,12,4,4,4,4,14,0],[14,17,1,6,8,16,31,0],[14,17,1,14,1,17,14,0],[2,6,10,18,31,2,2,0],[31,16,16,30,1,17,14,0],[6,8,16,30,17,17,14,0],[31,1,2,4,8,8,8,0],[14,17,17,14,17,17,14,0],[14,17,17,15,1,2,12,0],[0,0,12,12,0,12,12,0],[0,0,12,12,0,12,12,8],[2,4,8,16,8,4,2,0],[0,0,31,0,0,31,0,0],[8,4,2,1,2,4,8,0],[14,17,1,6,4,0,4,0],[14,17,23,21,23,16,14,0],[14,17,17,17,31,17,17,0],[30,17,17,30,17,17,30,0],[14,17,16,16,16,17,14,0],[30,17,17,17,17,17,30,0],[31,16,16,30,16,16,31,0],[31,16,16,30,16,16,16,0],[14,17,16,23,17,17,15,0],[17,17,17,31,17,17,17,0],[14,4,4,4,4,4,14,0],[1,1,1,1,17,17,14,0],[17,18,20,24,20,18,17,0],[16,16,16,16,16,16,31,0],[17,27,21,17,17,17,17,0],[17,25,21,19,17,17,17,0],[14,17,17,17,17,17,14,0],[30,17,17,30,16,16,16,0],[14,17,17,17,21,18,13,0],[30,17,17,30,18,17,17,0],[14,17,16,14,1,17,14,0],[31,4,4,4,4,4,4,0],[17,17,17,17,17,17,14,0],[17,17,17,17,17,10,4,0],[17,17,21,21,21,21,10,0],[17,17,10,4,10,17,17,0],[17,17,17,10,4,4,4,0],[30,2,4,8,16,16,30,0],[14,8,8,8,8,8,14,0],[0,16,8,4,2,1,0,0],[14,2,2,2,2,2,14,0],[4,10,17,0,0,0,0,0],[0,0,0,0,0,0,0,63],[12,12,4,0,0,0,0,0],[0,0,14,1,15,17,15,0],[16,16,30,17,17,17,30,0],[0,0,14,17,16,17,14,0],[1,1,15,17,17,17,15,0],[0,0,14,17,30,16,14,0],[6,8,8,30,8,8,8,0],[0,0,15,17,17,15,1,14],[16,16,28,18,18,18,18,0],[4,0,4,4,4,4,6,0],[2,0,6,2,2,2,18,12],[16,16,18,20,24,20,18,0],[4,4,4,4,4,4,6,0],[0,0,26,21,21,17,17,0],[0,0,28,18,18,18,18,0],[0,0,14,17,17,17,14,0],[0,0,30,17,17,17,30,16],[0,0,15,17,17,17,15,1],[0,0,22,9,8,8,28,0],[0,0,14,16,14,1,14,0],[0,8,30,8,8,10,4,0],[0,0,18,18,18,22,10,0],[0,0,17,17,17,10,4,0],[0,0,17,17,21,31,10,0],[0,0,18,18,12,18,18,0],[0,0,18,18,18,14,4,24],[0,0,30,2,12,16,30,0],[6,8,8,24,8,8,6,0],[4,4,4,4,4,4,4,4],[12,2,2,3,2,2,12,0],[10,20,0,0,0,0,0,0],[4,14,27,17,17,31,0,0],[14,17,16,16,17,14,4,12],[18,0,18,18,18,22,10,0],[3,0,14,17,30,16,14,0],[14,0,14,1,15,17,15,0],[10,0,14,1,15,17,15,0],[12,0,14,1,15,17,15,0],[14,10,14,1,15,17,15,0],[0,14,17,16,17,14,4,12],[14,0,14,17,30,16,14,0],[10,0,14,17,30,16,14,0],[12,0,14,17,30,16,14,0],[10,0,4,4,4,4,6,0],[4,10,0,4,4,4,6,0],[8,0,4,4,4,4,6,0],[10,0,4,10,17,31,17,0],[14,10,14,27,17,31,17,0],[3,0,31,16,30,16,31,0],[0,0,30,5,31,20,15,0],[15,20,20,31,20,20,23,0],[14,0,12,18,18,18,12,0],[10,0,12,18,18,18,12,0],[24,0,12,18,18,18,12,0],[14,0,18,18,18,22,10,0],[24,0,18,18,18,22,10,0],[10,0,18,18,18,14,4,24],[18,12,18,18,18,18,12,0],[10,0,18,18,18,18,12,0],[0,4,14,16,16,14,4,0],[6,9,8,30,8,9,23,0],[17,10,4,31,4,31,4,0],[24,20,20,26,23,18,18,0],[2,5,4,14,4,4,20,8],[6,0,14,1,15,17,15,0],[6,0,4,4,4,4,6,0],[6,0,12,18,18,18,12,0],[6,0,18,18,18,22,10,0],[10,20,0,28,18,18,18,0],[10,20,0,18,26,22,18,0],[14,1,15,17,15,0,15,0],[12,18,18,18,12,0,30,0],[4,0,4,12,16,17,14,0],[0,0,31,16,16,16,0,0],[0,0,63,1,1,0,0,0],[16,18,20,14,17,2,7,0],[16,18,20,11,21,7,1,0],[4,0,4,4,14,14,4,0],[0,0,9,18,9,0,0,0],[0,0,18,9,18,0,0,0],[21,0,42,0,21,0,42,0],[21,42,21,42,21,42,21,42],[42,63,21,63,42,63,21,63],[4,4,4,4,4,4,4,4],[4,4,4,60,4,4,4,4],[0,0,18,18,18,28,16,16],[20,20,20,52,20,20,20,20],[0,0,0,60,20,20,20,20],[0,60,4,60,4,4,4,4],[20,52,4,52,20,20,20,20],[20,20,20,20,20,20,20,20],[0,60,4,52,20,20,20,20],[20,52,4,60,0,0,0,0],[20,20,20,60,0,0,0,0],[4,60,4,60,0,0,0,0],[0,0,0,60,4,4,4,4],[4,4,4,7,0,0,0,0],[4,4,4,63,0,0,0,0],[0,0,0,63,4,4,4,4],[4,4,4,7,4,4,4,4],[0,0,0,63,0,0,0,0],[4,4,4,63,4,4,4,4],[4,7,4,7,4,4,4,4],[20,20,20,23,20,20,20,20],[20,23,16,31,0,0,0,0],[0,31,16,23,20,20,20,20],[20,55,0,63,0,0,0,0],[0,63,0,55,20,20,20,20],[20,23,16,23,20,20,20,20],[0,63,0,63,0,0,0,0],[20,55,0,55,20,20,20,20],[4,63,0,63,0,0,0,0],[20,20,20,63,0,0,0,0],[0,63,0,63,4,4,4,4],[0,0,0,63,20,20,20,20],[20,20,20,31,0,0,0,0],[0,0,0,0,0,0,0,63],[0,0,0,0,0,0,63,63],[0,0,0,0,0,63,63,63],[0,0,0,0,63,63,63,63],[0,0,0,63,63,63,63,63],[0,0,63,63,63,63,63,63],[0,63,63,63,63,63,63,63],[63,63,63,63,63,63,63,63],[32,32,32,32,32,32,32,32],[48,48,48,48,48,48,48,48],[56,56,56,56,56,56,56,56],[60,60,60,60,60,60,60,60],[62,62,62,62,62,62,62,62],[0,28,18,28,18,18,28,16],[30,18,16,16,16,16,16,0],[0,31,10,10,10,10,10,0],[10,0,14,1,15,17,15,0],[0,0,15,18,18,12,0,0],[0,0,18,18,18,28,16,16],[0,0,10,20,4,4,4,0],[14,4,14,17,14,4,14,0],[12,18,18,30,18,18,12,0],[0,14,17,17,10,10,27,0],[12,16,8,4,14,18,12,0],[0,0,10,21,21,10,0,0],[0,4,14,21,21,14,4,0],[0,14,16,30,16,14,0,0],[0,12,18,18,18,18,0,0],[0,30,0,30,0,30,0,0],[0,4,14,4,0,14,0,0],[16,12,2,12,16,0,30,0],[0,0,63,56,38,33,32,63],[0,0,63,7,25,33,1,63],[4,4,4,4,4,20,8,0],[10,0,14,17,17,17,14,0],[62,62,62,62,62,62,62,62],[60,60,60,60,60,60,60,60],[56,56,56,56,56,56,56,56],[48,48,48,48,48,48,48,48],[32,32,32,32,32,32,32,32],[10,0,18,18,18,22,10,0],[24,4,8,28,0,0,0,0],[0,0,0,30,50,51,62,15],[18,63,18,18,63,18,0,0]];function N(e,t,n,a){for(let s=0;s<8;++s){const r=j[e][s];for(let e=0;e<6;++e){r>>5-e&1&&t.fillRect(3*e+n,3*s+a,3,3)}}}function _(e,t,n,a){for(let s=0;s<e.length;++s)N(e.charCodeAt(s),t,18*s+n,a)}function Q(e){const t=D(e);return t.width=d,t.height=h,t.getContext("2d")}function z(e,t,n){const a=document.createElement("canvas");return a.width=e,a.height=t,n(a.getContext("2d")),a}let H=1,J=10,K=.9,U=.59,X=.9,Y=!1,Z=!1;const $={};class ee{constructor(){this.pos=0,this.prevPos=0,this.gold=0,this.purpose=0,this.turnBack=!1,this.height=70,this.drunkSpeed=.1-.05*Math.random()}_render(e,t){for(let n=0;n<I.length;++n)for(let a=0;a<8;++a){const s=I[n]>>2*(7-a)&3;2!=s&&(t.fillStyle="#"+e[s],t.fillRect(3*a,3*n,3,3))}}buf(e){return $[e[0]]||($[e[0]]=z(24,33,this._render.bind(this,e)))}advance(){this.prevPos=this.pos;const e=J*(this.pos<230?K:this.pos>690?X:U);switch(this.purpose){case 1:this.turnBack=!1,this.pos+=e,this.pos>=2*d&&(this.pos=2*d,this.gold=H,this.purpose=2);break;case 2:this.turnBack=!0,this.pos-=e,this.pos<=0&&(this.pos=0,ie(this.gold),this.gold=0,this.purpose=0,this.turnBack=!1);break;case 3:Math.random()<.004&&(this.turnBack=!this.turnBack),this.pos+=this.drunkSpeed*(this.turnBack?-e:e),this.pos<250?(this.pos=250,this.turnBack=!1):this.pos>670&&(this.pos=670,this.turnBack=!0)}}haveFun(e){e&&(this.pos=250+(0|420*Math.random()),this.prevPos=this.pos,this.turnBack=Math.random()<.5),this.gold=0,this.purpose=3,this.height=50+(0|35*Math.random())}}const te=[];let ne=[];const ae=[[10,"autorun"],[20,"illuminate"]];let se=0,re=1,oe=1;function le(){P("btn-draft",se>=re),P("btn-covfefe",se>=10),P("btn-autorun",se>=20),P("btn-develop",se>=20),P("btn-fasta",se>=25),P("btn-illuminate",se>=25),P("btn-develop2",se>=25),P("btn-turborun",se>=30),P("btn-genetic",se>=30),P("btn-speedrun",se>=40),P("btn-portal",se>=60),P("btn-delorean",se>=90)}function ie(e){for(0==se&&(D("gold-title").style.display="inline",W("draft"),W("covfefe")),se+=e;ae.length&&se>=ae[0][0];)W(ae[0][1]),ae.shift();E("gold-count",se),le()}const ce=z(24,27,e=>{for(let t=0;t<C.length;++t)for(let n=0;n<8;++n){const a=C[t]>>2*(7-n)&3;a&&(e.fillStyle="#"+v[a],e.fillRect(3*n,3*t,3,3))}}),fe=z(24,30,e=>{for(let t=0;t<x.length;++t)for(let n=0;n<12;++n){const a=x[t]>>2*(11-n)&3;e.fillStyle="#"+k[a],e.fillRect(2*n,2*t,2,2)}}),ue=z(24,24,e=>{for(let t=0;t<A.length;++t)for(let n=0;n<12;++n)A[t]>>11-n&1&&(e.fillStyle="#"+g[0],e.fillRect(2*n,2*t,2,2));for(let t=A.length;t>=0;--t)for(let n=0;n<12;++n)A[t]>>n&1&&(e.fillStyle="#"+g[0],e.fillRect(2*n,2*(5-t)+12,2,2))}),de=z(72,81,e=>{for(let t of B)"number"==typeof t?e.fillStyle="#"+g[t]:e.fillRect(3*t[0],3*t[1],3*t[2],3*t[3]);for(let t=0;t<6;++t)e.fillRect(21,3*(2*t+7),3,3),e.fillRect(48,3*(2*t+7),3,3)}),he=z(40,26,e=>{for(let t of F)"number"==typeof t?e.fillStyle="#"+y[t]:e.fillRect(2*t[0],2*t[1],2*t[2],2*t[3])}),be=z(39,39,e=>{for(let t=0;t<T.length;++t)for(let n=0;n<13;++n){const a=T[t]>>2*n&3;a<2&&(e.fillStyle="#"+b[a],e.fillRect(3*n,3*t,3,3))}});function pe(e,t,n,a){for(let s=0;s<M.length;++s)for(let r=0;r<6;++r){const o=M[s]>>2*r&3;0!=o&&(e.fillStyle="#"+a[o],e.fillRect(3*r+t,3*s+n,3,3))}}function ke(e){return t=>{t.fillStyle="#"+b[3],t.fillRect(0,0,d,h),t.fillStyle="#"+b[2];for(let e=0;e<23;++e)e%2==0?(t.fillRect(20*e+5,88,20,4),t.fillRect(20*e+4,92,20,4),t.fillRect(20*e+3,96,20,4),t.fillRect(20*e+1,112,20,4),t.fillRect(20*e,116,20,4),t.fillRect(20*e-1,120,20,4)):(t.fillRect(20*e+3,100,20,4),t.fillRect(20*e+2,104,20,4),t.fillRect(20*e+1,108,20,4));e&&t.drawImage(be,300,40),t.fillStyle="#"+b[1],_("Dwarf Fortress",t,20,20)}}const me=z(d,h,ke(!1)),ge=z(d,h,ke(!0));function ve(e,t){return n=>{n.fillStyle="#"+e[3],n.fillRect(0,0,d,h),n.fillStyle="#"+e[2];for(let e=0;e<6;++e)_("&",n,70*e+48,50+(0|40*Math.random()));n.fillStyle="#"+e[1],_(t,n,20,20)}}const we=z(d,h,ve(p,"Black Forest")),ye=z(d,h,ve(k,"Reasonably Lit Forest")),Re=z(d,h,e=>{ve(k,"       Ale Forest")(e),e.drawImage(fe,20,18),e.drawImage(fe,47,18),e.drawImage(fe,74,16),e.drawImage(fe,101,16)});function Se(e,t){return n=>{n.fillStyle="#"+g[3],n.fillRect(0,0,d,h),n.fillStyle="#"+g[2];for(let e=0;e<3;++e)_("&",n,120*e+48,50+(0|20*Math.random()));t>0&&(n.fillStyle="#"+g[2],n.fillRect(0,90,d,24),n.fillStyle="#"+g[3],_(" -  -  -  -  -  -  -  - ",n,0,90)),t>1&&(n.drawImage(de,368,0),n.drawImage(ue,310,18)),n.fillStyle="#"+g[1],_(e,n,20,20)}}const Ie=z(d,h,Se("Wasteland",0)),Ce=z(d,h,Se("Country Roads",1)),xe=z(d,h,Se("Industrial Area",2)),Ae=z(d,h,e=>{e.fillStyle="#"+m[3],e.fillRect(0,0,d,h);for(let t=0;t<6;++t){const n=35*t+24,a=86+(0|16*Math.random());e.fillStyle="#"+m[2],e.fillRect(n,a,6,2),e.fillRect(n-1,a+2,6,2)}e.drawImage(he,230,75),e.drawImage(he,286,73),e.drawImage(he,342,73),e.drawImage(he,398,73),e.drawImage(he,404,45),e.drawImage(he,400,17),e.fillStyle="#"+m[1],_("Fabled Treasure",e,20,20)});function Me(e){return e<230?230*((t=e/230)*t):e>690?230*function(e){return e*(2-e)}((e-690)/230)+690:e;var t}function Te(e,t,n,a,s){let r=!1;Y&&te.sort((e,t)=>e.height-t.height);for(let o of te){if(0==o.pos&&0==o.prevPos)continue;const l=Me(q(o.prevPos,o.pos,e))-a;if(!(l<-40||l>500)){switch(r=!0,t.save(),t.translate(l+2,0),o.gold){case 1:t.drawImage(ce,-12,30);break;case 3:t.drawImage(ce,-8,22,16,18);case 2:t.drawImage(ce,-20,40,16,18),t.drawImage(ce,4,40,16,18)}o.turnBack&&t.scale(-1,1),t.drawImage(o.buf(n),-12,33*(1-s)+o.height,24,33*s),t.restore()}}return r}class Be{render(e){if(this.canvas.drawImage(this.buf,0,0),Te(e,this.canvas,this.palette,this.pos,1)&&this.spawn&&(W(this.spawn),this.spawn=void 0),this.renderWaiting&&ne.length){const e=Math.min(ne.length+Ve,24),t=ne[0].buf(this.palette);let n,a;for(let s=e-1;s>=Ve;--s)s>=9?s>=17?(n=14+3*(9*(24-s)-4),a=24):(n=0+3*(9*(17-s)-4),a=47):(n=3*(9*(9-s)-4)-13,a=70),this.canvas.drawImage(t,n+2,a)}this.canvas.lineWidth=2,this.canvas.strokeStyle="#"+this.palette[0],this.canvas.beginPath(),this.canvas.rect(1,1,d-2,h-2),this.canvas.stroke()}}let Fe=!1;const qe=function(){const e=.02;let t=-1,n=0;function a(s){if(requestAnimationFrame(a),Fe)t=-1;else{for(-1==t&&(t=s),n+=.001*(s-t),t=s;n>0;)n-=e,je(e);!function(e){De.render(e),Pe.render(e),Ee.render(e)}(n/e+1)}}return function(){requestAnimationFrame(a)}}(),De=new class extends Be{constructor(){super(),this.canvas=Q("can-fortress"),this.palette=b,this.buf=me,this.pos=-230,this.renderWaiting=!0}render(e){super.render(e),Oe&&(this.canvas.lineWidth=1,this.canvas.strokeStyle="#"+this.palette[0],this.canvas.beginPath(),this.canvas.rect(d-37.5,4.5,33,7),this.canvas.stroke(),this.canvas.fillStyle="#"+this.palette[1],this.canvas.fillRect(d-36,6,30*q(Le,Ge,e)/We,4))}},Pe=new class extends Be{constructor(){super(),this.canvas=Q("can-forest"),this.palette=p,this.buf=we,this.pos=230,this.spawn="forest"}},Ee=new class extends Be{constructor(){super(),this.canvas=Q("can-treasure"),this.palette=m,this.buf=Ae,this.pos=690,this.spawn="treasure"}};let Oe=!1,We=2.4,Ge=0,Le=0,Ve=0;function je(e){ne=[],Ve=0;for(let e of te)e.advance(),0==e.purpose&&ne.push(e),e.pos>0&&e.pos<160?Ve=1:Y&&3!=e.purpose&&e.pos>250&&e.pos<670?e.haveFun():Z&&e.pos>200&&e.pos<720&&(1==e.purpose?e.prevPos=e.pos=720:2==e.purpose&&(e.prevPos=e.pos=200));P("btn-adventure",ne.length),Oe&&(Ge>=We?(Le=Ge-=We,ne.length&&(ne[0].purpose=1)):(Le=Ge,Ge+=e))}te.push(new ee),setTimeout(()=>{W("title"),setTimeout(()=>{W("fortress"),setTimeout(()=>{W("adventure")},300)},300)},10),qe(),O("btn-adventure",()=>{if(ne.length&&(ne[0].purpose=1),!u){try{r().then(f)}catch(e){}u=!0}}),O("btn-draft",()=>{ie(-re),function(){let e=re;re+=oe,oe=e,E("dwarf-cost",re),le()}(),te.push(new ee),E("dwarf-count",te.length),D("dwarf-plural").style.display=1==te.length?"none":"inline"}),O("btn-covfefe",()=>{ie(-10),J*=1.2,G("covfefe"),W("fasta")}),O("btn-fasta",()=>{ie(-25),J*=1.1,G("fasta")}),O("btn-autorun",()=>{ie(-20),Oe=!0,G("autorun"),W("turborun")}),O("btn-turborun",()=>{ie(-30),We*=.5,G("turborun"),W("speedrun")}),O("btn-speedrun",()=>{ie(-40),We*=.5,G("speedrun")}),O("btn-illuminate",()=>{ie(-25),Pe.palette=k,Pe.buf=ye,U*=1.3,G("illuminate"),setTimeout(()=>{Fe=!0,Pe.buf=Re,Y=!0,te.forEach(e=>e.haveFun(!0)),L("kegs")},1e4)}),O("btn-continue",()=>{V("kegs",()=>{Fe=!1,W("orbital")})}),O("btn-orbital",()=>{Fe=!0,L("nuke")}),O("btn-continue2",()=>{V("nuke",()=>{G("orbital"),function(e){let t=-1,n=Date.now();requestAnimationFrame((function a(){const s=Date.now();s-n>=2e3?e():(requestAnimationFrame(a),t=(t+1)%4,Pe.canvas.fillStyle="#"+w[t],Pe.canvas.fillRect(0,0,d,h),Te(1,Pe.canvas,m,Pe.pos,(2e3+n-s)/2e3))}))}(()=>{!function(){Y=!1;const e=te.filter(e=>e.pos<230||e.pos>690).length;te.splice(0,te.length);for(let t=0;t<Math.max(e,3);++t)te.push(new ee);re=3,oe=2,E("dwarf-count",te.length),E("dwarf-cost",re)}(),Pe.palette=g,Pe.buf=Ie,Fe=!1,ae.push([10,"develop"]),ie(0)})})}),O("btn-develop",()=>{ie(-20),Pe.buf=Ce,U*=1.3,G("develop"),W("develop2")}),O("btn-develop2",()=>{ie(-25),Pe.buf=xe,H=2,G("develop2"),W("genetic"),ae.push([30,"portal"]),ae.push([60,"delorean"]),ie(0)}),O("btn-genetic",()=>{ie(-30),H=3,G("genetic")}),O("btn-portal",()=>{ie(-60),pe(me.getContext("2d"),414,67,R),pe(ge.getContext("2d"),414,67,R),pe(Ae.getContext("2d"),32,67,S),Z=!0,G("portal")}),O("btn-delorean",()=>{ie(-90),De.buf=ge,G("delorean"),W("back")}),O("btn-back",()=>{G("back"),setTimeout(()=>{G("treasure"),setTimeout(()=>{G("forest"),setTimeout(()=>{G("fortress"),setTimeout(()=>{G("title"),setTimeout(()=>{location.reload()},300)},300)},300)},300)},10)});for(let e of["btn-adventure","btn-draft","btn-covfefe","btn-fasta","btn-autorun","btn-turborun","btn-speedrun","btn-illuminate","btn-continue","btn-orbital","btn-continue2","btn-develop","btn-develop2","btn-genetic","btn-portal","btn-delorean","btn-back"])D(e).oncontextmenu=function(e){e.preventDefault()};(e=>{let t=0,n=0;document.addEventListener("touchstart",()=>{t=n,n=Date.now()}),document.addEventListener("touchend",n=>{Date.now()-t<e&&n.preventDefault();const a=n.target;a&&a.click&&a.click()})})(400)}();