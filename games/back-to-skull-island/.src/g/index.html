<!doctype html><meta charset=UTF-8><title>Back to Skull Island</title><style>#root,body{height:100vh}body{font-family:'Courier New',Courier,monospace;font-size:1.2em;margin:0}button{background:#3c6;color:#111327;cursor:pointer;border:2px solid #fff;border-radius:50px;font-size:1rem;padding:.5em 2em;font-weight:700}.page{background:#111327;box-sizing:border-box;color:#3c6;height:100%;padding:5em;width:100%}canvas{left:0;position:absolute;top:0}#root{overflow:hidden;position:relative;width:100vw}.progress-wrapper{display:flex;justify-content:space-between}.progress,.progress-box{position:relative;width:200px}.progress-box{background:#000;border:2px solid orange;padding:.5em;z-index:1}.progress-box p{color:#fff;display:inline-block;margin:0 auto;padding-top:.25em}.progress{background:#d3d3d3;border-radius:10px;height:15px;overflow:hidden}.bar{background:green;display:inline-block;height:100%}.below-60{background:#ff0}.below-30{background:red}.win{font-size:32px;left:1rem;position:absolute}</style><div id=root></div><script>(()=>{const t=(t=>()=>++t)(0),e=Math.ceil,n=Math.floor,i=Math.random,a=document.body,o=t=>document.createElement(t),c=(t,e,n)=>(t.addEventListener(e,n),()=>t.removeEventListener(e,n)),l=2*Math.PI,r=window.requestAnimationFrame,s=(window.cancelAnimationFrame,()=>null),d=t=>{const e=o("div"),n=o("div"),i=o("span"),a=o("p");return a.innerHTML=t,i.classList.add("bar"),n.classList.add("progress"),e.classList.add("progress-box"),n.appendChild(i),e.appendChild(n),e.appendChild(a),[e,i]},h=()=>{const t=o("canvas");return[t,t.getContext("2d")]},u=t=>Promise.all(t.map(t=>new Promise(e=>{const n=new Image;n.onload=(()=>e(n)),n.src=t})));svgDataURL=((t,e="")=>"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e+t)),window.svgDataURL=svgDataURL,window.svgDataURL100=(t=>svgDataURL(t,'<svg width="100" height="100" fill="none" xmlns="http://www.w3.org/2000/svg">')),window.svgDataURL150=(t=>svgDataURL(t,'<svg width="150" height="100" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)">'));const g=(t,e)=>{const{buttonText:n,description:i,directions:a,title:o}=f(t),{render:c,cleanUp:l}=p();c(n,i,a,o,()=>{l(),e()})},f=t=>({intro:{buttonText:"Start!",title:"Back to Skull Island",description:"<p>What if King Kong survived the fall off the Empire State Building? All he wants is to get back home to Skull Island.</p><p>The journey is long, and he's tired and hungry. The first thing to do is eat as much food as he can find. Then get off the island of Manhattan.</p>",directions:"<p>Use the <b>arrow keys</b> or <b>WASD</b> to navigate. Fill up your health meter by eating food. Avoid police cars, and when you are done eating, find the Southwestern Pier.</p>"},"pre-lvl-3":{buttonText:"Fight!",title:"Reclaim the Throne",description:"<p>King Kong has finally made it across the ocean and back to Skull Island. But someone else is in charge now.</p><p>Can he beat T-Rex to reclaim his spot as King?</p>",directions:"<p>Use the <b>arrow</b> keys or <b>AD</b> to move left and right.</p> <p>Hold <b>Down</b> or <b>S</b> to block an attack.</p> <p>Hit <b>spacebar</b> or <b>click</b> to punch.</p>"},credits:{title:"Thanks for playing!",description:"<p>Back to Skull Island was created by Amy and Steven Frieson for the 2019 js13kgames competition.</p><p>We ran out of time and space to make an ocean level, but we thoroughly enjoyed making this game!</p>"}})[t],p=(t,e)=>{const n=document.getElementById("root"),i=document.createElement("button"),a=document.createElement("h1"),l=document.createElement("div"),r=document.createElement("h2"),s=document.createElement("div");let d=[];const h=o("div");h.classList.add("page");return{render:(t,e,o,u,g)=>{a.innerHTML=u,h.appendChild(a),l.innerHTML=e,h.appendChild(l),o&&(r.innerHTML="Directions",h.appendChild(r),s.innerHTML=o,h.appendChild(s)),t&&(i.id="button",i.innerHTML=t,i.setAttribute("style","position: relative;"),d.push(c(i,"click",g)),h.appendChild(i)),n.appendChild(h)},cleanUp:()=>{d.forEach(t=>t()),d=[],n.removeChild(h)}}},m=async(t,n)=>{const i=()=>{const t=l(),n=e((t.height/f-1)/2),o=e((t.width/p-1)/2);g(a(t.position,n,o),t).then(()=>r()&&i())},{getMapView:a,numFoods:o,enableExit:c}=C(40,38,.1),{getSnapshot:l,isUpdated:r,setState:s}=K(),d=t=>s(t)&&i(),h=await u([svgDataURL100('<rect x="52" y="5" width="43" height="81" rx="12" transform="rotate(30 51.8 5)" fill="#D7C198"/><rect x="66" y="7" width="16" height="92" rx="8" transform="rotate(30 65.621 6.79)" fill="#C00202"/><path d="M64.243 17.754l1.711 6.387a4 4 0 01-2.828 4.9l-2.524.676a4 4 0 00-2.828 4.899l.676 2.523a4 4 0 01-2.828 4.9l-2.524.675a4 4 0 00-2.828 4.9l.676 2.523a4 4 0 01-2.828 4.899l-2.524.676a4 4 0 00-2.828 4.9l.676 2.523a4 4 0 01-2.829 4.899l-2.523.676a4 4 0 00-2.829 4.899l.676 2.523a4 4 0 01-2.828 4.9l-6.387 1.71" stroke="#FFF61B" stroke-width="3" stroke-linecap="round"/></svg>'),svgDataURL100('<path d="M66.5 25v14a7.5 7.5 0 01-7.5 7.5H41a7.5 7.5 0 01-7.5-7.5V25c0-9.113 7.387-16.5 16.5-16.5S66.5 15.887 66.5 25zM35.5 86.5h11V96a3.5 3.5 0 01-3.5 3.5h-4a3.5 3.5 0 01-3.5-3.5v-9.5zM53.5 86.5h11V96a3.5 3.5 0 01-3.5 3.5h-4a3.5 3.5 0 01-3.5-3.5v-9.5zM12.112 77.5h6.35a2.5 2.5 0 012.48 2.819l-2.185 17a2.5 2.5 0 01-2.48 2.181h-2.855a2.5 2.5 0 01-2.493-2.308l-1.31-17a2.5 2.5 0 012.493-2.692z" fill="#505050" stroke="#000"/><path d="M23.624 50.481l4.188 1.56a5.5 5.5 0 013.094 7.416l-8.91 19.746a5.5 5.5 0 01-6.811 2.936l-1.478-.511a5.5 5.5 0 01-3.474-6.77l6.202-20.794a5.5 5.5 0 017.19-3.583zM87.53 77.5h-6.235a2.5 2.5 0 00-2.48 2.816l2.163 17a2.5 2.5 0 002.48 2.184h2.774a2.5 2.5 0 002.493-2.31l1.298-17a2.5 2.5 0 00-2.493-2.69z" fill="#505050" stroke="#000"/><path d="M76.106 50.5l-4.055 1.523c-2.98 1.12-4.405 4.532-3.106 7.437l8.822 19.735a5.458 5.458 0 006.79 2.928l1.373-.479a5.541 5.541 0 003.482-6.794l-6.14-20.78a5.46 5.46 0 00-7.166-3.57z" fill="#505050" stroke="#000"/><rect x="19" y="40" width="64" height="37" rx="19" fill="#505050" stroke="#000"/><path d="M32 65.5h35a5.5 5.5 0 015.5 5.5v3c0 7.456-6.044 13.5-13.5 13.5H41c-7.456 0-13.5-6.044-13.5-13.5v-4a4.5 4.5 0 014.5-4.5z" fill="#505050" stroke="#000"/></svg>'),svgDataURL100('<path d="M35.5 86.5h11V96a3.5 3.5 0 01-3.5 3.5h-4a3.5 3.5 0 01-3.5-3.5v-9.5zM53.5 86.5h11V96a3.5 3.5 0 01-3.5 3.5h-4a3.5 3.5 0 01-3.5-3.5v-9.5z" fill="#505050" stroke="#000"/><path d="M32 65.5h35a5.5 5.5 0 015.5 5.5v3c0 7.456-6.044 13.5-13.5 13.5H41c-7.456 0-13.5-6.044-13.5-13.5v-4a4.5 4.5 0 014.5-4.5z" fill="#505050" stroke="#000"/><rect x="44" y="73" width="13" height="8" rx="4" fill="#E4E4E4" stroke="#000"/><rect x="19" y="40" width="64" height="37" rx="19" fill="#505050" stroke="#000"/><path d="M66.5 25v14a7.5 7.5 0 01-7.5 7.5H41a7.5 7.5 0 01-7.5-7.5V25c0-9.113 7.387-16.5 16.5-16.5S66.5 15.887 66.5 25zM23.624 50.481l4.188 1.56a5.5 5.5 0 013.094 7.416l-8.91 19.746a5.5 5.5 0 01-6.811 2.936l-1.478-.511a5.5 5.5 0 01-3.474-6.77l6.202-20.794a5.5 5.5 0 017.19-3.583z" fill="#505050" stroke="#000"/><path d="M12.112 77.5h6.35a2.5 2.5 0 012.48 2.819l-2.185 17a2.5 2.5 0 01-2.48 2.181h-2.855a2.5 2.5 0 01-2.493-2.308l-1.31-17a2.5 2.5 0 012.493-2.692zM76.106 50.5l-4.055 1.523c-2.98 1.12-4.405 4.532-3.106 7.437l8.822 19.735a5.458 5.458 0 006.79 2.928l1.373-.479a5.541 5.541 0 003.482-6.794l-6.14-20.78a5.46 5.46 0 00-7.166-3.57z" fill="#505050" stroke="#000"/><path d="M87.53 77.5h-6.235a2.5 2.5 0 00-2.48 2.816l2.163 17a2.5 2.5 0 002.48 2.184h2.774a2.5 2.5 0 002.493-2.31l1.298-17a2.5 2.5 0 00-2.493-2.69z" fill="#505050" stroke="#000"/><path d="M33 65.5h10a6.5 6.5 0 016.5 6.5v4a.5.5 0 01-.5.5h-6c-5.799 0-10.5-4.701-10.5-10.5a.5.5 0 01.5-.5zM57 65.5h10a.5.5 0 01.5.5v1a9.5 9.5 0 01-9.5 9.5h-7a.5.5 0 01-.5-.5v-4a6.5 6.5 0 016.5-6.5zM42.263 37.245l.052-.406-.388-.131a6.503 6.503 0 01-4.427-6.162v-.182a6.5 6.5 0 016.5-6.5h12a6.5 6.5 0 016.5 6.5v.181a6.503 6.503 0 01-4.427 6.163l-.388.13.052.407c.023.187.036.379.036.573v1.818a4.5 4.5 0 01-4.5 4.5h-6.546a4.5 4.5 0 01-4.5-4.5v-1.818c0-.194.013-.386.036-.573z" fill="#E4E4E4" stroke="#000"/><circle cx="45" cy="33" fill="#000" r="2"/><circle cx="55" cy="33" fill="#000" r="2"/><path d="M41 28.5l7 1.5-5.25-3L41 28.5zM59 28.5L52 30l5.25-3L59 28.5z" fill="#000"/><path d="M55 41c0-1.105-2.239-2-5-2s-5 .895-5 2" stroke="#000"/></svg>'),svgDataURL100('<g clip-path="url(#clip0)"><path d="M78.819 25.994l-1.902 14.879a7.5 7.5 0 01-8.39 6.488l-14.88-1.902a8.5 8.5 0 01-7.353-9.51l1.775-13.886c1.085-8.491 8.849-14.495 17.34-13.41 8.491 1.086 14.495 8.85 13.41 17.34z" fill="#505050" stroke="#000"/><path d="M68.15 36.608l.103-.397-.369-.178a6.503 6.503 0 01-3.61-6.675l.024-.18a6.5 6.5 0 017.271-5.623l7.369.942c-.016.495-.055.995-.12 1.497l-1.901 14.879a7.463 7.463 0 01-1.487 3.613l-3.726-.476a4.5 4.5 0 01-3.893-5.035l.23-1.803c.025-.193.062-.381.11-.564z" fill="#E4E4E4" stroke="#000"/><path fill="#000" d="M71.014 37.887l5.827 1.428-.476 1.942-5.827-1.428z"/><path d="M59.78 44.5l2.514 2.453c4.943 4.82 5.041 12.734.221 17.676l-6.608 6.776c-7.134 7.314-18.847 7.46-26.161.327l-2.515-2.453c-4.152-4.05-4.235-10.697-.186-14.848l9.402-9.64c6.362-6.523 16.809-6.654 23.332-.29zM59.828 83.466l4.495-4.156a2.5 2.5 0 013.731.382L78.02 93.63a2.5 2.5 0 01-.336 3.29l-1.977 1.827a2.5 2.5 0 01-3.4-.005l-12.484-11.61a2.5 2.5 0 01.005-3.666z" fill="#505050" stroke="#000"/><path d="M57.717 51.831l4.176-.449c3.163-.34 5.987 2.063 6.155 5.238l1.137 21.541a5.417 5.417 0 01-4.715 5.67l-1.334.175c-2.922.385-5.656-1.6-6.199-4.5l-3.979-21.269a5.421 5.421 0 014.76-6.406zM28 61.5h7.5c6.075 0 11 4.925 11 11v.5c0 7.456-6.044 13.5-13.5 13.5h-4c-5.799 0-10.5-4.701-10.5-10.5v-5a9.5 9.5 0 019.5-9.5z" fill="#505050" stroke="#000"/><circle cx="74" cy="33" fill="#000" r="2"/><path d="M70 28.5l7 1.5-5.25-3L70 28.5z" fill="#000"/><path d="M38.846 68.534l1.962.388a5.5 5.5 0 014.328 6.463L41.02 96.183a3.5 3.5 0 01-4.113 2.754l-5.886-1.165a3.5 3.5 0 01-2.754-4.113l4.116-20.797a5.5 5.5 0 016.463-4.328z" fill="#505050" stroke="#000"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>'),svgDataURL100('<g clip-path="url(#clip0)"><path d="M92.93 27.528c1.534-2.296.924-5.414-1.457-6.814a86.88 86.88 0 00-84.105-2.205c-2.45 1.273-3.223 4.355-1.811 6.729l37.82 63.555c1.88 3.16 6.411 3.278 8.454.222L92.93 27.528z" fill="#D7C198"/><path d="M34.856 19.704c-9.255 0-15.553.913-19.998 3.866-1.501.998-1.746 3.004-.853 4.57C24.57 46.668 43.357 79.594 44.5 81.5 46 84 50 85 52 81.5c1.82-3.185 29.313-43.847 34.245-52.174.54-.913.347-1.901-.481-2.564-7.992-6.4-18.067-.265-25.881-.265-13.4 0-13.229-6.793-25.027-6.793z" fill="#FFF61B"/><circle cx="32" cy="35" r="7" fill="#C00202"/><circle cx="62" cy="43" r="7" fill="#C00202"/><circle cx="47" cy="63" r="7" fill="#C00202"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>')]),{render:g,tileHeight:f,tileWidth:p,cleanUp:m}=A(s,{onWindowResize:t=>d(t),onKeyDown:e=>{let i;d(o=>{if(o.gameOver)return;let l=0,r=0;switch(e){case 37:case 65:r--,i="left";break;case 38:case 87:l--,i="up";break;case 39:case 68:r++,i="right";break;case 40:case 83:l++,i="down";break;default:return}const s={row:o.position.row+l,col:o.position.col+r};let d=o.remainingFoods,h=o.canExit;const u=a(s,0,0)[0][0];if(u.canEnter){u.itemId!=I&&u.itemId!=E||(u.itemId=null,d-=1,t()),0!=d||h||(c(),h=!0);let e=o.gameOver;return u.displayId==T&&(e=!0,setTimeout(()=>{m(),n()},2e3)),{position:s,remainingFoods:d,canExit:h,gameOver:e,facing:i}}})}},o,h);s({position:{row:9,col:10},facing:"down",remainingFoods:o,canExit:!1,gameOver:!1}),i()},w=t(),b=t(),k=t(),v=t(),y=t(),S=t(),I=t(),E=t(),T=t(),x="#111327",C=(t,e,a)=>{const o=[];function c(t,e){return{displayId:t,canEnter:t>y,itemId:null,imgData:e}}const r=(()=>{const[,t]=h("canvas");t.canvas.width=t.canvas.height=100,t.fillStyle="#154364",t.fillRect(0,0,100,100);return t.lineWidth=2,[[-7,86,"#0987A3"],[-3,50,"#38B2CC"],[-13,17,"#388ECC"]].forEach(e=>{let n=e[0],i=e[1];for(t.strokeStyle=e[2];n<100;)t.beginPath(),t.ellipse(n+10,i,10,10,0,0,Math.PI),n+=20,t.stroke()}),t.getImageData(0,0,100,100)})(),s=(()=>{const[,t]=h("canvas");t.canvas.width=t.canvas.height=100,t.fillStyle="#154364",t.fillRect(0,0,100,100),t.fillStyle="#630";for(let e=0;e<100;e+=20)t.fillRect(10,e,80,18);return t.getImageData(0,0,100,100)})();const d=[[k,b],[b,b],[b,b],[b,b]];const u=(()=>{const[,t]=h();function e(e,n){t.beginPath(),t.fillStyle="red",t.filter="blur(1px)",t.fillRect(e+15,n-2,6,5),t.filter="none",t.fillRect(e+16,n,4,3);t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(e+8,n+3,25,9),t.fillStyle="blue",t.fillRect(e,n+10,40,12),t.fillStyle="#fff",t.fillRect(e+12,n+10,17,12),t.fillStyle="#bbb",t.arc(e+8,n+22,5,0,l),t.fill(),t.arc(e+31,n+22,5,0,l),t.fill(),t.beginPath(),t.fillStyle="#ff0",t.arc(e+3,n+13,2,0,l),t.fill(),t.closePath()}return t.canvas.height=100,t.canvas.width=100,t.fillStyle=x,t.fillRect(0,0,100,100),e(5,19),e(55,53),t.getImageData(0,0,100,100)})(),g=[],f=[1,2];function p(t,e,n,i,a){const o=t[e][n],l=t[e+i.length-1][n+i[0].length-1];o&&l&&i.forEach((i,o)=>{i.forEach((i,l)=>{t[e+o][n+l]=c(i,a[o][l])})})}function m(){let t=[];return o.forEach(e=>{e.forEach(e=>{e.canEnter&&t.push(e)})}),t}["#01ADC4","#700","#6805F2","#CB0036","#F2E530"].forEach(t=>f.forEach(e=>g.push(((t,e)=>{const[,n]=h();return t.map((t,i)=>t.map((t,a)=>(n.putImageData(e,-100*a,-100*i),n.getImageData(0,0,100,100))))})(d,function(t,e){const[,n]=h("canvas");n.canvas.width=200,n.canvas.height=400;const i=t=>{n.fillStyle=t},a=(...t)=>n.moveTo(...t),o=(...t)=>n.lineTo(...t),c=(...t)=>n.quadraticCurveTo(...t),r=()=>n.fill(),s=(...t)=>n.fillRect(...t),d=()=>n.beginPath(),u=()=>n.closePath();if(i(x),n.fillRect(0,0,200,400),i("#686868"),a(5,354),o(195,354),c(200,354,200,359),o(200,395),c(200,400,195,400),o(5,400),c(0,400,0,395),o(0,359),c(0,354,5,354),r(),d(),i("#DFD8C1"),n.ellipse(16,390,12,4,0,0,l),r(),d(),i("#014404"),n.fillRect(14,370,4,20),d(),i("#FE8"),n.arc(16,372,4,0,l),r(),d(),n.fillStyle=t,a(8,10),o(48,0),o(192,0),o(192,391),o(48,391),o(8,358),u(),r(),d(),i("rgba(0,0,0,0.3)"),a(8,10),o(48,0),o(48,391),o(8,358),u(),r(),1==e)for(let t=25;t<=241;t+=27)s(61,t,115,16);else if(2==e)for(let t=61;t<=160;t+=33)s(t,25,20,321);return n.getImageData(0,0,200,400)}(t,e))))),function(t,e){for(let n=0;n<t;n++){o[n]=[];for(let t=0;t<e;t++)o[n][t]=c(S)}}(t,e),function(){const t=d;for(let e=0;e<o.length;e+=t.length+1)for(let a=0;a<o[0].length;a+=t[0].length+1){const c=g[n(i()*g.length)];o[e][a].canEnter&&p(o,e,a,t,c)}}();const C=m(),A=[0,10,48,75,100,125,156,175,200,225,250,275,300,315,325,350,375,400,425,450,455,475,500,525,528,550,575,595,625,655,675];for(let t=0;t<A.length;t++)C[A[t]].canEnter=!1,C[A[t]].displayId=v,C[A[t]].imgData=u;const R=m(),D=n(R.length*a);return function(t,e){let a=[...t];for(let o=0;o<e;o++){const e=n(i()*t.length);[a[o],a[e]]=[a[e],a[o]]}return a.slice(0,e)}(R,D).forEach(t=>{t.itemId=i()<.5?I:E}),{getMapView:function(t,e,n){return function(t,e,n,i){const a=[],l=c(w,r);for(var s=t;s<=e;s++){a[s-t]=[];for(var d=n;d<=i;d++){let e=l;try{o[s][d]&&(e=o[s][d])}catch(t){}a[s-t].push(e)}}return a}(t.row-e,t.row+e,t.col-n,t.col+n)},numFoods:D,enableExit:function(){o.push([c(T,s)])}}},A=(t,{onWindowResize:e,onKeyDown:n},i,o)=>{const[l,r]=h(),s=100,u=100,[g,f,p,m,w]=o;window.kongRight=m;const b={[S]:x},[k,v]=d("Pizzas Eaten");root.appendChild(k),root.appendChild(l);const C=[c(window,"resize",()=>e({width:a.clientWidth,height:a.clientHeight})),c(window,"keydown",t=>{n(t.which)})];return t({width:a.clientWidth,height:a.clientHeight}),{render:function(t,e){return new Promise((n,a)=>{try{!function(t,e){l.width=e.width,l.height=e.height;const n=t[0].length*u,i=t.length*s,a=(e.height-i)/2,o=(e.width-n)/2;for(let e=0;e<t.length;e++)for(let n=0;n<t[0].length;n++){const i=t[e][n];b[i.displayId]&&(r.fillStyle=b[i.displayId]),r.fillRect(o+n*u,a+e*s,u,s),i.displayId<y&&i.imgData&&r.putImageData(i.imgData,o+n*u,a+e*s),i.itemId&&(i.itemId==I&&r.drawImage(w,o+n*u,a+e*s),i.itemId==E&&r.drawImage(g,o+n*u,a+e*s)),i.displayId===T&&r.putImageData(i.imgData,o+n*u,a+e*s)}}(t,e),function(t){let e;switch(t){case"up":e=f;break;case"right":e=m;break;case"down":e=p;break;case"left":e=m}let n=1;"left"==t&&(r.scale(-1,1),r.translate(-100,0),n=-1),r.drawImage(e,n*(l.width/2-e.width/2),l.height/2-e.height/2),r.setTransform(1,0,0,1,0,0)}(e.facing),function(t){v.style.width=`${(i-t.remainingFoods)/i*100}%`}(e),n()}catch(t){a(t)}})},tileHeight:s,tileWidth:u,cleanUp:()=>{root.removeChild(l),root.removeChild(k),C.forEach(t=>t())}}},R=async(t,e,n)=>{let a=!1;const o={trex:"kong",kong:"trex"};let c;const l={},r=(t,e,n)=>{l[t]=setTimeout(()=>{l[t]=null,n()},e)};const d=()=>{const t=p();V(50,t.kong,t.trex,c).then(()=>m()&&d())},{initialKongState:h,initialTrexState:g}=P(25,50),{getState:f,getSnapshot:p,isUpdated:m,setState:w}=K(),b=(...t)=>w(...t)&&d(),k=(t,e,n=f())=>t<50&&t>=0&&t!==n[o[e]].location,v=(e,i=s)=>l=>{l[e].currentAction==D&&i(),l[e].currentAction==M&&(l[e].health<=0?(a=!0,r(e,250,()=>(function(t){c=t,r("",5e3,()=>{B(),n()})})(o[e]))):(t(),r(e,750,()=>T(e,i))))};function y(t,e,n=s){f()[e].currentAction===D&&b(n=>{const i=n[e];let a,o=i.location;switch(t){case"left":o--,a=F;break;case"right":o++,a=W}return k(o,e,n)||(o=i.location),I(e,{...n,[e]:{...i,direction:a,location:o}})},v(e,n))}function S(t){f()[t].currentAction===D&&b(e=>{if(e[t].currentAction==D)return{[t]:{...e[t],currentAction:L}}})}function I(t,n=f()){const i=n[t],a=n[o[t]];if(a.currentAction!==U)return n;if(i.currentAction==L)return e(),n;const c=a.location+(a.direction==F?-1:1);if(i.location!==c)return n;let r;return function(t){clearTimeout(l[t])}(t),r=a.location<i.location?i.location+1:i.location-1,i.health-=5,i.location=k(r,t,n)?r:i.location,i.currentAction=M,n}function E(t,e=s){b(e=>I(t,{...e,[t]:{...e[t],currentAction:D}}),v(t,e))}function T(t,e=s){b(e=>I(t,{...e,[t]:{...e[t],currentAction:D}}),v(t,e))}function x(t,e=s){b(e=>I(o[t],{...e,[t]:{...e[t],currentAction:U}}),n=>{v(o[t],"trex"==o[t]?A:s)(n),r(t,250,()=>(function(t,e=s){b(e=>({[t]:{...e[t],currentAction:M}}),e)})(t,()=>r(t,500,()=>T(t,e))))})}function C(t,e=s){f()[t].currentAction===D&&b(e=>({[t]:{...e[t],currentAction:H}}),()=>r(t,250,()=>x(t,e)))}function A(){a||function(){const t=f();t.trex.location-t.kong.location>1?r("trex",300*i()+100,()=>y("left","trex",A)):i()<.5?(S("trex"),r("trex",500,()=>E("trex",A))):C("trex",A)}()}const R=await u([svgDataURL150('<path d="M98.819 18.994l-1.902 14.879a7.5 7.5 0 01-8.39 6.488l-14.88-1.902a8.5 8.5 0 01-7.353-9.51l1.775-13.886c1.085-8.491 8.849-14.495 17.34-13.41 8.491 1.086 14.495 8.85 13.41 17.34z" fill="#505050" stroke="#000"/><path d="M88.15 29.608l.103-.397-.369-.178a6.503 6.503 0 01-3.61-6.675l.024-.18a6.5 6.5 0 017.271-5.623l7.369.942c-.016.495-.055.995-.12 1.497l-1.901 14.879a7.463 7.463 0 01-1.487 3.613l-3.726-.476a4.5 4.5 0 01-3.893-5.035l.23-1.803c.025-.193.062-.381.11-.564z" fill="#E4E4E4" stroke="#000"/><circle cx="94" cy="25" fill="#000" r="2"/><path d="M90 20.5l7 1.5-5.25-3L90 20.5z" fill="#000"/><path d="M79.78 37.5l2.514 2.453c4.943 4.82 5.041 12.734.221 17.676l-6.609 6.776c-7.134 7.314-18.846 7.46-26.16.327l-2.515-2.453c-4.152-4.05-4.235-10.697-.186-14.849l9.402-9.639c6.362-6.523 16.809-6.654 23.332-.29zM109.059 44.42l-4.778-3.827a2.5 2.5 0 01-.177-3.746l12.303-11.927a2.5 2.5 0 013.303-.156l2.101 1.683a2.499 2.499 0 01.5 3.363l-9.625 14.071a2.5 2.5 0 01-3.627.54z" fill="#505050" stroke="#000"/><path d="M78.09 51.209l-1.065-4.063c-.806-3.077 1.15-6.227 4.264-6.864l21.134-4.326a5.418 5.418 0 016.307 3.82l.372 1.293c.815 2.833-.742 5.831-3.529 6.799l-20.442 7.095a5.421 5.421 0 01-7.042-3.754zM56.633 69.89l1.805-.86a5.5 5.5 0 017.33 2.603l9.111 19.143a3.5 3.5 0 01-1.656 4.665l-5.418 2.578a3.5 3.5 0 01-4.664-1.656L54.03 77.219a5.5 5.5 0 012.603-7.33z" fill="#505050" stroke="#000"/><path d="M46 54.5h7.5c6.075 0 11 4.925 11 11v.5c0 7.456-6.044 13.5-13.5 13.5h-4c-5.799 0-10.5-4.701-10.5-10.5v-5a9.5 9.5 0 019.5-9.5z" fill="#505050" stroke="#000"/><path d="M49.846 68.534l1.962.388a5.5 5.5 0 014.328 6.463L52.02 96.183a3.5 3.5 0 01-4.113 2.754l-5.886-1.165a3.5 3.5 0 01-2.754-4.113l4.116-20.797a5.5 5.5 0 016.463-4.328z" fill="#505050" stroke="#000"/><path fill="#000" d="M91.014 29.887l5.827 1.428-.476 1.942-5.827-1.428z"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h150v100H0z"/></clipPath></defs></svg>'),svgDataURL100('<g clip-path="url(#clip0)" stroke="#000"><path d="M65.162 23.865L63.26 38.744a7.5 7.5 0 01-8.39 6.489L39.99 43.33a8.5 8.5 0 01-7.353-9.509l1.775-13.887c1.086-8.491 8.85-14.495 17.34-13.41 8.492 1.086 14.496 8.85 13.41 17.341z" fill="#505050"/><path d="M54.494 34.48l.102-.397-.368-.18a6.503 6.503 0 01-3.61-6.673l.023-.18a6.5 6.5 0 017.272-5.624l7.368.942c-.015.496-.055.995-.119 1.497L63.26 38.744a7.463 7.463 0 01-1.486 3.613l-3.726-.476a4.5 4.5 0 01-3.894-5.034l.231-1.804c.025-.193.061-.38.109-.564z" fill="#E4E4E4"/><path d="M39.964 36.05l3.474.528c6.825 1.037 11.516 7.411 10.479 14.236l-1.423 9.358c-1.536 10.1-10.97 17.045-21.07 15.509l-3.474-.528c-5.733-.872-9.674-6.226-8.802-11.96l2.024-13.311c1.37-9.01 9.783-15.202 18.792-13.832zM67.046 34.56l-5.971-1.349a2.5 2.5 0 01-1.8-3.29l5.837-16.11a2.5 2.5 0 012.902-1.586l2.626.593a2.5 2.5 0 011.922 2.804L70.07 32.487a2.5 2.5 0 01-3.024 2.073z" fill="#505050"/><path d="M42.177 54.225L39.44 51.04c-2.073-2.414-1.693-6.102.828-8.039l17.105-13.143a5.417 5.417 0 017.342.672l.901 1c1.973 2.19 1.887 5.567-.196 7.657l-15.27 15.33a5.421 5.421 0 01-7.974-.29zM27 65.5h7.5c6.075 0 11 4.925 11 11v.5c0 7.456-6.044 13.5-13.5 13.5h-4c-5.799 0-10.5-4.701-10.5-10.5v-5a9.5 9.5 0 019.5-9.5z" fill="#505050"/><path d="M38.846 68.534l1.962.388a5.5 5.5 0 014.328 6.463L41.02 96.183a3.5 3.5 0 01-4.113 2.754l-5.886-1.165a3.5 3.5 0 01-2.754-4.113l4.116-20.797a5.5 5.5 0 016.463-4.328z" fill="#505050"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>'),svgDataURL100('<g clip-path="url(#clip0)"><path d="M90.666 61.118l-12.9 7.656A7.5 7.5 0 0167.49 66.15l-7.656-12.9a8.5 8.5 0 012.972-11.647l12.04-7.145c7.362-4.368 16.871-1.942 21.24 5.42 4.369 7.361 1.942 16.87-5.42 21.24z" fill="#505050" stroke="#000"/><path d="M75.735 59.239l.376-.163-.086-.4a6.503 6.503 0 013.04-6.953l-.255-.43.255.43.157-.092a6.5 6.5 0 018.907 2.272l3.79 6.388c-.4.293-.817.57-1.253.828l-12.9 7.655a7.464 7.464 0 01-3.762 1.05l-1.917-3.23a4.5 4.5 0 011.573-6.166l1.564-.928c.167-.099.338-.186.511-.261z" fill="#E4E4E4" stroke="#000"/><ellipse cx="82" cy="61" rx="2" ry="1" transform="rotate(59.582 82.306 61.234)" fill="#000"/><path d="M83.544 55.877l2.674 6.64-.452-6.029-2.222-.611z" fill="#000"/><path d="M68.486 63.497l.333 3.497c.655 6.873-4.386 12.975-11.258 13.63l-9.422.897c-10.172.97-19.203-6.49-20.172-16.662l-.333-3.497c-.55-5.773 3.684-10.899 9.457-11.449l13.404-1.277c9.072-.864 17.126 5.79 17.99 14.86zM48.878 94.679l.324-6.113a2.5 2.5 0 012.94-2.328l16.863 3.04a2.5 2.5 0 012.053 2.592l-.143 2.688a2.5 2.5 0 01-2.44 2.367l-17.044.386a2.5 2.5 0 01-2.553-2.632z" fill="#505050" stroke="#000"/><path d="M59.475 64.16l4.053 1.097c3.071.832 4.83 4.096 3.833 7.115l-6.763 20.484a5.417 5.417 0 01-6.451 3.57l-1.307-.32c-2.862-.703-4.69-3.545-4.142-6.444L52.716 68.4a5.421 5.421 0 016.76-4.24zM34.73 57.592l6.423 3.872c5.203 3.137 6.878 9.897 3.74 15.1l-.257.428c-3.85 6.385-12.147 8.44-18.532 4.59l-3.426-2.064c-4.966-2.995-6.564-9.448-3.57-14.414l2.582-4.282a9.5 9.5 0 0113.04-3.23z" fill="#505050" stroke="#000"/><path d="M33.846 68.655l1.962.389a5.5 5.5 0 014.328 6.463L36.02 96.305a3.5 3.5 0 01-4.113 2.754l-5.886-1.165a3.5 3.5 0 01-2.754-4.113l4.116-20.798a5.5 5.5 0 016.463-4.328z" fill="#505050" stroke="#000"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>'),svgDataURL150('<path d="M85.472 99.5H66.5v-4H81a4.5 4.5 0 014.472 4zM74.31 76.886l-9.853 11.538a2.936 2.936 0 01-5.063-2.69l4.044-14.623c1.06-3.828 5.352-5.736 8.903-3.955 3.66 1.835 4.627 6.617 1.968 9.73z" fill="#AB4B2D" stroke="#491403"/><rect x="60" y="86" width="5" height="15" rx="3" transform="rotate(-28.816 59.68 86.09)" fill="#AB4B2D" stroke="#491403"/><path d="M24.666 66.902C55.324 84.799 79.036 83.574 105 39.098l-3.086-9.313c-2.338-1.945-10.914 0-10.914 0-3.832 6.563-49.85 38.634-70.146 26.786C14.805 53.04 8.13 44.894 5.144 39.098c1.551 9.243 11.75 23.266 19.522 27.804zM72.472 99.5H53.5v-4H68a4.5 4.5 0 014.472 4z" fill="#AB4B2D" stroke="#491403"/><path d="M89.395 71.002l-1.441-6.856 3.124-.657.689 3.275a3.693 3.693 0 01-2.372 4.238z" fill="#AB4B2D" stroke="#491403"/><rect x="47" y="86" width="5" height="15" rx="3" transform="rotate(-28.816 46.68 86.09)" fill="#AB4B2D" stroke="#491403"/><rect x="83" y="67" width="3" height="8" rx="2" transform="rotate(-92.949 82.908 66.87)" fill="#AB4B2D" stroke="#491403"/><path d="M64.442 78.642l-12.278 8.913a2.936 2.936 0 01-4.293-3.798l7.351-13.272c1.925-3.475 6.545-4.325 9.581-1.763 3.13 2.64 2.952 7.515-.361 9.92zM86.8 57.194l-2.23 7.87a1.353 1.353 0 01-2.636-.151l-1.31-8.075a3.169 3.169 0 116.176.356zM126.249 38.115l-28.225 1.919c-4.454.303-8.185-3.33-8.002-7.79l.258-6.286c.213-5.21 4.207-9.443 9.302-9.1 3.356.224 7.046.796 10.129 2.058 3.083 1.261 5.489 3.181 6.42 6.064.218.676.855 1.179 1.598 1.166 1.905-.033 5.307.176 8.715.44 4.284.332 6.65 5.08 4.39 8.757a5.846 5.846 0 01-4.585 2.772z" fill="#AB4B2D" stroke="#491403"/><path d="M130.806 36.257l-3.53-3.47-2.974 3.026-3.53-3.47-2.974 3.025-3.026-2.974" stroke="#fff"/><circle cx="110" cy="26" transform="rotate(-2.875 110.377 26.252)" fill="#491403" r="2"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h150v100H0z"/></clipPath></defs></svg>'),svgDataURL100('<g clip-path="url(#clip0)"><path d="M53.472 99.5H34.5v-4H49a4.5 4.5 0 014.472 4zM55.382 59.882l-4.717-5.18 2.36-2.15 2.254 2.475a3.693 3.693 0 01.103 4.855z" fill="#AB4B2D" stroke="#491403"/><rect x="28" y="86" width="5" height="15" rx="3" transform="rotate(-28.816 27.68 86.09)" fill="#AB4B2D" stroke="#491403"/><path d="M0 94.743c2.666-.055 5.09-.29 7.05-.695 34.762-7.195 53.215-19.184 42.777-69.615l-18.336.22C32.971 31.8 21.307 80.089 0 88.13v6.613z" fill="#AB4B2D" stroke="#491403"/><path d="M0 95.574c9.869 1.025 23.145.078 29.483-4.021-6.567 1.8-18.866.445-26.031-1.554A20.413 20.413 0 010 88.682v6.892z" fill="#AB4B2D" stroke="#491403"/><rect x="48" y="60" width="3" height="8" rx="2" transform="rotate(-123.404 47.696 59.608)" fill="#AB4B2D" stroke="#491403"/><path d="M42.594 76.114L32.378 87.33a2.936 2.936 0 01-4.974-2.85l4.509-14.486c1.18-3.792 5.532-5.562 9.024-3.668 3.6 1.95 4.413 6.761 1.657 9.788zM50.369 49.503l-1.125 8.102a1.353 1.353 0 01-2.633.212L44.201 50a3.169 3.169 0 116.168-.497zM59.22 38.73L33.788 26.343c-4.014-1.955-5.441-6.962-3.062-10.74l3.353-5.324c2.778-4.412 8.35-6.094 12.598-3.261 2.799 1.866 5.714 4.2 7.76 6.828 2.046 2.63 3.176 5.491 2.548 8.455-.147.695.155 1.448.806 1.807 1.669.92 4.515 2.795 7.34 4.72 3.55 2.42 3.238 7.717-.553 9.78a5.847 5.847 0 01-5.356.123z" fill="#AB4B2D" stroke="#491403"/><path d="M64.097 39.387l-1.333-4.767-4.086 1.144-1.334-4.767-4.086 1.144-1.143-4.086" stroke="#491403"/><circle cx="51" cy="21" transform="rotate(26.982 51.361 20.54)" fill="#491403" r="2"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>'),svgDataURL100('<g clip-path="url(#clip0)"><path d="M0 95.5h.5c2.169 0 4.612.104 7.264.217 20.58.879 53.768 2.295 69.539-40.288l-2.024-13.863c-2.46-1.786-12.52 2.694-12.52 2.694C59.617 50.558 22.213 89.562 0 86.956V95.5z" fill="#AB4B2D" stroke="#491403"/><path d="M53.472 99.5H34.5v-4H49a4.5 4.5 0 014.472 4zM63.037 90.751l-.502-6.987 3.184-.23.24 3.338a3.693 3.693 0 01-2.922 3.879z" fill="#AB4B2D" stroke="#491403"/><rect x="23" y="92" width="5" height="15" rx="3" transform="rotate(-61.44 22.678 92.07)" fill="#AB4B2D" stroke="#491403"/><rect x="58" y="82" width="3" height="8" rx="2" transform="rotate(-64.565 57.666 82.434)" fill="#AB4B2D" stroke="#491403"/><path d="M39.65 91.56l-14.965 2.495a2.936 2.936 0 01-2.145-5.316l12.503-8.593c3.274-2.25 7.788-.948 9.36 2.7 1.622 3.759-.714 8.042-4.753 8.715zM63.505 74.92l-3.271 7.496a1.353 1.353 0 01-2.592-.506l-.209-8.177a3.169 3.169 0 116.072 1.186zM78.629 72.973l-15.13-23.904c-2.387-3.773-.97-8.783 3.039-10.747l5.65-2.767c4.683-2.294 10.306-.798 12.433 3.845 1.4 3.059 2.654 6.575 3.014 9.887.359 3.312-.184 6.341-2.276 8.533-.49.514-.628 1.313-.263 1.96.936 1.66 2.373 4.751 3.764 7.873 1.748 3.925-1.3 8.267-5.61 8.031a5.847 5.847 0 01-4.621-2.711z" fill="#AB4B2D" stroke="#491403"/><path d="M82.433 76.094l1.37-4.756-4.077-1.174 1.37-4.757-4.077-1.174 1.174-4.077" stroke="#491403"/><ellipse cx="82" cy="53" rx="2" ry="1" transform="rotate(58.683 81.501 53.366)" fill="#491403"/><path d="M0 95.812c9.74 2.254 26.944 2.228 34.554-2.437-6.608 1.642-18.87-.01-25.986-2.18-2.974-.908-5.838-2.425-8.568-4.4v9.017z" fill="#AB4B2D" stroke="#491403"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>'),svgDataURL100('<g clip-path="url(#clip0)"><path d="M53.472 99.5H34.5v-4H49a4.5 4.5 0 014.472 4zM66.255 65.34l-3.57-6.028 2.747-1.627 1.705 2.88a3.693 3.693 0 01-.882 4.775zM0 88.26c2.605.48 5.01.74 7 .74 35.5 0 56-8 56-59.5L45 26c0 7.438-22.031 53.958-45 55.935v6.325z" fill="#AB4B2D" stroke="#491403"/><path d="M78.014 34.974l-27.928-4.51c-4.407-.712-7.22-5.092-6.035-9.397l1.672-6.065c1.385-5.027 6.232-8.247 11.118-6.763 3.22.978 6.684 2.37 9.402 4.294 2.719 1.926 4.628 4.34 4.883 7.359.06.708.567 1.341 1.293 1.497 1.864.399 5.13 1.37 8.391 2.398 4.098 1.291 5.33 6.451 2.298 9.523a5.847 5.847 0 01-5.094 1.664z" fill="#AB4B2D" stroke="#491403"/><rect x="28" y="86" width="5" height="15" rx="3" transform="rotate(-28.816 27.68 86.09)" fill="#AB4B2D" stroke="#491403"/><path d="M0 90.667c8.385 4.494 19.416 8.283 26.249 7.266-6.724-1.076-17.361-7.396-23.059-12.18A25.98 25.98 0 010 82.543v8.124z" fill="#AB4B2D" stroke="#491403"/><rect x="59" y="64" width="3" height="8" rx="2" transform="rotate(-111.71 58.783 63.513)" fill="#AB4B2D" stroke="#491403"/><path d="M45.441 78.642l-12.277 8.913a2.936 2.936 0 01-4.293-3.798l7.351-13.272c1.925-3.475 6.545-4.325 9.581-1.763 3.13 2.64 2.952 7.515-.361 9.92zM59.356 53.1l.42 8.17a1.353 1.353 0 01-2.545.704l-3.838-7.224a3.169 3.169 0 115.963-1.65z" fill="#AB4B2D" stroke="#491403"/><path d="M82.873 34.193l-2.654-4.178-3.581 2.276-2.655-4.178-3.58 2.275-2.276-3.581" stroke="#491403"/><circle cx="65" cy="20" transform="rotate(10.187 65.234 19.83)" fill="#491403" r="2"/></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h100v100H0z"/></clipPath></defs></svg>'),svgDataURL('<svg width="897" height="446" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M591 94v306.861L705.121 446h187.198L648.398 94H591z" fill="#30252F"/><path d="M689 285.352a20.947 20.947 0 00-13.605 5.436L504.201 446H689V285.352z" fill="#4E380E"/><path d="M591 350.769L439.075 213.027 518.467 94H591v256.769z" fill="#4B3A4A"/><path d="M408.395 210.788A20.945 20.945 0 01422 205.352V446H171.973c-3.942-7.843-3.112-18.041 4.628-25.058l231.794-210.154z" fill="#632F19"/><path d="M703.605 290.788c-8.003-7.256-20.207-7.256-28.21 0L504.201 446h370.598L703.605 290.788z" fill="#3E2D0B"/><path d="M522.749 87.581l-5.116 7.67c7.481 8.072 15.619 12.979 29.867 16.249 30.5 7 52.5 0 36 39s-25.5 83-4 89 50 36 50 46.5 11 28.5 25.5 25.5 22-15 20-25.5-34-26-35.5-43.5S620 223 609 212c-13.037-13.037 3.357-30.96 11-42 11.255-16.257 10.346-33.557 9.733-45.236-.816-15.535 6.187-23.099 19.267-29.264l-4.5-7c-40 6.75-82.5 6.75-121.751-.919z" fill="#D33E1D"/><path d="M689 285.352a20.947 20.947 0 00-13.605 5.436L504.201 446H689V285.352zM229 247.352a20.951 20.951 0 00-14.605 5.436L1.288 446H229V247.352z" fill="#4E380E"/><path d="M233.605 252.788l64.233 58.236L220 381.595V247.352a20.947 20.947 0 0113.605 5.436z" fill="#3E2D0B"/><path d="M436.605 210.788L698.106 446H422V205.352a20.951 20.951 0 0114.605 5.436z" fill="#4F2614"/><path d="M422 205.352a20.947 20.947 0 00-13.605 5.436L148.963 446H422V205.352z" fill="#632F19"/></svg>')]);R.push(window.kongRight);const{cleanUp:B,render:V}=z(function(t){if(!a)switch(t){case 37:case 65:y("left","kong");break;case 39:case 68:y("right","kong");break;case 40:case 83:S("kong");break;case 32:C("kong");break;default:return}},function(t){switch(t){case 40:case 83:E("kong");break;default:return}},function(){C("kong")},R);b({kong:h,trex:g}),A()},D=t(),L=t(),H=t(),U=t(),M=t(),F=t(),W=t(),P=(t,e)=>{return{initialKongState:{currentAction:D,location:t,direction:W,health:100,initialHealth:100},initialTrexState:{currentAction:D,location:e,direction:F,health:100,initialHealth:100}}},z=(t,e,n,i)=>{const[l,r]=h(),s=o("div");s.className="progress-wrapper";const[u,g]=d("Kong Health"),[f,p]=d("TRex Health"),m=document.getElementById("root");m.appendChild(l),s.appendChild(u),s.appendChild(f),m.appendChild(s);const w=o("div"),[b,k,v,y,S,I,E,T,x]=i,C=[];function A(t,e,n,i,o){r.fillStyle="green",r.fillRect(i.location*-n+300,t-110,e,110),function(t){const e=T.height/T.width*a.clientWidth;r.drawImage(T,50*(50-t)-1500,a.clientHeight-110-e,a.clientWidth,e)}(i.location),R("kong",i,n),R("trex",o,n,i.location*-n+300)}function R(t,e,n,i){let a,o=1;if("trex"==t){switch(e.currentAction){case U:a=y;break;case L:a=S;break;case M:a=I;break;case D:default:a=E}o=-1,r.scale(-1,1),r.translate(-a.width,0),r.drawImage(a,o*(i+e.location*n-a.width+n),l.height-2*n)}else{switch(e.currentAction){case U:a=b;break;case L:a=k;break;case M:a=v;break;case D:default:a=x}e.direction==F&&(o=-1,r.scale(-1,1),o=-1,r.translate(-a.width,0)),r.drawImage(a,o*(3*n),l.height-2*n)}r.setTransform(1,0,0,1,0,0)}return C.push(c(window,"keydown",e=>t(e.which))),C.push(c(window,"keyup",t=>e(t.which))),C.push(c(window,"click",t=>n(t))),{cleanUp:()=>{C.forEach(t=>t()),m.removeChild(l),m.removeChild(s),m.removeChild(w)},render:function(t,e,n,i){return new Promise(o=>{i?function(t){const e=document.createElement("h2"),n=document.createElement("p"),i="kong"===t?x:E;w.className="win",e.innerHTML="kong"===t?"Congratulations!":"Sorry...",t=t[0].toUpperCase()+t.slice(1),n.innerHTML=`${t} wins`,w.appendChild(e),w.appendChild(n),document.getElementById("root").appendChild(w),r.drawImage(T,0,0,a.clientWidth,a.clientHeight),r.drawImage(i,a.clientWidth/2.5,a.clientHeight/2.5,300,300)}(i):(l.height=a.clientHeight,l.width=100*t,r.fillStyle="#7E8390",r.fillRect(0,0,r.canvas.width,r.canvas.height),A(l.height,l.width,100,e,n),function(t,e){g.style.width=t.health+"%",t.health<60&&g.classList.add("below-60"),t.health<30&&g.classList.add("below-30"),p.style.width=e.health+"%",e.health<60&&p.classList.add("below-60"),e.health<30&&p.classList.add("below-30")}(e,n),o())})}}},K=()=>{const t={};let e=!1;const n=()=>t;return window.getState=n,{getState:n,getSnapshot:()=>(e=!1,t),isUpdated:()=>e,setState:(n,i=s)=>{let a=n;return"function"==typeof n&&(a=n(t)),a&&a!=t?(a&&(Object.assign(t,a),e=!0),i(t),!0):(i(t),!1)}}};(()=>{let t=0;const{playMusic:e,pizzaSound:a,punchSound:o,blockSound:c}=function(){let t,e,a={drum:1,synth:1};function o(n,i,a,o,c,l=.5){var r=t.createOscillator();r.type=i;let s=t.createGain();s.gain.cancelScheduledValues(n),s.gain.setValueAtTime(0,n),s.gain.linearRampToValueAtTime(l,n+.01),s.gain.linearRampToValueAtTime(0,n+a),r.frequency.setValueAtTime(o,n),c&&r.frequency.exponentialRampToValueAtTime(c,n+a),r.connect(s).connect(e).connect(t.destination),r.start(n),r.stop(n+a)}function c(t){o(t,"sine",1,200)}function l(t){const e=[200,236,284,300];o(t,"triangle",10*i()+1,e[n(i()*e.length)])}function r(t,e){return a[e]+t}function s(e,n,i){const o=t.currentTime;for(;o+2>a[i];){const t=r(e,i);n(t),a[i]=t}}function d(){s(.5,c,"drum");const t=[.25,.5,.75,1,1.25,1.5];s(t[n(i()*t.length)],l,"synth")}return{playMusic:()=>(t=new(window.AudioContext||window.webkitAudioContext),(e=t.createGain()).gain.value=.5,setInterval(d,100),!0),pizzaSound(){o(t.currentTime,"triangle",.25,350,440)},punchSound(){o(t.currentTime,"square",.15,200,100)},blockSound(){o(t.currentTime,"triangle",.5,100,50,5)}}}(),l=[t=>g("intro",t),t=>e()&&t(),t=>m(a,t),t=>g("pre-lvl-3",t),t=>R(o,c,t),()=>g("credits")];!function e(){r(()=>l[t++](e))}()})()})();</script>