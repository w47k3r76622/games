<html><head><title></title><style type="text/css">.main-c{cursor: none;background-color: white;border:2px solid #000000;}</style>
	<script type="text/javascript">
	(function(){$={};var r,v,y,w=60,d,b,n=[],p=0,f=0,D=[],A,q,z,C,i=setInterval,u=clearInterval;function k(){var l=10;D=[];for(var c=0;c<l;c++){D.push({timeToGeneratel:5000+(c*1000),lpeed:5+c,lToGenerate:1+c})}}function o(){A=D.shift();q=i(function(){A=D.shift()},30000)}function g(){h();if(!f){v.font="30px Arial";v.strokeText("Enter to start",(r.width+250)/3,r.height/2)}else{if(!p){if(!C.isAlive()){p=1;f=0;u(z);u(q);E()}m();t();x()}}v.drawImage(y.getImage(),y.x,y.y);setTimeout(g,w)}function a(){var G=0,s=A.lToGenerate;while(G++<s){var l=B();n.push(l)}}function B(){var l={x:r.width,y:Math.floor(Math.random()*(r.height-r.height/4))},c=new $.Lizard({speed:A.lpeed,origin:l,target:{x:C.x+(C.width/2),y:C.y+(C.height/2)}});return c}function m(){C.move(b.getKeys());C.draw(v)}function x(){v.beginPath();for(var l=0;l<C.rocks.length;l++){var c=$.intersectWithArray(C.rocks[l],n);li=c.e;if(!li){C.rocks[l].draw(v)}else{if(li.isAlive()){li.hurt()}else{n[c.i].energyBar=null;li.ad(function(){n.splice(c.i,1)})}C.rocks.splice(l,1)}}v.fill()}function t(){for(var c=0;c<n.length;c++){n[c].draw(v,A.lpeed);if(n[c].x<200){C.health-=0.5;n.splice(c,1)}}}function E(){n=[];k();o();r=document.getElementById("c");r.height=600;r.width=1000;y=new $.Cursor();C=new $.Boy(r.width,r.height);v=r.getContext("2d");a();z=i(function(){a()},A.timeToGeneratel);e()}function F(){E();g()}function e(){b=new $.kel({element:document,start:function(){f=1;p=0}});d=new $.mel({element:r,onMouseMove:j,onClick:function(c,l,s){C.shot({x:c,y:l})}})}function h(){v.fillStyle="green";v.fillRect(0,0,r.width,r.height)}function j(c,l){y.move({x:c,y:l})}$.init=F}());$.ImageFactory=(function(){var b="resources/img/",d=".png",c={};function a(e){var f=null;if(!c[e+d]){f=new Image();f.src=b+e+d;c[e+d]=f}else{f=c[e+d]}return f}return{getImg:a}}());$.Sprite=(function(){function a(b,c){var d=$.ImageFactory.getImg(b);return{image:d,pos:c}}return{getSprite:a}}());$.intersect=function(c,d){return(Math.abs(c.x-d.x)<(c.width+d.width)/2)&&(Math.abs(c.y-d.y)<(c.height+d.height)/2)};$.intersectWithArray=function(b,c){var a=0;for(var d=0;d<c.length;d++){if($.intersect(b,c[d])){a={e:c[d],i:d};break}}return a};$.Shape=(function(){function a(){}a.prototype.speed=1;a.prototype.x=10;a.prototype.y=10;a.prototype.width=32;a.prototype.height=32;a.prototype.vy=0;a.prototype.vx=0;a.prototype.id="";a.prototype.calculateAngle=function(b,c){return Math.atan2(c-this.y,b-this.x)*180/Math.PI};a.prototype.calculateDirection=function(b){var c=this.calculateAngle(b.target.x,b.target.y),d=c*Math.PI/180;this.vx=Math.cos(d)*this.speed;this.vy=Math.sin(d)*this.speed};return a})();$.EnergyBar=(function(b){function a(c){this.x=c.x;this.y=c.y-(this.height*4);this.width=(c.health)*10;this.height=5;this.strokeColor="black";this.fillColor="red"}a.prototype=Object.create(b.prototype);a.prototype.move=function(c){this.x=c.x;this.y=c.y-(this.height*4)};a.prototype.draw=function(d,c,e){d.beginPath();d.strokeStyle=this.strokeColor;d.rect(this.x,this.y,e?(c||1)*10:this.width,this.height);d.stroke();d.closePath();d.beginPath();d.fillStyle=this.fillColor;d.fillRect(this.x,this.y,(c||1)*10,this.height);d.closePath()};return a})($.Shape);$.Boy=(function(a){function b(e,d){var c=this;c.x=10;c.y=d/2;c.health=5;c.rocks=[];c.spd=15;c.angle=0;c.frame=0;c.underFire=0;c.cH=d;c.cW=e;c.height=64;c.width=40;c.spriteName="boy";c.frame=0;c.eb=new $.EnergyBar(c)}b.prototype=Object.create(a.prototype);b.prototype.shot=function(f){var d=this,c=new $.Rock({origin:{x:this.x+(this.width/2),y:this.y+(this.height/2)},target:{x:f.x<200?200:f.x,y:f.y}},{height:this.cH,width:this.cW,removeRockFromCanvas:function(e){var g=d.rocks.indexOf(e);if(g>-1){d.rocks.splice(g,1)}}});if(this.rocks.length<1){this.rocks.push(c)}};b.prototype.getSprite=function(){return $.Sprite.getSprite(this.spriteName,{x:!this.frame?0:(this.width*this.frame),y:0})};b.prototype.move=function(c){if(c[$.KC.UP]){if(this.y>0){this.y-=this.spd}}if(c[$.KC.DOWN]){if(this.y<(this.cH-this.height-10)){this.y+=this.spd}}this.eb.move(this)};b.prototype.isAlive=function(){return this.health>0};b.prototype.draw=function(c){var d=this.getSprite();c.drawImage(d.image,d.pos.x,d.pos.y,this.width,this.height,this.x,this.y,this.width,this.height);this.eb.draw(c,this.health)};return b})($.Shape);$.Cursor=(function(a){function b(){this.x=200}b.prototype=Object.create(a.prototype);b.prototype.move=function(c){if(c.x>200){this.x=c.x}this.y=c.y};b.prototype.getImage=function(){return $.ImageFactory.getImg("pointer")};return b})($.Shape);$.Rock=(function(b){var a=null;function c(d,e){a=d;this.canvas=e;this.speed=50;this.x=a.origin.x;this.y=a.origin.y;this.size=4;this.calculateDirection(a)}c.prototype=Object.create(b.prototype);c.prototype.move=function(){this.x+=this.vx;this.y+=this.vy;if(this.y>=this.canvas.height||this.y<=0||this.x<=0||this.x>=this.canvas.width){this.canvas.removeRockFromCanvas(this)}};c.prototype.draw=function(d){this.move();d.arc(this.x,this.y,this.size,0,Math.PI*2,true);d.closePath()};return c})($.Shape);$.Lizard=(function(b){function a(c){this.vectors=c;this.x=this.vectors.origin.x;this.y=this.vectors.origin.y;this.health=3;this.speed=c.speed;this.maxHealth=5;this.calculateDirection(this.vectors);this.width=100;this.height=44;this.frame=0;this.spriteName="lizard";this.ibh=0;this.isD=0;this.sprite=$.Sprite.getSprite(this.spriteName,this.frame);this.eb=new $.EnergyBar(this);var e=this;var d=setInterval(function(){if(!e.ibh&&!e.isD){e.frame+=1;if(e.frame==4){e.frame=0}}},100)}a.prototype=Object.create(b.prototype);a.prototype.move=function(){this.sprite=$.Sprite.getSprite(this.spriteName,{x:!this.frame?0:(this.width*this.frame),y:0});if(this.isD||this.ibh){return}this.x+=this.vx;this.eb.move(this)};a.prototype.hurt=function(){if(!this.ibh&&!this.isD){var c=this;this.ah();c.health-=1}};a.prototype.ah=function(c){var e=this,d=this.frame;this.ibh=1;this.frame=0;this.spriteName="lizard_hurts";setTimeout(function(){e.spriteName="lizard";e.frame=0;e.ibh=0;if(c){c()}},300)};a.prototype.ad=function(c){if(!this.ibh&&!this.isD){var e=this;this.spriteName="lizard_dead";this.isD=1;this.frame=0;var d=setInterval(function(){e.frame+=1;if(e.frame>=2){e.frame=0;clearInterval(d);if(c){c()}}},200)}};a.prototype.isAlive=function(){return this.health>1};a.prototype.draw=function(d,c){this.speed=c;this.move();d.drawImage(this.sprite.image,this.sprite.pos.x,this.sprite.pos.y,this.width,this.height,this.x,this.y,this.width,this.height);this.eb.draw(d,this.health)};return a})($.Shape);$.mel=function(c){function b(){g()}function g(){c.element.addEventListener("mousemove",d,false);c.element.addEventListener("mousedown",f,false);document.addEventListener("contextmenu",h,false)}function d(i){c.onMouseMove(e(i),a(i))}function f(i){c.onClick(e(i),a(i),i.button)}function h(i){i.preventDefault()}function e(i){return i.clientX-c.element.offsetLeft}function a(i){return i.clientY-c.element.offsetTop}b()};$.KC={UP:87,DOWN:83,LEFT:37,RIGHT:39,R:114,r:82,ENTER:13,SPACE:32};$.kel=function(b){var c=[];function f(){e()}function e(){b.element.addEventListener("keyup",d,false);b.element.addEventListener("keydown",g,false)}function g(h){c[h.keyCode]=1;if(h.keyCode==$.KC.ENTER){b.start()}}function d(h){c[h.keyCode]=0}function a(){return c}f();return{getKeys:a}};
</script></head><body onload="$.init();"><canvas id="c" class="main-c"></canvas></body></html>