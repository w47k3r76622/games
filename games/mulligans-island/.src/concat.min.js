'use strict';var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},c="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function l(a,b){if(b){var d=c;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];f in d||(d[f]={});d=d[f]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&aa(d,a,{configurable:!0,writable:!0,value:b})}}
l("String.prototype.endsWith",function(a){return a?a:function(a,d){if(null==this)throw new TypeError("The 'this' value for String.prototype.endsWith must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.endsWith must not be a regular expression");var b=this+"";a+="";void 0===d&&(d=b.length);d=Math.max(0,Math.min(d|0,b.length));for(var f=a.length;0<f&&0<d;)if(b[--d]!=a[--f])return!1;return 0>=f}});
function ba(){ba=function(){};c.Symbol||(c.Symbol=ca)}var ca=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function r(){ba();var a=c.Symbol.iterator;a||(a=c.Symbol.iterator=c.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return da(this)}});r=function(){}}function da(a){var b=0;return ea(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}
function ea(a){r();a={next:a};a[c.Symbol.iterator]=function(){return this};return a}function fa(a,b){r();a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var f=d++;return{value:b(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e}l("Array.prototype.keys",function(a){return a?a:function(){return fa(this,function(a){return a})}});
l("Object.values",function(a){return a?a:function(a){var b=[],e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&b.push(a[e]);return b}});l("Array.prototype.fill",function(a){return a?a:function(a,d,e){var b=this.length||0;0>d&&(d=Math.max(0,b+d));if(null==e||e>b)e=b;e=Number(e);0>e&&(e=Math.max(0,b+e));for(d=Number(d||0);d<e;d++)this[d]=a;return this}});
var ha="function"==typeof Object.assign?Object.assign:function(a,b){for(var d=1;d<arguments.length;d++){var e=arguments[d];if(e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(a[f]=e[f])}return a};l("Object.assign",function(a){return a||ha});function t(){this.entities=[];this.aa=!1}t.prototype.c=function(a){var b=this;Object.defineProperty(a,"z",{set:function(d){d!=a.S&&(a.S=d,b.aa=!0)},get:function(){return a.S}});a.z=void 0!==a.y?a.y:0;this.entities.push(a)};
t.prototype.Y=function(a){this.entities.forEach(function(b){void 0!==b.update&&b.update(a)});this.entities=this.entities.filter(function(a){return!0!==a.xa})};t.prototype.V=function(){this.aa&&(this.entities.sort(function(a,b){return a.S-b.S}),this.aa=!1)};t.prototype.R=function(){this.entities=[]};
function u(){var a=v,b=w;this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",a);this.canvas.setAttribute("height",b);this.canvas.style.width=2*a+"px";this.canvas.style.height=2*b+"px";this.canvas.style.backgroundColor="black";this.canvas.style["image-rendering"]="pixelated";document.getElementById("game").appendChild(this.canvas);this.b=this.canvas.getContext("2d");this.width=a;this.height=b;this.scale=2;this.C=new t;this.entities=new t;ia(this);ja(this);this.ia(performance.now())}
function ja(a){a.j={};["mulligan.png","palmsegment.png"].forEach(function(b){a.j[b]={};a.j[b].loaded=!1;b.endsWith(".png")||b.endsWith(".jpg")?(a.j[b].data=new Image,a.j[b].data.onload=function(){return a.j[b].loaded=!0},a.j[b].data.src=b):b.endsWith(".wav")||b.endsWith(".mp3")?(a.j[b].data=new Audio,a.j[b].data.src=b,a.j[b].data.load(),a.j[b].loaded=!0):console.assert(!1,"Unable to load "+b+" - unknown type")})}
function ka(a){return 0<Object.keys(a.j).length&&0==Object.values(a.j).every(function(a){return a.loaded})}function la(a){var b=x;console.assert(void 0!==b.j[a],"No asset loaded named '"+a+"'");return b.j[a].data}
u.prototype.ia=function(a){window.requestAnimationFrame(this.ia.bind(this));if(!ka(this)){var b=Math.min((a-(this.va||a))/1E3,.2);this.va=a;this.b.clearRect(0,0,this.width,this.height);void 0!==this.state&&this.state(b);this.V();this.Y(b);for(b=a=0;a<this.entities.entities.length&&b<this.C.entities.length;)this.entities.entities[a].z<this.C.entities[b].z?(this.entities.entities[a].G(),a++):(this.C.entities[b].G(),b++);for(;a<this.entities.entities.length;)this.entities.entities[a].G(),a++;for(;b<
this.C.entities.length;)this.C.entities[b].G(),b++;ma(this)}};u.prototype.c=function(a,b){b?this.C.c(a):this.entities.c(a)};u.prototype.Y=function(a){this.C.Y(a);this.entities.Y(a)};u.prototype.V=function(){this.C.V();this.entities.V()};u.prototype.R=function(){this.entities.R();this.C.R()};
function y(a){var b=x,d=void 0!==a.angle?a.angle*Math.PI/180:0,e=void 0!==a.m?a.m:"Arial",f=void 0!==a.fontSize?a.fontSize:12,g=void 0!==a.fontStyle?a.fontStyle:"",h=void 0!==a.color?a.color:"#FFF",n=void 0!==a.textAlign?a.textAlign.toLowerCase():"left",k=void 0!==a.textBaseline?a.textBaseline.toLowerCase():"bottom";b.b.save();b.b.translate(a.x,a.y);b.b.rotate(d);b.b.font=g+" "+f+"px "+e;b.b.fillStyle=h;b.b.textAlign=n;b.b.textBaseline=k;b.b.fillText(a.text,0,0);b.b.restore()}
function ia(a){a.wa={x:0,y:0};a.N={x:0,y:0};a.ma=!1;a.oa=!1;a.na=!1;a.pa=!1;window.addEventListener("mousemove",function(b){a.N.x+=b.za;a.N.y+=b.Aa;a.wa={x:b.clientX,y:b.clientY}});window.addEventListener("mousedown",function(b){0===b.button?(a.ma=!0,a.na=!0):2===b.button&&(a.oa=!0,a.pa=!0)});window.addEventListener("mouseup",function(b){0===b.button?a.ma=!1:2===b.button&&(a.oa=!1)});a.ba={a:"a",d:"d",p:"p",q:"q",s:"s",w:"w",arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right"," ":"space",
escape:"escape",enter:"enter"};a.keys={};a.i={};Object.keys(a.ba).forEach(function(b){return a.keys[b]=!1});window.addEventListener("keydown",function(b){na(a,b,!0)});window.addEventListener("keyup",function(b){na(a,b,!1)})}function na(a,b,d){var e=b.key.toLowerCase();void 0!==a.ba[e]&&(e=a.ba[e],a.i[e]=!1===a.keys[e]||void 0===a.keys[e],a.keys[e]=d,"up"!==e&&"down"!==e&&"left"!==e&&"right"!==e||b.preventDefault())}
function ma(a){a.N.x=0;a.N.y=0;a.na=!1;a.pa=!1;Object.keys(a.i).forEach(function(b){a.i[b]=!1})}var oa=0;
function z(a,b){this.x=a;this.y=b;this.P=0;this.id=oa++;for(a=this.y;a<this.y+95;a++)for(b=this.x-30;b<this.x+30;b++)"g"==A[1024*a+b]&&(A[1024*a+b]="s");switch(this.id%7){case 0:this.image="s";a={};this.v=(a.x=0,a.h=7,a.s0={x:0,h:7},a.s1={x:7,h:7},a.s2={x:14,h:7},a.n0={x:21,h:7},a.n1={x:28,h:7},a.n2={x:35,h:7},a.e1={x:42,h:7},a.e2={x:49,h:7},a.e0={x:56,h:3},a.w1={x:59,h:7},a.w2={x:66,h:7},a.w0={x:73,h:3},a);break;case 1:this.K=["The Captain:","Hey Little Buddy,","this comms terminal is offline.",
"Maybe the Instructor knows","how to turn it on."];this.v={x:76,h:9};break;case 2:this.K=["The Billionaire:","Really, Mulligan. Do hurry!"];this.v={x:85,h:7};break;case 3:this.K=["Her Guy:","I'm just here to be pretty."];this.v={x:92,h:7};break;case 4:this.K=["The YouTube Star:","Mulligan, I need to record","a video tonight. Hurry!"];this.v={x:99,h:6};break;case 5:this.K=["The Instructor:","This terminal seems to be","active! Maybe it controls","the others."];this.v={x:105,h:7};break;case 6:this.K=
["Carrie Ann:","I found some coconuts for pie!"],this.v={x:112,h:6}}}z.prototype.ja=function(){return"Press space to talk to me."};z.prototype.update=function(a){this.y!=this.z&&(this.z=this.y);B&&this!=B&&100>C(this,B)&&(D=this);if(this==B)for(this.P+=6*a;4<=this.P;)this.P-=4};
z.prototype.G=function(){if(this==B){var a=this.image;var b=0;this.O&&(b=[0,1,0,2][~~this.P]);a+=""+b;b=this.v[a].x;var d=0;a=this.v[a].h}else b=this.v.x,d=0,a=this.v.h;x.b.imageSmoothingEnabled=!1;x.b.drawImage(E,b,d,a,16,this.x-a,this.y-32,2*a,32)};
z.prototype.qa=function(){var a=this.K;x.b.fillStyle="white";F(B.x-78,B.y-50-5*a.length-5,156,10*a.length+10,5);for(var b=B.y-50-5*a.length+5,d=0;d<a.length;d++)y({text:a[d],x:B.x-(d?0:75),y:b+10*d,color:"black",m:"Arial",fontSize:10,fontStyle:"bold",textAlign:0==d?"left":"center",textBaseline:"middle"})};
function G(a,b,d){this.x=a;this.y=b;this.$=d?!0:!1;this.D=!1;this.state=0;this.id=H.length;0==this.id&&(this.state=1);H.push(this);for(a=this.y;a<this.y+95;a++)for(b=this.x-35;b<this.x+35;b++)"g"==A[1024*a+b]&&(A[1024*a+b]="s");this.F={};this.required=[];this.rules=[];switch(this.id){case 0:this.g=this.f=2;this.rules=[];this.F={_0_0_1_0:!0,_0_0_0_1:!0,_0_1_0_2:!0};break;case 1:this.f=2;this.g=4;this.rules=[{x:0,y:2,t:8}];break;case 2:this.f=2;this.g=4;this.rules=[{x:0,y:2,t:136}];break;case 3:this.g=
this.f=3;this.rules=[{x:0,y:1,t:76}];break;case 4:this.g=this.f=4;this.rules=[{x:1,y:1,t:204}];this.F={_2_1_3_1:!0,_1_2_2_2:!0,_2_3_3_3:!0};break;case 5:this.g=this.f=2;this.required=[{x:0,y:0}];break;case 6:this.g=this.f=3;this.required=[{x:0,y:0},{x:4,y:4}];break;case 7:this.g=this.f=5;this.rules=[{x:0,y:1,t:15},{x:1,y:3,t:2184},{x:2,y:3,t:2184}];this.F={_2_1_2_2:!0};break;case 8:this.g=this.f=5;this.rules=[{x:0,y:1,t:15},{x:1,y:3,t:2184},{x:2,y:3,t:2184}];this.F={_3_1_3_2:!0};break;case 9:this.g=
this.f=6;this.rules=[{x:4,y:0,t:34952},{x:2,y:2,t:8},{x:2,y:4,t:12}];break;case 10:this.g=this.f=6;this.rules=[{x:0,y:0,t:226},{x:4,y:0,t:12},{x:1,y:4,t:2184},{x:4,y:4,t:14}];break;case 11:this.g=this.f=5;this.rules=[{x:1,y:0,t:196},{x:1,y:3,t:14}];break;case 12:this.g=this.f=6;this.rules=[{x:0,y:0,t:142},{x:4,y:0,t:34952},{x:0,y:4,t:232}];break;case 13:this.g=this.f=5;this.rules=[{x:0,y:0,t:142},{x:3,y:0,t:34952},{x:0,y:3,t:232}];break;case 14:this.g=this.f=4;this.required=[{x:2,y:0},{x:4,y:2},{x:0,
y:4},{x:2,y:4},{x:6,y:6}];this.F={_0_0_1_0:!0,_0_0_0_1:!0,_2_1_3_1:!0,_2_2_2_3:!0};break;case 15:this.g=this.f=4;this.required=[{x:2,y:0},{x:4,y:2},{x:0,y:4},{x:2,y:4},{x:6,y:6}];this.F={_0_0_1_0:!0,_0_0_0_1:!0,_1_1_2_1:!0,_2_1_3_1:!0,_2_2_2_3:!0};break;case 16:this.f=6;this.g=7;this.rules=[{x:1,y:0,t:226},{x:1,y:2,t:204},{x:3,y:2,t:2244},{x:4,y:2,t:34952},{x:0,y:3,t:232},{x:1,y:5,t:78},{x:3,y:5,t:198}];break;case 17:this.g=this.f=2}this.I=0;this.J=this.g-1;this.L=this.f-1;this.M=0;this.H=this.f>
this.g?170/(this.f-1):170/(this.g-1);this.ca=~~((v-this.H*(this.f-1))/2);this.da=~~((w-this.H*(this.g-1))/2);this.start()}G.prototype.start=function(){this.path=[{x:this.I,y:this.J}];this.u=Array(this.f*this.g).fill(!1);this.u[this.J*this.f+this.I]=!0};function I(a,b,d,e,f){return a.F["_"+b+"_"+d+"_"+e+"_"+f]?!1:a.F["_"+e+"_"+f+"_"+b+"_"+d]?!1:!0}
G.prototype.update=function(){100>C(this,B)&&(D=this);if(D==this&&this.D)if(x.i.p&&x.keys.q&&pa(this),x.i.escape)2>this.state&&1<this.path.length?this.start():this.D=!1;else if(1==this.state){var a=this.path[this.path.length-1];if(a.x!=this.L||a.y!=this.M||1!=this.state||this.checked){var b={x:-1,y:-1};1<this.path.length&&(b=this.path[this.path.length-2]);var d=Object.assign({},a);if(x.i.a||x.i.left)--d.x;else if(x.i.s||x.i.down){if(this.$){pa(this);return}d.y+=1}else x.i.d||x.i.right?d.x+=1:(x.i.w||
x.i.up)&&--d.y;!this.u[d.y*this.f+d.x]&&0<=d.y&&0<=d.x&&d.x<this.f&&d.y<this.g&&I(this,a.x,a.y,d.x,d.y)?(this.u[d.y*this.f+d.x]=!0,this.checked=!1,this.path.push(d)):d.x==b.x&&d.y==b.y&&(this.u[a.y*this.f+a.x]=!1,--this.path.length)}else if(!this.ga&&!this.checked){this.ga=!0;this.checked=!1;a=new qa(this.f-1,this.g-1);b={x:2*this.I,y:2*this.J};J(a,b)&&(b=K(a,b),2!=b.type&&(b.type=3));b={x:2*this.L,y:2*this.M};J(a,b)&&(b=K(a,b),2!=b.type&&(b.type=4));for(b=0;b<this.rules.length;b++)d=this.rules[b],
a.Z(ra(d),new sa(d.t));for(b=0;b<this.required.length;b++)d=this.required[b],J(a,d)&&(a.B[d.y*a.width+d.x].required=!0);b={x:2*this.I,y:2*this.J};d=K(a,b);a.current={x:b.x,y:b.y};d.u=!0;for(b=1;b<this.path.length;b++){var e=this.path[b];d=a;var f=2*e.x;e=2*e.y;var g=d.current;do g=g.x>f?{x:g.x-1,y:g.y}:g.x<f?{x:g.x+1,y:g.y}:g.y<e?{x:g.x,y:g.y+1}:g.y>e?{x:g.x,y:g.y-1}:{x:g.x,y:g.y},K(d,g).u=!0;while(g.x!=f||g.y!=e);d.current={x:f,y:e}}a:{b=[];if(!(2>a.height||2>a.width))for(d=new L(~~(a.width/2),~~(a.height/
2));;){f=a;e=d;d:{g=e;for(var h={x:-1,y:0};h.y<g.height;h.y++)for(h.x=0;h.x<g.width;h.x++)if(0==g.A[h.y*g.width+h.x]){g=h;break d}g=h}if(g.x>=e.width||g.y>=e.height)f=null;else{h=new L(e.width,e.height);var n=[];n.push(g);for(ta(e,g);0<n.length;){g=n[0];n.splice(0,1);var k=ra(g);k=f.B[k.y*f.width+k.x];null!=k.ea&&h.Z(k.ea);ta(h,g);for(k=0;3>=k;k++){var p=ua(g,k),m;if(m=0>p.x||p.x>=e.width||0>p.y||p.y>=e.height?!1:!0)m=ra(g),m=ua(m,k),m=0>m.x||m.x>=f.width||0>m.y||m.y>=f.height?!1:!f.B[m.y*f.width+
m.x].u;m&&0==e.A[p.y*e.width+p.x]&&(ta(e,p),n.push(p))}}f=h}if(null==f)break;b.push(f)}for(d=0;d<b.length;d++)if(f=b[d],f.sa!=f.W&&0<f.W||0==va(f,0,f)){a=!1;break a}for(b=0;b<a.B.length;b++)if(a.B[b].required&&!a.B[b].u){a=!1;break a}a=!0}a?pa(D):wa("square",32.7);this.ga=!1;this.checked=!0}}};function xa(a){return 2==a.state?"green":a.u[a.M*a.f+a.L]?a.checked?"red":"yellow":"white"}function M(a,b){return a.ca+b*a.H}function N(a,b){return a.da+b*a.H}
G.prototype.ja=function(){if(!this.D)return"Press space to access terminal.";var a=["Terminal offline. Press space to return.","Terminal enabled. Use WASD to draw a path to the exit","Terminal online. Press space to return."];this.$&&(a=["Communication terminal offline. Press space to return.","Communication terminal online. Press S to send SOS.","Help is on the way!"]);return a[this.state]};
G.prototype.qa=function(){x.b.strokeStyle="#808080";x.b.lineWidth=10;F(B.x-105,B.y-105,210,210,10,!0);x.b.fillStyle=["#000000","#00ffff","#00ff00"][D.state];x.b.globalAlpha=.5;F(B.x-100,B.y-100,200,200,5);x.b.globalAlpha=1;if(this.$)y({text:"SOS",x:B.x,y:B.y,color:["#400000","#ff0000","#ffffff"][this.state],m:"Arial",fontSize:40,fontStyle:"bold",textAlign:"center",textBaseline:"middle"});else{x.b.save();x.b.setTransform(1,0,0,1,0,0);if(0<this.state){for(var a=0;a<this.g;a++)for(var b=0;b<this.f;b++)if(x.b.lineWidth=
10,x.b.strokeStyle="black",b<this.f-1&&I(this,b,a,b+1,a)&&(x.b.beginPath(),x.b.moveTo(M(this,b),N(this,a)),x.b.lineTo(M(this,b+1),N(this,a)),x.b.stroke()),a<this.g-1&&I(this,b,a,b,a+1)&&(x.b.beginPath(),x.b.moveTo(M(this,b),N(this,a)),x.b.lineTo(M(this,b),N(this,a+1)),x.b.stroke()),x.b.fillStyle="black",x.b.beginPath(),x.b.arc(M(this,this.I),N(this,this.J),11,0,2*Math.PI),x.b.fill(),x.b.beginPath(),x.b.arc(M(this,this.L),N(this,this.M),12,0,2*Math.PI),x.b.fill(),0<this.path.length){x.b.fillStyle=
xa(this);x.b.beginPath();x.b.arc(M(this,this.I),N(this,this.J),9,0,2*Math.PI);x.b.fill();x.b.beginPath();x.b.lineWidth=7;x.b.strokeStyle=xa(this);x.b.lineJoin="round";x.b.moveTo(M(this,this.I),N(this,this.J));for(var d=1;d<this.path.length;d++)x.b.lineTo(M(this,this.path[d].x),N(this,this.path[d].y));x.b.stroke();this.u[this.M*this.f+this.L]&&(x.b.fillStyle=xa(this),x.b.beginPath(),x.b.arc(M(this,this.L),N(this,this.M),10,0,2*Math.PI),x.b.fill())}x.b.fillStyle="black";for(a=0;a<this.rules.length;a++){b=
this.rules[a];d=this.ca+b.x*this.H+8;for(var e=this.da+b.y*this.H+8,f=0;4>f;f++)for(var g=0;4>g;g++)b.t&1<<4*(3-f)+(3-g)&&x.b.fillRect(d+4*g,e+4*f,3,3)}x.b.fillStyle="red";for(a=0;a<this.required.length;a++)b=this.required[a],x.b.fillRect(this.ca+b.x*this.H/2,this.da+b.y*this.H/2,2,2)}x.b.restore()}};function pa(a){wa("sine",523.25);a.state=2;a.id+1<H.length?H[a.id+1].state=1:O=!0}
G.prototype.G=function(){x.b.drawImage(E,118,4,6,12,this.x-6,this.y-24,12,24);x.b.globalAlpha=.5;switch(this.state){case 0:x.b.fillStyle="black";break;case 1:x.b.fillStyle="#00ffff";break;case 2:x.b.fillStyle="#00ff00"}x.b.fillRect(this.x-4,this.y-22,8,8);x.b.globalAlpha=1};function ya(){this.ra=!0}ya.prototype.update=function(){1E4!=this.z&&(this.z=1E4)};
ya.prototype.G=function(){var a=this.ra?"Use WASD keys to move Mulligan":"";null!=D&&(a=D.ja(),this.ra=!1,D.D&&D.qa());!O||null!=D&&D.D?(x.b.save(),x.b.shadowColor="black",x.b.shadowOffsetX=1,x.b.shadowOffsetY=1,y({text:a,x:B.x,y:B.y+110,color:"#ddffdd",m:"Arial",fontSize:10,fontStyle:"bold",textAlign:"center",textBaseline:"middle"})):(x.b.save(),x.b.shadowColor="black",x.b.shadowOffsetX=1,x.b.shadowOffsetY=1,y({text:"You saved us Mulligan!",x:B.x,y:B.y,color:"#ddffdd",m:"Arial",fontSize:26,fontStyle:"bold",
textAlign:"center",textBaseline:"middle"}),y({text:"Hit space to restart",x:B.x,y:B.y+30,color:"#ddffdd",m:"Arial",fontSize:20,fontStyle:"bold",textAlign:"center",textBaseline:"middle"}));x.b.restore()};var za=null,P=null,Aa=null,Ba=null;
function Ca(a,b){this.x=a;this.y=b;this.l=0;za||(za=la("palmsegment.png"),P=document.createElement("canvas"),Aa=P.getContext("2d"),P.width=8,P.height=8,Aa.drawImage(za,0,0),Ba=x.b.createPattern(P,"repeat"));for(a=this.y-2;a<this.y+1;a++)for(b=this.x-6;b<this.x+6;b++)A[1024*a+b]="w";this.offsetX=-25+50*R();this.X=75+30*R();this.ta=-20;this.ua=-10;this.T=30+20*R();this.U=30+20*R();this.ka=30+20*R();this.la=30+20*R()}
Ca.prototype.update=function(a){a*=2;var b=0;0<this.l&&(this.l=Math.max(0,this.l-a),.25>R()&&(b=1));this.l=Math.min(10,this.l+(S+b)*a)};
function T(a,b){x.b.fillStyle="green";x.b.beginPath();x.b.moveTo(0,0);x.b.quadraticCurveTo(.48*a,0,.37*a,0+b);x.b.quadraticCurveTo(.24*a,0,0,0);x.b.fill();x.b.fillStyle="#004000";x.b.beginPath();x.b.moveTo(0,0);x.b.quadraticCurveTo(.24*a,0,.37*a,0+b);x.b.quadraticCurveTo(.27*a,.77*b,.29*a,.64*b);x.b.lineTo(.27*a,.77*b);x.b.quadraticCurveTo(.13*a,.52*b,.17*a,.42*b);x.b.lineTo(.13*a,.52*b);x.b.quadraticCurveTo(-(.1*a),0,0,0);x.b.fill()}
Ca.prototype.G=function(){if(!(this.x<B.x-v/2-50||this.x>B.x+v/2+50||this.y<B.y-w/2||this.y>B.y+w/2+this.X+50)){x.b.save();var a=this.x+this.offsetX+3*this.l+this.ta+20,b=this.y-this.X+this.ua;x.b.translate(a,b);x.b.rotate((15-3*this.l)*Math.PI/180);T(this.T,this.T);x.b.rotate((7-3*this.l)*Math.PI/180);T(-this.U,this.U);x.b.restore();x.b.save();x.b.strokeStyle=Ba;x.b.lineWidth=8;x.b.shadowBlur=2;x.b.shadowColor="black";x.b.beginPath();x.b.moveTo(this.x,this.y);x.b.lineTo(this.x,this.y-30+2*this.l);
x.b.quadraticCurveTo(this.x,this.y-this.X,this.x+this.offsetX+3*this.l,this.y-this.X);x.b.stroke();x.b.shadowBlur=0;x.b.translate(a,b);x.b.rotate((-30-3*this.l)*Math.PI/180);T(this.T,this.T);x.b.rotate((60-3*this.l)*Math.PI/180);T(-this.U,this.U);x.b.rotate((-30-3*this.l)*Math.PI/180);T(-this.ka,this.ka);T(this.la,this.la);x.b.restore()}};function Da(a,b){this.x=a;this.y=b;this.color=Ea("g")}Da.prototype.update=function(){};
Da.prototype.G=function(){this.x<B.x-v/2||this.x>B.x+v/2||this.y<B.y-w/2||this.y>B.y+w/2+6||(x.b.strokeStyle=this.color,x.b.lineWidth=2,x.b.beginPath(),x.b.moveTo(this.x,this.y),x.b.lineTo(this.x,this.y-6),x.b.stroke())};function sa(a){this.data=a}function Fa(a){for(var b=0,d=0;16>d;d++)0!=(a.data&1<<d)&&b++;return b}function Ga(a,b){this.u=!1;this.ea=null;this.required=!1;this.type=0==a%2&&0==b%2?0:1==a%2&&1==b%2?2:1}
function ua(a,b){a={x:a.x,y:a.y};switch(b){case 0:a.y--;break;case 1:a.x++;break;case 2:a.y++;break;case 3:a.x--}return a}function L(a,b){this.width=a;this.height=b;this.A=[];this.rules=[];if(!(0>=this.width||0>=this.height)){for(var d=0;d<a;d++)for(var e=0;e<b;e++)this.A[e*this.width+d]=0;this.W=this.sa=0}}L.prototype.Z=function(a){this.W+=Fa(a);this.rules.push(a)};function ta(a,b){a.sa++;a.A[b.y*a.width+b.x]=1}
function va(a,b,d){if(b==a.rules.length)return 1;for(var e=a.rules[b],f=Fa(e),g=0;g<a.width+3;g++)for(var h=-3;h<a.height+3;h++){var n=new L(d.width,d.height),k=n,p=d;k.width=p.width;k.height=p.height;if(!(0>=k.width||0>=k.height)){k.A=[];for(var m=0;m<k.width;m++)for(var q=0;q<k.height;q++)k.A[q*k.width+m]=p.A[q*k.width+m]}k=!0;for(m=p=0;4>m&&k;m++)for(q=0;4>q;q++)if(!(0>m+g||0>q+h||m+g>=a.width||q+h>=a.height)&&0!=(e.data&1<<4*(3-q)+(3-m))){if(0==n.A[(q+h)*a.width+m+g]){k=!1;break}n.A[(q+h)*a.width+
m+g]=0;p++}if(k&&p==f)if(k=va(a,b+1,n),1==k){a:{for(k=0;k<n.width;k++)for(p=0;p<n.height;p++)if(0!=n.A[p*n.width+k]){n=!0;break a}n=!1}if(!n)return 2}else if(2==k)return k}return 0}function qa(a,b){if(!(0>a||0>b||10<a||10<b))for(this.current={x:-1,y:-1},this.width=2*a+1,this.height=2*b+1,this.B=[],a=0;a<this.width;a++)for(b=0;b<this.height;b++)this.B[b*this.width+a]=new Ga(a,b)}qa.prototype.Z=function(a,b){J(this,a)&&(this.B[a.y*this.width+a.x].ea=b)};
function J(a,b){return 0>b.x||b.x>=a.width||0>b.y||b.y>=a.height?!1:!0}function K(a,b){return J(a,b)?a.B[b.y*a.width+b.x]:null}function ra(a){return{x:2*a.x+1,y:2*a.y+1}}var Ha=!1,B=null,H=[],D=null,O=!1,Ia=!1,S=0,U=0;function F(a,b,d,e,f,g){x.b.beginPath();x.b.moveTo(a+f,b);x.b.arcTo(a+d,b,a+d,b+f,f);x.b.arcTo(a+d,b+e,a+d-f,b+e,f);x.b.arcTo(a,b+e,a,b+e-f,f);x.b.arcTo(a,b,a+f,b,f);x.b.closePath();g?x.b.stroke():x.b.fill()}function C(a,b){return(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)}var V=[],W=[];
function wa(a,b){var d=new (window.AudioContext||window.webkitAudioContext),e=d.createOscillator();e.type=a;e.frequency.setValueAtTime(b,d.currentTime);e.connect(d.destination);e.start();e.stop(d.currentTime+.1)}
function Ja(a){var b;if(!Ha){if(0==V.length)for(b=0;1024>b;b+=5)for(var d=0;1024>d;d+=5)"g"==A[1024*b+d]&&V.push({x:d+8*Math.random()-4,y:b+8*Math.random()-4});for(b=0;b<V.length;b++)x.c(new Da(V[b].x,V[b].y),!0);x.c(B=new z(624,526));x.c(new z(610,513),!0);x.c(new z(571,504),!0);x.c(new z(551,510),!0);x.c(new z(516,542),!0);x.c(new z(533,574),!0);x.c(new z(583,570),!0);x.c(new G(516,573),!0);x.c(new G(447,596),!0);x.c(new G(430,747),!0);x.c(new G(440,818),!0);x.c(new G(703,854),!0);x.c(new G(525,
820),!0);x.c(new G(364,864),!0);x.c(new G(167,748),!0);x.c(new G(234,650),!0);x.c(new G(131,530),!0);x.c(new G(244,412),!0);x.c(new G(195,284),!0);x.c(new G(310,205),!0);x.c(new G(421,137),!0);x.c(new G(531,236),!0);x.c(new G(677,302),!0);x.c(new G(764,394),!0);x.c(new G(638,508,!0));if(0==W.length)for(b=0;1024>b;b+=64)for(d=0;1024>d;d+=64)for(var e=0;5>e;e++){var f=d+~~(64*Math.random())-32;var g=b+~~(32*Math.random())-16;if("g"==A[1024*g+f]){W.push({x:f,y:g});break}}for(b=0;b<W.length;b++)x.c(new Ca(W[b].x,
W[b].y),!0);x.c(new ya);Ha=!0}X++;U-=a;0>U&&(0<S?(S=0,U=1+2.5*R()):(S=2+.5*R(),U=.5+.5*R()));b=90*a;if(!D||!D.D){a={x:B.x,y:B.y};B.O=!1;if(x.keys.s||x.keys.down)B.O=!0,B.image="s",a.y+=b;else if(x.keys.w||x.keys.up)B.O=!0,B.image="n",a.y-=b;if(x.keys.a||x.keys.left)B.O=!0,B.image="w",a.x-=b;else if(x.keys.d||x.keys.right)B.O=!0,B.image="e",a.x+=b;if(B.O){a:if(f=B,b=C(f,a),1>=b)a="w"!=A[1024*~~a.y+~~a.x]?a:f;else{b=Math.sqrt(b);d=(a.x-f.x)/b;e=(a.y-f.y)/b;f={x:f.x,y:f.y};for(g=0;g<b;g++)if("w"!=A[1024*
~~(f.y+e)+~~(f.x+d)])f.x+=d,f.y+=e;else{a=f;break a}a="w"!=A[1024*~~a.y+~~a.x]?a:f}B.x=a.x;B.y=a.y}}x.i.space&&(null!=D&&(a=D,a.D=a.D?!1:!0),O&&(Ia&&Ka(),Ia=!0));x.b.setTransform(1,0,0,1,0,0);x.b.fillStyle="#0020b0";x.b.fillRect(0,0,320,480);x.b.translate(-B.x+v/2,-B.y+w/2);Y&&(x.b.imageSmoothingEnabled=!0,x.b.drawImage(Y,0,0,1024,1024,0,0,1024,1024),a=24*Math.sin(X%200*Math.PI/100),x.b.drawImage(Y,1024,0,1024,1024,a/2,a/2,1024-a,1024-a),x.b.imageSmoothingEnabled=!1);for(a=0;a<H.length-1;a++){b=H[a];
d=H[a+1];x.b.lineCap="round";x.b.strokeStyle="black";x.b.lineWidth=3;x.b.beginPath();x.b.moveTo(b.x,b.y-2);var h=d.x-b.x,n=d.y-b.y;g=b.x+h/3;var k=b.x+2*h/3;e=b.y+n/3;f=b.y+2*n/3;n>h?(g+=n,k-=n):(e+=h,f-=h);x.b.bezierCurveTo(g,e,k,f,d.x,d.y-2);x.b.stroke();x.b.lineWidth=2;x.b.strokeStyle="#808080";2==b.state&&(x.b.strokeStyle="cyan");x.b.stroke();if(2==b.state){h=performance.now()%1E3/1E3;n=h*h*h;var p=h*h,m=1-h,q=m*m,Q=m*m*m;g=Q*b.x+3*q*h*g+3*m*p*k+n*d.x;b=Q*(b.y-2)+3*q*h*e+3*m*p*f+n*(d.y-2);x.b.save();
x.b.fillStyle="white";x.b.shadowColor="white";x.b.shadowBlur=5;x.b.beginPath();x.b.arc(g,b,2,0,2*Math.PI);x.b.fill();x.b.restore()}}D=null}var Y=null,La=!1,Ma=!1,Z=[],X=0,A=[],E=null,Na=!1;function Ka(){Na=!1;X=0;Ma=!1;x.state=Oa;Z=[];x.R();x.b.setTransform(1,0,0,1,0,0)}function R(){return Math.random()}function Pa(a){return a[~~(Math.random()*a.length)]}
function Qa(a){return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),ha:parseInt(a[2],16),fa:parseInt(a[3],16)}:null}function Ea(a){return"g"==a?Pa("#59A044 #71BB42 #71BA44 #59A040 #90C63D #599F47".split(" ")):"w"==a?"#0020b0":"s"==a?Pa("#C8BE8D #E3D9A8 #E2D8A7 #DBD49D #E7DDAC #DAD39C".split(" ")):"b"==a?Pa("#706CD1 #6864C9 #706CD1 #6A67CB #766FDC #726BD7".split(" ")):"black"}
function Oa(){y({text:"Mulligan's Island",x:160,y:5,color:"yellow",m:"Georgia",fontSize:30,fontStyle:"bold",textAlign:"center",textBaseline:"top"});y({text:"Loading...",x:160,y:120,color:"yellow",m:"Georgia",fontSize:30,fontStyle:"bold",textAlign:"center",textBaseline:"middle"});if(Na)if(La){Ma||(x.c(Z[Z.length]=new z(-1,0),!0),x.c(Z[Z.length]=new z(-1,0),!0),x.c(Z[Z.length]=new z(-1,0),!0),x.c(Z[Z.length]=new z(-1,0),!0),x.c(Z[Z.length]=new z(-1,0),!0),x.c(Z[Z.length]=new z(-1,0),!0),x.c(Z[Z.length]=
new z(-1,0),!0),Ma=!0);X++;x.b.setTransform(1,0,0,1,0,0);x.b.fillStyle="#0020b0";x.b.fillRect(0,0,320,240);x.b.globalAlpha=.5;x.b.drawImage(Y,0,0,1024,1024,40,0,240,240);x.b.globalAlpha=1;y({text:"Mulligan's Island",x:160,y:5,color:"yellow",m:"Georgia",fontSize:30,fontStyle:"bold",textAlign:"center",textBaseline:"top"});for(var a=["Now sit right back and you'll hear the tale of a 3-hour tour ","that went awry. Our castaways have been shipwrecked ","on a desert isle. Their radio is OFFLINE. But wait!",
"This island has some sort of communications system on it."," Can they figure out how to activate it?"],b="With Mulligan...;The Captain too.;The Billionaire...;And her guy.;The YouTube star...;The Instructor and ;Carrie Ann.;Here on Mulligan's Isle!;Hit space to continue.".split(";"),d=0;d<a.length;d++)y({text:a[d],x:160,y:40+10*d,color:"yellow",m:"Georgia",fontSize:10,textAlign:"center",textBaseline:"top"});a=[160,80,160,240,80,160,240,160,160];d=[125,165,165,165,205,205,205,217,229];for(var e=0;e<
b.length;e++)X>=100+60*e&&(8==e&&0!=~~(X/30)%2||y({text:b[e],x:a[e],y:d[e],color:"yellow",m:"Georgia",fontSize:9,textAlign:"center",textBaseline:"top"}),e<Z.length&&(Z[e].x=a[e],Z[e].y=d[e]));x.i.space&&25<X&&(Ha=Ia=O=!1,x.state=Ja,H=[],x.R())}else{E=la("mulligan.png");b=document.createElement("canvas");b.width=2048;b.height=1024;a=b.getContext("2d");d=a.getImageData(0,0,2048,1024);for(e=0;1024>e;e++)for(var f=0;1024>f;f++){var g=[{x:605,y:380,o:8},{x:768,y:512,o:2},{x:768,y:256,o:8},{x:544,y:252,
o:4},{x:384,y:384,o:16},{x:256,y:768,o:8},{x:512,y:850,o:4},{x:669,y:790,o:4},{x:580,y:880,o:4},{x:700,y:850,o:7}];var h={x:f,y:e};for(var n=0,k=1;k<g.length;k++){var p=g[k-1];var m=g[k];m=Math.max(0,Math.min(1,((h.x-p.x)*(m.x-p.x)+(h.y-p.y)*(m.y-p.y))/C(p,m)));p=g[k-1].o*(1-m)+g[k].o*m;var q=g[k-1],Q=g[k];m=C(h,{x:q.x+m*(Q.x-q.x),y:q.y+m*(Q.y-q.y)});q=20*p;m<q*q&&(n=Math.max(n,p*(1-m/(q*q))))}h=n;g=0;1.65>h?(h="w",g=128):2>h?(h="s",g=128):h=5>h?"s":"g";A[1024*e+f]=h;h=Qa(Ea(h));n=4*(2048*e+f);d.data[n]=
h.r;d.data[n+1]=h.ha;d.data[n+2]=h.fa;d.data[n+3]=255;h=Qa(Ea("w"));d.data[n+4096]=h.r;d.data[n+4097]=h.ha;d.data[n+4098]=h.fa;d.data[n+4099]=g}a.putImageData(d,0,0);b=b.toDataURL();Y=document.createElement("img");Y.src=b;La=!0}else Na=!0}var v=320,w=240,x=new u;x.b.ya=!1;Ka();