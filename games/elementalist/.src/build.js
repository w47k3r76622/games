!function r(n,t,e){function o(u,f){if(!t[u]){if(!n[u]){var i="function"==typeof require&&require;if(!f&&i)return i(u,!0);if(l)return l(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(r){var t=n[u][1][r];return o(t?t:r)},c,c.exports,r,n,t,e)}return t[u].exports}for(var l="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(){var r,n,t,e,o,l,u,f,i,a,c,h,d,s,g,v,p,m,x,b,S,y,C,M,k,w,q,L,O,X,Y,z,B,D,E,R,A,F,I,N,T,U,_,P,W,j,G,H,J,K,Q,V,Z,$,rn,nn,tn,en,on,ln,un,fn,an,cn,hn,dn,sn,gn,vn,pn,mn,xn,bn,Sn,yn,Cn,Mn,kn,wn,qn,Ln,On,Xn,Yn,zn,Bn=[].slice,Dn={}.hasOwnProperty,En=[].indexOf||function(r){for(var n=0,t=this.length;t>n;n++)if(n in this&&this[n]===r)return n;return-1};mn=function(r,n){return Math.floor(r+Math.random()*(n-r+1))},gn=function(r){return r[mn(0,r.length-1)]},dn=function(){var r,n,t,e,o,l,u;for(n=arguments[0],t=2<=arguments.length?Bn.call(arguments,1):[],l=0,u=t.length;u>l;l++){e=t[l];for(r in e)Dn.call(e,r)&&(o=e[r],n[r]=o)}return n},tn=function(r,n){return r%n},un=function(r,n){return Math.floor(r/n)},on=function(r,n,t){return n*t+r},fn=function(r,n,t){var e,o,l,u,f,i,a,c;if(u=0,o=r.length,f=tn(n,t),i=un(n,t),l=f-1,l>=0&&t>l)for(e=a=l;(0>=l?0>=a:a>=0)&&r[i*t+e]===r[n];e=0>=l?++a:--a)u+=1;if(l=f+1,l>=0&&t>l)for(e=c=l;(t>=l?t>c:c>t)&&o>i*t+l&&r[i*t+e]===r[n];e=t>=l?++c:--c)u+=1;return u>=2},Yn=function(r,n,t,e){var o,l,u,f,i,a,c,h;if(f=0,l=r.length,i=tn(n,t),a=un(n,t),u=a-1,a>=0&&e>a)for(o=c=u;(0>=u?0>=c:c>=0)&&r[o*t+i]===r[n];o=0>=u?++c:--c)f+=1;if(u=a+1,a>=0&&e>a)for(o=h=u;(e>=u?e>h:h>e)&&l>u*t+i&&r[o*t+i]===r[n];o=e>=u?++h:--h)f+=1;return f>=2},hn=function(r,n,t,e){var o,l;return o=fn(r,n,t),l=Yn(r,n,t,e),o||l},R=function(r,n,t){var e,o,l,u,f,i,a,c;return e=tn(r,t),l=un(r,t),o=tn(n,t),u=un(n,t),En.call(function(){a=[];for(var r=f=o-1,n=o+1;n>=f?n>=r:r>=n;n>=f?r++:r--)a.push(r);return a}.apply(this),e)<0?!1:En.call(function(){c=[];for(var r=i=u-1,n=u+1;n>=i?n>=r:r>=n;n>=i?r++:r--)c.push(r);return c}.apply(this),l)<0?!1:e!==o&&l!==u?!1:!0},G=function(r,n,t,e,o,l,u){var f,i,a,c,h;for(h=[],f=i=0,a=r.length;a>=0?a>i:i>a;f=a>=0?++i:--i)h.push(Q(t,f,n,e,o,null!=(c=l[r[f]])?c:"#000",u));return h},J=function(r,n,t,e,o,l){return null!=o?Q(r,o,n,t,e,k,l):void 0},Q=function(r,n,t,e,o,l,u){var f,i,a,c,h,d;return f=u.borderColor,i=u.borderSize,a=u.offsetX,c=u.offsetY,h=a+tn(n,t)*e,d=c+un(n,t)*o,$(r,h,d,e,o,l),Mn(r,h,d,e,o,f,i)},$=function(r,n,t,e,o,l){return r.fillStyle=l,r.fillRect(n,t,e,o)},Mn=function(r,n,t,e,o,l,u){return r.lineWidth=u,r.strokeStyle=l,r.strokeRect(n,t,e,o)},H=function(r,n,t,e,o,l,u,f,i){var a,c,h,d;return a=i.backgroundColor,c=i.borderColor,h=i.borderSize,d=n/t,$(r,e,o,l,u,a),$(r,e,o,d*l,u,f),Mn(r,e,o,l,u,c,h)},j=function(r,n,t,e,o){var l,u,f,i,a,c,h,d,s,g,v,p,m;for(h=o.offsetX,d=o.offsetY,m=[],a=v=0,p=n.length;p>v;a=++v)l=n[a],f=l.current,c=l.max,u=l.color,s=h,g=d+a*e,i=l.current/l.max,m.push(H(r,f,c,s,g,t,e,u,o));return m},K=function(r,n,t,e,o,l){var u,f,i;return u=l.align,f=l.baseline,i=l.font,r.fillStyle=o,r.font=i,r.textAlign=u,r.textBaseLine=f,r.fillText(n,t,e)},ln=function(){var r;return null!=(r="undefined"!=typeof localStorage&&null!==localStorage?localStorage.getItem("lastBestLvl"):void 0)?r:0},yn=function(r){return"undefined"!=typeof localStorage&&null!==localStorage?localStorage.setItem("lastBestLvl",r):void 0},C=2,v=320*C,g=480*C,n="#fff",b=60,M=10,p=8,Y=v/10,X=Y,d=Y,s=4*X,O=4,L="#fff",w=["#ddd","#855","#f55","#69f"],i=8*Y,f=X/2,o="#eee",u=4,l="#fff",t=Y,e=2.5*X,S="#444",E="#ddd",k="rgba(0,0,0,0.5)",D="rgba(4,4,4,0.9)",zn=[0,1,2,3],r=zn[0],m=zn[1],x=zn[2],B=zn[3],q=zn,y=120,c=2,a=2,h=2e4,z=1.1,U=document.createElement("canvas"),U.width=v,U.height=g,P=U.getContext("2d"),_=null,document.body.appendChild(U),nn=function(r,n,t){var e,o,l,u;for(l=r*n,e=[],o=u=0;l>=0?l>u:u>l;o=l>=0?++u:--u)for(;;)if(e[o]=gn(t),!hn(e,o,r,n))break;return e},Sn=!1,rn=!1,On=null,Z=null,W=0,vn=0,N=0,an=0,qn=null,Ln=null,kn=function(r,n,t){var e;return e=[r[t],r[n]],r[n]=e[0],r[t]=e[1],e},bn=function(){return On={color:"#2a8",current:h,max:h},Z={color:"#f95",current:0,max:y},W=1,vn=c,N=a,an=ln(),rn=!1},U.addEventListener("click",function(r){var n,t,e,o,l,u,f;return null==_&&(_=U.getBoundingClientRect()),n=r.clientX-_.left,t=r.clientY-_.top,Sn?(u=Math.floor((n-d)/Y),f=Math.floor((t-s)/X),u>=0&&p>u&&f>=0&&M>f&&(o=on(u,f,p),null===qn?qn=o:Ln=o,null!=qn&&null!=Ln)?(R(qn,Ln,p)&&(kn(F,qn,Ln),e=hn(F,qn,p,M),l=hn(F,Ln,p,M),e||l||kn(F,qn,Ln)),qn=Ln=null):void 0):(Sn=!0,bn(),void 0)}),T=function(r,n,t,e){var o,l,u,f,i,a,c,h,d;for(o=i=c=r.length-1;0>=c?0>=i:i>=0;o=0>=c?++i:--i)null===r[o]&&(u=tn(o,n),f=un(o,n),l=(f-1)*n+u,l>=0&&l<r.length&&kn(r,o,l));for(d=[],o=a=0,h=r.length;h>=0?h>a:a>h;o=h>=0?++a:--a)null===r[o]?d.push(r[o]=gn(e)):d.push(void 0);return d},en=function(r,n,t){var e;return e=3*n,r.length-3>=0&&(e+=(r.length-3)*t),e},A={backgroundColor:o,borderColor:l,borderSize:u,offsetX:t,offsetY:e},F=nn(p,M,q),I={borderColor:L,borderSize:O,offsetX:d,offsetY:s},bn(),Xn=function(r){var n,t,e,o,l,u;if(Sn===!0){if(On.current-=1e3*r,On.current<=0)return On.current=0,Sn=!1,rn=!0,W>ln()&&yn(W),void 0;for(t=[],n=e=0,u=F.length;u>=0?u>e:e>u;n=u>=0?++e:--e)hn(F,n,p,M)&&t.push(n);for(o=0,l=t.length;l>o;o++)n=t[o],F[n]=null;if(t.length>0)return Z.current+=en(t,vn,N),Z.current>=Z.max&&(Z.current=0,vn*=W,N+=1,W+=1,Z.max*=W,On.current=On.max=On.max*z),T(F,p,M,q)}},xn=function(){return P.clearRect(0,0,v,g),$(P,0,0,v,g,n),j(P,[On,Z],i,f,A),G(F,p,P,Y,X,w,I),J(P,p,Y,X,qn,I),Sn||($(P,d,s,p*Y,M*X,D),K(P,"Click to start",1.2*Y,8*X,E,{align:"left",font:"bold 80px helvetica"}),K(P,"a new game",1.4*Y,9*X,E,{align:"left",font:"bold 80px helvetica"}),K(P,"Match 3 or more elements",2.12*Y,10.7*X,E,{align:"left",font:"bold 30px helvetica"})),K(P,"Level "+W,d,120,S,{align:"left",font:"bold 80px helvetica"}),K(P,"Last best: "+an,d,g-40,S,{align:"left",font:"bold 20px helvetica"}),K(P,"@Mickawesomesque",v-d,g-40,S,{align:"right",font:"bold 20px helvetica"})},Cn=1/b,sn=1,cn=Cn*sn,V=0,pn=new Date,requestAnimationFrame(wn=function(){var r;for(r=new Date,V+=Math.min(1,(r-pn)/1e3),pn=r;V>cn;)Xn(Cn),V-=cn;return xn(),requestAnimationFrame(wn)})},{}]},{},[1]);