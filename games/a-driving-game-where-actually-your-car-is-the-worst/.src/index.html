<html><head> <title>A DRIVING GAME WHERE ACTUALLY YOUR CAR IS THE WORST</title> <style>#game,#grass{overflow:hidden}#message,*{box-sizing:border-box}#speedometer,#tripmeter{box-shadow:5px 5px 0 rgba(0,0,0,.25)}*{margin:0;padding:0;font-family:"Courier New",Courier,monospace;font-size:32px}#game{width:800px;height:600px;margin:10px auto 0;position:relative}#grass{position:absolute;top:-100;left:0;width:100%;height:130%;z-index:-1;background:#018E0E;background-image:linear-gradient(0deg,rgba(255,255,255,.1) 50%,transparent 50%,transparent 0),none;background-size:auto 50px}#canvas{position:absolute;width:800px;height:600px;top:0;left:0}#score,#speed{position:absolute;color:#fff;left:10px}.lanes{margin-left:200px;border-left:2px solid #fff;height:100%}.lanes div{width:80px;height:100%;background:#696969;border-right:2px solid #fff;float:left}#score{top:10px}#speed{top:30px}#message{z-index:100;position:absolute;width:100%;height:100%;padding:150px 200px 0;text-align:center;background:rgba(0,0,0,.75);color:#fff}#speedometer,#tripmeter-boxes{background:#fefefe}#speedometer{width:100px;height:100px;border-radius:50px;position:absolute;border:1px solid #000;top:425px;left:50px}#tripmeter,#tripmeter-boxes{border:1px solid #000;position:absolute;width:117px;top:510px;left:42px;line-height:33px}#tripmeter{z-index:1}#tripmeter-boxes div{border-right:1px solid #000;width:19.3px;height:33px;float:left}</style></head><body> <div id="game"> <div id="message"></div><div id="grass"></div><div id="speedometer"></div><div id="tripmeter-boxes"> <div></div><div></div><div></div><div></div><div></div></div><div id="tripmeter"></div><div class="lanes"> <div></div><div></div><div></div><div></div><div></div></div><canvas id="canvas"></canvas> </div><script>function renderRect(e,a,n,l,t,r,s,o,i){var p=new Path2D;p.moveTo(a,n),p.lineTo(l,t),p.lineTo(r,s),p.lineTo(o,i),e.fill(p)}function drawSprite(e,a){ctx.fillStyle=e.color,ctx.fillRect(e.x,e.y,e.sizeX,e.sizeY),ctx.fillStyle="#222",drawCar[e.car](e,a,e.color)}function copyObject(e){var a={};for(var n in e)a[n]=e[n];return a}function createEnemy(){var e=copyObject(unit);e.color=colors[Math.floor(Math.random()*colors.length)];do e.lane=Math.floor(5*Math.random())+1;while(e.lane===previousLane);previousLane=e.lane,e.car=carPool[e.lane-Math.round(Math.random())],e.y+=200*Math.random(),e.x=lanes[e.lane],e.speed=Math.random()*(12-2*e.lane)+cars[e.car].speed,e.sizeY=cars[e.car].sizeY,enemies[e.lane].push(e)}function unitInit(){player=copyObject(unit),player.maxSpeed=4,player.car="player",player.lane=6,player.camera=!0,player.color="#B38A51",player.x=lanes[6],player.y=200,player.sizeY=55,enemies=[0,[],[],[],[],[]];var e=5,a=window.setInterval(function(){e?(createEnemy(),e--):clearInterval(a)},2e3)}function updatePosition(e){return e.camera||(e.y-=e.speed-player.speed),e.x<lanes[e.lane]?e.x+=10:e.x>lanes[e.lane]&&(e.x-=10),drawSprite(e),e}function render(){grassTop=parseInt(grass.style.top,10)+3*player.speed,grassTop>-50&&(grassTop-=50),grass.style.top=grassTop,ctx.clearRect(0,0,canvas.width,canvas.height),(0===player.lane||6===player.lane)&&player.speed>1&&(player.speed*=.95,player.maxSpeed-=player.speed/200),playerThrottle?(player.speed+=playerThrottle-Math.random()/10,player.maxSpeed>.5&&(player.maxSpeed-=5e-4)):player.speed-=.01,player.speed=Math.min(player.maxSpeed,player.speed),player.speed=Math.max(0,player.speed),updatePosition(player),distance+=player.speed/5;for(var e=String(Math.round(distance)),a="",n=6;n>e.length;n--)a+="0";for(score.innerHTML=a+e,ctx.beginPath(),ctx.moveTo(100,400),ctx.lineTo(100-40*Math.cos(player.speed-.25),400-40*Math.sin(player.speed-.25)),ctx.stroke(),lane=5;lane>=1;lane--)for(n=enemies[lane].length-1;n>=0;n--){var l=enemies[lane][n];enemies[lane][n-1]&&l.y-enemies[lane][n-1].y<100&&(l.x===lanes[lane-1]?(enemies[lane].splice(n,1),enemies[lane-1].push(l),enemies[lane-1].sort(function(e,a){return e.y-a.y})):l.x===lanes[1]?l.speed-=l.speed-enemies[lane][n-1].speed:l.lane===lane&&l.lane--),updatePosition(l),player.lane===lane&&Math.abs(lanes[lane]-lanes[player.lane])<10&&l.y<260&&l.y+l.sizeY>205&&(window.cancelAnimationFrame(gameloop),message.innerHTML="OH NO!<br>YOU CRASHED!<br><br>YOU DROVE "+Math.round(distance)+" METERS",message.style.display="block",window.setTimeout(function(){message.innerHTML+="<br><br>press any key to play again",gameOver=!0},500)),l.y+l.sizeY<0&&(enemies[lane].splice(n,1),createEnemy())}}function start(){!function e(){gameloop=window.requestAnimationFrame(e),render()}()}function newGame(){message.innerHTML="A DRIVING GAME WHERE ACTUALLY YOUR CAR IS THE WORST<br><br><br>use arrow keys to drive",started=!1,distance=0,unitInit(),render()}var canvas=document.getElementById("canvas"),message=document.getElementById("message");canvas.width=800,canvas.height=500;var ctx=canvas.getContext("2d"),blockW=1200,blockH=100,score=document.getElementById("tripmeter"),distance=0,lanes=[132,212,292,372,452,532,612],colors=["#2ee","#2e2","#ee2","#e22","#e2e","#eee"],enemies,drawCar={player:function(e,a,n){ctx.fillRect(e.x,e.y+15,e.sizeX,45),ctx.fillStyle=n,ctx.fillRect(e.x+2.5,e.y+30,e.sizeX-5,20)},sport:function(e,a,n){ctx.fillRect(e.x,e.y+20,e.sizeX,40),ctx.fillStyle=n,ctx.fillRect(e.x+5,e.y+40,e.sizeX-10,25)},sedan:function(e,a,n){ctx.fillRect(e.x,e.y+25,e.sizeX,40),ctx.fillStyle=n,ctx.fillRect(e.x+2.5,e.y+40,e.sizeX-5,20)},wagon:function(e,a,n){ctx.fillRect(e.x,e.y+25,e.sizeX,60),ctx.fillStyle=n,ctx.fillRect(e.x+2.5,e.y+40,e.sizeX-5,45)},truck:function(e,a,n){ctx.fillRect(e.x,e.y+10,e.sizeX,25),ctx.fillStyle=n,ctx.fillRect(e.x+2.5,e.y+20,e.sizeX-5,20)}},previousLane,cars={player:{speed:4,sizeY:70},sport:{speed:12,sizeY:70},sedan:{speed:7,sizeY:80},wagon:{speed:6,sizeY:85},truck:{speed:4,sizeY:100}},carPool=["sport","sedan","sedan","wagon","truck","wagon"],unit={y:600,sizeX:60,speed:0},playerThrottle=0,started,gameOver=!1;document.onkeydown=function(e){started?gameOver&&(newGame(),gameOver=!1):(start(),started=!0,message.style.display="none"),37==e.keyCode&&player.lane>0?player.lane--:39==e.keyCode&&player.lane<6&&player.lane++,38==e.keyCode&&player.speed<player.maxSpeed?playerThrottle=player.maxSpeed/60:40==e.keyCode&&(player.speed-=player.maxSpeed/20)},document.onkeyup=function(e){38==e.keyCode&&(playerThrottle=0)};var grass=document.getElementById("grass");grass.style.top=-100;var grassTop;newGame();</script></body></html>
