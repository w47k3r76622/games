for(_='){@&&`(this_);^a.functionthis.,this^0<m.length`(J=!0^m.forEach((a@save.dir,1window.Math.random()statetargetequestAnimationFrame+=1)for(===c.[a][b].prototype=Object.create(16*	document.getElementById(g.@var .fillStyle=".fillRect(return(a,bfloor( m,c,d,e,f,h@a=a;i=O=b;p=c;ja=d||1;ka=e||1;ha=f||1;ia=h||1}m={:{x:0,y:0},:0,D:null,T:0,Y:(@},move:(a=p*(1-T^T=0;if(`1>abs(x-.x)`1>abs(y-.y)) x=.x,y=.y,D`(D(),D=null),!0;abs(x%16-8)<=a/2`abs(y%16-8)<=a/2`(x=	x/16)+8,y=	y/16)+8,?=b.[.x/16)][.y/16)][x/16)][y/16)]:={x:0,y:0}^x+=.x*a;y+=.y*a;!1}}; q@m.call_,a,b,0.5,0.9,0.5,0.8^id=0}qm^ r@m.call_,a,b,0.5,0.7,0.8,0.8,0.7^id=1}rm^ s@m.call_,a,b,0.7,0.8,0.6^id=2;d=q}sm^s.Y=(@ 0.5>?0:new d({x:x,y:y},O)}; t@m.call_,a,b,0.5,0.3,0.8,0.8,0.8^id=3;d=r}ts^ u@m.call_,a,b,0.2,0.2,0.2,0.5,0.5^id=4}um^ v(@m.call_,null0,2^id=-1}vm^ aa,c,de=null,f=1E4,h=x/16),k=y/16^D=null;if(!d`1E4>b.B[b][c][h][k]) ={x:	b+8,y:	c+8},!0;w(b,b,c,(a,cb=b.B[a][c][h][k];b<f`(e={x:	a+8,y:	c+8},f=b)}^=e; null!==}; y(a@d=a;h=[];q=[];C=[];show=[];B=[];=[];a=0;a<e;ah[a]=[],q[a]=[],C[a]=[],show[a]=[],B[a]=[],[a]=[]}y={r:@ C},g:@ 2>show`2!==h?1:h},remove:c=h;h=0;C=null;q=!0;0<c`z_)}}; z(a@ b@ b.H-H}A(a,(a,de,f,h,k,l,n,x,p;B[a][d]=f=[];[a][d]=e=[];B((a@e[a]=[];f[a]=[]}^A_,@e={x:0,y:0};f=1E4}^if(1>g(a,d))x=[{x:a,y:d,H:0,V:{x:0,y:0}}];0<x.length;@p=x.pop(^if(f[p.x][p.y]>p.H`(f[p.x][p.y]=p.H,e[p.x][p.y]=p.V>g(p.x,p.y)))l=-1;2>l;lh=p.x+l,n=-1;2>n;nk=p.y+n,valid(h,k)`((0!==l||0!==n)`1>g(p.x,k)`1>g(h,p.y))`x.push({x:h,y:k,H:p.H+sqrt(l*l+n*n),V:{x:-l,y:-n}}^x.sort(b)}},a)} ba,c,de=x/16),f=y/16),h=!1;h[b][c]=d;z(a^A(a,,c@if(-1c`C`1E4<=B[e][f]) h=!0},a^(h=h||k.some((a@ 1E4<=B[e][f][x/16)][y/16)]},a))?(h[b][c]=0,z(a)):q[b][c]=!0;!h} C,c@0show[b][c]`(t=!0^show[b][c]=2;q[b][c]=!0;z(a^w,c,@q=!0;0show`(t=!0,show=1)},a)} ca(a@ b,c@2!==c`(l} c@h=0;q=!0;show=0l`0<a`a<e-1`0<b?2:0}var d,e,f,h,k,l;do{do{A(a,c,a^if(0l@d={x:e/2),y:rows-3};d=0;d<e;dh[d][0]=2;e=0;e<rows;eh[0][e]=h[e-1][e]=2,e<rows-2`0e%2`(h[2][e]=h[e-3][e]=2^h[e/2)][2]=-1;z(a^}f=0;f<R;f{k=*size^h=!1;do d=k%e,e=(k-d)/e,0!==h[d][e]||dd.x`ed.y?k=(k+1)%size:(h[d][e]=2,h=!0^while(!h)}}while(D(a)<size-R^l=0;w(a,d.x,d.y,b,a^f=0;f<A;fk=*(size-f-R-l-1)),h=0;h<size;hif(d=h%e,e=(h-d)/e,0h[d][e]`1<abs(d-d.x)+abs(e-d.y)@if(0k@h[d][e]=-1;break}k-=1}}while(10>D(a)^C(a,d.x,d.y^w(a,d.x,d.y,@show=2},a^z(a)} D(a@ b@0!==h||e||(e=1,f+=1,d.push({x:a,y:b}))}var c,d=[d],e=[],f=0;B((a@e[a]=[]}^A(a,@e=0}^0<d.length;)c=d.shift(),w(a,x,y,b,a^ f} w,c,d,ef,h,k;f=0;4>f;fh=b+(f-1)%2,k=c+(f-2)%2,valid(h,k)`d.call(e,h,k,g(h,k))} A,cd,e;d=0;d<e;de=0;e<rows;eif(b.call(c,d,e,g(d,e)))} B(ab;b=0;b<e`(!a||!call(void 0,b)^b;}; E@a=a;o=b}E={P:0,I:120,G:(@ 0!==I},update:(@if(!I)!0;I-=1;if(0I@da(x,y,o^P+=1;if(8P)!1;I=50}!0}}; F(a@a=a}F={b:1,J:!1,update:(@},G:(@ 0<m.length}}; G(ab,c,d=0,e=x/16),f=y/16^b=1;b<=b;b{e+=.x;f+=.y;if(!valid(e,f))break;c=g(e,f^if(1c||2c)break;d=b} d} H@ sqrt(pow(x-b.x,2)+pow(y-b.y,2))} I(a@a=a}IF^I.update=(a=!1;m=k.filter((b@if(32>H(b.a,a)@b=atan2(b.y-y,b.x-x^if(a) abs(b-Q)<s;Q=b;s=(b+1)/12*PI; a=!0}!1}i-=2*ja})}; J(a@a=a;m=[]}JF^J.update=(@ a(a@ m.every((b@ b!==a})`32>H(a,a)?(c=a,m.push(a),!0):!1}var b,c=this;m=[];b=0;b<b`!(m.length<b^bk.some(ai-=2*ka})}; K(a@a=a;m=[];={x:0,y:1}}KF^K.update=(a=G_),b=x/16),c=y/16^m=k.filter((d@var e=a;0<e;e-=1)if(d.x/16)b+.x*e`d.y/16)c+.y*e)!0;!1}T=ha})}; L(a@a=a;={x:0,y:1};s=0}LF^L.G=(@ 0<s};L.inRange=@ 0.x?8>=abs(x-x)`0<(y-y)*.y`(y-y)*.y<b:8>=abs(y-y)`0<(x-x)*.x`(x-x)*.x<b};L.update=(a=	G_)+8;k.some((b@ inRange(b,a)},this)?(s=min(s+0.5,a+1),J=!0):s=max(s-0.5,0^k.forEach((a@inRange(a,s)`(i-=4*ia)},this)}; M(ab=this,c;c=1/devicePixelRatio;var d=document.createElement("meta"^d.setAttribute("name","viewport"^d.setAttribute("content","width=device-width, initial-scale="+c+", maximum-scale="+c+", user-scalable=no"^document.head.appendChild(d^w=[];d=[];c=0;3>c;cw[c]=document.createElement("canvas"),document.body.appendChild(w[c]),d[c]=w[c].getContext("2d"^c=w[2];"ontouchstart"in document.body?(ontouchstart=(a@1<touches.length?b.n=null:(N(b,changedTouches.item(0)),preventDefault())},ontouchend=(a@O(b,changedTouches.item(0))},ma=w.ontouchcancel=(@b.n=null},ontouchmove=(a@1<touches.length?b.n=null:preventDefault()}):(onmousedown=(a@N(b,a)},onmouseup=(a@O(b,a)},onmouseout=(@b.n=null},document.onkeydown=(a@32keyCode`U()}^p=new Image;p.onload=a;p.src="tiles.png"}M={n:null,width:0,height:0,K:0,L:0,v:null,update:(a=P(),b,c,d,e=t||innerWidth!==width||innerHeight!==height;if(e@width=innerWidth;height=innerHeight;K=(width-	e*a)/2;L=(height-	(rows+2)*a)/2;b=0;3>b;bQ_,b,a^d=N?"Fullscreen":"Faithful";b=0;5>b;bif(c=["title","pause","end","potion","mode"][b]),[R,S,T,U,ea][b]f=c,h=a;f.style.width=	e*h+"px";f.style.height=	(rows+2)*h+"px";f.style.left=K+"px";f.style.top=L+"px";f.style.font=8*h+"px Arial";switch(@case R:"title-resume").style.display=M?"inline":"none";"title-full").innerHTML=d;break;case S:"pause-full").innerHTML=d;break;case U:"potion-cost").innerHTML=S,"potion-money").innerHTML=f}style.display="block"}else style.display="none"}v`(v.time-=1,0>=v.time`(v=null)^V`(fa_,e),ga_,a),e`ha_,a),ia_,d[1])^if(!==V`e)if(d[1]#111",d[1]0,0,	e,	rows),R@b=d[1];Q_,2,a^c=0;5>c;ca=0;9>a;a(1<c||4!==a)`W_,b,0,	a28+	c^X(b,646066^X(b,02876,48^c=0;4>c;ca=0;7>a;a(2>c||3!==a)`W_,b,3,06+	a12+	c^brgba(255,255,255,0.2)";b162812^b1612,64^b8044,32^brgba(0,0,0,0.2)";b64436^b6344,32^b12712,64^X(b612126^b.drawImage(p,0,3266,658466)}else S`ia_,d[1])}}; Oc=	P(),d=(b.pageX-K)/c),c=(b.pageY-L)/c^if(n@if(dn.x`cn.y@if(V)if(valid(d,c))j=null,ja(d,c^else if(de-1`crows+1)U(^else if(c>=rows`c<=rows+1`null!==j)switch(d@case 0:ka(^j=null;break;case 2:var d=g,c=j.x,e=j.y,f=d.r(c,e),h=d.u[d.g(c,e)-3];4>f.b`h<=d.f?(f.b+=1,d.f-=h,d=d.b.q[c][e]=!0):d=!1;d`(v={a:j,time:10}^break;case 4:d=g,c=j.x,e=j.y,f=d.r(c,e),f.`(f.={x:-f..y,y:f..x},d.b.q[c][e]=!0)}}else e=n.x,f=n.y,V`(valid(d,c)`f>=rows`f<=rows+1`0<e`e<=u.length)`ja(d,c,!0,e-1^forward(!1^n=null}} Nc=	P(),d=(b.pageX-K)/c),c=(b.pageY-L)/c^crows+1`de-2`forward(!0^n={x:d,y:c}} la,c,d,ef,h;valid(c,d)`0!==e`W,0,	c,	d^W,e+1,0,	c,	d^2<e`((f=r(c,d))?(b#0b0",b	c+6,	d+13,f.b),f.`(h=f..x?6+f..x:5-f..y,W,h,2*(7-e)+(f.G()?1:0),	c,	d))):4<e`W,4,2*(7-e),	c,	d)^if(1e||2e)brgba(255,255,255,0.2)",valid(c,d-1)`g(c,d-1)e||b	c,	d6),valid(c-1,d)`g(c-1,d)e||b	c,	d6),brgba(0,0,0,0.2)",valid(c,d+1)`g(c,d+1)e||b	c,	d+156),valid(c+1,d)`g(c+1,d)e||b	c+15,	d6)} W,c,d,e,f@b.drawImage(p,	c,	d66,e,f66)} ma,c@if(0id||1id)b.globalAlpha=0.7;W,.y?1+.y:2+.x,id+3,x-8,y-8^b.globalAlpha=1;a=12*(i/O)^b#111";bx-7,y+6,a+2,2^brgb("+[12*(11-a)+502*a+50,50]+")";bx-6,y+7,a)} iac,d,e,f,h=	e,k=	rows;c=0;c<e;cd=0;2>d;dW,3,0,	c,k+	d^brgba(255,255,255,0.2)";b0,k,h^b0,k,32^brgba(0,0,0,0.2)";b0,k+31,h^bh-1,k,32^b.font="8px Arial";b#fff";b.textAlign="center";if(j)c=u[g(j.x,j.y)-3],e=r(j.x,j.y),d=0;3>d;d{W,d+1,32*d,k^f=!1;switch(d@case 0:b.fillText(e.J?c/2:c,8,k+24^break;case 1:b.fillText(c,40,k+24^f=c>f||4e.b;break;case 2:f=!e.}f`(b.globalAlpha=0.5,b.drawImage(p,48,065,32*d,k+165),b.drawImage(p,48,065,32*d,k+1665),b.globalAlpha=1)}else{c=g;d=x/16^e=y/16^f=0;var l,n;l=-1;2>l;ln=-1;2>n;nvalid(d+l,e+n)`-1b.h[d+l][e+n]`(f=max(f,l`n?1:2)^e=f;W,4,7,0,k^W,5+e,7,0,k^d=0;d<u.length;dc=u[d],(!n||n.y<rows||n.y>rows+1||n.x!==d+1||f<u[d])`la,d+1,rows,3+d),b#fff",b.fillText(c,	d+24,k+24),c>f`(b.globalAlpha=0.5,b.drawImage(p,48,065,	(d+1),k+165),b.drawImage(p,48,065,	(d+1),k+1665),b.globalAlpha=1)}b#222";b.textAlign="right";b.fillText(f,h-43,k+12^W,6,h-42,k^b.fillText(String(A-o-1),h-18,k+12^W,0,0,h-17,k^b.fillText("Floor "+(l+1),h-32,k+27^V`(W,6,6,h-32,k+16),W,5,6,h-16,k+16))} hac=d[2];Q(a,2,b^c#111";c0,0,	e,	rows^globalCompositeOperation="destination-out";A(b,@show)`(c#000",c	a-4,	b-4,24,24),crgba(0,0,0,0.7)",c	a-6,	b-6,28,28))},a)} gac=d[1];Q(a,b^A(b,,fh,k=r),l=v`av.x`bv.y;k`(k.||!k.G()`!l||W_,c,f+1,	a,	b),2<f`k.`(h=k..x?6+k..x:5-k..y,W_,c,h,2*(7-f),	a,	b),(k.G()||l)`W_,c,h,2*(7-f)+1,	a,	b)))},a^!||x.x`y.y||W(a,c,7,6,.x-8,.y-8^null!==j`W(a,c,4,6,	j.x,	j.y^k.forEach((a@ma_,c,a)},a^ma(a,c,c^A(b,,fh,k;k=2*PI;if(2<f`(h=r))`h.G())switch(f@case 3:crgba(255,25536,0.5)";beginPath(^moveTo(	a+8,	b+8^arc(	a+8,	b+8,32,(h.Q-h.s+k)%k,(h.Q+h.s)%k,0^fill(^break;case 4:a=200+55*^strokeStyle="rgb("+[a,a,255]+")";beginPath(^a=2*-1^b=2*-1^moveTo(h.x+a,h.y-4+b^f=0;f<h.m.length;fk=h.m[f],a=2*-1),b=2*-1),lineTo(k.x+a,k.y+b^stroke(^break;case 6:a=8;a<h.s;acrgba(255,"+128*)+",0,.5)",b=2+2*),ch.x-b/2+h..x*a,h.y-3-b/2+h..y*a,b,b)}},a)} fac=d[0];A(b,(a,e,fh;(h=b)||(h=b.q[a][e]^h`la_,c,a,e,f)},a)} X,c,d,ef=createLinearGradient(b,c-1,b,c+e^f.addColorStop(0,"rgb(1777)"^f.addColorStop(1,"rgba(1777,0)"^fillStyle=f;ab,c-1,d,e)} Q,cd=w[b];b=d[b];d.width=	e*c;d.height=	(rows+2)*c;d.style.left=K+"px";d.style.top=L+"px";b.scale(c,c^b.imageSmoothingEnabled=b.webkitImageSmoothingEnabled=b.msImageSmoothingEnabled=b.mozImageSmoothingEnabled=!1} P(a;a=innerHeight/16/(rows+2^var b=innerWidth/16/e;a=b>a`1.002<b/a?a:b; N?a:a)};r=r||mozR||webkitR||msR||(a@a()};var V=0,S=1,R=2,T=3,U=4,ea=5; Y(@e=9;rows=11;size=9*rows;localStorage.utc3?save=JSON.parse(localStorage.utc3):(save={b:0,k:0,N:!0,M:0,$:0,aa:0,Z:0,ba:!1},Z_))}Y={R:30,A:8,X:20,S:50,u:[20,30,30,50],o:0,ca:null,f:0,b:null,l:0,F:0,:R,W:!1,t:!0,j:null,ga:(@ca=new M((@setInterval((a;!==V`forward(!1^a=W?2:1;0<a;a-=1)if(V`!update()@end(!0^break}r((@na()})}E3/30)})},da:(a@c=new v;M`a?(f=$,l=M-1,i=Z,$_,aa)):(=ea,t=!0)},fa:(a@ba=a;Z_^f=40;l=-1;$_,{x:4.5),y:rows-1})},end:(a@b=null;if(!a||ba)M=0;Z_^=R;t=!0},valid:@ 0<=a`9>a`0<=b`b<rows},r:@ b.r)},g:@ b.g)},show:@ b.show},forward:(a@W=a},U:(@S?=V:V`(=S^t=!0},la:(@N=!N;Z_^t=!0},ea:(a@a`(f-=S,i=O^$_,w)},update:(a,b,c;move(^p=p.filter((a@if(update())!0;oA-1?(b.C[x][y]=null,b.q[x][y]=!0):b.remove(x,y^!1},this^a=b.B[x/16)][y/16)];k.sort((b,c@ a[b.x/16)][b.y/16)]-a[x/16)][y/16)]}^d.forEach((a@update()}^c=[];k=k.filter((a@if(!move()`0>=i@f+=2+o/4)+l/3^if(b=Y())b.=a,b.=,b.D=(@i=0;i-=1},push(b^!1} 0<i},this^k=k.concat(c^ 0<i}}; da,cd=g,e=700+48*d.l-(100+8*d.l)*log(pow(d.A-c,2))/log(2)^a=new (oa(d,c))({x:	a+8,y:	b+8},e^=d.a;D=(@i=0;i-=1};d.k.push(a)} oac,d,e;e=0;var f=[];c=0;5>c;cd=(l-1)*A+b,d=(d+2*(d%A))/(20*A),e+=f[c]=max(0,d>c/4?1+c/4-d:4*d-c+1^e*=;c=d=0;5>c;cif(d+=f[c],e<d) c+1>k`(k=c+1,Z(a)),[q,r,s,t,u][c]} ka(a=g,b=j.x,c=j.y,d=r(b,c),e=u[g(b,c)-3];f+=d.J?e/2:e;b.remove(b,c^d=d.filter((a@ a!==d})} pac=g,d;if(x/16)!==a||y/16)!==b)={x:a-x/16),y:b-y/16)};0!==F?(ba(b,a,b,F)`(d=new [I,J,K,L][F-3]({x:	a+8,y:	b+8}),b.C=d,d.push(d),f-=u[F-3]),F=0):1g)?(C(b,a,b),-1g)`(l!==X?qa(c,a,b):1(o+2)%2?o+=1:(o-=1,A(b,,c@-1!==c||r)||qa_,a,b)},c)))):-1g)?r)||(0!==k.length||0!==l`o!==A-1)||(A(b,,c@2<c`(f+=u[c-3]/2)},c),lX?(=T,t=!0):i<O`S<=f`0.6>?(w={x:a,y:b},=U,t=!0):$(c,{x:a,y:b})):2<g)`(j={x:a,y:b})} ja,c,de=g;e.F=void 0!==d`0e.g)`e.u[d]<=e.f?d+3:0;aa(e.c,a,b,c)`(e.D=(@pa)})} $@=V;o=-1;l+=1;k=[];d=[];p=[];a={x:	b.x+8,y:	b.y+8};b=new y(b^ca(b^t=!0;b=max(b,l^M=l;aa=b;$=f;Z=i;Z(a)} qa,c@o+=1;b=b.C[b][c]=new E({x:b,y:c},o^p.push(b)} na(a=g;V`k.sort((a,c@ y-y||x-x}^cupdate(^V`(t=!1,A(b,(a,c@q[a][c]=!1},b))} Z(a@localStorage.utc3=JSON.stringify(save)}Game=Y;Y.buy=Y.ea;Y.end=Y.end;Y.init=Y.ga;Y.start=Y.da;Y.hard=Y.fa;Y.toggleFS=Y.la;Y.togglePause=Y.U;Journal=(a,b,c=["Weak spirit easily defeated by light.","Stronger spirit that is more susceptible to lightning than light.","Possessed animal that is fast and may reveal a spirit after being defeated.","Possessed human that may reveal a stronger spirit after being defeated.","Demonic spirit inhabiting a strong non-human physical body."],d="spirits"^a="level"^var e=localStorage.utc3?JSON.parse(localStorage.utc3):0;e`(b=e.b,b=b+1+["st","nd","rd","th"][3>b%20?b%20:3],innerHTML="I am not the first to attempt  Someone already made it to the "+b+" floor."^b=e?e.k:0;a=0;a<b;ad.innerHTML+=\'<li><span class="img" style="background-position: -32px -\'+(48+	a)+\'px;"></span>\'+c[a]+"</li>"};';g=/[-^-`@]/.exec(_);)with(_.split(g))_=join(shift());eval(_)