<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><style>canvas{left:50%;max-height:100%;max-width:100%;position:fixed;top:50%;transform:translate(-50%,-50%);}</style><body><script>"use strict";var A={parts:[{name:"wizard",bounds:[0,43,0,35,0,4],size:[44,36],data:"                    ====                                       =!!!!=                                      =!!!!=                                     =!!!!!!=                                    =!!!!!!=                                    =!!!!!!=                                    =!!!!!!=                                    =!!!!!!=                      ==>            =!!!!=            >==      <<==>===      >==========>      ===>==<<     <==>==========>>>====>>>==========>==<       ==>=============>>>>=============>==        =>================================>=        =>            ========            >=                      >======>                                    >======>                                    =>====>=                                    =>====>=                                    =>====>=                                    =>====>=                                    =>====>=                                    >======>                                   >========>                                  ==========                                  ==========                                  ==========                                  ==========                                  ==========                                 ============                                ============                                ============                                >>>>>>>>>>>>                                ============                                ============                                  <<    <<                                    <<    <<                                                                                                                                                                                                                                                                                                                                                                                                                                 AA                                  AA     AAAA                                AAAA    AAAA                                AAAA     AA                                  AA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             AAAA                                AAAA   AAAAAA                              AAAAAA AAAAAAAA                            AAAAAAAAAAA@@AAA                            AAA@@AAAAAA@@AAA                            AAA@@AAAAAAAAAAA                            AAAAAAAA AAAAAA                              AAAAAA   AAAA                                AAAA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    AAAA                                AAAA   AAAAAA                              AAAAAA AAA@@AAA                            AAA@@AAAAA@@@@AA                            AA@@@@AAAA@@@@AA                            AA@@@@AAAAA@@AAA                            AAA@@AAA AAAAAA                              AAAAAA   AAAA                                AAAA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    AAAA                                AAAA   AA@@AA                              AA@@AA AA@@@@AA                            AA@@@@AAA@@@@@@A                            A@@@@@@AA@@@@@@A                            A@@@@@@AAA@@@@AA                            AA@@@@AA AA@@AA                              AA@@AA   AAAA                                AAAA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              "},{name:"sparkles",bounds:[0,6,0,6,0,1],size:[7,7],data:"   A      A     A@A  AA@@@AA  A@A     A      A      @      @     @?@  @@???@@  @?@     @      @   "},{name:"planet",bounds:[0,115,0,84,0,0],size:[116,85],data:"                                                                                      &&&&&&&&                                                                                                    &&&&&&&&&&&&&&&&&&&&                                                                                       &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&                                                                     AAAAAAAA    &&&&&&&&&&&%&&%&&%%&&%&&%&%&&&&&&&&&&&                                                            AAAAAAAAAAAAAAAAAAA&&&&&&%%&&&&&&&&&&&&&&&&&&&&%&&&&&&&&&&                                                      AAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&&&&&&&&&&&&&&&&&&%&&&&&&&&&                                                 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%&&&&&&%%%&&%&&%&&%&&&&&&&&&&&%&&&&&&&&                                             AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&&&&&&&%&&%&&&&&&&&%&&&&&&&                                         =AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&&&&&&&&&&%&&&&&&&%&&&&&&&                                        =AAAAAAAAAAAAAAAA===AAAAAAAAAAAAAAAAAAAAA&%&&%&%&&%&&&&&&&&&&%&&&&&&&&&&&&&&                                       ==AAAAAAAAAAAA==AAA===AAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&%&&%&&&&&&%&&&&&&%&&&&&&                                     =AAAAAAAAAAAAAA=AAA====AAAAAAAAAAAAAAAAAAAAAAA       &&&&&&&&&&&&&&%&&&&&&&&&&&&                                  AAAAAAAAAAAAAAAAAA=AA====AAAAAAAAAAAAAAAAAAAAAAAA          &&&&%&&&&&&%&&&&&%&&&&&                                =AAAAAAAAAAAAAAAAAAA=AAA===AAAAAAAAAAA=AAAAAAAAAAAAA          &&&&&&&&&&&%&&&&&&&&&&&                               AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAAA          &&&&%&&&&&&&&&&&&&&&&&                              AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAAAA           &&&&&&&&&&%&&&&%&&&&                             AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==           &&&%&&&&&&%&&&&&&&&                             AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=          &&&&&&&&&&&&&&&&&&&                            AAAAAAAAA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAA=           &&&&%&&&&&%&&&%&&&                           AAAAAAA==AA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==AAAAA          &&&&&&&&&&&&&&&&&&                          AAAAAAAA=AAA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==AAAAA          &&&&&&&&&%&&&&&&&                         AAAAAAAA==AAA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA===AAA           &&&%&&&&&&&&%&&&                         AAAAAAAA===AA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAA          &&&&%&&&%&&&&&&&                        AAAAAAAAAA==AAAAAAAAAAAAAAAAAAAAAAAAA==A===AAAAAAAAAAAAAAAAAAAAAAA          &&&&&&&&%&&&%&&&                        AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AA===AAAAAAAAAAAAAAAAAAAAAAAA         &&&&&&&&&&&&&&&&                       AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==AAA==AAAAAAAAAAAAAAAAAAAAAAAA         &&&&%&&&&&&&&&&&                       AAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAA=AAAA==AAAAAAAAAAAAAAAAAAAAAAAAA       &&&&&&&&&&&&%&&&                       AAAAAAAAAAAAAAAAAAAAAA==AAAAAAAAAAAAAAA=AAAA=AAAAAAAAAAAAAAAAAAAAAAAAAA      &&&&&%&&&%&&&&&&                      %AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA===AAAAAAAAAAAAAAAAAAAAAAAAAAAAA      &&&&&&&&&&&&&&&                      %%AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA     &&&&%&&&&&&&&&&                     %%AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAAAAAAA    &&&&&&&&%&&&&%&&                    %%%AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA    &&&&%&&&&&&&&&&                    %%%%AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA    &&&&&&&%&&&&&&&                   %%%%%AAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAA  &&&&&&&&&&&&&&&                   %%%%$AAAAAAAAAA=AA=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==AAAAAAAAA  &&&%&&&%&&&&%&&                  %%%%$%AAAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA &&&&&&&%&&&&&&&                  %%%%%%%AAAAAAAAAAAAAAAAAAAAAAAAA====AAAAAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAAAA==AAAAAA &&&&&&&&&&&&&&&                  %%$%%%%=AAAAAAAAAAAAAAAAAAAAAA=AA====AAAAAAAAAAA=AA=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&&%&&                  %%%%%%%$=AAAAAAAAAAAAAAAAAAAAA==AAAA===AAAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&%&&%&&&&&&                  %%%%%%%$%==AAAAAAAAAAAAAAAAAAA=AAAAAAA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAA&&&&%&&&&&&&&&                  %%%$%%%%%%==AAAAAAAAAAAAAAAAAAA==AAAAAA==AAAAAAAAAAAAAAAAAAAAAAAAAAA==A==AAAAAAAAAA&&&&&&&&%&&&%&&                 %%%%%%%%%%%==AAAAAAAAAAAAAAAAAAAA=AAAAAA==AAAAAAAAAAAAAAAAAAAAAAAAAAA=AA==AAAAAAAAAA&&&&&&&&&&&&&&                  %%$%%%%$%%%===AAAAAAAAAAAAAAAAAAA=AAAAAA==AAAAAAAAAAAAAAAAAAAAAAAAAAA=A==AAAAAAAAAA&&&&%&&&&&&&&&&                 %%%%%%%%%%%$===AAAAAAAAAAAAAAAAAAA==AAAA===AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&%&&&%&&                 %%%%%%%%$%%%%====AAAAAAAAAAAAAAAAAAA==AAA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&%&&&&&&                 %%%%$%%%%%%%%%=====AAAAAAAAAAAAAAAAAAA==AAAAAAAAAAAAAAAAA=A=AAAAAAAAAAAAAAAAAAAAAAA&&&&%&&&%&&&&&&                  %%%%%%%$%%%%% =====AAAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAAAAAA=A=AAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&&&%&                  %%%$%%%%%%%$%%  =====AA==AAAAA=AAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&%&&&&&&&                  %%%%%%%$%%%%%   =====AA===AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&%&&%&&&%&&                    %%$%%%%%%%%%%   ======AA==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAA&&&&&&&&&&&&&&&&                   %%%%%%%%%%%%%     ======A==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAA&&&&&%&&%&&&&%&                     %%%%%%%$%%$%%     ======A==AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&&&&&&&                     %%%%%%%%%%%%%%     =========AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&%&&%&&&%&&&                     %%%$%%%$%%%%%%     ========AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAA&&&&&&&&&&&&&&&&                       %%%%%%%%%%%%%       =======AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==AAAAAAAAAAAA&&&&&%&&&%&&&&&&                       %%%%%%%%%%%$%%       =========AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&&&&&%&&&%&&&                       %%%%%%%%%%%%%%        =========AAAAAAAAAAAAAAAAAAAA=AAAAAAAAAAAAAAAAAAAA==A&&&&%&&&&&&&&&&&                        %%%$%%%%$%%%%%%         ========AAAAAAAAAAA=AAAAAAAAAAAAAAAAAAAAAAAAAAAA==&&&&&&&&&%&&&%&&AA                        %%%%%%%%%%%$%%%         ==========AAAAAAAAA=AA=AAAAAA=AAAAAAAAAAAAAAAAAA=&&&&&%&&&&&&&&&&&A                         %%%$%%%$%%%%%%%          =========AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&&&&&%&&&&%&&&%&&&AA                        %%%%%%%%%%%%$%%%          ==========AAAAAAAAAAAA=====AAAA==AAAAAAAAAAA&&&&&%&&&&%&&&&&&&AAA                         %%%%$%%%%%%%%%%%           ==========AAAAA==A=AAA====AAA==AAAAAAAAAA&&&&&&&&&&&&&&&&&&AAAAA                         %%%%%%%%$%%%%%%%%          ============AA==A==AAAAA===AA=AAA=AAAAAA&&&&&%&&&&%&&&&&%&AAAAA                          %%%%$%%%%%%%%$%%%%          ============A=AA=AAAAAA===AA=AAA=AAAA&&&&&&&&&&%&&&&&&&&AAAAA                           %%%%%%%%$%%%%%%%%%           ============AAA=AAAAAA====AAAAA=AA&&&&&&%&&&&%&&&&%&&&AAAAAA                           %%%%%%%%%%%%%%%%%%%          =============A==AAAAAAA===AAAAAA&&&&&&%&&&&%&&&%&&&&AAAAAA                             %%%%%%%%%$%%%%%%%%%           ===============AAAAAAA===AAA&&&&&&&&&&&&&&&&&&&&&&AAAAAAA                             %%%%$%%%%%%%%%$%%%%%          ===============AAAAAAA===A&&&&&&&%&&&&&%&&&&%&&&AAAAAAAA                              %%%%%%%%%%$%%%%%%%%%%%          ===============AAAAAA&&&&&&&&&&&&&%&&&&&&&&&AAAAAAAAA                               %%%%%%%%%%%%%%%$%%%%%%%          ===============AAA&&&&&&&&&%&&&&&&&&&&%&&AAAAAAAAA=A                                %%%%%$%%%%$%%%%%$%%%%%%%%%      ==============&&&&&&&&&&%&&&&&%&&&&&&&&&AAAAAAAA==                                  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%     ====&&&&&&&&&&&&&&&%&&&&&%&&&&&%&&&&AAAAAAAAA==                                    %%%%%%%%%%$%%%%%%$%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&%&&&&&&&&&&&&&&&&&&AAAAAAAAAAA=                                      %%%%$%%%%%%%%%%%%%%$%%%%%%%%%%%%&&&&&&&&&&&&%&&&&&&&&&%&&&&&%&&&&AAAAAAAAAAAA                                       %%%%%%%%%%$%%%%%%%%%%%%$%%%%%%%%%&&&&&&&&%&&&&&&&&%&&&&&&%&&&&&AAAAAAAAAAAA                                          %%%%%%%%%%%$%%%%%%%%%%%%%%$%%$%%%&&%&&&&&&&&&&%&&&&&&&&&&&AAAAAAAAAAAAAA                                            %%%%%%$%%%%%%$%%%%%%%%%%%%%%%%%%%%&&&&&&&&&%&&&&&&&&%&&&AAAAAAAAA===AA                                               %%%%%%%%%%%%%%%$%%$%%%%%%%%%%%%%$%&&%&&%&&&&&&%&&&&&&&===AAAAAAA                                                     %%%%%%$%%%%%%%%%%%%%%$%%%$%%$%%%%%%&&&&&&&&&&&&&&&========AAA                                                        %%%%%%%%$%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&%&&&&&==========                                                              %%%%%%%%$%%%%%%%%%%%%%%%%%%%%%%$%%%&&&&&                                                                              %%%%%%%%$%%$%%%%%%%%%%$%%$%%%%%%%%%&&                                                                                  %%%%%%%%%%$%%$%%$%%%%%%%%%%%                                                                                            %%%%%%%%%%%%%%%%%%                                                                                                      %%%%%%%%%                                                                                     "},{name:"toast",bounds:[0,99,0,12,0,0],size:[100,13],data:"   //////////////////////////////////////////////////////////////////////////////////////////////      //////////////////////////////////////////////////////////////////////////////////////////////      //////////////////////////////////////////////////////////////////////////////////////////////   ))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))"},{name:"pillar",bounds:[0,11,0,5,0,4],size:[12,6],data:"   &&&&&&&& &&&&&&&&&&&&%&&&&&&&&&&%#%%%%&&&&%%##$$$$%%%%%%# $$$$%%%%    &&&&&&&&   &&&&&&&&&&&&%%%&&&&&&&&%#$$%%%%&&&&##$$$$$$%%%%#   $$$$%%%%  &&&&&&&&&& &&&&&&&&&&&&%&&&&&&&&&&%#$%%%%%%%%&###$$$$$$$$%# #$$$$$$$$%  &&&&&      %%%&&&&&&   #$$%%%&&&&&%##$$$$%%%&&###$$$$$$$%%# #$$$$$$$%%       &&&&&    &&&&&&%%#%&&&&&%%%%%##$%%%%$$$%%###$$$$$$$%%# #$$$$$$$%% "},{name:"brick",bounds:[0,4,0,3,0,0],size:[5,4],data:"######$$%##$$%##$$%#"},{name:"old wizard",bounds:[0,63,0,63,0,2],size:[64,64],data:"                               666666                                                     66666666666666                                                 6666666666666666                                              5666666666!!!!!66666                                          5566666666!!!!!!!!!6666                                        6566666666!!!!!!!!!!!!666                                     6555666666!!!!!!!!!!!!!!!666                                   66556666666!!!!!!!!!!!!!!!!666                                 66565666666!!!!!!!!!!!!!!!!!6666                               66655566666!!!!!!!!!!!!!!!!!!!666                               6655566666!!!!!!!!!!!!!!!!!!!!6666                             66656566666!!!!!!!!!!!!!!!!!!!!6666                            66665556666!!!!!!!!!!!!!!!!!!!!!!6666                          666665566666!!!!!!!!!!!!!!!!!!!!!!6666                          666655566666!!!!!!!!!!!!!!!!!!!!!!!6666                         66665656666!!!!!!!!!!!!!!!!!!!!!!!!6666                        666665556666!!!!!!!!!!!!!!!!!!!!!!!!6666                        666665566666!!!!!!!!!!!!!!!!!!!!!!!!!6666                      6666655566666!!!!!!!!!!!!!!!!!!!!!!!!!6666                      666665656666!!!!!!!!!!!!!!!!!!!!!!!!!!6666                      666665556666!!!!!!!!!!!!!!!!!!!!!!!!!!6666                     6666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!666                     666665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                    666665656666!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                    666655556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                    666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                   6666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!666                   6666656566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!666                   666665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!666                   666665566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!666                   666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!666                   66665656666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!666                   66665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  66665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  66665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  66665656666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  66665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  66665556666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  6666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  6666656566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  6666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!!6666                  6666655566666!!!!!!!!!!!!!!!!!!!!!!!!!!!!66666                  66666565666666!!!!!!!!!!!!!!!!!!!!!!!!!!666666                  66666555666666!!!!!!!!!!!!!!!!!!!!!!!!!!66666                   666666556666666!!!!!!!!!!!!!!!!!!!!!!!!666666                   66666656566666666!!!!!!!!!!!!!!!!!!!!!666666                    66666655566666666666!!!!!!!!!!!!!!!666666666                     666666556666666666666666666666666666666666                       6666656566666666666666666666666666666666                         66666556666666666666666666666666666666                            66656566666666666666666666666666666                              66655666666666666666666666666666                       6666666666666666666666666666666666666666666666666666          5556666666666666666666666666666666666666666666666666666666    55555556666666666666666666666666666666666666666666666666666555  555555665666666666666666666666666666666666666666666666555556555565555665555566666666666666666666666666666666666655555655555566556665655555565555565566666666666666666666666655556555556555555565666666555565555565555565555655556555556555565555565555565555566666666666665555556555565555565555655555655555655555655555655666666666666666666556555556555565555565555565555565555565556666666666666666666666666666556555556555556555556555555655566666666666666666666666666666666666666666666665655555656666666666666666666666666666666666666666666666666666666666666666666666666666666666666666                               ------                                                     --------------                                                 ----------------                                              .-------------------                                          ..---------!!!!!!------                                        -.--------!!!!!!!!!!-----                                     -...-------!!!!!!!!!!!!!----                                    -..------!!!!!!!!!!!!!!!!----                                  -.-.-----!!!!!!!!!!!!!!!!!!----                                --...----!!!!!!!!!!!!!!!!!!!!---                               --...-----!!!!!!!!!!!!!!!!!!!!!---                              --.-.----!!!!!!!!!!!!!!!!!!!!!!!--                             ---...----!!!!!!!!!!!!!!!!!!!!!!!---                           ----..----!!!!!!!!!!!!!!!!!!!!!!!!!--                           ---...---!!!!!!!!!!!!!!!!!!!!!!!!!!---                          ---.-.---!!!!!!!!!!!!!!!!!!!!!!!!!!!--                         ----...--!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                         ----..---!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                        ---...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                       ----.-.---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                       ----...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                      ----...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                      ----...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                     ----.-.---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                     ---....--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                    ----...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                    ----...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                    ----.-.---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                   -----...---!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                   -----..----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                   ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                   ----.-.----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                   ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                  ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                  ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                  ----.-.----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                  ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                  ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!--                   ----...----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                   ----.-.----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                   ----...-----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                   ----...-----!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                   ----.-.------!!!!!!!!!!!!!!!!!!!!!!!!!!!!!---                   ----...-------!!!!!!!!!!!!!!!!!!!!!!!!!!!---                    -----..-------!!!!!!!!!!!!!!!!!!!!!!!!!!----                    -----.-.-------!!!!!!!!!!!!!!!!!!!!!!!!----                      ----...-------!!!!!!!!!!!!!!!!!!!!!!!-----                      -----..----------!!!!!!!!!!!!!!!!!!!-----                        ----.-.-----------!!!!!!!!!!!!!!!------                          ----..---------------!!!!!!!!!-------                            ---.-.-----------------------------                               --..---------------------------                       ----------------------------------------------------          ..--------------------------------------------------------    .---..-------------------------------------------------------.  .----.....---------------------------------------------......---..--...---......----------------------------------.....-----..----....----..----..........------------------......---..-----....----....-..------..------...................--..------..-----..---------...-----..------...----..-----..------..------..-----.-------------...--..------..-----..-----..-------..------..--..-----------------......---..------..------..------..------....-------------------------.....------..------..------..-......--------------------------------..----..-------..---......--------------                               333333                                                     33333333333333                                                 3333333333333333                                              23333333333333333333                                        3232333333333333333333333                                      33223333333333!!!!!!3333333                                    332223333333!!!!!!!!!!!333333                                  333223333333!!!!!!!!!!!!!333333                                333232333333!!!!!!!!!!!!!!!!33333                              333322233333!!!!!!!!!!!!!!!!!!3333                             333322233333!!!!!!!!!!!!!!!!!!!!3333                            333323233333!!!!!!!!!!!!!!!!!!!!3333                           333332223333!!!!!!!!!!!!!!!!!!!!!!3333                          333332233333!!!!!!!!!!!!!!!!!!!!!!3333                         3333322233333!!!!!!!!!!!!!!!!!!!!!!!3333                        333332323333!!!!!!!!!!!!!!!!!!!!!!!!3333                       3333332223333!!!!!!!!!!!!!!!!!!!!!!!!3333                       3333332233333!!!!!!!!!!!!!!!!!!!!!!!!!3333                     3333332223333!!!!!!!!!!!!!!!!!!!!!!!!!!3333                     3333332323333!!!!!!!!!!!!!!!!!!!!!!!!!!3333                    33333332223333!!!!!!!!!!!!!!!!!!!!!!!!!!3333                    3333332223333!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                    3333332223333!!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                  33333332323333!!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                  33333322223333!!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                  33333322233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333332223333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333332323333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333332223333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333332233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333322233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333323233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!333                 33333322233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                33333322233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                33333322233333!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!3333                33333323233333!!!!!!!!$%%$!!!!!!!!$$!!!!!!!!3333                33333322233333!!!!!!$$$$$$%$%%%$$&&&&$$!!!!!3333                33333322233333!!!!!%$%%%&%%%%%%%&%%%&&%&%!!!333                 33333322233333!!!!$$%$%%$%%$$$%%$$$%%$$&&%!!333                 33333323233333!!%$%$%%%&$%$&$%$%$%&$%%%$&%%!333                 33333322233333!!%$$$$%$&%$$&%%$$%%&&$%%%&&%%333                333333322233333!$%$%%$%$$%$&%$$$$%&%$&$%%$&%%333                3333333232333333$$$%%$%$%$&&%$%%$&%&%$$&%%&&$%33                3333333222333333$$$%%$%$%$&$%%$%%&$&%%$&%$$&&%3                 3333333322333333$$%%%$%%%%%$%%$%%%%&%%$&%$%%&%3                 3333333323233333$$%$%$%%%%$$%$%%&%%&%%%%&$&%$%                  3333333322233333$$%$%$%%%%$%&$%%&%%%$%&%&%%&%&                   333333332233333$$%%$%%$%%$&&%%$&%%%$%&%$&%&%&                    33333332323333$$$%$%%$%%$&%%$%&$%%$%&%$&$&%&                    333333332233333$$$$$%$%%$&%%%%&$%%$%%&%&$&$&                     33333332323333$$$%$%$%%%&%$%%&$%%$%%&%&$&$%                         33332233333$$$$%%$%%$%$%&%$&%$%%&%&%&$                  3333333333333333333$$$$%%$%%$%%$&$%%&$$%%%&%&$333333          3333333333333333333333$$$$%$$%$%%$&$%$&%$%$&&%%$3333333333    333333333333333333333333$$%%%$$%$%%$&$$$&%$%$%&$%$333333333333  3333333333333333223333333$$%$%%%%%%$&%$%&%$&%%&$%%333333333333333333222222333333322333333$$%%%%$%%%$%&$%&$$&$%%&%%2233333333333333323323222233333322333333$%$$%$$%%$%&$%&$%&$%&&%22333333322223333322233223223333332233333$%%$%$%$%$%&$%&%%&$%&%%233333222323323333322223232223333332333332$%$%$%$$%%&%&%%$&%&%%2233332322332223333332332332222333332233332$$$%%%$$%%&%&%$&&%&$%2333222333223323333333222233232333333233322$$$%%$$$&&$%&%$&&&%&323323223223222333333333323223322233332333223$$%%%$$&%$%%$$&%&&&323323223222323333333333332232332222332333223$$$$$%%%&$%%$%%&&&332332233233233333"}],palette:[2037811,2829890,4278361,6844794,9478568,11979727,16777215,16564106,11894871,9064510,6044225,13185080,14576184,16756027,16770454,16578912,11851333,5358655,3185763,2321786,2510702,2307683,4289169,5018541,6537929,9753300,12123647,3942720,4597596,8545409,16229515,12743042,8727910]};const t=[],s=[];function i(A){return[(A>>16)%256,(A>>8)%256,A%256]}function e(A,t,[s,i,e]){A[t]=s,A[t+1]=i,A[t+2]=e,A[t+3]=255}function n(A){return t[A]}function o(A){return s[A]}function a(A,t){const s=document.createElement("canvas");s.width=A,s.height=t;const i=s.getContext("2d");return i.imageSmoothingEnabled=!1,[s,i]}function h({data:A,size:t},s,i,e){return A[s+i*t[0]+e*t[0]*t[1]]}function r(A,t,s){const[i,n]=A.size,[r,c]=a(t[1]-t[0]+1,t[3]-t[2]+1),l=c.createImageData(i,n);for(let n=t[0];n<=t[1];n+=1)for(let a=t[2];a<=t[3];a+=1){const t=h(A,n,a,s);0!==t&&e(l.data,4*(n+a*i),o(t-1))}return c.putImageData(l,-t[0],-t[2]),r}function c(A){const t=[],{bounds:s}=A;for(let i=s[4];i<=s[5];i+=1)t[i]=r(A,s,i);return t}!function(){for(const n of A.palette)t.push(`rgb(${(e=i(n))[0]}, ${e[1]}, ${e[2]})`),s.push(i(n));var e}();const l=new Map;function $(A,t=0){return l.get(A)[t]}!function(){for(const s of A.parts)s.data=(t=s.data,[...t].map(A=>A.charCodeAt(0)-32)),l.set(s.name,c(s));var t}();const d=2,u=3,m=1e3,p=-2e3,f=15e3,w=f+1250,g=w+150,y=$("toast"),x=y.height*d,M=y.width*d,b=M;class v{constructor(A,t){this.x=A,this.y=t}add({x:A,y:t}){return new v(this.x+A,this.y+t)}sub({x:A,y:t}){return new v(this.x-A,this.y-t)}scale(A,t=A){return new v(this.x*A,this.y*t)}rotate(A){return new v(this.x*Math.cos(A)-this.y*Math.sin(A),this.x*Math.sin(A)+this.y*Math.cos(A))}distance({x:A,y:t}){return((this.x-A)**2+(this.y-t)**2)**.5}round(){return new v(Math.round(this.x),Math.round(this.y))}wrap(){for(;this.x<-m/2;)this.x+=m;for(;this.x>m/2;)this.x-=m;return this}static intersection({x:A,y:t},{x:s,y:i},{x:e,y:n},{x:o,y:a}){const h=(a-n)*(s-A)-(o-e)*(i-t);if(0===h)return null;const r=((o-e)*(t-n)-(a-n)*(A-e))/h,c=((s-A)*(t-n)-(i-t)*(A-e))/h;return r>=0&&r<=1&&c>=0&&c<=1?new v(A+r*(s-A),t+r*(i-t)):null}}class P extends v{constructor(A,t,s){super(A,t),this.timestamp=s}static fromPoint(A,t){return new P(A.x,A.y,t)}}const k=new v(m/2,m/2),T={globalAlpha:1,lineJoin:"round",lineWidth:3},I={...T,absolute:!1,imageScale:d,r:0,z:1};const z=1,C=20,S=5,O=80,E=400,L=2*E,D=.05*E,F=$("sparkles"),R=$("sparkles",1);class W extends P{constructor(A,t,s){super(A.x+(Math.random()-.5)*O,A.y+(Math.random()-.5)*O,A.timestamp+t),this.r=Math.random()*Math.PI,this.dx=(Math.random()-.5)*O/E,this.dy=(Math.random()-.5)*O/E,this.dr=Math.random()/100,this.isHit=s}isExpired(A){return A-this.timestamp>(this.isHit?L:E)}tick(A){this.x+=this.dx*A,this.y+=this.dy*A,this.r+=this.dr*A;const t=1-A**-1.5;this.dx*=t,this.dy*=t,this.dr*=t}draw(A,t){const s=this.isHit?R:F,i=function(A,t){return t<D?t/D:(A-t)/(A-D)}(this.isHit?L:E,t-this.timestamp)**.5,e=this.isHit?1:.5;A.image(s,new v(this.x,this.y),{absolute:!0,globalAlpha:i*e,r:this.r})}}class j{constructor(){this.now=-1/0,this.sparkles=new Set}add(A,t=!1){for(let s=0;s<(t?C:z);s+=1)this.sparkles.add(new W(A,S*s,t))}tick(A,t){this.now=A,this.removeOldSparkles(),this.updateSparkles(t)}removeOldSparkles(){const A=[];for(const t of this.sparkles)t.isExpired(this.now)&&A.push(t);for(const t of A)this.sparkles.delete(t)}updateSparkles(A){for(const t of this.sparkles)t.tick(A)}draw(A){for(const t of this.sparkles)t.draw(A,this.now)}}const H=120;const B=new v(.5,20),N=30,q=Math.ceil(m/N),V=.95*m;class Y{constructor(A=1){this.pointCache=new Map,this.z=A}draw(A){const t=this.getMinimumY(A.cameraPosition);this.trimExcess(t),this.ensureEnough(t);const s=Math.min(.01*Math.abs(A.dy),1);for(const t of this.pointCache.values())this.drawOne(A,t,s)}getMinimumY(A){return Math.floor((A.y-m/2)/N)}trimExcess(A){for(const t of this.pointCache.keys())t<A&&this.pointCache.delete(t)}ensureEnough(A){const t=A+q;for(let s=A;s<=t;s+=1)this.ensurePoint(s)}ensurePoint(A){this.pointCache.has(A)||this.pointCache.set(A,new v(Math.random()*V-V/2,A*N))}drawOne(A,t,s){A.rect(t.sub(B),t.add(B),{fillStyle:n(26),globalAlpha:s,z:this.z})}}const J=1.5*m,X=[$("pillar"),$("pillar",1),$("pillar",2),$("pillar",3),$("pillar",4)],G=.02,K=J/5/d,Q=4,[U,Z]=a(m/d,J/d);function _(A,t,s){const{width:i,height:e}=A;Z.drawImage(A,0,Q+1,i,e,t,s+Q+K,i,e),Z.drawImage(A,0,Q,i,1,t,s+Q,i,K),Z.drawImage(A,t,s)}!function(){const A=function(){const A=[],t=J/6,s=J/2,i=J-s,e=m;for(let n=t;n<s+i;n+=16)for(let i=0-50*Math.random();i<e+50;i+=36+24*Math.random()){const o=1-(n/s)**5;Math.abs(i-e/2)/(e/2)>o&&Math.random()<.75&&A.push([new v(i,n-t+12*Math.random()),X[Math.floor(Math.random()*X.length)]])}return A}();for(const[t,s]of A)_(s,(t.x-s.width)/d,(t.y-s.height)/d)}();const AA=new v(0,0),tA=new v(m,m),sA=$("planet"),iA=.0015,eA=new v(m/3/iA,-m/3/iA),nA=.002,oA=m/2/nA,aA=m/nA,hA=new v(-oA,m/2.5/nA),rA=new v(oA,aA);function cA(A){A.rect(AA,tA,{absolute:!0,fillStyle:n(23)}),A.image(sA,eA,{z:iA}),A.rect(hA,rA,{fillStyle:n(22),z:nA}),function(A){A.image(U,new v(0,(J+m/3)/2/G),{z:G})}(A)}const lA=6,$A=1,dA=4,uA={a:".... ..... .. .   ",b:".. . ... . ...    ",c:"....  .  .  ...   ",d:".. . .. .. ...    ",e:"....  .. .  ...   ",f:"....  .. .  .     ",g:"....  . .. ....   ",h:". .. ..... .. .   ",i:"..... ",j:"...  .  .. . ..   ",k:". .. ... . .. .   ",l:".  .  .  .  ...   ",m:".   ... ... . ..   ..   .     ",n:".  ... .. ...  ..  .    ",o:".... .. .. ....   ",p:".... .....  .     ",q:".... .. .. ....  .",r:".... ...... . .   ",s:"....  ...  ....   ",t:"... .  .  .  .    ",u:". .. .. .. ....   ",v:". .. .. .. . .    ",w:".   ..   .. . .. . ......     ",x:". .. . . . .. .   ",y:". .. .... .  .    ",z:"...  . . .  ...   ",1:" . ..  .  .  .    ",2:"..   . . .  ...   ",3:"..   . .   ...    ",4:".  .  . ....  .   ",5:"....  ..   ...    ",6:" . .  .. . . .    ",7:"...  .  . .  .    ",8:" . . . . . . .    ",9:" . . . ..  . .    ",0:" . . .. .. . .    "," ":"            ",".":"    . ",",":"    ..","'":"..    ","!":"... . ",":":" . .  ","?":"...  . .     .    ","%":". .  . . .  . .   "},mA=new Map;function pA(A,t,s=1/0){const i=`${A}%${t}%${s}`;if(!mA.has(i)){const{fittingText:e,width:n,height:o}=function(A,t){const s=A.split("\n"),i=[];for(const A of s){const[s,...e]=A.split(" ");let n=s;for(const A of e)fA(n+" "+A)<=t?n+=" "+A:(i.push(n),n=A);i.push(n)}return{fittingText:i.join("\n"),width:Math.max(...i.map(fA)),height:i.length*(lA+dA)-dA}}(A,s),[h,r]=a(n,o),c=r.createImageData(n,o);let l=0,$=0;for(const A of e)"\n"===A?(l+=lA+dA,$=0):(wA(c,t,$,l,A),$+=$A+gA(uA[A]));r.putImageData(c,0,0),mA.set(i,h)}return mA.get(i)}function fA(A){return""===A?0:[...A].reduce((A,t)=>A+gA(uA[t]),(A.length-1)*$A)}function wA(A,t,s,i,n){const o=uA[n],a=gA(o);for(let n=0;n<o.length;n+=1)" "!==o[n]&&e(A.data,4*((i+Math.floor(n/a))*A.width+s+n%a),t)}function gA(A){return A.length/lA}function yA(A,t,s,i,e,n,{center:o,right:a,scale:h=u}={}){const r=n-i,c=pA(t,s,r/h);A.drawImage(c,i+(a?Math.floor(r-c.width*h):o?Math.floor((r-c.width*h)/2):0),e,c.width*h,c.height*h)}const xA=$("brick"),MA=2,{height:bA}=xA,vA=15,[PA,kA]=a(m/d,vA*bA);const TA=8,IA=4;function zA([A,t,s]){kA.drawImage(xA,0,0,MA,bA,A,t,MA,bA),kA.drawImage(xA,MA+1,0,MA,bA,A+s-MA,t,MA,bA),kA.drawImage(xA,MA,0,1,bA,A+MA,t,s-2*MA,bA)}function CA(A,t){return Math.round(A/t)*t}!function(){const A=function(){const A=[],t=m/d;for(let s=0;s<vA;s+=1){let i=-Math.round(Math.random()*IA);for(;i<t;){const t=TA+Math.round(Math.random()*IA);A.push([i,s*bA,t]),i+=t-1}}return A}();for(const t of A)zA(t)}();const SA=1500,OA=$("brick").height*d,EA=-m/2,LA=[[-(b+M)/2,n(11)],[-b/2,n(17)],[b/2,n(6)],[(b+M)/2,n(17)],[m/2,n(11)]];class DA{constructor(){this.glowIntensity=0}tick(A){this.glowIntensity=CA((1-Math.abs(A%SA/(SA/2)-1))**.5,.1)}draw(A){!function(A){A.image(PA,new v(0,g),{snapToTop:!0})}(A);let t=EA;for(const[s,i]of LA)A.rect(new v(t,g),new v(s,g+2*OA),{fillStyle:i,globalAlpha:.4+.3*this.glowIntensity}),t=s}}const FA=2;function RA(A,t,s,i,e,n,o){A.fillStyle=o;for(let n=0;n<=FA;n+=1)A.fillRect(t+(FA-n)*u,s+n*u,i-2*(FA-n)*u,e-2*n*u);A.fillStyle=n;for(let n=0;n<=FA-1;n+=1)A.fillRect(t+(FA-n)*u,s+(n+1)*u,i-2*(FA-n)*u,e-2*(n+1)*u)}const WA=5,jA=7,HA=6,BA=Math.round((WA+HA/2)*u);function NA(A,t,s,i,e,{arrow:a,center:h,scale:r=u}={}){const c=e-s,l=pA(t,o(0),c/r+1-2-2*WA-HA/2),$=(2*(1+WA)+l.height)*r;RA(A,s+("left"===a?HA/2*r:0),i,c-(a?HA/2*r:0),$,n(6),n(0)),a&&function(A,t,s,i){A.fillStyle=n(0);for(let e=0;e<HA/2;e+=1)A.fillRect(t+i*e*u,s-e*u,u,2*(e+1)*u);A.fillStyle=n(6);for(let e=0;e<HA/2;e+=1)A.fillRect(t+i*(e+1)*u,s-e*u,u,2*(e+1)*u)}(A,"left"===a?s:e-r,i+BA,"left"===a?1:-1),A.drawImage(l,s+(h?Math.floor((c-l.width*r)/2):(1+jA)*r),i+(1+WA)*r,l.width*r,l.height*r)}const qA={0:"0 points! wasting butter is inexcusable.\nyoungsters these days...",1:"my old bones... the plate is in the other direction!\n1 point.",2:"not only did it not land on the plate, it's also sideways! 2 points!",3:"the butter should always be on top!\nat least it landed on the plate... that's 3 points.",4:"that i had to witness such poor form...\n4 points, no comment.",5:"the form is all over the place!\n5 points and not a point more.",6:"you're almost trying, but that won't take you too far. 6 points.",7:"mediocre form, but with a hint of something...\ni'll give it 7 points.",8:"that's good form, but you could improve here and there. 8 points.",9:"9 points, you almost understand it!",10:"splendid! the execution was full of finesse!\nmost deserving of these 10 points."},VA={0:"sorry, i can't stand wasting butter.\n0 points for that.",1:"better luck next time! 1 point for encouragement.",3:"nice trick landing, but next time try to be more precise. 3 points!",5:"zzz... oops, missed that! 5 points, i guess?",6:"a side landing! nice, 6 points.",7:"don't give up, 7 points for you!",8:"you're doing well! 8 points!",9:"9 points! i aspire to be that good...",10:"woo hoo! 10 points! you rock!"},YA={0:"...such a waste of butter. 0 points from me.",1:"red means failure. 1 point.",2:"landing the toast on the side is not the kind of precision i'm looking for. 2 points and that's it.",3:"almost failing, yet not a complete failure.\namusing, 3 points.",4:"if this is the state of the magic academy these days, then we're doomed. 4 points.",5:"5 points because watching you try was fun.",6:"you're kind of getting there... but not really.\n6 points.",7:"i see an inkling of skill in you... 7 points.",8:"8 points. could have tried harder!",9:"9 points. see, i'm not that hard to satisfy!",10:"well done. 10 points."},JA=[$("old wizard"),$("old wizard",1),$("old wizard",2)],XA=JA[0].width,GA=8*u+XA*d/2,KA=m/10;class QA{constructor(){[this.canvas,this.context]=a(m,m),this.highscore=Number(localStorage.highscore)||0,this.opacity=0,this.scores={form:0,lenient:0,precision:0,total:0,set:!1},this.showScoreTimestamp=1/0}tick(A,t){isFinite(this.showScoreTimestamp)||"resting"!==t.phase||(this.showScoreTimestamp=A+400,this.showScore(A,t)),this.opacity=Math.min(Math.max((A-this.showScoreTimestamp)/400,0),1)}showScore(A,t){this.calculateScore(t),this.prerender(),this.highscore<this.scores.total&&(localStorage.highscore=this.scores.total)}calculateScore(A){const t=this.scoreForm(A),s=this.scoreLenient(A),i=this.scorePrecision(A),e=Number(((t+s+i)/3).toFixed(1));this.scores={form:t,lenient:s,precision:i,total:e,set:!0}}scoreForm(A){if(UA(A))return 0;const t=_A(A);if(ZA(A))return t<-1?1:t<0?2:3;if(t<-1)return 1;const s=(t- -1)/2,i=Math.min(Math.floor((15-A.hits)/5),0),e=Math.max(Math.ceil(6.3*s),1);return Math.max(i+e,1)+3}scoreLenient(A){if(UA(A))return 0;const t=_A(A);if(ZA(A))return t<-1?3:6;if(t<-.2)return Math.random()<.5?5:1;const s=(t- -.2)/1.2;return Math.max(Math.ceil(3.5*s),1)+6}scorePrecision(A){if(UA(A))return 0;const t=_A(A);return t<0?1:ZA(A)?2:Math.max(Math.ceil(7.2*t),1)+2}prerender(){const A=[[0,YA[this.scores.precision]],[1,VA[this.scores.lenient]],[2,qA[this.scores.form]]];for(let t=0;t<3;t+=1){const s=Math.floor(Math.random()*A.length),[[i,e]]=A.splice(s,1);this.drawWizardWithBubble(.22*m*(t+1),i,e,t%2==1)}const t=this.scores.total>this.highscore?"new highscore":"total score";NA(this.context,`${t}: ${this.scores.total}`,.25*m,.8*m,.75*m,{center:!0,scale:6})}drawWizardWithBubble(A,t,s,i){const e=A-GA;this.drawWizard(KA+GA,e,t,i),NA(this.context,s,i?KA:KA+2*GA,e,i?m-KA-2*GA:m-KA,{arrow:i?"right":"left"})}drawWizard(A,t,s,i){this.context.setTransform(i?-1:1,0,0,1,i?m:0,0),RA(this.context,A-GA,t,2*GA,2*GA,n(4),n(2));const e=JA[s];this.context.drawImage(e,A-e.width/2*d,t+GA-e.height/2*d,e.width*d,e.height*d),this.context.setTransform(1,0,0,1,0,0)}draw(A){A.image(this.canvas,new v(m/2,m/2),{absolute:!0,globalAlpha:this.opacity,imageScale:1})}}function UA(A){return Math.abs(A.r-Math.PI)<1e-4}function ZA(A){return Math.abs(A.r-.5*Math.PI)<1e-4||Math.abs(A.r-1.5*Math.PI)<1e-4}function _A(A){return 1-Math.abs(A.mid.x)/(M/2)}const At=$("toast"),tt=1.2,st=.002,it=1e-6,et=.05,nt=.001,ot=25e-5,at=32,ht=.2,rt=1e-5,ct=[new v(-M/2,-x/2),new v(-M/2,x/2),new v(M/2,x/2),new v(M/2,-x/2)];function lt(A){return A.y>g}class $t{constructor(A,t,s){this.collisionPoint=null,this.dr=Math.sign(Math.random()-.5)*(.01*Math.random()+.005+7e-4*s),this.dx=Math.sign(Math.random()-.5)*(.05*Math.random()+.02+.005*s),this.dy=tt,this.hits=0,this.mid=new v(A,t),this.phase="falling",this.r=0}tick(A){const t=this.mid.x,s=this.mid.y,i=this.r;if(null!==this.collisionPoint&&this.handleCollision(this.collisionPoint,A),"falling"===this.phase){this.mid.x+=this.dx*A,this.mid.y+=this.dy*A,this.r+=this.dr*A,this.wrap(),this.dy=this.dy*(1-st*A)+tt*st*A,this.dr=this.dr*(1-it*A)+Math.sign(Math.PI-this.r)*et*it*A;const e=1-A**this.getDampeningPower();if(this.dx*=e,this.dy*=e,this.dr*=e,this.isColliding()){const[e,n]=this.findCollisionPoint(t,s,i,A);this.collisionPoint=e,this.handleCollision(this.collisionPoint,n)}}}getDampeningPower(){return-3*(this.mid.y<f?1:this.mid.y<w?((w-this.mid.y)/(w-f))**.5*.8:1)}isColliding(){return this.getTransformedPoints().some(lt)}findCollisionPoint(A,t,s,i){let e=this.mid,n=0,o=i;for(let i=0;i<at;i+=1){const i=(n+o)/2;this.mid.x=A+this.dx*i,this.mid.y=t+this.dy*i,this.r=s+this.dr*i,this.wrap();const a=this.getTransformedPoints().find(lt);a?(o=i,e=a):n=i}return this.mid.y+=g-e.y,e.y=g,[e,i-o]}handleCollision(A,t,s=!1){const i=A.sub(this.mid).wrap();if("falling"===this.phase)this.dx=0,this.dy=0,this.dr=ot*-Math.sign(i.x),this.phase="hitting";else{const A=this.getIntersection(this.mid,new v(this.mid.x,g+1));null!==A&&(this.dr-=t/100*ot*Math.sign(i.x)*Math.max(g-A.y,0)**.6)}const e=this.dr*t,n=this.getClosestRightAngle();if(Math.sign(this.r-n)===Math.sign(this.r+e-n)||s){const A=i.rotate(e).sub(i);this.mid=this.mid.sub(A),this.mid.y=Math.min(this.mid.y,g-x/2),this.r+=e,this.wrap()}else{const s=(n-this.r)/this.dr;this.handleCollision(A,s,!0),this.collisionPoint=A.sub(this.mid).scale(-1,1).add(this.mid),this.dr*=ht,Math.abs(this.dr)<rt&&(this.dr=0,this.collisionPoint=new v(this.mid.x,g),this.phase="resting"),this.handleCollision(this.collisionPoint,t-s,!0)}}getClosestRightAngle(){const A=.25*Math.PI;for(const t of[0,.5*Math.PI,Math.PI,1.5*Math.PI])if(Math.abs(this.r-t)<=A)return t;return 2*Math.PI}tryApplyForce(A){if(null===A||!this.canApplyForce())return null;const[t,s]=A;if(null===this.getIntersection(this.mid,t))return null;const i=this.getIntersection(t,s);if(null===i)return null;const e=i.sub(t).scale(nt),n=i.sub(this.mid);return this.applyForce(n,e),this.hits+=1,i}canApplyForce(){return this.mid.y<f}getIntersection(A,t){const s=this.getTransformedPoints();s.push(s[0]);let i=null;for(let e=0;e<s.length-1;e+=1){const n=v.intersection(A,t,s[e],s[e+1]);if(null!==n){A.distance(n)<1/0&&(i=n)}}return i}getTransformedPoints(){return ct.map(A=>A.rotate(this.r).add(this.mid))}applyForce({x:A,y:t},{x:s,y:i}){this.dx+=s,this.dy+=i,this.dr+=(A*i-t*s)*ot}wrap(){for(this.mid.wrap();this.r>2*Math.PI;)this.r-=2*Math.PI;for(;this.r<0;)this.r+=2*Math.PI}draw(A){A.image(At,this.mid,{r:this.r})}}const dt=[$("wizard"),$("wizard",1),$("wizard",2),$("wizard",3),$("wizard",4)],ut=new v(m/2,m/4),mt=1,pt=dt.length-1-mt,ft=100,wt=.003,gt=8;class yt{constructor(){this.offset=-1/0,this.phase=0,this.startTimestamp=0}tick(A,t){if(this.offset=Math.sin(A*wt)*gt,t){const t=Math.floor((A-this.startTimestamp)/ft);0===this.phase?(this.startTimestamp=A,this.phase=1):this.phase<mt?this.phase=t%mt+1:this.phase=(t-mt)%pt+mt+1}else this.phase=0}draw(A){const t=ut.add(new v(0,this.offset));A.image(dt[0],t,{absolute:!0}),this.phase>0&&A.image(dt[this.phase],t,{absolute:!0})}}const xt=6e4,Mt=.5,bt=400,vt=100,Pt=bt+vt,kt=800,Tt=4*kt,It=m/15,zt=g-m/2+20*d,Ct=30,St=["click or point and drag to cast magick on a spinning slice of toast!","","the bigger the move, the more force you will unleash!","","there are only two objectives:"," 1. the toast has to land butter side up"," 2. the toast has to land in the middle"].join("\n");class Ot{constructor(A,t,s){this.display=A,this.minOverlayOpacity=0,this.mouse=t,this.needToInit=!1,this.nextPhase="intro-fade",this.now=s,this.overlayOpacity=1,this.overlayTimestamp=0,this.phase="intro",this.startTimestamp=s,this.init()}init(){this.display.resetCameraPosition(),this.actionTextTimestamp=1/0,this.showActionText=!1,this.finishingLine=new DA,this.scoring=new QA,this.toast=new $t(0,p,this.scoring.highscore),this.wizard=new yt,this.drawables="intro"===this.phase?[new Y,new Y(2),new Y(3)]:[this.wizard,new Y,new Y(2),new Y(3),this.toast,this.finishingLine,this.scoring,this.mouse]}tick(A,t){"playing"!==this.phase?this.tickIntro(A):this.tickPlaying(A,t)}tickIntro(A){this.now=A;const t=A-this.startTimestamp;"intro"===this.phase&&(this.overlayTimestamp=CA(t,xt)-(bt+vt/2)+this.startTimestamp),this.overlayTick(),"intro"===this.phase&&(this.overlayOpacity=.25*this.overlayOpacity+.75),this.display.setCameraPosition(new v(0,t%xt*Mt)),"intro"===this.phase&&this.tickActionText(!0,()=>{this.actionTextTimestamp=1/0,this.phase=this.nextPhase,this.nextPhase="playing",this.showActionText=!1,this.reset()})}tickPlaying(A,t){this.now=A,this.overlayTick(),this.toast.tick(t),this.finishingLine.tick(A),this.scoring.tick(A,this.toast),this.display.setCameraPosition(this.getNextCameraPosition()),this.mouse.tick(A,t,this.display.getOffset(),this.toast),this.wizard.tick(A,this.toast.canApplyForce()&&this.mouse.pressed),this.tickActionText("resting"===this.toast.phase,()=>{this.reset()})}tickActionText(A,t){isFinite(this.actionTextTimestamp)?this.showActionText=this.now>=this.actionTextTimestamp&&Math.floor((this.now-this.actionTextTimestamp)/kt)%2==0:A&&(this.actionTextTimestamp=this.now+Tt,setTimeout(()=>{this.setClickCallback(t)},Tt))}reset(){this.overlayTimestamp=this.now,this.minOverlayOpacity=this.overlayOpacity,this.needToInit=!0}overlayTick(){this.overlayTimestamp+Pt<this.now?this.overlayOpacity=CA(Math.max(1-(this.now-this.overlayTimestamp-Pt)/bt,0),.1):this.overlayTimestamp+bt<this.now?(this.overlayOpacity=1,this.needToInit&&(this.phase=this.nextPhase,this.init(),this.needToInit=!1)):this.overlayOpacity=Math.max(CA(Math.max((this.now-this.overlayTimestamp)/bt,0),.1),this.minOverlayOpacity)}getNextCameraPosition(){const A=this.toast.mid.y,t=Math.max(Math.min((A-f)/(w-f),1),0),s=Math.max(Math.min(zt*t+(A+It)*(1-t),A+It),.8*A+m/4);return new v(0,s)}draw(){"playing"!==this.phase?this.drawIntro():this.drawPlaying()}drawIntro(){cA(this.display);for(const A of this.drawables)A.draw(this.display);this.drawOverlay(),this.drawIntroInfo()}drawIntroInfo(){this.display.reset(),yA(this.display.context,`highscore: ${this.scoring.highscore}`,o(6),Ct,Ct,m-Ct,{right:!0}),yA(this.display.context,"space wizard",o(6),150,70,m,{scale:10}),yA(this.display.context,"toast spinning",o(6),0,140,m-150,{right:!0,scale:10}),yA(this.display.context,St,o(6),100,350,m-100,{scale:5}),this.showActionText&&yA(this.display.context,"click to start",o(6),50,910,m-50,{center:!0,scale:6})}drawPlaying(){cA(this.display);for(const A of this.drawables)A.draw(this.display);this.drawPlayingInfo(),this.drawOverlay()}drawPlayingInfo(){this.display.reset();const A=Math.round(100*Math.min(Math.max(this.toast.mid.y/f,0),1));yA(this.display.context,`distance: ${A}%`,o(6),Ct,Ct,m-Ct),yA(this.display.context,`highscore: ${this.scoring.highscore}`,o(6),Ct,Ct,m-Ct,{right:!0}),this.showActionText&&yA(this.display.context,"click to restart",o(6),Ct,Ct,m-Ct,{center:!0,scale:6})}drawOverlay(){this.overlayOpacity>0&&this.display.rect(new v(0,0),new v(m,m),{absolute:!0,fillStyle:n(0),globalAlpha:this.overlayOpacity})}setClickCallback(A){const t=s=>{s.preventDefault(),this.display.canvas.removeEventListener("mousedown",t),this.display.canvas.removeEventListener("touchstart",t),A()};this.display.canvas.addEventListener("mousedown",t),this.display.canvas.addEventListener("touchstart",t)}}const Et=20;document.title="Space Wizard Toast Spinning",document.documentElement.style.background=n(1);const Lt=new class{constructor(){[this.canvas,this.context]=a(m,m),document.body.appendChild(this.canvas),this.resetCameraPosition()}setCameraPosition(A){this.trackingDy?this.dy=A.y-this.cameraPosition.y:this.trackingDy=!0,this.cameraPosition=A}resetCameraPosition(){this.cameraPosition=new v(0,0),this.dy=0,this.trackingDy=!1}getOffset(){return k.sub(this.cameraPosition)}rect(A,t,s){const{absolute:i,r:e,z:n,...o}={...I,...s};Object.assign(this.context,o);const{x:a,y:h}=this.getTransformedPoint(i,A,n),{x:r,y:c}=this.getTransformedPoint(i,t,n);this.context.beginPath(),this.context.rect(a,h,r-a,c-h),this.context.closePath(),o.fillStyle&&this.context.fill(),o.strokeStyle&&this.context.stroke()}image(A,t,s){const{absolute:i,imageScale:e,r:n,snapToBottom:o,snapToLeft:a,snapToRight:h,snapToTop:r,z:c,...l}={...I,...s};Object.assign(this.context,l);const{x:$,y:d}=this.getTransformedPoint(i,t,c),u=A.width*e,p=A.height*e;this.setRotation(n,$,d);const f=a?0:h?-u:-u/2,w=r?0:o?-p:-p/2;this.context.drawImage(A,$+f,d+w,u,p),$<m/2?(this.setRotation(n,$+m,d),this.context.drawImage(A,$+f+m,d+w,u,p)):(this.setRotation(n,$-m,d),this.context.drawImage(A,$+f-m,d+w,u,p)),this.setRotation(0)}getTransformedPoint(A,t,s){return A?t.round():t.sub(this.cameraPosition).scale(s).add(k).round()}setRotation(A,t=0,s=0){const i=Math.cos(A),e=Math.sin(A);this.context.setTransform(i,e,-e,i,t*(1-i)+s*e,s*(1-i)-t*e)}reset(){Object.assign(this.context,T)}clear(){this.context.clearRect(0,0,m,m)}},Dt=new class{constructor(){this.lastPoint=null,this.now=-1/0,this.points=new Set,this.pressed=!1,this.sparkles=new j}init(A){A.canvas.addEventListener("mousedown",t=>{t.preventDefault(),this.start(t,A)}),A.canvas.addEventListener("touchstart",t=>{t.preventDefault(),this.start(this.normalizeTouchEvent(t),A)}),A.canvas.addEventListener("mousemove",t=>{t.preventDefault(),this.move(t,A)}),A.canvas.addEventListener("touchmove",t=>{t.preventDefault(),this.move(this.normalizeTouchEvent(t),A)}),window.addEventListener("mouseup",()=>{this.stop()}),window.addEventListener("touchend",()=>{this.stop()}),window.document.addEventListener("visibilitychange",()=>{this.stop()}),window.addEventListener("contextmenu",A=>{A.preventDefault()})}normalizeTouchEvent(A){return A.touches[0]}start(A,t){this.pressed=!0,this.pushPoint(A,t.canvas)}move(A,t){this.pressed&&this.pushPoint(A,t.canvas)}stop(){this.clearPoints(),this.pressed=!1}pushPoint(A,t){const{left:s,top:i,width:e,height:n}=t.getBoundingClientRect();this.lastPoint=new P((A.clientX-s)*m/e,(A.clientY-i)*m/n,this.now),this.points.add(this.lastPoint),this.sparkles.add(this.lastPoint)}tick(A,t,s,i){if(this.sparkles.tick(A,t),this.now=A,!this.pressed)return;this.removeOldPoints();const e=this.getIntersectionPoint(i,s);null!==e&&(this.sparkles.add(P.fromPoint(e.add(s),A),!0),this.clearPoints())}getIntersectionPoint(A,t){const s=A.tryApplyForce(this.getCurrentVector(t));return null!==s?s:null===this.lastPoint?null:A.tryApplyForce(this.getCurrentVector(t.sub(new v(this.lastPoint.x<m/2?m:-m,0))))}getCurrentVector(A){if(this.points.size<2||null===this.lastPoint)return null;const[t]=this.points;return[t.sub(A),this.lastPoint.sub(A)]}removeOldPoints(){const A=[];for(const t of this.points)t.timestamp<this.now-H&&A.push(t);for(const t of A)this.points.delete(t);0===this.points.size&&(this.lastPoint=null)}clearPoints(){this.points=new Set,this.lastPoint=null}draw(A){this.sparkles.draw(A)}};Dt.init(Lt),function(A,t){let s,i=0,e=!0;requestAnimationFrame(function n(o){requestAnimationFrame(n);const a=Math.min(o-i,Et);i=o,e?e=!1:(s||(s=new Ot(A,t,o)),A.clear(),s.draw(),s.tick(o,a))})}(Lt,Dt);</script>
