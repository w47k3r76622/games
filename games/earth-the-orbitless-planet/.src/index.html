<html><head><title>Earth - the orbitless planet</title><meta charset="utf-8" /><style>body{margin:0;padding:0;background:#000;}canvas{margin:auto;height:100vh;display:block;background:#00000B;}</style></head><body><canvas id="c"></canvas><script>$="prototype";$r=Math.random;(function(){function m(a,b){for(var d=0;d<b.length;d++){var f=b[d];t[f]||(t[f]=[]);t[f].push(a)}}function p(a,b){if(t[a]){for(var d=0,f=0,c=t[a];f<c.length;f++){var g=c[f];g[a](b)||(t[a][d++]=g)}t[a].length=d}}function ba(a,b,d,f){a/=f;return d*a*a*a+b}function ua(a,b,d,f){a/=f;a--;return d*(a*a*a+1)+b}function L(a,b,d,f){a/=f/2;if(1>a)return d/2*a*a+b;a--;return-d/2*(a*(a-2)-1)+b}function J(a,b,d,f){R[a]=[b,d,f]}function C(a,b,d){return a<b?b:a>d?d:a}function D(a){return a[0]+$r()*(a[1]-
a[0])}function va(a,b){if(1===a.shapeType){if(1===b.shapeType)return a.x<b.x+b.width&&b.x<a.x+a.width&&a.y<b.y+b.height&&b.y<a.y+a.height;var d=C(b.x,a.x,a.x+a.width)-b.x;var f=C(b.y,a.y,a.y+a.height)-b.y;return d*d+f*f<b.radius*b.radius}if(0===b.shapeType)return f=a.x-b.x,d=a.y-b.y,a=a.radius+b.radius,f*f+d*d<a*a;d=C(a.x,b.x,b.x+b.width)-a.x;f=C(a.y,b.y,b.y+b.height)-a.y;return d*d+f*f<a.radius*a.radius}function wa(a){if(0===a)return null;var b=0>a;a=Math.abs(a);return new Oa({bulletConfig:{color:Pa[a-
1],damage:a,isPlayerBullet:!0,radius:4+3*a,speed:850+150*a},image:q[0+a],reloadTime:.4-.05*a,rotate:b})}function ca(a){a=Math.min(a,xa.length-1);var b=xa[a];a=new Qa;var d=b[0],f=b[1],c=b[2],g=b[3];b=b.slice(4);a.hm=new da(Math.PI/d,f);a.sideGunPhaseOffset=Math.PI/c;a.mainGun=wa(g);a.setSideGun(b.map(function(b){return wa(b)}));return a}function ya(){requestAnimationFrame(ya);if(ea){h=Math.min((Date.now()-za)/1E3,.02);za=Date.now();n.width^=0;F=new Ra;p(0);p(1);for(var a=2;12>=a;++a)p(a);p(13)}}function Aa(){for(var a=
c.getImageData(0,0,n.width,n.height),b=0;b<a.data.length;b+=4)0!==a.data[b+3]&&(a.data[b]=a.data[b+1]=a.data[b+2]=a.data[b+3]=255);c.putImageData(a,0,0)}function Sa(a,b,d){void 0===b&&(b=c);void 0===d&&(d="round");var f=n.width,e=n.height;b.strokeStyle=a.color;b.lineCap=d;b.fillStyle=a.color;d=a.data.reduce(function(b,d){return b+("number"===typeof d?d:1)},0);e=b.lineWidth=e/d;b.lineWidth+=2;d=0;for(var g=e/2;d<a.data.length;++d,g+=e){var k=a.data[d];if("number"===typeof k)g+=e*(k-1);else for(var h=
0;h<k.length;h++){var l=k[h],m=l[0]*f/100;l=l[1]*f/100;b.beginPath();b.moveTo(m,g);b.lineTo(l,g);b.stroke()}}}function S(a){c.save();var b=a.size,d=.075*b,f=2.5*b,e=a.x;e=void 0===e?f/2:e;var g=a.y;g=void 0===g?b/2:g;a=a.color;c.save();c.translate(e,g);c.save();c.beginPath();c.arc(0,0,b/2,Math.PI,0);c.fillStyle="rgba(194,238,254,0.601)";c.fill();c.beginPath();c.arc(0,0,.6*b,-Math.PI/6,0);c.arc(0,0,.6*b,Math.PI,5*-Math.PI/6);c.fillStyle="#B5CFD9";c.fill();e=0;for(g=.6*-b;3>e;++e,g+=.6*b)c.beginPath(),
c.arc(g,.1*b,.275*b,0,Math.PI),c.fill();c.scale(1,.175);c.beginPath();c.arc(0,0,f/2-d/2,-Math.PI/3,Math.PI/3);c.arc(0,0,f/2-d/2,2*Math.PI/3,2*-Math.PI/3);c.fillStyle=a;c.fill();c.beginPath();c.arc(0,0,f/2-d/2,0,Math.PI/3);c.arc(0,0,f/2-d/2,2*Math.PI/3,Math.PI);c.fillStyle="rgba(0,0,0,0.3)";c.fill();c.restore();c.beginPath();c.moveTo(-f/2+d/2,0);c.lineTo(f/2-d/2,0);c.lineWidth=d;c.lineCap="round";c.strokeStyle="white";c.stroke();c.restore()}function x(a,b,d){void 0===d&&(d=1);Ba[a]=d;J(a,b.width/d,
b.height/d,function(){var d=void 0;void 0===d&&(d=c);d.fillStyle=b.background;d.fillRect(0,0,n.width,n.height);for(var a=0,g=b.layers;a<g.length;a++)Sa(g[a],d)})}function Ca(a,b,d,f,e,g){c.textAlign="center";c.textBaseline="middle";c.strokeStyle=c.fillStyle="cyan";c.fillText(e,a,b);a-=d/2;b-=f/2;c.strokeRect(a,b,d,f);var k=[fa,ha];e=k[0];k=k[1];a<e&&a+d>e&&b<k&&b+f>k&&(c.fillStyle="rgba(255,255,255,.2)",c.fillRect(a,b,d,f),T&&!ia&&(g(),ia=!0,setTimeout(function(){return ia=!1},5E3)))}function v(a,
b){for(var d=[];a--;)d.push(b());return d}function y(a,b){for(var d=[];a--;)d.push(b);return d}function Ta(a){var b=[1,1,3,3,6,6,10,10,15],d=[1,1,2,2,2,2,3,3,4],f=E[a];return[].concat(v(5*(a+1),function(){return{cost:Math.floor(100/(a+2)),enemyConfigList:[f],enemyPositionProcess:new G,selfPositionProcessor:new w(2)}}),v(3>a?5:3,function(){return{cost:3>a?50:100,enemyConfigList:y(9*Math.min(a+1,5),f),enemyPositionProcess:new M(9,80),selfPositionProcessor:new w(2,0)}}),v(20,function(){return{cost:6>
a?25:33,enemyConfigList:y(2+a,f),enemyPositionProcess:new N,selfPositionProcessor:new w}}),v(10+5*a,function(){var b=0;switch(Math.floor(5*$r())){case 0:b=2;var d=new M(Math.round($r())+1);break;case 1:b=4;d=new M(2);break;case 2:b=3;d=new G;break;case 3:b=3;d=new M(2*Math.round($r())+1);break;case 4:b=2,d=new N}return{cost:6>a?20:14,enemyConfigList:y(b,f),enemyPositionProcess:d,selfPositionProcessor:new w}}),v(15,function(){var c=$r();if(.33>c){c=b[a];var g=new G}else.66>
c?(c=d[a]*d[a],g=new M(d[a])):(c=Math.floor(1.25*a)+2,g=new ja);return{cost:50,enemyConfigList:y(c,f),enemyPositionProcess:g,selfPositionProcessor:new U(500,Math.PI)}}),v(2,function(){return{enemyConfigList:y(10+3*a,f),enemyPositionProcess:new ja,selfPositionProcessor:new U(430+30*a)}}),v(a+2,function(){return{cost:Math.floor(100/Math.min(a+1,3)),enemyConfigList:y(5,f),enemyPositionProcess:new ja,selfPositionProcessor:new U(700,void 0,!1)}}),v(5*(a+1),function(){return{cost:Math.floor(100/(a+2)),
enemyConfigList:[f],enemyPositionProcess:new G,selfPositionProcessor:new w(2)}}))}function A(a,b,d){return{bulletConfig:{color:"#FF4500",radius:10,speed:700},fireTimeRange:[.1,.2],hitImageId:26,imageId:27+a,live:d,rewardScore:b}}function V(a){var b=0;m((d={},d[12]=function(){b+=16;750>b-16&&750<b&&a();if(1500>b){var d=b;d/=750;1>d?d=-1920*d*d*d+1280:(d-=2,d=-1920*(d*d*d+2)+1280);c.clearRect(d,0,2560,768)}return 1500<b},d),[12]);var d}function Ua(){n.style.cursor="auto";c.fillStyle="cyan";c.textAlign=
"center";c.textBaseline="top";c.font="180px Arial";c.fillText("EARTH",640,30);c.font="50px Arial";c.fillText("THE ORBITLESS PLANET",640,200);var a=JSON.parse(localStorage.getItem("etop-data"));c.fillStyle="white";c.font="small-caps 30px Arial";c.fillText("Made by Quang Loc Tran",640,260);c.font="30px Arial";c.fillText("HIGHSCORE: "+a.highscore,640,340);if(sessionStorage.getItem("etop-data")){var b=JSON.parse(sessionStorage.getItem("etop-data"));c.fillText("YOUR SCORE: "+b.lastScore,640,470);b.lastScore>=
a.highscore&&(c.fillStyle="yellow",c.fillText("NEW HIGH SCORE",640,500));c.fillStyle="lime";c.font="70px Arial";c.fillText(b.isLose?"GAME OVER":"YOU WON",640,380)}c.font="60px Arial";Ca(640,600,600,70,"NEW GAME",function(){V(function(){W=1;l=new Da;X.startStage(0)})});null!=a.lastGunLevel&&Ca(640,700,600,70,"CONTINUE",function(){V(function(){W=1;l=new Da;l.setGunLv(a.lastGunLevel);X.startStage(a.lastStage)})})}function Va(){n.style.cursor="none";c.fillStyle="rgba(0,190,255,.546)";c.strokeStyle="#00DCFF";
var a=c.lineWidth=5;c.font="bold 30px Courier New";c.textBaseline="top";var b=Math.max(100,c.measureText(""+B).width);c.beginPath();c.moveTo(1280+a,0);c.lineTo(1280+a,35);c.lineTo(1280-b,35);c.arc(1280-b,0,35,Math.PI/2,Math.PI);c.closePath();c.moveTo(-a,0);c.lineTo(-a,35);c.lineTo(70,35);c.arc(70,0,35,Math.PI/2,0,!0);c.closePath();c.fill();c.stroke();c.fillStyle="white";c.textAlign="right";c.fillText(""+B,1280,0);c.textAlign="left";c.fillText(""+l.live,40,0);if(u.activeBosses.length){for(var d=b=
a=0,f=u.activeBosses;d<f.length;d++){var e=f[d];a+=e.config.live;b+=e.live}c.fillRect(340,10,600*(1-b/a),30);c.strokeRect(340,10,600,30)}else c.textAlign="center",c.fillText("Next stop: "+"Neptune;Uranus;Saturn;Jupiter;Mars;Earth???;Venus;Mercury;Sun;Earth's orbit".split(";")[X.currentStage],640,0);c.textAlign="left";c.fillStyle="red";c.fillText("\ud83d\udc9a",0,0)}var n=document.getElementById("c"),c=n.getContext("2d"),t=[],R=[],q=[],r=2*Math.PI,Y=Math.PI/2,da=function(){function a(b,d,a){void 0===
a&&(a=0);this.amplitute=b;this.period=d;this.t=this.period*a/r}a[$].process=function(b){for(this.t+=b;this.t>this.period;)this.t-=this.period};a[$].getX=function(b){void 0===b&&(b=0);return this.amplitute*Math.cos(this.getPhase(b))};a[$].getY=function(b){void 0===b&&(b=0);return this.amplitute*Math.sin(this.getPhase(b))};a[$].getPhase=function(b){void 0===b&&(b=0);return r*(this.t+b)/this.period};return a}(),fa=0,ha=0,T=!1;window.onmousedown=function(a){T=!0;a.preventDefault()};
window.onmousemove=function(a){var b=n.getBoundingClientRect();fa=C(1280*(a.clientX-b.left)/n.offsetWidth,0,1280);ha=C(768*(a.clientY-b.top)/n.offsetHeight,0,768);a.preventDefault()};window.onmouseup=function(a){T=!1;a.preventDefault()};var ka=function(){function a(){}a.createPartical=function(b,d,c,e,g,k){void 0===g&&(g="red");for(void 0===k&&(k=60);b--;)(new a).init(d+(2*$r()-1)*e,c+(2*$r()-1)*e,e+(2*$r()-1)*(e-3),g,k)};a[$].init=function(b,d,a,c,g){this.x=b;this.y=
d;this.age=g;this.radius=a;this.angle=r*$r();this.color=c;this.currentTime=0;m(this,[0,2])};a[$][0]=function(){this.x+=4*Math.cos(this.angle);this.y+=4*Math.sin(this.angle);++this.currentTime;return this.currentTime>=this.age};a[$][2]=function(){c.globalAlpha=ua(this.currentTime,1,-1,this.age);c.beginPath();c.arc(this.x,this.y,this.radius,0,r);c.fillStyle=this.color;c.fill();c.globalAlpha=1;return this.currentTime>=this.age};return a}(),Ea=Math.PI/6,la=function(){function a(b,
d,a,c){void 0===d&&(d=0);void 0===a&&(a=b.height/2);void 0===c&&(c=!1);this.surfaceMap=b;this.lightSourceAngle=d;this.radius=a;this.hasRing=c;this.mapPosition=this.y=this.x=0;this.spinSpeed=this.surfaceMap.height/2}a[$].getScaleRatio=function(){return this.radius/this.surfaceMap.height*2};a[$][0]=function(){this.mapPosition+=h*this.spinSpeed;this.mapPosition>this.surfaceMap.width*this.getScaleRatio()&&(this.mapPosition-=this.surfaceMap.width*this.getScaleRatio())};a[$][2]=function(){c.save();
c.translate(this.x,this.y);c.save();c.rotate(Ea);c.beginPath();c.arc(0,0,this.radius,0,r);c.clip();var b=-this.radius+this.mapPosition,d=-this.radius,a=this.surfaceMap.width*this.getScaleRatio(),e=2*this.radius;c.drawImage(this.surfaceMap,b,d,a,e);c.drawImage(this.surfaceMap,b-a+3,d,a,e);c.restore();c.save();c.rotate(this.lightSourceAngle);c.beginPath();c.arc(this.radius,0,this.radius*Math.SQRT2,3*-Math.PI/4,3*Math.PI/4,!0);c.arc(0,0,this.radius,Y,-Y);c.fillStyle="rgba(0,0,0,0.5)";c.fill();c.restore();
this.hasRing&&(c.rotate(Ea),c.scale(1,.1),b=Math.PI/7.3,d=Math.PI/3.5,c.beginPath(),c.arc(0,0,1.1*this.radius,-b,Math.PI+b),c.arc(0,0,1.6*this.radius,Math.PI+d,-d,!0),c.fillStyle="rgba(183,160,146,.5)",c.fill());c.restore()};return a}(),Wa=function(){function a(b,d,a,c){this.x=b;this.y=d;this.width=a;this.height=c;this.shapeType=1}a[$].getBounds=function(){return[this.x,this.y,this.x+this.width,this.y+this.height]};return a}(),Z=function(){function a(b,d,a){this.x=b;this.y=d;this.radius=a;
this.shapeType=0}a[$].getBounds=function(){return[this.x-this.radius,this.y-this.radius,this.x+this.radius,this.y+this.radius]};return a}(),Fa=function(){function a(){this.collisionShape=new Z(0,0,0)}a[$].init=function(b,d,a,c){this.collisionShape.radius=b.radius;this.collisionShape.x=d;this.collisionShape.y=a;this.speed=b.speed;this.angle=c;this.color=b.color;this.isDead=!1;this.damage=b.damage||1;this.tag=b.isPlayerBullet?1:2;m(this,[0,3])};a[$][0]=function(){var b=this.collisionShape.x+=
this.speed*Math.cos(this.angle)*h,d=this.collisionShape.y+=this.speed*Math.sin(this.angle)*h;if(-20>b||-20>d||1300<b||788<d)this.isDead=!0;7===this.tag&&(this.isDead=!0);this.isDead||F.insert(this);return this.isDead};a[$][3]=function(){var b=this.collisionShape,d=b.x;b=b.y;c.beginPath();c.lineWidth=2*this.collisionShape.radius;c.lineCap="round";c.strokeStyle=this.color;c.globalAlpha=.3;c.moveTo(d-20*Math.cos(this.angle),b-20*Math.sin(this.angle));c.lineTo(d,b);c.stroke();c.beginPath();c.globalAlpha=
1;c.moveTo(d,b);c.lineTo(d,b);c.stroke();return this.isDead};return a}(),Oa=function(){function a(b){this.config=b;this.angle=this.y=this.x=0;this.isFiring=!1;this.currentTime=0}a[$].fire=function(){var b=this.config.image.width,d=this.config.rotate?this.angle:0;(new Fa).init(this.config.bulletConfig,this.x+b*Math.cos(d),this.y+b*Math.sin(d),d)};a[$][0]=function(){this.currentTime-=h;0>=this.currentTime&&(this.currentTime+=this.config.reloadTime,this.isFiring&&this.fire());this.config.rotate||
(this.angle=0)};a[$][2]=function(){c.save();c.shadowBlur=this.config.image.height/10;c.shadowColor="black";c.translate(this.x,this.y);c.rotate(this.angle);c.drawImage(this.config.image,0,-this.config.image.height/2);c.restore()};a[$].clone=function(){return new a(this.config)};return a}(),ma=!1;window.onkeydown=function(a){32===a.keyCode&&(ma=!0)};window.onkeyup=function(a){32===a.keyCode&&(ma=!1)};var Qa=function(){function a(){this.y=this.x=0;this.mainGun=null}a[$].setSideGun=
function(b){this.leftSideGunList=b.map(function(b){return b.clone()});this.rightSideGunList=b};a[$][0]=function(){this.hm.process(h);var b=this.sideGunPhaseOffset/r*this.hm.period,d=T||ma;this.mainGun&&(this.mainGun.x=this.x+this.planetRadius,this.mainGun.y=this.y,this.mainGun.angle=0,this.mainGun.isFiring=d,this.mainGun[0]());for(var a=0,c=0;a<this.leftSideGunList.length;++a,c+=b){var g=this.leftSideGunList[a],k=this.rightSideGunList[a];g.angle=this.hm.getX(c);k.angle=this.hm.getX(c+this.hm.period/
2);g.x=this.x+this.planetRadius*Math.cos(g.angle);g.y=this.y+this.planetRadius*Math.sin(g.angle);k.x=this.x+this.planetRadius*Math.cos(k.angle);k.y=this.y+this.planetRadius*Math.sin(k.angle);g.isFiring=k.isFiring=d;g[0]();k[0]()}};a[$][2]=function(){for(var b,d=0,a=this.leftSideGunList;d<a.length;d++)b=a[d],b[2]();d=0;for(a=this.rightSideGunList;d<a.length;d++)b=a[d],b[2]();if(this.mainGun)this.mainGun[2]()};return a}(),Pa=["#00CED1","#7FFFD4","#00FF7F"],xa=[[0,1,0,1],[6,2,0,0,1],[6,2,0,1,
-1],[6,2,0,2,-1],[6,2,0,1,-2],[6,2,0,2,-2],[4,2,6,3,1,-1],[4,2,6,3,1,-2],[4,2,6,3,1,-2],[4,2,6,3,1,-2],[4,2,6,3,1,-2],[4,2,6,3,1,-2],[4,2,6,3,2,-2],[4,2,6,3,2,-2],[4,2,6,3,2,-2],[4,2,6,3,2,-2],[4,2,6,3,2,-2],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,2,-3],[4,2,6,3,3,-3]],Xa=function(){function a(b,d,a){this.rocketSize=b;this.flameSize=d;this.hm=a;this.previousY=this.previousX=this.y=this.x=0}a[$][0]=function(){this.hm.process(h);
var b=this.flameSize/3;this.realFlameSize=this.flameSize+3*(this.x-this.previousX);this.realFlameSize+=b*($r()-.5);this.realFlameSize<this.flameSize/10&&(this.realFlameSize=this.flameSize/10);this.previousX=this.x;this.previousY=this.y};a[$].renderRocketPart=function(){for(var b=this.x-this.hm.getX(),d=this.y,a=this.rocketSize/2,e=0,g=[[b-2*a,d-a,"#79E9DD"],[b-1.5*a,d-a,"#36C3DE"]];e<g.length;e++){var k=g[e],h=k[0],l=k[1];c.fillStyle=k[2];c.beginPath();c.moveTo(h,l);c.lineTo(h,l+2*
a);c.lineTo(h+a/2,l+1.8*a);c.lineTo(h+a/2,l+2*a*(1-.9));c.fill()}c.fillStyle="#2468B4";c.beginPath();c.arc(b-a,d,a,-Y,Y);c.fill()};a[$].renderFlamePart=function(){var b=this.rocketSize/2,d=this.x-this.hm.getX()-2*b,a=this.y;c.save();c.translate(d,a);c.shadowBlur=20;c.globalAlpha*=.5;d=0;for(a=[[1,"red"],[.618,"yellow"]];d<a.length;d++){var e=a[d],g=e[0];e=e[1];c.beginPath();c.moveTo(0,.618*-b*g);c.lineTo(.618*-this.realFlameSize*g,-b*g);c.lineTo(-this.realFlameSize*g,0);c.lineTo(.618*-this.realFlameSize*
g,b*g);c.lineTo(0,.618*b*g);c.shadowColor=c.fillStyle=e;c.fill()}c.restore()};a[$][2]=function(){this.renderRocketPart();this.renderFlamePart()};return a}(),Ya=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,d){b.__proto__=d}||function(b,d){for(var a in d)d.hasOwnProperty(a)&&(b[a]=d[a])};return function(b,d){function c(){this.constructor=b}a(b,d);b[$]=null===d?Object.create(d):(c[$]=d[$],new c)}}(),Da=function(a){function b(){var b=a.call(this,
q[48])||this;b.collisionShape=new Z(0,0,0);b.tag=0;b.live=3;b.level=0;b.collisionShape.radius=b.radius;b.currentTime=3;b.rocket=new Xa(b.radius/1.5,1.25*b.radius,new da(5,1,r*$r()));b.gunFormation=ca(b.level);m(b,[0,1,5]);return b}Ya(b,a);b[$][0]=function(){if(this.isdead())return setTimeout(function(){return p(21)},2E3),!0;0<this.currentTime&&(this.currentTime-=h);if(3<this.currentTime)return!1;var b=[fa,ha];this.x=b[0];this.y=b[1];this.gunFormation.planetRadius=1.1*this.radius;this.collisionShape.x=
this.gunFormation.x=this.x;this.collisionShape.y=this.gunFormation.y=this.y;this.rocket[0]();this.rocket.x=this.x-this.radius-10;this.rocket.y=this.y;a[$][0].call(this);this.gunFormation[0]();F.insert(this);return!1};b[$][1]=function(){if(3<this.currentTime)return!1;for(var b=0,a=F.retrive(this);b<a.length;b++){var c=a[b],g=c.tag;if(0>this.currentTime&&(2===g&&(c.tag=7),-1<[3,2,5].indexOf(g)))return this.loseLive(),!1;4===g&&(this.gunFormation=ca(++this.level))}return this.isdead()};
b[$][5]=function(){3>this.currentTime&&(a[$][2].call(this),this.rocket[2](),this.gunFormation[2]());if(this.isRelax()){var b=1.4*this.radius;c.save();c.lineWidth=10;c.fillStyle=c.strokeStyle="#00DCFF";c.beginPath();c.arc(this.x,this.y,b,0,r);c.globalAlpha=ua(this.currentTime,0,.5,3);c.fill();c.stroke();c.restore()}return this.isdead()};b[$].isRelax=function(){return 0<this.currentTime&&3>this.currentTime};b[$].isdead=function(){return 1>this.live};b[$].justDead=
function(){return 3<this.currentTime};b[$].loseLive=function(){0>this.currentTime&&(--this.live,this.level=10<this.level?this.level>>1:this.level-(+(0<this.level)+ +(2<this.level)+ +(5<this.level)+ +(8<this.level)),this.setGunLv(this.level),ka.createPartical(100,this.x,this.y,6,"cyan"),this.currentTime=5)};b[$].setGunLv=function(b){this.level=b;this.gunFormation=ca(this.level)};return b}(la),Ra=function(){function a(b){void 0===b&&(b=5);this.powerOf2=b;this.hash={}}a[$].insert=
function(b){var a=this.getPositions(b.collisionShape),c=a[1],e=a[2],g=a[3];for(a=a[0];a<=e;++a)for(var k=c;k<=g;++k){var h=this.hashFunc(a,k);this.hash[h]||(this.hash[h]=[]);this.hash[h].push(b)}};a[$].retrive=function(b){var a=[],c=this.getPositions(b.collisionShape),e=c[0],g=c[1],k=c[2];c=c[3];for(var h=e;h<=k;++h)for(var l=g;l<=c;++l){var m=this.hashFunc(h,l);if(this.hash[m]){var n=0;for(m=this.hash[m];n<m.length;n++){var p=m[n];if(p!==b){var q=this.getPositions(p.collisionShape),r=q[1];
Math.max(q[0],e)===h&&Math.max(r,g)===l&&va(p.collisionShape,b.collisionShape)&&a.push(p)}}}}return a};a[$].getPosition=function(b,a){return[b>>this.powerOf2,a>>this.powerOf2]};a[$].getPositions=function(b){b=b.getBounds();for(var a=b.length;a--;)b[a]>>=this.powerOf2;return b};a[$].hashFunc=function(b,a){return b<<25|a};return a}(),l=null,h=null,F=null,W=0,B=0,na=5E5,za=Date.now(),ea=!0;window.onfocus=function(){ea=!0};window.onblur=function(){ea=!1};for(var Za=["#525564 #74828f #96c0ce #beb9b5 #c25b56 #fef6eb".split(" "),
"#462066 #FFB85F #FF7A5A #00AAA0 #8ED2C9 #FCF4D9".split(" "),"#6F3662 #FF7182 #FFAE5D #F8F8F2 #F8DEBD #9F6164".split(" ")],$a=function(a){J(1+a,60,25+3*a,function(){var b={size:25+3*a,colorScheme:Za[a]},d=b.size,f=b.x;f=void 0===f?0:f;var e=b.y;e=void 0===e?d/2:e;b=b.colorScheme;c.save();c.translate(f,e);c.beginPath();c.arc(1.5*d,0,.2*d,0,r);c.fillStyle=b[2];c.fill();c.fillStyle=b[3];for(f=-1;2>f;f+=2)c.beginPath(),c.moveTo(1.5*d,f*d*.2),c.lineTo(.5*d,f*d*.2),c.lineTo(.7*d,f*d*.4),c.fill();c.save();
c.beginPath();c.rect(0,-d/2,.75*d,d);c.clip();c.scale(1,.7);f=0;for(e=[[!1,b[2]],[!0,b[1]]];f<e.length;f++){var g=e[f],k=g[0];g=g[1];c.beginPath();c.arc(d/2,0,d/2,.75*-Math.PI,.75*Math.PI,k);c.fillStyle=g;c.fill()}c.restore();c.beginPath();c.moveTo(1.5*d,0);c.lineTo(.7*d,.15*d);c.lineTo(.5*d,0);c.lineTo(.7*d,.15*-d);c.fillStyle=b[5];c.fill();c.beginPath();c.arc(.75*d,0,.1*d,0,r);c.fillStyle=b[4];c.fill();c.restore()})},O=-1;3>++O;)$a(O);J(4,100,40,function(){S({color:"",size:40});Aa()});J(26,500,
200,function(){S({color:"",size:200});Aa()});var oa="red orange yellow #ADFF2F #00FF7F #008B8B #9370DB #DC143C #696969".split(" "),ab=function(a){J(5+a,100,40,function(){S({color:oa[a],size:40})});J(27+a,500,200,function(){S({color:oa[a],size:200})})};for(O=oa.length;O--;)ab(O);var Ba=[];x(48,{background:"#1b537a",height:90,layers:[{color:"#2d872d",data:[1,[[6,36],[0,1],[64,101]],[[14,32],[53,90]],[[17,30],[49,86]],[[19,27],[46,83]],[[23,29],[47,64],[77,81],[70,71]],[[28,38],[52,63]],[[29,39],[53,
61],[84,89]],[[31,36],[54,58],[80,91]],[[29,32]],[[30,33]],2]},{color:"#66ac18",data:[2,[[16,21]],[[60,80],[16,24]],[[54,57]],[[48,54],[56,63]],1,[[53,59],[82,89]],4]},{color:"#ebebeb",data:[1,[[34,43]],[[37,39]],10,[[11,32],[10,10],[41,97]],[[0,102]]]}],width:180});x(49,{background:"#2d2d2d",height:250,layers:[{color:"#696969",data:[[[0,122]],[[9,12],[33,38],[57,61],[84,88]],[[8,12],[33,37],[58,62],[86,89]],[[9,13],[34,38],[57,61],[85,87]],[[9,12],[33,36],[59,61],[86,90]],[[0,121]],[[24,27],[47,
52],[73,76],[98,102],[0,1]],[[23,27],[47,49],[71,74],[98,101],[0,1]],[[24,28],[48,51],[72,75],[0,1],[99,104]],[[25,27],[46,50],[73,76],[0,1],[98,104]]]},{color:"#ffffff",data:[[[0,107]],16,[[0,120]]]}],width:500});x(50,{background:"#6888b6",height:400,layers:[{color:"#6d67cd",data:[1,[[0,102]],4,[[0,101]],1]},{color:"#5a44c3",data:[8,[[31,37]],5]},{color:"#cdcdcd",data:[6,[[52,58]],3,[[76,83]],[[21,31]],2,[[75,83]],[[38,52]],[[30,33]],6,[[15,31]],2]}],width:800},8);x(51,{background:"#a0b8dc",height:400,
layers:[{color:"#bbc9eb",data:[8,[[0,101]],[[0,104]],[[0,101]],[[0,100]],9]},{color:"#b3a1c3",data:[[[0,109]],[[0,102]],15,[[0,109]],[[0,105]]]},{color:"#d9d9d9",data:[13,[[10,17],[74,81]],19]},{color:"#979dbe",data:[3,[[34,53]],16,[[39,59]],7]}],width:800},8);x(52,{background:"#b1917f",height:700,layers:[{color:"#87684d",data:[[[0,103]],5,[[0,101]]]},{color:"#deb170",data:[2,[[0,106]],5]},{color:"#edd071",data:[3,[[0,104]],3]},{color:"#a79363",data:[4,[[0,103]],3,[[0,101]],13]}],width:1400},8);x(53,
{background:"#e6cb9c",height:700,layers:[{color:"#c39270",data:[[[0,101]],6,[[0,104]]]},{color:"#e8a163",data:[2,[[0,107]],[[0,102]],2,[[0,106]],2,[[0,105]],[[0,110]],2]},{color:"#9d5f3d",data:[6,[[25,88]],1,[[8,95]],6]},{color:"#dc742c",data:[16,[[22,26]],[[19,28]],[[21,29]],9]}],width:1400},8);x(54,{background:"#a02d14",height:85,layers:[{color:"#e84513",data:[2,[[57,82],[4,14]],[[0,14],[61,104],[27,47]],[[54,76],[3,18]],[[63,82],[37,49]],[[14,33]],[[29,57]],1]},{color:"#432a1d",data:[1,[[77,93]],
[[17,48],[84,97]],[[82,92]],1,[[15,21]],[[15,27],[0,5],[95,102]],[[57,70],[11,41],[81,91]],[[53,67],[85,96]],3]},{color:"#ffffff",data:[[[0,102]],[[0,20],[88,101]],[[43,48]],24,[[0,10],[72,102]]]}],width:170},2);x(55,{background:"#b16c1f",height:85,layers:[{color:"#7f4b1c",data:[[[64,83],[0,20]],[[59,83],[0,15],[96,101]],[[65,74]],[[35,52]],[[32,58]],[[37,49]],[[30,47],[5,13]],[[7,24],[81,95]],[[17,27]],2]},{color:"#f0a900",data:[2,[[10,14]],[[7,15],[84,92]],[[55,101],[0,6]],[[66,74],[31,41]],2]}],
width:170},2);x(56,{background:"#d2b556",height:74,layers:[{color:"#a47826",data:[[[0,135]],[[0,3],[87,103],[45,57]],[[0,5],[91,105],[43,55]],[[0,11],[90,104],[40,60]],[[0,20],[85,103],[47,68]],[[0,104]]]},{color:"#8e7a1c",data:[4,[[21,35],[73,83]],[[15,24]],[[68,77]],[[24,36]],[[22,33]],4]}],width:150},2);x(57,{background:"#fff88e",height:1E3,layers:[{color:"#000000",data:[1]}],width:2E3});var Ga=[4,8],Ha=function(){function a(){this.tag=3;this.hitCooltime=this.y=this.x=0;this.previousPos=[]}a[$].init=
function(b){this.x=this.y=1280;this.config=b;this.previousPos=[];this.captureTimeLeft=0;this.fireTime=D([0,(this.config.fireTimeRange||Ga)[1]]);var a=q[b.imageId];this.collisionShape=new Wa(0,0,.9*a.width,.9*a.height);this.live=b.live;this.hitCooltime=0;m(this,[0,1,4]);return this};a[$].isdead=function(){return 0>=this.live};a[$][0]=function(){for(;5<this.previousPos.length;)this.previousPos.shift();this.captureTimeLeft-=h;0>=this.captureTimeLeft&&(this.captureTimeLeft+=.075,this.previousPos.push([this.x,
this.y]));this.canFire=!1;this.fireTime-=h;0>=this.fireTime&&(this.fireTime+=D(this.config.fireTimeRange||Ga),this.canFire=!0);this.autoFire();this.updateCollisionShape();F.insert(this);0<this.hitCooltime&&--this.hitCooltime;return this.isdead()?(this.createParticle(),p(16,this),!0):!1};a[$][1]=function(){for(var b=0,a=F.retrive(this);b<a.length;b++){var c=a[b];if(1===c.tag||6===c.tag)this.live-=c.damage,c.tag=7,this.isdead()&&(B+=this.config.rewardScore,B>=na&&(na+=5E5,++l.live)),this.hitCooltime=
3}return this.isdead()};a[$][4]=function(){for(var b=q[this.config.imageId],a=b.width,f=b.height,e=0,g=.05;e<this.previousPos.length-1;++e,g+=.05){c.globalAlpha=g;var k=this.previousPos[e];c.drawImage(b,k[0]-a/2,k[1]-f/2)}c.globalAlpha=1;c.drawImage(q[this.hitCooltime?this.config.hitImageId?this.config.hitImageId:4:this.config.imageId],this.x-a/2,this.y-f/2);return this.isdead()};a[$].fire=function(b,a,c){void 0===b&&(b=Math.PI);void 0===a&&(a=0);void 0===c&&(c=0);this.canFire&&(new Fa).init(this.config.bulletConfig,
this.x+a,this.y+c,b)};a[$].createParticle=function(){ka.createPartical(20,this.x,this.y,3,"fuchsia",100)};a[$].autoFire=function(){var b=Math.PI;$r()<a.fireTowardPlayerProbability&&l.x<this.x&&(b=Math.atan2(l.y-this.y,l.x-this.x));this.fire(b)};a[$].updateCollisionShape=function(){this.collisionShape.x=this.x-this.collisionShape.width/2;this.collisionShape.y=this.y-this.collisionShape.height/2};a.fireTowardPlayerProbability=.3;return a}(),bb=function(){var a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};return function(b,d){function c(){this.constructor=b}a(b,d);b[$]=null===d?Object.create(d):(c[$]=d[$],new c)}}(),u=function(a){function b(d,c,e){void 0===e&&(e=2);var f=a.call(this)||this;f.skills=c;f.csk=null;f.x=1280+q[d.imageId].width;f.y=384;f.init(d);f.csk=f.rsk=new H(e);f.csk.i(f);b.activeBosses.push(f);return f}bb(b,a);b[$][0]=function(){this.csk.p(this)&&
(this.csk=this.csk!==this.rsk?this.rsk:this.skills[Math.floor($r()*this.skills.length)],this.csk.i(this));var d=a[$][0].call(this);this.isdead()&&b.activeBosses.every(function(b){return b.isdead()})&&p(19,this);return d};b[$].fire=function(b,c,e){void 0===b&&(b=Math.PI);void 0===c&&(c=0);void 0===e&&(e=0);var d=5,f=3*this.config.bulletConfig.radius,h=f*Math.sin(-b);f*=Math.cos(-b);c-=h*(d-1)/2;for(e-=f*(d-1)/2;d--;)a[$].fire.call(this,b,c,e),c+=h,e+=f};b[$].createParticle=
function(){ka.createPartical(50,this.x,this.y,20,"#FF4500",70)};b[$].autoFire=function(){};b.activeBosses=[];return b}(Ha),H=function(){function a(b){void 0===b&&(b=2);this.moveTime=b}a[$].i=function(b,a,c){void 0===a&&(a=1280*($r()/2+.5));void 0===c&&(c=768*$r());this.prevX=b.x;this.prevY=b.y;this.dx=a-b.x;this.dy=c-b.y;this.currentTime=0};a[$].p=function(b){if(this.currentTime>=this.moveTime)return!0;this.currentTime+=h;b.x=L(this.currentTime,this.prevX,this.dx,
this.moveTime);b.y=L(this.currentTime,this.prevY,this.dy,this.moveTime);return this.currentTime>=this.moveTime};return a}(),Ia=function(){function a(b,a){void 0===b&&(b=4);void 0===a&&(a=2.5);this.moveTime=b;this.speedRatio=a}a[$].i=function(b){this.currentTime=0;this.dx=1280*($r()/2+.5)-b.x;this.prevX=b.x};a[$].p=function(b){this.currentTime+=h;b.x=L(this.currentTime,this.prevX,this.dx,this.moveTime);b.y+=(l.y-b.y)*this.speedRatio*h;this.currentTime>this.moveTime/4&&b.fire();
return this.currentTime>this.moveTime};return a}(),Ja=function(){function a(b,a){void 0===b&&(b=1.5);void 0===a&&(a=4);this.shootTime=a;this.mover=new H(b)}a[$].i=function(b){this.mover.i(b);this.currentTime=0};a[$].p=function(b){this.mover.p(b)&&(this.currentTime+=h,b.fire(Math.atan2(l.y-b.y,l.x-b.x)));return this.currentTime>this.shootTime};return a}(),z=function(){function a(b,a,c,e){void 0===b&&(b=3);void 0===a&&(a=1.5);void 0===c&&(c=3);void 0===e&&(e=Math.PI/2);this.numberOfRay=
b;this.shootTime=c;this.spreadAngle=e;this.mover=new H(a)}a[$].i=function(b){this.mover.i(b,D([2560/3,1280]));this.currentTime=0};a[$].p=function(b){if(this.mover.p(b)){this.currentTime+=h;for(var a=this.numberOfRay;a--;)b.fire(Math.PI-(1<this.numberOfRay?this.spreadAngle*(a/(this.numberOfRay-1)-.5):0))}return this.currentTime>this.shootTime};return a}(),K=function(){function a(b,a,c){void 0===a&&(a=Infinity);this.formationFactory=b;this.waitTime=a;this.mover=new H(c)}a[$].i=
function(b){this.mover.i(b,1280-q[b.config.imageId].width/2,384);this.f=[];this.currentTime=0};a[$].p=function(b){var a=!1;if(this.mover.p(b)){0===this.currentTime&&(this.f=this.formationFactory());this.currentTime+=h;a=!0;b=0;for(var c=this.f;b<c.length;b++)c[b].isDead()||(a=!1)}return a||this.currentTime>this.waitTime};return a}(),cb=function(){function a(b,a){this.x=b;this.y=a;this.collisionShape=new Z(0,0,35);this.isDead=!1;this.tag=4;m(this,[0,1,5])}a[$][0]=function(){this.x-=200*
h;this.collisionShape.x=this.x;this.collisionShape.y=this.y;-35>this.x&&(this.isDead=!0);this.isDead||F.insert(this);return this.isDead};a[$][1]=function(){!l.justDead()&&va(l.collisionShape,this.collisionShape)&&(this.isDead=!0);return this.isDead};a[$][5]=function(){c.save();c.translate(this.x,this.y);var b=q[1];c.drawImage(b,-b.width/2,-b.height/2);c.beginPath();c.arc(0,0,35,0,r);c.strokeStyle="violet";c.lineWidth=5;c.stroke();c.restore();return this.isDead};return a}();m((pa={},
pa[23]=function(){var a=25;m((b={},b[16]=function(b){if(!--a||b instanceof u)new cb(b.x,b.y),a=Math.ceil(D([25,60]))},b),[16]);var b},pa),[23]);var pa,qa=function(){function a(b,a){this.scrollSpeed=a;this.stars=[];for(this.accelerate=this.speed=0;b--;)this.stars.push([1280*$r(),768*$r()]);m(this,[2,15,14])}a[$][2]=function(){c.save();c.shadowColor=c.fillStyle="white";c.shadowBlur=4;this.speed=C(this.speed+this.accelerate*h,0,this.scrollSpeed);for(var b=this.stars.length;b--;){var a=
this.stars[b];a[0]-=this.speed*h;0>a[0]&&(a[1]=768*$r(),a[0]=1280+100*$r());c.beginPath();c.arc(a[0],a[1],1,0,r);c.fill()}c.restore()};a[$][15]=function(){this.accelerate=.5*this.scrollSpeed};a[$][14]=function(){this.accelerate=.5*-this.scrollSpeed};return a}(),ia=!1,I=function(){function a(b,a,c,e){void 0===e&&(e=100);this.selfPositionProcessor=a;this.enemyPositionProcess=c;this.cost=e;this.x=1780;this.y=768*$r();this.enemyList=b.map(function(b){return(new Ha).init(b)});
this.numEnemy=b.length;m(this,[0])}a[$][0]=function(){for(var b=this.enemyList.length;b--;){var a=this.enemyList[b];a&&a.isdead()&&(--this.numEnemy,this.enemyList[b]=null)}this.selfPositionProcessor.process(this);this.enemyPositionProcess.process(this);this.numEnemy||p(17,this);return 0===this.numEnemy};a[$].getFitPossition=function(b,a){return[this.x/1280*(1280-b)+b/2,this.y/768*(768-a)+a/2]};a[$].isDead=function(){return 0===this.numEnemy};a[$].forceDead=function(){for(var b=
0,a=this.enemyList;b<a.length;b++){var c=a[b];c&&c.x<-2*q[c.config.imageId].width&&(c.live=0)}};return a}(),U=function(){function a(b,a,c){void 0===b&&(b=400);void 0===a&&(a=D([Math.PI/8,Math.PI/6])+Math.PI/2);void 0===c&&(c=!0);this.speed=b;this.angle=a;this.bound=c}a[$].process=function(b){b.x+=this.speed*Math.cos(this.angle)*h;b.y+=this.speed*Math.sin(this.angle)*h;768<b.y&&(this.bound?(this.angle=r-this.angle,b.y=1536-b.y):b.y-=768);0>b.y&&(this.bound?(this.angle=r-this.angle,b.y*=-1):
b.y+=768);b.forceDead()};return a}(),w=function(){function a(b,a){void 0===b&&(b=1.5);void 0===a&&(a=.05);this.moveTime=b;this.tpp=a;this.currentTime=2*this.moveTime}a[$].process=function(b){this.currentTime+=h;this.currentTime>=this.moveTime&&(this.currentX=b.x,this.currentY=b.y,this.dty=768*$r(),this.dtx=$r()<=this.tpp&&this.currentTime<2*this.moveTime?l.x:1280*($r()/2+.5),this.dtx-=b.x,this.dty-=b.y,this.currentTime=0);b.x=L(this.currentTime,this.currentX,this.dtx,
this.moveTime);b.y=L(this.currentTime,this.currentY,this.dty,this.moveTime)};return a}(),N=function(){function a(b,a){void 0===b&&(b=100);void 0===a&&(a=3);this.radius=b;this.period=a;this.hm=new da(b,a)}a[$].process=function(b){this.hm.process(h);var a=b.getFitPossition(2*this.radius,2*this.radius),c=a[0];a=a[1];b.enemyList[0]&&(b.enemyList[0].x=c,b.enemyList[0].y=a);for(var e=this.hm.period/(b.enemyList.length-1),g=1,k=0;g<b.enemyList.length;++g,k+=e){var l=b.enemyList[g];l&&(l.x=c+this.hm.getX(k),
l.y=a+this.hm.getY(k))}};return a}(),ja=function(){function a(b){void 0===b&&(b=100);this.offset=b}a[$].process=function(b){var a=Math.PI,c=!0;b.selfPositionProcessor instanceof U&&(a=b.selfPositionProcessor.angle,c=b.selfPositionProcessor.bound);var e=-this.offset*Math.cos(a);a=-this.offset*Math.sin(a);var g=b.x,k=b.y,h=0;for(b=b.enemyList;h<b.length;h++){var l=b[h];l&&(l.x=g,l.y=k);g+=e;k+=a;768<k&&(c?(a=-a,k=1536-k):k-=768);0>k&&(c?(a=-a,k=-k):k+=768)}};return a}(),M=function(){function a(b,
a){void 0===b&&(b=1);void 0===a&&(a=100);this.enemyPerLine=b;this.offset=a}a[$].process=function(b){var a=Math.floor(b.enemyList.length/this.enemyPerLine),c=(a-1)*this.offset,e=(this.enemyPerLine-1)*this.offset,g=b.getFitPossition(c,e),h=g[0];g=g[1];h-=c/2;for(g-=e/2;a--;)for(c=this.enemyPerLine;c--;)if(e=b.enemyList[a*this.enemyPerLine+c])e.x=h+a*this.offset,e.y=g+c*this.offset};return a}(),G=function(){function a(b){void 0===b&&(b=100);this.offset=b}a[$].process=function(b){for(var a=
0;(a+1)*a/2<b.enemyList.length;)++a;var c=(a-1)*this.offset,e=b.getFitPossition(c,c),g=e[0];e=e[1];g-=c/2;for(c=-1;++c<a;)for(var h=c*this.offset,l=-1;++l<=c;){var m=b.enemyList[c*(c+1)/2+l];m&&(m.x=g+h,m.y=e-h/2+l*this.offset)}};return a}(),db=function(){function a(b,a,c){void 0===a&&(a=3E3);void 0===c&&(c=100);this.formationConfigList=b;this.relaxTime=a;this.maxCost=c;this.lastSumonTime=Date.now();this.currentCost=0;this.formationConfigList.reverse();m(this,[0,17])}a[$][0]=function(){if(this.formationConfigList.length){var b=
Date.now();if(!(b-this.lastSumonTime<this.relaxTime)){var a=this.formationConfigList.pop();this.currentCost+(a.cost||100)<=this.maxCost?(this.currentCost+=(new I(a.enemyConfigList,a.selfPositionProcessor,a.enemyPositionProcess,a.cost)).cost,this.lastSumonTime=b):this.formationConfigList.push(a)}}else if(!this.currentCost)return p(18),!0};a[$][17]=function(b){this.currentCost-=b.cost;return!this.formationConfigList.length&&!this.currentCost};return a}(),ra=function(){function a(){}a[$].init=
function(b,a,c,e){void 0===e&&(e=Math.PI);this.config=b;this.x=a;this.y=c;this.angle=e;this.currentTime=-b.aimTime;m(this,[0,3])};a[$].isDead=function(){return this.currentTime>.3+this.config.age};a[$][0]=function(){this.currentTime+=h;.3>=this.currentTime-h&&.3<=this.currentTime&&m(this,[1]);return this.isDead()};a[$][1]=function(){var b=l.x-this.x,a=l.y-this.y,c=Math.cos(this.angle),e=Math.sin(this.angle);0<b*c+a*e&&Math.abs(b*-e+a*c)<l.radius+this.getRadius()&&l.loseLive();
return this.currentTime>this.config.age-.3};a[$][3]=function(){var b=this.getRadius();c.save();c.beginPath();c.globalAlpha=1;var a=this.config.age;0<this.currentTime?(c.lineWidth=2*b,c.shadowBlur=30,c.lineCap="round",c.shadowColor=c.strokeStyle=this.config.color||"#7CFC00",this.currentTime>a-.6?c.globalAlpha=Math.max(0,ba(this.currentTime-a+.6,1,-1,.6)):.3>this.currentTime&&(c.lineWidth=ba(this.currentTime,0,2*b,.3),c.globalAlpha=Math.min(1,ba(this.currentTime,0,1,.3)))):(c.lineCap="butt",
c.setLineDash([c.lineWidth=10]),c.strokeStyle="rgba(255,255,255,.5)");c.moveTo(this.x,this.y);b=1280*Math.SQRT2;c.lineTo(this.x+b*Math.cos(this.angle),this.y+b*Math.sin(this.angle));c.stroke();c.restore();return this.isDead()};a[$].getRadius=function(){return this.config.radius||20};return a}(),eb=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])};return function(b,c){function d(){this.constructor=
b}a(b,c);b[$]=null===c?Object.create(c):(d[$]=c[$],new d)}}(),Ka=function(a){function b(b,c,e){void 0===e&&(e=1);c=a.call(this,b,c,e)||this;c.planet=new la(q[b.imageId],Math.PI);c.collisionShape=new Z(0,0,c.planet.radius);return c}eb(b,a);b[$][0]=function(){var b=a[$][0].call(this);this.planet[0](h);this.planet.x=this.x;this.planet.y=this.y;return b};b[$][4]=function(){if(this.hitCooltime)c.beginPath(),c.fillStyle="#DCDCDC",c.arc(this.x,this.y,this.planet.radius,
0,r),c.fill();else this.planet[2]();return this.isdead()};b[$].updateCollisionShape=function(){this.collisionShape.x=this.x;this.collisionShape.y=this.y};return b}(u),La=function(){function a(b,a,c,e){void 0===b&&(b=1);void 0===a&&(a=2);void 0===c&&(c=5);void 0===e&&(e=2);this.numLazer=b;this.chaseTime=a;this.angleSpeedRatio=c;this.laz=[];this.mover=new H(e)}a[$].i=function(b){this.mover.i(b,D([2560/3,1280]));this.currentTime=this.currentAngle=0;this.laz=[]};a[$].p=function(b){if(this.mover.p(b)){this.currentTime+=
h;for(var a=Math.atan2(l.y-b.y,l.x-b.x)-this.currentAngle;a>Math.PI;)a-=2*Math.PI;for(;a<-Math.PI;)a+=2*Math.PI;this.currentAngle+=a*this.angleSpeedRatio*h;for(a=this.numLazer;a--;)this.laz[a]||(this.laz[a]=new ra,this.laz[a].init({age:3,aimTime:this.chaseTime},b.x,b.y)),this.currentTime<this.chaseTime&&(this.laz[a].angle=this.getAngle(a))}return this.laz.length&&this.laz[0].isDead()};a[$].getAngle=function(b){return this.currentAngle-(1<this.numLazer?a.spreadRange/(this.numLazer-1):0)*((this.numLazer-
1)/2-b)};a.spreadRange=Math.PI/3;return a}(),sa=function(){function a(b,a,c){void 0===b&&(b=1);void 0===a&&(a=1);void 0===c&&(c=1);this.numLazer=b;this.scanTime=a;this.moveTime=c;this.mover=new H(c)}a[$].i=function(a){var b=384>l.y?130:638;this.mover.moveTime=this.moveTime;this.mover.i(a,D([960,1280]),b);this.currentTime=0;this.laz=[];for(b=this.numLazer;b--;)this.laz[b]=new ra,this.laz[b].init({age:this.scanTime+.5,aimTime:this.moveTime},a.x,a.y+this.getPos(b),Math.PI)};a[$].p=function(a){this.currentTime+=
h;this.mover.p(a)&&this.currentTime<this.moveTime+this.scanTime&&(this.mover.i(a,a.x,768-a.y),this.mover.moveTime=this.scanTime);for(var b=this.numLazer;b--;)this.laz[b].x=a.x,this.laz[b].y=a.y+this.getPos(b);return this.laz[0].isDead()};a[$].getPos=function(a){return 210*-((this.numLazer-1)/2-a)};return a}(),Ma=function(){function a(a,c,f){void 0===a&&(a=1);void 0===c&&(c=1.5);void 0===f&&(f=.5);this.numberOfScan=a;this.scanTime=c;this.waitTime=f;this.mover=new H}a[$].i=function(a){this.mover.i(a,
640,384);this.currentScan=-1;this.currentTime=this.scanTime+this.waitTime};a[$].p=function(a){if(this.mover.p(a)){this.currentTime+=h;if(this.currentTime>this.scanTime+this.waitTime){this.currentTime=0;++this.currentScan;if(this.currentScan>=this.numberOfScan)return!0;this.startAngle=this.currentAngle=D([0,r]);this.laz=new ra;this.laz.init({age:this.scanTime+.3,aimTime:this.waitTime},a.x,a.y,this.startAngle)}if(this.currentTime>=this.waitTime){this.currentTime-h<=this.waitTime&&(a=Math.cos(this.startAngle)*
(l.y-a.y)-(l.x-a.x)*Math.sin(this.startAngle),this.changeAngle=Math.PI*(0>a?-1:+(0<a)));a=this.currentTime-this.waitTime;var b=this.startAngle,c=this.changeAngle;a/=this.scanTime/2;1>a?a=c/2*a*a*a*a*a+b:(a-=2,a=c/2*(a*a*a*a*a+2)+b);this.currentAngle=a}this.laz.angle=this.currentAngle}return this.currentScan>=this.numberOfScan};return a}(),fb=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=
c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b[$]=null===c?Object.create(c):(d[$]=c[$],new d)}}(),X=(aa={currentStage:0,startStage:function(a){u.activeBosses.length=0;9<=a?setTimeout(function(){return p(20)},2E3):(p(15),this.currentStage=a,new db(Ta(this.currentStage),3>this.currentStage?300:1E3),a=JSON.parse(localStorage.getItem("etop-data")),0===this.currentStage?a.lastGunLevel=a.lastStage=null:(a.lastGunLevel=l.level,a.lastStage=this.currentStage),localStorage.setItem("etop-data",
JSON.stringify(a)))}},aa[18]=function(){var a=this;if(5!==this.currentStage){var b=50+this.currentStage-+(5<this.currentStage);new gb(b,Math.PI*+(57===b),53===b)}setTimeout(function(){p(14);hb[a.currentStage]()},5E3)},aa[19]=function(){this.startStage(++this.currentStage)},aa);m(X,[18,19]);for(var gb=function(a){function b(b,c,e){void 0===c&&(c=0);b=a.call(this,q[b],c,q[b].height/2*Ba[b],e)||this;b.speed=150;b.accelerate=0;m(b,[15,14,0,2]);b.x=Math.max(1280+2*b.radius,1600);b.y=384;return b}fb(b,
a);b[$][14]=function(){this.accelerate=-75;return-1280>this.x};b[$][15]=function(){this.accelerate=75;return-1280>this.x};b[$][0]=function(){a[$][0].call(this);this.speed=C(this.speed+this.accelerate*h,0,150);this.x-=this.speed*h;return-1280>this.x};b[$][2]=function(){a[$][2].call(this);return-1280>this.x};return b}(la),E=[],ib={color:"fuchsia",radius:6,speed:500},P=-1;9>++P;)E[P]={bulletConfig:ib,fireTimeRange:[3,8],imageId:5+P,live:P+1,rewardScore:100*(P+
1)};var hb=[function(){new u(A(0,1E4,150),[new z(1,.5,2),new K(function(){return v(3,function(){return new I([E[0]],new w,new G,0)})},5)])},function(){new u(A(1,12E3,300),[new z(1,.5,2),new z(5),new K(function(){return v(3,function(){return new I([E[1]],new w,new G,0)})},2)])},function(){for(var a=2;a--;)new u(A(2,7E3,250),[new z(1,.5,2),new z(3)])},function(){new u(A(3,12E3,600),[new z(1,.5,2),new Ja,new K(function(){return v(2,function(){return new I(y(3,E[3]),new w,new G,0)})},2)])},function(){for(var a=
3;a--;)new u(A(4,9E3,233),[new z(1,.5,2),new z(2),new K(function(){return[new I(y(4,E[4]),new w,new N,0)]},2)])},function(){var a=A(5,2E4,900);a.imageId=49;var b=new Ka(a,[new La(1),new sa(1,2),new Ma(1)]);m((c={},c[19]=function(){m(this,[4]);return!0},c[4]=function(){b.planet.x+=150*h;b.planet[2]();return b.planet.x>1280+b.planet.radius},c),[19]);var c},function(){new u(A(6,2E4,900),[new Ia,new z(5),new K(function(){return[new I(y(5,E[6]),new w,new N,0)]},2)])},function(){new u(A(7,21E3,1E3),[new Ia,
new Ja,new z(5),new K(function(){return[new I(y(5,E[7]),new w,new N,0)]},2)])},function(){var a=A(8,25E3,2E3);a.imageId=49;new Ka(a,[new La(3),new sa(1),new sa(2,3),new Ma(3,1)])}],aa;m((ta={},ta[12]=function(){c.save();[Ua,Va][W]();c.restore()},ta),[12]);var ta,Na=(Q={},Q[22]=function(){t[0]=[];t[1]=[];t[15]=[];t[14]=[];t[16]=[];t[17]=[];for(var a=2;12>a;++a)t[a]=[];localStorage.getItem("etop-data")||localStorage.setItem("etop-data",JSON.stringify({highscore:0,lastGunLevel:null,lastStage:null}));
B=0;na=5E5;new qa(100,90);new qa(100,100);new qa(100,110);n.width=1280;n.height=768;W=0;p(23);p(15)},Q[21]=function(){var a=JSON.parse(localStorage.getItem("etop-data")),b={isLose:!0,lastScore:B};a.highscore=Math.max(a.highscore,B);localStorage.setItem("etop-data",JSON.stringify(a));sessionStorage.setItem("etop-data",JSON.stringify(b));V(function(){return p(22)})},Q[20]=function(){var a=JSON.parse(localStorage.getItem("etop-data")),b={isLose:!1,lastScore:B};a.highscore=Math.max(a.highscore,B);a.lastGunLevel=
a.lastStage=null;localStorage.setItem("etop-data",JSON.stringify(a));sessionStorage.setItem("etop-data",JSON.stringify(b));V(function(){return p(22)})},Q);m(Na,[22,21,20]);n.style.display="none";(function(a){for(var b=0,c=function(){++b;b===R.length&&a()},f=0;f<R.length;++f){var e=R[f];e?(q[f]=new Image,q[f].onload=c,n.width=e[0],n.height=e[1],e[2](),q[f].src=n.toDataURL()):(q[f]=null,++b)}})(function(){n.style.display="block";Na[22]();ya()});var Q})();
</script></body></html>