/* MirrorDelivery 1.4.8 http://github.com/4lbertoC/mirrordelivery */var sa={};
(function(b){function y(b,e){return e?T(b&255)+y(b>>8,e-1):""}var e=this.Ba=b||44100,z=2*e,T=String.fromCharCode,r;this.Ua=function(b){var f=Audio,u=btoa,g="",k=b.length;for(v=0;v<k;v++)var s=32767*b[v]|0,s=-32768>s?-32768:32767<s?32767:s,s=s+(0>s?65536:0),g=g+String.fromCharCode(s&255,s>>8);b=g;b=["RIFF",36+(r=b.length),"WAVEfmt ",16,1,1,e,z,2,16,"data",r,b];g="";for(v=0;v<b.length;v++)g+="s"=="s4s4224422s4s"[v]?b[v]:y(b[v],"s4s4224422s4s".charCodeAt(v)-48);return new f("data:audio/wav;base64,"+u(g))};
var u,v,g=Math.sin,f=2*Math.PI;this.filter=function(b,e,g,f,k,s,r,y,z,A){g=g?g:1;f=f?f:b.length;u=b.slice(0);for(v=g;v<f;v++)u[v]=e(b,u,g,f,v,k,s,r,y,z,A);return u};this.filters={ab:function(b,e,g,f,k,s){return e[k-1]+s*(b[k]-e[k-1])},bb:function(b,e,g,f,k,s){return e[k-1]+s*(f-k)/(f-g)*(b[k]-e[k-1])},$a:function(b,e,f,g,k,s){return s*(e[k-1]+b[k]-b[k-1])}};this.Da=function(b,g,r,u,k,s,y,z,A){g=g*f/e;var T=Array(b|0);for(v=0;v<b;v++)T[v]=r(v*g,u,k,s,y,z,A);return T};var A=0;this.P={Va:function(b){4>
b%f&&(A=2*Math.random()-1);return A},cb:Math.random,Xa:Math.sin,Ya:function(b){return g(b)+0.5*g(b/2)+0.3*g(b/4)},Wa:function(b){return 2*(b/f-(b/f+0.5|0))},Ja:function(b,e){return g(b)>e?1:g(b)<e?-1:e}}}).apply(sa);var Ma={};
(function(){this.ga=[];this.da={square:sa.P.Ja,saw:sa.P.Wa,sine:sa.P.Xa,noise:sa.P.Va,synth:sa.P.Ya};this.Ra=function(){var b=[],y;for(y in this.da)b.push(y);return b};this.Sa=function(){function b(b,r,u,v,g){void 0===g&&(g=(u-r)/1E3);b={name:b,id:b.replace(/ /g,""),min:r,max:u,step:g,Qa:v,type:"range",group:e};y.push(b)}var y=[],e=0,z=this.Ra();(function(b,r,u){b={name:b,id:b.replace(/ /g,""),options:r,Qa:u,type:"option",group:e};y.push(b)})("Generator",z,z[0]);b("SuperSamplingQuality",0,16,0,1);
b("MasterVolume",0,1,0.4);e++;b("AttackTime",0,1,0.1);b("SustainTime",0,2,0.3);b("SustainPunch",0,3,2);b("DecayTime",0,2,1);e++;b("MinFrequency",20,2400,0,1);b("StartFrequency",20,2400,440,1);b("MaxFrequency",20,2400,2E3,1);b("Slide",-1,1,0);b("DeltaSlide",-1,1,0);e++;b("VibratoDepth",0,1,0);b("VibratoFrequency",0.01,48,8);b("VibratoDepth Slide",-0.3,1,0);b("VibratoFrequencySlide",-1,1,0);e++;b("ChangeAmount",-1,1,0);b("ChangeSpeed",0,1,0.1);e++;b("SquareDuty",0,0.5,0);b("SquareDutySweep",-1,1,0);
e++;b("RepeatSpeed",0,0.8,0);e++;b("PhaserOffset",-1,1,0);b("PhaserSweep",-1,1,0);e++;b("LPFilterCutoff",0,1,1);b("LPFilterCutoffSweep",-1,1,0);b("LPFilterResonance",0,1,0);b("HPFilterCutoff",0,1,0);b("HPFilterCutoffSweep",-1,1,0);return y};this.Da=function(b){var y=2*Math.PI,e=Math.sin,z=Math.pow,T=Math.abs,r=sa.Ba,u=b.SuperSamplingQuality|0;1>u&&(u=1);for(var r=r*u,v=[{O:0,$:1,time:b.AttackTime},{O:1+b.SustainPunch,$:1,time:b.SustainTime},{O:1,$:0,time:b.DecayTime}],g=v.length,f=0;f<g;f++)v[f].Z=
1+(v[f].time*r|0);for(var A=void 0,Q=0,Z=-1,ta=0,ua=-1,k=0,f=0;f<g;f++)k+=v[f].Z;k<r/2&&(k=r/2);var s=Array(k/u|0),t=0,V=0,va=Ma.da[b.Generator];void 0===va&&(va=this.da.Ja);var $=0,$=b.SquareDuty,fa=b.SquareDutySweep/r,W=0,R=b.StartFrequency*y/r,Ca=1+64*z(b.Slide,3)/r,la=z(b.DeltaSlide,3)/(1E3*r);void 0!==u&&(la/=u);b.MinFrequency>b.StartFrequency&&(b.MinFrequency=b.StartFrequency);b.MaxFrequency<b.StartFrequency&&(b.MaxFrequency=b.StartFrequency);for(var Na=b.MinFrequency*y/r,Ha=b.MaxFrequency*
y/r,S=0,aa=b.VibratoFrequency*y/r,X=b.VibratoDepth,wa=1+3*z(b.VibratoFrequencySlide,3)/r,Ia=b.VibratoDepthSlide/r,ma=0,ga=b.ChangeSpeed*r,na=z(b.ChangeAmount,2),na=0<b.ChangeAmount?1+10*na:1-0.9*na,ha=Array(1024),f=0;1024>f;f++)ha[f]=0;var Da=0,Y=1020*z(b.PhaserOffset,2),xa=4E3*z(b.PhaserSweep,3)/r,Oa=1E-5<T(xa)||1E-5<T(Y),Ua=0.0010<b.HPFilterCutoff||0.999>b.LPFilterCutoff,oa=0,ia=0,ja=z(b.LPFilterCutoff,3)/10,K=1+b.HPFilterCutoffSweep/1E4,H=5/(1+20*z(b.LPFilterResonance,2))*(0.01+b.LPFilterCutoff);
0.8<H&&(H=0.8);var H=1-H,F=0.999>b.LPFilterCutoff,P=0,ba=z(b.HPFilterCutoff,2)/10,G=1+b.HPFilterCutoffSweep/1E4,ca=0,Pa=k;0<b.RepeatSpeed&&(Pa=z(1-b.RepeatSpeed,2)*r+32);for(var Qa=b.MasterVolume,Ja=0,f=0;f<k;f++)t=va(W,$,0),$+=fa,0>$?$=0:0.5<$&&($=0.5),ca>Pa&&(W=0,R=b.StartFrequency*y/r,Ca=1+3*z(b.Slide,3)/r,la=z(b.DeltaSlide,3)/(1E3*r),void 0!==u&&(la/=u),ma=0,ga=b.ChangeSpeed*r,na=1+(b.ChangeAmount|0)/12,ca=0),ca+=1,W+=R,Ca+=la,R*=Ca,ma>ga&&(R*=na,ga=k),ma+=1,R>Ha?R=Ha:R<Na&&(R=Na),S+=aa,A=R*e(S)*
X,W+=A,aa*=wa,Ia&&(X+=Ia,0>X?Ia=X=0:1<X&&(X=1,Ia=0)),Ua&&(0.0010<T(ba)&&(ba*=G,1E-5>ba?ba=1E-5:0.1<ba&&(ba=0.1)),A=oa,ja*=K,0>ja?ja=0:0.1<ja&&(ja=0.1),F?(ia+=(t-oa)*ja,ia*=H):(oa=t,ia=0),oa+=ia,P+=oa-A,t=P*=1-ba),Oa&&(Y+=xa,0>Y&&(Y=-Y,xa=-xa),1023<Y&&(Y=1023,xa=0),ha[Da]=t,t+=ha[Da-(Y|0)+1024&1023],Da=Da+1&1023),f>ua&&(Z+=1,A=Z<g?v[Z]:{O:0,$:0,Z:k},Q=A.O,ta=(A.$-A.O)/(A.Z+1),ua+=A.Z),t*=Q,Q+=ta,t*=Qa,1<u?(V+=t,0===(f+1)%u&&(s[Ja]=V/u,Ja+=1,V=0)):s[f]=t;b=r/100|0;y=Array(b);for(f=0;f<b;f++)y[f]=0;
return y.concat(s).concat(y)};this.ga=this.Sa()}).apply(Ma);var gb={};(function(){this.Ca=function(b){b=Ma.Da(this.Pa(b));return sa.Ua(b)};this.Pa=function(b){for(var y={},e=Ma.ga.length,z=0;z<e;z++)y[Ma.ga[z].id]=b[z];return y}}).apply(gb);(function(){var b,y,e,z,T,r,u,v,g,f;function A(c,a,b){c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent?c.attachEvent("on"+a,b):c["on"+a]=b}function Q(c,a,b,d,e,g){var f=ca[c].frame,n=ca[c].g;c=ca[c].frames;d=g?c[Math.floor(g*d/1E3)%c.length]:c[d];e?m.drawImage(Va,sb-(f.x+d.x)-d.a,f.y+d.y,d.a,d.b,a+n.x,b+n.y,d.a,d.b):m.drawImage(ya,f.x+d.x,f.y+d.y,d.a,d.b,a+n.x,b+n.y,d.a,d.b)}function Z(c,a,b,d,e,g){var f=ca[a].frame;a=ca[a].g;c.drawImage(ya,f.x,f.y,e||f.a,g||f.b,b+a.x,d+a.y,a.a,a.b)}function ta(c,
a,b,d,e,f,g){var m=c.fillStyle,l=c.textAlign,n=c.font;c.fillStyle=e;c.font=g;c.textAlign=f;for(a=a.slice();0<a.length;)c.fillText(a.shift(),b,d),d+=10;c.fillStyle=m;c.font=n;c.textAlign=l}function ua(c){ea.style.cursor=c?"auto":"none"}function k(c,a){if(Qa)try{Ra[c]=gb.Ca(a)}catch(b){}}function s(c){if(Qa)try{Ra[c]&&(Ra[c].pause(),Ra[c].currentTime=0,Ra[c].play())}catch(a){}}function t(c,a){var b=document.getElementById(c);A(b,Wa,function(c){c.preventDefault();pa.Ha({keyCode:a})});A(b,hb,function(c){c.preventDefault();
pa.Ia({keyCode:a})})}function V(c,a,b,d){var e=Object.create(Fb);e.position=a;e.text=[c];e.color=b;e.time=za+Gb;e.Ea=d||!1;Sa.push(e)}function va(c,a,b,d,e){var f=Object.create(Hb);f.position=c.slice();f.d=a.slice();f.color=b;f.time=za+Ib;f.size=d;f.speed=e;Ea.push(f)}function $(c){var a=c[q.aa],b,d,e,f;Xa.S=a;for(var g=M.length=0;g<c[q.h].length;g++)b=c[q.h][g],d=Object.create(Xa),d.size=b,e=document.createElement("canvas"),e.width=Ka+b,e.height=Ka+b,f=e.getContext("2d"),f.fillStyle="#ea0",f.strokeStyle=
"#330",f.fillRect(0,0,Ka+b,Ka+b),f.strokeRect(0,0,Ka+b,Ka+b),f.fillStyle="#000",f.fillText(b,5,10),d.ia=e,e=a[0]+16*g,b=a[1]-b,d.position=[e,b],d.S=[e,b],M.push(d)}function fa(c){c=b=E[c]||E[w];a.position=c[q.fa].slice();a.t=0;a.u=0;a.ka=0;a.c=void 0;a.X=tb;a.v=!1;a.F=!1;a.q=!1;a.e=!1;a.j=!1;d.Y=ub;d.i=0;d.w=0;d.position=c[q.T].slice();d.d=c[q.T].slice();u=c[q.K].slice();v=[c[q.K][0]+15,c[q.K][1]+23];g=v.slice();f=1;B.position=B.d=null;B.ja=ib;y=0;R(C.k);O=0;Fa.length=0;Aa.length=0;Sa.length=0;Ea.length=
0;ka="4444444444444444444444444444444444444444"+c[q.ea]+"4444444444444444444444444444444444444444";ka=ka.split("");La=null;$(c);Ya=Ja.slice();window.localStorage&&(window.localStorage.wa=JSON.stringify(E));W()}function W(){var c,a;for(c=0;c<P;c++)for(a=0;a<ba;a++)oa(Jb,ka[P*a+c],c*F,a*F)}function R(c){e=c;if(N){var a=document.getElementsByClassName("e");c="b e"+(c===C.f?"":" h");for(var b=0;b<a.length;b++)a[b].setAttribute("class",c)}}function Ca(c){R(C.l);y=za+b[q.n];Qa&&(Za=c+vb);ua()}function la(c){z+=
1;ua(!0);s(D.Aa);$a=!0;fa(w);ab=c+wb}function Na(c){T+=1;ua(!0);s(D.sa);$a=!1;fa(w);ab=c+wb}function Ha(c,a){return Math.atan((a[1]-c[1])/(a[0]-c[0]))}function S(c,a){return c&&a&&Math.sqrt(Math.pow(c[0]-a[0],2)+Math.pow(c[1]-a[1],2))}function aa(c,a){return ka[P*Math.floor(a/F)+Math.floor(c/F)]}function X(a,b,d,e,f){var g=b,m=aa(a,g);d=a+d;topRight=aa(d,g);bottomRight=aa(d,b+e);bottomLeft=aa(a,b);return m===f||topRight===f||bottomRight===f||bottomLeft===f}function wa(a,b,d,e,f){b+=e;e=aa(a,b);bottomLeft=
aa(a+d,b);return e===f||bottomLeft===f}function Ia(){var c=a.u,b=ma();if(a.e)c=a.u;else if(a.q)c=Math.min(b,c+b/25);else if(c*=Math.min(0.2*b,0.8),0.2>c||ga(J.p))c=0;a.u=c;return ga(J.p)?b/2:c}function ma(){return Math.max(1,a.speed+a.R-(void 0!==a.c?M[a.c].size:0))}function ga(c){return X(a.position[0]-8,a.position[1]-32,16,32,c)||X(a.position[0],a.position[1]-8,0,0,c)}function na(a){a&&a.preventDefault();if(e===C.f)jb=!jb;else if(e===C.l&&d.w<za)if(a=d.i,(wa(d.position[0]-8,d.position[1]-8,16,16,
J.B)||X(d.position[0],d.position[1],0,0,J.B))&&d.i<Kb)s(D.ca),d.i++,V("+"+(d.i-a)+"\u21a1",[d.position[0]-4,d.position[1]-4],"#0c0");else{var b;for(b=0;b<Fa.length;b++)if(S(d.position,Fa[b].position)<kb){d.i=Math.max(d.i,Lb);V("+"+(d.i-a)+"\u21a1",[d.position[0]-4,d.position[1]-4],"#0c0");s(D.ca);Fa.splice(b,1);break}}}function ha(){if(e===C.f)if(O<Ga){var c=P*Math.floor(x[1]/F)+Math.floor(x[0]/F);c<ka.length-P&&c>P&&(ka[c]=""+O);W()}else if(O===Ba.xa)a.position=x.slice();else if(O===Ba.A)d.position=
x.slice();else if(O===Ba.J)u=x.slice(),v=[u[0]+15,u[1]+23],g=v.slice();else{if(O===Ba.h)for(Xa.S=x.slice(),c=0;c<M.length;c++){var b=M[c];b.position[0]=x[0]+16*c;b.position[1]=x[1]-b.size}}else e!==C.k||N?0<d.i&&d.w<za&&(d.i--,s(D.qa),c=Object.create(Mb),c.position=d.position.slice(),Aa.push(c)):x[0]>d.position[0]-16&&(x[0]<d.position[0]+16&&x[1]>d.position[1]-16&&x[1]<d.position[1]+16)&&Ca(za)}function Da(a){for(var b=60;0<b--;)va(d.position,[d.position[0]-Math.floor(128*Math.random()-64),d.position[1]+
Math.ceil(128*Math.random()-64)],"#000",Math.ceil(3*Math.random()),Math.ceil(5*Math.random()));d.w=a+Nb;s(D.pa);d.i=0;d.Y--;V("-1\u2665",[d.position[0]-4,d.position[1]-4],"#c00");0>=d.Y?la(a):xa(a);lb=a+xb}function Y(a){if(!La){La=[];for(var b=0;b<ka.length;b++)ka[b]===J.C&&La.push(b)}b=La[Math.floor(Math.random()*La.length)]+1;b=[b%P*F,Math.floor(b/P)*F];B.d=[b[0]-6,b[1]-10];B.position?s(D.na):B.position=B.d.slice();B.Ga=a+Ob;f+=0.05}function xa(a){B.position||0<--B.ja||(B.ja=ib,s(D.ma),Y(a),W())}
function Oa(b,d){for(var e=80;0<e--;)va(a.position,[a.position[0]-Math.floor(128*Math.random()-64),a.position[1]-16-Math.ceil(128*Math.random()-64)],0.4>Math.random()?"#330":"#ea0",Math.ceil(3*Math.random()),Math.ceil(4*Math.random()));V(0.5<Math.random()?"My mirrors!":"Be careful!",[u[0]+4,u[1]],"#fff",!0);s(D.ya);a.c=void 0;b.position=b.S.slice();a.X--;V("-1\u25fc",[a.position[0]-4,a.position[1]-32],"#c00");lb=d+xb;0>=a.X?Na(d):xa(d)}function Ua(a){var b=a||E[w];a=[a?b[q.m]:"CustomLevel"+Pb++,b[q.fa].slice(),
b[q.T].slice(),b[q.aa].slice(),b[q.K].slice(),b[q.n],b[q.ea],b[q.h].slice(),null,!0];E.push(a);e===C.k&&(w=E.length-1,fa(w))}function oa(a,b,d,e){var f=null,g=B.position?"rgb("+Math.pow(e,2)+","+Math.floor(e/3)+","+Math.floor(e)+")":"rgb("+Math.floor(e/3)+","+Math.floor(e)+","+Math.pow(e,2)+")";b===J.C?f=G.C:b===J.N?f=G.N:b===J.Oa?g="#000":b===J.ta?g="#0f0":b===J.B?f=G.B:b===J.p?f=G.p:b===J.r&&(f=G.r);a.fillStyle=g;a.fillRect(d,e,F,F);null!==f&&Z(a,f,d,e,F,F)}function ia(a,b,d){if(a.position&&a.d){var e=
Ha(a.position,a.d),f=a.position[0]>a.d[0]?-1:1,g=Math.abs(a.position[0]-a.d[0]),m=Math.abs(a.position[1]-a.d[1]);return g>b||m>b?(b=Math.cos(e)*f*d,d*=Math.sin(e)*f,Math.abs(b)>g&&(b=g*b/Math.abs(b)),Math.abs(d)>m&&(d=m*d/Math.abs(d)),a.position[0]+=b,a.position[1]+=d,!0):!1}}function ja(c){if(!(ab>c)){var p=pa.Q;if(e===C.k)if(p[n.V]&&!U)w=(w+E.length-1)%E.length,fa(w);else if(p[n.W]&&!U)w=(w+1)%E.length,fa(w);else if(p[n.H]&&!U)E[w][q.U]||Ua(),R(C.f),p[n.H]=void 0;else if(p[n.G]&&!U)E[w][q.U]&&(E.splice(w,
1),w--,fa(w)),p[n.G]=void 0;else if(p[n.I]&&E[w][q.U]&&!U){var k=prompt("JSON",JSON.stringify(E[w]));p[n.I]=void 0}else{if(p[n.ua]||N&&p[n.M]){if(k=prompt("JSON"))try{Ua(JSON.parse(k))}catch(A){alert("Error")}p[n.M]=void 0;p[n.ua]=void 0}}else{if(e===C.f){var t=c;if(!U){if(p[n.V])O=(O+mb-1)%mb;else if(p[n.W])O=(O+1)%mb;else if(p[n.h]){try{if(k=JSON.parse(prompt("Crates",JSON.stringify(E[w][q.h]))),k instanceof Array){for(t=0;t<k.length;t++)"number"===!typeof t&&alert("Error"),k[t]=Math.max(1,Math.min(5,
k[t]));E[w][q.h]=k;$(E[w])}}catch(aa){alert("Error")}p[n.h]=void 0}else p[n.m]?((k=prompt("Name",E[w][q.m]))&&(E[w][q.m]=k),p[n.m]=!1):p[n.n]&&(t=+prompt("Time",E[w][q.n]),!isNaN(t)&&0<t&&(E[w][q.n]=t),p[n.n]=!1);N&&(p[n.G]&&!U)&&ha();N&&(p[n.I]&&!U)&&na()}}else if(e===C.l){p[n.ha]?ga(J.p)?(a.position[1]=Math.min(H-F,a.position[1]-a.Fa),a.D=!0):a.F||a.e||(a.o=a.Ta,a.F=!0,a.e=!0,a.D=!1,s(D.va)):!p[n.ha]&&a.F?(a.F=!1,a.D=!1):p[n.ra]&&ga(J.p)?(a.position[1]=Math.min(H,a.position[1]+a.Fa),a.D=!0):a.D=
!1;p[n.V]&&!a.e?(a.q=!0,a.j=!0):p[n.W]&&!a.e?(a.q=!0,a.j=!1):a.q=!1;if(a.q||0<a.u)a.position[0]=Math.min(K-F,Math.max(F,a.position[0]+(a.j?-1:1)*Ia()));if(!p[n.M]||a.F||a.e||a.v)p[n.H]&&!a.v?(a.v=!0,0<a.t&&(a.t--,a.R=Qb,a.ka=c+Rb,k=Object.create(Sb),k.position=[a.position[0]+4,a.position[1]-7],Fa.push(k),s(D.la))):p[n.M]||(p[n.H]||!a.v)||(a.v=!1);else a:if(a.v=!0,k=a.c,t=void 0!==k?M[k]:void 0,void 0===t){for(k=0;k<M.length;k++)if(S(a.position,M[k].position)<kb){a.c=k;s(D.ba);break a}ga(J.r)&&a.t<
nb&&(V("+"+(nb-a.t)+"\u00a7",[a.position[0]-4,a.position[1]-32],"#0c0"),a.t=nb,s(D.r))}else if(a.c=void 0,s(D.ba),ga(J.ta)&&void 0!==t)if(M.splice(k,1),V(0.5<Math.random()?"Thank you!":"Good boy!",[u[0]+4,u[1]],"#fff",!0),0>=M.length)la(c);else for(s(D.oa),k=60;0<k--;)va(a.position,[a.position[0]-Math.floor(128*Math.random()-64),a.position[1]+Math.ceil(128*Math.random()-64)],0.5>Math.random()?"#f00":"#00f",Math.ceil(3*Math.random()),Math.ceil(5*Math.random()));N&&(p[n.G]&&!U)&&ha();N&&(p[n.I]&&!U)&&
na()}p[n.k]&&(ua(!0),e===C.f&&(E[w][q.ea]=ka.join("").substring(P,P*ba-P),E[w][q.fa]=a.position.slice(),E[w][q.T]=d.position.slice(),E[w][q.K]=u.slice(),E[w][q.aa]=Xa.S.slice()),fa(w))}U=!1;for(var da in pa.Q)U=U||!!pa.Q[da];if(ob&&qa){var I;if(qa.clientX)I=qa;else if(qa&&qa[0])for(da=0;da<qa.length;da++)if(p=qa[da],p.clientX>=ra.left&&p.clientX<ra.left+ra.width&&p.clientY>=ra.top&&p.clientY<ra.top+ra.height){I=qa[da];break}if(I){I=[I.clientX-ra.left,I.clientY-ra.top];p=Ha(yb,I);da=S(yb,I)/12.5;var l;
e===C.l?l=d.d:e===C.f&&(l=x);l&&(l[0]+=(e===C.f?Math.round(Math.cos(p)):Math.cos(p))*(100>I[0]?-da:da),l[1]+=(e===C.f?Math.round(Math.sin(p)):Math.sin(p))*(100>I[0]?-da:da),l[0]=Math.max(0,Math.min(l[0],K-1)),l[1]=Math.max(0,Math.min(l[1],H-1)));jb&&ha()}}}za=c;r=ea.getBoundingClientRect();try{Za<c&&e===C.l&&0<Ya.length&&(zb[Ya.shift()].play(),Za+=vb)}catch(ca){}if(e===C.l){I=2;var h;l=0;if(!a.e&&wa(a.position[0]-4,a.position[1],8,0,J.C))h=a.position[1]-a.position[1]%F;else for(;I<=a.o;){if(wa(a.position[0]-
4,a.position[1]+I,8,0,J.C)){h=a.position[1]+I-(a.position[1]+I)%F;break}I+=F}h?(a.position[1]=h,a.e&&(a.u/=2,h=void 0!==a.c&&M[a.c])&&(I=Tb-h.size,l=h.size,a.o>I&&Oa(h,c)),a.e=!1,a.o>10-2*l&&s(D.za),a.o=0):wa(a.position[0]-4,a.position[1]-32,8,16,J.p)?(a.e=!1,a.o=0):(a.o+=0.6,a.e=!0,a.position[1]+=a.o);a.ka<c&&0<a.R&&(a.R=0);void 0!==a.c&&(M[a.c].position[0]=a.position[0]+Ab[0],M[a.c].position[1]=a.position[1]+Ab[1]);h=wa(d.position[0],d.position[1],0,0,J.B)?v:d.position;l=Ha(g,h);I=g[0]>h[0]?-1:
1;if(Math.abs(h[0]-g[0])>pb||Math.abs(h[1]-g[1])>pb)g[0]+=Math.cos(l)*I*f,g[1]+=Math.sin(l)*I*f;ia(d,Ub,Vb);for(h=0;h<Aa.length;h++)if(l=Aa[h],l.position[1]+=l.speed,S(a.position,l.position)<kb&&void 0!==a.c)Oa(M[a.c],c),Aa.splice(h,1),h--;else if(l.position[1]>H||wa(l.position[0],l.position[1],0,0,J.N))Aa.splice(h,1),h--;d.w<c&&(ma()*qb+Bb>=S(d.position,a.position)||X(d.position[0],d.position[1],0,0,J.N)||S(g,d.position)<pb)&&Da(c);B.position&&(void 0!==a.c&&15>S(a.position,B.position)?(Oa(M[a.c],
c),B.position=null,f=1,W()):d.w<c&&15>S(d.position,B.position)?(Da(c),B.position=null,f=1,W()):(ia(B,Wb,Xb)&&va(B.position,[B.d[0]+Math.floor(128*Math.random()-64),B.d[1]+Math.floor(128*Math.random()-64)],"#000",Math.ceil(2*Math.random()),Math.ceil(5*Math.random())),B.Ga<c&&Y(c)));for(l=0;l<Ea.length;l++)if(h=Ea[l],!ia(h,3,h.speed)||h.time<c)Ea.splice(l,1),l--;y<c&&Na(c)}r=ea.getBoundingClientRect();m.fillStyle="#000";m.fillRect(0,0,K,H);l=h=0;lb>c&&(h=Math.floor(8*Math.random()-4),l=Math.floor(8*
Math.random()-4));m.drawImage(bb,h,l);for(l=0;l<M.length;l++)l!==a.c&&(h=M[l],m.drawImage(h.ia,h.position[0]-8,h.position[1]-8));for(l=0;l<Fa.length;l++)h=Fa[l],Z(m,G.Ma,h.position[0]-8,h.position[1]-8);for(l=0;l<Aa.length;l++)h=Aa[l],Z(m,G.Na,h.position[0]-8,h.position[1]-8);Z(m,G.J,u[0],u[1]);if(b[q.L])for(h=0;h<b[q.L].length;h++)ta(m,b[q.L][h][2],b[q.L][h][0],b[q.L][h][1],"#000");B.position&&Z(m,5<S(B.position,B.d)?G.La:G.Ka,B.position[0]-8,B.position[1]);e===C.l?(a.e?Q(G.s,a.position[0]-8,a.position[1]-
24,0,a.j):a.q||a.D?Q(G.s,a.position[0]-8,a.position[1]-24,10,a.j,c):Q(G.s,a.position[0]-8,a.position[1]-24,1,a.j),a.R&&(a.e||a.q)&&(m.globalAlpha=0.6,Q(G.s,a.position[0]+(a.j?-4:-12),a.position[1]-24,10,a.j,c),m.globalAlpha=0.3,Q(G.s,a.position[0]+(a.j?2:-18),a.position[1]-24,10,a.j,c),m.globalAlpha=1)):Q(G.s,a.position[0]-8,a.position[1]-24,1);void 0!==a.c&&(h=M[a.c],m.drawImage(h.ia,a.j?h.position[0]+2:h.position[0]-15-h.size,h.position[1]-10));ma()*qb+Yb>=S(d.position,a.position)&&(m.beginPath(),
m.arc(a.position[0],a.position[1],ma()*qb+Bb,0,360),m.lineWidth=2,m.strokeStyle=B.position?"#00f":"#f00",m.stroke());e===C.l?d.w>c&&0===Math.floor(c/100)%2||Q(G.A,d.position[0]-8,d.position[1]-8,2,!1,c):Q(G.A,d.position[0]-8,d.position[1]-8,0);m.fillStyle=B.position?"#00f":"#f00";m.fillRect(g[0]-1,g[1]-1,2,2);m.beginPath();m.arc(g[0],g[1],5,0,360);m.lineWidth=2;m.strokeStyle=B.position?"#00f":"#f00";m.stroke();m.fillStyle="#fff";e===C.l?(l=Math.max(0,Math.ceil((y-c)/1E3)),h=l%60,l=Math.floor(l/60),
10>h&&(h="0"+h),m.fillText("\u00a7 "+a.t+"   \u25fc "+a.X+"   \u2732 "+l+":"+h,50,396),m.fillText("\u21a1 "+d.i+"   \u2665 "+d.Y,540,12),m.fillStyle="#00deff",m.fillText("LUKE",10,396),m.fillStyle="#f00",m.fillText("CROW",600,12)):e===C.f&&m.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+E[w][q.n]+")   N: NAME ("+E[w][q.m]+")"+(N?"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),12,12);for(l=0;l<Ea.length;l++)h=Ea[l],m.fillStyle=h.color,m.fillRect(h.position[0],h.position[1],h.size,h.size);
for(l=0;l<Sa.length;l++)h=Sa[l],h.time<c?(Sa.splice(l,1),l--):(ta(m,h.text,h.position[0]+1,h.position[1]+1,"#000","center","14px sans-serif"),ta(m,h.text,h.position[0],h.position[1],h.color,"center","14px sans-serif"),h.Ea||(h.position[1]-=0.5));e===C.k&&(h=b,L.fillStyle="rgba(0,0,0,0.7)",L.clearRect(0,0,K,H),L.fillRect(0,0,K,H),L.fillStyle="#fff",L.textAlign="center",L.font="20px courier",L.fillText(b[q.m],K/2,H/2-50),ta(L,["Luke "+z],K/2-50,H/2,!0===$a?"#0f0":"#fff","right"),ta(L,[T+" Crow"],K/
2+50,H/2,!1===$a?"#0f0":"#fff","left"),L.font="15px courier",L.fillText("A 13kB game by Alberto Congiu",K/2,12),ab<c&&(L.fillText("Click the "+(N?"screen":"crow")+" to start",K/2,H/2+60),L.fillText("< >: Select level",K/2,H/2+100),L.fillText(h[q.U]?"E: EDIT   "+(N?"S":"D")+": DELETE   "+(N?"A":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",K/2,H/2+120)),L.beginPath(),L.arc(d.position[0],d.position[1],16,0,360),L.lineWidth=2,L.strokeStyle="#fff",L.stroke(),m.drawImage(cb,0,0));e===C.f&&(m.globalAlpha=
0.6,O<Ga?(oa(m,""+O,x[0]-x[0]%F,x[1]-x[1]%F),m.strokeStyle="#000",m.strokeRect(x[0]-x[0]%F,x[1]-x[1]%F,F,F)):O===Ba.xa?Q(G.s,x[0]-8,x[1]-24,1):O===Ba.A?Q(G.A,x[0]-8,x[1]-8,0):O===Ba.J?Z(m,G.J,x[0],x[1]):O===Ba.h&&(m.fillStyle="#ea0",m.strokeStyle="#330",m.fillRect(x[0]-8,x[1]-8,16,16),m.strokeRect(x[0]-8,x[1]-8,16,16),m.fillStyle="#000",m.fillText("C",x[0]-4,x[1]+4)),m.globalAlpha=1);window.requestAnimationFrame(ja)}var K=640,H=400,F=16,P=K/F,ba=H/F,G={A:0,Ma:1,r:2,J:3,p:4,s:5,B:6,N:7,Na:8,C:9,Ka:10,
La:11},ca=[{frame:{x:30,y:0,a:30,b:14},g:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,b:8},g:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},g:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},g:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},g:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},g:{x:0,
y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},g:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:36,y:32,a:11,b:13},g:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:30,a:15,b:16},g:{x:0,y:0,a:15,b:16}}],Pa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Qa=!(!window.btoa||!window.atob),Ja="023123467".split(""),vb=200,D={va:0,ya:1,qa:2,pa:3,ba:4,oa:5,Aa:6,sa:7,la:8,ca:9,r:10,ma:11,na:12,za:13},n={V:37,ha:38,W:39,ra:40,H:69,M:32,k:27,G:68,I:74,h:67,m:78,n:84,ua:73},
wb=2E3,C={k:0,l:1,f:2},xb=500,Gb=1500,Ib=1500,kb=15,J={EMPTY:"0",C:"1",p:"2",N:"3",Oa:"4",ta:"5",B:"6",r:"7"},Ga=8,Ba={xa:Ga+0,A:Ga+1,J:Ga+2,h:Ga+3},mb=Ga+4,Qb=3,Rb=5E3,Yb=75,Bb=25,qb=7,nb=3,Kb=3,Lb=5,Nb=5E3,ub=10,Vb=16,Ub=3,pb=3,Wb=3,ib=3,Xb=16,Ob=2E3,tb=10,Ka=12,Ab=[1,-6],Tb=13,q={m:0,fa:1,T:2,aa:3,K:4,n:5,ea:6,h:7,L:8,U:9};(function(){for(var a=0,b=["webkit","moz"],d=0;d<b.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"];window.requestAnimationFrame||
(window.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);a=d+e;return f})})();var N=!1,Ta=document.getElementById("o"),ra=Ta.getBoundingClientRect(),yb=[100,100],ob=!1,qa=null,Wa=null,hb=null,Cb=null;if("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints)for(var N=!0,Wa=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",hb=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",Cb=
window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",rb=document.getElementsByClassName("b"),db=0;db<rb.length;db++)-1===rb[db].getAttribute("class").indexOf("e")&&rb[db].setAttribute("class","b");var ea=document.getElementById("C"),m=ea.getContext("2d"),ya=new Image,Va=document.createElement("canvas"),sb=0,cb=document.createElement("canvas"),L=cb.getContext("2d"),bb=document.createElement("canvas"),Jb=bb.getContext("2d"),Ra=[],zb={},Ya=null,Za=0,x=[0,0],eb=!1,U=!1,pa={Q:{},Ia:function(a){pa.Q[a.keyCode]=
void 0},Ha:function(a){pa.Q[a.keyCode]=za}},za=0;e=C.k;r=ea.getBoundingClientRect();T=z=y=0;b=null;var lb=0,ab=0,$a=void 0,Fb={position:null,text:void 0,color:"#0f0",time:0,Ea:!1},Sa=[],ka=[],La=null,jb=!1,O=0,a={position:null,speed:4,u:0,R:0,ka:0,Fa:2,Ta:-6.8,D:!1,F:!1,e:!1,q:!1,v:!1,o:0,c:void 0,t:0,X:tb,Za:!1},d={position:null,d:null,i:0,w:0,Y:ub};g=v=u=null;f=1;var B={position:null,d:null,Ga:0,ja:ib},Xa={ia:null,position:null,S:null,size:1},M=[],Sb={position:null},Fa=[],Mb={position:null,speed:6},
Aa=[],Hb={position:null,d:null,color:"#000",time:0,size:2,speed:2},Ea=[],Db=[["Tutorial",[33,370],[K-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(N?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(N?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(N?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(N?"A":"RClick")+": eat from nest or crumbs",(N?"S":"LClick")+": shoot!"]],
[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300033000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000700001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000600000000000000112110000002020000060000111000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[88,317],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2,3]],["Level 4",[75,370],[K-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110011010101111201110011110000000000000000000003030000000000000000100000000000000000000000000700000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330112100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010101010111000020200000000211111111111111000000033311001111011100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000000000000303030200000000000000000000000000007000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[2,3,4]]],E=window.localStorage&&window.localStorage.wa&&JSON.parse(window.localStorage.wa)||Db,Pb=E.length-Db.length+1,w=0;ya.onload=function(){Va.width=sb=ya.naturalWidth;Va.height=ya.naturalHeight;var a=Va.getContext("2d");a.translate(ya.naturalWidth,0);a.scale(-1,1);a.drawImage(ya,0,0);fa(w);ja(1)};ya.src="imgmap.png";cb.width=bb.width=K;cb.height=bb.height=H;for(var fb=0;fb<Pa.length;fb++)zb[fb]=gb.Ca(["synth",0,0.1,0,0.208,0,0.12,20,Pa[fb],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);
Ya=Ja.slice();k(D.va,["square",0,0.3,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);k(D.ya,["noise",0,0.3,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);k(D.oa,["square",0,0.3,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);k(D.la,["saw",0,0.3,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);k(D.qa,["saw",0,0.3,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,
0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);k(D.sa,["synth",0,0.3,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);k(D.Aa,["synth",0,0.3,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);k(D.ba,["noise",0,0.3,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);k(D.pa,["noise",0,0.3,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);k(D.ca,
["square",0,0.3,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);k(D.r,["square",0,0.3,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);k(D.ma,["synth",0,0.3,0,0.44,0.579,1.004,20,1793,2400,-0.202,0,0,8.6962,0.5346,0.666,-0.298,0.671,0,0,0,0,0,1,0,0,0,0]);k(D.na,["noise",0,0.127,0.043,0.124,0,0.282,20,2400,20,1,-1,0,0.01,-0.3,-1,0.956,0.272,0,0.68,0,-0.998,-1,1,1,0,0,-0.998]);k(D.za,["noise",0,0.126,0,0.07,0,0.232,2400,2400,2400,
-1,-1,0,0.01,-0.3,-1,-1,0,0,-1,0,0.0040,0,1,1,0,0,-1]);window.addEventListener("keyup",pa.Ia,!1);window.addEventListener("keydown",pa.Ha,!1);if(N){A(ea,Wa,function(a){a.preventDefault();e===C.k&&Ca()});t("x",n.k);t("e",n.H);t("l",n.V);t("u",n.ha);t("r",n.W);t("d",n.ra);t("i",n.M);t("s",n.G);t("a",n.I);t("c",n.h);t("t",n.n);t("n",n.m);var Eb=function(a){a.preventDefault();qa=a.changedTouches||a;ra=Ta.getBoundingClientRect();ob=!0};A(Ta,Wa,Eb);A(Ta,Cb,Eb);A(Ta,hb,function(a){a.preventDefault();ob=!1});
A(document.body,"contextmenu",function(a){a.preventDefault()})}else A(ea,"click",ha),A(ea,"contextmenu",na),A(ea,"mousedown",function(a){1===a.which&&(eb=!0);e===C.f&&eb&&ha()}),A(ea,"mouseup",function(a){1===a.which&&(eb=!1)}),A(ea,"mousemove",function(a){var b=a.clientX-r.left;a=a.clientY-r.top;b=Math.max(0,Math.min(b,K-1));a=Math.max(0,Math.min(a,H-1));x=[b,a];e===C.l?d.d=x.slice():e===C.f&&eb&&ha()})})();
