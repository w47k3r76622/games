"use strict";
/**
 * @preserve
 * Kontra.js v10.0.2
 */let t=()=>{};function e(t,e){let{x:i,y:s,width:n,height:a}=function(t){let{x:e=0,y:i=0,width:s,height:n,radius:a}=t.world||t;return t.mapwidth&&(s=t.mapwidth,n=t.mapheight),s<0&&(e+=s,s*=-1),n<0&&(i+=n,n*=-1),{x:e,y:i,width:s,height:n}}(e);do{i-=e.sx||0,s-=e.sy||0}while(e=e.parent);let r=t.x-Math.max(i,Math.min(t.x,i+n)),o=t.y-Math.max(s,Math.min(t.y,s+a));return r*r+o*o<t.radius*t.radius}let i,s,n={};function a(t,e){n[t]=n[t]||[],n[t].push(e)}function r(t,...e){(n[t]||[]).map((t=>t(...e)))}let o={get:(e,i)=>"_proxy"==i||t};function h(){return i}function l(){return s}class c{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0,name:n}){let{width:a,height:r,spacing:o=0,margin:h=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:i,loop:s,name:n,width:a,height:r,spacing:o,margin:h,isStopped:!1,_f:0,_a:0})}clone(){return new c(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped)if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate;else this.stop()}render({x:t,y:e,width:i=this.width,height:s=this.height,context:n=l()}){let a=this.frames[this._f]/this.spriteSheet._f|0,r=this.frames[this._f]%this.spriteSheet._f|0;n.drawImage(this.spriteSheet.image,this.margin+r*this.width+(2*r+1)*this.spacing,this.margin+a*this.height+(2*a+1)*this.spacing,this.width,this.height,t,e,i,s)}}function d(){return new c(...arguments)}let p=/(jpeg|jpg|gif|png|webp)$/,u=/(wav|mp3|ogg|aac)$/,m=/^\//,f=/\/$/,w=new WeakMap,g="",y="",x="";function _(t,e){return new URL(t,e).href}function v(t,e){return[t.replace(f,""),e].filter((t=>t)).join("/")}function b(t){return t.split(".").pop()}function C(t){let e=t.replace("."+b(t),"");return 2==e.split("/").length?e.replace(m,""):e}let A={},F={},R={};function k(){window.__k||(window.__k={dm:w,u:_,d:R,i:A})}function E(...t){return k(),Promise.all(t.map((t=>{let e=b([].concat(t)[0]);return e.match(p)?(i=t,k(),new Promise(((t,e)=>{let s,n,a;if(s=v(g,i),A[s])return t(A[s]);n=new Image,n.onload=function(){a=_(s,window.location.href),A[C(i)]=A[s]=A[a]=this,r("assetLoaded",this,i),t(this)},n.onerror=function(){e(s)},n.src=s}))):e.match(u)?function(t){return new Promise(((e,i)=>{let s,n,a,o,h=t;var l;return s=new Audio,n={wav:(l=s).canPlayType('audio/wav; codecs="1"'),mp3:l.canPlayType("audio/mpeg;"),ogg:l.canPlayType('audio/ogg; codecs="vorbis"'),aac:l.canPlayType("audio/aac;")},(t=[].concat(t).reduce(((t,e)=>t||(n[b(e)]?e:null)),0))?(a=v(y,t),F[a]?e(F[a]):(s.addEventListener("canplay",(function(){o=_(a,window.location.href),F[C(t)]=F[a]=F[o]=this,r("assetLoaded",this,t),e(this)})),s.onerror=function(){i(a)},s.src=a,void s.load())):i(h)}))}(t):function(t){let e,i;return k(),e=v(x,t),R[e]?Promise.resolve(R[e]):fetch(e).then((t=>{if(!t.ok)throw t;return t.clone().json().catch((()=>t.text()))})).then((s=>(i=_(e,window.location.href),"object"==typeof s&&w.set(s,i),R[C(t)]=R[e]=R[i]=s,r("assetLoaded",s,t),s)))}(t);var i})))}class M{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new M(this.x+t.x,this.y+t.y,this)}}class O{constructor(t){return this.init(t)}init(t={}){this.position=function(){return new M(...arguments)}(),Object.assign(this,t)}update(t){this.advance(t)}advance(t){}_pc(){}}class S extends O{init({width:t=0,height:e=0,context:i=l(),render:s=this.draw,update:n=this.advance,scaleX:r=1,scaleY:o=1,...h}={}){super.init({width:t,height:e,context:i,scaleX:r,scaleY:o,...h}),this._di=!0,this._uw(),this._rf=s,this._uf=n,a("init",(()=>{this.context??=l()}))}update(t){this._uf(t)}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY),this._rf(),t.restore()}draw(){}_pc(){this._uw()}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wsx:i=1,_wsy:s=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wsx=i*this.scaleX,this._wsy=s*this.scaleY,this._wx=this._wx*i,this._wy=this._wy*s,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,scaleX:this._wsx,scaleY:this._wsy}}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class j extends S{init({...t}={}){super.init({...t})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}let L=new WeakMap,P={},Y={},X={0:"left",1:"middle",2:"right"};function T(t,e){return parseFloat(t.getPropertyValue(e))||0}function G(t){let e=null!=t.button?X[t.button]:"left";Y[e]=!0,U(t,"onDown")}function D(t){let e=null!=t.button?X[t.button]:"left";Y[e]=!1,U(t,"onUp")}function H(t){U(t,"onOver")}function W(t){L.get(t.target)._oo=null,Y={}}function I(t,i,s){let n=function(t){let i=t._lf.length?t._lf:t._cf;for(let s=i.length-1;s>=0;s--){let n=i[s];if(n.collidesWithPointer?n.collidesWithPointer(t):e(t,n))return n}}(t);n&&n[i]&&n[i](s),P[i]&&P[i](s,n),"onOver"==i&&(n!=t._oo&&t._oo&&t._oo.onOut&&t._oo.onOut(s),t._oo=n)}function U(t,e){t.preventDefault();let i=t.target,s=L.get(i),{scaleX:n,scaleY:a,offsetX:o,offsetY:h}=function(t){let{canvas:e,_s:i}=t,s=e.getBoundingClientRect(),n="none"!=i.transform?i.transform.replace("matrix(","").split(","):[1,1,1,1],a=parseFloat(n[0]),r=parseFloat(n[3]),o=(T(i,"border-left-width")+T(i,"border-right-width"))*a,h=(T(i,"border-top-width")+T(i,"border-bottom-width"))*r,l=(T(i,"padding-left")+T(i,"padding-right"))*a,c=(T(i,"padding-top")+T(i,"padding-bottom"))*r;return{scaleX:(s.width-o-l)/e.width,scaleY:(s.height-h-c)/e.height,offsetX:s.left+(T(i,"border-left-width")+T(i,"padding-left"))*a,offsetY:s.top+(T(i,"border-top-width")+T(i,"padding-top"))*r}}(s);t.type.includes("touch")?(Array.from(t.touches).map((({clientX:t,clientY:e,identifier:i})=>{let r=s.touches[i];r||(r=s.touches[i]={start:{x:(t-o)/n,y:(e-h)/a}},s.touches.length++),r.changed=!1})),Array.from(t.changedTouches).map((({clientX:i,clientY:l,identifier:c})=>{let d=s.touches[c];d.changed=!0,d.x=s.x=(i-o)/n,d.y=s.y=(l-h)/a,I(s,e,t),r("touchChanged",t,s.touches),"onUp"==e&&(delete s.touches[c],s.touches.length--,s.touches.length||r("touchEnd"))}))):(s.x=(t.clientX-o)/n,s.y=(t.clientY-h)/a,I(s,e,t))}function z(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let B={},V={},$={},N={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function q(e=t,i){e._pd&&i.preventDefault(),e(i)}function K(t){let e=N[t.code],i=B[e];$[e]=!0,q(i,t)}function J(t){let e=N[t.code],i=V[e];$[e]=!1,q(i,t)}function Q(){$={}}function Z(t){return!![].concat(t).some((t=>$[t]))}function tt(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],n=+i[1],a=s;if(s<n)for(;a<=n;a++)e.push(a);else for(;a>=n;a--)e.push(a);return e}class et{constructor({image:t,frameWidth:e,frameHeight:i,spacing:s=0,margin:n=0,animations:a}={}){this.animations={},this.image=t,this.frame={width:e,height:i,spacing:s,margin:n},this._f=(t.width-n)/e|0,this.createAnimations(a)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:n,loop:a}=t[i];e=[],[].concat(s).map((t=>{e=e.concat(tt(t))})),this.animations[i]=d({spriteSheet:this,frames:e,frameRate:n,loop:a,name:i})}}}function it(t,e){return t/e|0}function st(t,e){return t/e|0}class nt{constructor(t={}){let{width:e,height:i,tilewidth:s,tileheight:n,tilesets:r}=t,o=e*s,h=i*n,c=document.createElement("canvas");c.width=o,c.height=h,this._c=c,this._ctx=c.getContext("2d"),Object.assign(this,{context:l(),layerMap:{},layerCanvases:{},mapwidth:o,mapheight:h,...t}),this.context&&this._p(),a("init",(()=>{this.context??=l(),this._p()}))}getPosition(t){let e=h().getBoundingClientRect(),i=t.x-e.x,s=t.y-e.y;return{x:i,y:s,row:it(s,this.tileheight),col:st(i,this.tilewidth)}}render(t=this._c,e=!0){let{_d:i,context:s,sx:n=0,sy:a=0}=this;i&&this._p();let{width:r,height:o}=h(),l=Math.min(t.width,r),c=Math.min(t.height,o);s.drawImage(t,n,a,l,c,0,0,l,c)}renderLayer(t){let{layerCanvases:e,layerMap:i}=this,s=i[t],n=e[t],a=n?.getContext("2d");if(!n){let{mapwidth:i,mapheight:r}=this;n=document.createElement("canvas"),a=n.getContext("2d"),n.width=i,n.height=r,e[t]=n,this._rl(s,a)}this.render(n,!1)}_p(){let{_ctx:t,layers:e=[],layerMap:i}=this;this._d=!1,e.map((e=>{let{name:s,data:n,visible:a}=e;e._d=!1,i[s]=e,n&&0!=a&&this._rl(e,t)}))}_rl(t,e){let{opacity:i,data:s=[]}=t,{tilesets:n,width:a,tilewidth:r,tileheight:o}=this;e.save(),e.globalAlpha=i,s.map(((t,i)=>{if(!t)return;let s;for(let e=n.length-1;e>=0&&(s=n[e],!(t/s.firstgid>=1));e--);let{image:h,spacing:l=0,margin:c=0,firstgid:d,columns:p}=s,u=t-d,m=p??h.width/(r+l)|0,f=i%a*r,w=(i/a|0)*o,g=c+u%m*(r+l),y=c+(u/m|0)*(o+l);e.drawImage(h,g,y,r,o,f,w,r,o)})),e.restore()}}class at extends j{movingTo=null;constructor(t){super(t)}init(t){super.init({...t,width:16,height:16,anchor:{x:0,y:0}}),this.playAnimation("atRest")}isMoving(){return!!this.movingTo}moveTo(t,e){if(this.movingTo)return!1;const i=(n={x:t,y:e},(s=this).x!==n.x?n.x-s.x<0?"left":"right":s.y!==n.y?n.y-s.y<0?"up":"down":"atRest");var s,n;return"atRest"!==i&&(!!this.animations[i]&&(this.movingTo={x:t,y:e},this.playAnimation(i),!0))}playAnimation(t){if(this.currentAnimationName!==t){this.currentAnimationName=t;const e="left"===this.direction&&"atRest"==t||"left"===t;this.scaleX=e?-1:1,this.translateX=e?16:0,super.playAnimation(t)}}update(){if(this.advance(),this.movingTo){const i=1,s=(t=this,e=this.movingTo,Math.atan2(e.y-t.y,e.x-t.x)),{x:n,y:a}=function(t,e,i){return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}}(this,s,i);let r={x:Math.round(n),y:Math.round(a)};Math.hypot(this.movingTo.x-r.x,this.movingTo.y-r.y)<=i&&(r=this.movingTo,this.movingTo=null),this.x=r.x,this.y=r.y}else"atRest"!==this.currentAnimationName&&this.playAnimation("atRest");var t,e}render(){if(!this.translateX&&!this.translateY)return void super.render();const t=this.context;t.save(),this.context.translate(this.translateX||0,this.translateY||0),super.render(),t.restore()}}class rt extends at{}class ot extends j{isOpening=!1;init(t){super.init({...t,width:16,height:16,anchor:{x:0,y:0}}),this.playAnimation("chestClosed")}open(){this.isOpening||(this.playAnimation("chestOpening"),this.isOpening=!0)}}class ht extends j{isOpening=!1;isOpen=!1;init(t){super.init({...t,width:16,height:16,anchor:{x:0,y:0}}),this.playAnimation("doorClosed")}open(){this.isOpening||this.isOpen||(this.playAnimation("doorOpen"),this.isOpening=!0)}update(){this.advance(),this.currentAnimation.isStopped&&this.isOpening&&!this.isOpen&&(this.isOpen=!0)}}const lt="2..3";class ct extends at{}class dt{mapFile;tileset;objects;chickens;levelComplete=!1;tileEngine;player;constructor(t,e){this.mapFile=t,this.tileset=e,this.objects=[],this.chickens=[],this.init()}static async load(t,e){return E(`assets/map${t}.json`).then((([t])=>new dt(t,e)))}init(){this.tileEngine=function(){return new nt(...arguments)}({tilewidth:this.tileset.tileWidth,tileheight:this.tileset.tileHeight,width:this.mapFile.width,height:this.mapFile.height,tilesets:[{firstgid:1,image:this.tileset.image}],layers:[{name:"background",data:Array(this.mapFile.width*this.mapFile.height).fill(23)},{name:"floor",data:this.mapFile.layers.floor},{name:"structures",data:this.mapFile.layers.structures}]}),this.objects=this.mapFile.layers.objects.flatMap(((t,e)=>{const i=this.coordinateFromCell(this.cellFromIndex(e));return 38===t?this.tileset.newChest(i):31===t?this.tileset.newPlayer(i):37===t?this.tileset.newCart({...i,orientation:"vertical"}):36===t?this.tileset.newCart({...i,orientation:"horizontal"}):24===t?this.tileset.newBlob(i):21===t?this.tileset.newDoor(i):5===t?this.tileset.newChicken({...i,direction:"up"}):1===t?this.tileset.newChicken({...i,direction:"down"}):2147483651===t?this.tileset.newChicken({...i,direction:"left"}):3===t?this.tileset.newChicken({...i,direction:"right"}):[]})),this.chickens=this.objects.filter((t=>t instanceof ct)),this.player=this.objects.find((t=>t instanceof rt))}objectAtCoordinate(t){const e=this.indexFromCoordinate(t);return this.objects.find((t=>this.indexFromCoordinate(t)===e))}movePlayer(t,e){if(!this.player||!this.tileEngine||this.player.isMoving())return;const i=this.player.x+16*Math.sign(t),s=this.player.y+16*Math.sign(e),n={x:i,y:s};if(i<0||i>=this.tileEngine.mapwidth||s<0||s>=this.tileEngine.mapheight)return;const a=this.objectAtCoordinate(n);if(a instanceof ot)a.open();else if(a instanceof ht)a.isOpen?this.levelComplete=!0:a.open();else{if(a instanceof at){const i=a.x+16*Math.sign(t),s=a.y+16*Math.sign(e),n={x:i,y:s};if(this.mapFile.layers.structures[this.indexFromCoordinate(n)]||this.objectAtCoordinate(n))return;if(!a.moveTo(i,s))return}this.mapFile.layers.structures[this.indexFromCoordinate(n)]||this.player.moveTo(i,s)}}update(){this.chickens.forEach((t=>{const e={x:t.x,y:t.y};"left"===t.direction?e.x-=16:"right"===t.direction?e.x+=16:"up"===t.direction?e.y-=16:"down"===t.direction&&(e.y+=16),this.mapFile.layers.structures[this.indexFromCoordinate(e)]||this.objectAtCoordinate(e)||t.moveTo(e.x,e.y)})),this.objects.forEach((t=>t.update()))}render(){this.tileEngine?.render(),this.objects.forEach((t=>t.render()))}indexFromCell({col:t,row:e}){return e*this.mapFile.width+t}indexFromCoordinate({x:t,y:e}){return this.indexFromCell({col:Math.floor(t/this.tileset.tileWidth),row:Math.floor(e/this.tileset.tileHeight)})}cellFromIndex(t){const e=t%this.mapFile.width;return{col:e,row:(t-e)/this.mapFile.width}}coordinateFromCell({col:t,row:e}){return{x:t*this.tileset.tileWidth,y:e*this.tileset.tileHeight}}}class pt extends at{}class ut extends at{}class mt{image;tileWidth;tileHeight;sprites;constructor({image:t}){this.image=t,this.tileWidth=16,this.tileHeight=16,this.sprites=function(){return new et(...arguments)}({image:t,frameWidth:this.tileWidth,frameHeight:this.tileHeight,animations:{playerDown:{frames:30},playerGoDown:{frames:"30..34",frameRate:10},chickendown:{frames:0},chickenGoDown:{frames:"0..1",frameRate:10},chickenright:{frames:2},chickenGoRight:{frames:lt,frameRate:10},chickenup:{frames:4},chickenGoUp:{frames:"4..5",frameRate:10},chickenleft:{frames:2},chickenGoLeft:{frames:lt,frameRate:10},blob:{frames:23},blobGo:{frames:"23..29",frameRate:10},chestClosed:{frames:37},chestOpening:{frames:"37..39",frameRate:10},cartHorizontal:{frames:35},cartVertical:{frames:36},doorClosed:{frames:20},doorOpen:{frames:[20,21],loop:!1,frameRate:10}}})}static async load(){const t=new Image;return t.src="assets/sprites.png",new Promise((e=>{t.onload=function(){e(new mt({image:t}))}}))}newPlayer({x:t,y:e}){return new rt({x:t,y:e,translateY:-4,animations:{atRest:this.sprites.animations.playerDown,up:this.sprites.animations.playerGoDown,down:this.sprites.animations.playerGoDown,left:this.sprites.animations.playerGoDown,right:this.sprites.animations.playerGoDown}})}newCart({x:t,y:e,orientation:i}){return new ut({x:t,y:e,animations:{..."vertical"===i?{atRest:this.sprites.animations.cartVertical,up:this.sprites.animations.cartVertical,down:this.sprites.animations.cartVertical}:{atRest:this.sprites.animations.cartHorizontal,left:this.sprites.animations.cartHorizontal,right:this.sprites.animations.cartHorizontal}}})}newBlob({x:t,y:e}){return new pt({x:t,y:e,translateY:-2,animations:{atRest:this.sprites.animations.blob,up:this.sprites.animations.blobGo,down:this.sprites.animations.blobGo,left:this.sprites.animations.blobGo,right:this.sprites.animations.blobGo}})}newChicken({x:t,y:e,direction:i}){return new ct({x:t,y:e,translateY:-2,direction:i,animations:{atRest:this.sprites.animations[`chicken${i}`],up:this.sprites.animations.chickenGoUp,down:this.sprites.animations.chickenGoDown,left:this.sprites.animations.chickenGoLeft,right:this.sprites.animations.chickenGoRight}})}newChest({x:t,y:e}){return new ot({x:t,y:e,animations:this.sprites.animations})}newDoor({x:t,y:e}){return new ht({x:t,y:e,animations:this.sprites.animations})}}!function(t,{contextless:e=!1}={}){i=document.getElementById(t)||t||document.querySelector("canvas"),e&&(i=i||new Proxy({},o)),s=i.getContext("2d")||new Proxy({},o),s.imageSmoothingEnabled=!1,r("init")}(),function({radius:t=5,canvas:e=h()}={}){let i=L.get(e);if(!i){let s=window.getComputedStyle(e);i={x:0,y:0,radius:t,touches:{length:0},canvas:e,_cf:[],_lf:[],_o:[],_oo:null,_s:s},L.set(e,i)}e.addEventListener("mousedown",G),e.addEventListener("touchstart",G),e.addEventListener("mouseup",D),e.addEventListener("touchend",D),e.addEventListener("touchcancel",D),e.addEventListener("blur",W),e.addEventListener("mousemove",H),e.addEventListener("touchmove",H),i._t||(i._t=!0,a("tick",(()=>{i._lf.length=0,i._cf.map((t=>{i._lf.push(t)})),i._cf.length=0})))}(),function(){let t;for(t=0;t<26;t++)N["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)N["Digit"+t]=N["Numpad"+t]=""+t;window.addEventListener("keydown",K),window.addEventListener("keyup",J),window.addEventListener("blur",Q)}();let ft=-1;mt.load().then((e=>{let i,s=!1,n=!1,o=function({fps:e=60,clearCanvas:i=!0,update:s=t,render:n,context:o=l(),blur:h=!1}={}){let c,d,p,u,m,f=0,w=1e3/e,g=1/e,y=i?z:t,x=!0;function _(){if(d=requestAnimationFrame(_),x&&(p=performance.now(),u=p-c,c=p,!(u>1e3))){for(f+=u;f>=w;)r("tick"),m.update(g),f-=w;y(m.context),m.render()}}return h||(window.addEventListener("focus",(()=>{x=!0})),window.addEventListener("blur",(()=>{x=!1}))),a("init",(()=>{m.context??=l()})),m={update:s,render:n,isStopped:!0,context:o,start(){this.isStopped&&(c=performance.now(),this.isStopped=!1,requestAnimationFrame(_))},stop(){this.isStopped=!0,cancelAnimationFrame(d)}},m}({update:function(){if(!s){if(!i||i.levelComplete)return s=!0,n=!1,ft=(ft+1)%10,void dt.load(ft,e).then((t=>{i=t,s=!1}));n||Z(["arrowup","w"])||(n=!0),n&&(Z(["arrowup","w"])&&i.movePlayer(0,-1),Z(["arrowdown","s"])&&i.movePlayer(0,1),Z(["arrowleft","a"])&&i.movePlayer(-1,0),Z(["arrowright","d"])&&i.movePlayer(1,0),Z(["r"])&&i.init(),i.update())}},render:function(){i&&i.render()}});o.start()}));
