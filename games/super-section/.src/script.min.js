var rad2deg=180/Math.PI,deg2rad=Math.PI/180;class Star{constructor(){this.x=canvas.width*Math.random(),this.y=canvas.height*Math.random(),this.z=Star.maxZ*Math.random(),this.accX=0,this.accY=0,this.c=Math.floor(128*Math.random())+128,this.color="rgb("+this.c+","+this.c+","+this.c+")"}GetColorMagnitude(){var e=1-this.z/Star.maxZ,a=Math.ceil(this.c*e);return"rgb("+a+","+a+","+a+")"}Draw(e){e.fillStyle=this.color,e.fillRect(this.x,this.y,2,2)}Update(){(this.x<0||this.x>canvas.width||this.y<0||this.y>canvas.height)&&(this.z=Star.maxZ,this.accX=0,this.accY=0,this.x=canvas.width*Math.random(),this.y=canvas.height*Math.random());var e=(this.x-originX)/150,a=(this.y-originY)/150;this.accX+=e/a,this.accY+=a/e,this.x+=e,this.y+=a,this.z-=Math.abs(e)+Math.abs(a),this.z<0&&(this.z=0),this.color=this.GetColorMagnitude()}}Star.num_stars=1e3,Star.maxZ=200;class GameState{static checkInput(){var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],a=e&&e[0],r=e[0],t=0,i=0;if(a){if(Math.abs(r.axes[0])>.2&&(t=r.axes[0]),Math.abs(r.axes[1])>.2&&(i=r.axes[1]),0!=t||0!=i){t*=100,i*=100;var s=Math.atan2(i,t);player.move(s)}}else t=GameState.keyPressed[65]?1:0,t=GameState.keyPressed[68]?t-1:t,player.move(player.startAngle+t);pauseButtonHeld?pauseButtonHeld=a&&r.buttons[9].pressed||GameState.keyPressed[32]:(a&&r.buttons[9].pressed||GameState.keyPressed[32])&&(gamePaused=!0,pauseButtonHeld=!0)}static checkForUnpause(){var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],a=e&&e[0],r=e[0];pauseButtonHeld?pauseButtonHeld=a&&r.buttons[9].pressed||GameState.keyPressed[32]:(a&&r.buttons[9].pressed||GameState.keyPressed[32])&&(gamePaused=!1,pauseButtonHeld=!0)}static checkForPurchase(){var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],a=e&&e[0],r=e[0];backButtonHeld?backButtonHeld=a&&r.buttons[8].pressed||GameState.keyPressed[8]:(a&&r.buttons[8].pressed||GameState.keyPressed[8])&&(purchaseScreen=!0,backButtonHeld=!0)}static buyPlayerAngularSpeed(e){var a;if(player.angularVelocity<2*deg2rad)if(e||0==e)for(;e>0;)a=Math.min(e,playerAngularSpeedUpgradeCost),e>playerAngularSpeedUpgradeCost&&(player.angularVelocity+=.1*deg2rad,playerAngularSpeedUpgradeCost*=10),e-=a;else e=Math.min(score,.01*playerAngularSpeedUpgradeCost),score-=e,savedData.playerAngularSpeed=savedData.playerAngularSpeed+e,localStorage.setItem("sis_playerAngularSpeed",savedData.playerAngularSpeed),savedData.playerAngularSpeed>playerAngularSpeedUpgradeCost&&(arcadeAudio.play("kaching"),player.angularVelocity+=.1*deg2rad,playerAngularSpeedUpgradeCost*=10)}static handlePurchases(){var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],a=e&&e[0],r=e[0];(a&&r.buttons[2].pressed||GameState.keyPressed[88])&&GameState.buyShieldProgress(),(a&&r.buttons[0].pressed||GameState.keyPressed[65])&&GameState.buyPlayerAngularSpeed()}static buyShieldProgress(e){var a;if(e||0==e)for(;e>0;)a=Math.min(e,shieldUpgradeCost),e>shieldUpgradeCost&&(maxShields+=1,shieldUpgradeCost*=10),e-=a;else e=Math.min(score,.01*shieldUpgradeCost),score-=e,savedData.shieldProgress=savedData.shieldProgress+e,localStorage.setItem("sis_shieldProgress",savedData.shieldProgress),savedData.shieldProgress>shieldUpgradeCost&&(arcadeAudio.play("kaching"),maxShields+=1,shieldUpgradeCost*=10)}static checkForRestart(){var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],a=e&&e[0],r=e[0];pauseButtonHeld?pauseButtonHeld=a&&r.buttons[9].pressed||GameState.keyPressed[32]:(a&&r.buttons[9].pressed||GameState.keyPressed[32])&&(restart=!0,pauseButtonHeld=!0)}static isPlayerTouchingArc(e,a){return!(!(a.radius<=e.radius&&e.radius<=1.1*a.radius||a.radius<=1.1*e.radius&&1.1*e.radius<=1.1*a.radius)||!isBetween(a.stopAngle,a.startAngle,e.startAngle)&&!isBetween(a.stopAngle,a.startAngle,e.stopAngle))}static updateStars(){for(var e=0;e<stars.length;e++)stars[e].Update()}static update(){GameState.checkInput(),ArcFactory.arcGeneration(),GameState.updateStars(),player.update(refreshTime),Hud.updateScore();for(var e=arcs.length;e--;)arcs[e].update(),.95*arcs[e].radius>Math.sqrt(canvas.width*canvas.width+canvas.height*canvas.height)&&arcs.splice(e,1)}}GameState.keyPressed={},window.onkeydown=function(e){e=e||window.event,GameState.keyPressed[e.keyCode]=!0},window.onkeyup=function(e){e=e||window.event,delete GameState.keyPressed[e.keyCode]};class Render{static drawArcFromCenter(e,a,r,t,i,s,n){var d=new Path2D;return d.arc(e,a,s+i,r,t,1),d.lineTo(e+Math.cos(t)*s,a+Math.sin(t)*s),d.arc(e,a,s,t,r,0),d.lineTo(e+Math.cos(r)*(s-i),a+Math.sin(r)*(s-i)),""!=n?(ctx.fillStyle=n,ctx.fill(d)):ctx.stroke(d),d}static drawCircle(e,a,r,t){var i=new Path2D;return i.arc(e,a,r,0,2*Math.PI),""!=t?(ctx.fillStyle=t,ctx.fill(i)):(ctx.strokeStyle="#93a1a1",ctx.stroke(i)),i}static renderLoadScreen(){Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","[LOADING ...]",originX,originY)}static renderTitleScreen(){if(ctx.clearRect(0,0,canvas.width,canvas.height),audioLoaded)for(var e=0;e<stars.length;e++)stars[e].Draw(ctx);var a=originY-.25*squareScreenSize;ctx.font="bold "+squareScreenSize/10+"px Arial Black";var r=ctx.measureText("++").width;ctx.font="bold "+squareScreenSize/10+"px BumpItUp";var t=ctx.measureText("SUPER").width,i=originX-r/2;Hud.drawText("bold "+squareScreenSize/10+"px BumpItUp","#b58900","middle","center","SUPER",i,a),Hud.drawText("bold "+squareScreenSize/10+"px Arial Black","#b58900","bottom","left","++",i+t/2,a),Hud.drawText("bold "+squareScreenSize/10+"px Arial Black","#b58900","middle","right","section",i+t/2+r,a+squareScreenSize/10),audioLoaded&&(Gamepads.checkForGamepad()||Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","GAMEPAD RECOMENDED",originX,originY+squareScreenSize/15+squareScreenSize/40*1),Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS F11 FOR FULLSCREEN",originX,originY+squareScreenSize/15+squareScreenSize/40*3),Gamepads.checkForGamepad()?Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS START TO PLAY",originX,originY+squareScreenSize/15+squareScreenSize/40*5):Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS SPACE TO PLAY",originX,originY+squareScreenSize/15+squareScreenSize/40*5))}static endGame(){Hud.drawText("bold "+squareScreenSize/10+"px BumpItUp","#b58900","middle","center","GAME OVER",originX,originY),Gamepads.checkForGamepad()?Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS BACK TO BUY UPGRADES",originX,originY+squareScreenSize/10):Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS BACKSPACE TO BUY UPGRADES",originX,originY+squareScreenSize/10),Gamepads.checkForGamepad()?Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS START TO RESTART",originX,originY+squareScreenSize/10+squareScreenSize/40):Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS SPACE TO RESTART",originX,originY+squareScreenSize/10+squareScreenSize/40)}static drawStars(){for(var e=0;e<stars.length;e++)stars[e].Draw(ctx)}static renderPurchaseScreen(){purchaseScreen=!0,ctx.clearRect(0,0,canvas.width,canvas.height),Render.drawStars(),Gamepads.checkForGamepad()?Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS START TO RESTART",originX,originY):Hud.drawText("bold "+squareScreenSize/40+"px Arial","#fdf6e3","middle","center","PRESS SPACE TO RESTART",originX,originY),Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","middle","center","PRESS X : "+Math.floor(savedData.shieldProgress)+"/"+shieldUpgradeCost+" NEW SHIELD",originX,originY+squareScreenSize/10),player.angularVelocity/deg2rad>=2?Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","middle","center","SPEED MAXED OUT!!!",originX,originY+squareScreenSize/10+squareScreenSize/40):Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","middle","center","PRESS A : "+Math.floor(savedData.playerAngularSpeed)+"/"+playerAngularSpeedUpgradeCost+" "+(player.angularVelocity/deg2rad+.1)+"x SPEED",originX,originY+squareScreenSize/10+squareScreenSize/40),Hud.drawScore()}static drawGuideGrid(){for(var e=0;e<rings.length;e++)rings[e].draw();var a=window.innerWidth+window.innerHeight;for(e=0;e<=12;e++){var r=30*e*deg2rad;ctx.beginPath(),ctx.moveTo(originX+rings[0].radius*Math.cos(r),originY+rings[0].radius*Math.sin(r)),ctx.lineTo(originX+a*Math.cos(r),originY+a*Math.sin(r)),ctx.closePath(),ctx.stroke()}}static render(e){ctx.clearRect(0,0,canvas.width,canvas.height),Render.drawStars(),player.draw();for(var a=0;a<arcs.length;a++)arcs[a].draw();Hud.drawScore(),Hud.drawWave(),Hud.drawShields()}}class Gamepads{static gamepadHandler(e,a){var r=e.gamepad;a?gamepads[r.index]=r:delete gamepads[r.index]}static checkForGamepad(){var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];return e&&e[0]}static buttonPressed(e){return"object"==typeof e?e.pressed:1==e}}window.addEventListener("gamepadconnected",function(e){Gamepads.gamepadHandler(e,!0)},!1),window.addEventListener("gamepaddisconnected",function(e){Gamepads.gamepadHandler(e,!1)},!1);var gamepads={};class Arc{constructor(e,a,r,t,i){this.radius=e,this.color=a,this.alpha=1,this.startAngle=r,this.stopAngle=t,this.angularVelocity=i,this.velocity=10,this.path=new Path2D,this.scored=!1}update(){this.radius+=this.velocity*(this.radius+1)/squareScreenSize,this.startAngle+=this.angularVelocity,this.stopAngle+=this.angularVelocity,!this.scored&&this.radius>player.radius&&(this.scored=!0,arcSurvivedForScore+=1,pointRate+=1.5)}draw(){this.path=Render.drawArcFromCenter(canvas.width/2,canvas.height/2,this.startAngle,this.stopAngle,.1*this.radius,this.radius,"rgb("+this.color+","+this.alpha+")")}}class ArcFactory{static random(){var e=(Math.random()<.5?-1:1)*ArcFactory.previousStartAngle+Math.random()*ArcFactory.clusterDifficulty+ArcFactory.minimumShift,a=e-(Math.random()*ArcFactory.clusterDifficulty+ArcFactory.minimumShift);arcs.push(new Arc(0,"220, 50, 47",e,a,(Math.random()<.5?-1:1)*ArcFactory.speedDifficulty*deg2rad)),ArcFactory.previousStartAngle=e,ArcFactory.previousStopAngle=a}static arcGeneration(){ArcFactory.framesSinceArc+=1,ArcFactory.framesSinceArc>ArcFactory.arcInterval&&(ArcFactory.framesSinceArc=0,arcsSurvived+=1,arcsSurvived%100==0&&(ArcFactory.speedDifficulty+=.1),ArcFactory.random())}}ArcFactory.arcInterval=30,ArcFactory.framesSinceArc=0,ArcFactory.minimumShift=60*deg2rad,ArcFactory.clusterDifficulty=60*deg2rad,ArcFactory.previousStartAngle=Math.random()*Math.PI*2,ArcFactory.previousStopAngle=ArcFactory.previousStartAngle-ArcFactory.clusterDifficulty,ArcFactory.speedDifficulty=.1;class Circle{constructor(e,a,r,t){this.radius=e,this.color=a,this.x=r,this.y=t,this.speedMultiplier=6,this.angle=-90*deg2rad}draw(){Render.drawCircle(this.x,this.y,this.radius,this.color)}}class Player{constructor(){this.alpha=1,this.alphaDown=!1,this.invincibilityTime=.05,this.color="rgb(38,139,210,"+this.alpha+")",this.radius=bigCircleRadius,this.angularWidth=6*deg2rad,this.startAngle=90*deg2rad+this.angularWidth/2,this.stopAngle=this.startAngle-this.angularWidth,this.angularVelocity=1*deg2rad,this.shields=maxShields,this.path=new Path2D}update(){if(1==this.alpha)for(var e=0;e<arcs.length;e++)GameState.isPlayerTouchingArc(this,arcs[e])&&(this.shields<=0?(arcadeAudio.play("death"),gameOver=!0):(arcadeAudio.play("shield"),this.shields-=1,this.alphaDown=!0,this.alpha-=this.invincibilityTime));else this.alphaDown&&(this.alpha<=0&&(this.alphaDown=!1,this.alpha=0),this.alpha-=this.invincibilityTime),this.alphaDown||(this.alpha+=this.invincibilityTime,this.alpha>=1&&(this.alpha=1)),this.color="rgb(38,139,210,"+this.alpha+")"}draw(){this.path=Render.drawArcFromCenter(originX,originY,this.startAngle,this.stopAngle,.1*this.radius,this.radius,this.color)}move(e){var a=this.startAngle-e,r=Math.min(this.angularVelocity,Math.abs(a));a>0?a>Math.PI?this.startAngle+=r:this.startAngle-=r:a<0&&(a<-Math.PI?this.startAngle-=r:this.startAngle+=r),this.startAngle<-Math.PI?this.startAngle+=2*Math.PI:this.startAngle>Math.PI&&(this.startAngle-=2*Math.PI),this.stopAngle=this.startAngle-this.angularWidth}}class Hud{static drawText(e,a,r,t,i,s,n){ctx.font=e,ctx.fillStyle=a,ctx.textBaseline=r,ctx.textAlign=t,ctx.fillText(i,s,n)}static updateScore(){score+=pointRate}static drawScore(){var e=canvas.width>squareScreenSize?(canvas.width-squareScreenSize)/2:0;Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","top","left","SCORE "+Math.floor(score),e,0);var a=canvas.width>squareScreenSize?canvas.width-(canvas.width-squareScreenSize)/2:canvas.width;Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","top","right","HIGH SCORE "+Math.floor(savedData.highScore),a,0)}static drawWave(){Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","top","left","WAVE "+arcSurvivedForScore,(canvas.width-squareScreenSize)/2,squareScreenSize/40)}static drawFPS(e){var a=Math.floor(1/(e/1e3));Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","top","left","FPS "+a,(canvas.width-squareScreenSize)/2,squareScreenSize/40*4)}static drawPause(){Hud.drawText("bold "+squareScreenSize/10+"px BumpItUp","#b58900","middle","center","PAUSE",originX,originY)}static drawShields(){ctx.fillStyle="rgb(38,139,210)";var e=squareScreenSize/40;ctx.fillRect((canvas.width-squareScreenSize)/2,squareScreenSize/40*2,e,e),Hud.drawText("bold "+squareScreenSize/40+"px Arial","#b58900","top","left",player.shields,(canvas.width-squareScreenSize)/2+1.1*e,squareScreenSize/40*2)}}function SfxrParams(){this.setSettings=function(e){for(var a=0;a<24;a++)this[String.fromCharCode(97+a)]=e[a]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(r<.18){var t=.18/r;this.b*=t,this.c*=t,this.e*=t}}}function SfxrSynth(){var e,a,r,t,i,s,n,d,c,o,l,h;this._params=new SfxrParams,this.reset=function(){var e=this._params;t=100/(e.f*e.f+.001),i=100/(e.g*e.g+.001),s=1-e.h*e.h*e.h*.01,n=-e.i*e.i*e.i*1e-6,e.a||(l=.5-e.n/2,h=5e-5*-e.o),d=1+e.l*e.l*(e.l>0?-.9:10),c=0,o=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.totalReset=function(){this.reset();var t=this._params;return e=t.b*t.b*1e5,a=t.c*t.c*1e5,r=t.e*t.e*1e5+12,3*((e+a+r)/3|0)},this.synthArc=function(u,S){var g=this._params,p=1!=g.s||g.v,m=g.v*g.v*.1,v=1+3e-4*g.w,A=g.s*g.s*g.s*.1,w=1+1e-4*g.t,y=1!=g.s,f=g.x*g.x,x=g.g,b=g.q||g.r,G=g.r*g.r*g.r*.2,P=g.q*g.q*(g.q<0?-1020:1020),T=g.p?32+((1-g.p)*(1-g.p)*2e4|0):0,z=g.d,k=g.j/2,q=g.k*g.k*.01,M=g.a,D=e,R=1/e,H=1/a,F=1/r,E=5/(1+g.u*g.u*20)*(.01+A);E>.8&&(E=.8),E=1-E;for(var C,U,B,Y,X,I,L=!1,O=0,W=0,V=0,_=0,j=0,N=0,Z=0,K=0,J=0,Q=0,$=new Array(1024),ee=new Array(32),ae=$.length;ae--;)$[ae]=0;for(ae=ee.length;ae--;)ee[ae]=2*Math.random()-1;for(ae=0;ae<S;ae++){if(L)return ae;if(T&&++J>=T&&(J=0,this.reset()),o&&++c>=o&&(o=0,t*=d),(t*=s+=n)>i&&(t=i,x>0&&(L=!0)),U=t,k>0&&(Q+=q,U*=1+Math.sin(Q)*k),(U|=0)<8&&(U=8),M||((l+=h)<0?l=0:l>.5&&(l=.5)),++W>D)switch(W=0,++O){case 1:D=a;break;case 2:D=r}switch(O){case 0:V=W*R;break;case 1:V=1+2*(1-W*H)*z;break;case 2:V=1-W*F;break;case 3:V=0,L=!0}b&&((B=0|(P+=G))<0?B=-B:B>1023&&(B=1023)),p&&v&&((m*=v)<1e-5?m=1e-5:m>.1&&(m=.1)),I=0;for(var re=8;re--;){if(++Z>=U&&(Z%=U,3==M))for(var te=ee.length;te--;)ee[te]=2*Math.random()-1;switch(M){case 0:X=Z/U<l?.5:-.5;break;case 1:X=1-Z/U*2;break;case 2:X=.225*(((X=1.27323954*(Y=6.28318531*((Y=Z/U)>.5?Y-1:Y))+.405284735*Y*Y*(Y<0?1:-1))<0?-1:1)*X*X-X)+X;break;case 3:X=ee[Math.abs(32*Z/U|0)]}p&&(C=N,(A*=w)<0?A=0:A>.1&&(A=.1),y?(j+=(X-N)*A,j*=E):(N=X,j=0),_+=(N+=j)-C,X=_*=1-m),b&&($[K%1024]=X,X+=$[(K-B+1024)%1024],K++),I+=X}I*=.125*V*f,u[ae]=I>=1?32767:I<=-1?-32768:32767*I|0}return S}}var synth=new SfxrSynth;function ArcadeAudio(){this.sounds={}}window.jsfxr=function(e){synth._params.setSettings(e);var a=synth.totalReset(),r=new Uint8Array(4*((a+1)/2|0)+44),t=2*synth.synthArc(new Uint16Array(r.buffer,44),a),i=new Uint32Array(r.buffer,0,44);i[0]=1179011410,i[1]=t+36,i[2]=1163280727,i[3]=544501094,i[4]=16,i[5]=65537,i[6]=44100,i[7]=88200,i[8]=1048578,i[9]=1635017060,i[10]=t,t+=44;for(var s=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="data:audio/wav;base64,";s<t;s+=3){var c=r[s]<<16|r[s+1]<<8|r[s+2];d+=n[c>>18]+n[c>>12&63]+n[c>>6&63]+n[63&c]}return d},ArcadeAudio.prototype.add=function(e,a,r){this.sounds[e]=[],r.forEach(function(r,t){this.sounds[e].push({tick:0,count:a,pool:[]});for(var i=0;i<a;i++){var s=new Audio;s.src=jsfxr(r),this.sounds[e][t].pool.push(s)}},this)},ArcadeAudio.prototype.play=function(e){var a=this.sounds[e],r=a.length>1?a[Math.floor(Math.random()*a.length)]:a[0];r.pool[r.tick].play(),r.tick<r.count-1?r.tick++:r.tick=0};var showTitleScreen=!0,fontLoaded=!1,pauseButtonHeld=!1,backButtonHeld=!1,maxShields=0,shieldUpgradeCost=1e4,savedData=[],arcadeAudio=new ArcadeAudio,audioLoaded=!1;function loadAllSavedData(){loadSavedData("shieldProgress"),savedData.shieldProgress&&GameState.buyShieldProgress(savedData.shieldProgress),loadSavedData("highScore"),loadSavedData("playerAngularSpeed")}function loadSavedData(e){localStorage.getItem("sis_"+e)&&(savedData[e]=parseFloat(localStorage.getItem("sis_"+e))),savedData[e]||(savedData[e]=0)}function createStars(){stars=[];for(var e=0;e<Star.num_stars;e++)stars.push(new Star)}function loadArcadeAudio(){arcadeAudio.add("shield",6,[[0,,.1391,,.4246,.2962,,.1894,,.6843,.4998,,,.5776,,,,,1,,,,,.5],[0,,.1391,,.4246,.3287,,.2121,,.6843,.4998,,,.5284,,.0276,,,1,,.0338,,,.5],[0,,.1239,,.45,.3337,,.2601,,.6647,.4563,,,.5284,,.0109,,-.0277,.97,,,,.0327,.5],[0,,.1239,,.45,.3825,,.2394,,.6647,.4983,-.0222,,.5284,,.035,.0236,-.0277,.97,-.0408,,,.0327,.5],[0,,.1239,,.45,.3825,.0446,.2394,,.6872,.4983,-.0222,,.5698,-.0235,.035,.0236,-.0277,.97,-.0408,,,.079,.5],[0,,.1239,.0474,.4273,.3736,.0576,.2394,.0205,.6872,.4983,-.0222,.0166,.5448,.0151,.0747,-.0096,-.0105,.97,-.0408,,.0199,.079,.5]]),arcadeAudio.add("kaching",6,[[0,,.01,.553,.4411,.49,,,,,,.4888,.5724,,,,,,1,,,,,.5],[0,,.01,.553,.4737,.5071,,,,.0354,,.521,.5832,.0301,.0344,,,,1,,.0469,,.0169,.5],[0,,.0706,.5879,.3273,.4824,,,,,,.5697,.6166,,,,,,1,,,,,.5],[0,,.0224,.5969,.4737,.5215,,,,.0354,,.5276,.6124,.0469,.0344,,.0402,-.0232,1,.0351,.0469,.0204,.0191,.5],[0,,.0706,.5768,.3273,.4553,.0437,,,,.0449,.5498,.6166,,-.0385,,,.0044,.9627,,,,-.0252,.5],[0,,.0429,.5376,.2421,.4712,.0601,,.0082,,.0661,.5498,.6373,,.0049,.0376,-.0783,.0139,.9265,-.0445,.0019,,-.0442,.5]]),arcadeAudio.add("death",6,[[3,,.49,.2396,.3102,.2594,,-.206,,,,.4424,.775,,,,,,1,,,,,.5],[3,,.2796,.7691,.4747,.2201,,,,,,-.5287,.7516,,,,,,1,,,,,.5],[3,,.3432,.2947,.2427,.1607,,-.2947,,,,,,,,,,,1,,,,,.5],[3,,.3655,.4749,.4298,.1258,,,,,,.3784,.6993,,,,,,1,,,,,.5],[3,,.3673,.5131,.392,.1482,,,.0175,,.0152,.415,.688,,,,,-.029,1,,,,.0173,.5],[3,,.2051,.6893,.4565,.0543,,.0069,,,,,,,,,,,1,,,,,.5]]),audioLoaded=!0}function createGuideRings(){rings=[];for(var e=5;e>=0;e--)rings.push(new Circle(1*bigCircleRadius/Math.pow(2,e),"",originX,originY))}function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,originX=canvas.width/2,originY=canvas.height/2,squareScreenSize=Math.min(window.innerWidth,window.innerHeight),edgeMargin=.05*squareScreenSize,bigCircleRadius=squareScreenSize/2-edgeMargin,createGuideRings()}function init(){lastScreenTime=Date.now(),currentScreenTime=Date.now(),refreshTime=currentScreenTime-lastScreenTime,squareScreenSize=Math.min(window.innerWidth,window.innerHeight),edgeMargin=.05*squareScreenSize,bigCircleRadius=squareScreenSize/2-edgeMargin,player=new Player,arcs=[],canvas=document.getElementById("canvas"),canvas.style.fontFamily="BumpItUp",canvas.width=window.innerWidth,canvas.height=window.innerHeight,ctx=canvas.getContext("2d"),originX=canvas.width/2,originY=canvas.height/2,gameOver=!1,gamePaused=!1,restart=!1,createStars(),createGuideRings(),score=0,pointRate=1,arcSurvivedForScore=0,playerAngularSpeedUpgradeCost=1e4,purchaseScreen=!1,arcsSurvived=0}function mod(e,a){return(e%a+a)%a}function isBetween(e,a,r){return a*=rad2deg,r*=rad2deg,e=mod(e*=rad2deg,360),a=mod(a,360),(r=(r=mod(r,360))-e<0?r-e+360:r-e)<(a=a-e<0?a-e+360:a-e)}function animationLoop(){currentScreenTime=Date.now(),refreshTime=currentScreenTime-lastScreenTime,lastScreenTime=currentScreenTime,showTitleScreen?(Render.renderLoadScreen(),fontLoaded&&(audioLoaded?(Render.renderTitleScreen(),GameState.updateStars(),GameState.checkForRestart(),restart&&(showTitleScreen=!1,init(),savedData.playerAngularSpeed&&GameState.buyPlayerAngularSpeed(savedData.playerAngularSpeed))):loadArcadeAudio())):gamePaused?(Hud.drawPause(),GameState.checkForUnpause()):gameOver?(GameState.checkForPurchase(),purchaseScreen&&(GameState.handlePurchases(),Render.renderPurchaseScreen()),GameState.checkForRestart(),restart&&(init(),savedData.playerAngularSpeed&&GameState.buyPlayerAngularSpeed(savedData.playerAngularSpeed))):(GameState.update(),Render.render(refreshTime),gameOver&&(score>savedData.highScore&&(savedData.highScore=score,localStorage.setItem("sis_highScore",savedData.highScore)),Render.endGame())),requestAnimationFrame(animationLoop)}document.fonts.onloadingdone=function(e){fontLoaded=!0},loadAllSavedData(),window.addEventListener("resize",function(e){resizeCanvas()},!1),init(),GameState.buyPlayerAngularSpeed(savedData.playerAngularSpeed),animationLoop();