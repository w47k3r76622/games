const t=Math.PI,e=2*t,n=t/180,s=180/t,i=Math.abs,o=Math.cos,r=Math.sin,c=Math.floor;function h(t){let e=4294967295;const n=()=>(t=(1664525*t+1013904223)%e)/e;return n.elem=t=>t[c(n()*t.length)],n}const a=h(1);function u(t,e,n){return Math.min(Math.max(t,e),n)}const l=function(){return new Float32Array(3)},f=function(t,e,n){const s=new Float32Array(3);return s[0]=t,s[1]=e,s[2]=n,s};function d(t,e,n){return f(t[0]+n*e[0],t[1]+n*e[1],t[2]+n*e[2])}f.set=function(t,e,n,s){return t[0]=e,t[1]=n,t[2]=s,this},f.clone=function(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},f.copy=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]},f.fromArray=(t,e)=>f(t[e],t[e+1],t[e+2]),f.push=function(t,e){t.push(e[0],e[1],e[2])},f.len=function(t){return Math.hypot(t[0],t[1],t[2])},f.dist=function(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},f.distSq=function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])},f.n=function(t){const e=Math.hypot(t[0],t[1],t[2]);if(0===e)return t;const n=1/e;return t[0]=t[0]*n,t[1]=t[1]*n,t[2]=t[2]*n,t},f.isub=(t,e)=>d(t,e,-1),f.iadd=(t,e)=>d(t,e,1),f.add=function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],this},f.mul=function(t,e){return t[0]*=e[0],t[1]*=e[1],t[2]*=e[2],this},f.scale=function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,this},f.scad=function(t,e,n){return t[0]+=e[0]*n,t[1]+=e[1]*n,t[2]+=e[2]*n,this},f.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},f.icross=function(t,e){return f(t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0])},f.rotX=function(t,e){t[0];const n=t[1],s=t[2];t[1]=n*o(e)-s*r(e),t[2]=n*r(e)+s*o(e)},f.rotY=function(t,e){const n=t[0],s=(t[1],t[2]);t[0]=s*r(e)+n*o(e),t[2]=s*o(e)-n*r(e)},f.rotZ=function(t,e){const n=t[0],s=t[1];t[2];t[1]=n*o(e)-s*r(e),t[2]=n*r(e)+s*o(e)},f.mulM4=function(t,e){const n=t[0],s=t[1],i=t[2];t[0]=e[0]*n+e[4]*s+e[8]*i+e[12],t[1]=e[1]*n+e[5]*s+e[9]*i+e[13],t[2]=e[2]*n+e[6]*s+e[10]*i+e[14]},f.equals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]};const p=function(t,e,n,s){const i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=s,i};function m(t){return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function w(){return new Float32Array(16)}p.clone=function(t){const e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e};const v=[];for(let t=0;t<8;t++)v[t]=m(w());const C=v[0],g=v[1],y=v[2],b=v[3],x=v[4],_=v[5],D={identity:function(){const t=w();return m(t),t},clone:function(t){const e=w();for(let n=0;n<16;n++)e[n]=t[n];return e},copy:function(t,e){for(let n=0;n<16;n++)t[n]=e[n]},from4V3:function(t,e,n,s){const i=w();return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[4]=e[0],i[5]=e[1],i[6]=e[2],i[8]=n[0],i[9]=n[1],i[10]=n[2],i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i},projection:function(t,e,s,i){const o=w(),r=Math.tan(t*n*.5);return o[0]=.5/r,o[5]=.5*e/r,o[10]=-(i+s)/(i-s),o[11]=-2*i*s/(i-s),o[14]=-1,o},lookAt:function(t,e,n){const s=f.n(f.isub(t,e)),i=f.n(f.icross(n,s)),o=f.n(f.icross(s,i));return this.from4V3(i,o,s,t)},rotX:function(t,e){return y[0]=o(e),y[2]=-r(e),y[8]=r(e),y[10]=o(e),this.mul(t,y),this},rotY:function(t,e){return b[5]=o(e),b[6]=r(e),b[9]=-r(e),b[10]=o(e),this.mul(t,b),this},rotZ:function(t,e){return x[0]=o(e),x[1]=r(e),x[4]=-r(e),x[5]=o(e),this.mul(t,x),this},rot:function(t,e){const n=o(e[0]),s=r(e[0]),i=o(e[1]),c=r(e[1]),h=o(e[2]),a=r(e[2]);return _[0]=i*h,_[1]=s*c*h+n*a,_[2]=-n*c*h+s*a,_[4]=-i*a,_[5]=-s*c*a+n*h,_[6]=n*c*a+s*h,_[8]=c,_[9]=-s*i,_[10]=n*i,this.mul(t,_),this},translate:function(t,e){return g[12]=e[0],g[13]=e[1],g[14]=e[2],this.mul(t,g),this},scale:function(t,e){return C[0]=e[0],C[5]=e[1],C[10]=e[2],this.mul(t,C),this},mul:function(t,e){const n=t[0],s=t[1],i=t[2],o=t[3],r=t[4],c=t[5],h=t[6],a=t[7],u=t[8],l=t[9],f=t[10],d=t[11],p=t[12],m=t[13],w=t[14],v=t[15];for(let C=0;C<4;C++){const g=4*C,y=e[g],b=e[g+1],x=e[g+2],_=e[g+3];t[g]=y*n+b*r+x*u+_*p,t[g+1]=y*s+b*c+x*l+_*m,t[g+2]=y*i+b*h+x*f+_*w,t[g+3]=y*o+b*a+x*d+_*v}return D},invert:function(t){const e=this.clone(t),n=e[10]*e[15]-e[11]*e[14],s=e[9]*e[15]-e[11]*e[13],i=e[9]*e[14]-e[10]*e[13],o=e[8]*e[15]-e[11]*e[12],r=e[8]*e[14]-e[10]*e[12],c=e[8]*e[13]-e[9]*e[12],h=e[6]*e[15]-e[7]*e[14],a=e[5]*e[15]-e[7]*e[13],u=e[5]*e[14]-e[6]*e[13],l=e[6]*e[11]-e[7]*e[10],f=e[5]*e[11]-e[7]*e[9],d=e[5]*e[10]-e[6]*e[9],p=e[4]*e[15]-e[7]*e[12],m=e[4]*e[14]-e[6]*e[12],w=e[4]*e[11]-e[7]*e[8],v=e[4]*e[10]-e[6]*e[8],C=e[4]*e[13]-e[5]*e[12],g=e[4]*e[9]-e[5]*e[8],y=1/(e[0]*(e[5]*n-e[6]*s+e[7]*i)-e[1]*(e[4]*n-e[6]*o+e[7]*r)+e[2]*(e[4]*s-e[5]*o+e[7]*c)-e[3]*(e[4]*i-e[5]*r+e[6]*c));t[0]=y*(e[5]*n-e[6]*s+e[7]*i),t[1]=y*-(e[1]*n-e[2]*s+e[3]*i),t[2]=y*(e[1]*h-e[2]*a+e[3]*u),t[3]=y*-(e[1]*l-e[2]*f+e[3]*d),t[4]=y*-(e[4]*n-e[6]*o+e[7]*r),t[5]=y*(e[0]*n-e[2]*o+e[3]*r),t[6]=y*-(e[0]*h-e[2]*p+e[3]*m),t[7]=y*(e[0]*l-e[2]*w+e[3]*v),t[8]=y*(e[4]*s-e[5]*o+e[7]*c),t[9]=y*-(e[0]*s-e[1]*o+e[3]*c),t[10]=y*(e[0]*a-e[1]*p+e[3]*C),t[11]=y*-(e[0]*f-e[1]*w+e[3]*g),t[12]=y*-(e[4]*i-e[5]*r+e[6]*c),t[13]=y*(e[0]*i-e[1]*r+e[2]*c),t[14]=y*-(e[0]*u-e[1]*m+e[2]*C),t[15]=y*(e[0]*d-e[1]*v+e[2]*g)},transpose(t,e){for(let n=0;n<4;n++)for(let s=0;s<4;s++)t[4*n+s]=e[4*s+n]},equals(t,e){for(let n=0;n<16;n++)if(i(t[n]-e[n])>.001)return!1;return!0},extractV3:(t,e)=>f(t[e*=4],t[e+1],t[e+2])};function E(t,e,n){for(let n in e)n.startsWith("__")||(t[n]=e[n]);return n&&E(t,n),t}function A(t,e){return(t||[]).concat(e)}function k(t,e){setTimeout(t,1e3*e||0)}function T(){const t=window.innerWidth,e=window.innerHeight;K.width=t,K.height=e,K.style.width=t+"px",K.style.height=e+"px",Y.viewport(0,0,K.width,K.height),W.width=t,W.height=e,W.style.width=t+"px",W.style.height=e+"px",Z()}function M(t){let e=t.charCodeAt(0)-48;return e>9?e-7:e}const F=255;console.error,console.log;let z=0;const S=[];let B=D.identity(),R=D.identity(),$=D.identity(),P=D.identity();const O={tex:{},mpush:()=>{S[z]?D.copy(S[z++],B):S[z++]=D.clone(B)},mpop:()=>{D.copy(B,S[--z])}};function G(t){t.dead=!0}class I{constructor(t){const e=this;e._ls=[],t&&t._traits&&t._traits.forEach((t=>{E(e,t),t.__onTrait&&t.__onTrait.call(e)})),t&&t._pods&&t._pods.forEach((t=>e.attach(t))),E(e,t)}evo(t){const e=this._ls;let n;for(let s=0;s<e.length;s++){const i=e[s];i.dead?n=i:i.zombie||i.evo(t)}n&&(e.splice(e.indexOf(n),1),n.onKill&&n.onKill(),n.name&&this[n.name]===n&&delete this[n.name])}draw(){for(let t=0;t<this._ls.length;t++){const e=this._ls[t];e.ghost||e.draw()}}attach(t){return this._ls.push(t),t.name&&(this[t.name]=t),t.__=this,t.evo||(t.zombie=!0),t.draw||(t.ghost=!0),t.init&&t.init(),t}detach(t){const e=this._ls.indexOf(t);e<0||(this._ls.splice(e,1),t.name&&delete this[t.name])}apply(t,e){for(let n=0;n<this._ls.length;n++){const s=this._ls[n];t(s,e),s.apply&&s.apply(t,e)}return e}}const U=new I,H={name:"mover"};class L{constructor(t){E(this,H,t),this.pushers=new Float32Array(mt+1)}capture(){U.broker=this}init(){this.capture()}push(t,e,n){const s=this.__,i=n*(s.grounded?320:30);switch(t){case ft:s.grounded&&s.jump(7);break;case it:f.scad(s.mt,s.dir,-i);break;case ot:f.scad(s.mt,f(-s.dir[2],0,s.dir[0]),i);break;case rt:f.scad(s.mt,s.dir,i);break;case ct:f.scad(s.mt,f(s.dir[2],0,-s.dir[0]),i);break;case at:s.yaw(-2.5*n);break;case lt:s.yaw(2.5*n);break;case ht:s.tilt(-1.75*n);break;case ut:s.tilt(1.75*n);break;case dt:s.yaw(.14*e*n);break;case pt:s.tilt(-.14*e*n)}}evo(t){for(let e=0;e<this.pushers.length;e++){const n=this.pushers[e];n&&(this.push(e,n,t),e>20&&(this.pushers[e]=0))}}activate(t){this.pushers[t]=1}stop(t){this.pushers[t]=0}onMouseDown(t){0==t.button&&(Ct.mouseLock||function(){const t=1e3-Math.min(i((Ct.prt||0)-Date.now()),1e3);setTimeout((()=>{K.requestPointerLock()}),2.5*t)}())}onMouseUp(t){}onMouseMove(t){if(!Ct.mouseLock)return;const e=t.movementX,n=t.movementY;e&&(t.shiftKey?this.pushers[mt]+=e:this.pushers[dt]+=e),n&&(this.pushers[pt]+=n)}}class V{constructor(t){E(this,{name:"solid",type:wt,kind:vt,pos:f(0,0,0),hsize:f(1,1,1)},t)}fixBounds(){this.wpos=f.clone(this.pos),this.__&&f.add(this.wpos,this.__.pos);const t=[],e=[],n=this.wpos,s=this.hsize;for(let i=0;i<3;i++){const o=n[i]-s[i],r=n[i]+s[i];t[i]=o<r?o:r,e[i]=o>r?o:r}this.min=t,this.max=e}touch(t){if(this.fixBounds(),t.type===wt)return t.fixBounds(),n=t,(e=this).min[0]<n.max[0]&&e.max[0]>n.min[0]&&e.min[1]<n.max[1]&&e.max[1]>n.min[1]&&e.min[2]<n.max[2]&&e.max[2]>n.min[2];var e,n}deltaY(t){return this.max[1]-t.min[1]}}const J={__onTrait:function(){E(this,{pos:l(),dir:f(0,0,1),up:f(0,1,0),left:f(1,0,0)})},moveX:function(t){const e=f.clone(this.left);f.scale(e,t),f.add(this.pos,e)},moveY:function(t){const e=f.clone(this.up);f.scale(e,t),f.add(this.pos,e)},moveZ:function(t){const e=f.clone(this.dir);f.scale(e,t),f.add(this.pos,e)},yaw:function(t){const e=D.from4V3(this.left,this.up,this.dir,f(0,0,0));D.rotX(e,-t),this.left=D.extractV3(e,0),this.dir=D.extractV3(e,2),this.up=f.n(f.icross(this.dir,this.left))},pitch:function(t){const e=D.from4V3(this.left,this.up,this.dir,f(0,0,0));D.rotY(e,t),this.up=D.extractV3(e,1),this.dir=D.extractV3(e,2),this.left=f.n(f.icross(this.up,this.dir))},roll:function(t){const e=D.from4V3(this.left,this.up,this.dir,f(0,0,0));D.rotZ(e,t),this.left=D.extractV3(e,0),this.up=D.extractV3(e,1),this.dir=f.n(f.icross(this.left,this.up))}};let Y,j,K,W,q;function N(t){U.tw.evo(t),Ct.paused||U.evo(t)}function X(){if(!U.cam)return;Y.clearColor(.11,.02,.13,1),Y.clear(Y.COLOR_BUFFER_BIT|Y.DEPTH_BUFFER_BIT),Y.enable(Y.DEPTH_TEST),Y.depthFunc(Y.LEQUAL),Y.clearDepth(1),Ct.backfaces?Y.disable(Y.CULL_FACE):(Y.enable(Y.CULL_FACE),Y.cullFace(Y.BACK)),D.copy(B,P),Y.uniformMatrix4fv(Bt.p,!1,U.cam.projectionMatrix()),Y.uniformMatrix4fv(Bt.v,!1,U.cam.viewMatrix()),Y.uniform3fv(Bt.ucp,U.cam.pos);const t=f.clone(Ct.dv);f.scale(t,-1),f.n(t),Y.uniform3fv(Bt.udv,t),Y.uniform4fv(Bt.udc,Ct.dc),Y.uniform3fv(Bt.upl,Ct.pl),Y.uniform4fv(Bt.upc,Ct.pc),Y.uniform4fv(Bt.uF,function(t){const e=t.toUpperCase().split("").map((t=>M(t)));return p((16*e[0]+e[1])/F,(16*e[2]+e[3])/F,(16*e[4]+e[5])/F,(16*e[6]+e[7])/F)}("1d0722FF")),U.draw()}function Z(t){St.clearRect(0,0,W.width,W.height),X(),U.fader.redraw()}function Q(){const t=Date.now(),e=(t-q)/1e3;let n=e;for(n>.3&&(n=.3),Ct.time+=n;n>.2;)N(.2),n-=.2;N(n),Z(),q=t,requestAnimationFrame(Q)}class tt extends I{constructor(t){t._traits=A(t._traits,[J]),super(E({vfov:30,zNear:1,zFar:512},t))}projectionMatrix(){const t=K.width/K.height;return this.hfov=2*Math.atan(t*Math.tan(this.vfov*n/2))*s,D.projection(this.vfov,K.width/K.height,this.zNear,this.zFar)}viewMatrix(){let t;return this.lookAt?(t=D.lookAt(this.pos,this.lookAt,this.up),this.left=D.extractV3(t,0),this.up=D.extractV3(t,1),this.dir=D.extractV3(t,2)):(f.n(this.up),f.n(this.dir),this.left=f.n(f.icross(this.up,this.dir)),t=D.from4V3(this.left,this.up,this.dir,this.pos)),D.invert(t),t}}class et extends I{constructor(t){super(E({pos:l(),rot:l(),scale:f(1,1,1)},t))}draw(){O.mpush(),D.translate(B,this.pos).rot(B,this.rot).scale(B,this.scale),super.draw(),O.mpop()}}class nt{constructor(t){E(this,{name:"surface",rO:p(1,0,0,0),buf:{}},t),!t.m&&t.geo.m&&(this.m=t.geo.m);let e=t=>{if(t){const e=Y.createBuffer();return Y.bindBuffer(Y.ARRAY_BUFFER,e),Y.bufferData(Y.ARRAY_BUFFER,t,Y.STATIC_DRAW),e}};for(let t of this.geo.B)this.buf[t]=e(this.geo[t])}bindAttribute(t,e,n){if(!t)return;const s=Y.getAttribLocation(j,e);Y.enableVertexAttribArray(s),Y.bindBuffer(Y.ARRAY_BUFFER,t),Y.vertexAttribPointer(s,n||3,Y.FLOAT,!1,0,0)}draw(){Y.uniformMatrix4fv(Bt.m,!1,B),D.copy(R,B),D.invert(R),D.transpose($,R),Y.uniformMatrix4fv(Bt.n,!1,$),this.tex&&(this.rO[2]=1),Y.uniform4fv(Bt.uO,this.rO),Y.uniform4fv(Bt.ua,this.m.a),Y.uniform4fv(Bt.ud,this.m.d),Y.uniform4fv(Bt.us,this.m.s),Y.uniform1f(Bt.un,this.m.n),this.tex&&(Y.activeTexture(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,this.tex),Y.uniform1i(Bt.uT,0)),this.bindAttribute(this.buf.v,"vp"),this.bindAttribute(this.buf.n,"vn"),this.bindAttribute(this.buf.c,"vc"),this.bindAttribute(this.buf.u,"uv",2),Y.drawArrays(Y.TRIANGLES,0,this.geo.vc)}}const st={},it=1,ot=2,rt=3,ct=4,ht=5,at=6,ut=7,lt=8,ft=9,dt=21,pt=22,mt=23,wt=1,vt=1,Ct={key:"liminal-gap-runner/score",fnt:"28px monospace",cl:"#e06a10",time:0,vol:.5,bind:["","KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","Space"],dv:f(1,-.5,.7),dc:p(1,1,1,1),pl:[],pc:[],backfaces:0};for(let t=0;t<48;t++)Ct.pl[t]=Ct.pc[t]=0;for(let t=49;t<64;t++)Ct.pc[0]=0;const gt=(()=>{let t,n,s,i,o;return E((t=>{s&&(o=Ct.vol*_t[1][t-2],s(..._t[t]))}),{touch:()=>{t&&"suspended"!==t.state||(t=new AudioContext,n=t.destination,i=t.sampleRate),s=(e=1,s=.05,i=220,r=0,c=0,h=.1,a=0,u=1,l=0,f=0,d=0,p=0,m=0,w=0,v=0,C=0,g=0,y=1,b=0,x=0,_=0)=>{let D=Math,E=2*D.PI,A=44100,k=l*=500*E/A/A,T=i*=(1-s+2*s*D.random(s=[]))*E/A,M=0,F=0,z=0,S=1,B=0,R=0,$=0,P=_<0?-1:1,O=E*P*_*2/A,G=D.cos(O),I=D.sin,U=I(O)/4,H=1+U,L=-2*G/H,V=(1-U)/H,J=(1+P*G)/2/H,Y=-(P+G)/H,j=J,K=0,W=0,q=0,N=0;for(f*=500*E/A**3,v*=E/A,d*=E/A,p*=A,m=A*m|0,e*=o,P=(r=A*r+9)+(b*=A)+(c*=A)+(h*=A)+(g*=A)|0;z<P;s[z++]=$*e)++R%(100*C|0)||($=a?1<a?2<a?3<a?I(M**3):D.max(D.min(D.tan(M),1),-1):1-(2*M/E%2+2)%2:1-4*D.abs(D.round(M/E)-M/E):I(M),$=(m?1-x+x*I(E*z/m):1)*($<0?-1:1)*D.abs($)**u*(z<r?z/r:z<r+b?1-(z-r)/b*(1-y):z<r+b+c?y:z<P-g?(P-z-g)/h*y:0),$=g?$/2+(g>z?0:(z<P-g?1:(P-z)/g)*s[z-g|0]/2/e):$,_&&($=N=j*K+Y*(K=W)+J*(W=$)-V*q-L*(q=N))),O=(i+=l+=f)*D.cos(v*F++),M+=O+O*w*I(z**5),S&&++S>p&&(i+=d,T+=d,S=0),!m||++B%m||(i=T,l=k,S=S||1);(e=t.createBuffer(1,P,A)).getChannelData(0).set(s),(i=t.createBufferSource()).buffer=e,i.connect(n),i.start()};for(let t=1;t<_t.length;t++)for(let e=0;e<_t[t].length;e++)0===_t[t][e]&&(_t[t][e]=void 0)},up:s=>{if(!t)return;let o,r,c,h=s*i,u=t.createBuffer(1,h,i),l=u.getChannelData(0),f=0,d=0;function p(t){return d--,d<0&&(d=2e3+4e3*a(),r=200+400*a(),c=200+400*a()),50*t%1<.5?r:c}for(;f<h;)o=f/i,l[f++]=Math.sign(Math.sin(e*p(o)*o));const m=t.createBufferSource(),w=t.createGain();m.buffer=u,w.gain.value=.03*Ct.vol,m.connect(w),w.connect(n),m.start(0)}})})(),yt={},bt=[],xt={},_t=[],Dt={},Et=(()=>{let n,s,i,h,a,u=D.identity(),l=13,d=[],m=[],w=[];function v(){return d.pop()}function C(){return d[d.length-1]}function g(){return a=v(),h=v(),i=v(),s=v(),p(s,i,h,a)}function y(t){for(let e=0;e<n.v.length;e++)n.v[e]=t(n.v[e],e)}function b(t){let e,s=n.v.length;for(let i=0;i<s;i+=3){const s=t(n.v[i],n.v[i+1],n.v[i+2]);i%9==3?e=s:(_(s),i%9==6&&e&&_(e))}}function x(t){for(let e=0;e<t.length;e+=3)_(f(t[e],t[e+1],t[e+2]))}function _(t){f.mulM4(t,u),n.v.push(t[0]),n.v.push(t[1]),n.v.push(t[2])}function E(t,e,s){const i=f(t,e,s);f.mulM4(i,u),n.v.push(i[0]),n.v.push(i[1]),n.v.push(i[2])}function A(){return h=v(),i=v(),s=v(),f(s,i,h)}const k=[()=>{n={v:[],n:[],c:[],u:[],B:["v","n","c","u"]}},()=>{m.push(D.clone(u))},()=>{u=m.pop()},()=>{w=n.v,n.v=[]},()=>{x(w)},()=>{d.push(t/2)},()=>{l=v()},()=>{u=D.identity()},()=>{D.scale(u,A())},()=>{D.translate(u,A())},()=>{D.rotX(u,v())},()=>{D.rotY(u,v())},()=>{D.rotZ(u,v())},()=>{b(((t,e,n)=>f(-t,e,n)))},()=>{b(((t,e,n)=>f(t,-e,n)))},()=>{b(((t,e,n)=>f(t,e,-n)))},()=>{s=v(),y((t=>t*s))},()=>{h=v(),i=v(),s=v(),y(((t,e)=>e%3==2?t*h:t)),y(((t,e)=>e%3==1?t*i:t)),y(((t,e)=>e%3==0?t*s:t))},()=>{for(let t=0;t<9;t+=3)h=v(),i=v(),s=v(),E(s,i,h)},()=>{for(let t=0;t<6;t+=2)i=v(),n.u.push(v()),n.u.push(i)},()=>{let t,e=0;"string"==typeof C()&&(t=v(),e=1),a={n:v(),s:g(),d:g(),a:g()},e?Dt[t]=a:n.m=a},()=>{const t=[],n=[];for(let n=0;n<l;n++){let s=n*e/l,i=o(s),c=r(s);t.push(i,1,c)}for(let e=0;e<l;e++){let s=3*e,i=(e+1)%l*3;n.push(t[i],0,t[i+2],0,0,0,t[s],0,t[s+2])}return x(n),this},()=>{n.bounds=A()},()=>{i=0,"string"==typeof C()&&(s=v(),i=1),a=[].concat(d),_t.push(a),i&&(xt[s]=a),d=[]},()=>{n.name=v()},()=>{n.v=new Float32Array(n.v),n.vc=n.v.length/3,n.u.length>0?n.u=new Float32Array(n.u):n.u=null,n.c.length>0?n.c=new Float32Array(n.c):n.c=null,0===n.n.length?n.n=new Float32Array(function(t){const e=[];for(let n=0;n<t.length;n+=9){let s=f.fromArray(t,n),i=f.fromArray(t,n+3),o=f.fromArray(t,n+6),r=f.isub(s,i),c=f.isub(s,o),h=f.n(f.icross(r,c));e.push(h[0],h[1],h[2]),e.push(h[0],h[1],h[2]),e.push(h[0],h[1],h[2])}return e}(n.v)):n.n=new Float32Array(n.n),bt.push(n),n.name&&(yt[n.name]=n),F.push(n)},()=>{n.w=new Float32Array(n.v),n.w.vc=n.v.length/3,delete n.v}];let T,M={},F=[];const z=31,S=z+1,B=z+2,R=z+3,$=z+4;function P(t){const e=t.length;let n,i,o,r=0;for(;r<e;)if(n=t[r++],T)n===B?T=null:(T.push(n),T.raw.push(t.raw[r-1]));else switch(n){case z:o=[],i=t[r++];for(let e=0;e<i;e++)o.push(t.raw[r++]);d.push(o.join(""));break;case S:T=[],T.raw=[],M.push(T);break;case R:s=v(),P(M[s]);break;default:if(n>=$+16){let e,s,i,o=n-$-16,h=c(o/4)+1,a=o%4,u=93**h,l=t[r++];for(s=0;s<l;s++){for(e=t[r++],i=1;i<h;i++)e+=93**i*t[r++];e>=c(u/2)&&(e-=u),d.push(e/10**a)}}else if(n>=$){let e=n-$,s=c(e/4)+1,i=e%4,o=93**s,h=t[r++];for(let e=1;e<s;e++)h+=93**e*t[r++];h>=c(o/2)&&(h-=o),d.push(h/10**i)}else k[n]()}return F}return function(t){return M=[],F=[],P(function(t){const e=t.map((t=>function(t){let e=t.charCodeAt(0);return e>96&&e--,e>92&&e--,e-32}(t)));return e.raw=t,e}(t.split("")))}})(),At=255,kt=[];for(let t=0;t<512;t++)kt[t]=c(256*a());function Tt(t){return 6*t*t*t*t*t-15*t*t*t*t+10*t*t*t}function Mt(t,e,n){return e+(n-e)*t}function Ft(t,e,n,s){const i=15&t,o=i<4?n:12===i||14===i?e:s;return(1&i?-(i<8?e:n):n)+(2&i?-o:o)}function zt(t,e,n){return(function(t,e,n){const s=c(t)&At,i=c(e)&At,o=c(n)&At,r=t%1,h=e%1,a=n%1,u=Tt(r),l=Tt(h),f=Tt(a),d=kt[s]+i,p=kt[d]+o,m=kt[d+1]+o,w=kt[s+1]+i,v=kt[w]+o,C=kt[w+1]+o;return Mt(f,Mt(l,Mt(u,Ft(kt[p],r,h,a),Ft(kt[v],r-1,h,a)),Mt(u,Ft(kt[m],r,h-1,a),Ft(kt[C],r-1,h-1,a))),Mt(l,Mt(u,Ft(kt[p+1],r,h,a-1),Ft(kt[v+1],r-1,h,a-1)),Mt(u,Ft(kt[m+1],r,h-1,a-1),Ft(kt[C+1],r-1,h-1,a-1))))}(i(t),i(e),i(n))+1)/2}let St,Bt={},Rt=["m","n","v","p","uO","ucp","udv","udc","upl","upc","uF","ua","ud","us","un","uT"];function $t(t,e){const n=Y.createShader(e?Y.FRAGMENT_SHADER:Y.VERTEX_SHADER);if(Y.shaderSource(n,t),Y.compileShader(n),Y.getShaderParameter(n,Y.COMPILE_STATUS))return n}function Pt(){!function(){const t=$t(Ot,0),e=$t(Gt,1);j=Y.createProgram(),Y.attachShader(j,t),Y.attachShader(j,e),Y.linkProgram(j)}(),Rt.forEach((t=>Bt[t]=Y.getUniformLocation(j,t))),Y.useProgram(j)}window.onload=()=>{K=document.getElementById("gc"),Y=K.getContext("webgl2",{alpha:!1,preserveDrawingBuffer:!0}),K.onwebglcontextlost=t=>t.preventDefault(),K.webglcontextrestored=Pt(),W=document.getElementById("hc"),St=W.getContext("2d"),Pt(),Et('D%E(C&D\'E&C(D"E$C$D&F#C(D#F%C\'D&F\'C(?#nfq7T($"##/$"%7D#C G|!E"J;!E&C!D\'S(%)    ! E!I^ E-C G(!7C C G>%E!E(E$C!D@S%&    D,C D#E!J=\'E%7C C GE"C D!E2C D,C C G=%E&C D"CGC C J,&E#C Gun7D8C Gc E#E)IN C!DCS$"z  E-D-C D)JZ$E?E:E$7D.C GM!C E!E"C D-S& ^Q   GU C C J6&E#7Jo+C G] E#E&JY!C!D=S% 9   D(C D!C JN(E%C G@u7D&C Gq!E#E!E!C#D<D~D!GF~E#E!D(H&!D!C D&E!E$G!o7@S2~!~!!!~!!~!~!!~!!!22.!#%+$%,$"$A@Ia Ia Ia E@Ia Ia Ia E@C!C!C!D)C*4AD)IV JO!JY!T$\'"!$C!C!C!D$D%S$!!!(?#pad4E@E6T&""$#"$C!C!C!D&C\'?#blk4T(%%%!%%%#C!D&D(D%C4?#bak4 !C BC(C!C(1T)%%("%&\'&\'C!C!D(C54C(C!C(6?$cell8"9 !C BC(C"C(1T$%&\'"C!D"C D(C!C!C!D(C44C(C"C(6?#pad8"9 !C BC!C!D!1E&E&Jh E@E-E-JO!Ic C!C!C!D#C44C#D9C#6?&floppy8"9! E9E9E9(%+C EPC )C9&5C/&C!B?%fdisc89"! C B#D%ECE+(D}C"C )$C!B?\'shutter89"'),U.attach(new tt({name:"cam"})),O.defaultStage(),window.onresize=T,T(),q=Date.now(),Q()};const Ot="#version 300 es\n    uniform mat4 m,n,v,p;\n    in vec3 vp, vn, vc;\n    in vec2 uv;\n\n    out vec3 wp, wn, wc;\n    out vec2 uw;\n    out float fd;\n\n    void main(void) {\n        vec4 p4 = vec4(vp, 1.0);      \n        wp = (m * p4).xyz;            \n        wn = (n * vec4(vn, 1.0)).xyz; \n        wc = vc;                      \n        uw = uv;                      \n        fd = -(v * m * p4).z;         \n\n        gl_Position = p*v*m*p4;\n    }\n",Gt="#version 300 es\n    precision highp float;\n\n    \n    \n    uniform vec4 uO, udc, uF, upc[16],\n        ua, ud, us;\n    uniform vec3 ucp, udv, upl[16];\n\n    uniform float un;\n    uniform sampler2D uT;\n\n    in vec3 wp, wn, wc;\n    in vec2 uw;\n    in float fd;\n\n    out vec4 oc;\n\n    void main(void) {\n        vec3 WN = normalize(wn);\n\n        \n        \n        float dd = max(\n            dot(WN, udv),\n            0.0\n        ) * udc.w;\n\n        \n        vec3 dc = vec3(0.0, 0.0, 0.0);\n        dc = dc + udc.xyz * dd;\n\n        vec3 sc = vec3(0.0, 0.0, 0.0);  \n        vec3 eye = normalize(ucp - wp);\n\n        for (int i = 0; i < 16; i++) {\n            \n            vec3 dr = upl[i] - wp;\n            float pd = length(dr); \n            dr /= pd;\n\n            \n            float a = 1.0 / (\n                .2 \n                + 0.001 * pd*pd \n            );\n\n            \n            float l = max(\n                dot(WN, dr),\n                0.0\n            ) * upc[i].w * a;\n            dc = dc + upc[i].xyz * l;\n\n            \n            vec3 hv = normalize(dr + eye);  \n\n            float c = pow(\n                max( dot(WN, hv), 0.0 ), un\n            ) * upc[i].w * a;\n\n            sc = sc + upc[i].xyz * c;\n        }\n\n        \n        vec3 hd = normalize(udv + eye); \n        float sd = pow(\n            max( dot(WN, hd), 0.0 ), un\n        ) * udc.w;\n        sc += udc.xyz * sd;\n\n        \n        float z = gl_FragCoord.z / gl_FragCoord.w;\n        \n        float fA = smoothstep(30.0, 140.0, fd); \n\n        oc = mix(\n                vec4(\n                    \n                    ua.xyz * ua.w\n                    + (texture(uT, uw).xyz * uO.z\n                         + ud.xyz * (1.0-uO.z)) * dc * ud.w\n                    + us.xyz * sc * us.w,\n                    1.0) * uO.x,               \n                \n            uF, fA\n        );\n    }\n";function It(t,e){let n=It[t];n&&n(e)}It.register=function(t,e){var n,s;It[t]?It[t]=(n=It[t],s=e,t=>{n(t),s(t)}):It[t]=e},window.onkeydown=t=>{if(gt.touch(),U.fader.touch(t),t.repeat)return;if(It("keyDown",t),Ct.paused||Ct.disabled)return;st[t.code]=1;let e=Ct.bind.indexOf(t.code);e>0&&U.broker&&U.broker.activate(e)},window.onkeyup=t=>{st[t.code]=0,It("keyUp",t);let e=Ct.bind.indexOf(t.code);e>0&&U.broker&&U.broker.stop(e)},window.onmousedown=t=>{gt.touch(),It("mdn",t),Ct.paused||Ct.disabled||U.broker&&U.broker.onMouseDown(t)},window.onmouseup=t=>{It("mup",t),Ct.paused||Ct.disabled||U.broker&&U.broker.onMouseUp(t)},window.onmousemove=t=>{Ct.paused||Ct.disabled||U.broker&&U.broker.onMouseMove(t)},window.onwheel=t=>{Ct.paused||Ct.disabled||U.broker&&U.broker.onMouseWheel&&U.broker.onMouseWheel(t)},document.onpointerlockchange=t=>{document.pointerLockElement?Ct.mouseLock=!0:(Ct.mouseLock=!1,Ct.prt=Date.now())};let Ut,Ht=[t=>t,t=>t>.5?4*Math.pow(t-1,3)+1:4*Math.pow(t,3)];U.tw=Ut=new class extends I{inc(t){t.m=Ct.time,this.attach(t)}n(t,e,n,s,i,o,r){this.inc({a:t,p:e,s:n,e:s,t:i,f:o,onKill:r})}evo(t){super.evo(t);for(let t of this._ls){if(t.dead)continue;let e=u(t.f((Ct.time-t.m)/t.t),0,1);t.a[t.p]=t.s+(t.e-t.s)*e,e>=1&&G(t)}}}({name:"tw"});const Lt={collide:function(t,e){let n=0;const s=this._ls;for(let i=s.length-1;i>=0;--i){const o=s[i];if(o.collide){const s=o.collide(t,e);n<s&&(n=s)}else if(!o.dead&&o.solid&&o.solid!==t&&o.solid.touch(t)){if(o.solid.kind){const s=o.solid.deltaY(t);n=!n&&(e[0]||e[2])&&s<ce?1:2}o.onTouch&&o.onTouch(t.__),t.__.onImpact&&t.__.onImpact(o)}}return n}};O.defaultStage=()=>{E(U,Lt),U.attach(new se),U.freeCam=U.cam,U.attach(new tt({name:"cam"})),hero=U.attach(new te({name:"hero",type:"superhero",pos:f(-8,15,21),_pods:[U.cam]})),k((()=>{Qt("Collect Data",7,1)}),4),k((()=>{Qt("Unlock jump pads with data",7,1)}),16)};class Vt{constructor(t){E(this,t)}join(t){return this.target=t,this.state=1,t}deactivate(){this.state=2}isFree(){return!this.state}selfWhenFree(){if(!this.state)return this}srcDir(){switch(this.dir){case 1:return 3;case 2:return 4;case 3:return 1;case 4:return 2}}probe(){const t=f(32,32,32),e=f.iadd(this.pos,f(oe(this.dir)*t[0],0,re(this.dir)*t[2]));this.src._$.isClaimed(e,t)&&this.disable()}}class Jt extends et{constructor(t){super(E({rotSpeed:f(0,1,0),_pods:[new nt({geo:yt.floppy}),new nt({geo:yt.fdisc}),new nt({geo:yt.shutter}),new V({kind:0,hsize:yt.floppy.bounds})]},t))}evo(t){for(let e=0;e<3;e++)this.rot[e]+=this.rotSpeed[e]*t}}let Yt,jt,Kt=[[0,0,.5,360,1],[0,0,1,360,-1]],Wt=0,qt=["top","left","right","center"],Nt=t=>c(255*t).toString(16).padStart(2,"0"),Xt=[],Zt=0,Qt=(t,e,n)=>(Xt=Xt.filter((t=>t.t>0)),Yt={m:t,x:W.width-20,y:W.height+20,dy:.1*-W.height,t:e},Xt.push(Yt),n&&gt(2),Yt);class te extends I{constructor(e){const n={s:0,hh:1,HD:0,DD:0,eY:2.5,tiltAngle:0,minTilt:-t/2,maxTilt:t/2,_f:!0,_pos:l(),mt:l(),mtx:l(),mty:l(),mtz:l()};e._pods=A(e._pods,[new L,new V({hsize:f(1,2,1)})]),e._traits=A(e._traits,[J]),super(E(n,e)),this._initialPos=f.clone(this.pos)}redeploy(){let t=this;t.lastPad?f.copy(t.pos,t.lastPad.pos):f.copy(t.pos,t._initialPos),t.pos[1]+=15,f.set(t.mt,0,0,0),t.HD=t.DD=Kt[0][0]=Kt[1][0]=0,t._f=!0,t.st=0}reset(){this.st>0||(this.st=1,U.fader.roll(2),gt(5))}onImpact(t){this.lastCollider=t,t instanceof Jt&&(Kt[0][0]+=t.c,G(t))}dCl(t){return U.collide(this.solid,t)}evo(t){for(jt of(super.evo(t),Xt))jt.d>0?jt.d-=t:(jt.y+=jt.dy*t,jt.t-=t);0===Zt&&this.HD>1400&&Ct.time>20&&(Qt("Jump on orange pads to upload",7,1),Zt=1),1===Zt&&this.HD>=9999&&(Qt("Do not exceed your capacity! Keep it under 13MB!",7,1),Zt=2),Kt.forEach(((e,n)=>{if(e[0]>0&&e[1]<0){let t=e[0]>e[3]?e[3]:e[0];e[0]-=t,this.HD+=t*e[4],n&&(this.DD+=t),e[1]=e[2],n?gt.up(1):(gt(3),a()<.3&&setTimeout((()=>gt(3)),150))}else e[1]-=t}));const e=this.mt,n=this.mtx,s=this.mty,o=this.mtz,r=e[1];e[1]-=30*t,r>0&&e[1]<0&&(this.lastJumpPad=null,this._f=!0),e[1]<-96&&(e[1]=-96,this.pos[1]<this.lastPlatform.pos[1]-100&&this.reset()),this.grounded&&this.HD>13312&&this.jump(4);let c=0;const h=this.grounded?1.2:.3,u=1+.005*Math.max(e[0]*e[0]+e[2]*e[2]-900,0),l=f.n(f.clone(e));if(l[1]=0,f.scale(l,h*u),i(l[0])>i(e[0])&&(l[0]=e[0]),i(l[2])>i(e[2])&&(l[2]=e[2]),f.scale(l,-1),f.add(e,l),f.set(n,e[0],0,0),f.set(s,0,e[1],0),f.set(o,0,0,e[2]),this.grounded=!1,f.copy(this._pos,this.pos),f.scad(this.pos,s,t),f.equals(this.pos,this._pos)||this.dCl(s)&&(e[1]<0&&(this.grounded=!0,this.lastPlatform=this.lastCollider,this._f&&(this._f=!1,gt(6))),f.copy(this.pos,this._pos),e[1]=0),f.copy(this._pos,this.pos),f.scad(this.pos,n,t),!f.equals(this.pos,this._pos)){const e=this.dCl(n);2===e?f.copy(this.pos,this._pos):1===e?(f.set(s,0,he,0),f.scad(this.pos,s,t),this.dCl(n)>1&&f.copy(this.pos,this._pos),c++):c++}if(f.copy(this._pos,this.pos),f.scad(this.pos,o,t),!f.equals(this.pos,this._pos)){const e=this.dCl(o);2===e?f.copy(this.pos,this._pos):1===e?(f.set(s,0,he,0),f.scad(this.pos,s,t),this.dCl(o)>1&&f.copy(this.pos,this._pos),c++):c++}this.grounded&&c&&(Wt+=t,Wt>.25&&(gt(8),Wt-=.25)),f.set(this.cam.pos,this.pos[0],this.pos[1]+this.eY,this.pos[2]),f.copy(this.cam.dir,this.dir),f.copy(this.cam.left,this.left),f.copy(this.cam.up,this.up),this.cam.pitch(this.tiltAngle)}draw(){for(jt of(super.draw(),St.font=Ct.fnt,St.fillStyle=Ct.cl,St.textBaseline=qt[0],St.textAlign=qt[1],St.fillText(`Collected: ${this.HD}Kb`,20,20),St.textAlign=qt[2],St.fillText(`Uploaded: ${this.DD}Kb`,W.width-20,20),this.HD>13312&&(St.textAlign=qt[3],Ct.time%1<.5&&(St.fillText("DATA OVERLOAD!!! STORAGE EXCEEDED 13Mb!!!",.5*W.width,.7*W.height),St.fillText("Jump on the closest orange pad to upload!",.5*W.width,.78*W.height))),Xt))St.fillStyle=Ct.cl+Nt(u(jt.t,0,1)),St.textAlign=qt[2],St.fillText(jt.m,jt.x,jt.y)}tilt(t){this.tiltAngle=u(this.tiltAngle+t,this.minTilt,this.maxTilt)}jump(t){this.mt[1]+=20,gt(t)}}const ee=h(7);function ne(t,e,n,s,i){return c(zt(t[0]*n,t[1]*n,(t[2]+e)*n)*i%1*s)}class se{constructor(){E(this,{blocks:[],lG:0})}isClaimed(t,e){return this.blocks.filter((n=>n.porous.touch(new V({pos:t,hsize:e})))).length}claimBlock(t,e,n){if(this.isClaimed(t,e))return;const s=U.attach(new ie({_$:this,_c:n,pos:t,hsize:e}));return this.blocks.push(s),s}release(t){}zone(t){let e=[],n=xt.nfq;for(let s=0;s<18;s+=3)e.push(ne(t.pos,n[s],n[s+1],n[s+2],10));const s=f.clone(t.pos),i=oe(t.dir),o=re(t.dir),r=8*(1+e[0]),c=8*(1+e[1]),h=f(r,8+e[2],c),a=e[3]*t._j*8/2;s[0]+=(a+h[0])*i,s[1]+=h[1]+e[4]-2,s[2]+=(a+h[2])*o;const u=this.claimBlock(s,h,t);if(u)return u;t.deactivate()}init(){let t=U.attach(new ie({_$:this,pos:f(0,0,0),hsize:f(32,8,32)}));this.blocks.push(t),this.T=t._ls[0]}genesisBomb(){let t=(U.hero.lastPlatform||this.T).__.sf(1+c(9*a()));if(t)return this.zone(t)}evo(t){Ct.time-this.lG>1&&(this.genesisBomb(),this.lG=Ct.time)}}class ie extends I{constructor(t){super(t),this.cellHHeight=1.5,this.connections=[],this._c&&(this.connections[this._c.srcDir()]=this._c,this._c.join(this)),this.shape(),this.collideWithin=Lt.collide,this.attach(new V({name:"porous",hsize:this.hsize}))}createConnection(t,e,n,s,i){const o=oe(n),r=re(n);e[0]+=8*o,e[2]+=8*r;const c=this.connections[n]=new Vt({src:this,_j:1,cell:t,pos:e,dir:n});s&&(t.m=Dt.blk,t.d=720*i,c._j=1.2,t.evo=function(){U.hero.HD<this.d?this.surface.m=Dt.blk:this.surface.m=Dt.pad},t.onTouch=function(t){t.lastJumpPad===this||t.mt[1]>-10||t.pos[1]<this.pos[1]||t.HD<this.d||(t.lastJumpPad=t.lastPad=this,this.surface.m=Dt.bak,this.onTouch=null,this.zombie=!0,k((()=>{Kt[1][0]+=this.d,Qt(`Uploading ${this.d}Kb...`,3),t.mt[0]+=o,t.mt[1]+=45,t.mt[2]+=r})))})}sf(t){if(t){const e=ee.elem(this.connections.filter((t=>t.target)));return e?e.target.sf(t-1):this.sf(t-1)}return ee.elem(this.connections.filter((t=>t.isFree())))}shape(){let t=f.isub(this.pos,this.hsize),e=f.iadd(this.pos,this.hsize);const n=c(this.hsize[0]/8),s=c(this.hsize[2]/8),i=c(n*ee()),o=c(s*ee());for(let r=t[2],h=0;r<=e[2]-16;r+=16,h++)for(let u=t[0],l=0;u<=e[0]-16;u+=16,l++){if(ee()<.2)continue;const e=[p(.2,.2,.2,.9),p(.2,.6,.8,.9)],d=(h%2+l%2)%2,m=c(3*a());let w,v=this.cellHHeight,C=f(u+8,t[1]+v+m,r+8),g=0;if(0===h?g=1:0===l?g=2:h===s-1?g=3:l===n-1&&(g=4),g)if(this.connections[g])g=0;else switch(g){case 1:case 3:l<i&&(g=0);break;case 2:case 4:h<o&&(g=0)}else{if(ne(C,7,.1,18,1)<9&&(w=f.iadd(C,f(0,4.2,0)),U.attach(new Jt({pos:w,reactive:1,c:360*(c(4*ee())+1)})),this._c)){let t=w[1]-100;Ut.n(w,1,t,w[1],5*a()*2,Ht[1]),w[1]=t}}let y=ne(C,7,.1,4,10),b=g&&y>=2?1:0;const x=this.attach(new et({pos:C,_pods:[new nt({geo:b?yt.pad:yt.cell,m:b?Dt.blk:E({},yt.cell.m,{d:e[d]})}),new V({hsize:b?yt.pad.bounds:yt.cell.bounds})]}));if(g&&this.createConnection(x,f.clone(x.pos),g,b,y),this._c){let t=C[1]-100;Ut.n(C,1,t,C[1],5*a()*2,Ht[1]),C[1]=t}}}collide(t,e){if(this.porous.touch(t))return this.collideWithin(t,e)}draw(){f.distSq(this.pos,U.cam.pos)<ae&&super.draw()}}function oe(t){switch(t){case 2:return-1;case 4:return 1}return 0}function re(t){switch(t){case 1:return-1;case 3:return 1}return 0}U.attach({name:"fader",fade:0,roll:function(t){let e=this;if(this.R=t,2===t)Ut.n(e,"fade",0,1,1,Ht[1],(()=>{Ct.paused=1,e.roll(3),Xt=[]}))},redraw:function(){if(this.fade){let t="#170526"+Nt(this.fade);St.fillStyle=t,St.fillRect(0,0,W.width,W.height)}if(3===this.R){St.font=Ct.fnt,St.fillStyle=Ct.cl,St.textBaseline=qt[0],St.textAlign=qt[3];let t=.3*W.height,e=.5*W.width;St.fillText("Data Run is Over",e,t),t+=50,St.fillText(`Uploaded: ${Math.round(hero.DD/102.4)/10}Mb`,e,t),t=.7*W.height,Ct.time%1>.5&&St.fillText("Press Any Key",.5*W.width,t)}},touch:function(t){let e=this;if(3===this.R)U.hero.redeploy(),Ct.paused=0,Ut.n(e,"fade",1,0,1,Ht[1],(()=>{})),this.R=0,gt(2)}});const ce=2,he=2,ae=62500;