<!DOCTYPE html><html lang="en"><head><title>OffLine</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="OffLine"><style type="text/css">html{box-sizing:border-box;font-size:16px}*,:after,:before{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,ol,p,ul{font-weight:400;margin:0;padding:0}ol,ul{list-style:none}i{font-style:normal}img{height:auto;max-width:100%}html{font-family:Helvetica,Arial,sans-serif}body,html{height:100%;overflow:hidden;position:relative}body{background:#000;width:100%}body.game #hud,body.game #score{opacity:1}body.game #menu{opacity:0}kbd{border:1px solid #00f;font-size:14px;margin:0 2px;padding:0 4px}canvas{background-color:transparent;position:relative;z-index:1050}canvas.background{z-index:1020}canvas#effects,canvas.background{left:0;opacity:1;position:absolute;top:0}canvas#effects{z-index:1060}.gameover #ship{opacity:0}#ship{bottom:90px;height:40px;left:50%;position:absolute;transform:translateX(-50%);transition:opacity .9s}#ship,#ship #hull{width:20px;z-index:1080}#ship #hull{background:#cce9f9;border-radius:50% 50% 0 0;height:100%;overflow:hidden;position:relative}#ship #hull:after{background:#93c7ef;border-radius:0 100% 0 0;content:"";height:100%;position:absolute;right:0;top:0;width:50%}#ship #wings{border-bottom:25px solid #195857;border-left:10px solid transparent;border-right:10px solid transparent;height:0;left:-10px;position:absolute;top:15px;width:40px;z-index:1040}#ship #thrust{animation-duration:.1s;animation-iteration-count:infinite;background:#e4ce3b;height:10px;left:1px;top:100%;width:18px}#ship #thrust,#ship #thrust div{animation-name:thrust;border-radius:0 0 90px 90px;position:absolute}#ship #thrust div{animation-delay:.3s;animation-duration:.2s;animation-iteration-count:infinite;background:#e48c34;height:6px;left:5px;top:0;width:8px}#ship.burst #thrust{background:#5fccff;height:13px}#ship.burst #thrust div{background:#4db3ff;height:8px}@keyframes thrust{0%{border-radius:0 0 90px 110px}50%{border-radius:0 0 110px 90px}to{border-radius:0 0 90px 110px}}.game #hud{opacity:1;z-index:1110}#hud{height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .5s;width:100%;z-index:1010}#hud .burst{background:red}#hud #score{color:#96f2ff;font-size:50px;position:absolute;right:20px;top:20px}#fuel-line{background:rgba(0,0,0,.5);height:15px;opacity:.9;width:100%}#fuel-line,#fuel-line #fuel{left:0;position:absolute;top:0}#fuel-line #fuel{background:orange;height:100%;transition:width .6s;width:10%}#equipments{bottom:50px;left:50px;position:absolute;z-index:1090}#equipments li{border-radius:50%;color:#fff;cursor:pointer;height:50px;line-height:3em;margin-bottom:50px;position:relative;text-align:center;width:50px}#beam{background:green}#beam.out{opacity:.3}#plasma{background:#ff3f3c}#plasma.out{opacity:.3}.game #menu-wrapper,.gameover #menu-wrapper{opacity:0;pointer-events:none}.menu{color:#fff;left:50%;line-height:3;opacity:0;position:absolute;text-align:center;top:50%;transform:translate(-50%,200vw)}.menu.active{opacity:1;transform:translate(-50%,-50%)}#reset-progress,#reset-progress-menu{color:red}#menu-wrapper{background:rgba(0,0,0,.75);font-size:18px;height:100%;left:0;position:absolute;top:0;transition:all .5s;width:100%;z-index:1090}#menu-wrapper #menu-money{background:#ff0;border-radius:50%;cursor:pointer;height:50px;position:absolute;right:15px;top:15px;width:50px}#menu-wrapper #menu-money #money-collected{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}#menu-wrapper #menu-money #money-collected:before{content:"$"}#menu-wrapper ul li{cursor:pointer;font-weight:700}#menu-wrapper ul.menu li:hover,#menu-wrapper ul li.nav:hover{color:#dedede;text-decoration:underline}.back{margin-top:20px}#legend{font-size:16px;line-height:1.425;text-align:justify}#legend p{margin-bottom:10px}#legend ul{line-height:1.7}#legend ul li{font-weight:400}#legend .item i{border-radius:50%;display:inline-block;height:20px;margin-right:5px;transform:translateY(5px);width:20px}#controls{margin-top:10px}#i-money{background:#ff0}#i-fuel{background:orange}#i-beam{background:green}#i-plasma{background:#ff3f3c}#confirm-reset{display:none}#confirm-reset button{margin:0 10px}#confirm-reset button:hover{background:#1a706f}#confirm-reset.show{display:block}#reset-progress-menu.hide{display:none}.gameover #menu-gameover{opacity:1}.gameover #msg-gameover{opacity:1;transform:none}.game #menu-gameover{opacity:0}#new-record{display:none}#new-record.show{display:block}#menu-gameover{background:rgba(0,0,0,.75);font-size:18px;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all 1s;width:100%;z-index:1090}#menu-gameover section{color:#fff;left:50%;line-height:3;position:absolute;text-align:center;top:50%;transform:translate(-50%,-50%)}#menu-gameover ul li{cursor:pointer}#msg-gameover{color:#fff;height:100px;left:0;opacity:0;position:absolute;text-align:center;top:15vh;transform:translateY(-150vh);transition:all 2s;width:100%;z-index:1100}button{background:#195857;border:none;color:#fff;cursor:pointer;font-weight:700;padding:5px}.update-equipment{margin-left:10px}.update-equipment:hover{background:#1a706f}</style></head><body><canvas id="space-background-stars" class="background"></canvas><canvas id="space-canvas"></canvas><canvas id="effects"></canvas><div id="hud"><i id="score">0</i><!--button id="burst">Lightspeed</button--><ul id="equipments"><li id="beam" class="out">0</li><li id="plasma" class="out">0</li></ul><div id="fuel-line"><i id="fuel"></i></div></div><div id="ship"><div id="hull"></div><div id="wings"></div><div id="cockpit"></div><div id="thrust"><div></div></div></div><h2 id="msg-gameover">GAME OVER!</h2><div id="menu-gameover"><section><p id="new-record">Congratulation! New record!</p><p>Your score: <i id="end-score"></i></p><p>Record: <i id="record"></i></p><ul><li id="restart">Restart</li><li id="back-to-menu">Menu</li></ul></section></div><div id="menu-wrapper"><div id="menu-money" data-target="profile" class="nav"><span id="money-collected">0</span></div><ul id="main-menu" class="menu"><li id="start">Start</li><li data-target="profile" class="nav">Profile / Updates</li><li data-target="legend" class="nav">Story / Controls</li><li id="reset-progress-menu">Reset progress</li><li id="confirm-reset"><button id="reset-progress">Yes</button><button id="no-reset">No</button></li></ul><div id="profile" class="menu"><h2>Profile / Updates</h2><p>Your money: $<i id="money">0</i></p><p>Equipments:</p><ul><li><div>Chance (of spawning powerups) - level: <i id="chance-lvl">1</i> <button type="button" data-update="chance" class="update-equipment"><i>+</i> ( $<i id="chance-price" class="price">2</i> )</button></div></li><li><div>Beam (radius) - level: <i id="beam-lvl">1</i> <button type="button" data-update="beam" class="update-equipment"><i>+</i> ( $<i id="beam-price" class="price">2</i> )</button></div></li><li><div>Fuel (tank size) - level: <i id="fuel-lvl">1</i> <button type="button" data-update="fuel" class="update-equipment"><i>+</i> ( $<i id="fuel-price" class="price">2</i> )</button></div></li><li><div>Plasma (strength) - level: <i id="plasma-lvl">1</i> <button type="button" data-update="plasma" class="update-equipment"><i>+</i> ( $<i id="plasma-price" class="price">2</i> )</button></div></li><li data-target="main-menu" class="nav back">Back</li></ul></div><div id="legend" class="menu"><h2>Story and Controls</h2><p>Earth is under decay and had become unable to inhabit. As a result, humans had to leave it immediately.</p><p>During the escape, your spaceship has encountered some damage and as a result the majority of your control systems went offline.</p><p>In order to avoid collisions with planets, you have to move from one gravity field to another by choosing the right speed and angle.</p><p>You can use the nozzle system (<kbd>Left arrow</kbd> and <kbd>Right arrow</kbd>) to make small side moves. Be aware, your fuel does not last for long.</p><p>Try to pick up useful items on your way:</p><ul><li class="item"><i id="i-money"></i>Money: For update your items in menu</li><li class="item"><i id="i-fuel"></i>Fuel: To refill your tank with fuel</li><li class="item"><i id="i-beam"></i>Beam: To pick up items in a radius <kbd>1</kbd></li><li class="item"><i id="i-plasma"></i>Plasma: To destroy planets <kbd>2</kbd></li></ul><h2 id="controls">Controls</h2><ul><li>Throttle: <kbd>Up arrow</kbd> Left Nozzle: <kbd>Left arrow</kbd> Right Nozzle: <kbd>Right arrow</kbd></li><li>Beam: <kbd>1</kbd> Plasma: <kbd>2</kbd></li></ul><ul><li data-target="main-menu" class="nav back">Back</li></ul></div></div><script type="text/javascript">!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6)}([function(t,e){const i={startSpeed:4,minSpeed:4,maxSpeed:12,incrieseSpeedVelocity:8,decreaseSpeedVelocity:8,gravitydecreaseSpeedVelocity:0,turn:{enabled:!0,duration:1e3,angle:4}};t.exports={fps:30,spaceship:{...i,engineParticlesEnabled:!0,posYOffset:150},stars:{enabled:!0,minRadius:2,maxRadius:3,bigStarDensity:40,smallStarDensity:80,color:"#ffffff"},planet:{gridFillRate:.56,maxInARow:3,gravityRate:.48,maxCraterCount:5,maxMoonCount:2,maxVelocity:0,colors:["#333333","#666666","#999999"]},profile:{progress:{intro:!0,money:5,chance:1,beam:1,fuel:1,plasma:1},beamRadius:1502},equipments:{beam:{color:"green",radius:35,effectRadius:50},plasma:{radius:35,color:"#ff0000",x:0,y:0,speed:21},fuel:{color:"orange",radius:35,x:0,y:0}}}},function(t,e){t.exports=class{constructor(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.TWO_PI=2*Math.PI}random(t=0,e=0){return Math.floor(Math.random()*(e-t+1))+t}}},function(t,e){t.exports=class{constructor(){this.planets=[]}checkObjectCollision(t,e){for(let i=0;i<t.length;i++){const s=t[i];if(this.isCollisedWithObject(s,e))return!0}return!1}isCollisedWithObject(t,e){const i=e.x+e.width/2,s=e.y,a=t.getX()-i,h=t.getY()-s;return Math.sqrt(a*a+h*h)<=t.radius}checkCirclesCollision(t,e){this.planets=t;for(let i=0;i<t.length;i++){const s=t[i],a=s.x-e.x,h=s.y-e.y,n=Math.sqrt(a*a+h*h);if(n<=s.gravityRadius+e.gravityRadius+e.gravityRadius/4*3&&0!=n)return!0}return!1}checkPlasmaCollision(t,e){for(let i=0;i<t.length;i++){const s=t[i];if(this.checkCollision(s,e))return this.destroyPlanetIfPowerIsEnough(s,e),!0}}destroyPlanetIfPowerIsEnough(t,e){const i=t.minRadius+(t.maxRadius-t.minRadius)/10*e.level;t.gravityRadius<i&&(t._generateRandomParameters(),t.y=0-Math.floor(Math.random()*(2*t.gravityRadius)),t._checkCollision())}checkCollision(t,e){const i=t.x-e.x,s=t.y-e.y,a=Math.sqrt(i*i+s*s);return a<=t.radius+e.radius&&0!=a}}},function(t,e){t.exports=class{constructor(){this.scoreUnit=1,this.score=0,this.element=document.getElementById("score")}updateScore(t){t&&t%100<1&&(this.score+=this.scoreUnit,this.element.innerHTML=this.score)}getScore(){return this.score}}},function(t,e,i){},,function(t,e,i){"use strict";i.r(e);i(4);var s=i(0),a=i.n(s);class h{constructor(){this.progress=this._getStoredProfileData()}_getStoredProfileData(){return JSON.parse(localStorage.getItem("offlineProfileData"))||a.a.profile.progress}_saveToLocalStorage(){localStorage.setItem("offlineProfileData",JSON.stringify(this.progress))}getProgressOfItem(t){return this.progress[t]}updateItem(t,e=1){this.progress[t]+=e,this._saveToLocalStorage()}}var n=i(1),r=i.n(n);class o extends r.a{constructor(){super(),this.canvas=document.getElementById("space-background-stars"),this.canvas.width=this.windowWidth,this.canvas.height=this.windowHeight,this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.velocity={x:0,y:-3},this.minRadius=a.a.stars.minRadius,this.maxRadius=a.a.stars.maxRadius,this.starColor=a.a.stars.color,this.starsBg="rgba(0,0,0,.5)",this.bigStarDensity=a.a.stars.bigStarDensity,this.smallStarDensity=a.a.stars.smallStarDensity,this.stars=[]}init(){return this.createBackgroundStars(),this.render(),this}render(t=0){a.a.stars.enabled&&(this.velocity.y=t/2*-1,this.clearCanvas(),this.renderStars())}createBackgroundStars(){for(;this.bigStarDensity--;)this.createStar(this.maxRadius);for(;this.smallStarDensity--;)this.createStar(this.minRadius)}createStar(t){this.stars.push(this.generateStar(t))}generateStar(t){return{alpha:this.getRandomBrightness(),radius:t||2*Math.random(),color:this.starColor,posX:Math.floor(Math.random()*this.windowWidth),posY:Math.floor(Math.random()*this.windowHeight)}}getRandomBrightness(){return Math.round(100*Math.random()-70+70)}clearCanvas(){this.ctx.fillStyle=this.starsBg,this.ctx.fillRect(0,0,this.windowWidth,this.windowHeight)}renderStars(){this.stars.map(t=>{this.updateStarPosition(t),this.renderStar(t)})}updateStarPosition(t){t.posY+=0===this.velocity.y?this.velocity.y:this.velocity.y/(1-t.radius),t.posX+=0===this.velocity.x?this.velocity.x:this.velocity.x/(1-t.radius),this.eventuallyKeepStarOnCanvas(t)}eventuallyKeepStarOnCanvas(t){t.posY>this.windowHeight&&(t.posY=0),t.posX>this.windowWidth&&(t.posX=0)}renderStar(t){const e=Math.round(t.posX),i=Math.round(t.posY);this.ctx.save(),this.ctx.globalCompositeOperation="lighter",this.ctx.globalAlpha=t.alpha,this.ctx.fillStyle=t.color,this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.arc(e,i,t.radius,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}}var c=i(2),l=i.n(c);class d extends r.a{constructor(){super(),this.x=0,this.y=0,this.collisionDetection=new l.a}getX(){return this.x}getY(){return this.y}setX(t){return this.x=t,this}setY(t){return this.y=t,this}}class p extends d{constructor(t,e=[]){super(),this.ctx=t,this.planets=e,this.planetColors=a.a.planet.colors,this.maxPlanetInARow=a.a.planet.maxInARow,this.gravityPlanetRate=a.a.planet.gravityRate,this.gridFillRate=a.a.planet.gridFillRate,this.gridForPlanet=Math.min(this.windowWidth,this.windowHeight)/this.maxPlanetInARow,this.maxRadius=this.gridForPlanet*this.gridFillRate,this.minRadius=this.maxRadius/3*2,this.moons=[],this._generateRandomParameters()}render(t){this._calculatePosition(t),this._renderPlanet(),this._renderSunLightSurface(),this._renderGravityField(),this.moons.forEach(t=>t.render()),this.craters.render()}isPointWithinGravityField(t){const e=this.getX()-t.getX(),i=this.getY()-t.getY(),s=Math.sqrt(e*e+i*i);return s<=this.gravityRadius&&s>this.radius}_generateRandomParameters(){this.color=this._getRandomColor(),this.gravityRadius=this._getRandomPlanetOuterRadius(),this.radius=this._getPlanetRadius(),this.x=this._getRandomX(),this.y=Math.floor(Math.random()*(this.windowHeight/3)*2)-this.windowHeight/6,this.vx=Math.floor(Math.random()*a.a.planet.maxVelocity),this.vy=Math.floor(Math.random()*a.a.planet.maxVelocity),this._checkCollision(),this.craters=new m(this.ctx,this),this._generateRandomMoons()}_generateRandomMoons(){this.moons=[];for(let t=0;t<this.random(0,a.a.planet.maxMoonCount);t++){const t=new u(this.ctx,this);this.moons.push(t)}}_calculatePosition(t){if(this._isOutOfView())return this._generateRandomParameters(),this.y=0-Math.floor(Math.random()*(2*this.gravityRadius)),void this._checkCollision();this.y+=t+this.vy,this.x+=this.vx}_isOutOfView(){return this.y>this.windowHeight+1.5*this.radius}_checkCollision(){for(;this.collisionDetection.checkCirclesCollision(this.planets,this);)this.x=this._getRandomX(),this.y=this.y-this.minRadius}_getRandomX(){return Math.floor(Math.random()*(this.windowWidth+this.minRadius))-this.minRadius}_getPlanetRadius(){return this.gravityRadius*this.gravityPlanetRate}_getRandomPlanetOuterRadius(){return Math.floor(Math.random()*(this.maxRadius-this.minRadius+1)+this.minRadius)}_getRandomColor(){return a.a.planet.colors[Math.floor(Math.random()*a.a.planet.colors.length)]}_renderPlanet(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,this.TWO_PI),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}_renderGravityField(){this.ctx.globalCompositeOperation="destination-over",this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.gravityRadius,0,this.TWO_PI),this.ctx.fillStyle="rgba(255,255,255,.1)",this.ctx.fill(),this.ctx.closePath(),this.ctx.globalCompositeOperation="source-over"}_renderSunLightSurface(){const t=this.radius/3;this.ctx.globalCompositeOperation="source-atop",this.ctx.fillStyle="rgba(255,255,255,.1)",this.ctx.beginPath(),this.ctx.arc(this.x-t,this.y,this.radius,0,this.TWO_PI),this.ctx.fill(),this.ctx.closePath(),this.ctx.globalCompositeOperation="source-over"}}class u extends d{constructor(t,e){super(),this.ctx=t,this.planet=e,this.theta=this.random(this.TWO_PI),this.radius=this.random(5,10),this.period=this.random(20,100)+this.radius,this.freq=1/this.period;const i=this.planet.radius+2*this.radius,s=this.planet.gravityRadius+this.radius;this.orbitRadius=this.random(i,s),this.color=this._getRandomColor()}render(){this._calculatePosition(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,this.TWO_PI),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath(),this._renderSunLightSurface()}_calculatePosition(){this.theta+=this.freq,this.theta>=this.TWO_PI&&(this.theta=0),this.x=this.orbitRadius*Math.cos(this.theta)+this.planet.getX(),this.y=this.orbitRadius*Math.sin(this.theta)+this.planet.getY()}_renderSunLightSurface(){const t=this.radius/3;this.ctx.globalCompositeOperation="source-atop",this.ctx.fillStyle="rgba(255,255,255,.1)",this.ctx.beginPath(),this.ctx.arc(this.x-t,this.y,this.radius,0,this.TWO_PI),this.ctx.fill(),this.ctx.closePath(),this.ctx.globalCompositeOperation="source-over"}_getRandomColor(){return a.a.planet.colors[Math.floor(Math.random()*a.a.planet.colors.length)]}}class m extends d{constructor(t,e){super(),this.ctx=t,this.planet=e,this.craters=this._generateRandomCraters()}render(){this.craters.forEach(t=>t.render())}_generateRandomCraters(){const t=[],e=Math.floor(Math.random()*a.a.planet.maxCraterCount);for(let i=0;i<=e;i++)t.push(this._getRandomCrater(t));return t}_getRandomCrater(t){const e=new g(this.ctx,this.planet);return this.collisionDetection.checkCirclesCollision(t,e)?this._getRandomCrater(t):e}}class g extends d{constructor(t,e){super(),this.ctx=t,this.planet=e;const i=this.planet.radius/5,s=i/2;this.radius=Math.floor(Math.random()*i)+s,this.radialDifference=this.planet.radius-this.radius,this.gravityRadius=this.radius,this.x=this.radialDifference/Math.floor(10*Math.random())-10,this.y=this.radialDifference/Math.floor(10*Math.random())-10}render(){return this.ctx.beginPath(),this.ctx.fillStyle="rgba(0,0,0,.1)",this.ctx.arc(this.planet.getX()-this.x,this.planet.getY()-this.y,this.radius,0,this.TWO_PI),this.ctx.fill(),this.ctx.closePath(),this}}class f extends p{constructor(t,e){super(t,e),this.gravityRadius=1,this.radius=75,this.color="#00FF00",this.x=this.windowWidth/2,this.y=this.windowHeight-37.5,this.vx=0,this.vy=0}}class v extends p{constructor(t,e){super(t,e),this.x=this.windowWidth/2+this.radius+(this.gravityRadius-this.radius)/2,this.y=this.windowHeight/3*2,this.vx=0,this.vy=0}}class x extends d{constructor(t,e,i,s="bottom",a){super(),this.ctx=t,this.direction=s,this.spaceship=a,this.x=e,this.y=i,this.colors=["rgba(35,11,37,"+(Math.random()+.5)+")","rgba(227,82,22,"+(Math.random()+.5)+")","rgba(237,160,77,"+(Math.random()+.5)+")","rgba(248,224,133,"+(Math.random()+.5)+")"],this._getRandomParams(),this.color=this.colors[Math.floor(Math.random()*this.colors.length)]}_getRandomParams(){let t=0;switch(this.direction){case"right":this.vx=1*Math.random()+3,this.vy=-1*Math.random()+1,t=.015;break;case"left":this.vx=1*Math.random()-3,this.vy=-1*Math.random()+1,t=.015;break;case"bottom":this.vx=2*Math.random()-1,this.vy=4,t=.04}this.size=this.random(0,1),this.growth=(Math.abs(this.vx)+Math.abs(this.vy))*t}isOutOfView(){return this.x>this.windowWidth||this.y>this.windowHeight}draw(){return this.x+=this.vx,this.y+=this.vy+this.spaceship.getSpeed()/(this.x/100),this.size+=this.growth,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,this.TWO_PI),this.ctx.fill(),this.ctx.closePath(),this}}class y extends d{constructor(){super(),this.particles=[],this.particleNum=.01}_renderParticles(){if(a.a.spaceship.engineParticlesEnabled){this._eventuallyAddParticle();for(let t in this.particles){this.particles[t].draw().isOutOfView()&&this.particles.splice(t,1)}}}_eventuallyAddParticle(){Math.random()>this.particleNum&&(this.burstOn&&this._addParticle("bottom"),this.leftEngineOn&&this._addParticle("left"),this.rightEngineOn&&this._addParticle("right"))}_addParticle(t){const e=this.x+this.width/2,i=this.y+this.height/3;this.particles.push(new x(this.ctx,e,i,t,this))}}class w extends y{constructor(t){super(),this.ctx=t,this.element=document.getElementById("ship"),this.speed=a.a.spaceship.startSpeed,this.width=15,this.height=40,this.x=this.windowWidth/2-this.width/2,this.y=this.windowHeight-a.a.spaceship.posYOffset+this.height/2,this.burstOn=!1,this.leftEngineOn=!1,this.rightEngineOn=!1,this.profile=new h,this.fuelLevel=10,this.setStartingFuelLevel()}getSpeed(){return this.speed}isOnBurstSpeed(){return this.burstOn}speedBurst(){this.incrieseSpeed(a.a.spaceship.incrieseSpeedVelocity),this.burstOn=!0,this.element.classList.add("burst")}speedStandard(){this.burstOn=!1,this.element.classList.remove("burst")}incrieseSpeed(t=1){this.speed+t<=a.a.spaceship.maxSpeed&&(this.speed+=t)}decreaseSpeed(t=.5){this.speed-t>=a.a.spaceship.minSpeed&&(this.speed-=t)}turnLeft(){this.rightEngineOn=!0,this.setFuelLevel(this.fuelLevel-2)}turnRight(){this.leftEngineOn=!0,this.setFuelLevel(this.fuelLevel-2)}turnEnd(){this.leftEngineOn=!1,this.rightEngineOn=!1}render(){this._renderParticles(),this.isOnBurstSpeed()||this.decreaseSpeed(a.a.spaceship.decreaseSpeedVelocity)}isAllowedToTurn(){if(!this.leftEngineOn&&!this.rightEngineOn)return!!a.a.spaceship.turn.enabled&&!!this.hasEnoughFuel()}getFuelLevel(){return this.fuelLevel}setStartingFuelLevel(){const t=10*this.profile.getProgressOfItem("fuel");this.setFuelLevel(t)}setFuelLevel(t){this.fuelLevel=t,document.getElementById("fuel").style.width=`${t}%`}hasEnoughFuel(){return this.getFuelLevel()>0}}var _=i(3),S=i.n(_);class P extends r.a{constructor(){super(),this.canvas=document.getElementById("effects"),this.ctx=this.canvas.getContext("2d",{alpha:!0}),this.particles=[],this.numParticles=150}_setCanvasDimensions(){this.canvas.width=this.windowWidth,this.canvas.height=this.windowHeight}render(t){this.spaceShip=t,this._setCanvasDimensions();for(var e=0;e<this.numParticles;e++)this.particles.push(new E(this.spaceShip.getX(),this.spaceShip.getY(),10*Math.random(),2*Math.random()*Math.PI));this.interval=setInterval(this._renderParticles.bind(this),30)}reset(){this.interval&&(clearInterval(this.interval),this._clearCanvas())}_renderParticles(){let t;for(this._clearCanvas(),t=0;t<this.numParticles/3;t++)this.ctx.fillStyle=this.particles[t].color,this.ctx.beginPath(),this.ctx.arc(this.particles[t].position.getX(),this.particles[t].position.getY(),5,0,2*Math.PI),this.ctx.fill(),this.particles[t].update();for(;t<2*this.numParticles/3;t++)this.ctx.fillStyle=this.particles[t].color,this.ctx.beginPath(),this.ctx.arc(this.particles[t].position.getX(),this.particles[t].position.getY(),3,0,2*Math.PI),this.ctx.fill(),this.particles[t].update();for(;t<this.numParticles;t++)this.ctx.fillStyle=this.particles[t].color,this.ctx.beginPath(),this.ctx.arc(this.particles[t].position.getX(),this.particles[t].position.getY(),4,0,2*Math.PI),this.ctx.fill(),this.particles[t].update()}_clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}class b{constructor(t,e){this.x=t,this.y=e,this._generateVector()}getX(){return this.x}getY(){return this.y}setX(t){this.x=t}setY(t){this.y=t}setAngle(t){const e=this.getLength();this.x=Math.cos(t)*e,this.y=Math.sin(t)*e}setLength(t){const e=this.getAngle();this.x=Math.cos(e)*t,this.y=Math.sin(e)*t}getAngle(){return Math.atan2(this.y,this.x)}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}_generateVector(){this.setX(this.x),this.setY(this.y)}addTo(t){t.x+=this.getX(),t.y+=this.getY()}}class E{constructor(t,e,i,s,a){this.position=null,this.velocity=null,this.colors=["rgba(105, 13, 8,"+(Math.random()+.5)+")","rgba(227,82,22,"+(Math.random()+.5)+")","rgba(237,160,77,"+(Math.random()+.5)+")","rgba(248,224,133,"+(Math.random()+.5)+")"],this.color=this._getRandomColor(),this.x=t,this.y=e,this.speed=i,this.angle=s,this.grav=a,this._generateParticle()}_getRandomColor(){return this.colors[Math.floor(3*Math.random())]}_generateParticle(){let t=this._generateParams();return this._setParticleVelocity(t,this.speed,this.angle),t}_generateParams(){this.position=new b(this.x,this.y),this.velocity=new b(0,0)}_setParticleVelocity(t,e,i){this.velocity.setLength(e),this.velocity.setAngle(i)}update(){this.velocity.addTo(this.position)}}class M extends d{constructor(t,e,i,s){super(),this.ctx=t,this.planets=e,this.spaceShip=i,this.equipments=s,this.pickedUp=!1,this.active=!1,this.removeable=!1,this.init()}init(){throw Error("[Equipment].init() method needs to be implemented in child class")}activate(){throw Error("[Equipment].activate() method needs to be implemented in child class")}pickUp(){throw Error("[Equipment].pickedUp() method needs to be implemented in child class")}doEffect(){throw Error("[Equipment].doEffect() method needs to be implemented in child class")}isActive(){return this.active}isRemoveable(){return this.removeable}render(t){return this._calculatePosition(t),this.ctx.globalAlpha=1,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,this.TWO_PI),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath(),this}isOutOfView(){return this.x>this.windowWidth||this.y>this.windowHeight}isPickedUp(){return this.pickedUp||this.collisionDetection.isCollisedWithObject(this,this.spaceShip)}updateButtonText(t=1,e){const i=document.getElementById(e);if(!i)return;const s=parseInt(i.innerHTML)+t;i.innerHTML=s,s?i.classList.remove("out"):i.classList.add("out")}_calculatePosition(t){this.y+=t}_getXWithoutPlanetCollision(){this.x=this._getRandomX();for(let t=0;t<this.planets.length;t++){const e=this.planets[t];if(this.collisionDetection.checkCollision(e,this))return this._getXWithoutPlanetCollision()}return this.x}_getRandomX(){return Math.floor(Math.random()*this.windowWidth)}}class I extends M{init(){this.name="plasma",this.profile=new h,this.radius=35,this.color="#ff0000",this.x=this._getXWithoutPlanetCollision(),this.y=0,this.plasmaWidth=8,this.plasmaHeight=24,this.level=this.profile.getProgressOfItem("plasma")}pickUp(){this.updateButtonText(1,"plasma")}activate(){this.active=!0,this.x=this.spaceShip.getX()+this.plasmaWidth/2,this.y=this.spaceShip.getY()-this.plasmaHeight,this.updateButtonText(-1,"plasma")}doEffect(){if(this.y=this.y-a.a.equipments.plasma.speed,this._renderPlasma(),this.radius=0,this.getY()<=0||this.collisionDetection.checkPlasmaCollision(this.planets,this))return this.removeable=!0,void(this.active=!1)}_renderPlasma(){this.ctx.beginPath(),this.ctx.rect(this.x,this.y,this.plasmaWidth,this.plasmaHeight),this.ctx.fillStyle="rgba(255,0,0,.5)",this.ctx.fill(),this.ctx.closePath()}}class R extends M{init(){this.name="beam",this.profile=new h,this.duration=1e4,this.radius=a.a.equipments.beam.radius,this.color="green",this.x=this._getXWithoutPlanetCollision(),this.y=0}pickUp(){this.updateButtonText(1,"beam")}activate(){this.active=!0,this.radius=a.a.equipments.beam.effectRadius*this.profile.getProgressOfItem("beam"),this.x=this.spaceShip.getX()+this.spaceShip.width/2,this.y=this.spaceShip.getY()+this.spaceShip.height/2,this.updateButtonText(-1,"beam")}doEffect(){const t=this.radius/(this.duration/a.a.fps);if(this.radius-=t,this.radius<=0)return this.removeable=!0,void(this.active=!1);this._renderBeamEffectRadius();for(let t of this.equipments)this.collisionDetection.checkCollision(t,this)&&(t.pickedUp=!0)}_renderBeamEffectRadius(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,this.TWO_PI),this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.stroke(),this.ctx.closePath()}}class O extends M{init(){this.name="money",this.radius=35,this.color="yellow",this.x=this._getXWithoutPlanetCollision(),this.y=0}activate(){}pickUp(){this.active=!0,(new h).updateItem("money",1)}doEffect(){this.removeable=!0}}class C extends M{init(){this.name="fuel",this.profile=new h,this.radius=35,this.color="orange",this.x=this._getXWithoutPlanetCollision(),this.y=0}activate(){alert("activate")}pickUp(){this.active=!0;const t=10*this.profile.getProgressOfItem("fuel");this.spaceShip.setFuelLevel(t)}doEffect(){this.removeable=!0}}class q extends r.a{constructor(t,e=[],i,s){super(),this.ctx=t,this.planets=e,this.spaceShip=i,this.profile=s,this.possibleEquipments=[C,O,R,I],this.equipments=[],this.collectedEquipments=[]}get(){return this.equipments}activateEquipment(t){for(let e in this.collectedEquipments){const i=this.collectedEquipments[e];if(i.name===t&&!i.isActive()){i.activate();break}}}eventuallyAdd(t){this.equipments.length||0===Math.round(t%100)&&this._haveYouLuckToSpawnEquipment()&&this._addRandom()}_haveYouLuckToSpawnEquipment(){return Math.floor(100*Math.random())+1<=5*this.profile.getProgressOfItem("chance")}render(t){this._renderPickabbleEquipments(t),this._renderPickedEquipments()}_renderPickabbleEquipments(t){for(let e in this.equipments){const i=this.equipments[e].render(t);i.isPickedUp()?(i.pickUp(),this.collectedEquipments.push(i),this.equipments.splice(e,1)):i.isOutOfView()&&this.equipments.splice(e,1)}}_renderPickedEquipments(){for(let t in this.collectedEquipments){const e=this.collectedEquipments[t];e.isActive()&&(this.collectedEquipments[t].doEffect(),e.isRemoveable()&&this.collectedEquipments.splice(t,1))}}_addRandom(){const t=Math.floor(Math.random()*this.possibleEquipments.length),e=this.possibleEquipments[t];return this.equipments.push(new e(this.ctx,this.planets,this.spaceShip,this.equipments)),this}}class L{constructor(t,e=[],i=[]){this.spaceShip=t,this.planets=e,this.equipments=i}calcGravityImpact(){this.shipFrontX=this.spaceShip.getX()+this.spaceShip.width/2,this.shipFrontY=this.spaceShip.getY(),this.planets.forEach(t=>this._calObjectGravityImpect(t))}_calObjectGravityImpect(t){const e=t.getX()-this.shipFrontX,i=t.getY()-this.shipFrontY,s=Math.sqrt(e*e+i*i);if(this._isWithinGravityField(t,s)){const t=.013*(e>0?-1:1);this.rotateObjects(t),this.spaceShip.decreaseSpeed(a.a.spaceship.gravitydecreaseSpeedVelocity)}}_isWithinGravityField(t,e){return e<=t.gravityRadius&&e>=t.radius}rotateObjects(t){this.planets.forEach(e=>this._doTransform(e,t)),this.equipments.forEach(e=>this._doTransform(e,t))}moveObjects(t){this.planets.forEach(e=>this._doMove(e,t)),this.equipments.forEach(e=>this._doMove(e,t))}_doMove(t,e){const i=t.getX()+e;t.setX(i)}_doTransform(t,e){const i=(t.getX()-this.shipFrontX)*Math.cos(e)-(t.getY()-this.shipFrontY)*Math.sin(e)+this.shipFrontX,s=(t.getX()-this.shipFrontX)*Math.sin(e)+(t.getY()-this.shipFrontY)*Math.cos(e)+this.shipFrontY;t.setX(i).setY(s)}}const k=32,X=38,T=37,B=39,F=49,W=50;class D{constructor(t,e,i,s){this.equipment=s,this.spaceShip=t,this.backgroundStars=e,this.space=i}init(){document.addEventListener("keydown",t=>{(t=t||window.event).keyCode!=k&&t.keyCode!=X||this.spaceShip.speedBurst(),t.keyCode==T&&this.space.turnLeft(),t.keyCode==B&&this.space.turnRight(),t.keyCode==F&&this.equipment.activateEquipment("beam"),t.keyCode==W&&this.equipment.activateEquipment("plasma")}),document.addEventListener("keyup",t=>{(t=t||window.event).keyCode!=k&&t.keyCode!=X||this.spaceShip.speedStandard()}),document.addEventListener("touchstart",t=>{this.spaceShip.speedBurst()}),document.addEventListener("touchend",t=>{this.spaceShip.speedStandard()}),this._activateEquipments()}reset(){this._resetEquipmentButton("beam"),this._resetEquipmentButton("plasma")}_resetEquipmentButton(t){const e=document.getElementById(t);e.classList.add("out"),e.innerHTML=0}_activateEquipments(){["beam","plasma"].forEach(t=>{const e=document.getElementById(t);["click","touchstart"].forEach(i=>{e.addEventListener(i,()=>{this.equipment.activateEquipment(t)})})})}}class Y{checkNewRecord(t){if(t>this.getRecord())return!0}setRecord(t){localStorage.setItem("offlineRecord",t)}getRecord(){return localStorage.getItem("offlineRecord")}}class A{constructor(t,e){this._x=t,this._y=e}setX(t){this._x=t}setY(t){this._y=t}getX(){return this._x}getY(){return this._y}}class H{constructor(t,e,i){this.ctx=t,this.planets=e,this.spaceship=i,this.collisionDetection=new l.a,this.precision=200,this.durationMs=15e3,this.precisionVelocity=this.precision/(this.durationMs/a.a.fps)}render(){this.precision-=this.precisionVelocity,this._predictPath().forEach((t,e)=>{const i=1-e*(1/this.precision);this.ctx.fillStyle=`rgba(${this.color.join(",")},${i})`,this.ctx.beginPath(),this.ctx.moveTo(t.getX(),t.getY()),this.ctx.arc(t.getX(),t.getY(),1,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()})}_predictPath(){const t=[];let e=new A(this.spaceship.x+this.spaceship.width/2,this.spaceship.y);t.push(e),this.color=[51,204,51];for(let i=0;i<this.precision;i++){const i=this.spaceship.getSpeed(),s=e.getX(),a=e.getY()-i,h=new A(s,a);this._gravitationalPull(h);const n={x:h.getX(),y:h.getY(),width:1};if(this.collisionDetection.checkObjectCollision(this.planets,n)){this.color=[255,51,0];break}t.push(h),e=h}return t}_gravitationalPull(t){return this.planets.forEach(e=>{if(e.isPointWithinGravityField(t)){const i=e.getX()-t.getX()>0?-1:1,s=e.gravityRadius/1500/this.spaceship.getSpeed()*i;t.setX(t.getX()-100*s)}}),t}}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;class V extends r.a{constructor(){super(),this.planets=[],this.gameIsOver=!1,this.traveledDistance=0,this.maxPlanets=9,this.canvas=document.getElementById("space-canvas"),this.ctx=this.canvas.getContext("2d",{alpha:!0}),this.score=new S.a,this.profile=new h,this.spaceShip=new w(this.ctx),this.equipment=new q(this.ctx,this.planets,this.spaceShip,this.profile),this.controls=new D(this.spaceShip,this.backgroundStars,this,this.equipment),this.backgroundStars=new o,this.gravity=new L(this.spaceShip,this.planets,this.equipment.get()),this.collisionDetection=new l.a,this.explosion=new P,this.record=new Y,this.path=new H(this.ctx,this.planets,this.spaceShip)}init(){return this._setSpaceDimensions(),this._addEarth(),this._addMoon(),this._addPlanets(),this.backgroundStars.init(),this.controls.init(),this}startGame(){return this.animFrame=requestAnimationFrame(this._render.bind(this)),this}resetGame(){return this.interval&&clearInterval(this.interval),this.animationInterval&&clearInterval(this.animationInterval),this.explosion.reset(),this.controls.reset(),this}turnLeft(){this.spaceShip.isAllowedToTurn()&&(this._turn(1.5),this.spaceShip.turnLeft())}turnRight(){this.spaceShip.isAllowedToTurn()&&(this._turn(-1.5),this.spaceShip.turnRight())}_turn(t){const e=Date.now();this.animationInterval&&(clearInterval(this.animationInterval),this.spaceShip.turnEnd()),this.animationInterval=setInterval(()=>{Date.now()-e>=a.a.spaceship.turn.duration&&(clearInterval(this.animationInterval),this.spaceShip.turnEnd()),this.gravity.moveObjects(t)},a.a.fps)}_setSpaceDimensions(){this.canvas.width=this.windowWidth,this.canvas.height=this.windowHeight}_render(){const t=this.spaceShip.getSpeed();this.gameIsOver?this._gameOver():(this._setDistance(),this._clearCanvas(),this.updateScore(),this.equipment.eventuallyAdd(this.traveledDistance),this.gravity.calcGravityImpact(),this.backgroundStars.render(t),this.spaceShip.render(),this.equipment.render(t),this.planets.forEach(e=>e.render(t)),this.path.render(),this.collisionDetection.checkObjectCollision(this.planets,this.spaceShip)&&(this.gameIsOver=!0),requestAnimationFrame(this._render.bind(this)))}_setDistance(){this.traveledDistance+=this.spaceShip.getSpeed()}updateScore(){this.spaceShip.burstOn?this.score.updateScore(2*this.traveledDistance):this.score.updateScore(this.traveledDistance/2)}_addEarth(){const t=new f(this.ctx,this.planets);this.planets.push(t),this.maxPlanets--}_addMoon(){const t=new v(this.ctx,this.planets);this.planets.push(t),this.maxPlanets--}_addPlanets(){for(;this.maxPlanets--;){const t=new p(this.ctx,this.planets);this.planets.push(t)}}_clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_gameOver(){cancelAnimationFrame(this.animFrame),this.explosion.render(this.spaceShip),document.body.classList.add("gameover"),document.body.classList.remove("game");const t=this.score.getScore();document.getElementById("end-score").innerHTML=t,this.record.checkNewRecord(t)&&(this.record.setRecord(t),document.getElementById("new-record").classList.add("show")),document.getElementById("record").innerHTML=this.record.getRecord()}}(new class{constructor(){this.space=(new V).init(),this.profile=new h,this.intro=this._isIntroSeen()}init(){this.intro?(document.getElementById("legend").classList.add("active"),this.profile.updateItem("intro",1)):document.getElementById("main-menu").classList.add("active"),document.getElementById("start").addEventListener("click",()=>{this.space.startGame(),document.body.classList.add("game")}),document.getElementById("restart").addEventListener("click",()=>{document.body.classList.remove("gameover"),document.body.classList.add("game"),this.space.resetGame(),this.space=(new V).init().startGame()}),document.getElementById("back-to-menu").addEventListener("click",()=>{window.location.reload()}),document.getElementById("reset-progress-menu").addEventListener("click",()=>{document.getElementById("reset-progress-menu").classList.add("hide"),document.getElementById("confirm-reset").classList.add("show")}),document.getElementById("no-reset").addEventListener("click",()=>{document.getElementById("confirm-reset").classList.remove("show"),document.getElementById("reset-progress-menu").classList.remove("hide")}),document.querySelectorAll(".nav").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.target;document.querySelectorAll(".menu").forEach(t=>t.classList.remove("active")),document.getElementById(e).classList.add("active")})}),document.getElementById("reset-progress").addEventListener("click",()=>{localStorage.removeItem("offlineChance"),localStorage.removeItem("offlineProfileData"),localStorage.removeItem("offlineMoney"),localStorage.removeItem("offlineRecord"),window.location.reload()}),this._updateDataInMenu(),this._updateEquipment(),this._cheatCode()}_isIntroSeen(){return!this.profile.getProgressOfItem("intro")}_updateDataInMenu(){document.getElementById("money").innerHTML=this.profile.getProgressOfItem("money"),document.getElementById("money-collected").innerHTML=this.profile.getProgressOfItem("money"),this.updateLevelAndPrice("chance"),this.updateLevelAndPrice("beam"),this.updateLevelAndPrice("fuel"),this.updateLevelAndPrice("plasma"),this.space.spaceShip.setStartingFuelLevel()}updateLevelAndPrice(t){document.getElementById(`${t}-lvl`).innerHTML=this.profile.getProgressOfItem(t),document.getElementById(`${t}-price`).innerHTML=parseInt(2*this.profile.getProgressOfItem(t))}_updateEquipment(){document.querySelectorAll(".update-equipment").forEach(t=>{t.addEventListener("click",()=>{const e=t.querySelector(".price").innerHTML,i=t.dataset.update,s=this.profile.getProgressOfItem(i);this._isEnoughMoneyToUpdate(e)&&s<=10&&(this.profile.updateItem(i,1),this.profile.updateItem("money",-1*parseInt(e)),this._updateDataInMenu())})})}_isEnoughMoneyToUpdate(t){return parseInt(this.profile.getProgressOfItem("money"))>=t}_cheatCode(){let t,e=0,i=this;document.getElementById("i-money").addEventListener("click",s=>{clearTimeout(t),e++,t=setTimeout(()=>{3==e&&i._tripleClick(),e=0},350)})}_tripleClick(){this.profile.updateItem("money",10),this._updateDataInMenu()}}).init()}]);</script></body></html>