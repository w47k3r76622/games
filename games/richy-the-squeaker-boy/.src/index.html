<html><head><style type="text/css">body{align-items:center;background-color:#000;display:flex;font-family:Hobo Std;justify-content:center;overflow:hidden}.text{font-size:30px;height:100%;margin-top:30px;width:100%}.talker{font-weight:700}.line{margin:20px auto 0;width:60%}#g{display:none}canvas{background-color:#000;cursor:none;height:144vmin;position:relative;width:144vmin}button{background:none;border:none;font-size:30px;transition:all .2s ease-in-out}#restart,button{color:#fff;cursor:pointer}#restart{background:#2ecc71;border:0;border-bottom:2px solid #28be68;box-shadow:inset 0 -2px #28be68;display:none;font-size:22px;height:60px;left:50%;margin:0 auto;padding:0;position:absolute;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.25);top:50%;width:200px}button:focus{outline:none}button:active,button:hover{transform:scale(1.5) perspective(1px)}.g-i{left:0;position:absolute;top:20;width:100%;z-index:999}.c{align-items:flex-start;justify-content:space-between;margin:0 40px}.bar,.c{display:flex}.bar{align-content:center;color:#fff;justify-content:left;margin-bottom:20px;width:100px}.bar div{align-self:center;font-weight:700;margin-left:10px}.hidden{display:none}</style></head><body><div id="g"><div class="g-i"><div class="c"><div class="h"><div class="bar">Torch:<div id="tv">0%</div></div><div class="bar">Count down:<div id="cv">00:00:00</div></div><div class="bar hidden" id="r">Running:<div id="rv">00</div></div></div></div></div><canvas width="1500" height="1500"></canvas></div><div class="text"></div><button id="restart">RESTART</button><script type="text/javascript">!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8)}([function(t){t.exports={idle:[0,1],right:[2,3],left:[4,5],down:[6,7],up:[8,9]}},function(t){t.exports=[{talker:"Mom",text:"Richy come here, is time to dinner!!!",color:"#a21c2f"},{talker:"Richy",text:"I can't!!!",color:"#1ea21c"},{talker:"Richy",text:"...I'm playing Fortnite!",color:"#1ea21c"},{talker:"Mom",text:"I will turn you offline if you don't come right now!",color:"#a21c2f"},{talker:"Storyteller",text:"Tsss... Suddenly the game stops, and... an offline popup shows up on the computer screen.",color:"#d6d13e"},{talker:"Richy",text:"AAAA, what the f%&%$ I will kill my mom, AHHHH!!!",color:"#1ea21c"},{talker:"Storyteller",text:"Hurry up, help Richy connect the router again!, Go down the stairs and on level 3 find the router and turn it ON, before is to late!",color:"#d6d13e"}]},function(t){t.exports=[{talker:"Mom",text:"<Spanish> Se acab√≥ la boberia!",color:"#a21c2f"},{talker:"Mom",text:"Go to eat before I slap you with the flip flops",color:"#a21c2f"},{talker:"Richy",text:"But mom, my game!!!!",color:"#1ea21c"},{talker:"Mom",text:"<Spanish> Ni mama ni momo, te voy a prohibir los jueguitos",color:"#a21c2f"},{talker:"Storyteller",text:"To bad Richy the squeaker boy lose his ranked game :(",color:"#d6d13e"}]},function(t){t.exports=[{talker:"Storyteller",text:"Richy has arrived to the living room on time, he just turn on the router and is waiting for the green light...",color:"#d6d13e"},{talker:"Richy",text:"Come on, come on go online, come on...",color:"#1ea21c"},{talker:"Storyteller",text:"The router turn on his green light, now Richy is good to go.",color:"#d6d13e"},{talker:"Richy",text:"I have to go back before the game ends.",color:"#1ea21c"},{talker:"Storyteller",text:"Richy runs to his desktop, click on restart the connection, and... voila the game is on again.",color:"#d6d13e"},{talker:"Richy",text:"Yay, lets win this noobs...",color:"#1ea21c"},{talker:"END",text:"You just won!. Developer:Javier Blanco. Art: Victor Boza",color:"#d6d13e"}]},function(t,e,i){},,function(t,e,i){t.exports=i.p+"d77a5c6e3245b7dc53be2b416731b385.png"},function(t,e,i){t.exports=i.p+"09b8edc780a18533cc3532f519a9e380.png"},function(t,e,i){"use strict";i.r(e);i(4);var s=new class{constructor(){this.pressed={},this.LEFT=37,this.UP=38,this.RIGHT=39,this.DOWN=40}isDown(t){return this.pressed[t]}onKeydown(t){this.pressed[t.keyCode]=!0}onKeyup(t){delete this.pressed[t.keyCode]}};class o{constructor(t,e,i,s,o=32,n=32){this.posX=e,this.posY=i,this.width=o,this.height=n,this.speedX=0,this.speedY=0,this.speed=s,this.sprites=t,this.actualSprite=this.sprites.idle,this.initialSpeed=s,this.conditions=[]}activateCondition(t,e,i,s){this.conditions.some(e=>e.name=t)||(this.conditions.push({name:t,duration:s,startedAt:Date.now()}),e(this),setTimeout(()=>{i(this);const e=this.conditions.findIndex(e=>e.name===t);this.conditions.splice(e,1)},s))}update(){s.isDown(s.UP)&&this.moveUp(),s.isDown(s.LEFT)&&this.moveLeft(),s.isDown(s.DOWN)&&this.moveDown(),s.isDown(s.RIGHT)&&this.moveRight(),s.isDown(s.UP)||s.isDown(s.LEFT)||s.isDown(s.DOWN)||s.isDown(s.RIGHT)||this.setIdle()}setIdle(){this.speedY=0,this.speedX=0,this.actualSprite=this.sprites.idle}moveUp(){this.speedX=0,this.speedY=+this.speed,this.actualSprite=this.sprites.up}moveLeft(){this.speedY=0,this.speedX=+this.speed,this.actualSprite=this.sprites.left}moveDown(){this.speedX=0,this.speedY=-this.speed,this.actualSprite=this.sprites.down}moveRight(){this.speedY=0,this.speedX=-this.speed,this.actualSprite=this.sprites.right}}const n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame,a="##",r="#";function h(t,e,i,s,o=!1,n){const l=0|e[e.length-1][0],c=0|e[e.length-1][1],d=[[1,0],[-1,0],[0,1],[0,-1]],p=[];for(let e=0;e<d.length;e++)void 0!=t[2*(d[e][1]+c)]&&t[2*(d[e][1]+c)][2*(d[e][0]+l)]===a&&p.push(d[e]);if(0===p.length)return e.pop(),e.length>0?h(t,e,i,s,o,n):t;const m=p[i()*p.length|0];if(e.push([m[0]+l,m[1]+c]),!o&&l+c>t.length/2)o=!0,t[2*(m[1]+c)][2*(m[0]+l)]=n?"O":"W",t[m[1]+2*c][m[0]+2*l]=r;else if(s.length>0){let e=function(t,e){const i=e[Math.round(t()*e.length)],s=1*t();return i&&i.available>0&&s<i.rate?(i.available-=1,i):null}(i,s);e?(t[2*(m[1]+c)][2*(m[0]+l)]=e.symbol,t[m[1]+2*c][m[0]+2*l]=r):(t[2*(m[1]+c)][2*(m[0]+l)]=r,t[m[1]+2*c][m[0]+2*l]=r)}else t[2*(m[1]+c)][2*(m[0]+l)]=r,t[m[1]+2*c][m[0]+2*l]=r;return h(t,e,i,s,o,n)}class l{constructor(t,e,i,s,o,{fps:n=50}={}){return this.hero=t,this.objects=[],this.canvas=e,this.map={cells:[]},this.sprites=i,this.camera={x:0,y:0,width:200,height:200},this.isFinalLv=o,this.config={fps:n},this.lastTimestamp=0,this.levelStatus=s,this.animationTimer=20,this.animationIndex=0,this.animationFrame,this}generateMap(t=10,e=10,i=1e5*Math.random()|0,s=64){this.map.x=e/2|0,this.map.y=t/2|0,this.map.width=t*s*2-s/2,this.map.height=e*s*2-s/2,this.map.tileSize=s;const o=[[this.map.x,this.map.y]];for(let i=0;i<2*e;i++){this.map.cells[i]=[];for(let e=0;e<2*t;e++)this.map.cells[i][e]=a}return this.map.cells[2*this.map.y][2*this.map.x]=r,h(this.map.cells,o,function(t){void 0===t&&(t=performance.now());return function(){return(t=(9301*t+49297)%233280)/233280}}(i),this.objects,!1,this.isFinalLv),function(t,e){t.unshift(Array(e).fill(a)),t.push(Array(e).fill(a)),t.map(t=>{t.unshift(a),t.push(a)}),t[1][1]="E"}(this.map.cells,2*t),this.map}addObject({symbol:t,sprite:e,rate:i=.7,available:s=1,size:o=32,action:n,activationKey:a,forever:r,move:h=!0}={}){const l={symbol:t,sprite:e,rate:i,available:s,action:n,activationKey:a,size:o,forever:r,move:h};this.objects.push(l)}drawVisibleSpace(t){const e=-this.hero.posX+1.5*this.hero.width,i=-this.hero.posY+1.5*this.hero.height,s=this.levelStatus.torch||100,o=t.createRadialGradient(e,i,s,e,i,0);o.addColorStop(0,"black"),o.addColorStop(1,"transparent"),t.fillStyle=o,t.fillRect(-this.camera.x,-this.camera.y,this.canvas.width,this.canvas.height)}drawHero(t,e){t.drawImage(this.hero.sprites.img,this.hero.actualSprite[e]*this.hero.width,0,this.hero.width,this.hero.height,-Math.floor(this.hero.posX-this.hero.width),-Math.floor(this.hero.posY-this.hero.height),this.hero.width,this.hero.height)}draw(){const t=this.canvas.getContext("2d"),e=this.map.tileSize;t.clearRect(0,0,this.canvas.width,this.canvas.height),t.setTransform(2,0,0,2,0,0),t.save(),t.translate(this.camera.x,this.camera.y),t.fillRect(-this.camera.x,-this.camera.y,this.canvas.width,this.canvas.height);for(let i=0;i<this.map.cells.length;i++)for(let s=0;s<this.map.cells[i].length;s++){let o;if(t.clearRect(i*e,s*e,e,e),t.fillStyle="rgba(0,0,0,0)",o=this.map.cells[s][i]===a?this.sprites[a]:this.sprites[r],t.drawImage(o.sprite,o.srcX,o.srcY,e,e,i*e,s*e,e,e),this.map.cells[s][i]!==a&&this.map.cells[s][i]!==r){const o=this.objects.find(t=>t.symbol===this.map.cells[s][i]);if(o){let n=0;o.move&&(n=this.animationIndex>0?2:-2);const a=o.sprite.animation[this.animationIndex]||o.sprite.animation[0];t.drawImage(o.sprite.img,a*o.size+1.2,0,o.size,o.size,i*e+o.size/2,s*e+o.size/2+n,o.size,o.size)}}}this.drawHero(t,this.animationIndex),this.drawVisibleSpace(t),t.restore(),0===this.animationTimer?(1===this.animationIndex?this.animationIndex=0:this.animationIndex+=1,this.animationTimer=20):this.animationTimer-=1}triggerObjectAction(t,e,i){if(t!==a&&t!==r){const s=this.objects.find(e=>e.symbol===t);s&&"function"==typeof s.action&&(s.forever||(this.map.cells[e][i]=r),s.action(this.hero,this.levelStatus,this.map.cells,e,i))}}checkCollisions(t,e){const i=Math.abs(Math.floor(t/this.map.tileSize)),s=Math.abs(Math.floor(e/this.map.tileSize)),o=Math.abs(Math.floor((t+this.hero.width-3)/this.map.tileSize)),n=Math.abs(Math.floor((e+this.hero.height-5)/this.map.tileSize));return this.triggerObjectAction(this.map.cells[s][i],s,i),this.triggerObjectAction(this.map.cells[n][i],n,i),this.triggerObjectAction(this.map.cells[s][o],s,o),this.triggerObjectAction(this.map.cells[n][o],n,o),this.map.cells[s][i]===a||this.map.cells[n][i]===a||this.map.cells[s][o]===a||this.map.cells[n][o]===a}gameLoop(){const t=Date.now(),e=t-this.lastTimestamp;if(this.animationFrame=n(this.gameLoop.bind(this)),e>1e3/this.config.fps){if(this.hero.update(),this.levelStatus.update(this.hero),0!==this.hero.speedX||0!==this.hero.speedY){this.lastTimestamp=t-e%(1e3/this.config.fps);let i=0,s=0;i=this.hero.posX>0?0:this.hero.posX<-this.map.width?-this.map.width:this.hero.posX+this.hero.speedX,s=this.hero.posY>0?0:this.hero.posY<-this.map.height?-this.map.height:this.hero.posY+this.hero.speedY,this.hero.speed<this.hero.initialSpeed&&(this.hero.speed=this.hero.initialSpeed),this.checkCollisions(i,s)||(this.hero.posX=i,this.hero.posY=s)}this.camera.x=this.hero.posX+1.5*this.camera.width,this.camera.y=this.hero.posY+this.camera.height,this.draw()}}}class c{constructor(t,e,i){this.initialTorchVal=t,this.torch=t,this.torchDecreaseRate=e,this.life=i,this.torchVal=document.getElementById("tv"),this.counterVal=document.getElementById("cv"),this.runVal=document.getElementById("rv"),this.runDiv=document.getElementById("r")}update(t){this.torch>100&&(this.torch=this.torch-this.torchDecreaseRate,this.torchVal.innerHTML=`${Math.round(this.torch/this.initialTorchVal*100)}%`);const e=t.conditions.find(t=>"speedUp"===t.name);if(e){const t=Date.now();this.runDiv.style.display="flex",this.runVal.innerHTML=Math.round(Math.abs(t-e.startedAt-e.duration)/60)}else this.runDiv.style.display="none"}}var d=i(0);function p(t){return s.onKeyup(t)}function m(t){return s.onKeydown(t)}class u{constructor(t=25,e,s,n=1,a=!1){const r=this.getStatusByDificulty(n),h=new Image;h.src=i(6);const c=new o({...d,img:h},-60,-40,5),{pathSprite:p,wallSprite:m}=this.getEnvironment(s);this.labyrinth=new l(c,e,{"#":p,"##":m},r,a),this.getLevelObjects(n,h).forEach(t=>this.labyrinth.addObject(t)),this.labyrinth.generateMap(t,t)}getStatusByDificulty(t){return new c(250-10*t,.01*t,100-3*t)}getLevelObjects(t,e){const i=this;return[{symbol:"O",available:0,sprite:{img:e,animation:[15]},rate:0,action(t){i.endLevel.bind(i)()}},{move:!1,symbol:"W",available:0,sprite:{img:e,animation:[14]},rate:0,action(t){i.endLevel.bind(i)()}},{symbol:"R",available:30,sprite:{img:e,animation:[12]},rate:.3,action(t){t.activateCondition("speedUp",t=>{t.speed=t.speed+10},e=>{t.speed=t.speed-10},6e3)}},{move:!1,symbol:"S",available:40,sprite:{img:e,animation:[13]},rate:.3,forever:!0,action(t){t.conditions.some(t=>"speedUp"===t.name)||(t.speed=Math.abs(t.speed-2))}},{move:!1,symbol:"E",available:0,sprite:{img:e,animation:[14]},forever:!0,rate:0,action(t){}},{symbol:"T",available:100,sprite:{img:e,animation:[10,11]},rate:.3,action(e,i){i.torch+=14*t}}]}getEnvironment(t){const e={wallSprite:{},pathSprite:{}};let s;return(s=new Image).src=i(7),e.wallSprite={sprite:s,srcX:0,srcY:0},e.pathSprite={sprite:s,srcX:64,srcY:0},e}startLevel(t){window.addEventListener("keyup",p,!1),window.addEventListener("keydown",m,!1),this.animationId=requestAnimationFrame(this.labyrinth.gameLoop.bind(this.labyrinth)),this.onEndLevel=t}endLevel(t){cancelAnimationFrame(this.animationId),cancelAnimationFrame(this.labyrinth.animationFrame),window.removeEventListener("keyup",p),window.removeEventListener("keydown",m),this.onEndLevel(t,this.levelStatus)}}class y{constructor(t,e,i,s=3){this.levelIndex=1,this.canvas=e,this.display=i,this.gameDiv=t,this.maxLv=s}startTimmer(t,e){let i,s;this.timer=t;const o=setInterval(()=>{i=parseInt(this.timer/60,10),s=parseInt(this.timer%60,10),i=i<10?"0"+i:i,s=s<10?"0"+s:s,e.textContent=i+":"+s,--this.timer<0&&(clearInterval(o),this.gameOver())},1e3)}onEndLevel(t){t?this.onGameOver():this.levelIndex<this.maxLv?(this.levelIndex+=1,this.level=new u(9*this.levelIndex,this.canvas,"dungeon",6+this.levelIndex+1,this.levelIndex===this.maxLv),this.level.startLevel(this.onEndLevel.bind(this))):this.onWin(this.timer,this.duration)}gameOver(){this.level.endLevel(!0)}startGame(t,e){this.duration=900,this.gameDiv.style.display="block",this.level=new u(10,this.canvas,"dungeon",3),this.startTimmer(this.duration,this.display),this.level.startLevel(this.onEndLevel.bind(this)),this.onWin=t,this.onGameOver=e}}const v=(t,e)=>{let i,s,o=0;const n=(t,e)=>{o===i&&e.loop&&(o=0),setTimeout(()=>{a(t[o],e)},e.startDelay)},a=(e,i)=>{let s=0,o=e.length,n=setInterval(()=>{if(i.placeholder?t.placeholder+=e[s]:t.textContent+=e[s],++s===o)return r(n,i)},i.typeSpeed)},r=(t,e)=>(clearInterval(t),e.disableBackTyping&&o===i-1?e.onFinished():e.loop||o!==i-1?void setTimeout(()=>h(e),e.backDelay):e.onFinished()),h=e=>{let i=e.placeholder?t.placeholder:t.textContent,s=i.length,o=setInterval(()=>{if(e.placeholder?t.placeholder=t.placeholder.substr(0,--s):t.textContent=i.substr(0,--s),0===s)return l(o,e)},e.backSpeed)},l=(t,e)=>{clearInterval(t),++o,n(s,e)};return(e=>{let o=(({strings:t=["Put your strings here...","and Enjoy!"],typeSpeed:e=100,backSpeed:i=50,backDelay:s=500,startDelay:o=500,cursorChar:n="|",placeholder:a=!1,showCursor:r=!0,disableBackTyping:h=!1,onFinished:l=function(){},loop:c=!0})=>({strings:t,typeSpeed:e,backSpeed:i,cursorChar:n,backDelay:s,placeholder:a,startDelay:o,showCursor:r,loop:c,disableBackTyping:h,onFinished:l}))(e||{}),a=o.strings;s=a,i=a.length,"string"==typeof t&&(t=document.querySelector(t)),o.showCursor&&((t,e)=>{let i=document.createElement("span");i.classList.add("ityped-cursor"),i.textContent="|",i.textContent=e.cursorChar,t.insertAdjacentElement("afterend",i)})(t,o),n(a,o)})(e)};class f{constructor(t=2e3){this.conversationDelay=t}writeLine(t,e,i){const{line:s,txtSpan:o}=function(t,e){const i=document.createElement("div");i.className="line",i.style.color=e;const s=document.createElement("span");s.className="text";const o=document.createElement("span");return o.className="talker",o.innerHTML=`${t}:  `,i.appendChild(o),i.appendChild(s),{line:i,txtSpan:s}}(t.talker,t.color);e.appendChild(s),v(o,{showCursor:!0,disableBackTyping:!0,showCursor:!1,typeSpeed:50,strings:[t.text],startDelay:this.conversationDelay,onFinished:()=>{this.index+=1,this.index<this.script.length?this.writeLine(this.script[this.index],e,i):setTimeout(()=>{i()},4e3)}})}startConversation(t,e,i){e.innerHTML="",this.script=t,this.index=0,this.writeLine(this.script[this.index],e,i)}}var g=i(1),b=i(2),w=i(3);const x=document.querySelector("#cv"),S=document.querySelector("#restart"),k=document.querySelector("#g"),I=document.getElementsByTagName("canvas")[0],L=document.querySelector(".text");function D(){L.style.display="none",S.style.display="none",new y(k,I,x).startGame(C,T)}function T(){k.style.display="none";const t=new f(2e3);L.style.display="block",t.startConversation(b,L,()=>{S.style.display="block",S.onclick=D})}function C(t,e){k.style.display="none";const i=new f(2e3);L.style.display="block",i.startConversation(w,L,()=>{})}L.style.display="block",new f(2e3).startConversation(g,L,()=>{D()})}]);</script></body></html>