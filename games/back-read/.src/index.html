<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Back Read</title><style>.background1{background:radial-gradient(circle,#bed678 0,#3b8d89 100%)}.background2{background:linear-gradient(-45deg,transparent 25%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 50%,transparent 0,transparent 75%,hsla(0,0%,100%,.2) 0),linear-gradient(45deg,transparent 25%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 50%,transparent 0,transparent 75%,hsla(0,0%,100%,.2) 0),#a6d9ee;background-size:20em 20em}.background3{background:repeating-linear-gradient(45deg,transparent 5px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 10px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 35px,rgba(111,211,151,.15) 0,rgba(168,211,111,.15) 40px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 50px,rgba(10,35,45,0) 0,rgba(10,35,45,0) 60px,rgba(111,211,211,.15) 0,rgba(111,137,211,.15) 70px,rgba(247,242,84,.15) 0,rgba(84,247,209,.15) 80px,rgba(247,179,84,0) 0,rgba(247,179,84,0) 90px,rgba(135,111,211,.15) 0,rgba(111,165,211,.15) 110px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 120px,rgba(10,45,35,.15) 0,rgba(19,10,45,.15) 140px),repeating-linear-gradient(135deg,transparent 5px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 10px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 35px,rgba(211,111,185,.15) 0,rgba(111,174,211,.15) 40px,rgba(10,22,45,.15) 0,rgba(10,18,45,.15) 50px,rgba(10,35,45,0) 0,rgba(10,35,45,0) 60px,rgba(111,160,211,.15) 0,rgba(126,111,211,.15) 70px,rgba(247,212,84,.15) 0,rgba(247,179,84,.15) 80px,rgba(247,179,84,0) 0,rgba(247,179,84,0) 90px,rgba(111,211,197,.15) 0,rgba(111,211,179,.15) 110px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 140px,rgba(10,45,32,.15) 0,rgba(17,10,45,.15) 160px),#a6eed0}.background4{background:linear-gradient(45deg,rgba(0,0,0,.1) 25%,transparent 0,transparent 75%,rgba(0,0,0,.1) 0,rgba(0,0,0,.0980392) 0),linear-gradient(45deg,rgba(0,0,0,.1) 25%,transparent 0,transparent 75%,rgba(0,0,0,.1) 0,rgba(0,0,0,.1) 0),#a6e7ee;background-position:0 0,40px 40px;background-size:80px 80px}.speaker{vertical-align:middle;box-sizing:border-box;display:inline-block;background:currentColor;background-clip:content-box;width:1em;height:1em;border:.333em solid transparent;border-right-color:initial;position:relative;left:-.337em}.speaker.on:after,.speaker.on:before{content:"";background:currentColor;width:.1em;position:absolute}.speaker.on:before{height:.333em;right:-.533em}.speaker.on:after{height:.667em;right:-.733em;top:-50%}.speaker.off:after,.speaker.off:before{content:"";background:currentColor;width:.1em;position:absolute;height:1.2em;margin-top:-.333em;top:-.1em;left:.1em;transform:translateX(.333em) rotate(-45deg)}.speaker.off:before{background:#04233d;left:.2em}.css-clock{width:18px;height:18px;border-radius:50%;background-color:#fff;position:relative;display:block}.css-clock:before{height:9px;left:9px;top:3px}.css-clock:after,.css-clock:before{content:"";width:1px;background-color:#636363;display:block;position:absolute;opacity:.6}.css-clock:after{height:6px;top:7px;left:11px;transform:rotate(45deg)}*{box-sizing:border-box;-webkit-user-select:none;user-select:none}body,html{height:100%}body{margin:0;overflow:hidden;font-family:sans-serif}.button,.speaker,a,button{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB77zEsqgBu7RFf3QNU2QBGuwAopgAfngCH9UeF+zh/9DNs6g9k4QZf3gQ7sQCK/j6H/DxKwgAinwCV/1Z49hpQvhRp5wto5wti5QIipACK+k2R/0By8BRZ3ABRyAA/tQBDtAAbnwC9d09BAAAAFHRSTlMABTMCFn0QHgqbgGZbLiCOjHRDHCnm7AYAAACqSURBVDjL7dLJEoIwDIBhFltkdaOtUBWUHcHd938149k2d2f4r/kOmUmMB6WmbSBVVThDRXV9WqhIiv0JFUl5QAWAGBdJEeMCAIjypRVds4MuTacT47D9dh/eGsG4OEIiz0a1ACDyPuP81jIQvyDNRH6WUtZ1ynxHCWDuLjxCyCpQAt5L11tbUBhRBWBt7RJrQ+eQqVwyXRL0WFHg4+emjoM/jAnZxtQ/9AFcVA7F82ZJgQAAAABJRU5ErkJggg=="),auto}.header{overflow:hidden;background-color:rgba(0,0,0,.3);width:100%;color:#fff;padding:14px 16px;text-align:center;display:grid;grid-template-columns:auto 1fr auto}.scene{height:100%;margin:0 10px}.scene.inactive{display:none}.container{height:100%;display:grid;grid-template-rows:auto 1fr;align-items:center;cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA7VBMVEUAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEDe9fDC4/zX8fG11+6y0e15mbXq///u//652vSu1PKrwr6etrRzj6294v7m/P3C4Pvh9/e92vfk+va30vOw1PK12O+nvr19nrikurZ4krVvj6tshqr////0///O7v/G5P/D2/7h/Py+1/zl/vvs//q+3Pqz2ffa9fba8fG01PDC1cy9z8i6zMS0yMR8n76Do7yhvLusv7qCo7l2jbSnvbJ6lrJxiK5viaoSVG2nAAAAF3RSTlMABDIHFn8QHguae2ZbNSwgnI6MdEMcCRKrcsoAAADDSURBVDjL7dLHFoJADEBRGGXA3hUEKaJURbH33tv/f46wH7L3HF+WubuE2mMcoymgwzEbB8VpeEOg0EZyDxSabDdA0W3UzEUzFJFA2JptQFzbgiBsZtFCk2tB9vIZJc4tV3VVdd2SIsSdr9c7wSi8RxYeL4qKZRj8ZHxBcQKQVuJO8X1d1yUpxRLAyxKdT77AMEyylCaB/twZJJhyBiGUzWESmAb7TAVzHFeN0QTweBeT4LFy6RR8bsyy8MPQYdS/X+gLp8ATaP9llugAAAAASUVORK5CYII="),auto}@media screen and (min-width:376px) and (min-height:700px){body{background-color:#f8f8ff}.container{width:376px;height:700px;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0;border-color:#000;border-style:solid;border-width:60px 16px;border-radius:36px}.container:before{width:60px;height:5px;top:-30px;border-radius:10px}.container:after,.container:before{content:"";display:block;position:absolute;left:50%;transform:translate(-50%,-50%);background:#333}.container:after{width:35px;height:35px;bottom:-65px;border-radius:50%}}div[data-scene=About],div[data-scene=GameOver],div[data-scene=Tutorial]{display:grid;grid-template-columns:auto;align-items:center}div[data-scene=About] div.colored,div[data-scene=GameOver] div.colored,div[data-scene=Tutorial] div.colored{border-radius:.2em;border:2px solid #000;line-height:16px;color:#fff;background:rgba(33,107,175,.8);padding:10px;text-align:center}div[data-scene=About] div.colored:nth-child(2n+0),div[data-scene=GameOver] div.colored:nth-child(2n+0),div[data-scene=Tutorial] div.colored:nth-child(2n+0){background:rgba(228,152,0,.8)}div[data-scene=About] div.colored:nth-child(3n+0),div[data-scene=GameOver] div.colored:nth-child(3n+0),div[data-scene=Tutorial] div.colored:nth-child(3n+0){background:rgba(82,156,79,.8)}div[data-scene=About] a,div[data-scene=GameOver] a,div[data-scene=Tutorial] a{background-color:#f90;color:#fff;padding:2px 4px;text-decoration:none;border-radius:2px;border:1px solid #000}div[data-scene=About] a:hover,div[data-scene=GameOver] a:hover,div[data-scene=Tutorial] a:hover{background-color:#c16e00}div[data-scene=Menu]{display:grid;grid-template-columns:auto 1fr auto;align-items:center;margin:0}div[data-scene=Menu] .perspective{position:relative;width:210px;height:140px;margin:0 auto;perspective:1000px}div[data-scene=Menu] .perspective .menu-carousel{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:transform 1s}div[data-scene=Menu] .perspective .menu-carousel .menu-option{position:absolute;width:190px;height:120px;left:10px;top:10px;border-radius:.2em;border:2px solid #000;line-height:116px;font-size:30px;font-weight:700;color:#fff;text-align:center}div[data-scene=Menu] .perspective .menu-carousel .menu-option:hover div{transform:rotateY(0deg)}div[data-scene=Menu] .perspective .menu-carousel .menu-option div{transform:rotateY(180deg);transition:.5s}div[data-scene=Menu] .perspective .menu-carousel .menu-option:first-child{background:rgba(82,156,79,.95);transform:rotateY(0deg) translateZ(60px)}div[data-scene=Menu] .perspective .menu-carousel .menu-option:nth-child(2){background:rgba(33,175,154,.95);transform:rotateY(120deg) translateZ(60px)}div[data-scene=Menu] .perspective .menu-carousel .menu-option:nth-child(3){background:rgba(228,152,0,.95);transform:rotateY(240deg) translateZ(60px)}div[data-scene=Menu] .next,div[data-scene=Menu] .previous{display:inline-block;padding:6px 17px;margin:0 10px;background-color:hsla(0,0%,100%,.36);color:#0d74b6;border-radius:50%;font-size:25px}div[data-scene=Menu] .next:hover,div[data-scene=Menu] .previous:hover{background-color:#a6d9ee}div[data-scene=GamePlay]{display:grid;grid-template-rows:repeat(6,1fr);align-items:center;text-align:center}div[data-scene=GamePlay] .sentence{font-size:30px;transform:rotateY(180deg);text-transform:uppercase;border-radius:.2em;border:2px solid #000;line-height:45px;font-weight:700;color:#fff;background:rgba(82,156,79,.9)}div[data-scene=GamePlay] .question{font-size:18px;border-radius:.2em;border:2px solid #000;line-height:38px;color:#fff;background:rgba(167,83,113,.8)}div[data-scene=GamePlay] .status{display:grid;grid-template-columns:repeat(2,1fr);align-items:center}div[data-scene=GamePlay] .status>div{padding:5px;border-radius:.2em;border:2px solid #000;color:#fff;background:rgba(113,65,173,.75);margin:0 10px}.back-to-menu,div[data-scene=GamePlay] .answer{display:inline-block;box-sizing:initial;margin:.5em;padding:0 1.5em;border:2px solid rgba(8,19,19,.8);border-radius:.2em;font:normal normal 700 1em/2em Arial,Helvetica,sans-serif;color:#fff;text-overflow:clip;white-space:nowrap;background:rgba(103,192,185,.9);box-shadow:0 0 1px 1px rgba(50,126,129,.8),0 1px 0 0 rgba(0,0,0,.3);transition:all .2s ease-in-out 10ms}.back-to-menu:hover,div[data-scene=GamePlay] .answer:hover{border:2px solid rgba(11,10,22,.9);box-shadow:inset 0 0 1px 1px rgba(10,11,14,.8),0 1px 0 0 rgba(0,0,0,.3)}.back-to-menu:active,div[data-scene=GamePlay] .answer:active{position:relative;top:1px;border:2px solid #030707;color:#e9e9e9;background:#52a19a;box-shadow:inset 0 0 1px 1px rgba(56,56,56,.8),inset 0 1px 0 0 rgba(0,0,0,.3);transition:none}.current-streak,.longest-streak{font-size:large;font-weight:700}</style></head><body> <div class="container background1"> <div class="header"> <div class="left"><i class="speaker on"></i></div> <div class="center"></div> <div class="right"><i class="css-clock"></i></div> </div> <div data-scene="Menu" class="scene inactive"> <div> <div class="previous button">&#8249;</div> </div> <div> <div class="perspective"> <div class="menu-carousel"> <div class="menu-option button" data-option="GamePlay"> <div>START</div> </div> <div class="menu-option button" data-option="Tutorial"> <div>TUTORIAL</div> </div> <div class="menu-option button" data-option="About"> <div>ABOUT</div> </div> </div> </div> </div> <div> <div class="next button">&#8250;</div> </div> </div> <div data-scene="Tutorial" class="scene inactive"> <div class="colored"><strong>Game Tutorial</strong></div> <div class="colored"> <em>Back Read</em> is composed by multiple-choice questions. </div> <div class="colored"> Read the reverse-text on the board and answer the question. </div> <div class="colored"> Keep an eye on the clock, the game is over when timer reaches zero. </div> <div class="colored"> Answering a question correctly gives you 5 seconds more. </div> <div class="colored"> While answering wrongly penalizes you with 1 second less. </div> <div class="colored"> Pro Tip: The longer your streak, the harder the challenges get! </div> <div class="back-to-menu button">&#8249; Back To Menu</div> </div> <div data-scene="About" class="scene inactive"> <div class="colored"> Game developed for <a href="https://js13kgames.com" target="_blank">Js13kGames 2019</a> </div> <div class="colored"> Author: Felladrin &middot; <a href="https://github.com/felladrin" target="_blank">GitHub</a> &middot; <a href="https://www.linkedin.com/in/victornogueira" target="_blank">LinkedIn</a> </div> <div class="colored"> Source code available <a href="https://github.com/felladrin/js13k-2019" target="_blank">here</a> </div> <div class="back-to-menu button">&#8249; Back To Menu</div> </div> <div data-scene="GamePlay" class="scene inactive"> <div class="sentence"></div> <div class="question"></div> <div class="answer button" data-id="0"></div> <div class="answer button" data-id="1"></div> <div class="answer button" data-id="2"></div> <div class="answer button" data-id="3"></div> <div class="status"> <div> Current Streak <div class="current-streak">0</div> </div> <div> Longest Streak <div class="longest-streak">0</div> </div> </div> </div> <div data-scene="GameOver" class="scene inactive"> <div class="colored"><strong>Time's Over!</strong></div> <div class="colored">That was great! Check the stats!</div> <div class="colored"> Your streak in this round: <span class="current-streak">0</span> </div> <div class="colored"> Your longest streak: <span class="longest-streak">0</span> </div> <div class="colored"> Challenge your family and friends to see if they can do better! </div> <div class="back-to-menu button">&#8249; Back To Menu</div> </div> </div> <script>(function () {var h=function(){function t(){this.slots=[],this.onces=[]}return t.prototype.add=function(t){return"function"==typeof t&&this.slots.push(t),this},t.prototype.emit=function(t){this.notify(this.slots,t),this.notify(this.onces,t),this.onces=[]},t.prototype.notify=function(t,n){for(var o=t.length;o--;){var i=t[o];i.call(i,n||null)}},t}();var c=function(){function e(){}return e.sceneDisplayed=new h,e.audioMuteChanged=new h,e.gamePlayCountDownStarted=new h,e.gamePlayCountDownUpdated=new h,e.gamePlayCountDownStopped=new h,e.gamePlayCountDownTimeOver=new h,e.answeredCorrectly=new h,e.answeredWrongly=new h,e}();var p=function(){function t(){}return t.initialize=function(){var t=this;c.answeredCorrectly.add(function(){return t.addBonusTime(5)}),c.answeredWrongly.add(function(){return t.deductTime(1)})},t.addBonusTime=function(t){this.count+=t,c.gamePlayCountDownUpdated.emit(this.count)},t.deductTime=function(t){this.count-=t,c.gamePlayCountDownUpdated.emit(this.count),this.count<=0&&(this.stop(),c.gamePlayCountDownTimeOver.emit())},t.start=function(n){var e=this;this.count=n,this.intervalTimerId=setInterval(function(){e.handleTimeout()},t.ONE_SECOND),c.gamePlayCountDownStarted.emit(this.count)},t.stop=function(){clearInterval(this.intervalTimerId),c.gamePlayCountDownStopped.emit(this.count)},t.handleTimeout=function(){this.count--,c.gamePlayCountDownUpdated.emit(this.count),this.count<=0&&(this.stop(),c.gamePlayCountDownTimeOver.emit())},t.count=0,t.intervalTimerId=0,t.ONE_SECOND=1e3,t}();var x,a;(function(e){e.Menu="Menu",e.Tutorial="Tutorial",e.About="About",e.GamePlay="GamePlay",e.GameOver="GameOver"})(a||(x=a={},x));var b=function(){function e(){}return e.getScene=function(e){return document.querySelector("div[data-scene=\""+e+"\"]")},e.getAnswerButton=function(e){return document.querySelector(".answer[data-id=\""+e+"\"]")},e.setBackgroundId=function(e){for(var t=document.querySelector(".container").classList,n=1;n<5;n++)t.remove("background"+n);t.add("background"+e)},e.menuCarousel=document.querySelector(".menu-carousel"),e.previousButton=document.querySelector(".previous.button"),e.nextButton=document.querySelector(".next.button"),e.headerCenter=document.querySelector(".header .center"),e.headerRight=document.querySelector(".header .right"),e.speaker=document.querySelector(".speaker"),e.sentenceElement=document.querySelector(".sentence"),e.questionElement=document.querySelector(".question"),e.currentStreakElements=document.querySelectorAll(".current-streak"),e.longestStreakElements=document.querySelectorAll(".longest-streak"),e.answerButtons=document.querySelectorAll(".answer"),e.backToMenuButtons=document.querySelectorAll(".back-to-menu.button"),e.allButtons=document.querySelectorAll(".button"),e}();var A=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(this,t),this.start=e.start,this.end=e.end,this.decimal=e.decimal}return A(t,[{key:"getIntermediateValue",value:function(t){return this.decimal?t:Math.round(t)}},{key:"getFinalValue",value:function(){return this.end}}]),t}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,t),this.duration=e.duration||1e3,this.ease=e.easing||this._defaultEase,this.tweener=e.tweener||new C(e),this.start=this.tweener.start,this.end=this.tweener.end,this.frame=null,this.next=null,this.isRunning=!1,this.events={},this.direction=this.start<this.end?"up":"down"}return s(t,[{key:"begin",value:function(){return this.isRunning||this.next===this.end||(this.frame=window.requestAnimationFrame(this._tick.bind(this))),this}},{key:"stop",value:function(){return window.cancelAnimationFrame(this.frame),this.isRunning=!1,this.frame=null,this.timeStart=null,this.next=null,this}},{key:"on",value:function(t,e){return this.events[t]=this.events[t]||[],this.events[t].push(e),this}},{key:"_emit",value:function(t,e){var n=this,i=this.events[t];i&&i.forEach(function(t){return t.call(n,e)})}},{key:"_tick",value:function(t){this.isRunning=!0;var e=this.next||this.start;this.timeStart||(this.timeStart=t),this.timeElapsed=t-this.timeStart,this.next=this.ease(this.timeElapsed,this.start,this.end-this.start,this.duration),this._shouldTick(e)?(this._emit("tick",this.tweener.getIntermediateValue(this.next)),this.frame=window.requestAnimationFrame(this._tick.bind(this))):(this._emit("tick",this.tweener.getFinalValue()),this._emit("done",null))}},{key:"_shouldTick",value:function(t){return{up:this.next<this.end&&t<=this.next,down:this.next>this.end&&t>=this.next}[this.direction]}},{key:"_defaultEase",value:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}}]),t}();var m=function(){function e(){}return e.initialize=function(){e.displayScene(this.currentScene)},e.displayScene=function(e){var n=function(n){b.getScene(e).style.opacity=(n/100).toString()};new g({start:100,end:0,duration:500}).on("tick",n).on("done",function(){for(var t in a){var r=b.getScene(a[t]);e==t?r.classList.remove("inactive"):r.classList.add("inactive")}new g({start:0,end:100,duration:500}).on("tick",n).on("done",function(){c.sceneDisplayed.emit(e)}).begin()}).begin()},e.currentScene=a.Menu,e}();var z=function(){function e(){}return e.initialize=function(){var e=this;b.previousButton.addEventListener("click",function(){e.selectedIndex--,e.rotate()}),b.nextButton.addEventListener("click",function(){e.selectedIndex++,e.rotate()});for(var t=b.menuCarousel.children,n=function(e){var n=t[e];n.addEventListener("click",function(){m.displayScene(n.dataset.option)})},r=0;r<t.length;r++)n(r)},e.rotate=function(){var e=this.selectedIndex/this.cellCount*-360;b.menuCarousel.style.transform="rotateY("+e+"deg)"},e.cellCount=b.menuCarousel.children.length,e.selectedIndex=0,e}();var i="Back Read";var f=function(){function e(){}return e.initialize=function(){var e=this;b.speaker.addEventListener("click",function(){return e.toggleSound()}),c.gamePlayCountDownStarted.add(this.displayCountDown),c.gamePlayCountDownUpdated.add(this.displayCountDown),c.gamePlayCountDownStopped.add(this.displayClockIcon),c.gamePlayCountDownTimeOver.add(this.displayClockIcon)},e.changeInnerHTML=function(e){return new Promise(function(n){var t=function(e){b.headerCenter.style.opacity=(e/100).toString()};new g({start:100,end:0,duration:500}).on("tick",t).on("done",function(){b.headerCenter.innerHTML=e,new g({start:0,end:100,duration:500}).on("tick",t).on("done",n).begin()}).begin()})},e.displayCountDown=function(e){if(b.headerRight.innerHTML=e,!(e>5)){var n=function(e){b.headerRight.style.transform="scale("+e/100+")"};new g({start:100,end:200,duration:250}).on("tick",n).on("done",function(){new g({start:200,end:100,duration:250}).on("tick",n).begin()}).begin()}},e.displayClockIcon=function(){b.headerRight.innerHTML=e.clockIcon},e.isAudioDisabled=function(){return b.speaker.classList.contains("off")},e.toggleSound=function(){var e=b.speaker.classList;e.toggle("on"),e.toggle("off"),c.audioMuteChanged.emit(this.isAudioDisabled())},e.displayNotification=function(e){var n=this;this.changeInnerHTML("<em>"+e+"</em>").then(function(){n.changeInnerHTML(i).then()})},e.clockIcon=b.headerRight.innerHTML,e}();var F=function(){return function(t){var r=this;this.oscSin=function(t){return Math.sin(6.283184*t)},this.oscSaw=function(t){return t%1*2-1},this.oscSquare=function(t){return t%1<.5?1:-1},this.oscTri=function(t){var r=t%1*4;return r<2?r-1:3-r},this.mOscillators=[this.oscSin,this.oscSquare,this.oscSaw,this.oscTri],this.getNoteFreq=function(t){return .003959503758*Math.pow(2,(t-128)/12)},this.createNote=function(t,i,n){var o,e,s,a,u,m,h,c=r.mOscillators[t.i[0]],f=t.i[1],l=t.i[3],w=r.mOscillators[t.i[4]],S=t.i[5],v=t.i[8],M=t.i[9],d=t.i[10]*t.i[10]*4,g=t.i[11]*t.i[11]*4,p=t.i[12]*t.i[12]*4,x=1/p,N=n*Math.pow(2,2-t.i[14]),$=t.i[13],C=new Int32Array(d+g+p),y=0,B=0;for(o=0,e=0;o<d+g+p;o++,e++)e>=0&&($=$>>8|(255&$)<<4,e-=N,m=r.getNoteFreq(i+(15&$)+t.i[2]-128),h=r.getNoteFreq(i+(15&$)+t.i[6]-128)*(1+8e-4*t.i[7])),s=1,o<d?s=o/d:o>=d+g&&(s-=(o-d-g)*x),a=m,l&&(a*=s*s),u=c(y+=a)*f,a=h,v&&(a*=s*s),u+=w(B+=a)*S,M&&(u+=(2*Math.random()-1)*M),C[o]=80*u*s|0;return C},this.generate=function(){var t,i,n,o,e,s,a,u,m,h,c,f,l,w,S=new Int32Array(r.mNumWords),v=r.mSong.songData[r.mCurrentCol],M=r.mSong.rowLen,d=r.mSong.patternLen,g=0,p=0,x=!1,N=[];for(n=0;n<=r.mLastRow;++n)for(a=v.p[n],o=0;o<d;++o){var $=a?v.c[a-1].f[o]:0;$&&(v.i[$-1]=v.c[a-1].f[o+d]||0,$<16&&(N=[]));var C=r.mOscillators[v.i[15]],y=v.i[16]/512,B=Math.pow(2,v.i[17]-9)/M,L=v.i[18],W=v.i[19],q=43.23529*v.i[20]*3.141592/44100,A=1-v.i[21]/255,O=1e-5*v.i[22],P=v.i[23]/32,Q=v.i[24]/512,Y=6.283184*Math.pow(2,v.i[25]-9)/M,F=v.i[26]/255,I=v.i[27]*M&-2;for(c=(n*d+o)*M,e=0;e<4;++e)if(s=a?v.c[a-1].n[o+e*d]:0){N[s]||(N[s]=r.createNote(v,s,M));var R=N[s];for(i=0,t=2*c;i<R.length;i++,t+=2)S[t]+=R[i]}for(i=0;i<M;i++)(h=S[u=2*(c+i)])||x?(f=q,L&&(f*=C(B*u)*y+.5),p+=(f=1.5*Math.sin(f))*(l=A*(h-p)-(g+=f*p)),h=3==W?p:1==W?l:g,O&&(h=(h*=O)<1?h>-1?r.oscSin(.25*h):-1:1,h/=O),x=(h*=P)*h>1e-5,w=h*(1-(m=Math.sin(Y*u)*Q+.5)),h*=m):w=0,u>=I&&(w+=S[u-I+1]*F,h+=S[u-I]*F),S[u]=0|w,S[u+1]=0|h,r.mMixBuf[u]+=0|w,r.mMixBuf[u+1]+=0|h}return r.mCurrentCol++,r.mCurrentCol/r.mSong.numChannels},this.createWave=function(){var t=44+2*r.mNumWords-8,i=t-36,n=new Uint8Array(44+2*r.mNumWords);n.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]);for(var o=0,e=44;o<r.mNumWords;++o){var s=r.mMixBuf[o];s=s<-32767?-32767:s>32767?32767:s,n[e++]=255&s,n[e++]=s>>8&255}return n},this.mSong=t,this.mLastRow=t.endPattern,this.mCurrentCol=0,this.mNumWords=t.rowLen*t.patternLen*(this.mLastRow+1)*2,this.mMixBuf=new Int32Array(this.mNumWords)}}();var E=function(){function e(){}return e.create=function(e,a,r,o){void 0===a&&(a=1),void 0===r&&(r=!1),void 0===o&&(o=!1);var t=document.createElement("audio");t.volume=a,t.autoplay=r,t.loop=o;var n=new F(e),u=setInterval(function(){if(n.generate()>=1){clearInterval(u);var e=n.createWave();t.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"}))}},300);return c.audioMuteChanged.add(function(e){t.muted=e}),t},e}();var r={songData:[{i:[1,163,128,0,3,119,116,0,0,0,0,57,25,0,0,0,195,6,0,1,20,138,1,51,171,6,79,6],p:[,,1,1,1,1,1,1,1,2],c:[{n:[143,,155,148,155,150,143,,155,150,155,150,146,145,141,,143,,155,148,155,150,143,,155,143,155,150,146,,148,150],f:[2,12,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48,35,,25]},{n:[143,,155,148,155,150,143,,155,150,155,150,146,145,141,,143,,155,148,155,150,143,,155],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,188]}]},{i:[2,232,128,0,3,255,128,0,0,0,0,36,0,0,0,0,195,6,1,2,135,0,24,73,81,6,43,6],p:[1,1,1,1,1,1,1,1],c:[{n:[143,143,131,,,,,,,,,,,,,,,,,,,,,,,,,,,,141,138,138,138,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,136,133],f:[12,,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,12,,28,,36,,,,,,,,,,,,,,,,,,,,,,,,,,,,28]}]},{i:[0,0,128,0,0,0,128,0,0,125,0,1,17,0,0,0,0,0,0,1,229,171,0,68,39,3,0,3],p:[1,1,1,1,2,2,2,2,,,2,2,2,2,2],c:[{n:[,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,135],f:[24,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,24,32,,,,67,,,,,,,,67,,,,,,,,72,,,,,,,,67,,,68]},{n:[135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135],f:[13,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,17,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17]}]},{i:[1,255,128,0,1,154,116,9,0,0,0,36,0,0,0,0,0,0,0,2,164,0,4,15,47,3,63,3],p:[,,,,1,2,1,2,1,4,3,3,3,3,2,4],c:[{n:[119,,131,,131,,131,119,,131,,119,131,,131,131,119,,131,,131,,131,119,,131,,119,131,,131,131],f:[]},{n:[115,,127,,127,,127,115,,127,,115,127,,127,127,112,,124,,124,,124,112,,124,,112,122,,122,122],f:[]},{n:[119,,131,,132,,132,131,,119,131,,132,,132,129,119,,131,,132,,132,131,,119,131,119,132,,132,129],f:[]},{n:[119,,131,,131,,131,119,,131,,119,131,,131,131,119,,131,,131,,131,119,,,,,,,,129],f:[]}]},{i:[3,59,128,1,3,100,128,0,1,131,0,4,40,0,0,1,0,4,1,2,55,115,124,121,67,6,39,1],p:[,,,10,1,1,1,1,,,,10,1,1,1,10],c:[{n:[,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,147,147,147,147,147,147,147,,,,,,,,,,,,,,,,,,,,,,,,,147,147,147,147,147,147,147,147],f:[,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,121,,,,255]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,0,101,0,3,0,127,0,1,255,72,3,72,0,0,0,0,6,1,2,29,0,0,156,147,3,8,6],p:[,1,,,,,,,,1,,,,,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,135],f:[]}]}],rowLen:5050,patternLen:32,endPattern:15,numChannels:8};var e={};var t,k;(function(e){e[e.WhatIsTheWord=0]="WhatIsTheWord",e[e.WhatIsTheResult=1]="WhatIsTheResult",e[e.FindTheMissingLetter=2]="FindTheMissingLetter"})(k||(t=k={},t));var v=[["seal","meal","deal","teal"],["make","fake","take","wake","cake","bake","rake"],["fun","sun","run","bun"],["par","car","far","bar"],["their","there","share","where"],["wear","tear","fear","near","dear","rear","pear"],["chair","stair","fair","hair"],["bay","day","pay","fay","may"],["stay","play","slay","tray"],["date","late","gate","rate","hate","mate"],["rare","dare","fare","care"],["viable","table","cable","fable"],["tone","phone","hone","cone","none","done"],["snow","show","crow","brow","know"],["slow","glow","flow","blow"],["toe","woe","foe","doe"],["now","how","wow","low","vow"],["tall","call","ball","fall"],["might","sight","night","right","tight"],["kite","rite","site","bite"],["rice","nice","dice","vice","mice"],["sense","tense","dense","fence"],["fell","well","tell","bell","hell","sell","yell"],["weigh","sleigh","eight","weight"],["day","hay","may","pay"],["page","wage","rage","cage"],["bee","see","sea","tea"],["beach","teach","reach","peach","leach"],["sane","lane","cane","pane"],["look","cook","book","took"],["tiny","silly","very","lazy"],["week","geek","reek","meet","meat"],["spout","trout","shout","trout","about"],["like","bike","pike","dike"],["free","three","agree","tree"],["could","would","mould","should"],["grain","chain","brain","drain","plain","train"],["gain","pain","rain","main"],["creep","sheep","sweep","sleep","steep","cheep"],["keep","peep","weep","jeep","beep"]];var d=function(){function n(){}return n.pickIndexFromLength=function(n){return Math.floor(Math.random()*n)},n.pickIntInclusive=function(n,r){return n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n+1))+n},n.pickElementFromArray=function(n){return n[this.pickIndexFromLength(n.length)]},n.pickElementFromEnum=function(n){var r=Object.keys(n).map(function(n){return Number.parseInt(n)}).filter(function(n){return!Number.isNaN(n)});return r[Math.floor(Math.random()*r.length)]},n.shuffle=function(n){for(var r,t=n.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1));r=[n[o],n[t]],n[t]=r[0],n[o]=r[1]}return n},n}();var y,j;(function(t){t[t.Addition=0]="Addition",t[t.Subtraction=1]="Subtraction",t[t.Multiplication=2]="Multiplication",t[t.Division=3]="Division"})(j||(y=j={},y));var q=4;var o=function(){function r(){}return r.save=function(r){var t=JSON.stringify(r),e=this.getCipher(i)(t);localStorage.setItem(i,e)},r.load=function(){var r=localStorage.getItem(i);if(!r)return null;var t=this.getDecipher(i)(r);return JSON.parse(t)},r.getCipher=function(r){var t=function(r){return r.split("").map(function(r){return r.charCodeAt(0)})},e=function(r){return("0"+Number(r).toString(16)).substr(-2)},n=function(e){return t(r).reduce(function(r,t){return r^t},e)};return function(r){return r.split("").map(t).map(n).map(e).join("")}},r.getDecipher=function(r){var t=function(t){return(e=r,e.split("").map(function(r){return r.charCodeAt(0)})).reduce(function(r,t){return r^t},t);var e};return function(r){return r.match(/.{1,2}/g).map(function(r){return parseInt(r,16)}).map(t).map(function(r){return String.fromCharCode(r)}).join("")}},r}();var l=function(){function e(){}return Object.defineProperty(e,"currentStreak",{get:function(){return this._currentStreak},set:function(e){var t=this;this._currentStreak=e,Array.from(b.currentStreakElements).forEach(function(e){e.innerText=t._currentStreak.toString()}),this.longestStreak=Math.max(this.currentStreak,this.longestStreak)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"longestStreak",{get:function(){return this._longestStreak},set:function(e){var t=this;e!=this._longestStreak&&(this._longestStreak=e,Array.from(b.longestStreakElements).forEach(function(e){e.innerText=t._longestStreak.toString()}),o.save({longestStreak:this._longestStreak}))},enumerable:!0,configurable:!0}),e.initialize=function(){var e=this,t=o.load();t&&(this.longestStreak=t.longestStreak),c.answeredCorrectly.add(function(){return e.currentStreak++})},e._currentStreak=0,e._longestStreak=0,e}();var D=e&&e.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,$=s.length;o<$;o++,n++)i[n]=s[o];return i},n=function(){function e(){}return e.initialize=function(){this.listenToAnswersSelected()},e.listenToAnswersSelected=function(){var e=this;Array.from(b.answerButtons).forEach(function(t){t.addEventListener("click",function(){e.buttonsBlocked||e.processAnswer(t.innerText)})})},e.processAnswer=function(e){var t=this;e==this.expectedAnswer?c.answeredCorrectly.emit():c.answeredWrongly.emit();var r=function(e){b.getScene(a.GamePlay).style.opacity=(e/100).toString()};this.buttonsBlocked=!0,new g({start:100,end:0,duration:500}).on("tick",r).on("done",function(){t.preparePhase(),new g({start:0,end:100,duration:500}).on("tick",r).on("done",function(){t.buttonsBlocked=!1}).begin()}).begin()},e.setSentence=function(e){b.sentenceElement.innerText=e},e.setQuestion=function(e){b.questionElement.innerText=e},e.setAnswers=function(e){d.shuffle(e);for(var t=0;t<q;t++)b.getAnswerButton(t).innerText=e[t].toString()},e.preparePhase=function(){if(l.currentStreak<10)this.prepareWhatIsTheWord();else if(l.currentStreak<20)d.pickIntInclusive(0,1)?this.prepareWhatIsTheWord():this.prepareFindTheMissingLetter();else switch(d.pickElementFromEnum(k)){case k.WhatIsTheWord:this.prepareWhatIsTheWord();break;case k.FindTheMissingLetter:this.prepareFindTheMissingLetter();break;case k.WhatIsTheResult:this.prepareWhatIsTheResult();}},e.prepareWhatIsTheWord=function(){for(var e=D(d.pickElementFromArray(v)),t=[],r=0;r<q;r++){var i=d.pickIndexFromLength(e.length);t.push(e.splice(i,1))}this.expectedAnswer=d.pickElementFromArray(t),this.setSentence(this.expectedAnswer),this.setQuestion("Which word is that?"),this.setAnswers(t)},e.prepareFindTheMissingLetter=function(){var e=d.pickElementFromArray(v),t=d.pickElementFromArray(e),r=d.pickIndexFromLength(t.length),i=t[r],n=["A","E","I","O","U"],s=["B","C","D","F","G","H","J","K","L","M","N","P","Q","R","S","T","V","W","X","Y","Z"],o=[];if(n.indexOf(i.toUpperCase())>=0)for(var $=0;$<q;$++){var a=d.pickIndexFromLength(n.length),p=n.splice(a,1)[0],m=t.substr(0,r)+p+t.substr(r+1);this.wordExists(m)?$--:o.push(p)}else for($=0;$<q;$++){var c=d.pickIndexFromLength(s.length),u=s.splice(c,1)[0];m=t.substr(0,r)+u+t.substr(r+1);this.wordExists(m)?$--:o.push(u)}-1==o.indexOf(i.toUpperCase())&&(o[d.pickIndexFromLength(o.length)]=i.toUpperCase());var l=t.substr(0,r)+"_"+t.substr(r+1);this.expectedAnswer=i.toUpperCase(),this.setSentence(l),this.setQuestion("Which letter is missing?"),this.setAnswers(o)},e.prepareWhatIsTheResult=function(){var e=0,t=0,r=0,i="";switch(d.pickElementFromEnum(j)){case j.Addition:i="+",e=(t=d.pickIntInclusive(1,50))+(r=d.pickIntInclusive(1,50));break;case j.Multiplication:i="\xD7",e=(t=d.pickIntInclusive(1,9))*(r=d.pickIntInclusive(1,9));break;case j.Subtraction:i="-",e=(t=d.pickIntInclusive(50,99))-(r=d.pickIntInclusive(1,49));break;case j.Division:i="\xF7",r=d.pickIntInclusive(1,9),e=(t=d.pickIntInclusive(1,9)*r)/r;}for(var n=[],s=0;s<q;s++)n.push(d.pickIntInclusive(e-20,e+20));-1==n.indexOf(e)&&(n[d.pickIndexFromLength(n.length)]=e),this.expectedAnswer=e.toString(),this.setSentence(t+" "+i+" "+r),this.setQuestion("What is the result?"),this.setAnswers(n)},e.wordExists=function(e){for(var t=0;t<v.length;t++)for(var r=v[t],i=0;i<r.length;i++){var n=r[i];if(e.toLowerCase()==n.toLowerCase())return!0}return!1},e.buttonsBlocked=!1,e}();e.GamePlayScene=n;var w=function(){function e(){}return e.initialize=function(){f.initialize(),l.initialize(),z.initialize(),m.initialize(),n.initialize(),p.initialize(),this.listenToCountDownTimerOver(),this.startBackgroundMusicOnFirstInteraction(),this.listenToSceneChanges(),this.listenToBackToMenuClicks(),this.listenToButtonsHoversAndClicks(),this.listenToCorrectlyAnsweredQuestions(),this.setRandomBackground()},e.listenToBackToMenuClicks=function(){Array.from(b.backToMenuButtons).forEach(function(e){e.addEventListener("click",function(){m.displayScene(a.Menu)})})},e.listenToButtonsHoversAndClicks=function(){var e=new AudioContext,n=e.createBuffer(1,96e3,48e3),t=n.getChannelData(0),i=function(e,n){return(n-e)/n},a=e.createGain();a.gain.value=.1,a.connect(e.destination);var r=function(e){return e>4e4?null:Math.sin(e/8e3-Math.sin(e/60)*Math.sin(e/61))*i(e,4e4)},o=function(e){return e>4e4?null:Math.sin(e/6e3-Math.sin(e/90)*Math.sin(e/91))*i(e,4e4)};Array.from(b.allButtons).forEach(function(i){i.addEventListener("click",function(){if(!f.isAudioDisabled()){for(var i=96e3;i--;)t[i]=r(i);var o=e.createBufferSource();o.buffer=n,o.connect(a),o.start()}}),i.addEventListener("mouseenter",function(){if(!f.isAudioDisabled()){for(var i=96e3;i--;)t[i]=o(i);var r=e.createBufferSource();r.buffer=n,r.connect(a),r.start()}})})},e.listenToSceneChanges=function(){c.sceneDisplayed.add(function(e){switch(e){case a.Menu:f.displayNotification("Welcome! Ready to start?");break;case a.Tutorial:f.displayNotification("Ah, finally someone here!");break;case a.About:f.displayNotification("Curious, huh!?");break;case a.GamePlay:f.displayNotification("Good Luck!"),l.currentStreak=0,n.preparePhase(),p.start(10);break;case a.GameOver:f.displayNotification("Oh no! Time's over!");}})},e.listenToCountDownTimerOver=function(){c.gamePlayCountDownTimeOver.add(function(){m.displayScene(a.GameOver)})},e.startBackgroundMusicOnFirstInteraction=function(){var e=function(){E.create(r,.2,!0,!0),document.removeEventListener("mousemove",e),document.removeEventListener("touchstart",e)};document.addEventListener("mousemove",e),document.addEventListener("touchstart",e)},e.setRandomBackground=function(){b.setBackgroundId(d.pickIntInclusive(1,4))},e.listenToCorrectlyAnsweredQuestions=function(){c.answeredCorrectly.add(function(){f.displayNotification(d.pickElementFromArray(["Awesome!","Perfect!","Amazing!","Outstanding!","Splendid!","Marvelous!","Superb!","Fabulous!","Fantastic!","Phenomenal!","Wonderful!"]))})},e}();w.initialize();})();</script> </body></html>