<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
      <style>
        .game-container,.menu,.title-logo{text-align:center}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}.title-logo{font-size:3em;font-family:cursive;padding:12px 12px 32px;background:linear-gradient(to bottom,#DFA700,#ccc);background-clip:text;-webkit-background-clip:text;color:transparent;margin:0 auto}.game-container{background:linear-gradient(to bottom,#181818,#000);height:100vh;width:100vw}.button{background:#DFA700;padding:12px 8px;border-radius:4px;display:inline-block;border:2px solid #333;font-family:monospace;font-size:1.8em}.game{background:#000;width:640px;height:640px;margin:0 auto}
      </style>
  </head>
  <body>
      <script>
        !function(){"use strict";function t(){Object.defineProperty(this,"_emitterId",{value:++s}),r[this._emitterId]={}}function e(i){function s(){t.call(this),"function"==typeof this.init&&this.init.apply(this,arguments)}var r=this.prototype||{},n=Object.create(r);return Object.keys(i).forEach(function(t){i.hasOwnProperty(t)&&(n[t]=i[t])}),s.extend=e,s.prototype=n,s.prototype.constructor=s,s}const i={init:function(t){var e=this.canvas=document.getElementById(t)||t||document.querySelector("canvas");if(!this._isCanvas(e))throw Error("You must provide a canvas element for the game");this.context=e.getContext("2d")},_noop:new Function,_isString:function(t){return""+t===t},_isNumber:function(t){return+t===t},_isFunc:function(t){return"function"==typeof t},_isImage:function(t){return!!t&&"IMG"===t.nodeName||this._isCanvas(t)},_isCanvas:function(t){return!!t&&"CANVAS"===t.nodeName}};!function(t,e,i){t.gameLoop=function(s){function r(){if(a=e(r),o=i.now(),h=o-n,n=o,!(h>1e3)){for(l+=h;l>=d;)p.update(m),l-=d;u(),p.render()}}if(s=s||{},!t._isFunc(s.update)||!t._isFunc(s.render))throw Error("You must provide update() and render() functions");var n,a,o,h,c=s.fps||60,l=0,d=1e3/c,m=1/c,u=!1===s.clearCanvas?t._noop:function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height)},p={update:s.update,render:s.render,isStopped:!0,start:function(){n=i.now(),this.isStopped=!1,e(r)},stop:function(){this.isStopped=!0,cancelAnimationFrame(a)},_frame:r,set _last(t){n=t}};return p}}(i,requestAnimationFrame,performance),function(){for(var t={},e={},s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"leftwindow",92:"rightwindow",93:"select",144:"numlock",145:"scrolllock",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r=0;r<26;r++)s[65+r]=(10+r).toString(36);for(r=0;r<10;r++)s[48+r]=""+r,s[96+r]="numpad"+r;for(r=1;r<20;r++)s[111+r]="f"+r;var n=window.addEventListener;n("keydown",function(i){var r=s[i.which];e[r]=!0,t[r]&&t[r](i)}),n("keyup",function(t){var i=s[t.which];e[i]=!1}),n("blur",function(t){e={}}),i.keys={bind:function(e,i){e=Array.isArray(e)?e:[e];for(var s,r=0;s=e[r];r++)t[s]=i},unbind:function(e){e=Array.isArray(e)?e:[e];for(var i,s=0;i=e[s];s++)t[i]=null},pressed:function(t){return!!e[t]}}}(),function(t,e,i){t.vector=function(e,i){var s=Object.create(t.vector.prototype);return s._init(e,i),s},t.vector.prototype={_init:function(t,e){this._x=t||0,this._y=e||0},add:function(t,e){this._x+=(t.x||0)*(e||1),this._y+=(t.y||0)*(e||1)},clamp:function(t,e,s,r){this._clamp=!0,this._xMin=void 0!==t?t:-i,this._yMin=void 0!==e?e:-i,this._xMax=void 0!==s?s:i,this._yMax=void 0!==r?r:i},get x(){return this._x},get y(){return this._y},set x(t){this._x=this._clamp?e.min(e.max(this._xMin,t),this._xMax):t},set y(t){this._y=this._clamp?e.min(e.max(this._yMin,t),this._yMax):t}},t.sprite=function(e){var i=Object.create(t.sprite.prototype);return i.init(e),i},t.sprite.prototype={init:function(e){var i,s,r,n=this;e=e||{},n.position=n.position||t.vector(),n.velocity=n.velocity||t.vector(),n.acceleration=n.acceleration||t.vector(),n.position._init(e.x,e.y),n.velocity._init(e.dx,e.dy),n.acceleration._init(e.ddx,e.ddy),n.width=n.height=0;for(var a in e)n[a]=e[a];if(n.ttl=e.ttl||0,n.context=e.context||t.context,n.advance=n._advance,n.draw=n._draw,t._isImage(i=e.image))n.image=i,n.width=i.width,n.height=i.height,n.draw=n._drawImg;else if(i=e.animations){n.animations={};for(var o in i)s=i[o],n.animations[o]=s.clone?s.clone():s,r||(r=n.animations[o]);n.currentAnimation=r,n.width=r.width,n.height=r.height,n.advance=n._advanceAnim,n.draw=n._drawAnim}},get x(){return this.position.x},get y(){return this.position.y},get dx(){return this.velocity.x},get dy(){return this.velocity.y},get ddx(){return this.acceleration.x},get ddy(){return this.acceleration.y},set x(t){this.position.x=t},set y(t){this.position.y=t},set dx(t){this.velocity.x=t},set dy(t){this.velocity.y=t},set ddx(t){this.acceleration.x=t},set ddy(t){this.acceleration.y=t},isAlive:function(){return this.ttl>0},collidesWith:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},update:function(t){this.advance(t)},render:function(){this.draw()},playAnimation:function(t){this.currentAnimation=this.animations[t]},_advance:function(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.ttl--},_advanceAnim:function(t){this._advance(t),this.currentAnimation.update(t)},_draw:function(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height)},_drawImg:function(){this.context.drawImage(this.image,this.x,this.y)},_drawAnim:function(){this.currentAnimation.render({context:this.context,x:this.x,y:this.y})}}}(i,Math,1/0),function(t){function e(){for(var t=[],e=0;e<arguments.length;e++)arguments[e]&&t.push(arguments[e].trim().replace(new RegExp("(^[/]{"+(t[0]?1:2)+",}|[/]*$)","g"),""));return t.join("/")}function s(t){return t.split(".").pop()}function r(t){var e=t.replace("."+s(t),"");return 0==e.indexOf("/")&&0==e.lastIndexOf("/")?e.substr(1):e}function n(s){var n=r(s),a=new Image,o=i.assets,h=o.images;return s=e(o.imagePath,s),new t(function(t,e){a.onload=function(){h[n]=h[s]=this,t(this)},a.onerror=function(){e("Unable to load image "+s)},a.src=s})}function a(n){var a,o,h,c,l,d=i.assets,u=d.audio,p=d.audioPath;return Array.isArray(n)||(n=[n]),new t(function(t,i){for(l=0;a=n[l];l++)if(m[s(a)]){h=a;break}h?(o=r(h),c=new Audio,a=e(p,h),c.addEventListener("canplay",function(){u[o]=u[a]=this,t(this)}),c.onerror=function(){i("Unable to load audio "+a)},c.src=a,c.load()):i("cannot play any of the audio formats provided")})}function o(s){var n=r(s),a=new XMLHttpRequest,o=i.assets,h=o.data;return s=e(o.dataPath,s),new t(function(t,e){a.addEventListener("load",function(){var i=a.responseText;if(200!==a.status)return e(i);try{i=JSON.parse(i)}catch(t){}h[n]=h[s]=i,t(i)}),a.open("GET",s,!0),a.send()})}var h=/(jpeg|jpg|gif|png)$/,c=/(wav|mp3|ogg|aac)$/,l=/^no$/,d=new Audio,m={wav:"",mp3:d.canPlayType("audio/mpeg;").replace(l,""),ogg:d.canPlayType('audio/ogg; codecs="vorbis"').replace(l,""),aac:d.canPlayType("audio/aac;").replace(l,"")};i.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load:function(){var e,i,r,l,d=[];for(r=0;i=arguments[r];r++)l=(e=s(Array.isArray(i)?i[0]:i)).match(h)?n(i):e.match(c)?a(i):o(i),d.push(l);return t.all(d)},_canUse:m}}(Promise),function(t){t.animation=function(e){var i=Object.create(t.animation.prototype);return i._init(e),i},t.animation.prototype={_init:function(t){t=t||{},this.spriteSheet=t.spriteSheet,this.frames=t.frames,this.frameRate=t.frameRate;var e=t.spriteSheet.frame;this.width=e.width,this.height=e.height,this.margin=e.margin||0,this._frame=0,this._accum=0},clone:function(){return t.animation(this)},update:function(t){for(t=t||1/60,this._accum+=t;this._accum*this.frameRate>=1;)this._frame=++this._frame%this.frames.length,this._accum-=1/this.frameRate},render:function(e){var i=(e=e||{}).context||t.context,s=this.frames[this._frame]/this.spriteSheet.framesPerRow|0,r=this.frames[this._frame]%this.spriteSheet.framesPerRow|0;i.drawImage(this.spriteSheet.image,r*this.width+(2*r+1)*this.margin,s*this.height+(2*s+1)*this.margin,this.width,this.height,e.x,e.y,this.width,this.height)}},t.spriteSheet=function(e){var i=Object.create(t.spriteSheet.prototype);return i._init(e),i},t.spriteSheet.prototype={_init:function(e){if(e=e||{},!t._isImage(e.image))throw Erorr("You must provide an Image for the SpriteSheet");this.animations={},this.image=e.image,this.frame={width:e.frameWidth,height:e.frameHeight,margin:e.frameMargin},this.framesPerRow=e.image.width/e.frameWidth|0,this.createAnimations(e.animations)},createAnimations:function(e){var i,s,r,n;for(var a in e){if(i=e[a],s=i.frames,r=i.frameRate,n=[],void 0===s)throw Error("Animation "+a+" must provide a frames property");Array.isArray(s)||(s=[s]);for(var o,h=0;o=s[h];h++)n.push.apply(n,this._parse(o));this.animations[a]=t.animation({spriteSheet:this,frames:n,frameRate:r})}},_parse:function(e){if(t._isNumber(e))return[e];var i,s=[],r=e.split(".."),n=i=+r[0],a=+r[1];if(n<a)for(;i<=a;i++)s.push(i);else for(;i>=a;i--)s.push(i);return s}}}(i),function(t,e,i){t.tileEngine=function(s){function r(t){var e,i;return void 0!==t.x&&void 0!==t.y?(e=E.getRow(t.y),i=E.getCol(t.x)):(e=t.row,i=t.col),e<0||i<0||e>=l||i>=c?-1:i+e*c}function n(t){for(var e,i,s=0,r=E.tilesets.length-1;s<=r;){if(e=(s+r)/2|0,i=E.tilesets[e],t>=i.firstGrid&&t<=i.lastGrid)return i;i.lastGrid<t?s=e+1:r=e-1}}function a(){for(var t,e,i,s,r,a,o,h,l,u,p=0;u=E.layers[R[p]];p++)for(var f=0,g=u.data.length;f<g;f++)(t=u.data[f])&&(i=(e=n(t)).image,s=f%c*d,r=(f/c|0)*m,a=(h=t-e.firstGrid)%(l=i.width/d)*d,o=(h/l|0)*m,x.drawImage(i,a,o,d,m,s,r,d,m))}if(!(s=s||{}).width||!s.height)throw Error("You must provide width and height properties");var o,h,c=s.width,l=s.height,d=s.tileWidth||s.tilewidth||32,m=s.tileHeight||s.tileheight||32,u=c*d,p=l*m,f=s.context||t.context,g=f.canvas.width,y=f.canvas.height,v=document.createElement("canvas"),x=v.getContext("2d"),w=e.max(0,u-g),_=e.max(0,p-y),R=[],E={width:c,height:l,tileWidth:d,tileHeight:m,mapWidth:u,mapHeight:p,context:f,x:s.x||0,y:s.y||0,tilesets:[],layers:{},addTilesets:function(e){i.isArray(e)||(e=[e]),e.forEach(function(e){var i,s,r,n,a,o=e.image;if(t._isImage(o))i=o;else if(t._isString(o))for(var h=1/0;h>=0;){var c=(h=o.lastIndexOf("/",h))<0?o:o.substr(h);if(t.assets.images[c]){i=t.assets.images[c];break}h--}if(!i)throw Error("You must provide an Image for the tileset");s=e.firstGrid,r=(i.width/d|0||1)*(i.height/m|0||1),s||(E.tilesets.length>0?(a=((n=E.tilesets[E.tilesets.length-1]).image.width/d|0)*(n.image.height/m|0),s=n.firstGrid+a):s=1),E.tilesets.push({firstGrid:s,lastGrid:s+r-1,image:i}),E.tilesets.sort(function(t,e){return t.firstGrid-e.firstGrid})})},addLayers:function(t){i.isArray(t)||(t=[t]),t.forEach(function(t){t.render=void 0===t.render||t.render;var e,s,r,n,a,o;if(i.isArray(t.data[0]))for(e=[],s=0;r=t.data[s];s++)for(n=0;n<c;n++)e.push(r[n]||0);else e=t.data;E.layers[t.name]={data:e,zIndex:t.zIndex||0,render:t.render};for(a in t.properties){o=t.properties[a];try{o=JSON.parse(o)}catch(t){}E.layers[t.name][a]=o}E.layers[t.name].render&&(R.push(t.name),R.sort(function(t,e){return E.layers[t].zIndex-E.layers[e].zIndex}))}),a()},layerCollidesWith:function(t,e){for(var i,s=E.getRow(e.y),n=E.getCol(e.x),a=E.getRow(e.y+e.height),o=E.getCol(e.x+e.width),h=s;h<=a;h++)for(var c=n;c<=o;c++){i=r({row:h,col:c});var l=E.layers[t].data[i];if(l)return{row:h,col:c,data:l,index:i,layer:E.layers[t].data}}return!1},tileAtLayer:function(t,e){var i=r(e);if(i>=0)return E.layers[t].data[i]},render:function(){E.context.drawImage(v,E.sx,E.sy,g,y,E.x,E.y,g,y)},renderLayer:function(t){for(var i,s,a,o,h,u,p,f,v,x=E.layers[t],w=E.getRow(),_=E.getCol(),R=r({row:w,col:_}),C=_*d-E.sx,S=w*m-E.sy,A=e.min(e.ceil(g/d)+1,c),z=A*e.min(e.ceil(y/m)+1,l),b=0;b<z;)(a=x.data[R])&&(h=(o=n(a)).image,i=C+b%A*d,s=S+(b/A|0)*m,f=(u=a-o.firstGrid)%(p=h.width/d)*d,v=(u/p|0)*m,E.context.drawImage(h,f,v,d,m,i,s,d,m)),++b%A==0?R=_+ ++w*c:R++},getRow:function(t){return t=t||0,(E.sy+t)/m|0},getCol:function(t){return t=t||0,(E.sx+t)/d|0},get sx(){return o},get sy(){return h},set sx(t){o=e.min(e.max(0,t),w)},set sy(t){h=e.min(e.max(0,t),_)},_layerOrder:R};E.sx=s.sx||0,E.sy=s.sy||0,v.width=u,v.height=p;for(var C in s.properties){var S=s.properties[C];try{S=JSON.parse(S)}catch(t){}E[C]=E[C]||S}return s.tilesets&&E.addTilesets(s.tilesets),s.layers&&E.addLayers(s.layers),E}}(i,Math,Array);var s=0,r={},n=[];t.prototype.on=function(t,e){var i=r[this._emitterId];return(i[t]||(i[t]=[])).push(e),this},t.prototype.off=function(t,e){var i,s;return 0===arguments.length?(r[this._emitterId]={},this):1===arguments.length?(r[this._emitterId][t]=[],this):"function"==typeof e?(i=r[this._emitterId][t],s=i.indexOf(e),i.splice(s,1),this):void 0},t.prototype.emit=function(t){var e,i=[],s=r[this._emitterId],a=arguments.length;if(a>1)for(e=1;e<a;e++)i.push(arguments[e]);return(s[t]||n).forEach(function(t){t.apply(null,i)}),this},t.prototype.once=function(t,e){var i=this,s=function(){e.apply(null,arguments),i.off(t,s)};return this.on(t,s)};class a{}var o=e.call(a,t.prototype);const h=t=>document.getElementById(t),c=t=>Math.floor(Math.random()*t+1),l=2,d=3;class m{constructor(t,e,i){this.sizeX=t,this.sizeY=e,this.data=[],this.collision=[],this.context=i}GenerateRoom(){for(let t=-1;t<this.sizeY+1;t++)for(let e=-1;e<this.sizeX+1;e++)-1==e&&(this.data[t+1]=[],this.collision[t+1]=[]),-1==e||e==this.sizeX||-1==t||t==this.sizeY?(this.data[t+1][e+1]=0,this.collision[t+1][e+1]=l):(this.data[t+1][e+1]=d,this.collision[t+1][e+1]=0);this.GenerateObstacles()}createExit(){let t=c(this.sizeX),e=c(this.sizeY),i=Math.floor(this.sizeY/2);this.collision[e][t]=4,this.ClearPath(t,e,t,i)}ClearPath(t,e,i,s){if(t>=i)for(r=t+1;r>=i;r--)this.collision[s][r]=0;if(t>=i)for(r=t-1;r<=i;r++)this.collision[s][r]=0;if(e<=s)for(r=e+1;r<=s;r++)this.collision[r][t]=0;if(e>=s)for(var r=e-1;r>=s;r--)this.collision[r][t]=0}CreateConnection(t,e){let i=Math.floor(this.sizeX/2),s=Math.floor(this.sizeY/2);e?(this.collision[0][i]=0,this.data[0][i]=3,this.bottomRoom=t,this.ClearPath(i,0,i,s)):(this.collision[this.sizeY+1][i]=0,this.data[this.sizeY+1][i]=3,this.topRoom=t,this.ClearPath(i,this.sizeY+1,i,s))}GenerateObstacles(){let t=c(this.sizeX*this.sizeY/3);for(let e=0;e<t;e++)this.GenerateObstacle(c(this.sizeX),c(this.sizeY))}GenerateObstacle(t,e){this.collision[e][t]=1}get sx(){return this.tileEngine.sx}set sx(t){this.tileEngine.sx=t}get sy(){return this.tileEngine.sy}set sy(t){this.tileEngine.sy=t}finalize(){this.tileEngine=i.tileEngine({tileWidth:32,context:this.context,tileHeight:32,width:this.sizeX+2,height:this.sizeY+2,layers:[{name:"lvl",data:this.data},{name:"collision",data:this.collision}],tilesets:[{image:"img/MapTiles.png",firstGrid:0}]}),this.tileEngine.height=this.sizeY+2,this.tileEngine.width=this.sizeX+2}render(){this.tileEngine.render()}}class u extends o{constructor(){super(),this.speed=2}init(){this.spritesheet=i.spriteSheet({image:i.assets.images["img/character"],frameWidth:32,frameHeight:32,animations:{walk_left:{frames:"0..2",frameRate:12,width:-32},walk_right:{frames:"0..2",frameRate:12}}}),this.player=i.sprite({startX:32,startY:32,speed:2,x:32,y:32,animations:this.spritesheet.animations,update:this.onUpdate.bind(this)})}onUpdate(t){var e={x:this.player.x+5,y:this.player.y+10,width:18,height:18},s=0,r=0;i.keys.pressed("up")&&(this.player.advance(),r=-this.player.speed),i.keys.pressed("down")&&(this.player.advance(),r=this.player.speed),i.keys.pressed("left")&&(this.player.playAnimation("walk_left"),this.player.advance(),s=-this.player.speed),i.keys.pressed("right")&&(this.player.playAnimation("walk_right"),this.player.advance(),s=this.player.speed),e.y+=r,e.x+=s;var n=this.room.tileEngine.layerCollidesWith("collision",e);n?4==n.data&&(this.room.collision[n.row][n.col]=0,this.emit("reachedExit")):(this.player.x+=s,this.player.y+=r,0<=this.room.tileEngine.sx+s&&this.room.tileEngine.mapWidth>this.room.tileEngine.sx+s&&(this.room.tileEngine.sx+=s),0<=this.room.tileEngine.sy+r&&this.room.tileEngine.mapHeight>this.room.tileEngine.sy+r&&(this.room.tileEngine.sy+=r),this.player.y<16&&this.emit("moveUpRoom"),this.player.y>this.room.tileEngine.mapHeight-48&&this.emit("moveDownRoom"))}setPosition(t,e){this.player.startX=t,this.player.startY=e,this.player.x=t,this.player.y=e}set room(t){this._room=t}get room(){return this._room}update(){this.player.update()}render(){this.player.render()}}class p extends o{constructor(t){super(),this.canvas=t,this.context=t.getContext("2d"),this.kontra=i.init(t),this.rooms=[]}GenerateRooms(){let t=2+c(4);this.playerStart=c(t)-1,this.exitRoom=c(t)-1;for(let e=0;e<=t;e++)this.rooms[e]=new m(10,10,this.context),this.rooms[e].GenerateRoom(),e>0&&(this.rooms[e-1].CreateConnection(this.rooms[e],!0),this.rooms[e].CreateConnection(this.rooms[e-1],!1));this.currentRoom=this.rooms[this.playerStart],this.currentRoom.collision[1][1]=0,this.currentRoom.ClearPath(1,1,this.currentRoom.sizeX,this.currentRoom.sizeY),this.rooms[this.exitRoom].createExit(),this.currentRoom.finalize()}init(){i.assets.load("img/MapTiles.png","img/character.png").then(()=>{this.player=new u,this.movingRoom=!1,this.player.on("moveUpRoom",()=>{this.movingRoom||(this.movingRoom=!0,this.playerStart+=1,this.currentRoom=this.rooms[this.playerStart],this.currentRoom.finalize(),this.player.setPosition(Math.floor(32*this.currentRoom.sizeX/2)-64,32*this.currentRoom.sizeY-60),this.player.room=this.currentRoom,this.currentRoom.tileEngine.sx=32*this.currentRoom.sizeX/2,this.currentRoom.tileEngine.sy=32*this.currentRoom.sizeY-32,this.movingRoom=!1)}),this.player.on("moveDownRoom",()=>{this.movingRoom||(this.movingRoom=!0,this.playerStart-=1,this.currentRoom=this.rooms[this.playerStart],this.currentRoom.finalize(),this.player.setPosition(32*this.currentRoom.sizeX/2,32),this.player.room=this.currentRoom,this.currentRoom.tileEngine.sy=0,this.movingRoom=!1)}),this.player.on("reachedExit",()=>{this.emit("success")}),this.GenerateRooms(),this.player.room=this.currentRoom,i.gameLoop({fps:30,clearCanvas:!1,update:t=>{this.movingRoom||this.player.update()},render:()=>{i.context.clearRect(0,0,i.canvas.width,i.canvas.height),this.currentRoom.render(),this.player.render()}}).start()})}}class f extends o{ready(){this.start=h("start"),this.start.addEventListener("click",t=>{this.emit("start-game")},!1)}getContent(){return'<div class="menu"><div class="title-logo">Dungeon <br/>Escape</div><div class="button" id="start">New Game</div></div>'}}class g extends o{ready(){}getContent(){return'<div><div class="title-logo">You Made<br/>It!</div></div>'}}class y extends o{ready(){this.gameCanvas=h("game-canvas"),this.gameManager=new p(this.gameCanvas),this.gameManager.on("success",()=>{this.emit("success")})}getContent(){return'<div class="title-logo">Dungeon <br/>Escape</div><canvas class="game" id="game-canvas" width="320px" height="320px" />'}}var v={Menu:f,Main:y,Success:g};class x{constructor(t){this.gameContainer=h(t),this.screens={}}AddScreen(t,e){this.screens[t]=e}ChangeScreen(t){this.gameContainer.innerHTML="",this.gameContainer.innerHTML=this.screens[t].getContent(),this.screens[t].ready()}}document.addEventListener("DOMContentLoaded",function(){const t=new x("game-container"),e=new v.Menu,i=new v.Main,s=new v.Success;t.AddScreen("menu",e),t.AddScreen("main",i),t.AddScreen("success",s),t.ChangeScreen("menu"),e.on("start-game",()=>{t.ChangeScreen("main")}),i.on("success",()=>{t.ChangeScreen("success")})},!1)}();
      </script>
    <div id="game-container" class="game-container"></div>
  </body>
</html>
