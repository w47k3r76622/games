<html><style>
body{margin:0;font-family: consolas;}
#app{display:flex;flex-direction:row;align-items:stretch;height:100%}
#map{}
#map_{flex-grow:1;display:flex;align-items: center;justify-content: center;height: 100%;}
#playerDeck{width:200px;padding:10px;position:absolute;z-index:2;background-color: rgba(0,0,0,0.1);border-radius: 4px;left: 10px;top: 10px;}
#camlist{position:absolute;top:0;right:0}
#instruction{margin: 10px;color:#fff}
#camPlaceholder{width:200px;height:1px;}
#exchange{position:fixed;left:0;bottom:0;background: #fff;z-index: 3;}
</style><div id=app><div id=playerDeck><div id=instruction><p>Press any letter key to chose your carrier...</p><p>Deliver pizza while avoiding to collide with other carrier.</p><p><a href=https://github.com/Platane/midnight-pizza-temptation>github</a></p></div></div><div id=map_><div id=map><h1>Please wait while generating map ...</h1></div></div><div id=camPlaceholder></div></div><div id=camlist></div><div id=exchange></div><script>!function(t){function r(e){if(n[e])return n[e].exports;var a=n[e]={exports:{},id:e,loaded:!1};return t[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},o=n(1),i=e(o),u=n(13),c=e(u),l=n(23),f=n(28),s=e(f),h=n(33),d=e(h);n(39);var p=document.getElementById("map"),v=document.getElementById("map_").getBoundingClientRect(),g=0|Math.min(Math.max(400,Math.min(v.width,v.height)-40),780),y=g,x=(0,i["default"])({width:g,height:y,perlin_size:350,n_points:260,n_sinks:16,min_length:10}),m=x.perlin,b=x.vertices,_=x.network,M=x.faces,A=x.max_weight,w={maxAcc:.05,maxBrake:.16,maxVelocity:3},C=Array.from({length:36}).map(function(t,r){return{position:{arc:_.endPoints[Math.floor(Math.random()*_.endPoints.length)].node.arcs_entering[0],k:.5,velocity:0},decision:{path:[]},info:a({},w,{maxVelocity:.8+.9*Math.random()}),index:r,game:{score:-1}}});n(40)(C);var E=3.5,k=1.6,P=4.5,S={night:n(41)(g,y,E/2,M,b,m),roads_large:n(43)(g,y,1,_,A,0,1.5),roads_precise:n(45)(g,y,E,_,A,k,P)},O=(0,c["default"])(g,y,C),I=O.update,T=O.canvas;for(S.night.s.setAttribute("style","position:absolute;width:"+g+"px;height:"+y+"px"),S.night.d.setAttribute("style","position:absolute;width:"+g+"px;height:"+y+"px"),S.roads_large.s.setAttribute("style","position:absolute;width:"+g+"px;height:"+y+"px"),T.setAttribute("style","position:relative;width:"+g+"px;height:"+y+"px");p.children[0];)p.removeChild(p.children[0]);p.appendChild(S.night.s),p.appendChild(S.night.d),p.appendChild(S.roads_large.s),p.appendChild(T);var j=(0,s["default"])(C);document.getElementById("playerDeck").appendChild(j.dom);var B=(0,d["default"])(C,_,S,k,P);document.getElementById("camlist").appendChild(B.dom);var R=n(18),q=function z(){S.night.u(),S.roads_large.u(),S.night.s.style.transform="translate3d("+R.h(6)+"px,"+R.h(10)+"px,0)",S.night.d.style.transform="translate3d("+R.h(8)+"px,"+R.h(7)+"px,0)",S.roads_large.s.style.transform="translate3d("+R.h(1)+"px,"+R.h(2)+"px,0)",S.roads_large.d.style.transform="translate3d("+R.h(1)+"px,"+R.h(2)+"px,0)",T.style.transform="translate3d("+R.h(3)+"px,"+R.h(4)+"px,0)",(0,l.step)(_,C),I(),R.update(),j.update(),B.update(),requestAnimationFrame(z)};q()},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},o=n(2),i=n(4),u=n(7),c=e(u),l=n(8),f=n(3),s=e(f),h=n(10),d=e(h),p=n(11),v=e(p),g=function(t,r){var n=Array.from({length:r}).map(function(){return[]});return t.forEach(function(t){return t.forEach(function(t,r,e){var a=e[(r+1)%e.length];n[t].push(a),n[a].push(t)})}),n.map(function(t){return t.filter(function(t,r,n){return n.indexOf(t)==r})})},y=function(t,r,n,e){var a={};return e.forEach(function(n,e){(n.x<0||n.x>t||n.y<0||n.y>r)&&(a[e]=!0)}),n=n.filter(function(t){return!t.some(function(t){return a[t]})}),{faces:n,out:a}};t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=t.width,n=t.height,e=t.perlin_size,u=t.n_points,f=t.n_sinks,h=t.min_length,p=(0,o.createPerlin)(r,n,e),x=(0,v["default"])(p,r,n,u),m=(0,i.voronoiTesselation)(x),b=m.faces,_=m.vertices;_.forEach(function(t){t.x=Math.round(100*t.x)/100,t.y=Math.round(100*t.y)/100});var M=y(r,n,b,_);b=M.faces;var A=g(b,_.length),w=(0,d["default"])(A,_,h);A=w.graph,_=w.vertices;var C=Array.from({length:f}).map(function(){return Math.floor(Math.random()*_.length)}).filter(function(t){return!M.out[t]&&A[t].length>0}),E=A.map(function(t,r){return{index:r,arcs_leaving:t}});E.forEach(function(t){return t.arcs_leaving=t.arcs_leaving.map(function(r){return{node_a:t,node_b:E[r]}})});for(var k=Array.from(_).map(function(){return[]}),P=function(){return 1},S=C.length;S--;)for(var O=C.length;O--;){var I=(0,c["default"])(E[C[S]],E[C[O]],P);I&&I.forEach(function(t,r,n){var e=n[r-1];e&&k[t.index].push(e.index)})}var T=k.map(function(t,r){return a({},_[r],{live:!1})});k.forEach(function(t,r){var n=t.filter(function(r,n,e){return t.indexOf(r)==n});n.forEach(function(t){return T[t].live=!0});var e={};t.forEach(function(t){return e[t]=(0|e[t])+1}),T[r].weight=n.map(function(t){return e[t]}),T[r].links=n.map(function(t){return T[t]}),T[r].live=T[r].live||n.length>0}),T=T.filter(function(t){var r=t.live;return r}),T.forEach(function(t,r){return t.index=r}),T.forEach(function(t,r){return t.links=t.links.map(function(t){return t.index})});var j=(0,l.build)(T),B=C.map(function(t){var r=_[t],n=r.x,e=r.y,a=j.nodes.find(function(t){return t.x==n&&t.y==e});return a?{node:a}:null}).filter(function(t){return t}),R=r*n/1,q=r*n/12;return B.forEach(function(t){return t.reachables=B.filter(function(r){var n=s["default"].sqrt_distance(r.node,t.node);return q<n&&n<R})}),j.endPoints=B,j.nodes.forEach(function(t){return t.arcs_leaving.forEach(function(r,n){return r.weight=T[t.index].weight[n]})}),{max_weight:j.arcs.reduce(function(t,r){return Math.max(t,r.weight)},0),perlin:p,faces:b,vertices:_,graph:k,network:j,endPoints:B}}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),o=e(a),i=function(t,r,n,e,a){return(r-e)*t.x+(n-a)*t.y},u=function(t){return t*t*t*(t*(6*t-15)+10)},c=function(t,r,n){return t*(1-n)+r*n},l=function(t,r,n){var e=Math.ceil(t/n)+2,a=Math.ceil(r/n)+2,l=Array.from({length:e*a}).map(function(){return o["default"].normalize({x:Math.random(),y:Math.random()})});return function(t,r){var a=0|t/n,o=0|r/n;return t=t/n-a,r=r/n-o,c(c(i(l[(a+1)*e+(o+1)],t,r,0,0),i(l[(a+1)*e+(o+2)],t,r,0,1),u(r)),c(i(l[(a+2)*e+(o+1)],t,r,1,0),i(l[(a+2)*e+(o+2)],t,r,1,1),u(r)),u(t))}};t.exports={createPerlin:l}},function(t,r){"use strict";var n=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},e=function(t){return t.x*t.x+t.y*t.y},a=function(t){return e(t)},o=function(t){return Math.sqrt(a(t))},i=function(t,r){return o(n(t,r))},u=function(t,r){return a(n(t,r))},c=function(t){var r=o(t);return{x:t.x/r,y:t.y/r}};t.exports={sub:n,sqrt_length:a,length:o,sqrt_distance:u,distance:i,normalize:c,lerp:function(t,r,n){return{x:t.x*(1-n)+r.x*n,y:t.y*(1-n)+r.y*n}}}},function(t,r,n){"use strict";function e(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var a=function(){function t(t,r){var n=[],e=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){a=!0,o=c}finally{try{!e&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(5),i=function(t){var r=(0,o.delaunayTriangulation)(t),n=r.map(function(r){return o.circonscritCircle.apply(void 0,e(r.map(function(r){return t[r]}))).O}),i=[];return t.forEach(function(t,n){var o=[];if(r.forEach(function(t,r){t.some(function(t){return n==t})&&o.push([].concat(e(t.filter(function(t){return n!=t})),[r]))}),0!=o.length){for(var u=o.shift(),c=a(u,3),l=c[0],f=c[1],s=c[2],h=[s];l!=f;){var d=o.findIndex(function(t){return t[0]==f||t[1]==f});if(d==-1)return;f=o[d][0]==f?o[d][1]:o[d][0],h.push(o.splice(d,1)[0][2])}i.push(h)}}),{faces:i,vertices:n}};t.exports={voronoiTesselation:i}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var o=n(3),i=e(o),u=n(6),c=e(u),l=function(t,r,n){var e=c["default"].intersection({x:(t.x+r.x)/2,y:(t.y+r.y)/2},{x:t.y-r.y,y:-(t.x-r.x)},{x:(n.x+r.x)/2,y:(n.y+r.y)/2},{x:n.y-r.y,y:-(n.x-r.x)});return{O:e,sqrt_radius:i["default"].sqrt_distance(t,e)}},f=function(t){var r=-(1/0),n=-(1/0),e=1/0,a=1/0;return t.forEach(function(t){var o=t.x,i=t.y;r=Math.max(r,o),n=Math.max(n,i),e=Math.min(e,o),a=Math.min(a,i)}),r+=10,n+=10,e-=10,a-=10,[{x:e,y:a},{x:e,y:n+(n-a)},{x:r+(r-e),y:e}]},s=function(t){var r=f(t),n=[{vertices:Array.from({length:3},function(r,n){return t.length+n}),circle:l.apply(void 0,a(r))}];return t.push.apply(t,a(r)),t.slice(0,-3).forEach(function(r,e){for(var o=[],u=n.length;u--;){var c=n[u],f=c.vertices,s=c.circle;i["default"].sqrt_distance(s.O,r)<=s.sqrt_radius&&(n.splice(u,1),f.forEach(function(t,r,n){var e=(r+1)%3,a=Math.min(n[r],n[e]),i=Math.max(n[r],n[e]),u=o.findIndex(function(t){return t[0]==a&&t[1]==i});u==-1?o.push([a,i]):o.splice(u,1)}))}o.forEach(function(r){var o=[].concat(a(r),[e]);n.push({vertices:o,circle:l.apply(void 0,a(o.map(function(r){return t[r]})))})})}),t.splice(-3,3),n.filter(function(r){return r.vertices.every(function(r){return r<t.length})}).map(function(t){return t.vertices})};t.exports={circonscritCircle:l,delaunayTriangulation:s}},function(t,r){"use strict";var n=1e-5,e=function(t,r,e,a){if(Math.abs(r.x*a.y-r.y*a.x)<n)return Math.abs(r.x*(t.y-e.y)-r.y*(t.y-e.y))<n&&{x:t.x,y:t.y};var o=void 0;return o=Math.abs(a.x)<n?(e.x-t.x)/r.x:Math.abs(a.y)<n?(e.y-t.y)/r.y:((t.x-e.x)/a.x-(t.y-e.y)/a.y)/(r.y/a.y-r.x/a.x),{x:t.x+r.x*o,y:t.y+r.y*o}};t.exports={intersection:e}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=n(3),i=e(o);t.exports=function(t,r,n){n=n||function(t){return t.length};for(var e=i["default"].distance(t,r),o=[{node:t,w:0,f:e,h:e}],u={},c=function(){var t=o.shift();if(t.node==r){for(var e=t,a=[e.node];e.parent;)e=e.parent,a.unshift(e.node);return{v:a}}t.node.arcs_leaving.forEach(function(e){if(!u[e.node_b.index]){var a=t.w+n(e),c=o.find(function(t){return t.node==e.node_b});if(c&&c.w>a)c.w=a,c.f=a+c.h,c.parent=t;else if(!c){var l=i["default"].distance(r,e.node_b);o.push({node:e.node_b,w:a,h:l,f:a+l,parent:t})}}}),u[t.node.index]=!0,o=o.sort(function(t,r){return t.f>r.f?1:-1})};o.length;){var l=c();if("object"===("undefined"==typeof l?"undefined":a(l)))return l.v}}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),o=e(a),i=n(9),u=e(i),c=function(t){var r=[],n=[];return t.forEach(function(t,n){var e=t.x,a=t.y;return r.push({index:n,x:e,y:a,arcs_entering:[],arcs_leaving:[],exchanges:[]})}),t.forEach(function(t,e){var a=t.links;return a.forEach(function(t){var a=r[e],i=r[t],u={node_a:a,node_b:i,index:n.length,length:o["default"].distance(a,i)};a.arcs_leaving.push(u),i.arcs_entering.push(u),n.push(u)})}),r.forEach(function(t){return t.exchanges=(0,u["default"])(t)}),{nodes:r,arcs:n}};t.exports={buildExchange:u["default"],build:c}},function(t,r){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var e=function(t,r){return Math.atan2(r.y-t.y,r.x-t.x)},a=function(t){var r=[].concat(n(t.arcs_entering.map(function(r){return{angle:e(t,r.node_a)-.001,arc:r,entering:!0,node:r.node_a}})),n(t.arcs_leaving.map(function(r){return{angle:e(t,r.node_b)+.001,arc:r,entering:!1,node:r.node_b}}))).sort(function(t,r){return t.angle>r.angle?1:-1}),a=[];return t.arcs_entering.forEach(function(r){return t.arcs_leaving.forEach(function(t){r.node_a!=t.node_b&&a.push({arc_a:r,arc_b:t,block:[],pass:[],index:a.length,node_a:r.node_a,node_b:t.node_b})})}),a.forEach(function(t){for(var n=t.arc_a,e=t.arc_b,o=r.findIndex(function(t){return t.arc==n}),i=[e];r[o%r.length].arc!=e;o++){var u=r[o%r.length],c=u.arc,l=u.entering;l||i.push(c)}for(var f=function(){var n=r[o%r.length],e=n.arc,u=n.entering;if(!u)return"continue";var c=e;i.forEach(function(r){var n=a.find(function(t){return t.arc_a==c&&t.arc_b==r});n&&(n.block.push(t),t.pass.push(n))})};r[o%r.length].arc!=n;o++){f()}}),a};t.exports=a},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var o=function(){function t(t,r){var n=[],e=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){a=!0,o=c}finally{try{!e&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(3),u=e(i);t.exports=function(t,r){for(var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],e=[],i=n*n,c=r.length;c--;)for(var l=c;l--;)i>u["default"].sqrt_distance(r[c],r[l])&&e.push([l,c]);var f=[];e.forEach(function(t){var r=o(t,2),n=r[0],e=r[1],i=f.filter(function(t){return t.indexOf(n)>=0||t.indexOf(e)>=0});if(0==i.length)f.push([n,e]);else{var u,c,l=(u=[]).concat.apply(u,a(i).concat([n,e])).filter(function(t,r,n){return n.indexOf(t)==r});i.forEach(function(t){return t.length=0}),(c=i[0]).push.apply(c,a(l))}});var s=t.slice(),h=r.slice();return f.filter(function(t){return t.length>=0}).forEach(function(t){var n,e={x:0,y:0};t.forEach(function(t){e.x+=r[t].x,e.y+=r[t].y}),e.x/=t.length,e.y/=t.length;var o=h.length;h.push(e),s=s.map(function(r){return r.map(function(r){return t.indexOf(r)>=0?o:r}).filter(function(t,r,n){return n.indexOf(t)==r})}),s[o]=(n=[]).concat.apply(n,a(t.map(function(t){return s[t]}))).filter(function(t,r,n){return n.indexOf(t)==r}).filter(function(r){return t.indexOf(r)==-1&&r!=o}),t.forEach(function(t){return s[t]=[]})}),{graph:s,vertices:h}}},function(t,r,n){"use strict";var e=n(12),a=function(t,r,n,e){for(var a=[];a.length<e;){var o={x:Math.random()*r,y:Math.random()*n};Math.random()>2*t(o.x,o.y)+.5&&a.push(o)}return a};t.exports=function(t,r,n,o){for(var i=a(t,r,n,o),u=2;u--;)(0,e.step)(i,[],r,n);return i}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),o=e(a),i=50,u=1e3,c=5e-4,l=function(t,r,n,e){var a=t.map(function(a){var o={x:0,y:0};t.forEach(function(t){if(t!=a){var r=t.x-a.x,n=t.y-a.y,e=Math.max(9,r*r+n*n);if(!(e>2e6)){var u=-i/(e*Math.sqrt(e));o.x+=r*u,o.y+=n*u}}}),r.forEach(function(t){var r=t.x-a.x,n=t.y-a.y,e=Math.max(400,r*r+n*n);if(!(e>2e6)){var i=u/(e*Math.sqrt(e));o.x+=r*i,o.y+=n*i}});var l={x:n/2,y:e/2},f=l.x-a.x,s=l.y-a.y,h=c;return o.x+=f*h,o.y+=s*h,o});return t.forEach(function(t,r){t.x+=a[r].x,t.y+=a[r].y}),Math.sqrt(a.reduce(function(t,r){return Math.max(t,o["default"].sqrt_length(r))},0))},f=function(t,r,n){for(var e=r*n*.9/t/Math.PI,a=Math.sqrt(e),i=.6*a,u=[],c=function(){var t=30,a=void 0;do a={x:i+Math.random()*(r-2*i),y:i+Math.random()*(n-2*i)};while(t-- >0&&u.some(function(t){return o["default"].sqrt_distance(t,a)<e}));t>1&&u.push(a)};u.length<t;)c();return u},s=function(){for(var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=t.width||100,n=t.height||100,e=f(t.n_well||1,r,n),a=Array.from({length:t.n_point||1}).map(function(){return{x:Math.random()*r,y:Math.random()*n,m:Math.random()}}),o=1,i=50;o>0&&i-- >0;)o=l(a,e,r,n);return console.log(o),a=a.filter(function(t){return t.x>10&&t.x<r-10&&t.y>10&&t.y<n-10}),{points:a,wells:e}};t.exports={generate:s,step:l}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var o=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},i=n(14),u=e(i),c=n(15),l=n(18),f=n(19),s=e(f),h=n(3),d=e(h),p=0;t.exports=function(t,r,n){var e=document.createElement("canvas");e.width=t,e.height=r;var i=e.getContext("2d"),f=[],h=[],v=function(t,r){var n=d["default"].sub(r.position.arc.node_b,r.position.arc.node_a),e=5*(Math.random()>.5?1:-1)*(Math.random()+1)/d["default"].length(n);return o({},t,{c:(0,u["default"])(r),l:50*Math.floor(Math.random()+1),t:0,v:{x:-n.y*e+2*Math.random(),y:n.x*e},s:.5*(Math.random()+1),o:.3*Math.random()+.3})};window.addEventListener("click",function(t){if(t.ctrlKey){(0,l.shake)();var r={x:t.pageX-e.getBoundingClientRect().left,y:t.pageY-e.getBoundingClientRect().top};f.push((0,s["default"])(i,r,"#aaa"))}});var g=function(){i.clearRect(0,0,t,r),n.filter(function(t){return t.control&&0==t.game.waitAfterScore}).forEach(function(t){var r=[(0,c.getCarrierPosition)(t,p,0),t.position.arc.node_b].concat(a(t.decision.path));i.save(),i.lineCap="round",i.lineJoin="round",i.strokeStyle=(0,u["default"])(t),i.globalAlpha=.2,i.lineWidth=7,i.beginPath(),i.moveTo(r[0].x,r[0].y),r.forEach(function(t){return i.lineTo(t.x,t.y)}),i.stroke(),i.globalAlpha=.5,i.lineWidth=2,i.beginPath(),i.moveTo(r[0].x,r[0].y),r.forEach(function(t){return i.lineTo(t.x,t.y)}),i.stroke(),i.restore()}),n.forEach(function(t){var r=(0,c.getCarrierPosition)(t,p,2);t.position.velocity>.5&&Math.random()>.9&&h.push(v(r,t)),i.beginPath(),i.fillStyle=(0,u["default"])(t),i.arc(r.x,r.y,2.5,0,2*Math.PI),i.fill(),t.game.dead&&t.control&&(i.strokeStyle=(0,u["default"])(t),i.lineWidth=5,i.beginPath(),i.moveTo(r.x-10,r.y-10),i.lineTo(r.x+10,r.y+10),i.stroke(),i.beginPath(),i.moveTo(r.x-10,r.y+10),i.lineTo(r.x+10,r.y-10),i.stroke())});for(var e=h.length;e--;){h[e].t++;var o=h[e],d=o.x,g=o.y,y=o.v,x=o.t,m=o.l,b=o.s,_=o.c,M=o.o;x>m&&h.splice(e,1);var A=x/m;i.save(),i.beginPath(),i.arc(d+y.x*A,g+y.y*A,(1+Math.abs(.2-A))*b,0,2*Math.PI),i.fillStyle=_,i.globalAlpha=Math.max(0,1-2*(A-.5))*M,i.fill(),i.restore()}n.filter(function(t){return 100==t.game.waitAfterScore}).forEach(function(t){(0,l.shake)(),f.push((0,s["default"])(i,t.position.arc.node_a,(0,u["default"])(t)))});for(var w=f.length;w--;)f[w]()&&f.splice(w,1);n.filter(function(t){return t.control}).forEach(function(t){var r=0==t.decision.path.length?t.position.arc.node_b:t.decision.path[t.decision.path.length-1];i.save(),i.beginPath(),i.strokeStyle="#fff",i.lineWidth=3,i.moveTo(r.x,r.y),i.lineTo(r.x,r.y-15),i.stroke(),i.beginPath(),i.fillStyle=(0,u["default"])(t),i.arc(r.x,r.y-15,6,0,2*Math.PI),i.stroke(),i.fill(),i.restore()})};return{canvas:e,update:g}}},function(t,r){"use strict";var n=360*Math.random(),e=function(t){return t.control?"hsl("+(n+57*t.index)%360+", 76%, 65%)":"#ddd"};t.exports=e},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),o=e(a),i=n(16),u=e(i),c=n(17),l=function(t,r){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],e=t.node_a,a=t.node_b,i=o["default"].sub(a,e),u=o["default"].length(i),c=o["default"].lerp(e,a,r);return{x:c.x-i.y/u*n,y:c.y+i.x/u*n}},f=function(t,r){var n=t.position;return l(n.arc,n.k,r)},s={},h=function(t,r,n){var e=(1-t.position.k)*t.position.arc.length,a=t.position.k*t.position.arc.length;if(s[n]=s[n]||{},e<n&&t.decision.path[0]){if(!s[n][t.index]){var o=t.position.arc,i=t.position.arc.node_b.arcs_leaving.find(function(r){return r.node_b==t.decision.path[0]});s[n][t.index]=(0,c.exchangeCurve)(r,n,o.node_a,o.node_b,i.node_b)}var l=s[n][t.index],h=l.A,d=l.C,p=l.B;return(0,u["default"])(h,d,p,.5*(1-e/n))}if(a<n&&s[n][t.index]){var v=s[n][t.index],g=v.A,y=v.C,x=v.B;return(0,u["default"])(g,y,x,a/n*.5+.5)}return s[n][t.index]=null,f(t,r)};t.exports={getCarrierPosition:h,carrierOnArc:f}},function(t,r){"use strict";var n=function(t,r,n,e){var a=1-e;return{x:t.x*a*a+2*e*a*r.x+e*e*n.x,y:t.y*a*a+2*e*a*r.y+e*e*n.y}};t.exports=n},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),o=e(a),i=n(6),u=function(t,r,n,e,a){var u=o["default"].sub(n,e),c=o["default"].sub(a,e),l=o["default"].length(u),f=o["default"].length(c),s={x:e.x+u.x/l*r+u.y/l*t,y:e.y+u.y/l*r-u.x/l*t},h={x:e.x+c.x/f*r-c.y/f*t,y:e.y+c.y/f*r+c.x/f*t},d=(0,i.intersection)(s,u,h,c);return{A:s,C:d,B:h}};t.exports={exchangeCurve:u}},function(t,r){"use strict";var n=0,e=40;t.exports={shake:function(){n=e},h:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return 4*(n/e)*(n/e)*Math.sin(n*Math.PI*.2+t)},update:function(){return n=Math.max(0,n-1)}}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(20),o=e(a),i=n(3),u=e(i),c=function(t){var r=arguments.length<=1||void 0===arguments[1]?3:arguments[1];return(1-.5*t)*Math.abs(Math.sin(t*Math.PI*r))};t.exports=function(t,r,n){var e=Array.from({length:20}).map(function(){return{x:0,y:0,r:6*Math.random()-3,l:50*(.5+Math.random()),c:o["default"][Math.floor(Math.random()*o["default"].length)],v:u["default"].normalize({x:Math.random()-.5,y:Math.random()-.5}),s:.23*(1+Math.random()),n:1+Math.ceil(1.5*Math.random()),e:1+.2*Math.random()}}),a=100,i=a;return function(){i--;var o=1-i/a,u=Math.sqrt(o);if(o<.25&&(t.save(),t.beginPath(),t.globalAlpha=.8*Math.max(0,1-10*(o-.15)),t.fillStyle=n,t.beginPath(),t.arc(r.x,r.y,10+120*o,0,2*Math.PI),t.fill(),t.restore()),e.forEach(function(n){t.save(),t.fillStyle="rgba(0,0,0,0.2)",t.globalAlpha=Math.max(0,1-5*(o*n.e-.8)),t.beginPath(),t.arc(r.x+n.v.x*n.l*u,r.y+n.v.y*n.l*u,20*n.s,0,2*Math.PI),t.fill(),t.restore()}),e.forEach(function(n){n.r+=n.r<0?.02:-.02;var e=c(o,n.n),a=n.s*(.6+e);t.save(),t.globalAlpha=Math.max(0,1-5*(o*n.e-.8)),t.translate(r.x+n.v.x*n.l*u,r.y+n.v.y*n.l*u-10*e),t.scale(a,a),t.rotate(n.r),t.translate(-20,-20),t.drawImage(n.c,0,0),t.restore()}),i<=0)return e.length=0,!0}}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(21),o=e(a),i=n(22);t.exports=Array.from({length:30}).map(function(){var t=(0,i.create)(null,"canvas");t.width=40,t.height=40;var r=t.getContext("2d");return r.save(),r.scale(.4,.4),(0,o["default"])(r),r.restore(),t})},function(t,r){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var e=function(){function t(t,r){var n=[],e=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){a=!0,o=c}finally{try{!e&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(t,r){t.moveTo(r[0][0],r[0][1]);for(var n=r.length;n--;)t.lineTo(r[n][0],r[n][1])};t.exports=function(t){var r="#b58a1c",o="#df8d34",i=[[7,20],[33,7],[66,7],[95,20],[91,30],[66,18],[33,18],[10,30],[80,45],[68,70],[50,98],[32,70],[20,45],[34,37],[57,87],[67,57],[39,26],[64,29],[37,84],[47,67]].map(function(t){return t.map(function(t){return t+12*(Math.random()-.5)})}),u=[].concat(n(i.slice(0,4).map(function(t,r){return[(t[0]+i[7-r][0])/2,(t[1]+i[7-r][1])/2]})),n(i.slice(8,13)));t.beginPath(),t.fillStyle=r,a(t,[u[6]].concat(n([].concat(n(u.slice(6,9)),[u[0]]).map(function(t){return[t[0]-5,t[1]]})),[i[0],[50,20]])),t.fill(),t.beginPath(),t.fillStyle=o,a(t,u),t.fill(),t.save(),t.beginPath(),a(t,u),t.clip();var c=70*Math.random()+335,l=120*Math.random()+45;!function(){var r=5*Math.random()+10,n="hsl("+c+",80%,30%)",a="hsl("+c+",90%,35%)";i.slice(-7,-4).forEach(function(o){var i=e(o,2),u=i[0],c=i[1];t.beginPath(),t.fillStyle=n,t.arc(u-3,c,r+.5,0,2*Math.PI),t.fill(),t.beginPath(),t.fillStyle=a,t.arc(u,c,r,0,2*Math.PI),t.fill()})}(),!function(){var r=8*Math.random()+5,n="hsl("+l+",85%,30%)",a="hsl("+l+",95%,35%)";i.slice(-4).forEach(function(o){var i=e(o,2),u=i[0],c=i[1],l=6*Math.random();t.beginPath(),t.fillStyle=n,t.arc(u-3,c,r+.5,l,l+Math.PI),t.fill(),t.beginPath(),t.fillStyle=a,t.arc(u,c,r,l,l+Math.PI),t.fill()})}(),t.restore(),t.beginPath(),t.fillStyle=r,a(t,i.slice(0,8)),t.fill(),t.beginPath(),t.lineCap="round",t.strokeStyle="#000",a(t,[].concat(n(i.slice(0,4)),[u[3]],n(i.slice(8,11)),n([].concat(n(u.slice(6,9)),[u[0]]).map(function(t){return[t[0]-5,t[1]]})),[i[0]])),t.lineWidth=1.5,t.stroke()}},function(t,r){"use strict";var n=function(t,r){var n=document.createElement(r||"div");return n.setAttribute("class",t),n};t.exports={create:n}},function(t,r,n){"use strict";var e=n(24),a=n(27),o=n(25),i=function(t,r,n){return r.forEach(function(n){if(n.game.waitAfterScore>0)return void n.game.waitAfterScore--;if(!(n.game.dead>0)){n.position.k>=1&&!function(){0==n.decision.path.length&&(n.control&&(n.game.score++,n.game.waitAfterScore=100),n.decision.path=(0,a.choseNewRoute)(t,n));var r=n.decision.path.shift();n.position.arc=n.position.arc.node_b.arcs_leaving.find(function(t){return t.node_b==r}),n.position.k=0}();var i=n.control?Math.min(n.info.maxAcc,Math.max(-n.info.maxBrake,n.control.acceleration)):(0,e.computeAcceleration)(r,n);if(n.position.velocity=Math.max(0,Math.min(n.info.maxVelocity,n.position.velocity+i)),n.position.k+=n.position.velocity/n.position.arc.length,n.control){var u=(0,o.getCarrierAheadCarrier)(r,n);u&&u.distance<2}}})};t.exports={step:i}},function(t,r,n){"use strict";var e=n(25),a=function(t,r){var n=(0,e.getCarrierAheadCarrier)(t,r)||{distance:1/0},a=n.distance;return a>31?r.info.maxAcc:a<19?-r.info.maxBrake:0};t.exports={computeAcceleration:a}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(26),o=e(a),i=[],u=function(t,r){return r.index in i?i[r.index]:i[r.index]||o["default"].getCarrierAheadCarrier(t,r)},c=function(t,r){0==r.index&&(i.length=0);var n=u(t,r);if(!n)return null;for(var e=[],a=n.carrier;!e.some(function(t){return t==a});){var o=u(t,a);if(!o)return n;e.push(a),a=o.carrier}return e.every(function(t){return t.index>=r.index})?null:n};t.exports={getCarrierAheadCarrier:c}},function(t,r){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},a=23,o=function(t,r){return t.filter(function(t){return t.position.arc==r})},i=function(t,r,n){return o(t,r).map(function(t){var r=(1-t.position.k)*t.position.arc.length;return r<n&&{carrier:t,distance:n-r}}).filter(function(t){return t})},u=function(t,r,e,i){var u;if(i>a||i<.3*a)return[];var c=e?r.node_b.exchanges.find(function(t){return t.arc_a==r&&t.arc_b==e}).pass.map(function(t){return t.arc_a}):r.node_b.exchanges.map(function(t){return t.arc_a}).filter(function(t){return r!=t})&&[];return(u=[]).concat.apply(u,n(c.map(function(r){return o(t,r).map(function(t){var r=(1-t.position.k)*t.position.arc.length;return r<a&&{carrier:t,distance:r<i?i-r:0}}).filter(function(t){return t})})))},c=function(t,r,e,a){var i,u=[];return r.node_b.exchanges.filter(function(t){return t.arc_a==r}).forEach(function(t){u.push.apply(u,n(t.pass.map(function(t){return t.arc_a}))),u.push.apply(u,n(t.block.map(function(t){return t.arc_a}))),u.push(t.arc_b)}),(i=[]).concat.apply(i,n(u.map(function(r){return o(t,r).map(function(t){var r=t.position.k*t.position.arc.length;return r<10&&{carrier:t,distance:a+r}}).filter(function(t){return t})})))},l=function s(t,r,a,o,l){var f=arguments.length<=5||void 0===arguments[5]?0:arguments[5];if(f>40)return null;var h=r.node_b.arcs_leaving.find(function(t){return t.node_b==o[0]}),d=(1-a)*r.length,p=[].concat(n(i(t,r,d)),n(u(t,r,h,d)),n(c(t,r,h,d))).filter(function(t){return t.carrier!=l}).reduce(function(t,r){return!t||t.distance>r.distance?r:t},null);return p?e({},p,{distance:p.distance+f}):h&&s(t,h,0,o.slice(1),l,f+d)},f=function(t,r){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return l(t,r.position.arc,r.position.k,r.decision.path,r,n)};t.exports={getCarrierAhead:l,getCarrierAheadCarrier:f}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(7),o=e(a),i=function(t,r){var n=r.position.arc.node_b,e=t.endPoints.find(function(t){return t.node==n}),a=(e&&e.reachables.length&&e.reachables||t.endPoints).map(function(t){return t.node}),i=a[Math.floor(Math.random()*a.length)];return(0,o["default"])(n,i,function(t){return t.length}).slice(1)};t.exports={choseNewRoute:i}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(29),o=e(a),i=n(14),u=e(i),c=n(21),l=e(c),f=n(22),s=function(t){var r=(0,f.create)(o["default"].player),n=(0,f.create)(o["default"].ball);n.style.backgroundColor=(0,u["default"])(t),r.appendChild(n);var e=(0,f.create)(o["default"].touch),a=(0,f.create)(o["default"].letter);a.innerHTML=t.control.key,e.appendChild(a),r.appendChild(e);var i=(0,f.create)(o["default"].score,"canvas");i.width=560,i.height=50,r.appendChild(i);var c=i.getContext("2d");c.scale(.5,.5),c.translate(-25,0);var s=0,h=function(){for(e.setAttribute("class",t.control.acceleration<0?o["default"].touch:o["default"].touchDown);s<t.game.score;)s++,c.translate(40,0),(0,l["default"])(c)};return{dom:r,update:h}};t.exports=function(t){var r=[],n=(0,f.create)("playerDeck"),e=function(){for(var e=t.filter(function(t){return t.control});r.length<e.length;){var a=document.getElementById("instruction");a&&a.parentNode.removeChild(a);var o=s(e[r.length]),i=o.dom,u=o.update;n.appendChild(i),r.push(u)}r.forEach(function(t){return t()})};return{dom:n,update:e}}},function(t,r,n){var e=n(30);"string"==typeof e&&(e=[[t.id,e,""]]);n(32)(e,{});e.locals&&(t.exports=e.locals)},function(t,r,n){r=t.exports=n(31)(),r.push([t.id,".UQ8E{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:2px 10px}._3Sm6{width:20px;height:20px;border-radius:11px;border:2px solid #fff;margin-right:10px}._2HSe,._3qzv,._3Sm6,.b9fR{-ms-flex-negative:0;flex-shrink:0}._3qzv,.b9fR{width:30px;height:30px;border:2px solid #fff;-webkit-transition:border-color .1s;transition:border-color .1s;border-radius:2px;margin-right:10px}.b9fR>._3jVj{color:#999}.b9fR{border-color:#999}._3jVj{-webkit-transition:color .1s;transition:color .1s;color:#fff;font-family:consolas;font-size:20px;margin:6px}",""]),r.locals={player:"UQ8E",ball:"_3Sm6",score:"_2HSe",touchDown:"b9fR",touch:"_3qzv",letter:"_3jVj"}},function(t,r){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],r=0;r<this.length;r++){var n=this[r];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(r,n){"string"==typeof r&&(r=[[null,r,""]]);for(var e={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(e[o]=!0)}for(a=0;a<r.length;a++){var i=r[a];"number"==typeof i[0]&&e[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(t,r,n){function e(t,r){for(var n=0;n<t.length;n++){var e=t[n],a=d[e.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](e.parts[o]);for(;o<e.parts.length;o++)a.parts.push(l(e.parts[o],r))}else{for(var i=[],o=0;o<e.parts.length;o++)i.push(l(e.parts[o],r));d[e.id]={id:e.id,refs:1,parts:i}}}}function a(t){for(var r=[],n={},e=0;e<t.length;e++){var a=t[e],o=a[0],i=a[1],u=a[2],c=a[3],l={css:i,media:u,sourceMap:c};n[o]?n[o].parts.push(l):r.push(n[o]={id:o,parts:[l]})}return r}function o(t,r){var n=g(),e=m[m.length-1];if("top"===t.insertAt)e?e.nextSibling?n.insertBefore(r,e.nextSibling):n.appendChild(r):n.insertBefore(r,n.firstChild),m.push(r);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(r)}}function i(t){t.parentNode.removeChild(t);var r=m.indexOf(t);r>=0&&m.splice(r,1)}function u(t){var r=document.createElement("style");return r.type="text/css",o(t,r),r}function c(t){var r=document.createElement("link");return r.rel="stylesheet",o(t,r),r}function l(t,r){var n,e,a;if(r.singleton){var o=x++;n=y||(y=u(r)),e=f.bind(null,n,o,!1),
a=f.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(r),e=h.bind(null,n),a=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(r),e=s.bind(null,n),a=function(){i(n)});return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else a()}}function f(t,r,n,e){var a=n?"":e.css;if(t.styleSheet)t.styleSheet.cssText=b(r,a);else{var o=document.createTextNode(a),i=t.childNodes;i[r]&&t.removeChild(i[r]),i.length?t.insertBefore(o,i[r]):t.appendChild(o)}}function s(t,r){var n=r.css,e=r.media;if(e&&t.setAttribute("media",e),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function h(t,r){var n=r.css,e=r.sourceMap;e&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */");var a=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var d={},p=function(t){var r;return function(){return"undefined"==typeof r&&(r=t.apply(this,arguments)),r}},v=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,x=0,m=[];t.exports=function(t,r){r=r||{},"undefined"==typeof r.singleton&&(r.singleton=v()),"undefined"==typeof r.insertAt&&(r.insertAt="bottom");var n=a(t);return e(n,r),function(t){for(var o=[],i=0;i<n.length;i++){var u=n[i],c=d[u.id];c.refs--,o.push(c)}if(t){var l=a(t);e(l,r)}for(var i=0;i<o.length;i++){var c=o[i];if(0===c.refs){for(var f=0;f<c.parts.length;f++)c.parts[f]();delete d[c.id]}}}};var b=function(){var t=[];return function(r,n){return t[r]=n,t.filter(Boolean).join("\n")}}()},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(34),o=e(a),i=n(36),u=e(i),c=n(22);t.exports=function(t,r,n,e,a){var i=[],l=(0,c.create)(o["default"].list),f=function(){for(var o=t.filter(function(t){return t.control});i.length<o.length;){var c=(0,u["default"])(340,260,t,r,n,e,a,o[i.length]),f=c.dom,s=c.update;l.appendChild(f),i.push(s)}i.forEach(function(t){return t()})};return{dom:l,update:f}}},function(t,r,n){var e=n(35);"string"==typeof e&&(e=[[t.id,e,""]]);n(32)(e,{});e.locals&&(t.exports=e.locals)},function(t,r,n){r=t.exports=n(31)(),r.push([t.id,"._2QLb{overflow:hidden;box-shadow:0 0 15px 0 rgba(0,0,0,.65);margin:4px;border-right:6px solid #fff;border-radius:2px}._3zBB{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}",""]),r.locals={cam:"_2QLb",list:"_3zBB"}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var o=n(3),i=e(o),u=n(22),c=n(14),l=e(c),f=n(15),s=n(34),h=e(s),d=n(37),p=e(d),v=n(17),g="#2e3042",y=function(){var t={};return function(r,n,e){var a=(0,f.getCarrierPosition)(e,3,1.5),o=Math.min(.9,e.position.velocity)/.9,u=i["default"].normalize(i["default"].sub(e.position.arc.node_b,e.position.arc.node_a));e.game.waitAfterScore||(a.x+=70*u.x*(2*o+1)/3,a.y+=70*u.y*(2*o+1)/3);var c=5-2*o,l={x:a.x*c-r/2,y:a.y*c-n/2,z:c},s=t[e.index]||l,h=.03,d={x:(1-h)*s.x+h*l.x,y:(1-h)*s.y+h*l.y,z:(1-h)*s.z+h*l.z};return t[e.index]=d}};t.exports=function(t,r,n,e,o,i,c,s){var d=(0,u.create)(h["default"].cam),x=(0,u.create)(h["default"].canvas,"canvas");d.style.borderColor=(0,l["default"])(s),d.appendChild(x),x.width=t,x.height=r;var m=x.getContext("2d"),b=y(),_=(0,p["default"])(m,t,r,100),M=function(){var e=b(t,r,s);m.beginPath(),m.rect(0,0,t,r),m.fillStyle=g,m.fill(),m.save(),m.translate(-e.x,-e.y),m.scale(e.z,e.z),m.drawImage(o.night.s,0,0,o.night.s.width/o.night.r,o.night.s.height/o.night.r),m.drawImage(o.night.d,0,0,o.night.d.width/o.night.r,o.night.d.height/o.night.r),m.drawImage(o.roads_precise.s,0,0,o.roads_precise.s.width/o.roads_precise.r,o.roads_precise.s.height/o.roads_precise.r),m.save(),m.beginPath();var u=(0,f.getCarrierPosition)(s,i,c);m.moveTo(u.x,u.y);var h=[s.position.arc.node_a,s.position.arc.node_b].concat(a(s.decision.path));h.forEach(function(t,r,n){if(n[r-1]&&n[r+1]){var e=(0,v.exchangeCurve)(i,c,n[r-1],n[r],n[r+1]),a=e.A,o=e.C,u=e.B;1==r&&(1-s.position.k)*s.position.arc.length<c?m.quadraticCurveTo(o.x,o.y,u.x,u.y):(m.lineTo(a.x,a.y),m.quadraticCurveTo(o.x,o.y,u.x,u.y))}}),m.lineTo(h[h.length-1].x,h[h.length-1].y),m.lineCap="round",m.lineJoin="round",m.globalCompositeOperation="lighten",m.strokeStyle=(0,l["default"])(s),m.globalAlpha=.5,m.lineWidth=2,m.stroke(),m.restore(),n.forEach(function(t){var r=(0,f.getCarrierPosition)(t,i,c);m.beginPath(),m.fillStyle=(0,l["default"])(t),m.arc(r.x,r.y,.8,0,2*Math.PI),m.fill()}),m.restore(),s.game.waitAfterScore&&_(100-s.game.waitAfterScore)};return{dom:d,update:M}}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(38),o=e(a);t.exports=function(t,r,n,e){var a=[],i=700/e,u=100/e,c=0;return function(l){var f=l/e;for(l!=e&&0!=l||(a.length=0,c=0),f<.3?c+=u:f<.4?c+=u/2:f<.5&&(c+=u/4);a.length<c;)a.push({x:(a.length%3/3+.3*Math.random()-.3)*r*1.4,y:-100,i:Math.floor(Math.random()*o["default"].length),r:6*Math.random(),s:.2+.2*Math.random()});t.save(),t.beginPath(),t.fillStyle="#333",t.globalAlpha=.6*Math.min(4*(1-2*Math.abs(f-.5)),1),t.rect(0,0,r,n),t.fill(),t.restore();for(var s=a.length;s--;)a[s].x+=.3*i,a[s].y+=i,a[s].r+=.02,t.save(),t.translate(a[s].x,a[s].y),t.scale(a[s].s,a[s].s),t.rotate(a[s].r),t.drawImage(o["default"][a[s].i],0,0),t.restore()}}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(21),o=e(a),i=n(22);t.exports=Array.from({length:30}).map(function(){var t=(0,i.create)(null,"canvas");t.width=150,t.height=150;var r=t.getContext("2d");return r.save(),r.scale(1.5,1.5),(0,o["default"])(r),r.restore(),t})},function(t,r,n){t.exports=n.p+"index.html"},function(t,r){"use strict";t.exports=function(t){var r={};document.addEventListener("keydown",function(n){var e=void 0,a=n.which;if(a>=65&&a<=90&&(e=n.key),e){if(!r[a]){var o=t.find(function(t){return!t.control});if(!o)return;o.game.score=0,o.game.waitAfterScore=0,o.control={key:e,color:a,acceleration:0},r[a]=o}var i=r[a],u=i.control,c=i.info;u.acceleration=c.maxAcc}}),document.addEventListener("keyup",function(t){if(r[t.which]){var n=r[t.which],e=n.control,a=n.info;e.acceleration=-a.maxBrake}})}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},o=n(3),i=e(o),u=n(42),c=e(u),l=n(22),f="#2e3042";document.body.style.backgroundColor=f,t.exports=function(t,r,n,e,o,u){var s=(0,l.create)(null,"canvas"),h=(0,l.create)(null,"canvas");h.width=s.width=t*n,h.height=s.height=r*n;var d=s.getContext("2d");d.save(),d.scale(n,n);var p=h.getContext("2d");p.save(),p.scale(n,n),d.save(),d.fillStyle=f,d.rect(0,0,t,r),d.fill(),d.restore();var v=document.createElement("canvas");v.width=t,v.height=r;var g=v.getContext("2d");(0,c["default"])(g,t,r,u,.24,68),d.save(),d.globalCompositeOperation="overlay",d.drawImage(v,0,0),d.restore(),d.save(),d.globalAlpha=.035,d.globalCompositeOperation="lighten",d.strokeStyle="#fff",d.lineWidth=1,e.forEach(function(t){d.beginPath(),d.moveTo(o[t[0]].x,o[t[0]].y);for(var r=t.length;r--;)d.lineTo(o[t[r]].x,o[t[r]].y);d.stroke()}),d.restore(),d.restore(),p.restore();var y=[],x=function(){var t=e[Math.floor(Math.random()*e.length)],r=Math.floor(Math.random()*t.length),n=o[t[r]],u=o[t[(r+1)%t.length]],c=i["default"].sub(u,n),l=5*(Math.random()>.5?1:-1)*(Math.random()+2)/i["default"].length(c);return a({},i["default"].lerp(o[t[r]],o[t[(r+1)%t.length]],Math.random()),{v:{x:-c.y*l+3*Math.random(),y:c.x*l},l:40*Math.floor(Math.random()+1),t:0,s:.9*(Math.random()+1)})},m=function(){p.clearRect(0,0,t*n,r*n),p.save(),p.scale(n,n),d.globalCompositeOperation="lighten",p.fillStyle="#4bc2bb";for(var e=6;e--;)y.push(x());for(var a=y.length;a--;){y[a].t++;var o=y[a],i=o.x,u=o.y,c=o.v,l=o.t,f=o.l,s=o.s;l>f&&y.splice(a,1);var h=l/f;p.beginPath(),p.arc(i+c.x*h,u+c.y*h,(1+Math.abs(.2-h))*s,0,2*Math.PI),p.globalAlpha=.4*Math.abs(.5-.4*h),p.fill()}p.restore()};return{width:t,height:r,r:n,s:s,d:h,u:m}}},function(t,r){"use strict";t.exports=function(t,r,n,e,a,o){for(var i=t.getImageData(0,0,r,n),u=i.data,c=Math.sqrt(r*n)*(a||0),l=r;l--;)for(var f=n;f--;){var s=1-Math.max(0,Math.min(1,.5+2*e(l,f))),h=Math.min(l,f,r-l,n-f),d=h>c?0:1-h/c,p=(1-d)*s+.5*d,v=f+l*r<<2;u[v+0]=0|255*p,u[v+1]=0|255*p,u[v+2]=0|255*p,u[v+3]=0|o}t.putImageData(i,0,0)}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var a=n(44),o=e(a),i=n(22),u="#4bc2bb";t.exports=function(t,r,n,e,a,c,l){var f=(0,i.create)(null,"canvas"),s=(0,i.create)(null,"canvas");s.width=f.width=t*n,s.height=f.height=r*n;var h=f.getContext("2d");h.save(),h.scale(n,n);var d=s.getContext("2d");d.save(),d.scale(n,n),h.save(),e.arcs.forEach(function(t){var r=t.node_a,n=t.node_b,e=t.weight;return(0,o["default"])(h,r,n,u,e/a)}),h.restore(),h.save(),h.fillStyle=u,h.globalAlpha=.2,e.endPoints.forEach(function(t){var r=t.node;h.beginPath(),h.arc(r.x,r.y,9,0,2*Math.PI),h.fill(),h.beginPath(),h.arc(r.x,r.y,7,0,2*Math.PI),h.fill()}),h.globalAlpha=1,h.fillStyle="#fff",h.strokeStyle="#555",h.lineWidth=2,e.endPoints.forEach(function(t){var r=t.node;h.beginPath(),h.arc(r.x,r.y,4,0,2*Math.PI),h.fill(),h.stroke()}),h.restore(),h.restore(),d.restore();var p=function(){return 0};return{width:t,height:r,r:n,s:f,d:s,u:p}}},function(t,r){"use strict";t.exports=function(t,r,n,e,a){t.strokeStyle=e,t.lineCap="round",t.globalCompositeOperation="lighten";var o=3*a+1;t.globalAlpha=.06*a,t.lineWidth=.3*(o*o*.8+o)+.7,t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(n.x,n.y),t.stroke(),t.globalAlpha=1.2*a,t.lineWidth=.2*(o*o*.8+o)+.2,t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(n.x,n.y),t.stroke()}},function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var o=n(3),i=e(o),u=n(17),c=n(22),l="#4bc2bb";t.exports=function(t,r,n,e,o,f,s){var h,d=(0,c.create)(null,"canvas");d.width=t*n,d.height=r*n;var p=d.getContext("2d");return p.save(),p.scale(n,n),p.save(),p.lineWidth=.4,p.strokeStyle=l,p.globalAlpha=.8,e.arcs.forEach(function(t){var r=t.node_a,n=t.node_b,e=(t.weight,i["default"].sub(n,r)),a=i["default"].length(e);if(!(a<s)){e.x/=a,e.y/=a;var o={x:r.x+e.x*s-e.y*f,y:r.y+e.y*s+e.x*f},u={x:n.x-e.x*s-e.y*f,y:n.y-e.y*s+e.x*f};p.beginPath(),p.moveTo(o.x,o.y),p.lineTo(u.x,u.y),p.stroke()}}),(h=[]).concat.apply(h,a(e.nodes.map(function(t){return t.exchanges}))).forEach(function(t){var r=(0,u.exchangeCurve)(f,s,t.node_a,t.arc_a.node_b,t.node_b),n=r.A,e=r.C,a=r.B;p.beginPath(),p.moveTo(n.x,n.y),p.quadraticCurveTo(e.x,e.y,a.x,a.y),p.stroke()}),p.restore(),p.save(),p.fillStyle=l,p.globalAlpha=.2,e.endPoints.forEach(function(t){var r=t.node;p.beginPath(),p.arc(r.x,r.y,9,0,2*Math.PI),p.fill(),p.beginPath(),p.arc(r.x,r.y,7,0,2*Math.PI),p.fill()}),p.globalAlpha=1,p.fillStyle="#fff",p.strokeStyle="#555",p.lineWidth=2,e.endPoints.forEach(function(t){var r=t.node;p.beginPath(),p.arc(r.x,r.y,4,0,2*Math.PI),p.fill(),p.stroke()}),p.restore(),p.restore(),{width:t,height:r,r:n,s:d}}}]);</script></html>