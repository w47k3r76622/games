function Square(t,e,s,h){this.topleft=new Vector(t.x,t.y),this.side=e,this.color=s,this.cx=h,this.apex1=new Vector(t.x,t.y),this.apex2=new Vector(t.x+e,t.y),this.apex3=new Vector(t.x+e,t.y+e),this.apex4=new Vector(t.x,t.y+e),this.apexes=[],this.apexes.push(this.apex1,this.apex2,this.apex3,this.apex4),this.thetas=[]}Square.prototype.display=function(){var t=this.cx;t.strokeStyle=this.color,t.lineWidth=.125*this.side,t.lineJoin="miter",this.makeClosedPath(this.apex1,this.apex2,this.apex3,this.apex4),t.stroke()},Square.prototype.disappear=function(){var t=this.cx;t.strokeStyle=t.canvas.style.backgroundColor,t.lineWidth=.125*this.side+1.5,this.makeClosedPath(t,this.apex1,this.apex2,this.apex3,this.apex4),t.stroke()},Square.prototype.rotate=function(t){this.disappear();for(var e=0;4>e;e++)this.thetas[e]+=t;this.rotateApexes(),this.display()},Square.prototype.fall=function(t){this.disappear(),this.topleft.y+=t,this.moveApexes(),this.display()},Square.prototype.moveApexes=function(){this.apex1.set(this.topleft.x,this.topleft.y),this.apex2.set(this.topleft.x+this.side,this.topleft.y),this.apex3.set(this.topleft.x+this.side,this.topleft.y+this.side),this.apex4.set(this.topleft.x,this.topleft.y+this.side),this.setThetasBasedOnApexes()},Square.prototype.rotateApexes=function(){var t=Math.sqrt(this.topleft.x*this.topleft.x+this.topleft.y*this.topleft.y);this.topleft.x=t*Math.cos(this.thetas[0]),this.topleft.y=t*Math.sin(this.thetas[0]);for(var e=0;4>e;e++){var s=this.apexes[e],h=Math.sqrt(s.x*s.x+s.y*s.y);s.set(h*Math.cos(this.thetas[e]),h*Math.sin(this.thetas[e]))}},Square.prototype.setThetasBasedOnApexes=function(){0!==this.thetas.length&&(this.thetas.length=0);var t=0===this.apex1.x?-Math.PI/2:Math.atan(this.apex1.y/this.apex1.x),e=0===this.apex2.x?-Math.PI/2:Math.atan(this.apex2.y/this.apex2.x),s=0===this.apex3.x?-Math.PI/2:Math.atan(this.apex3.y/this.apex3.x),h=0===this.apex4.x?-Math.PI/2:Math.atan(this.apex4.y/this.apex4.x);this.thetas.push(t,e,s,h);for(var a=0;4>a;a++)this.thetas[a]>0&&(this.thetas[a]=-(Math.PI-this.thetas[a]))},Square.prototype.makeClosedPath=function(){var t=this.cx;t.beginPath(),t.moveTo(arguments[0].x,arguments[0].y);for(var e=1;e<arguments.length;e++)t.lineTo(arguments[e].x,arguments[e].y);t.closePath()},Square.prototype.setTopleft=function(t,e){this.topleft.set(t,e)};