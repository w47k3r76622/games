function Block(t,e,s,i,a){this.topleft=t,this.shape=e,this.squareSide=s,this.gap=i,this.cx=a;var o,p,r,h,n;a.canvas.height;switch(this.squares=[],e){case"I":o="wheat",p="00010203",r="00102030",h=p,n=r;break;case"J":o="hotpink",p="10111202",r="00011121",h="00010210",n="00102021";break;case"L":o="aqua",p="00010212",r="00102001",h="00101112",n="01112120";break;case"O":o="mediumpurple",p="00011011",r="00100111",h="00101101",n="00011110";break;case"S":o="olive",p="01111020",r="00011112",h=p,n=r;break;case"Z":o="navajowhite",p="00101121",r="10110102",h=p,n=r;break;case"T":o="tomato",p="01111021",r="00010211",h="00102011",n="01101112"}this.patterns=[p,r,h,n],this.pattern=this.patterns[0];var c=this;this.build(function(t,e,i){var p=new Vector(c.topleft.x+e*s+e*c.gap,c.topleft.y+i*s+i*c.gap);c.squares[t]=new Square(p,s,o,a)})}Block.prototype.disappear=function(){this.squares.forEach(function(t){t.disappear()})},Block.prototype.display=function(){this.squares.forEach(function(t){t.display()})},Block.prototype.deform=function(t){this.disappear(),this.invisiblyDeform(t),this.display()},Block.prototype.invisiblyDeform=function(t){var e=t?1:-1,s=this.patterns.indexOf(this.pattern);s+e>3?s=0:0>s+e?s=3:s+=e,this.pattern=this.patterns[s],this.setSquareCoors()},Block.prototype.move=function(t){this.disappear(),this.invisiblyMove(t),this.display()},Block.prototype.invisiblyMove=function(t){this.setTopleft(this.topleft.x+t.x,this.topleft.y+t.y),this.setSquareCoors()},Block.prototype.setTopleft=function(t,e){this.topleft.set(t,e)},Block.prototype.setSquareCoors=function(){var t=this;this.build(function(e,s,i){t.squares[e].setTopleft(t.topleft.x+s*t.squareSide+s*t.gap,t.topleft.y+i*t.squareSide+i*t.gap),t.squares[e].moveApexes()})},Block.prototype.build=function(t){for(var e=this.pattern[0],s=this.pattern[1],i=0;4>i;i++){var a=this.pattern[2*i],o=this.pattern[2*i+1];t(i,a,o),e=Math.max(e,a),s=Math.max(s,o)}this.width=(e+1)*this.squareSide+e*this.gap,this.height=(s+1)*this.squareSide+s*this.gap},Block.prototype.copy=function(){var t=new Block(this.topleft.copy(),this.shape,this.squareSide,this.gap,this.cx);return t.setPattern(this.pattern),t},Block.prototype.setPattern=function(t){this.pattern=t};