parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zfSF":[function(require,module,exports) {
"use strict";function t(t,o){return n(t)||e(t,o)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function e(t,i){var e=[],n=!0,o=!1,s=void 0;try{for(var r,h=t[Symbol.iterator]();!(n=(r=h.next()).done)&&(e.push(r.value),!i||e.length!==i);n=!0);}catch(a){o=!0,s=a}finally{try{n||null==h.return||h.return()}finally{if(o)throw s}}return e}function n(t){if(Array.isArray(t))return t}function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var h=function(){function i(t,e,n){o(this,i),this.gridData=t,this.targetPosition=e,this.foundCallback=n,this.width=this.gridData[0].length,this.height=this.gridData.length}return r(i,[{key:"parseGridData",value:function(){var t,i,e,n,o,s,r,h,a,u,l;for(t=[],s=r=0,a=(l=this.gridData).length;r<a;s=++r)for(o=h=0,u=(n=l[s]).length;h<u;o=++h)e={open:!n[o],index:i=s*this.width+o,fromIndex:null,x:o,y:s},t[i]=e;return t}},{key:"beginFill",value:function(t){var i=t.x,e=t.y;for(i/=window.CELL_W,e/=window.CELL_W,this.startPosition=[i,e],this.reset(),this.closeNode(i,e),this.addNeighbors(i,e);!this.isFinished;)this.nextStep()}},{key:"findSteps",value:function(i,e){var n=t(i,2),o=n[0],s=n[1];for(this.startPosition=i,this.reset(),this.closeNode(o,s),this.addNeighbors(o,s);e--;)this.nextStep()}},{key:"nextStep",value:function(){var t,i,e;if(0!==this.open.length)return t=(e=this.iToC(this.open.shift()))[0],i=e[1],this.closeNode(t,i),this.addNeighbors(t,i);this.isFinished=!0}},{key:"addNeighbors",value:function(t,i){var e;e=this.data[this.cToI(t,i)].index,this.addOpen(t+1,i,e),t-1>=0&&this.addOpen(t-1,i,e),this.addOpen(t,i+1,e),i-1>=0&&this.addOpen(t,i-1,e)}},{key:"addOpen",value:function(t,i,e){var n,o,s,r,h;if(!(t<0||t>this.width-1||i<0||i>this.height-1))return n=this.cToI(t,i),(o=this.data[n]).open&&(this.open.push(n),o.fromIndex=e,o.open=!1),s=(h=this.targetPosition)[0],r=h[1],t===s&&i===r?this.targetFound():void 0}},{key:"closeNode",value:function(t,i){var e;e=this.data[this.cToI(t,i)];try{e.open=!1}catch(n){console.log(this),console.log(t,i)}}},{key:"targetFound",value:function(){var t;for(this.isFinished=!0,this.solutionPath=[],this.solutionPath.push(this.targetPosition),t=[];this.walkSolution();)t.push(!0);return t}},{key:"pathFound",value:function(){var t;t=this.solutionPath.reverse(),this.path=t.slice(1),this.foundCallback&&this.foundCallback(t)}},{key:"walkSolution",value:function(){var i,e,n=t(this.solutionPath[this.solutionPath.length-1],2),o=n[0],s=n[1];i=this.data[this.cToI(o,s)];try{if(e=this.data[i.fromIndex],this.solutionPath.push([e.x,e.y]),!e.fromIndex)return this.isFinished=!0,this.pathFound(),!1}catch(r){throw r}return!0}},{key:"reset",value:function(){this.open=[],this.data=this.parseGridData(),this.isFinished=!1}},{key:"cToI",value:function(t,i){return i*this.width+t}},{key:"iToC",value:function(t){return[t%this.width,Math.floor(t/this.width)]}}]),i}();exports.default=h,module.exports=h;
},{}],"gezO":[function(require,module,exports) {
module.exports="wolf.3bb43ff1.png";
},{}],"NeGO":[function(require,module,exports) {
module.exports="sheep1.cc6a0504.png";
},{}],"L7ge":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./img/wolf.png")),t=r(require("./img/sheep1.png"));function r(e){return e&&e.__esModule?e:{default:e}}var o=document.getElementById("message"),s=o.querySelector("img"),u=o.querySelector("div");function i(r,i){s.src="wolf"===r?e.default:t.default,u.textContent=i,o.classList.add("show"),setTimeout(function(){return o.classList.remove("show")},2e3)}var l=i;exports.default=l;
},{"./img/wolf.png":"gezO","./img/sheep1.png":"NeGO"}],"a+CZ":[function(require,module,exports) {

},{}],"hR3q":[function(require,module,exports) {
"use strict";function t(t){var n=document.createElement("div");n.className="modal-con";var e="\n  <div class='modal'>\n    <div class=\"bd\">".concat(t.text,'</div>\n    <div class="ft">\n    ').concat(t.buttons.map(function(t){return"<button>"+t+"</button>"}).join(""),"\n    </div>\n  </div>\n  ");return n.innerHTML=e,document.body.appendChild(n),new Promise(function(e,o){n.addEventListener("click",function(o){o.target.textContent===t.buttons.slice(-1)[0]?e(!0):e(),n.remove()})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,require("./css/modal.css");
},{"./css/modal.css":"a+CZ"}],"acK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.failAlert=r;var e=o(require("./modal")),t=o(require("./wolf"));function o(e){return e&&e.__esModule?e:{default:e}}function r(){window.gameOver=!0;var o=t.default.wolves.filter(function(e){return e.stuck>0});(0,e.default)({text:"you killed ".concat(o.length," wolves!"),buttons:["REPLAY"]}).then(function(e){e&&window.location.reload()})}
},{"./modal":"hR3q","./wolf":"9QO6"}],"9QO6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./search")),t=o(require("./message")),i=o(require("./modal")),n=require("./alert");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function w(e,t){return e.x===t.x&&e.y===t.y}function r(e,t){return e+Math.floor((t-e)*Math.random())}var u=4,h=function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.CELL_W;s(this,o),this.x=e,this.y=t,this.speed=o.wolves.length?r(2,4):2,this.size=i,this.isCallHelped=!1,this.stuck=0,this._timeStamp=Date.now()}return l(o,[{key:"draw",value:function(){var e=window.context;e.save(),e.drawImage(wolfImg,this.x,this.y,this.size,this.size),e.restore()}},{key:"move",value:function(){if(w(this,window.sheep))(0,n.failAlert)();else{var i=Date.now();if(!(i-this._timeStamp<1e3/this.speed)){if(this._timeStamp=i,!this.path){var s=window.sheep,a=new e.default(window.gridData,[s.x/window.CELL_W,s.y/window.CELL_W]);a.beginFill(this),a.path&&(this.path=a.path)}if(this.path){this.size=window.CELL_W,this.stuck=0;var l=this.path.shift();l?(this.x=l[0]*window.CELL_W,this.y=l[1]*window.CELL_W):this.path=null}else{if(this.size=this.size===window.CELL_W?1.2*window.CELL_W:window.CELL_W,1===this.stuck){(0,t.default)("wolf",["I will back","I can't wait to eat you","my bro is on the way","Hmm, not bad","I can't believe it"][o.wolves.length-1]||"You think you win ? let't see")}this.stuck++,this.stuck>6&&!this.isCallHelped&&(o.callHelp(),this.isCallHelped=!0)}}}}}],[{key:"callHelp",value:function(){if(o.wolves.length>u&&o.wolves.every(function(e){return e.stuck}))return window.pause=!0,void(0,i.default)({text:"you win！",buttons:["取消","继续"]}).then(function(e){console.log(e),e&&(u=100,setTimeout(function(){window.pause=!1,o.callHelp()},1e3))});var t,n=new e.default(window.gridData,[0,0]),s=window.sheep,a=s.x,l=s.y;n.findSteps([a/window.CELL_W,l/window.CELL_W],8);var w=n.data[n.open.pop()];w||(n.findSteps([a/window.CELL_W,l/window.CELL_W],2),w=n.data[n.open.pop()]),t=new o(w.x*window.CELL_W,w.y*window.CELL_W),o.wolves.push(t)}}]),o}();h.wolves=[];var d=h;exports.default=d;
},{"./search":"zfSF","./message":"L7ge","./modal":"hR3q","./alert":"acK6"}],"epB2":[function(require,module,exports) {
"use strict";var t=i(require("./wolf")),e=require("./alert"),n=i(require("./img/wolf.png")),r=i(require("./img/sheep1.png"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var f,c=25,h="#4d3304",l=document.getElementById("game"),d=l.getContext("2d"),s=document.getElementById("bg"),y=s.getContext("2d"),w=[],v=t.default.wolves;window.context=d;var g={x:0,y:0,draw:function(){d.drawImage(q,this.x,this.y,f,f)},init:function(){this.y=0,this.x=l.width-f}};window.sheep=g,window.pause=!1;var x=window.gameOver=!1,p=new t.default(0,0);function m(t,e,n){y.save(),y.strokeStyle=t,y.lineWidth=.5,y.clearRect(0,0,y.canvas.width,y.canvas.height);for(var r=e+.5;r<y.canvas.width;r+=e)y.beginPath(),y.moveTo(r,0),y.lineTo(r,y.canvas.height),y.stroke();for(r=n+.5;r<y.canvas.height;r+=n)y.beginPath(),y.moveTo(0,r),y.lineTo(y.canvas.width,r),y.stroke();y.restore()}v.push(p),window.gridData=Array(c).fill().map(function(){return Array(c).fill(0)});var k=function(){function t(e,n){o(this,t),this.x=e,this.y=n}return u(t,[{key:"draw",value:function(){d.save(),d.fillRect(this.x+1,this.y+1,f-1,f-1),d.restore()}}]),t}();function b(){for(var t=4*f;t<l.width-4*f;t+=f)for(var e=4*f;e<l.width-4*f;e+=f)t>10*f&&t<14*f&&e>10*f&&e<14*f||(w.push(new k(t,e)),window.gridData[t/f][e/f]=1)}function E(){d.fillStyle=h,w.forEach(function(t){t.draw()})}function P(t){var e=[],n=w.length;switch(t){case"up":for(var r=0;r<n;r++)w[r].x==g.x&&w[r].y<=g.y&&e.push(w[r]);break;case"down":for(r=0;r<n;r++)w[r].x==g.x&&w[r].y>=g.y&&e.push(w[r]);break;case"left":for(r=0;r<n;r++)w[r].y==g.y&&w[r].x<=g.x&&e.push(w[r]);break;case"right":for(r=0;r<n;r++)w[r].y==g.y&&w[r].x>=g.x&&e.push(w[r])}return e}function A(t,e){var n,r=[];e=e||P(t);switch(t){case"up":n=g.y,e.sort(function(t,e){return t.y-e.y});for(var i=e.length-1;i>=0;i--)n-e[i].y==f&&(r.push(e[i]),n=e[i].y);break;case"down":n=g.y,e.sort(function(t,e){return t.y-e.y});for(i=0;i<e.length;i++)e[i].y-n==f&&(r.push(e[i]),n=e[i].y);break;case"left":n=g.x,e.sort(function(t,e){return t.x-e.x});for(var o=e.length-1;o>=0;o--)n-e[o].x==f&&(r.push(e[o]),n=e[o].x);break;case"right":n=g.x,e.sort(function(t,e){return t.x-e.x});for(var a=0;a<e.length;a++)e[a].x-n==f&&(r.push(e[a]),n=e[a].x)}return r}function R(t){return 38===t||87===t?"up":39===t||68===t?"right":40===t||83===t?"down":37===t||65===t?"left":void 0}function S(n){var r,i,o=document.getElementById("fail");if(HTMLAudioElement.prototype.stop=function(){this.pause(),this.currentTime=0},"string"==typeof n)r=n;else{var a=n.keyCode?n.keyCode:n.which;n.preventDefault(),r=R(a)}function u(e){return t.default.wolves.some(function(t){return function(t,e){var n=i.length;if(0===n)return!1;var r=i[n-1];return"up"===e?r.x===t.x&&r.y-f===t.y:"down"===e?r.x===t.x&&r.y+f===t.y:"left"===e?r.y===t.y&&r.x-f===t.x:"right"===e?r.y===t.y&&r.x+f===t.x:void 0}(t,e)})}if(i=A(r),"up"===r){if(0===g.y)return;(i=A("up")).every(function(t){return t.y>0})&&!u("up")?(i.forEach(function(t){return t.y-=f}),g.y=g.y-f):(o.stop(),o.play())}if("right"===r){if(g.x===l.width-f)return;i.every(function(t){return t.x<l.width-f})&&!u("right")?(i.forEach(function(t){return t.x+=f}),g.x=g.x+f):(o.stop(),o.play())}if("down"===r){if(g.y===l.width-f)return;i.every(function(t){return t.y<l.height-f})&&!u("down")?(i.forEach(function(t){t.y+=f}),g.y=g.y+f):(o.stop(),o.play())}if("left"===r){if(0===g.x)return;i.every(function(t){return t.x>0})&&!u("left")?(i.forEach(function(t){t.x-=f}),g.x=g.x-f):(o.stop(),o.play())}!function(){window.gridData=Array(c).fill().map(function(){return Array(c).fill(0)}),w.forEach(function(t){return window.gridData[t.y/f][t.x/f]=1});var t=!0,n=!1,r=void 0;try{for(var i,o=v[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.x===g.x&&a.y===g.y)return console.log("catch"),void(0,e.failAlert)();a.path=null}}catch(u){n=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}()}function B(){d.clearRect(0,0,l.width,l.height),E(),g.draw(),v.forEach(function(t){window.pause||t.move(),t.draw()}),!window.gameOver&&requestAnimationFrame(B)}function I(){var t=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1),e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android)/i);[l,s].map(function(n){var r=n.width,i=n.height;n.width=r*t,n.height=i*t,e?(n.style.width="100vw",n.style.height="100vw"):(n.style.width=r+"px",n.style.height=i+"px"),f=n.width/c,window.CELL_W=f}),b(),g.init(),m("rgba(100,100,100,0.3)",Math.floor(l.width/c),Math.floor(l.height/c)),document.addEventListener("keydown",S),document.querySelector(".keyboard").addEventListener("touchstart",function(t){t.stopPropagation(),t.preventDefault(),S(t.target.id)}),B()}var T=new Image,q=new Image;window.wolfImg=T,T.src=n.default,q.src=r.default;var C=[q,T].map(function(t){return new Promise(function(e,n){t.onload=function(){e()}})});Promise.all(C).then(function(t){I()}).catch(function(t){return console.log(t)});
},{"./wolf":"9QO6","./alert":"acK6","./img/wolf.png":"gezO","./img/sheep1.png":"NeGO"}]},{},["epB2"], null)