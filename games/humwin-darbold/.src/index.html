<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"/><meta name="theme-color" content="#111"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-navbutton-color" content="#111"/><title>Humwin & Darbold</title><style>html,body{margin:0;padding:0;background:#111;color:#fff;font:min(min(4vw,3vh),110%) sans-serif;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-ms-touch-action:none;user-select:none;}canvas{position:fixed;width:100%;height:100%;}
#G {
display:none;}
#W {
position:fixed;left:0;right:0;top:40%;text-align:center;pointer-events:none;}
#M {
display:none;background:rgba(0,0,0,.3);border-radius:.5em;padding:.7em;}
#I {
position:fixed;left:0;right:0;display:none;background:rgba(0,0,0,.3);border-radius:.5em;padding:min(1vw,1vh);margin:min(1vw,1vh);bottom:0;}.Itm{width:max(5vw,5vh);}</style></head><body><canvas id="C">Sorry,this browser cannot render this content.</canvas><svg id="G"><g><ellipse style="fill-opacity:0.2" cy="92" rx="22" ry="4" cx="50"/><path style="fill:#f5f5f5" d="M33 71 C 30 71 30 75 33 75 L37 83 C 35 83 35 87 37 87 L30 91 C 29 93 39 95 39 93 L42 87 C 43 87 43 83 42 83 L38 75 C 41 75 41 71 38 71 L43 61 C 45 59 37 57 37 59 L33 71 Z"/><path style="fill:#f5f5f5" d="M67 71 C 70 71 70 75 67 75 L63 83 C 65 83 65 87 63 87 L70 91 C 71 93 61 95 61 93 L58 87 C 57 87 57 83 58 83 L62 75 C 59 75 59 71 62 71 L57 61 C 55 59 63 57 63 59 L67 71 Z"/><path style="fill:#f5f5f5" d="M74 38 C 74 49 74 63 50 63 C 27 63 26 49 26 38 C 26 27 26 18 50 18 C 74 18 74 27 74 38 Z"/><path style="fill:#2c385f" d="M70 38 C 70 48 70 56 50 56 C 30 56 30 48 30 38 C 30 29 30 21 50 21 C 70 21 70 29 70 38 Z"/><circle style="fill:#7598ff" cx="41" cy="34" r="4"/><circle style="fill:#7598ff" cx="58" cy="34" r="4"/><path style="fill:none;stroke:#7598ff;stroke-width:3px" d="M41 45 C 41 49 59 49 59 45"/></g><g><ellipse style="fill-opacity:0.2" cy="92" rx="22" ry="4" cx="50"/><path style="fill:#f5f5f5" d="M39 66 C 36 67 38 70 41 69 L48 74 C 47 75 49 78 50 77 L46 84 C 47 87 56 83 55 81 L55 75 C 56 74 54 71 53 71 L45 66 C 48 65 46 61 43 63 L43 52 C 43 49 35 51 36 53 L39 66 Z"/><path style="fill:#f5f5f5" d="M64 73 C 67 74 66 78 63 77 L57 84 C 59 84 58 88 56 87 L62 93 C 62 95 52 95 52 93 L51 86 C 50 86 51 82 52 82 L58 76 C 55 75 57 71 59 72 L57 61 C 56 58 64 59 64 61 L64 73 Z"/><path style="fill:#f5f5f5" d="M78 41 C 75 52 72 65 48 59 C 26 54 29 40 31 29 C 34 18 36 10 60 16 C 83 22 81 30 78 41 Z"/><path style="fill:#2c385f" d="M73 40 C 71 50 69 57 50 52 C 30 47 32 40 35 30 C 37 21 39 14 58 19 C 78 24 76 31 73 40 Z"/><circle style="fill:#7598ff" cx="47" cy="29" r="4"/><circle style="fill:#7598ff" cx="63" cy="33" r="4"/><path style="fill:none;stroke:#7598ff;stroke-width:3px" d="M45 40 C 44 44 61 48 62 44"/></g><g><ellipse style="fill-opacity:0.2" cy="92" rx="22" ry="4" cx="50"/><path style="fill:#f5f5f5" d="M35 73 C 32 73 33 77 36 77 L41 84 C 39 84 40 88 42 88 L36 93 C 36 95 46 95 45 93 L47 87 C 48 86 47 83 46 83 L41 76 C 44 75 43 71 40 72 L43 61 C 44 59 36 58 36 60 L35 73 Z"/><path style="fill:#f5f5f5" d="M75 62 C 78 61 79 65 76 66 L76 75 C 77 74 79 78 77 78 L85 79 C 87 81 78 87 77 85 L72 80 C 72 81 70 77 71 76 L72 68 C 69 69 67 65 70 64 L62 56 C 59 55 66 50 67 52 L75 62 Z"/><path style="fill:#f5f5f5" d="M71 32 C 73 43 77 56 54 62 C 31 68 27 55 24 44 C 21 34 19 25 42 19 C 66 13 68 21 71 32 Z"/><path style="fill:#2c385f" d="M66 33 C 69 43 71 50 51 55 C 32 60 30 53 28 43 C 25 34 23 27 43 22 C 62 17 64 24 66 33 Z"/><circle style="fill:#7598ff" cx="38" cy="36" r="4"/><circle style="fill:#7598ff" cx="54" cy="32" r="4"/><path style="fill:none;stroke:#7598ff;stroke-width:3px" d="M41 47 C 42 51 59 47 58 43"/></g><g><ellipse style="fill-opacity:0.2" cy="92" rx="22" ry="4" cx="50"/><path style="fill:#f5f5f5" d="M68 69 C 71 70 71 74 68 74 L64 82 C 66 81 66 86 64 85 L72 89 C 72 91 63 94 62 92 L59 86 C 58 86 58 82 59 82 L63 74 C 60 74 60 70 63 70 L57 60 C 56 57 63 56 64 58 L68 69 Z"/><path style="fill:#f5f5f5" d="M78 41 C 75 52 72 65 48 59 C 26 54 29 40 31 29 C 34 18 36 10 60 16 C 83 22 81 30 78 41 Z"/><path style="fill:#f5f5f5" d="M26 62 C 23 61 22 65 25 66 L25 75 C 24 74 22 78 24 78 L16 79 C 14 81 23 87 24 85 L29 80 C 29 81 31 77 30 76 L29 68 C 32 69 34 65 31 64 L39 56 C 42 55 35 50 34 52 L26 62 Z"/><path style="fill:#2c385f" d="M73 40 C 71 50 69 57 50 52 C 30 47 32 40 35 30 C 37 21 39 14 58 19 C 78 24 76 31 73 40 Z"/><circle style="fill:#7598ff" cx="47" cy="29" r="5"/><circle style="fill:#7598ff" cx="63" cy="33" r="4"/><path style="fill:none;stroke:#7598ff;stroke-width:3px" d="M44 42 C 51 35 60 43 60 46"/></g><g><ellipse style="fill-opacity:0.2" cx="51" cy="89" rx="22" ry="6"/><path style="fill:#8ec1a5" d="M26 94 L31 87 C 34 84 37 68 36 59 C 22 -6 78 -4 65 58 C 63 69 69 87 71 88 L76 94 L66 90 C 67 86 57 64 59 64 C 57 64 57 88 60 89 L62 95 L54 89 C 56 89 52 68 50 68 C 49 68 46 88 48 89 L41 94 L42 89 C 45 89 43 64 42 64 C 43 64 35 86 36 89 L26 94 Z"/><circle style="fill:#dfffeb" cx="50" cy="26" r="8"/><path d="M56 26 C 56 29 53 32 50 32 C 47 32 44 29 44 26 C 44 23 47 20 50 20 C 51 20 52 20 53 21 C 54 21 50 25 50 26 C 51 26 55 23 55 23 C 56 24 56 25 56 26 Z"/><path style="fill:#dfffeb" d="M39 43 L42 53 L43 46 L45 51 L48 45 L50 52 L53 45 L56 52 L57 44 L60 52 L62 42 C 62 38 39 39 39 43 Z"/></g><g><ellipse style="fill-opacity:0.2" cx="51" cy="89" rx="28" ry="6"/><path style="fill:#8ec1a5" d="M26 94 L31 87 C 34 84 37 68 36 59 C 15 -6 74 -5 65 58 C 63 69 74 83 76 84 L81 90 L71 86 C 72 82 58 68 60 68 C 58 68 55 88 58 89 L60 95 L52 89 C 54 89 54 66 52 66 C 51 66 46 88 48 89 L41 94 L42 89 C 45 89 43 64 42 64 C 43 64 35 86 36 89 L26 94 Z"/><circle style="fill:#dfffeb" cx="49" cy="26" r="8"/><path d="M55 26 C 55 29 52 32 49 32 C 46 32 43 29 43 26 C 43 23 46 20 49 20 C 50 20 51 20 52 21 C 53 21 49 25 49 26 C 50 26 54 23 54 23 C 55 24 55 25 55 26 Z"/><path style="fill:#dfffeb" d="M39 43 L42 53 L43 46 L45 51 L48 45 L50 52 L53 45 L56 52 L57 44 L60 52 L62 42 C 62 38 39 39 39 43 Z"/></g><g><ellipse style="fill-opacity:0.2" cx="51" cy="89" rx="28" ry="6"/><path style="fill:#8ec1a5" d="M32 92 L37 85 C 40 82 37 68 36 59 C 11 -5 73 -5 65 58 C 63 69 66 83 68 84 L73 90 L63 86 C 64 82 57 64 59 64 C 57 64 69 77 72 78 L74 84 L66 80 C 68 80 54 66 52 66 C 51 66 47 87 49 88 L42 93 L43 88 C 46 88 43 64 42 64 C 43 64 41 84 42 87 L32 92 Z"/><circle style="fill:#dfffeb" cx="48" cy="26" r="8"/><path d="M54 26 C 54 29 51 32 48 32 C 45 32 42 29 42 26 C 42 23 45 20 48 20 C 49 20 50 20 51 21 C 52 21 48 25 48 26 C 49 26 53 23 53 23 C 54 24 54 25 54 26 Z"/><path style="fill:#dfffeb" d="M39 43 L42 53 L43 46 L45 51 L48 45 L50 52 L53 45 L56 52 L57 44 L60 52 L62 42 C 62 38 39 39 39 43 Z"/></g><g><ellipse style="fill-opacity:0.2" cx="51" cy="89" rx="28" ry="6"/><path style="fill:#8ec1a5" d="M20 77 L18 68 C 21 65 37 68 36 59 C 1 -4 100 -3 65 58 C 59 68 82 64 84 65 L79 75 L77 70 C 78 66 59 66 61 66 C 59 66 64 88 67 89 L69 95 L61 89 C 63 89 55 68 50 68 C 46 68 39 85 41 86 L34 91 L35 86 C 38 86 41 66 40 66 C 41 66 21 68 22 71 L20 77 Z"/><circle style="fill:#dfffeb" cx="50" cy="22" r="8"/><path d="M56 22 C 56 24 53 26 50 26 C 47 26 44 24 44 22 C 44 20 47 16 50 16 C 51 16 52 16 53 17 C 54 17 50 21 50 22 C 51 22 55 20 55 20 C 56 20 56 21 56 22 Z"/><path style="fill:#567664" d="M37 36 L38 52 L42 59 L44 54 L46 60 L50 53 L53 58 L56 54 L59 58 L63 50 L64 34 C 64 30 37 31 37 36 Z"/><path style="fill:#dfffeb" d="M37 36 L41 47 L42 39 L44 45 L48 38 L50 46 L53 38 L57 46 L58 37 L62 46 L64 34 C 64 30 37 31 37 36 Z"/></g><g><ellipse style="fill-opacity:0.2" cx="51" cy="89" rx="28" ry="6"/><path style="fill:#8ec1a5" d="M23 85 L21 76 C 24 73 37 68 36 59 C 2 3 99 3 65 58 C 59 68 79 72 81 73 L77 83 L74 76 C 75 72 59 66 61 66 C 59 66 63 81 66 82 L69 87 L61 85 C 63 85 55 68 50 68 C 46 68 39 87 41 88 L34 93 L35 88 C 38 88 41 66 40 66 C 41 66 24 76 25 79 L23 85 Z"/><circle style="fill:#dfffeb" cx="50" cy="27" r="8"/><path d="M56 27 C 56 29 53 31 50 31 C 47 31 44 29 44 27 C 44 25 47 21 50 21 C 51 21 52 21 53 22 C 54 22 50 26 50 27 C 51 27 55 25 55 25 C 56 25 56 26 56 27 Z"/><path style="fill:#567664" d="M37 40 L38 49 L42 56 L44 51 L46 57 L50 50 L53 55 L56 51 L59 55 L64 49 L64 38 C 64 34 37 35 37 40 Z"/><path style="fill:#dfffeb" d="M37 40 L41 51 L42 43 L44 49 L48 42 L50 50 L53 42 L57 50 L58 41 L62 50 L64 38 C 64 34 37 35 37 40 Z"/></g><g>x200<ellipse style="fill-opacity:0.2" cx="50" rx="31" ry="5" cy="190"/><path style="fill:#903ab2" d="M40 187 C 22 115 62 97 47 41 C 70 88 17 145 61 187 C 62 193 41 195 40 187 Z"/><path style="fill:#af46d8" d="M41 132 C 22 132 26 113 11 111 C 23 104 44 118 41 132 Z"/><path style="fill:#af46d8" d="M49 98 C 60 102 63 90 73 93 C 67 86 50 88 49 98 Z"/><path style="fill:#af46d8" d="M46 173 C 57 169 51 158 60 153 C 51 152 40 165 46 173 Z"/><path style="fill:#af46d8" d="M51 39 C 33 41 34 28 18 29 C 29 20 52 23 51 39 Z"/><path style="fill:#af46d8" d="M47 39 C 62 49 71 32 86 40 C 79 27 53 24 47 39 Z"/><path style="fill:#af46d8" d="M47 39 C 44 58 64 59 62 77 C 71 65 63 38 47 39 Z"/><path style="fill:#af46d8" d="M51 39 C 47 56 28 50 23 66 C 19 52 37 32 51 39 Z"/></g><g>x200<ellipse style="fill-opacity:0.2" cx="56" rx="31" ry="5" cy="190"/><path style="fill:#903ab2" d="M50 186 C 62 125 -6 89 55 25 C 11 89 46 83 71 186 C 71 194 50 194 50 186 Z"/><path style="fill:#af46d8" d="M53 153 C 40 161 35 146 24 150 C 29 141 49 143 53 153 Z"/><path style="fill:#af46d8" d="M54 143 C 66 146 68 133 78 136 C 72 129 54 132 54 143 Z"/><path style="fill:#af46d8" d="M55 22 C 52 39 23 33 18 49 C 11 34 33 15 55 22 Z"/><path style="fill:#af46d8" d="M55 22 C 73 13 44 2 24 12 C 35 11 33 24 55 22 Z"/><path style="fill:#af46d8" d="M55 22 C 64 40 78 25 94 42 C 94 20 60 6 55 22 Z"/><path style="fill:#af46d8" d="M55 22 C 32 32 74 59 56 68 C 76 67 69 32 55 22 Z"/></g><g><rect style="fill:#59246e" width="100" height="100"/><path style="fill:#491d5b" d="M5 23 C 20 47 37 54 63 90 C 44 69 22 59 5 23 Z"/><circle style="fill:#491d5b" cx="70" cy="20" r="2"/></g><g><rect style="fill:#59246e" width="100" height="100"/><path style="fill:#491d5b" d="M14 29 C 34 48 53 49 86 79 C 63 63 39 60 14 29 Z"/><circle style="fill:#491d5b" cx="20" cy="70" r="2"/></g><g><rect style="fill:#59246e" width="100" height="100"/><circle style="fill:#491d5b" cx="72" cy="60" r="3"/><path style="fill:#491d5b" d="M25 10 C 43 22 69 23 96 47 C 77 35 52 28 25 10 Z"/></g><g id="Egg"><ellipse style="fill-opacity:0.2" cx="49" cy="93" rx="23" ry="3"/><ellipse style="fill:#dfffeb" cx="49" cy="76" rx="10" ry="15"/><path style="fill:none;stroke:#c0dccb" d="M39 76 C 40 69 23 59 29 48"/><path style="fill:#af46d8" d="M48 94 C 29 93 34 74 19 71 C 32 65 52 80 48 94 Z"/><path style="fill:#c0dccb" d="M55 68 C 56 71 56 73 55 74 C 53 75 51 73 50 71 C 49 68 49 66 50 65 C 52 64 54 66 55 68 Z"/><path style="fill:#903ab2" d="M48 94 C 46 79 73 67 79 77 C 65 75 66 94 48 94 Z"/><path style="fill:#dfffeb" d="M52 34 C 54 33 57 38 57 41 C 55 38 50 36 52 34 Z"/><path style="fill:#dfffeb" d="M52 34 C 51 32 45 35 44 37 C 47 37 53 36 52 34 Z"/><path style="fill:#dfffeb" d="M52 34 C 54 33 50 29 46 29 C 50 31 50 35 52 34 Z"/><path style="fill:#dfffeb" d="M52 34 C 52 31 58 31 61 33 C 57 33 53 36 52 34 Z"/></g><g id="Flower"><ellipse style="fill-opacity:0.2" cx="50" cy="93" rx="25" ry="3"/><path style="fill:#903ab2" d="M48 91 C 48 84 49 67 43 48 C 48 55 50 63 51 69 C 54 65 59 62 65 63 C 58 67 61 74 52 74 C 52 80 49 92 48 91 Z"/><path style="fill:#903ab2" d="M49 94 C 68 93 62 78 77 75 C 64 69 45 80 49 94 Z"/><path style="fill:#af46d8" d="M50 94 C 52 79 32 66 19 77 C 33 75 32 94 50 94 Z"/><path style="fill:#dfffeb" d="M41 47 C 38 40 29 43 27 50 C 34 46 43 53 41 47 Z"/><path style="fill:#dfffeb" d="M45 47 C 45 40 60 41 60 50 C 51 46 45 55 45 47 Z"/><path style="fill:#dfffeb" d="M43 48 C 34 48 36 57 39 61 C 46 57 52 48 43 48 Z"/><path style="fill:#dfffeb" d="M42 45 C 35 45 43 36 50 40 C 53 42 49 45 42 45 Z"/><ellipse style="fill:#c0dccb" cx="44" cy="46" rx="5" ry="3"/></g><g><path style="fill:#351542" d="M25 93 C 41 89 49 80 75 81 C 58 86 47 96 25 93 Z"/><path style="fill:#351542" d="M21 84 C 40 87 56 83 79 90 C 60 89 48 96 21 84 Z"/><path style="fill:#ff3a68" d="M57 86 C 57 90 43 90 43 86 C 43 82 46 79 50 79 C 54 79 57 82 57 86 Z"/></g><g>200x<path style="fill:#351542" d="M85 67 C 103 75 117 71 123 93 C 110 85 86 84 85 67 Z"/><path style="fill:#351542" d="M73 88 C 93 83 103 71 135 72 C 114 79 100 91 73 88 Z"/><path style="fill:#351542" d="M68 76 C 91 80 112 75 140 84 C 117 83 101 91 68 76 Z"/><path style="fill:#351542" d="M100 95 C 93 83 105 80 103 65 C 107 75 119 83 100 95 Z"/><path style="fill:#ff3a68" d="M111 80 C 110 50 109 48 102 32 C 84 -7 4 1 27 40 C 28 42 55 25 64 40 C 73 55 36 50 38 51 C 54 62 90 45 93 80 C 95 84 113 84 111 80 Z"/></g><g>200x<path style="fill:#351542" d="M85 67 C 103 75 117 71 123 93 C 110 85 86 84 85 67 Z"/><path style="fill:#351542" d="M73 88 C 93 83 103 71 135 72 C 114 79 100 91 73 88 Z"/><path style="fill:#351542" d="M68 76 C 91 80 112 75 140 84 C 117 83 101 91 68 76 Z"/><path style="fill:#351542" d="M100 95 C 93 83 105 80 103 65 C 107 75 119 83 100 95 Z"/><path style="fill:#ff3a68" d="M111 80 C 110 50 109 48 102 32 C 84 -7 7 13 30 52 C 31 54 49 41 63 46 C 77 51 40 52 42 53 C 58 64 90 45 93 80 C 95 84 113 84 111 80 Z"/></g><g><rect style="fill:#ff3a68" width="100" height="100"/><path style="fill:#ec3660" d="M15 21 C 41 45 69 32 86 74 C 65 42 39 49 15 21 Z"/></g><g><path style="fill:#8ec1a5" d="M32 84 C 25 76 50 85 49 87 C 49 90 32 91 32 84 Z"/><path style="fill:#8ec1a5" d="M68 78 C 73 69 51 84 53 86 C 54 89 71 85 68 78 Z"/><path style="fill:#567664" d="M53 93 C 48 89 45 81 48 80 C 51 79 55 87 53 93 Z"/></g><g><path style="fill:#8ec1a5" d="M32 88 C 23 83 49 84 49 86 C 50 89 34 95 32 88 Z"/><path style="fill:#8ec1a5" d="M69 82 C 76 75 51 83 52 85 C 52 88 69 90 69 82 Z"/><path style="fill:#567664" d="M53 93 C 48 89 45 81 48 80 C 51 79 55 87 53 93 Z"/></g><g><ellipse style="fill-opacity:0.2" cy="92" rx="22" ry="4" cx="50"/><path style="fill:#903ab2" d="M33 71 C 30 71 30 75 33 75 L37 83 C 35 83 35 87 37 87 L30 91 C 29 93 39 95 39 93 L42 87 C 43 87 43 83 42 83 L38 75 C 41 75 41 71 38 71 L43 61 C 45 59 37 57 37 59 L33 71 Z"/><path style="fill:#903ab2" d="M67 71 C 70 71 70 75 67 75 L63 83 C 65 83 65 87 63 87 L70 91 C 71 93 61 95 61 93 L58 87 C 57 87 57 83 58 83 L62 75 C 59 75 59 71 62 71 L57 61 C 55 59 63 57 63 59 L67 71 Z"/><path style="fill:#903ab2" d="M74 38 C 74 49 74 63 50 63 C 27 63 26 49 26 38 C 26 27 26 18 50 18 C 74 18 74 27 74 38 Z"/><path style="fill:#dfffeb" d="M70 38 C 70 48 70 56 50 56 C 30 56 30 48 30 38 C 30 29 30 21 50 21 C 70 21 70 29 70 38 Z"/><circle style="fill:#749e87" cx="41" cy="32" r="2"/><circle style="fill:#749e87" cx="58" cy="34" r="2"/><path style="fill:none;stroke:#749e87;stroke-width:3px" d="M38 44 C 43 49 54 51 62 43"/></g></svg><div id="W"><div id="M"></div></div><div id="I"></div></body><script id="VertexShader" type="x-shader/x-vertex">
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
attribute vec3 vertex;attribute vec2 uv;uniform mat4 projMat;uniform mat4 modelViewMat;varying vec2 st;void main(){gl_Position = projMat * modelViewMat * vec4(vertex,1.);st = uv;}</script><script id="FragmentShader" type="x-shader/x-fragment">
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform sampler2D texture;varying vec2 st;void main(){gl_FragColor = texture2D(texture,st);}</script><script>"use strict";const horizon=100,camPos=[0,12,9],idMat=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),projMat=new Float32Array(16),viewMat=new Float32Array(16),modelViewMat=new Float32Array(16),spriteMat=new Float32Array(16),groundMat=new Float32Array(16),cacheMat=new Float32Array(16),mapSize=128,mapRadius=mapSize>>1,map=new Uint8Array(mapSize*mapSize),groundSize=35,groundRadius=groundSize>>1,dns=[],tiles=[],spriteSizes=[],screen=[],pointerSpot=[0,0,0],pointersX=[],pointersY=[],compareDist=(a,b)=>b.dist-a.dist,camera={x:0,z:0},objects=[{sprite:0,x:0,y:0,z:0,tx:0,tz:0,last:0,frame:0,update:updatePlayer,tries:0,getEaten:function(){this.update=function(){this.sprite=3,this.dir=this.frame%2?-1:1},items.length=0,updateInventory();const a=["Ouch!"],b=["Damn, these things are hungry!","Not nice.","I wonder if Darbold was eaten, too.","He certainly wasn't in there!","No, not here either.","Maybe it's not running around anymore.","If I only knew what makes them vomit.","What a bad breath!","My bytes got bitten!"];a.push(b[this.tries++%b.length]),say(a)},resurrect:function(){this.update=null,setTimeout(function(){say(["Got printed anew!","It's good to be robot!"]),egg.reset(),player.x=player.z=player.tx=player.tz=player.killed=pointers=0,player.update=updatePlayer},2e3)}},{sprite:22,x:1e5,y:0,z:0}],player=objects[0],darbold=objects[1];let seed=1,bubble,inventory,gl,spriteModelBuffer,spriteUvBuffer,groundModelBuffer,groundUvBuffer,groundUvs,groundLength,atlasCoords,vertexLoc,uvLoc,projMatLoc,modelViewMatLoc,camX,camA,camY,camB,camZ,camC,lookX,lookZ,pointers,pickables=[],items=[],egg,now,won;function say(a,b){clearTimeout(bubble.tid),Array.isArray(a)||(a=[a]);const c=a.shift();bubble.style.display="inline-block",bubble.innerHTML=c,bubble.last=now,bubble.next=function(){if(now-bubble.last<300)return;bubble.last=now,clearTimeout(bubble.tid),a.length?say(a,b):(bubble.style.display="none",bubble.next=null,b&&b())},bubble.tid=setTimeout(bubble.next,1e3+200*c.split(" ").length)}function moveToTarget(a,b,c,d){const e=b-a.x,f=c-a.z,j=Math.sqrt(e*e+f*f),g=Math.min(1,d/j),h=a.x+e*g,i=a.z+f*g;if(a!=camera){const k=mapRadius+h/2,m=mapRadius+i/2,p=Math.round(k),l=Math.round(m),n=map[l*mapSize+p],o=(k-p+.5)*3|0,u=(m-l+.5)*3|0;let w;if(n&128&&(!(w=dns[n&127])||!w[u*3+o]))return a.tx=a.x,a.tz=a.z,1}return a.x=h,a.z=i,g==1}function pickSprite(a,b,c){a.sprite=b+a.frame%c}function pickDirSprite(a,b,c,d,e){const f=(a.z-camZ)*(d-a.x)+(camX-a.x)*(e-a.z);if(f==0){a.sprite=b,a.dir=1;return}a.sprite=b+1+a.frame%c,a.dir=f<0?-1:1}function dropItem(){const a=player.dropAngle;this.x=player.x+Math.cos(a)/2,this.z=player.z+Math.sin(a)/2,this.tasty=1,player.dropAngle=a+1,pickables.push(this),items=items.filter(b=>b!=this),updateInventory()}function updateInventory(){if(items.length==0){inventory.style.display="none";return}inventory.style.display="block",inventory.innerHTML="",items.forEach(a=>{const b=document.createElement("span");b.onclick=function(){a.use()},b.innerHTML=`<svg viewBox="0 0 100 100" class="Itm">${a.icon.innerHTML}</svg>`,inventory.appendChild(b)})}function updatePlayer(){!won&&pointers>0&&(moveToPointer(),this.dropAngle=0),pickDirSprite(this,0,2,this.tx,this.tz),moveToTarget(this,this.tx,this.tz,.09);for(let d=0,e=pickables.length;d<e;++d){const f=pickables[d],j=f.x-this.x,g=f.z-this.z,h=j*j+g*g;if(h<.2){f.x=1e5,items.push(f),updateInventory(),pickables=pickables.filter(k=>f!=k);const i=[`Picked up a ${f.name}`];f.name=="Egg"&&(i.push("Hm, maybe that makes one"),i.push("of them vomit…")),say(i);break}}const a=lookX-this.x,b=lookZ-this.z,c=a*a+b*b;if(c>0){const d=Math.sqrt(c)-2;moveToTarget(camera,this.tx,this.tz,d>.01?d:.06),lookAt(camera.x,camera.z)}}function eat(a,b){b.eaten?now-b.killed>1e3&&(pickables=pickables.filter(c=>c!=b),b.x=1e5,b.eaten=0,b.resurrect&&b.resurrect(),a.hasDarbold&&b.name=="Egg"&&(a.vomit=now+1e3,a.hasDarbold=0,darbold.x=a.x+.5,darbold.z=a.z,objects.forEach(c=>c.sight=0),player.tx=darbold.x-1,player.tz=darbold.z,won=1,say(["Burp!","Darbold! There you are!","Finally I found you!","Now, let's get off this planet","and watch some Spaceflix!","It's a long flight home…"],function(){player.update=darbold.update=function(){this.y+=.2}}))):(b.eaten=1,b.killed=now,b.getEaten&&b.getEaten())}function hunt(a,b,c){if(c<.2){pickSprite(a,7,2),eat(a,b);return}else c<a.sight&&a.ignore<1?(pickDirSprite(a,4,2,b.x,b.z),moveToTarget(a,b.x,b.z,a.speed)):(pickDirSprite(a,4,2,a.tx,a.tz),moveToTarget(a,a.tx,a.tz,a.speed)&&a.waypoint(),--a.ignore);a.x==a.lx&&a.z==a.lz&&++a.stuck>3&&(a.tx=a.x+random()*4-2,a.tz=a.z+random()*4-2,a.ignore=10,a.stuck=0),a.lx=a.x,a.lz=a.z}function updatePredator(){if(this.vomit>now){pickSprite(this,7,2);return}let a,b=1e5,c=this.sight;for(let d=0,e=pickables.length;d<e;++d){const f=pickables[d];if(!f.tasty)continue;const j=f.x-this.x,g=f.z-this.z,h=j*j+g*g;if(h<c){b=h,a=f;break}}if(this.hasDarbold){if(!a||a.name!="Egg"){this.sprite=4;return}}else{const d=player.x-this.x,e=player.z-this.z,f=d*d+e*e;f<c&&f<b&&(a=player,b=f)}hunt(this,a,b)}function run(){requestAnimationFrame(run),now=Date.now(),gl.bindBuffer(gl.ARRAY_BUFFER,groundModelBuffer),gl.vertexAttribPointer(vertexLoc,3,gl.FLOAT,0,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,groundUvBuffer),gl.vertexAttribPointer(uvLoc,2,gl.FLOAT,0,0,0);const a=lookX>>1,b=lookZ>>1;updateGroundUvs(a,b),gl.bufferData(gl.ARRAY_BUFFER,groundUvs,gl.DYNAMIC_DRAW),cacheMat.set(idMat),cacheMat[12]=a<<1,cacheMat[14]=b<<1,multiply(modelViewMat,viewMat,cacheMat),gl.uniformMatrix4fv(modelViewMatLoc,0,modelViewMat),gl.drawArrays(gl.TRIANGLES,0,groundLength),gl.bindBuffer(gl.ARRAY_BUFFER,spriteModelBuffer),gl.vertexAttribPointer(vertexLoc,3,gl.FLOAT,0,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,spriteUvBuffer),objects.forEach(c=>{c.update&&(now-c.last>200&&(++c.frame,c.last=now),c.update())}),objects.forEach(c=>{const d=camX-c.x,e=camY-c.y,f=camZ-c.z,j=camA*d+camB*e+camC*f,g=camA*j,h=camB*j,i=camC*j;c.dist=g*g+h*h+i*i}),objects.sort(compareDist).forEach(c=>{const d=c.sprite,e=spriteSizes[d];scale(cacheMat,spriteMat,e[0]*c.dir,e[1],1),cacheMat[12]=c.x,cacheMat[13]=c.y,cacheMat[14]=c.z,gl.vertexAttribPointer(uvLoc,2,gl.FLOAT,0,0,d<<5),multiply(modelViewMat,viewMat,cacheMat),gl.uniformMatrix4fv(modelViewMatLoc,0,modelViewMat),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)})}function rayGround(a,b,c,d,e,f,j){const g=-1*f;if(g>1e-4){const h=-1*-c/g;return a[0]=b+e*h,a[1]=c+f*h,a[2]=d+j*h,h>=0}return 0}function getGroundSpot(a,b,c){invert(cacheMat,projMat);const d=cacheMat[0]*b+cacheMat[4]*c+-cacheMat[8]+cacheMat[12],e=cacheMat[1]*b+cacheMat[5]*c+-cacheMat[9]+cacheMat[13];invert(cacheMat,viewMat);let f=cacheMat[0]*d+cacheMat[4]*e+-cacheMat[8],j=cacheMat[1]*d+cacheMat[5]*e+-cacheMat[9],g=cacheMat[2]*d+cacheMat[6]*e+-cacheMat[10],h=f*f+j*j+g*g;return h>0&&(h=1/Math.sqrt(h)),f*=h,j*=h,g*=h,rayGround(a,cacheMat[12],cacheMat[13],cacheMat[14],f,j,g)}function moveToPointer(){!player.killed&&getGroundSpot(pointerSpot,pointersX[0],pointersY[0])&&(player.tx=pointerSpot[0],player.tz=pointerSpot[2])}function setPointer(a,b){const c=a.touches;if(c){pointers=c.length;for(let d=pointers;d--;){const e=c[d];pointersX[d]=e.pageX,pointersY[d]=e.pageY}}else b?(pointers=1,pointersX[0]=a.pageX,pointersY[0]=a.pageY):pointers=0;for(let d=pointers;d--;)pointersX[d]=2*pointersX[d]/screen[0]-1,pointersY[d]=1-2*pointersY[d]/screen[1];a.stopPropagation()}function pointerCancel(a){setPointer(a,0)}function pointerUp(a){setPointer(a,0),bubble.next&&bubble.next()}function pointerMove(a){setPointer(a,pointers)}function pointerDown(a){setPointer(a,1)}function lookAt(a,b){lookX=a,lookZ=b,translate(viewMat,idMat,a,0,b),rotate(viewMat,viewMat,.2,0,1,0),translate(viewMat,viewMat,camPos[0],camPos[1],camPos[2]),rotate(viewMat,viewMat,-.9,1,0,0),camA=viewMat[8],camB=viewMat[9],camC=viewMat[10],camX=viewMat[12],camY=viewMat[13],camZ=viewMat[14],spriteMat.set(viewMat),invert(viewMat,viewMat)}function resize(){gl.canvas.width=screen[0]=gl.canvas.clientWidth,gl.canvas.height=screen[1]=gl.canvas.clientHeight,gl.viewport(0,0,screen[0],screen[1]),setPerspective(projMat,Math.PI*.125,screen[0]/screen[1],.1,horizon),gl.uniformMatrix4fv(projMatLoc,gl.FALSE,projMat)}function compileShader(a,b){const c=gl.createShader(a);return gl.shaderSource(c,b),gl.compileShader(c),c}function createProgram(a,b){const c=gl.createProgram();gl.attachShader(c,compileShader(gl.VERTEX_SHADER,a)),gl.attachShader(c,compileShader(gl.FRAGMENT_SHADER,b)),gl.linkProgram(c);if(!gl.getProgramParameter(c,gl.LINK_STATUS))throw gl.getProgramInfoLog(c);return c}function updateGroundUvs(a,b){const c=mapSize-groundSize;for(let d=0,e=(mapRadius+b-groundRadius)*mapSize+(mapRadius+a-groundRadius),f=0;d<groundSize;++d,e+=c)for(let j=0;j<groundSize;++j,++e){const g=(map[e]&127)<<3,h=atlasCoords[g],i=atlasCoords[g+1],k=atlasCoords[g+6],m=atlasCoords[g+7];groundUvs[f++]=h,groundUvs[f++]=i,groundUvs[f++]=k,groundUvs[f++]=i,groundUvs[f++]=h,groundUvs[f++]=m,groundUvs[f++]=h,groundUvs[f++]=m,groundUvs[f++]=k,groundUvs[f++]=i,groundUvs[f++]=k,groundUvs[f++]=m}}function createGroundModel(){const a=[];for(let b=-groundRadius;b<=groundRadius;++b)for(let c=-groundRadius;c<=groundRadius;++c){const d=c*2,e=b*2;a.push(d-1,0,e-1,d+1,0,e-1,d-1,0,e+1,d-1,0,e+1,d+1,0,e-1,d+1,0,e+1)}return a}function createBuffer(a,b){const c=gl.createBuffer();return gl.bindBuffer(gl.ARRAY_BUFFER,c),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),b||gl.STATIC_DRAW),c}function createTexture(a){const b=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,b),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,a),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.generateMipmap(gl.TEXTURE_2D),b}function addFly(a,b,c){const d=random()*Math.PI*2,e={sprite:20,x:a+Math.cos(d)*c,y:0,z:b+Math.sin(d)*c,last:0,frame:0,update:function(){pickDirSprite(this,19,2,this.tx,this.tz),moveToTarget(this,this.tx,this.tz,.08)&&this.waypoint()},waypoint:function(){const f=random()*Math.PI*2,j=1+random()*8;this.tx=a+Math.cos(f)*j,this.tz=b+Math.sin(f)*j}};e.waypoint(),objects.push(e)}function addFlies(a,b,c,d){for(let e=0;e<a;++e)addFly(b,c,d)}function addSnake(a,b){objects.push({sprite:16,x:a,y:0,z:b,last:0,frame:0,update:function(){const c=player.x-this.x,d=player.z-this.z,e=c*c+d*d;e<.7?(pickDirSprite(this,16,2,player.x,player.z),eat(this,player)):this.sprite=16}})}function addFlowers(a,b,c,d){for(let e=0;e<a;++e){const f=random()*Math.PI*2,j=random()*d,g={sprite:15,x:b+Math.cos(f)*j,y:0,z:c+Math.sin(f)*j,tasty:1,name:"Flower",use:dropItem};objects.push(g),pickables.push(g)}}function addSnakeCircle(a,b,c,d,e){for(let f=Math.PI*2,j=0;f>0;f-=d,j^=1)addSnake(a+Math.cos(f)*(c+j*e),b+Math.sin(f)*(c+j*e))}function addRandomPredator(a,b,c){const d=random()*Math.PI*2,e={sprite:4,x:a+Math.cos(d)*c,y:0,z:b+Math.sin(d)*c,lx:0,lz:0,stuck:0,ignore:0,last:0,frame:0,speed:.06,sight:16,update:updatePredator,waypoint:function(){const f=random()*Math.PI*2,j=1+random()*8;this.tx=a+Math.cos(f)*j,this.tz=b+Math.sin(f)*j}};e.waypoint(),objects.push(e)}function addWanderingPredator(a,b,c,d){const e=Math.cos(d)*c,f=Math.sin(d)*c,j=a+e,g=b+f,h=a-e,i=b-f,k={sprite:4,x:j,y:0,z:g,lx:0,lz:0,stuck:0,ignore:0,last:0,frame:0,speed:.06,sight:16,update:updatePredator,waypoint:function(){this.x==j&&this.z==g?(this.tx=h,this.tz=i):(this.tx=j,this.tz=g)}};k.waypoint(),objects.push(k)}function addCirclingPredator(a,b,c,d,e){const f={sprite:4,y:0,lx:0,lz:0,stuck:0,ignore:0,last:0,frame:0,speed:.06,sight:16,a:e||0,update:updatePredator,waypoint:function(){this.tx=a+Math.cos(this.a)*c,this.tz=b+Math.sin(this.a)*c,this.a+=d}};f.waypoint(),f.x=f.tx,f.z=f.tz,objects.push(f)}function drawIsland(a,b,c){for(let d=-c;d<=c;++d)for(let e=-c;e<=c;++e){const f=Math.atan2(d,e);e*e+d*d<c*c&&(map[(b+d)*mapSize+(a+e)]=11+random()*3|0)}}function createMap(){const a=19,b=9;map.fill(a|128);for(let g=0,h=5,i=0,k=0,m,p=0;g<b;++g){drawIsland(mapRadius+i,mapRadius+k,h);const l=i*2,n=k*2,o=h*2;if(g<b-1)switch(g%6){default:case 0:addCirclingPredator(l,n,o*.8,.63),addRandomPredator(l,n,o*.8),g==0&&(objects[objects.length-1].hasDarbold=1);break;case 1:addSnakeCircle(l,n,o*.8,o*.05,1),addFlowers(1+random()*4|0,l,n,o*.8),addFlies(1+random()*3|0,l,n,o*.7);break;case 2:addWanderingPredator(l,n,o*.8,p+1.57);break;case 3:addSnakeCircle(l,n,o*.5,o*.05,2),addFlowers(1+random()*3|0,l,n,o*.8),addFlies(1+random()*3|0,l,n,o*.7);case 4:addRandomPredator(l,n,o*.8),addRandomPredator(l,n,o*.8);break;case 5:addSnakeCircle(l,n,o*.8,o*.05,1),addFlowers(1+random()*4|0,l,n,o*.4)}else addCirclingPredator(l,n,o*.8,.63),addCirclingPredator(l,n,o*.7,-.63,3),egg={sprite:14,x:l,y:0,z:n,name:"Egg",use:dropItem,reset:function(){this.x=l,this.z=n,this.tasty=0,pickables.filter(u=>u==egg).length<1&&pickables.push(egg)}},objects.push(egg),pickables.push(egg);m=4+random()*3|0,g==9&&(p+=3.14),p+=.6,i+=Math.cos(p)*(h+m*.8)|0,k+=Math.sin(p)*(h+m*.8)|0,h=m}const c=new Uint8Array(mapSize*mapSize),d=g=>Math.max(0,Math.min(g,mapSize-1)),e=(g,h)=>d(h)*mapSize+d(g),f=(g,h)=>map[e(g,h)],j=a|128;for(let g=0;g<mapSize;++g)for(let h=0;h<mapSize;++h){const i=f(h,g);if(i==j){const k=f(h,g-1),m=f(h-1,g),p=f(h+1,g),l=f(h,g+1);(m!=i&&p!=i||k!=i&&l!=i)&&(map[e(h,g)]=11)}}for(let g=0;g<mapSize;++g)for(let h=0;h<mapSize;++h){const i=f(h,g),k=f(h-1,g-1),m=f(h,g-1),p=f(h+1,g-1),l=f(h-1,g),n=f(h+1,g),o=f(h-1,g+1),u=f(h,g+1),w=f(h+1,g+1);i==j&&(k!=i||m!=i||p!=i||l!=i||n!=i||o!=i||u!=m||w!=i)&&(c[e(h,g)]=k!=i|(m!=i)<<1|(p!=i)<<2|(l!=i)<<3|(n!=i)<<4|(o!=i)<<5|(u!=i)<<6|(w!=i)<<7)}for(let g=0;g<mapSize;++g)for(let h=0;h<mapSize;++h){const i=e(h,g),k=c[i],m=tiles[k];m&&(map[i]=m|128)}for(let g=b*30;g>0;){const h=random()*(mapSize-1),i=random()*(mapSize-1);h*h+i*i>2&&!(map[Math.round(i)*mapSize+Math.round(h)]&128)&&(objects.push({sprite:9+random()*2|0,x:(h-mapRadius)*2,y:0,z:(i-mapRadius)*2}),--g)}}function init(a){lookAt(0,0),createMap(),objects.forEach(j=>{j.name&&(j.icon=document.getElementById(j.name)),j.dir=1}),bubble=document.getElementById("M"),inventory=document.getElementById("I");const b=document.getElementById("C");gl=b.getContext("webgl"),gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA),gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL),gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);const c=createTexture(a.canvas),d=createGroundModel();atlasCoords=a.coords,groundLength=d.length/3,groundModelBuffer=createBuffer(d),groundUvBuffer=gl.createBuffer(),groundUvs=new Float32Array(groundLength*2),spriteModelBuffer=createBuffer([-.5,1,0,-.5,0,0,.5,1,0,.5,0,0]),spriteUvBuffer=createBuffer(a.coords);const e=createProgram(document.getElementById("VertexShader").textContent,document.getElementById("FragmentShader").textContent),f=gl.getUniformLocation(e,"texture");gl.enableVertexAttribArray(vertexLoc=gl.getAttribLocation(e,"vertex")),gl.enableVertexAttribArray(uvLoc=gl.getAttribLocation(e,"uv")),projMatLoc=gl.getUniformLocation(e,"projMat"),modelViewMatLoc=gl.getUniformLocation(e,"modelViewMat"),gl.useProgram(e),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,c),gl.uniform1i(f,0),window.onresize=resize,resize(),b.onmousedown=pointerDown,b.onmousemove=pointerMove,b.onmouseup=pointerUp,b.onmouseout=pointerCancel,b.ontouchstart=pointerDown,b.ontouchmove=pointerMove,b.ontouchend=pointerUp,b.ontouchleave=pointerCancel,b.ontouchcancel=pointerCancel,document.addEventListener("gesturestart",function(j){j.preventDefault()},0),document.addEventListener("gesturechange",function(j){j.preventDefault()},0),document.addEventListener("gestureend",function(j){j.preventDefault()},0),run(),say(["Hello! I am Humwin,","your friendly space exploring robot.","I'm looking for my friend Darbold,","a sampling robot, that looks like me.","I was supposed to pick him up here,","but somehow I can't find him."])}function svgToImg(a,b,c,d,e){const f=new Image();return f.src=`data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${b} ${c}" width="${d}" height="${e}">${a}</svg>`)}`,f}function atlasInsert(a,b,c){if(a.l)return atlasInsert(a.l,b,c)||atlasInsert(a.r,b,c);if(a.img)return;const d=a.rc,e=d.r-d.l,f=d.b-d.t;return e<b||f<c?void 0:e==b&&f==c?a:(a.l={},a.r={},e-b>f-c?(a.l.rc={l:d.l+b,t:d.t,r:d.r,b:d.b},a.r.rc={l:d.l,t:d.t+c,r:d.l+b,b:d.b}):(a.l.rc={l:d.l+b,t:d.t,r:d.r,b:d.t+c},a.r.rc={l:d.l,t:d.t+c,r:d.r,b:d.b}),a.rc.r=d.l+b-1,a.rc.b=d.t+c-1,a)}function createAtlas(a){const b=1024,c=100,d=128,e=d/c,f=1,j=1/b,g=(f+2)*j,h={rc:{l:0,t:0,r:b,b}},i=[],k=document.createElement("canvas"),m=k.getContext("2d"),p=a.length;k.width=k.height=b,k.pending=p;for(let l=0;l<p;++l){const n=a[l],o=(n.split("<")[0].trim()+";").split(";"),u=o[0].split("x"),w=u[0]||c,x=u[1]||c,q=w*e|0,r=x*e|0,s=atlasInsert(h,q+f*2,r+f*2);if(!s)return;const t=s.rc,y=t.l*j,z=t.t*j,A=y+q*j,B=z+r*j;i.push(y+g,z+g,y+g,B-g,A-g,z+g,A-g,B-g),spriteSizes.push([q/d,r/d]),s.img=svgToImg(n,w,x,q,r).onload=function(){const C=o[1]*Math.PI/180,D=s.rc.l+f,E=s.rc.t+f,v=q>>1,F=r>>1;C>0?(m.save(),m.translate(D+v,E+F),m.rotate(C),m.drawImage(this,-v,-F),m.restore()):m.drawImage(this,D,E),--k.pending}}return{canvas:k,coords:i}}function waitForAtlas(a){a.canvas.pending>0?setTimeout(function(){waitForAtlas(a)},100):init(a)}function random(){return(seed=(seed*9301+49297)%233280)/233280}function createTiles(a){const b=g=>{const h=[];for(let i=0;i<3;++i)for(let k=0;k<3;++k)h[i*3+k]=g[(2-k)*3+i];return h},c=(g,h)=>{for(let i=0;i<h;++i)g=b(g);return g},d=g=>g[0]|g[1]<<1|g[2]<<2|g[3]<<3|g[5]<<4|g[6]<<5|g[7]<<6|g[8]<<7,e=[1,1,1,1,0,0,1,0,0],f=[0,0,0,0,0,0,0,0,1],j=[0,0,0,0,0,0,1,1,1];for(let g=0,h=0,i,k;g<360;g+=90,++h)i=a.length,a.push(`;${g}<rect style="fill:#59246e" width="100" height="100"></rect><path style="fill:#ff3a68" d="M100 50 L100 100 L50 100 C50 ${50+Math.round(random()*60-30)} ${50+Math.round(random()*60-30)} 50 100 50Z"></path>`),k=c(e,h),dns[i]=k,tiles[d(k)]=i,k=e.slice(0),k[2]=0,tiles[d(c(k,h))]=i,k=e.slice(0),k[6]=0,tiles[d(c(k,h))]=i,k=e.slice(0),k[2]=0,k[6]=0,tiles[d(c(k,h))]=i,i=a.length,a.push(`;${g}<rect style="fill:#ff3a68" width="100" height="100"></rect><path style="fill:#59246e" d="M100 50 L100 100 L50 100 C50 ${50+Math.round(random()*60-30)} ${50+Math.round(random()*60-30)} 50 100 50Z"></path>`),k=c(f,h),dns[i]=k,tiles[d(k)]=i,i=a.length,a.push(`;${g}<rect style="fill:#ff3a68" width="100" height="100"></rect><path style="fill:#59246e" d="M100 100 L0 100 L0 50 L10 50 C35 ${50+Math.round(random()*12-6)} 65 ${50+Math.round(random()*12-6)} 90 50 L100 50 L100 100Z"></path>`),k=c(j,h),dns[i]=k,tiles[d(k)]=i,k=j.slice(0),k[6]=0,tiles[d(c(k,h))]=i,k=j.slice(0),k[8]=0,tiles[d(c(k,h))]=i,k=j.slice(0),k[6]=0,k[8]=0,tiles[d(c(k,h))]=i}window.onload=function(){const a=[],b=document.getElementsByTagName("g");for(let c=0,d=b.length;c<d;++c)a.push(b[c].innerHTML);createTiles(a),waitForAtlas(createAtlas(a))};function invert(a,b){const c=b[0],d=b[1],e=b[2],f=b[3],j=b[4],g=b[5],h=b[6],i=b[7],k=b[8],m=b[9],p=b[10],l=b[11],n=b[12],o=b[13],u=b[14],w=b[15],x=c*g-d*j,q=c*h-e*j,r=c*i-f*j,s=d*h-e*g,t=d*i-f*g,y=e*i-f*h,z=k*o-m*n,A=k*u-p*n,B=k*w-l*n,C=m*u-p*o,D=m*w-l*o,E=p*w-l*u;let v=x*E-q*D+r*C+s*B-t*A+y*z;if(!v)return;v=1/v,a[0]=(g*E-h*D+i*C)*v,a[1]=(e*D-d*E-f*C)*v,a[2]=(o*y-u*t+w*s)*v,a[3]=(p*t-m*y-l*s)*v,a[4]=(h*B-j*E-i*A)*v,a[5]=(c*E-e*B+f*A)*v,a[6]=(u*r-n*y-w*q)*v,a[7]=(k*y-p*r+l*q)*v,a[8]=(j*D-g*B+i*z)*v,a[9]=(d*B-c*D-f*z)*v,a[10]=(n*t-o*r+w*x)*v,a[11]=(m*r-k*t-l*x)*v,a[12]=(g*A-j*C-h*z)*v,a[13]=(c*C-d*A+e*z)*v,a[14]=(o*q-n*s-u*x)*v,a[15]=(k*s-m*q+p*x)*v}function multiply(a,b,c){let d=b[0],e=b[1],f=b[2],j=b[3],g=b[4],h=b[5],i=b[6],k=b[7],m=b[8],p=b[9],l=b[10],n=b[11],o=b[12],u=b[13],w=b[14],x=b[15],q=c[0],r=c[1],s=c[2],t=c[3];a[0]=q*d+r*g+s*m+t*o,a[1]=q*e+r*h+s*p+t*u,a[2]=q*f+r*i+s*l+t*w,a[3]=q*j+r*k+s*n+t*x,q=c[4],r=c[5],s=c[6],t=c[7],a[4]=q*d+r*g+s*m+t*o,a[5]=q*e+r*h+s*p+t*u,a[6]=q*f+r*i+s*l+t*w,a[7]=q*j+r*k+s*n+t*x,q=c[8],r=c[9],s=c[10],t=c[11],a[8]=q*d+r*g+s*m+t*o,a[9]=q*e+r*h+s*p+t*u,a[10]=q*f+r*i+s*l+t*w,a[11]=q*j+r*k+s*n+t*x,q=c[12],r=c[13],s=c[14],t=c[15],a[12]=q*d+r*g+s*m+t*o,a[13]=q*e+r*h+s*p+t*u,a[14]=q*f+r*i+s*l+t*w,a[15]=q*j+r*k+s*n+t*x}function rotate(a,b,c,d,e,f){let j=Math.sqrt(d*d+e*e+f*f),g,h,i,k,m,p,l,n,o,u,w,x,q,r,s,t,y,z,A,B,C,D,E,v;if(j<1e-6)return;j=1/j,d*=j,e*=j,f*=j,g=Math.sin(c),h=Math.cos(c),i=1-h,k=b[0],m=b[1],p=b[2],l=b[3],n=b[4],o=b[5],u=b[6],w=b[7],x=b[8],q=b[9],r=b[10],s=b[11],t=d*d*i+h,y=e*d*i+f*g,z=f*d*i-e*g,A=d*e*i-f*g,B=e*e*i+h,C=f*e*i+d*g,D=d*f*i+e*g,E=e*f*i-d*g,v=f*f*i+h,a[0]=k*t+n*y+x*z,a[1]=m*t+o*y+q*z,a[2]=p*t+u*y+r*z,a[3]=l*t+w*y+s*z,a[4]=k*A+n*B+x*C,a[5]=m*A+o*B+q*C,a[6]=p*A+u*B+r*C,a[7]=l*A+w*B+s*C,a[8]=k*D+n*E+x*v,a[9]=m*D+o*E+q*v,a[10]=p*D+u*E+r*v,a[11]=l*D+w*E+s*v,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15])}function scale(a,b,c,d,e){a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*d,a[5]=b[5]*d,a[6]=b[6]*d,a[7]=b[7]*d,a[8]=b[8]*e,a[9]=b[9]*e,a[10]=b[10]*e,a[11]=b[11]*e,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]}function translate(a,b,c,d,e){if(b===a)a[12]=b[0]*c+b[4]*d+b[8]*e+b[12],a[13]=b[1]*c+b[5]*d+b[9]*e+b[13],a[14]=b[2]*c+b[6]*d+b[10]*e+b[14],a[15]=b[3]*c+b[7]*d+b[11]*e+b[15];else{let f,j,g,h,i,k,m,p,l,n,o,u;f=b[0],j=b[1],g=b[2],h=b[3],i=b[4],k=b[5],m=b[6],p=b[7],l=b[8],n=b[9],o=b[10],u=b[11],a[0]=f,a[1]=j,a[2]=g,a[3]=h,a[4]=i,a[5]=k,a[6]=m,a[7]=p,a[8]=l,a[9]=n,a[10]=o,a[11]=u,a[12]=f*c+i*d+l*e+b[12],a[13]=j*c+k*d+n*e+b[13],a[14]=g*c+m*d+o*e+b[14],a[15]=h*c+p*d+u*e+b[15]}}function setPerspective(a,b,c,d,e){const f=1/Math.tan(b),j=d-e;a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)/j,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d/j,a[15]=0}
</script></html>