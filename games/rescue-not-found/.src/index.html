<html><head><title>Rescue Not Found</title><meta name=monetization content=$coil.xrptipbot.com/VwAzTMYJRImKu0mJZQi1Dg><link rel=manifest href='data:application/manifest+json,{ "name": "Rescue not Found", "short_name": "RESCUEnotFOUND", "description": "David Brads js13k2020 entry", "display": "fullscreen", "orientation": "landscape", "background_color": "rgb(16,16,16)" }'><meta name=viewport content="width=device-width, initial-scale=1.0, user-scalable=no"><style>body,html{margin:0;padding:0;background-color:#101010;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}#stage{display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100vw * (9/16));max-height:100vh;width:100vw}canvas{height:100%;min-height:288px;min-width:512px}canvas,img{image-rendering:optimizeSpeed;image-rendering:pixelated}</style><script>!function(t){"use strict";function e(t,e){return~~(Math.random()*(e-t+1))+t}function n(t){let e,n,o=t.length;const r=t.slice();for(;0!==o;)n=~~(Math.random()*o),o-=1,e=r[o],r[o]=r[n],r[n]=e;return r}const o=(...t)=>{let e=s.createBufferSource(),n=s.createBuffer(t.length,t[0].length,a);return t.map((t,e)=>n.getChannelData(e).set(t)),e.buffer=n,e.connect(s.destination),e.start(),e};let r=(t=1,e=.05,n=220,o=0,r=0,s=.1,i=0,l=1,f=0,u=0,_=0,h=0,d=0,w=0,p=0,m=0,M=0,b=1,v=0,g=0)=>{let k,A,y=2*Math.PI,x=f*=500*y/a**2,S=(0<p?1:-1)*y/4,C=n*=(1+2*e*Math.random()-e)*y/a,D=[],$=0,P=0,T=0,E=1,F=0,B=0,R=0;for(u*=500*y/a**3,p*=y/a,_*=y/a,h*=a,d=a*d|0,A=(o=99+a*o)+(v*=a)+(r*=a)+(s*=a)+(M*=a)|0;T<A;D[T++]=R)++B%(100*m|0)||(R=i?1<i?2<i?3<i?Math.sin(($%y)**3):Math.max(Math.min(Math.tan($),1),-1):1-(2*$/y%2+2)%2:1-4*Math.abs(Math.round($/y)-$/y):Math.sin($),R=(d?1-g+g*Math.sin(2*Math.PI*T/d):1)*(0<R?1:-1)*Math.abs(R)**l*t*c*(T<o?T/o:T<o+v?1-(T-o)/v*(1-b):T<o+v+r?b:T<A-M?(A-T-M)/s*b:0),R=M?R/2+(M>T?0:(T<A-M?1:(A-T)/M)*D[T-M|0]/2):R),k=(n+=f+=u)*Math.sin(P*p-S),$+=k-k*w*(1-1e9*(Math.sin(T)+1)%2),P+=k-k*w*(1-1e9*(Math.sin(T)**2+1)%2),E&&++E>h&&(n+=_,C+=_,E=0),!d||++F%d||(n=C,f=x,E=E||1);return D},c=.1,a=44100,s=new AudioContext;const i=r(.5,0,220,0,0,.1,0,1,0,0,0,0,0,0,0,0,0,1,0,0),l=r(.25,.05,821,0,.4,1.99,3,3.35,.2,0,0,0,0,.6,-1,.7,0,.95,.07,0),f=r(.5,.05,500,0,.11,.19,0,1.96,1,-2.6,203,.02,.11,0,-1.1,0,0,.61,.03,0),u=r(.5,.05,1,0,.02,.01,1,2.7,0,0,88,.01,0,0,0,.2,0,.49,.19,0),_=((t,e,n,o=125)=>{let c,s,i,l,f,u,_,h,d,w,p,m,M,b,v,g=0,k=[],A=[],y=[],x=0,S=0,C=1,D={},$=a/o*60>>2;for(;C;x++)k=[C=h=p=M=0],n.map((o,a)=>{for(_=e[o][x]||[0,0,0],C|=!!e[o][x],v=M+(e[o][0].length-2-!h)*$,b=a==n.length-1,s=2,l=M;s<_.length+b;h=++s){for(f=_[s],d=s==_.length+b-1&&b||w!=(_[0]||0)|f|0,i=0;i<$&&h;i++>$-99&&d?m+=(m<1)/99:0)u=(1-m)*k[g++]/2||0,A[l]=(A[l]||0)-u*S+u,y[l]=(y[l++]||0)+u*S+u;f&&(m=f%1,S=_[1]||0,(f|=0)&&(k=D[[w=_[g=0]||0,f]]=D[[w,f]]||(c=[...t[w]],c[2]*=2**((f-12)/12),f>0?r(...c):[])))}M=v});return[A,y]})([[.3,0,260,,1,1.5,,,,,,,,,,,,,.2],[.4,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5]],[[[,,1,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,],[,,8,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,],[,,17,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,20,,,,,,,,,,,,,,,,],[1,1,.25,,,,13,,,,13,,,,,,,,,,,,1,,,,1,,,,,,,,,,,,1,,,,1,,,,,,,,,,,,1,,,,1,,,,,,,,]],[[,,1,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,],[,,8,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,],[,,17,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,20,,,,,,,,,,,,,,,,]],[[,,1,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,],[,,8,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,],[,,17,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,20,,,,,,,,,,,,,,,,],[,,,,,,1,,32,,,,,,,,,,,,,,1,,27,,,,,,,,,,,,,,1,,20,,,,,,,,,,,,,,1,,17,,,,,,,,,,]]],[1,2,2,0],80);let h;function d(){h=o(..._),h.onended=w}function w(){m&&setTimeout(()=>{d(),h.playbackRate.value=e(3,5)/4},250)}const p={t:!0,o:[0,0],s:[0,0],i:0,l:!1,u:0,_:0,p:0,m:0};let m=!0;function M(t){m=t,m?d():h.stop()}let b=!1;function v(t){b=t}let g=[1,1,1,1,1,1],k=[3,3,3,0];const A=["Hull","Power","Oxygen","Distress Signal"];let y=!1,x=0;function S(t=!1,e=0){y=t,x=e}function C(t,e){const n=3===t?3:5;k[t]=Math.max(Math.min(k[t]+e,n),0)}const D=[],$=[];let P=-1;function T(t){P=t}function E(t){const e=$[t];for(const[t,n]of e.M.entries())if(n!==e.v[t])return!1;return!0}function F(t){return $[t].g&&t!==P}function B(t){return E(t)||F(t)}function R(){const t=n([0,1,2,3]);let o=[],r=0;for(const t of D){const n=e(1,100);switch(r+=t.k,t.k){case 1:o.push(0);break;case 2:o.push(n<50?0:1);break;case 3:o.push(n<50?1:2)}}o=n(o);let c=r<8?1:2;const a=2===c;for(let n=0;n<D.length;n++){let r,s=[],i=()=>{},l=()=>{},f=["None"],u=["None"],_=-1;if(3===n)k[3]>=3?(r=5,f=["Get rescued!"],i=()=>{S(!0,1)}):k[1]>=3&&e(1,100)>50||k[1]>=4?(r=4,f=["-2 "+A[1],"+1 "+A[3]],i=()=>{C(1,-2),C(3,1)}):c>0?(r=3,_=0,u=["-1 "+A[_]],l=()=>{C(_,-1)}):(r=1,f=["+1 "+A[1]],i=()=>{C(1,1)});else{r=n;const t=o[n]>0||k[n]<=2?2:1;f=[`+${t} ${A[n]}`],i=()=>{C(n,t)},a&&c>0&&e(1,100)>50&&(c--,_=e(0,2),u=["-1 "+A[_]],l=()=>{C(_,-1)})}for(let t=0,r=2+o[n];t<r;t++)s.push(e(1,6));const h=[O(r,_),"","Success",...f,"","Failure",...u];$[t[n]]={A:h,v:[],S:r,M:s,C:i,D:l,$:_}}}function O(t,e){return 0===t?0===e?"Structural Damage":1===e?"Core Containment":2===e?"Hull Breach":"Hull Maintenance":1===t?0===e?"Power to the Shields!":1===e?"Core Malfunction":2===e?"Life Support Failure":"Solar Cell Maintenance":2===t?0===e?"Pressure Equalization":1===e?"Ventilation Upkeep":2===e?"Repair CO2 Scrubbers":"Tend to the Arboretum":3===t?"Evasive Maneuvers":4===t?"Boost Distress Signal":"Contact Nearby Ship"}function N(t=0){let e=[];for(let n=0;(+new Date+t)%3+2>n;)e[++n]=String.fromCharCode(25*Math.random()|0+(n<2?65:97));return e.join("")}function U(t,e,n,o){let r=0;return r=(r|255&t)<<8>>>0,r=(r|255&e)<<8>>>0,r=(r|255&n)<<8>>>0,r=(r|255&o)>>>0,r}function H(t,e,n,o){return!(p.o[0]<t||p.o[1]<e||p.o[0]>=t+n||p.o[1]>=e+o)}const L=4294967295;let q,I,K;const j=new ArrayBuffer(873760),G=new Float32Array(j),z=new Uint32Array(j),J=new Uint16Array(131064),V=new Float32Array([1,0,0,1,0,0]),W=new Float32Array(60);let Q,X,Y,Z,tt,et=0,nt=0,ot=null,rt=[0,0,0];function ct(t,e){V[4]=V[0]*t+V[2]*e+V[4],V[5]=V[1]*t+V[3]*e+V[5]}function at(t,e){V[0]=V[0]*t,V[1]=V[1]*t,V[2]=V[2]*e,V[3]=V[3]*e}function st(){W[nt+0]=V[0],W[nt+1]=V[1],W[nt+2]=V[2],W[nt+3]=V[3],W[nt+4]=V[4],W[nt+5]=V[5],nt+=6}function it(){nt-=6,V[0]=W[nt+0],V[1]=W[nt+1],V[2]=W[nt+2],V[3]=W[nt+3],V[4]=W[nt+4],V[5]=W[nt+5]}function lt(t,e,n,o,r,c,a,s,i,l=L){const f=e,u=n,_=e+o,h=n+r,d=e,w=n+r,p=e+o,m=n,M=V[0],b=V[1],v=V[2],g=V[3],k=V[4],A=V[5],y=l;(t!==ot||et+1>=10922)&&(q.bufferSubData(q.ARRAY_BUFFER,0,j),q.drawElements(4,6*et,q.UNSIGNED_SHORT,0),et=0,ot!==t&&(ot=t,q.bindTexture(q.TEXTURE_2D,ot)));let x=20*et;G[x++]=f*M+u*v+k,G[x++]=f*b+u*g+A,G[x++]=c,G[x++]=a,z[x++]=y,G[x++]=_*M+h*v+k,G[x++]=_*b+h*g+A,G[x++]=s,G[x++]=i,z[x++]=y,G[x++]=d*M+w*v+k,G[x++]=d*b+w*g+A,G[x++]=c,G[x++]=i,z[x++]=y,G[x++]=p*M+m*v+k,G[x++]=p*b+m*g+A,G[x++]=s,G[x++]=a,z[x++]=y,++et>=10922&&(q.bufferSubData(q.ARRAY_BUFFER,0,j),q.drawElements(4,6*et,q.UNSIGNED_SHORT,0),et=0)}const ft=new Map,ut=new Map;function _t(t,e,n,o=L,r=1,c=1){const a=ut.get(t);ct(e,n),lt(a.P,0,0,a.w*r,a.h*c,a.u0,a.v0,a.u1,a.v1,o)}function ht(t,e,n,o=L,r=1,c=1){st(),_t(t,e,n,o,r,c),it()}function dt(t,e,n,o,r=L){const c=ut.get("flat");st(),ct(t,e),lt(c.P,0,0,n,o,c.u0,c.v0,c.u1,c.v1,r),it()}const wt=new Map;function pt(t,e={T:L,F:0,B:1,R:0}){e.T=e.T||L,e.F=e.F||0,e.B=e.B||1,e.R=e.R||0;const n=8*e.B,o=t.split(" ");let r=[];if(wt.has(`${t}_${e.B}_${e.R}`)&&(r=wt.get(`${t}_${e.B}_${e.R}`)),0===r.length){if(0===e.R)r=[o.join(" ")];else{let t=[];for(const c of o)if(t.push(c),t.join(" ").length*n>=e.R){const e=t.pop();r.push(t.join(" ")),t=[e]}t.length>0&&r.push(t.join(" "))}wt.set(`${t}_${e.B}_${e.R}`,r)}return r.length}function mt(t,e,n,o={T:L,F:0,B:1,R:0}){o.T=o.T||L,o.F=o.F||0,o.B=o.B||1,o.R=o.R||0;const r=8*o.B,c=e;let a=0;pt(t,o);const s=wt.get(`${t}_${o.B}_${o.R}`);for(const t of s){const s=t.split(" "),i=t.length*r;let l=0;1===o.F?l=~~((-i+1*o.B)/2):2===o.F&&(l=~~-(i-1*o.B));for(const t of s){for(const s of t.split("")){const t=ut.get(s);e=c+a+l,st(),ct(e,n),at(o.B,o.B),lt(t.P,0,0,t.w,t.h,t.u0,t.v0,t.u1,t.v1,o.T),it(),a+=r}a+=r}n+=r+2*o.B,a=0}return s.length}const Mt=Math.floor(256),bt=Math.floor(144);function vt(t,e){return(t=[...t])[0]-=e[0],t[1]-=e[1],t}function gt(t,e){-1===e.O&&(e.O=t);let n=t-e.O;if(n>=e.N)return e.U&&e.U(),{H:e.L,q:!0};let o=function(t,e=1){switch(e){case 4:return function(t){return t*(2-t)}(t);case 2:return function(t){const e=1.70158;return t*t*((e+1)*t-e)}(t);case 3:return function(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)}(t);case 5:return function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}(t);case 1:return t;case 0:default:return 1}}(n/e.N,e.I),r=[];for(let t=0,n=e.K.length;t<n;t++)r[t]=e.K[t]+Math.round(e.L[t]-e.K[t])*o;return{H:r,q:!1}}const kt=[],At=[],yt=new Map,xt=[],St=[],Ct=[],Dt=[],$t=new Map,Pt=[],Tt=new Map,Et=new Map,Ft=new Map,Bt=new Map,Rt=new Map,Ot=new Map,Nt=[],Ut=[0],Ht=[[]];let Lt=1;function qt(){let t=Lt++;return Ht[t]=[],Ut[t]=0,Ht[0].push(t),xt[t]=[16,16],St[t]=1,kt[t]=[0,0],Ct[t]=!0,Nt[t]=!0,t}function It(t,e){const n=Ht[Ut[e]];let o=-1;for(let t=0;t<n.length;t++)if(n[t]===e){o=t;break}o>-1&&n.splice(o,1),Ut[e]=t,Ht[t].push(e)}function Kt(t,e,n=0,o=0){return kt[t][0]===e[0]&&kt[t][1]===e[1]?Promise.resolve():0!==n&&!yt.has(t)&&o>0?new Promise((r,c)=>{yt.set(t,function(t,e,n,o=1,r=null){return{O:-1,N:t,K:[...e],L:[...n],I:o,U:r}}(o,kt[t],e,n,r))}):(kt[t][0]=e[0],kt[t][1]=e[1],At[t]=Gt(t,!0),Promise.resolve())}function jt(t){const e=xt[t],n=St[t];return[e[0]*n,e[1]*n]}function Gt(t,e=!1){if(At[t]&&!e)return At[t];let n=[...kt[t]];for(t=Ut[t];0!==t;)n[0]+=kt[t][0],n[1]+=kt[t][1],t=Ut[t];return At[t]=n,n}function zt(t,e=!0){Ft.set(t,e)}function Jt(t,e=!0){Et.set(t,e),Bt.set(t,e),Rt.set(t,e)}function Vt(t,e=!0){Bt.set(t,e),Rt.set(t,e)}function Wt(t,e=!0){Rt.set(t,e)}function Qt(t){const e=Tt.get(t),n=Gt(t);It(e,t),Kt(t,vt(n,Gt(e))),Kt(t,[0,0],4,250)}function Xt(t){if(Ct[t]){const e=kt[t],n=jt(t),o=St[t];if(st(),Nt[t])switch(Dt[t]){case 9:ct(e[0],e[1]),_t("music",0,0,L,o,o),m||_t("na",0,0,L,o,o);break;case 10:ht("fs",e[0],e[1],L,o,o);break;case 7:const r=D[$t.get(t)];let c=3===r.k?4281515967:2===r.k?4281515826:L;ct(e[0],e[1]),ht("t"+($t.get(t)+1),n[0]/4,n[0]/4,L,o,o),_t("card",0,0,c,o,o);break;case 1:_t("d"+Pt[t],e[0],e[1],L,o,o);break;case 5:ct(e[0],e[1]),dt(0,0,n[0],n[1],E($t.get(t))?1144307508:859059391);break;case 6:ct(e[0],e[1]);const a=$[$t.get(t)];let s="task",i=L;switch(a.S){case 0:s="hull";break;case 2:s="o2";break;case 1:s="pow";break;case 3:s="skull"}a.$>=0&&(i=4281479871),ht(s,n[0]/4,n[0]/4,L,o,o),_t("card",0,0,i,o,o);const l=pt(a.A[0],{R:88});mt(a.A[0],128,32-Math.floor(9*l/2),{T:4292730333,R:88,F:1});break;case 8:_t("cs",e[0],e[1],3721186508,o,o);break;case 2:{ct(e[0],e[1]);const n=$[$t.get(Ut[t])].M[$t.get(t)];if(!n)break;ht("d"+n,0,0,3431499912,o,o),_t("ds",0,0,3721186508,o,o);break}case 4:ct(e[0],e[1]),_t("ds",0,0,L,o,o);break;case 0:p.m===t?dt(e[0],e[1],n[0],n[1],4279308561):p._===t?dt(e[0],e[1],n[0],n[1],L):dt(e[0],e[1],n[0],n[1],4289374890),dt(e[0]+1,e[1]+1,n[0]-2,n[1]-2,4281150765),ct(e[0],e[1]);const f=pt(Ot.get(t),{F:1,R:n[0]-2});mt(Ot.get(t),n[0]/2,n[1]/2-8*f/2,{F:1,R:n[0]-2});break;default:ct(e[0],e[1])}else ct(e[0],e[1]);for(let e of Ht[t])Xt(e);it()}}function Yt(t,e,n){const o=qt();return xt[o]=e,Kt(o,n),Vt(o),Dt[o]=0,Ot.set(o,t),o}let Zt=-1,te=-1;function ee(t){const e=qt();return xt[e]=[8,8],St[e]=2,Kt(e,t),Vt(e),Dt[e]=10,e}let ne=-1,oe=[],re=[],ce=[],ae=!1,se=-1,ie=-1,le=!1,fe=!1,ue=!1;const _e=[[16,16],[224,16],[16,128],[224,128]],he=[176,96],de=[];function we(t,e){de.push({j:-1,G:e,J:t})}let pe,me=-1,Me=-1,be=-1,ve=!1,ge=0;function ke(t){ge=t}window.addEventListener("load",async()=>{const t=[];function r(t){return"t"===t.type[0]}function c(t){const e=pe.getBoundingClientRect();if(r(t)){t.preventDefault();const n=t.touches[0];return p.o[0]=Math.floor((n.clientX-e.left)/(e.width/512)),void(p.o[1]=Math.floor((n.clientY-e.top)/(e.height/288)))}t=t,p.o[0]=Math.floor((t.clientX-e.left)/(e.width/512)),p.o[1]=Math.floor((t.clientY-e.top)/(e.height/288))}function a(t){if(r(t)){const e=pe.getBoundingClientRect(),n=t;n.preventDefault();const o=n.touches[0];p.o[0]=Math.floor((o.clientX-e.left)/(e.width/512)),p.o[1]=Math.floor((o.clientY-e.top)/(e.height/288))}p.l=!0}function s(t){p.l=!1}pe=document.querySelector("canvas"),pe.width=512,pe.height=288,function(t){function e(t,e){const n=q.createShader(e);return q.shaderSource(n,t),q.compileShader(n),n}function n(t,e,n){const o=q.createBuffer();return q.bindBuffer(t,o),q.bufferData(t,e,n),o}I=t.width,K=t.height,q=t.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0});const o=function(t,n){const o=q.createProgram(),r=e("precision lowp float;attribute vec2 v,t;attribute vec4 c;varying vec2 uv;varying vec4 col;uniform mat4 m;void main() {gl_Position = m * vec4(v, 1.0, 1.0);uv = t;col = c;}",q.VERTEX_SHADER),c=e("precision lowp float;varying vec2 uv;varying vec4 col;uniform sampler2D s;void main() {gl_FragColor = texture2D(s, uv) * col;}",q.FRAGMENT_SHADER);return q.attachShader(o,r),q.attachShader(o,c),q.linkProgram(o),o}();Q=n(q.ELEMENT_ARRAY_BUFFER,J.byteLength,q.STATIC_DRAW),X=n(q.ARRAY_BUFFER,j.byteLength,q.DYNAMIC_DRAW),q.blendFunc(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA),q.enable(q.BLEND),q.useProgram(o),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,Q);for(let t=0,e=0;t<65532;t+=6,e+=4)J[t+0]=e,J[t+1]=e+1,J[t+2]=e+2,J[t+3]=e+0,J[t+4]=e+3,J[t+5]=e+1;q.bufferSubData(q.ELEMENT_ARRAY_BUFFER,0,J),q.bindBuffer(q.ARRAY_BUFFER,X),Y=q.getAttribLocation(o,"v"),Z=q.getAttribLocation(o,"t"),tt=q.getAttribLocation(o,"c"),q.enableVertexAttribArray(Y),q.vertexAttribPointer(Y,2,q.FLOAT,!1,20,0),q.enableVertexAttribArray(Z),q.vertexAttribPointer(Z,2,q.FLOAT,!1,20,8),q.enableVertexAttribArray(tt),q.vertexAttribPointer(tt,4,q.UNSIGNED_BYTE,!0,20,16),q.uniformMatrix4fv(q.getUniformLocation(o,"m"),!1,new Float32Array([2/I,0,0,0,0,-2/K,0,0,0,0,1,1,-1,1,0,0])),q.activeTexture(q.TEXTURE0)}(pe),function(){me=qt(),Nt[me]=!1,xt[me][0]=512,xt[me][1]=288;const t=ee([480,0]);It(me,t),Me=Yt("Launch Shuttle",[104,40],[Mt-52,bt]),It(me,Me),be=Yt("Disable Coil Bonus",[96,40],[Mt-48,bt+50]),It(me,be)}(),function(){ne=qt(),Nt[ne]=!1,xt[ne][0]=512,xt[ne][1]=288;const t=function(t){const e=qt();return xt[e]=[8,8],St[e]=2,Kt(e,[448,0]),Vt(e),Dt[e]=9,e}();It(ne,t);const e=ee([480,0]);It(ne,e);for(let t=0;t<4;t++){const e=qt();Nt[e]=!1,xt[e]=he,Dt[e]=5,$t.set(e,t),zt(e),Wt(e),It(ne,e),Kt(e,_e[t]),oe.push(e);const n=qt();xt[n]=[16,16],St[n]=3,Dt[n]=6,$t.set(n,t),It(e,n);const o=qt();xt[o]=[16,16],St[o]=2,Dt[o]=8,It(e,o),Kt(o,[48,16]);for(let t=0;t<4;t++){const n=qt();xt[n]=[16,16],St[n]=2,Dt[n]=2,$t.set(n,t),It(e,n),Kt(n,[48*t,64]);const o=qt();Ct[o]=!1,xt[o]=[16,16],St[o]=2,Dt[o]=1,Pt[o]=0,Tt.set(o,n),It(n,o)}}for(let t=0;t<4;t++){const e=qt();xt[e]=[16,16],St[e]=2,It(ne,e),Kt(e,[16+48*t,240]);const n=qt();xt[n]=[16,16],St[n]=2,Dt[n]=7,$t.set(n,t),Tt.set(n,e),Jt(n),It(e,n),re.push(n)}for(let t=0;t<6;t++){const e=qt();xt[e]=[16,16],St[e]=2,It(ne,e),Kt(e,[224+48*t,240]);const n=qt();Ct[n]=!1,xt[n]=[16,16],St[n]=2,Dt[n]=1,$t.set(n,t),Pt[n]=0,Tt.set(n,e),Jt(n),It(e,n),ce.push(n)}se=Yt("Roll Dice",[80,32],[416,192]),It(ne,se),ie=qt(),xt[ie]=[80,64],Dt[ie]=3,zt(ie),It(ne,ie),Kt(ie,[416,112]);const n=qt();xt[n]=[16,16],St[n]=2,Dt[n]=4,It(ie,n),Kt(n,[24,8]);const o=qt();Ct[o]=!1,xt[o]=[16,16],St[o]=2,Dt[o]=1,Pt[o]=0,Tt.set(o,n),Jt(o),It(n,o)}(),Zt=qt(),Nt[Zt]=!1,xt[Zt][0]=512,xt[Zt][1]=288,te=Yt("Back To Menu",[112,32],[192,224]),It(Zt,te),document.addEventListener("pointermove",c),document.addEventListener("touchmove",c),pe.addEventListener("pointerdown",a),pe.addEventListener("touchstart",a),pe.addEventListener("pointerup",s),pe.addEventListener("touchend",s);let _=0;await async function(t){const e=document.querySelector("#sheet").innerHTML,n=JSON.parse(e);if("textures"===n.type)return function(t){const e=new Image;return new Promise((n,o)=>{try{e.addEventListener("load",()=>{const o=document.createElement("canvas");o.width=224,o.height=64,o.getContext("2d").drawImage(e,0,0),o.getContext("2d").drawImage(function(){const t=document.createElement("canvas");let e,n,o,r,c,a,s,i,l;for(e=Date.now(),n=t.getContext("2d"),n.lineWidth=2,n.strokeStyle="rgb(51,51,51)",o=()=>(s+=5,1e9*(Math.sin(++s+r*r)+1)%256|0),r=28;r--;)for(a=4;a--;)for(s=e,c=o()/5+50|0;c--;)i=3&c,l=c>>3,o()<50?n.fillStyle=`rgb(${o()},${o()},${o()})`:o()**2/2e3>i*i+(l-1)**2&&n.fillRect(3+r%28*8-a%2*2*i+i,1+8*(r>>5)+l,1,1);return t}(),0,48);const r=function(t){const e=q.createTexture();return q.bindTexture(q.TEXTURE_2D,e),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,t),q.bindTexture(q.TEXTURE_2D,null),e}(o);ft.set(t.name,r);for(const e of t.textures)if("sprite"===e.type)ut.set(e.name,{P:r,w:e.w,h:e.h,u0:e.x/o.width,v0:e.y/o.height,u1:(e.x+e.w)/o.width,v1:(e.y+e.h)/o.height});else for(let t=e.x,n=0;t<o.width;t+=e.w)ut.set(e.name[n],{P:r,w:e.w,h:e.h,u0:t/o.width,v0:e.y/o.height,u1:(t+e.w)/o.width,v1:(e.y+e.h)/o.height}),n++;let c=1;for(let t=0;t<o.width;t+=8)ut.set("t"+c++,{P:r,w:8,h:8,u0:t/o.width,v0:48/o.height,u1:(t+8)/o.width,v1:56/o.height});n()}),e.src=t.url}catch(t){o(t)}})}(n)}(),rt=[16/255,16/255,16/255],q.clearColor(rt[0],rt[1],rt[2],1),_=performance.now(),requestAnimationFrame((function r(c){if(_=c,q.clear(q.COLOR_BUFFER_BIT),t.length<300&&Math.random()<.5){let n={V:[0,0],velocity:[1*Math.random()-.5,1*Math.random()-.5]};0===n.velocity[0]&&(n.velocity[0]=.1*e(1,100)>50?-1:1),0===n.velocity[1]&&(n.velocity[1]=.1*e(1,100)>50?-1:1),t.push(n)}for(let e=0,n=t.length;e<n;e++){let n=t[e].V;n[0]+=t[e].velocity[0],n[1]+=t[e].velocity[1],(n[0]>Mt||n[0]<-Mt)&&(n[0]=n[1]=0);let o=Math.max(16,Math.floor((Math.abs(n[0])+Math.abs(n[1]))/2)),r=Math.abs(n[1]/100+e/200)/4/.2*.2;ht("star",Mt+n[0],bt+n[1],U(255,Math.min(255,o*(e%6==0?1.5:1)),o,Math.min(255,o*(e%14==0?1.5:1))),r,r)}let a=function(t){switch(t){case 1:return ne;case 2:return Zt;case 0:default:return me}}(ge);0!==p._&&(p.u=p._),p._=0,p.t&&function t(e,n=e){if(Ct[e]){let r=Gt(e,!0);const c=jt(e);if(p.m>0&&(p._=p.m),Rt.get(e)&&p._<=0&&H(r[0],r[1],c[0],c[1])&&!yt.has(e)&&(p._=e),p.u!==p._&&p._>0&&5!==Dt[p._]&&o(i),Bt.get(e)&&0===p.m&&p._===e&&p.l&&(p.m=e,Et.get(e)&&(p.s=vt(p.o,r),p.i=Ut[e])),p.m===e&&Et.get(e)&&!yt.has(e)&&(Ut[e]!==n&&It(n,e),Kt(e,vt(p.o,p.s))),p.m===e&&!p.l){if(p.p=p.m,Et.get(e)){let t=function t(e,n){let o=Gt(e),r=jt(e),c=[];if(H(o[0],o[1],r[0],r[1])){c.push(e);for(let n of Ht[e])c.push(...t(n))}return c}(n),o=!1;for(const n of t)if(Ct[n]&&Ft.get(n)){r=Gt(e),It(n,e),Kt(e,vt(r,Gt(n))),o=!0;break}o||(r=Gt(e),It(p.i,e),Kt(e,vt(r,Gt(p.i))),Kt(e,[0,0],4,250))}p.m=0,p.s[0]=0,p.s[1]=0,p.i=0}for(let o of Ht[e])t(o,n)}}(a);for(let[t,e]of yt){let n=gt(c,e);Kt(t,n.H),n.q&&(Kt(t,n.H),yt.delete(t))}switch(ge){case 1:!function(t,r){const c=Gt(ne)[0],a=Gt(ne)[1];y&&(yt.get(ne)||(p.t=!1,fe=!0,Kt(ne,[-512,0],3,750).then(()=>{Kt(Zt,[512,0]),Kt(Zt,[0,0],2,500),ke(2),p.t=!0})));let s=0;for(const t of ce)s+=Ct[t]?1:0;let l=0;for(const t of re)Ct[t]&&l++;for(let t=0,e=0;t<4;t++)B(t)&&e++,e>=l&&(ue=!0);for(let[e,n]of de.entries())-1===n.j&&(n.j=t),t-n.j>=n.G&&(n.J(),de.splice(e,1));if(Ot.set(se,"Discard & Re-roll"),le){Ot.set(se,"Rolling..");for(let t=0;t<ce.length;t++)Ct[ce[t]]&&(g[t]=e(1,6),Pt[ce[t]]=g[t])}if(0===s?Ct[se]=!1:1===s&&Ot.set(se,"End Task"),p.m===se)if(s>1){Vt(se,!1),p.m=0;for(let t=5;t>=0;t--)if(Ct[ce[t]]){Ct[ce[t]]=!1,Pt[ce[t]]=0;break}le=!0,we(()=>{Vt(se),le=!1,o(i)},500)}else s=0,Ct[se]=!1,Ot.set(se,"Roll Dice");for(let[t,e]of Ft){if(!e)continue;const n=Dt[t],o=Ht[t];for(let e of o){const r=Dt[e],c=Gt(e),a=$t.get(e);switch(n){case 3:if(1===r&&4!==Dt[Tt.get(e)]){const n=Ht[t][0],o=Ht[n][0];Kt(o,vt(c,Gt(n))),Kt(o,[0,0],4,250),Ct[o]=!0,Pt[o]=Pt[e],Pt[e]=0,Qt(e),Ct[e]=!1}else 1!==r&&7!==r||Qt(e);break;case 5:const n=$t.get(t),i=$[n];switch(r){case 7:if(i.g){Qt(e);break}let t=-1;for(let e of o)if(8===Dt[e]){t=e;break}const r=D[a];It(t,e),Kt(e,vt(c,Gt(t))),Kt(e,[0,0],4,250),i.g=r,T(n),ae=!0;for(let t=0;t<6;t++)Pt[ce[t]]=0;for(let t=0;t<3+r.k;t++)Pt[ce[t]]=1,s++;le=!0,we(()=>{le=!1,Ct[se]=!0},400);for(const t of re)Jt(t,!1);break;case 1:if(P!==n){Qt(e);break}let l=Pt[e],f=-1;for(let t of o){let e=$[P].M[$t.get(t)];if(2===Dt[t]&&void 0===i.v[$t.get(t)]&&void 0!==e&&e===l){f=t;break}}if(-1===f){Qt(e);break}const u=Ht[f][0];Kt(u,vt(c,Gt(f))),Kt(u,[0,0],4,250),Ct[u]=!0,Qt(e),Ct[e]=!1,Pt[u]=Pt[e],Pt[e]=0,i.v[$t.get(f)]=l}}}}for(const[t,e]of Pt.entries())0===e?Ct[t]=!1:e>=1&&(Ct[t]=!0);if(P>=0&&E(P)||0===s){P>=0&&E(P)&&5===$[P].S&&$[P].C();for(const t of ce)Ct[t]=!1;ae=!1;for(const t of re)Ut[t]===Tt.get(t)&&Jt(t);T(-1)}for(let t=0;t<4;t++){let e=20*t;if(3===t&&(e+=8),mt(A[t],c+416,a+16+e,{R:80}),3===t&&(e+=10),dt(c+416,a+25+e,80,8,L),dt(c+417,a+26+e,78,6,4281545523),dt(c+418,a+27+e,76,4,4279242768),3===t){dt(c+418,a+27+e,0===k[t]?0:26*k[t]-2-(5===k[t]?2:0),4,4294918208);for(let t=0;t<2;t++)dt(c+442+26*t,a+27+e,1,4,4281545523)}else{dt(c+418,a+27+e,0===k[t]?0:16*k[t]-2-(5===k[t]?2:0),4,4282401023);for(let t=0;t<4;t++)dt(c+432+16*t,a+27+e,1,4,4281545523)}}if(dt(c+416,a+112,80,64,L),dt(c+417,a+113,78,62,4279242768),mt("Hold Die",c+456,a+160,{F:1}),Xt(ne),mt("Unassigned Crew",c+104,a+288-56,{T:3721186508,F:1,R:496}),mt("Power the shuttle, boost the distress signal, and survive...",c+Mt,a+288-12,{T:3721186508,F:1,R:496}),p._&&Rt.get(p._)&&5===Dt[p._]){let t=Gt(p._),e=jt(p._);st(),ct(t[0],t[1]),dt(-1,-1,1,e[1]+2,4287137928),dt(-1,-1,e[0]+2,1,4287137928),dt(e[0],-1,1,e[1]+2,4287137928),dt(-1,e[1],e[0]+2,1,4287137928),it()}if(p.m&&Et.get(p.m))for(const[t,e]of Ft){let n=Gt(t),o=jt(t);if(e&&H(n[0],n[1],o[0],o[1])){if(3===Dt[t]&&1!==Dt[p.m])continue;if(5===Dt[t]&&(B($t.get(t))||P>=0&&P!==$t.get(t)))continue;st(),ct(n[0],n[1]),dt(-1,-1,1,o[1]+2,4282580802),dt(-1,-1,o[0]+2,1,4282580802),dt(o[0],-1,1,o[1]+2,4282580802),dt(-1,o[1],o[0]+2,1,4282580802),it();break}}for(let t=0;t<4;t++){let e=_e[t];if(E(t))dt(c+e[0],a+e[1],he[0],he[1],2566914048),mt("TASK COMPLETE",c+e[0]+he[0]/2,a+4+e[1]+he[1]/2,{T:4281515826,F:1});else if(F(t))dt(c+e[0],a+e[1],he[0],he[1],2566914048),mt("TASK FAILED",c+e[0]+he[0]/2,a+4+e[1]+he[1]/2,{T:4281479871,F:1});else if(ae){if(t==P)continue;dt(c+e[0],a+e[1],he[0],he[1],2566914048),mt("TASK IN PROGRESS",c+e[0]+he[0]/2,a+4+e[1]+he[1]/2,{T:4281479871,F:1})}}if(!y&&ue&&!fe){fe=!0,T(-1);for(let t=0;t<4;t++)we(()=>{let e=oe[t];Nt[e]=!0,we(()=>{Nt[e]=!1},450);const n=$[t];E(t)?(n.g.W+=1,2===n.g.W&&(n.g.k=Math.min(n.g.k+1,3),n.g.W=0),o(f),n.C()):(o(u),n.D())},500*(t+1));we(()=>{C(2,-1)},2e3),we(()=>{for(const[t,e]of Pt.entries())e>=0&&(Pt[t]=0,Ct[t]=!1);for(let t=0;t<4;t++)Qt(re[t]),Jt(re[t]);if(0===k[2]){let t=!1;const e=n([...re]);for(const n of e)if(Ct[n]){Ct[n]=!1,t=!0;break}t||S(!0,2)}0===k[0]?S(!0,3):R(),fe=!1,ue=!1},4500)}if(p._>0){const t=p._;let e=[];switch(Dt[t]){case 7:const n=D[$t.get(t)];e[0]=n.X,e[1]="Level "+n.k,n.k<3&&(e[2]=`Exp: ${n.W}/2`);break;case 5:e=[...$[$t.get(t)].A]}let n=8*Math.max(...e.map(t=>t.length))+10,o=10+9*e.length,r=p.o[0],c=p.o[1];if(r>Mt?r-=n+20:r+=20,c-=c>bt?o:Math.floor(o/4),e.length>0){dt(r,c,n,o,3992977408);for(let t=0;t<e.length;t++)mt(e[t],r+5,c+5+9*t)}}}(c);break;case 2:!function(t,e){const n=Gt(Zt)[0],o=Gt(Zt)[1];let r="Help has arrived!",c="A nearby ship receives your communications after following the distress signal. They have sent a shuttle to retrieve your crew, and not a moment too soon.",a=4281515826;2===x?(r="No Oxygen...",c="As the oxygen runs out, your final crew member slips away into unconsciousness as the shuttle drifts off aimlessly into space...",a=4281479871):3===x&&(r="Shuttle Destroyed",c="The structural damage to the ship's hull becomes too great as it begins to break apart.",a=4281479871),mt(r,n+Mt,o+bt-90,{F:1,B:3,T:a}),mt(c,n+Mt,o+bt-60,{F:1,B:2,R:496}),Xt(Zt),p.p===te&&Kt(Zt,[512,0],3,750).then(()=>{M(!1),ke(0),Kt(me,[0,0],4,500)})}();break;case 0:default:!function(t,e){const n=Gt(me)[0],r=Gt(me)[1];p.p===Me&&(p.t=!1,o(l),Kt(me,[0,0]),Kt(me,[-512,0],3,750).then(()=>{(function(){de.length=0,ue=!1,fe=!1,le=!1,ae=!1,g=[1,1,1,1,1,1],k=[3,3,3,0],y=!1,x=0,P=-1,S(),function(){const t=b;D[0]={X:t?"Captain Coil":N(),k:t?2:1,W:0},D[1]={X:N(200),k:1,W:0},D[2]={X:N(400),k:1,W:0},D[3]={X:N(600),k:1,W:0}}(),R();for(const[t,e]of Pt.entries())e>=0&&(Pt[t]=0,Ct[t]=!1);for(let t=0;t<4;t++)Ct[re[t]]=!0,Qt(re[t]),Jt(re[t]);Kt(ne,[512,0]),Kt(ne,[0,0],4,500).then(()=>{setTimeout(()=>{M(!0)},1e3),p.t=!0})})(),ke(1)})),p.p===be&&v(!b),document.monetization&&"pending"===document.monetization.state?(mt("Checking Coil Subscription...",n+Mt,r+bt-26,{F:1,B:1,T:4289374890}),Ct[be]=!1,v(!1),ve=!1):document.monetization&&"started"===document.monetization.state?(mt("Welcome Coil User!",n+Mt,r+bt-26,{F:1,B:1,T:4289374890}),mt("Enjoy a level 2 crew member from the start!",n+Mt,r+bt-16,{F:1,B:1,T:4289374890}),Ct[be]=!0,ve||(v(!0),ve=!0)):(Ct[be]=!1,v(!1)),Ot.set(be,b?"Disable Coil Bonus":"Enable Coil Bonus"),Xt(me),mt("RESCUE  FOUND.",n+Mt,r+bt-90,{F:1,B:4}),mt("not",n+Mt,r+bt-76,{F:1,B:2,T:4280295584}),mt("(c) 2020 David Brad",n+0,r+288-9)}()}p.p>0&&9===Dt[p.p]&&M(!m),p.p>0&&10===Dt[p.p]&&function(){if(document.fullscreenEnabled)if(document.fullscreenElement)document.exitFullscreen();else{const t=document.querySelector("body");(pe.requestFullscreen||pe.mozRequestFullScreen||pe.webkitRequestFullscreen||pe.msRequestFullscreen).call(t).then(()=>{window.screen.orientation.lock("landscape-primary").catch(t=>t)}).catch(t=>t)}}(),0===p._&&(p.u=0),p.l||(p.m=0,p.p=0,p.s[0]=0,p.s[1]=0,p.i=0),0!==et&&(q.bufferSubData(q.ARRAY_BUFFER,0,G.subarray(0,20*et)),q.drawElements(4,6*et,q.UNSIGNED_SHORT,0),et=0),requestAnimationFrame(r)}))})}();
</script><script id=sheet type=lzw>{"type":"textures","name":"sheet","url":"sheet.png","textures":[{"type":"sprite","name":"flat","x":3,"y":0,"w":1,"h":1},{"type":"row","name":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],"x":0,"y":0,"w":8,"h":8},{"type":"row","name":["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],"x":0,"y":8,"w":8,"h":8},{"type":"row","name":["0","1","2","3","4","5","6","7","8","9","(",")","!","?",",",".",":",";","'","\"","&","-","_","/","\\","[","]","+"],"x":0,"y":16,"w":8,"h":8},{"type":"row","name":["o2","pow","hull","task","skull","star","music","na","fs"],"x":0,"y":24,"w":8,"h":8},{"type":"row","name":["cs","card","ds","d1","d2","d3","d4","d5","d6"],"x":0,"y":32,"w":16,"h":16}]}</script></head><body><div id=stage><canvas></canvas></div></body></html>