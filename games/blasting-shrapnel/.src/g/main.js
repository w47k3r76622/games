!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){},,function(t,e,i){"use strict";i.r(e);var n,r,o,h,a,s,l,p,c=function(){function t(){}return t.prototype.enter=function(){},t.prototype.exit=function(){},t.prototype.update=function(){},t.prototype.render=function(t){},t}(),u=function(){function t(){var t=this;this.keys={},document.onkeydown=function(e){void 0==t.keys[e.key]&&(t.keys[e.key]={}),t.keys[e.key].down=!0},document.onkeyup=function(e){t.keys[e.key].down=!1,t.keys[e.key].hit=!0}}return t.prototype.isDown=function(t){return!!this.keys.hasOwnProperty(t)&&this.keys[t].down},t.prototype.hit=function(t){return!!this.keys.hasOwnProperty(t)&&this.keys[t].hit},t.prototype.update=function(){for(var t in this.keys){if(this.keys.hasOwnProperty(t))this.keys[t].hit=!1}},t}(),d=function(){function t(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=32),void 0===n&&(n=32),void 0===r&&(r="white"),this.basePower=.5,this.hp=1,this.init(t,e,i,n,r)}return t.prototype.init=function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=32),void 0===n&&(n=32),void 0===r&&(r="white"),this.x=t,this.y=e,this.width=i,this.height=n,this.color=r,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.dir=0,this.dead=!1,this.hp=1,this.alpha=1},t.prototype.update=function(){this.vx+=this.ax,this.vy+=this.ay,this.x+=this.vx,this.y+=this.vy},t.prototype.damage=function(t){this.hp-=t,this.hp<=0&&this.kill()},t.prototype.kill=function(){this.dead=!0},t.prototype.isDead=function(){return this.dead},t.prototype.alive=function(){return!this.dead},t.prototype.power=function(){return this.basePower},t.prototype.launch=function(t,e){this.turnTo(t),this.vx=e*Math.cos(this.dir),this.vy=e*Math.sin(this.dir)},t.prototype.accelerate=function(){this.ax=Math.cos(this.dir)*this.power(),this.ay=Math.sin(this.dir)*this.power()},t.prototype.turnTo=function(t){this.dir=t*Math.PI/180},t.prototype.pointAt=function(t){this.dir=Math.atan2(t.y-this.y,t.x-this.x)},t.prototype.collide=function(t){return this.x+this.width/2>t.x-t.width/2&&this.x-this.width/2<t.x+t.width/2&&this.y+this.height/2>t.y-t.height/2&&this.y-this.height/2<t.y+t.height/2},t.prototype.renderCircle=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.save(),t.beginPath(),t.globalAlpha=this.alpha,t.fillStyle=this.color,t.arc(this.x+e,this.y+i,this.width,0,2*Math.PI),t.fill(),t.restore()},t.prototype.renderSquare=function(t,e){void 0===e&&(e=!0),t.save(),t.beginPath(),t.globalAlpha=this.alpha,t.fillStyle=this.color,t.strokeStyle=this.color,t.lineWidth=1,t.rect(this.x-this.width/2,this.y-this.height/2,this.width,this.height),e?t.fill():t.stroke(),t.restore()},t.prototype.render=function(t,e){void 0===e&&(e=!0),this.isDead()||this.renderSquare(t,e)},t}(),y=function(){function t(){this.entities=[]}return t.prototype.getEntity=function(t,e,i,n,r){var o;return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=32),void 0===n&&(n=32),void 0===r&&(r="white"),(o=this.entities.length>0?this.entities.pop():new d).init(t,e,i,n,r),o},t.prototype.recycleEntity=function(t){this.entities.push(t)},t.prototype.recycle=function(t){var e=this;t.forEach(function(t){e.entities.push(t)})},t}(),f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(t){function e(){var e=t.call(this)||this;return e.color="white",e.startCharge=8,e.init(0,0),e}return f(e,t),e.prototype.init=function(e,i){t.prototype.init.call(this,e,i),this.chargeLevel=this.startCharge,this.charge=this.chargeLevel,this.basePower=.25,this.rechargeCounter=0,this.rechargeInterval=30,this.speed=2,this.hp=3,this.offline=!1,this.autopilot=!1},e.prototype.powerUp=function(t){this.hp<3?this.hp+=t:this.chargeLevel+=t,this.offline=!1,this.charge+=t,this.charge>this.chargeLevel&&(this.charge=this.chargeLevel)},e.prototype.getChargeLevel=function(){return this.chargeLevel},e.prototype.power=function(){return this.offline?this.basePower/2:this.basePower+.025*this.speed/2},e.prototype.damage=function(t){this.offline?this.kill():this.charge>0&&(this.charge-=t,this.charge<=0&&(this.charge=0))},e.prototype.launchBullet=function(t,e,i,n,r){void 0===n&&(n=15),void 0===r&&(r=5);var o={x:t,y:e,dir:i,width:n,height:r};document.dispatchEvent(new CustomEvent("PlayerFireBullet",{detail:o}))},e.prototype.fire=function(){!this.offline&&this.charge>0&&(this.chargeLevel>=10?(this.launchBullet(this.x,this.y-5,0),this.launchBullet(this.x,this.y+5,0)):this.launchBullet(this.x,this.y,0),this.chargeLevel>=12&&(this.launchBullet(this.x,this.y-10,340,7.5,7.5),this.launchBullet(this.x,this.y+10,20,7.5,7.5)),this.chargeLevel>=11&&this.launchBullet(this.x,this.y,180),this.chargeLevel>=14&&(this.launchBullet(this.x,this.y,270,5,15),this.launchBullet(this.x,this.y,90,5,15)),this.chargeLevel>=20&&(this.launchBullet(this.x,this.y-20,0),this.launchBullet(this.x,this.y+20,0)),this.charge-=1,this.rechargeCounter=0)},e.prototype.update=function(){t.prototype.update.call(this),this.speed=2+this.chargeLevel-this.startCharge,this.speed<2&&(this.speed=2),this.charge<this.chargeLevel?(this.rechargeCounter++,this.rechargeCounter>=this.rechargeInterval&&(this.rechargeCounter=0,this.charge++)):this.offline=!1,0==this.charge&&(this.offline=!0)},e.prototype.render=function(e){this.alive()&&t.prototype.renderSquare.call(this,e,!this.offline)},e}(d),v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),w=function(t){function e(){var e=t.call(this)||this;return e.rateOfFire=0,e.fireCounter=0,e.commandCounter=0,e.commands=[],e.commandCounter=0,e.executedCurrentCommand=!1,e.hasPowerUp=!1,e}return v(e,t),e.prototype.fire=function(){this.fireCounter++,this.fireCounter>=this.rateOfFire&&(this.fireCounter=0,document.dispatchEvent(new CustomEvent("EnemyFireBullet",{detail:{x:this.x,y:this.y}})))},e.prototype.init=function(e,i){t.prototype.init.call(this,e,i),this.commands=[],this.executedCurrentCommand=!1,this.hasPowerUp=!1,this.commandCounter=0,this.color="red"},e.prototype.kill=function(){t.prototype.kill.call(this),this.commands=[]},e.prototype.addCommand=function(t){this.commands.push(t)},e.prototype.done=function(){return 0==this.commands.length},e.prototype.update=function(){if(t.prototype.update.call(this),this.commands.length>0){var e=this.commands[0];this.executedCurrentCommand||(this.executeCommand(e),this.executedCurrentCommand=!0),this.commandCounter++,this.commandCounter>=e.duration&&(this.commandCounter=0,this.executedCurrentCommand=!1,this.commands.shift())}},e.prototype.executeCommand=function(t){t.fire&&this.fire(),null!=t.dir&&null!=t.speed&&this.launch(t.dir,t.speed)},e}(d),g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x=function(t){function e(e,i){var n=t.call(this,e,i,8,8,"orange")||this;return n.launch(360*Math.random(),2),n}return g(e,t),e.prototype.render=function(e){t.prototype.renderCircle.call(this,e)},e}(d),C=function(){function t(t,e,i,n,r,o){for(void 0===o&&(o=1),this.enemies=[],this.commands=[],this.enemySpacing=20,this.y=e,this.x=t,this.startTime=60*i,this.startCounter=0,this.enemyType=o,this.started=!1;this.enemies.length<n;){var h=void 0;(h=r.length>0?r.pop():new w).init(this.x,this.y),this.enemies.push(h)}}return t.prototype.update=function(){if(this.started||this.startCounter++,!this.cleared())for(var t=this.enemies.length-1;t>=0;t--){var e=this.enemies[t];if(e.alive()){this.finalEnemy=e;break}}},t.prototype.ready=function(){return this.startCounter>this.startTime},t.prototype.getEnemies=function(){return this.enemies},t.prototype.cleared=function(){var t=!0;return this.enemies.forEach(function(e){e.isDead()||(t=!1)}),t},t.prototype.start=function(){var t=this;this.started=!0,this.startCounter=0,this.enemies.forEach(function(e,i){if(i>0){var n=new E;n.duration=t.enemySpacing*i,e.addCommand(n)}t.commands.forEach(function(t){e.addCommand(t)})}),this.finalEnemy=this.enemies[this.enemies.length-1],this.enemies[Math.floor(Math.random()*this.enemies.length)].hasPowerUp=!0},t.prototype.move=function(t,e,i){void 0===i&&(i=1);var n=new E;n.duration=60*e,n.dir=t,n.speed=i,this.commands.push(n)},t.prototype.fire=function(){var t=new E;t.fire=!0,this.commands.push(t)},t.prototype.wait=function(t){var e=new E;e.fire=!1,e.duration=60*t,this.commands.push(e)},t.prototype.addEnemy=function(t){this.enemies.push(t)},t.prototype.spawnPowerUp=function(){return new x(this.finalEnemy.x,this.finalEnemy.y)},t}(),E=function(){return function(){this.dir=null,this.speed=0,this.fire=!1,this.duration=0}}(),_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(t){function e(e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n="white"),void 0===r&&(r=30);var o=t.call(this,e,i,12,12,n)||this;return o.lifeTime=r,o}return _(e,t),e.prototype.init=function(e,i){t.prototype.init.call(this,e,i),this.currentLife=this.lifeTime,this.alpha=1,this.width=12,this.height=12},e.prototype.update=function(){t.prototype.update.call(this),this.currentLife--,this.currentLife<=0&&this.kill()},e.prototype.render=function(e){this.alpha=this.currentLife/this.lifeTime,this.alpha<0&&(this.alpha=0),t.prototype.render.call(this,e)},e}(d),P=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),k=function(t){function e(e,i,n){var r=t.call(this)||this;return r.FRICTION=.95,r.chargesToWin=24,r.starfield=n,r.width=e,r.height=i,r.kb=new u,document.addEventListener("EnemyFireBullet",r.onEnemyFireBullet.bind(r)),document.addEventListener("PlayerFireBullet",r.onPlayerFireBullet.bind(r)),r.particlePool=[],r.entityPool=new y,r.enemyPool=[],r}return P(e,t),e.prototype.start=function(){this.player=new m,this.player.init(75,this.height/2),this.enemies=[],this.playerBullets=[],this.enemyBullets=[],this.powerUps=[],this.particles=[],this.shrapnel=[],this.enemyWaves=[],this.terrain=[],this.terrainInterval=1500,this.terrainCounter=0,this.waveInterval=600,this.waveCounter=0,this.renderFlip=0,this.wonGame=!1,this.lostGame=!1},e.prototype.enter=function(){this.wonGame?(this.wonGame=!1,this.chargesToWin*=3,this.player.x=32,this.player.y=this.height/2,this.player.autopilot=!1):this.start()},e.prototype.update=function(){var t=this;if(this.waveCounter++,this.waveCounter>=this.waveInterval&&(this.waveCounter=0,this.spawnWave()),this.terrainCounter++,this.terrainCounter>this.terrainInterval&&(this.terrainCounter=0,this.spawnTerrain()),this.terrain.forEach(function(e,i){e.x-=t.player.speed,e.collide(t.player)&&t.player.damage(1),e.x<-e.width&&t.entityPool.recycle(t.terrain.splice(i,1)),t.shrapnel.forEach(function(t,i){t.collide(e)&&(t.vy*=-1,t.y+=t.vy,t.collide(e)&&t.kill())}),t.enemies.forEach(function(t,i){t.collide(e)&&t.kill()}),t.playerBullets.forEach(function(t,i){t.collide(e)&&t.kill()}),t.enemyBullets.forEach(function(t,i){t.collide(e)&&t.kill()})}),this.player.alive()){if(this.player.ax=0,this.player.ay=0,this.player.autopilot||(this.kb.isDown("ArrowLeft")?(this.player.turnTo(180),this.player.accelerate()):this.kb.isDown("ArrowRight")?(this.player.turnTo(0),this.player.accelerate()):this.kb.isDown("ArrowUp")?(this.player.turnTo(270),this.player.accelerate()):this.kb.isDown("ArrowDown")&&(this.player.turnTo(90),this.player.accelerate()),this.kb.hit("z")&&this.player.fire()),this.player.update(),!this.player.offline)for(var e=0;e<this.player.speed;){var i=Math.random();i<.5&&(i*=-1,i-=.5),i*=Math.random()*this.player.height/3,e++;var n=void 0;(n=this.particlePool.length>0?this.particlePool.pop():new b).init(this.player.x-16*Math.random(),this.player.y+i),this.particles.push(n),n.launch(180,this.player.speed)}this.player.vx*=this.FRICTION,this.player.vy*=this.FRICTION,this.player.x<=this.player.width?(this.player.x=this.player.width,this.player.vx=0,this.player.ax=0):this.player.x>=this.width-this.player.width&&(this.player.vx=0,this.player.ax=0,this.player.x=this.width-this.player.width),this.player.y<=this.player.height?(this.player.y=this.player.height,this.player.vy=0,this.player.ay=0):this.player.y>=this.height-this.player.height&&(this.player.y=this.height-this.player.height,this.player.vy=0,this.player.ay=0)}this.playerBullets.forEach(function(e,i){e.update(),(e.x>t.width||e.x<0||e.y>t.height||e.y<0)&&e.kill(),t.enemies.forEach(function(t,i){e.collide(t)&&(t.damage(1),e.kill())}),e.isDead()&&t.entityPool.recycle(t.playerBullets.splice(i,1))}),this.enemyBullets.forEach(function(e,i){e.update(),e.x>t.width||e.x<0||e.y>t.height||e.y<0?e.kill():t.player.alive()&&e.collide(t.player)&&(e.kill(),t.player.damage(1)),e.isDead()&&t.entityPool.recycle(t.enemyBullets.splice(i,1))}),this.enemies.forEach(function(e,i){e.update(),e.collide(t.player)&&(e.kill(),t.player.damage(3)),e.done()&&e.kill(),e.isDead()&&(e.hasPowerUp&&t.powerUps.push(new x(e.x,e.y)),t.enemies.splice(i,1),t.enemyPool.push(e),t.explode(e.x,e.y,24),t.blastShrapnel(e.x,e.y,4,e.width/2))}),this.enemyWaves.forEach(function(e,i){e.update(),e.ready()&&!e.started&&(e.start(),e.getEnemies().forEach(function(e){t.enemies.push(e)})),e.cleared()&&(t.powerUps.push(e.spawnPowerUp()),t.enemyWaves.splice(i,1))}),this.powerUps.forEach(function(e,i){e.update(),(e.x<=e.width||e.x>=t.width-e.width)&&(e.vx*=-1),(e.y<=e.height||e.y>=t.height-e.height)&&(e.vy*=-1),e.collide(t.player)&&(t.powerUps.splice(i,1),t.player.powerUp(1))}),this.particles.forEach(function(e,i){e.update(),e.width*=.97,e.height=e.width,e.width<=1&&e.kill(),e.isDead()&&(t.particles.splice(i,1),t.particlePool.push(e))}),this.shrapnel.forEach(function(e,i){e.x+=-t.player.speed,e.update(),(e.x<-e.width||e.x>t.width+e.width||e.y<-e.height||e.y>t.height+e.height)&&e.kill(),e.isDead()?t.entityPool.recycle(t.shrapnel.splice(i,1)):e.collide(t.player)&&(t.player.damage(1),e.kill()),t.playerBullets.forEach(function(i,n){i.collide(e)&&(i.kill(),e.kill(),e.width>8?t.blastShrapnel(e.x,e.y,2,e.width/2):Math.random()>.75&&t.powerUps.push(new x(e.x,e.y)))})}),this.player.isDead()&&!this.lostGame&&this.end(),this.player.chargeLevel>=this.chargesToWin&&(this.wonGame||this.win(),this.player.vx=20),this.kb.update()},e.prototype.spawnWave=function(){var t=Math.random(),e=100+100*Math.random(),i=90;t>.5&&(e=this.height-100-100*Math.random(),i=270);var n=new C(this.width+100,e,0,1+Math.random()*this.player.speed,this.enemyPool),r=3+Math.random()*this.player.speed;n.move(180,2+2*Math.random(),r),n.fire(),n.move(i,1+1*Math.random(),2+Math.random()*this.player.speed),n.fire(),n.move(0,4,r),this.enemyWaves.push(n),this.waveInterval-=25,this.waveInterval<=300&&(this.waveInterval+=100*Math.random()+100-5*this.player.speed)},e.prototype.spawnTerrain=function(){this.terrainInterval-=100,this.terrainInterval<=500&&(this.terrainInterval+=200*Math.random()-10*this.player.speed,this.terrainInterval<=100&&(this.terrainInterval=100));var t=400+1350*Math.random(),e=50+150*Math.random(),i=this.entityPool.getEntity(this.width+t,200+Math.random()*(this.height-400),t,e,"#999999");this.terrain.push(i)},e.prototype.onEnemyFireBullet=function(t){var e=this.player.x-t.detail.x,i=this.player.y-t.detail.y,n=180*Math.atan2(i,e)/Math.PI,r=this.entityPool.getEntity(t.detail.x,t.detail.y,8,8,"pink");r.launch(n,5),this.enemyBullets.push(r)},e.prototype.onPlayerFireBullet=function(t){var e=this.entityPool.getEntity(t.detail.x,t.detail.y,t.detail.width,t.detail.height,"pink");e.launch(t.detail.dir,20),this.playerBullets.push(e)},e.prototype.blastShrapnel=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=10);for(var r=1;r<=i;){var o=this.entityPool.getEntity(t,e,n,n,"red");o.launch(360*Math.random(),3),this.shrapnel.push(o),r++}},e.prototype.explode=function(t,e,i,n){void 0===i&&(i=14),void 0===n&&(n="white");for(var r=0,o=360/i;r<i;){var h=void 0;(h=this.particlePool.length>0?this.particlePool.pop():new b).init(t,e),h.launch(o*r+Math.random()*o,1+Math.random()*i/10),this.particles.push(h),r++}},e.prototype.end=function(){this.lostGame=!0,document.dispatchEvent(new CustomEvent("LoadState",{detail:"GameOverState"}))},e.prototype.win=function(){this.wonGame=!0,document.dispatchEvent(new CustomEvent("LoadState",{detail:"WinState"}))},e.prototype.exit=function(){this.player.isDead()?this.explode(this.player.x,this.player.y,50):this.player.autopilot=!0},e.prototype.render=function(t){this.renderFlip++,this.renderFlip>=8&&(this.renderFlip=0),[this.terrain,this.enemies,this.enemyBullets,this.playerBullets,this.powerUps,this.particles,this.shrapnel].forEach(function(e){e.forEach(function(e){e.render(t)})}),this.player.render(t),this.starfield.scroll(this.player.speed,0);for(var e=0;e<this.chargesToWin;e++){var i=this.entityPool.getEntity(25+15*e,this.height-25,10,25,"#000066");e<this.player.chargeLevel?((!this.player.offline||this.renderFlip>=4)&&this.player.charge>e&&(i.color="#0000FF"),i.render(t)):(i.color="#CCCCCC",i.render(t,!1))}},e}(c),O=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),M=function(t){function e(){var e=t.call(this)||this;e.container=document.getElementById("container"),e.titleDiv=document.createElement("div"),e.titleDiv.id="title";var i=document.createElement("h1");i.innerHTML="BLASTING<BR>SHRAPNEL",e.titleDiv.appendChild(i);var n=document.createElement("p");n.innerHTML="<p>Use arrow keys to move<br>Z to fire.<br>Collect yellow orbs to power up the meter and guns.<br>Fully power the meter to win.<br>Shooting and getting hit depletes the meter.<br>Fully deplete the meter you'll go offline.<br>Get hit while offline and that's it.",e.titleDiv.appendChild(n);var r=document.createElement("button");return r.innerHTML="Start",r.onclick=function(){document.dispatchEvent(new CustomEvent("LoadState",{detail:"GameState"}))},n.appendChild(r),e}return O(e,t),e.prototype.enter=function(){this.container.appendChild(this.titleDiv)},e.prototype.exit=function(){this.container.removeChild(this.titleDiv)},e}(c),S=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L=function(t){function e(){var e=t.call(this)||this;e.container=document.getElementById("container"),e.div=document.createElement("div"),e.div.id="gameOver";var i=document.createElement("h1");i.innerHTML="GAME OVER",e.div.appendChild(i);var n=document.createElement("button");return n.innerHTML="Play Again",n.onclick=function(){document.dispatchEvent(new CustomEvent("LoadState",{detail:"GameState"}))},e.div.appendChild(n),e}return S(e,t),e.prototype.enter=function(){this.container.appendChild(this.div)},e.prototype.exit=function(){this.container.removeChild(this.div)},e}(c),B=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T=function(t){function e(){var e=t.call(this)||this;e.container=document.getElementById("container"),e.div=document.createElement("div"),e.div.id="gameOver";var i=document.createElement("h1");i.innerHTML="YOU WON",e.div.appendChild(i);var n=document.createElement("button");return n.innerHTML="Keep Going?",n.onclick=function(){document.dispatchEvent(new CustomEvent("LoadState",{detail:"GameState"}))},e.div.appendChild(n),e}return B(e,t),e.prototype.enter=function(){this.container.appendChild(this.div)},e.prototype.exit=function(){this.container.removeChild(this.div)},e}(c),I=function(){function t(t,e){this.stars=[],this.stars2=[],this.stars3=[],this.allStars=[],this.width=t,this.height=e;for(var i=0;i<25;i++){var n=new d(Math.random()*t,Math.random()*e,1,1,"white");n.alpha=.25;var r=new d(Math.random()*t,Math.random()*e,2,2,"white");r.alpha=.35;var o=new d(Math.random()*t,Math.random()*e,3,3,"white");o.alpha=.45,this.stars.push(n),this.stars2.push(r),this.stars3.push(o),this.allStars.push(n),this.allStars.push(r),this.allStars.push(o)}}return t.prototype.scroll=function(t,e){this.stars.forEach(function(i){i.x+=-1*t,i.y+=-1*e}),this.stars2.forEach(function(i){i.x+=-2*t,i.y+=-2*e}),this.stars3.forEach(function(i){i.x+=-3*t,i.y+=-3*e})},t.prototype.update=function(){var t=this;this.allStars.forEach(function(e){e.update(),e.x<0&&(e.x+=t.width+10,e.y=Math.random()*t.height)})},t.prototype.render=function(t){this.allStars.forEach(function(e){e.render(t)})},t}(),j=(i(0),1280),F=720;function D(){requestAnimationFrame(D),n.update(),o.fillStyle="black",o.fillRect(0,0,j,F),p.update(),p.render(o),n!==s&&n!=l||(h.update(),h.render(o)),n.render(o)}function A(t){null!=n&&n.exit(),(n=t).enter()}function G(t){switch(t.detail){case"TitleScreenState":A(a);break;case"GameState":A(h);break;case"GameOverState":A(s);break;case"WinState":A(l)}}window.onload=function(){document.documentElement.style.overflow="hidden";var t=document.createElement("div");t.id="container",(r=document.createElement("canvas")).id="game",r.width=j,r.height=F,r.classList.add("red_border"),t.appendChild(r),document.body.appendChild(t),o=r.getContext("2d"),p=new I(j,F),h=new k(j,F,p),a=new M,s=new L,l=new T,document.addEventListener("LoadState",G),A(a),D()}}]);