const Meteor_plate=["rgba(255, 36, 66,","rgba(255, 103, 231,","rgba(214, 42, 208,","rgba(224, 82, 151,"];class Meteor{constructor(t,r,a,s,h,o){this.sx=t,this.sy=r,this.ex=a,this.ey=s,this.dt=o,this.d=2*Math.random(),this.x=t,this.y=r,this.r=h,this.t=0,this.colorI=Math.floor(4*Math.random()),this.color=this.pick_color(1,this.colorI),this.soundlst=randomCollisionSound()}draw(){ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.d*Math.PI),ctx.beginPath();var t=this.color;ctx.fillStyle=t,ctx.strokeStyle=t,ctx.shadowColor=this.pick_color(1,2),ctx.shadowBlur=150,ctx.arc(0,0,this.r,0,2*Math.PI,!0),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(256,256,256,0.8)",ctx.arc(0,0+3*this.r/4,this.r/4,0,2*Math.PI,!0),ctx.fill(),ctx.closePath(),ctx.restore(),ctx.save(),ctx.beginPath();for(var r=9;r>6;r--){var a=linear_A_to_B(this.sx,this.sy,this.ex,this.ey,this.t-this.t*(10-r)/80),s=this.pick_color((10-r)/10,this.colorI);ctx.fillStyle=s,ctx.arc(a[0],a[1],this.r*r/10,0,2*Math.PI,!0),ctx.fill()}ctx.closePath(),ctx.restore()}pick_color(t,r){return Meteor_plate[r]+t+")"}update(t){var r=calcNINTH(this.x,this.y),a=0==r[0]&&0==r[1]?1:0;this.t>1.5&&!a&&this.reset(),v=_spaceship.speed,dx=v*Math.cos(t*Math.PI),dy=v*Math.sin(t*Math.PI),this.sx-=dx,this.ex-=dx,this.sy-=dy,this.ey-=dy,this.t+=this.dt;var s=linear_A_to_B(this.sx,this.sy,this.ex,this.ey,this.t);this.x=s[0],this.y=s[1],this.dt+=1e-7,this.d+=Math.random()/10}reset(){var t=createRandomMeteor();Object.assign(this,t)}}function linear_A_to_B(t,r,a,s,h){return[(1-h)*t+h*a,(1-h)*r+h*s]}function createRandomMeteor(){W,H;for(var t=Math.random()*W,r=Math.random()*H,a=3*Math.random()*W-W,s=3*Math.random()*H-H,h=calcNINTH(s,a);0==h[0]&&0==h[1];){a=3*Math.random()*W-W,s=3*Math.random()*H-H;h=calcNINTH(a,s)}var o=Math.random()/550+1/150;return new Meteor(a,s,t,r,6*Math.random()+15,o)}function meteors(t){arr=[];for(var r=0;r<t;r++)arr.push(createRandomMeteor());return arr}function randomCollisionSound(){for(var t=1+Math.floor(2*Math.random()),r=[],a=0;a<t;a++)for(var s=1+Math.floor(3*Math.random()),h=0;h<3;h++)for(var o=0;o<3;o++)r.push([a,10*h+s+o]);return r}