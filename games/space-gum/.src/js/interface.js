class InterfaceButtons{constructor(t){this.arr=t}pressedLoop(t){for(var e=0;e<this.arr.length;e++)if(distance(t,this.arr[e])<this.arr[e].r&&1==this.arr[e].drawFlag)return console.log(e+" acted"),this.arr[e].act(),1;return 0}drawLoop(){for(var t=0;t<this.arr.length;t++)1==this.arr[t].drawFlag&&this.arr[t].draw()}}class ButtonCircle{constructor(t,e,c,s,o,i,a,r){this.x=t,this.y=e,this.r=c,this.keyTextFunc=o,this.text=s,this.action=i,this.innerDraw=a,this.drawFlag=r,this.color="white"}draw(){ctx.save(),ctx.fillStyle=this.color,ctx.strokeStyle=this.color,ctx.beginPath(),ctx.arc(this.x,this.y,this.r,2*Math.PI*.8,2*Math.PI*.7,!1),ctx.arc(this.x,this.y,this.r+5,2*Math.PI*.75,2*Math.PI*.7,!1),ctx.stroke(),this.innerDraw(),ctx.closePath(),ctx.fillStyle="white",ctx.strokeStyle="white",ctx.font="15px monospace",ctx.fillText(this.text,this.x-7.5*this.text.length/2,this.y+this.r+20),ctx.font="15px monospace";var t=this.keyTextFunc();ctx.fillText(t,this.x+this.r+12,this.y),ctx.restore()}act(){this.action()}}function shoot_btn_draw(){ctx.save(),ctx.beginPath(),ctx.arc(this.x,this.y,10,0,2*Math.PI,!0),ctx.moveTo(this.x+this.r+5,this.y),ctx.lineTo(this.x-this.r-5,this.y),ctx.moveTo(this.x,this.y+this.r+5),ctx.lineTo(this.x,this.y-this.r-5),ctx.stroke(),ctx.closePath(),ctx.restore()}function shoot_btn_funct(){shoot_handler()}function chg_shoot_mode_draw(){ctx.save(),ctx.beginPath(),ctx.translate(this.x,this.y),ctx.moveTo(-10,0),ctx.lineTo(15,0),0==_spaceship.fire_mode&&(ctx.moveTo(-10,0),ctx.lineTo(Math.sqrt(168),7.5),ctx.moveTo(-10,0),ctx.lineTo(Math.sqrt(168),-7.5)),ctx.stroke(),ctx.closePath(),ctx.restore()}function chg_shoot_mode_funct(){firemodeToggle()}function fuel_tank_draw(t,e){ctx.save(),ctx.strokeStyle=e,ctx.fillStyle=e,ctx.beginPath(),ctx.rect(t.x-t.r/3,t.y-t.r/3,2*t.r/3,t.r),ctx.moveTo(t.x-t.r/3,t.y-t.r/3),ctx.lineTo(t.x-t.r/3,t.y-t.r/3-5),ctx.moveTo(t.x+t.r/3,t.y-t.r/3),ctx.lineTo(t.x+t.r/3,t.y-t.r/3-5),ctx.stroke(),ctx.fill(),ctx.closePath(),ctx.restore()}function fuel_btn_draw(){var t;_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?(fuel_tank_draw(this,"red"),t="white"):(fuel_tank_draw(this,"white"),t="black"),ctx.save(),ctx.translate(this.x,this.y),ctx.strokeStyle=t,ctx.beginPath(),ctx.moveTo(-3,0),ctx.lineTo(3,0),ctx.moveTo(0,-3),ctx.lineTo(0,3),ctx.closePath(),ctx.stroke(),ctx.restore()}function fuel_btn_funct(){_spaceship.pts>=(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor&&impFuelCapacityToggle()}function threelines_draw(t,e){ctx.strokeStyle=e,ctx.save(),ctx.beginPath(),ctx.translate(t.x,t.y),ctx.moveTo(-10,0),ctx.lineTo(15,0),ctx.moveTo(-10,0),ctx.lineTo(Math.sqrt(168),7.5),ctx.moveTo(-10,0),ctx.lineTo(Math.sqrt(168),-7.5),ctx.moveTo(-3,-12),ctx.lineTo(3,-12),ctx.moveTo(0,-15),ctx.lineTo(0,-9),ctx.stroke(),ctx.closePath(),ctx.restore()}function imp_shoot_draw(){_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?threelines_draw(this,"red"):threelines_draw(this,"white")}function imp_shoot_funct(){_spaceship.pts>=(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor&&improveShootToggle()}function speedometer_draw(t,e,c){ctx.strokeStyle=e,ctx.fillStyle=e,ctx.save(),ctx.beginPath(),ctx.translate(t.x,t.y),ctx.arc(0,0,13,0,Math.PI,!0),ctx.moveTo(-13,0),ctx.lineTo(-9,0),ctx.moveTo(13,0),ctx.lineTo(9,0),ctx.moveTo(0,-13),ctx.lineTo(0,-9),ctx.moveTo(9.19,-9.19),ctx.lineTo(7.07,-7.07),ctx.moveTo(-9.19,-9.19),ctx.lineTo(-7.07,-7.07),0==c?(ctx.moveTo(0,0),ctx.lineTo(-8.57,-4.95)):1==c&&(ctx.moveTo(0,0),ctx.lineTo(8.57,-4.95)),ctx.stroke(),ctx.closePath(),ctx.restore()}function imp_speed_draw(){_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?speedometer_draw(this,"red",2):speedometer_draw(this,"white",1),ctx.save(),ctx.beginPath(),ctx.translate(this.x,this.y),ctx.moveTo(-2,0),ctx.lineTo(2,0),ctx.moveTo(0,7),ctx.lineTo(0,13),ctx.moveTo(-3,10),ctx.lineTo(3,10),ctx.stroke(),ctx.closePath(),ctx.restore()}function imp_speed_funct(){_spaceship.pts>=(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor&&improveSpeedToggle()}function chg_speed_mode_draw(){var t=_spaceship.speed_mode;0!=_spaceship.fuel?speedometer_draw(this,"white",t):speedometer_draw(this,"red",t)}function chg_speed_mode_funct(){changeSpeedToggle()}function imp_modal_draw(){ctx.save(),ctx.beginPath(),ctx.fillStyle=this.color,Math.random()>2/3&&(ctx.shadowBlur=10),ctx.closePath(),ctx.beginPath(),ctx.translate(this.x,this.y),ctx.fillRect(-this.r/3,-this.r/6,2*this.r/3,5*this.r/6),ctx.closePath(),ctx.beginPath(),ctx.translate(0,-this.r/2),ctx.moveTo(0,1*-this.r/3),ctx.rotate(2*Math.PI/3),ctx.lineTo(0,2*-this.r/3),ctx.rotate(2*Math.PI/3),ctx.lineTo(0,2*-this.r/3),ctx.closePath(),ctx.fill(),ctx.restore()}function imp_modal_funct(){LevelUp()}const btn_size=15;var b1=new ButtonCircle(50,110,15,"Shoot",()=>_spaceship.mobile_flag?"":"'space'",shoot_btn_funct,shoot_btn_draw,1),b2=new ButtonCircle(W-90,110,15,"Shot Mode",()=>_spaceship.mobile_flag?"":"'x'",chg_shoot_mode_funct,chg_shoot_mode_draw,1),b3=new ButtonCircle(W/2-120,H/2+80,30,"Inc. Fuel",()=>_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?"":_spaceship.mobile_flag?"":"'1'",fuel_btn_funct,fuel_btn_draw,0),b4=new ButtonCircle(W/2,H/2+80,30,"Imp. Spread",()=>_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?"":_spaceship.mobile_flag?"":"'2'",imp_shoot_funct,imp_shoot_draw,0),b5=new ButtonCircle(W/2+120,H/2+80,30,"Imp. Speed",()=>_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?"":_spaceship.mobile_flag?"":"'3'",imp_speed_funct,imp_speed_draw,0),b6=new ButtonCircle(W-90,190,15,"Speed Mode",()=>_spaceship.mobile_flag?"":"'UP-DN'",chg_speed_mode_funct,chg_speed_mode_draw,1),b7=new ButtonCircle(70,H-100,30,"",()=>_spaceship.pts<(_spaceship.upgrade_lvl+1)*_spaceship.upgrade_factor?"":_spaceship.mobile_flag?"":"'v'",imp_modal_funct,imp_modal_draw,1);b7.color="rgba(255, 255, 255, 0.3)";var btns_arr=[b7,b3,b4,b5,b1,b2,b6],Interface_Buttons=new InterfaceButtons(btns_arr);