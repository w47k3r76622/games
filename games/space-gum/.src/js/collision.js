function distance(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}class Circle{constructor(t,r,a,s){this.x=t,this.y=r,this.r=a,this.color=s}draw(){ctx.save(),ctx.fillStyle=this.color,ctx.strokeStyle=this.color,ctx.shadowColor=this.color,ctx.shadowBlur=30,ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),ctx.stroke(),ctx.restore()}}class Triangle{constructor(t,r,a,s,h){this.x=t,this.y=r,this.d=a,this.r=s,this.color=h,this.random_direction=2*Math.random()*Math.PI}draw(){ctx.save(),ctx.fillStyle=this.color,ctx.strokeStyle=this.color,ctx.beginPath(),ctx.translate(this.x,this.y),ctx.rotate(this.d),ctx.moveTo(0,-2*this.r),ctx.rotate(2*Math.PI/3),ctx.lineTo(0,-2*this.r),ctx.rotate(2*Math.PI/3),ctx.lineTo(0,-2*this.r),ctx.closePath(),ctx.fill(),ctx.restore()}}_COLLISION_DT=.01;class Collision{constructor(t,r){this.x=t,this.y=r,this.arr=this.createCollisionFigures(),this.t=0,this.flag=0}draw(){for(var t=0;t<this.arr.length;t++)this.arr[t].draw()}pickColor(){var t=Math.floor(4*Math.random()),r=(Math.random()+.4)/1,a=["rgba(58,31,91","rgba(200,54,93","rgba(225,82,73","rgba(246,211,101"];return a.forEach((t,a,s)=>s[a]=t+","+r+")"),a[t]}createCollisionFigures(){for(var t=[],r=Math.floor(40*Math.random()),a=0;a<r;a++){var s=Math.floor(2*Math.random()),h=5*Math.random(),i=Math.random()*Math.PI*2,o=8*Math.random()-4,c=8*Math.random()-4;0==s?t.push(new Circle(this.x+4*o,this.y+4*c,.2*h,this.pickColor())):t.push(new Triangle(this.x+o,this.y+c,i,h,this.pickColor()))}return t}update(){v=_spaceship.speed,dx=v*Math.cos(d*Math.PI),dy=v*Math.sin(d*Math.PI),this.x-=dx,this.y-=dy;for(var t=this.arr,r=0;r<this.arr.length;r++)if(t[r].x-=dx,t[r].y-=dy,t[r]instanceof Triangle)t[r].d+=.2,t[r].x+=.33*Math.cos(t[r].random_direction),t[r].y+=.33*Math.sin(t[r].random_direction);else{var a=Math.random()/100;t[r].r*=1.02+a}this.t+=_COLLISION_DT,this.t>1&&(this.flag=1)}}