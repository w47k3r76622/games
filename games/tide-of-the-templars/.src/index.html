<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="initial-scale=1,width=device-width,user-scalable=no,viewport-fit=cover,maximum-scale=1,user-scalable=no"/><title>Tide of the templars</title><style>body,html{width:100%;height:100%;min-height:fill-available;margin:0;padding:0;transition:filter 2s ease;font-family:Garamond,serif;font-size:1rem;color:#fff}#background{position:absolute;width:100%;height:100%;background-repeat:no-repeat;background-size:1201px;animation:move-background 5s linear infinite}#game{position:absolute;top:0;left:0}#container{position:relative;width:600px;height:600px;overflow:hidden;padding:0;margin:0}#lifebar-container{position:absolute;z-index:1;bottom:20px;right:20px;width:150px;height:20px;border:2px solid #c79f62}#lifebar{height:100%;width:100%;background-color:#ffebcd;transition:width 1s ease}#days-passed{position:absolute;z-index:1;top:20px;right:20px;font-size:1.5rem;line-height:1.5rem}.night{filter:brightness(.5)}#gameover{position:absolute;z-index:2;width:100%;height:100%;background-color:rgba(100,0,0,.5);color:#fff;text-align:center;font-size:4rem;line-height:4rem;display:none}#result{font-size:32px}#start-screen{position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;background-color:#002d61;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#d1e6ff;font-size:24px;padding:2rem;box-sizing:border-box}#restart,#start-button{padding:10px 20px;background-color:#d1e6ff;color:#002d61;border:none;border-radius:5px;font-size:2rem;cursor:pointer;box-shadow:0 2px 0 rgba(0,0,0,.15),0 4px 8px rgba(0,0,0,.15)}@keyframes move-background{from{background-position:-600px 0,0 0,600px 0}to{background-position:-1200px 0,-600px 0,0 0}}</style></head><body><div id="container"><div id="background"></div><div id="lifebar-container"><div id="lifebar"></div></div><div id="days-passed">Day 1</div><div id="gameover"><p>Game Over</p><p id="result">You survived at sea for 4234 hours</p><button id="restart">Restart</button></div><div id="start-screen"><p>Welcome to Tide of the templars</p><p>How many days can you endure amidst the relentless waves? Steer your ship by using the <b>W</b> and <b>S</b> keys, and embrace the true essence of medieval maritime resilience.</p><button id="start-button">Start</button></div></div><canvas id="game" tabindex="1" width="600" height="600"></canvas><script>/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";let t=()=>{};function i(t,i){let s=t.indexOf(i);if(-1!=s)return t.splice(s,1),!0}let s,e,n={};function h(t,i){n[t]=n[t]||[],n[t].push(i)}function r(t,...i){(n[t]||[]).map((t=>t(...i)))}let o={get:(i,s)=>"_proxy"==s||t};function a(){return e}function u(t,{t:i=!1}={}){if(s=document.getElementById(t)||t||document.querySelector("canvas"),i&&(s=s||new Proxy({},o)),!s)throw Error("You must provide a canvas element for the game");return e=s.getContext("2d")||new Proxy({},o),e.imageSmoothingEnabled=!1,r("init"),{canvas:s,context:e}}function c(t,i){let s=Math.sin(i),e=Math.cos(i);return{x:t.x*e-t.y*s,y:t.x*s+t.y*e}}function d(t,i,s){return Math.min(Math.max(t,s),i)}function A(t,i){return[t,i]=[t,i].map((t=>l(t))),t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.y+t.height>i.y}function l(t){let{x:i=0,y:s=0,width:e,height:n}=t.i||t;return t.h&&(e=t.h,n=t.o),t.anchor&&(i-=e*t.anchor.x,s-=n*t.anchor.y),e<0&&(i+=e,e*=-1),n<0&&(s+=n,n*=-1),{x:i,y:s,width:e,height:n}}class f{constructor(t=0,i=0,s={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),s.u&&(this.A(s.l,s.g,s.m,s.p),this.x=t,this.y=i)}set(t){this.x=t.x,this.y=t.y}add(t){return new f(this.x+t.x,this.y+t.y,this)}v(t){return new f(this.x-t.x,this.y-t.y,this)}scale(t){return new f(this.x*t,this.y*t)}normalize(t=this.length()||1){return new f(this.x/t,this.y/t)}I(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}M(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.I(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}A(t,i,s,e){this.u=!0,this.l=t,this.g=i,this.m=s,this.p=e}get x(){return this.Z}get y(){return this.R}set x(t){this.Z=this.u?d(this.l,this.m,t):t}set y(t){this.R=this.u?d(this.g,this.p,t):t}}function w(){return new f(...arguments)}class g{constructor(t){return this.init(t)}init(t={}){this.position=w(),this.G=w(),this.acceleration=w(),this.S=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let i=this.acceleration;t&&(i=i.scale(t)),this.G=this.G.add(i);let s=this.G;t&&(s=s.scale(t)),this.position=this.position.add(s),this.k(),this.S--}get dx(){return this.G.x}get dy(){return this.G.y}set dx(t){this.G.x=t}set dy(t){this.G.y=t}get U(){return this.acceleration.x}get C(){return this.acceleration.y}set U(t){this.acceleration.x=t}set C(t){this.acceleration.y=t}F(){return this.S>0}k(){}}class m extends g{init({width:t=0,height:i=0,context:s=a(),N:e=this.Y,update:n=this.advance,children:r=[],anchor:o={x:0,y:0},opacity:u=1,rotation:c=0,j:d=1,P:A=1,...l}={}){this.u=[],super.init({width:t,height:i,context:s,anchor:o,opacity:u,rotation:c,j:d,P:A,...l}),this.W=!0,this.B(),this.V(r),this.X=e,this.T=n,h("init",(()=>{this.context??=a()}))}update(t){this.T(t),this.children.map((i=>i.update&&i.update(t)))}N(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.j&&1==this.P||t.scale(this.j,this.P);let i=-this.width*this.anchor.x,s=-this.height*this.anchor.y;(i||s)&&t.translate(i,s),this.context.globalAlpha=this.opacity,this.X(),(i||s)&&t.translate(-i,-s),this.children.map((t=>t.N&&t.N())),t.restore()}Y(){}k(){this.B(),this.children.map((t=>t.k()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this.k()}set y(t){this.position.y=t,this.k()}get width(){return this.J}set width(t){this.J=t,this.k()}get height(){return this.D}set height(t){this.D=t,this.k()}B(){if(!this.W)return;let{q:t=0,L:i=0,H:s=1,K:e=0,O:n=1,_:h=1}=this.parent||{};this.q=this.x,this.L=this.y,this.$=this.width,this.tt=this.height,this.H=s*this.opacity,this.O=n*this.j,this._=h*this.P,this.q=this.q*n,this.L=this.L*h,this.$=this.width*this.O,this.tt=this.height*this._,this.K=e+this.rotation;let{x:r,y:o}=c({x:this.q,y:this.L},e);this.q=r,this.L=o,this.q+=t,this.L+=i}get i(){return{x:this.q,y:this.L,width:this.$,height:this.tt,opacity:this.H,rotation:this.K,j:this.O,P:this._}}set children(t){this.removeChild(this.u),this.V(t)}get children(){return this.u}V(...i){i.flat().map((i=>{this.children.push(i),i.parent=this,i.k=i.k||t,i.k()}))}removeChild(...t){t.flat().map((t=>{i(this.children,t)&&(t.parent=null,t.k())}))}get opacity(){return this.it}set opacity(t){this.it=d(0,1,t),this.k()}get rotation(){return this.st}set rotation(t){this.st=t,this.k()}setScale(t,i=t){this.j=t,this.P=i}get j(){return this.et}set j(t){this.et=t,this.k()}get P(){return this.nt}set P(t){this.nt=t,this.k()}}class p extends m{init({ht:t,width:i=(t?t.width:void 0),height:s=(t?t.height:void 0),...e}={}){super.init({ht:t,width:i,height:s,...e})}get rt(){return this.l}set rt(t){let i,s;for(i in this.l={},t)this.l[i]=t[i].clone(),s=s||this.l[i];this.ot=s,this.width=this.width||s.width,this.height=this.height||s.height}ut(t){this.ot?.stop(),this.ot=this.rt[t],this.ot.start()}advance(t){super.advance(t),this.ot?.update(t)}Y(){this.ht&&this.context.drawImage(this.ht,0,0,this.ht.width,this.ht.height),this.ot&&this.ot.N({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function y(){return new p(...arguments)}new WeakMap;function x(t){let i=t.canvas;t.clearRect(0,0,i.width,i.height)}function v({ct:i=60,dt:s=!0,update:e=t,N:n,context:o=a(),blur:u=!1}={}){if(!n)throw Error("You must provide a render() function");let c,d,A,l,f,w=0,g=1e3/i,m=1/i,p=s?x:t,y=!0;function v(){if(d=requestAnimationFrame(v),y&&(A=performance.now(),l=A-c,c=A,!(l>1e3))){for(r("tick"),w+=l;w>=g;)f.update(m),w-=g;p(f.context),f.N()}}return u||(window.addEventListener("focus",(()=>{y=!0})),window.addEventListener("blur",(()=>{y=!1}))),h("init",(()=>{f.context??=a()})),f={update:e,N:n,At:!0,context:o,start(){c=performance.now(),this.At=!1,requestAnimationFrame(v)},stop(){this.At=!0,cancelAnimationFrame(d)},lt:v,set ft(t){c=t}},f}let I={},b={},M={},Z={wt:"enter",gt:"esc",yt:"space",xt:"arrowleft",vt:"arrowup",It:"arrowright",bt:"arrowdown"};function R(i=t,s){i.Mt&&s.preventDefault(),i(s)}function G(t){let i=Z[t.code],s=I[i];M[i]=!0,R(s,t)}function S(t){let i=Z[t.code],s=b[i];M[i]=!1,R(s,t)}function k(){M={}}function U(){let t;for(t=0;t<26;t++)Z["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)Z["Digit"+t]=Z["Numpad"+t]=""+t;window.addEventListener("keydown",G),window.addEventListener("keyup",S),window.addEventListener("blur",k)}function C(t){return!![].concat(t).some((t=>M[t]))}const F="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjAlIiB4Mj0iMTAwJSIgeTE9IjAlIiB5Mj0iMCUiPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJjIiBtYXNrQ29udGVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTAgMGgxdjFIMHoiLz48L21hc2s+PC9kZWZzPjxmaWx0ZXIgaWQ9ImIiPjxmZVR1cmJ1bGVuY2UgYmFzZUZyZXF1ZW5jeT0iLjAwMiAuMDIiIG51bU9jdGF2ZXM9IjkiLz48ZmVEaWZmdXNlTGlnaHRpbmcgbGlnaHRpbmctY29sb3I9IiMwMjRCNzgiIHN1cmZhY2VTY2FsZT0iOSI+PGZlRGlzdGFudExpZ2h0IGF6aW11dGg9Ii05MCIgZWxldmF0aW9uPSI2MCIvPjwvZmVEaWZmdXNlTGlnaHRpbmc+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI2IpIiBtYXNrPSJ1cmwoI2MpIi8+PC9zdmc+";var N=function(){return N=Object.assign||function(t){for(var i,s=1,e=arguments.length;s<e;s++)for(var n in i=arguments[s])Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},N.apply(this,arguments)},E=function(t,i,s,e){return new(s||(s=Promise))((function(n,h){function r(t){try{a(e.next(t))}catch(t){h(t)}}function o(t){try{a(e.Zt(t))}catch(t){h(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof s?i:new s((function(t){t(i)}))).then(r,o)}a((e=e.apply(t,i||[])).next())}))},Y=function(t,i){var s,e,n,h,r={label:0,Rt:function(){if(1&n[0])throw n[1];return n[1]},Gt:[],St:[]};return h={next:o(0),Zt:o(1),kt:o(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function o(o){return function(a){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,o[0]&&(r=0)),r;)try{if(s=1,e&&(n=2&o[0]?e.kt:o[0]?e.Zt||((n=e.kt)&&n.call(e),0):e.next)&&!(n=n.call(e,o[1])).done)return n;switch(e=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,e=o[1],o=[0];continue;case 7:o=r.St.pop(),r.Gt.pop();continue;default:if(!(n=r.Gt,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.St.push(o);break}n[2]&&r.St.pop(),r.Gt.pop();continue}o=i.call(t,r)}catch(t){o=[6,t],e=0}finally{s=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},j=100,P=0,W=u().canvas,z=[],B=[],Q=[],V=document.getElementsByTagName("body")[0],X=document.getElementById("days-passed"),T=document.getElementById("gameover"),J=document.getElementById("background");J.style.backgroundImage="url(".concat(F,"), url(").concat(F,"), url(").concat(F,")"),J.style.backgroundSize="1200px";var D="arrowup",q="arrowdown";function L(t){void 0===t&&(t=!1),(P=t?0:P+1)%12==0&&V.classList.toggle("night"),P%24==0&&(X.innerHTML="Day ".concat(Math.floor(P/24)+1))}var H=v({update:function(){z.map((function(t){t.update()}))},N:function(){z.map((function(t){return t.N()}))}});function K(t){return new Promise((function(i){return setTimeout(i,t)}))}var O=new Image;O.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAsCAQAAAC5k+LNAAAAAXNSR0IArs4c6QAAAb1JREFUeNqt1+GNgzAMhuHCv2ziIbJFlmCA24/RuDqu9XJGvhBRfSpqoTxyQkjg9Vr+y7rF6N5hRmg5zln2R+iya9rx845vZRaNXDnkg5HaWc006k2tcORzbAKlF+WQBG09XLTblSpYtfFppNebstf+NDTjqLhw4UZoORwdRTRW7RitGpo/CNU+Rtt3UeHoDFo48Rq9AXzI9ZQJNIuh5B4qvZpyQkqIeLQtMyjVCpWB0j0zqEH0nzJC6OM51OuxLWkhMo2SgD6pFMa/6d4nqDEQle0sWk5oSzKBrtuye0PrLdTXrmVftxQt+qcJlCUmQW08+hwEOiBzVNcbR2Hvod6vf1YtvzwCqhmAoDVMLQnaxnBvhR33uUGOxiV7gvrgY1UrR0QnRme1gL5Dd4B6rI4h2iLqozag8Y4fB9TYpFJqCEtf1gnCpepnSNb8BkrSSp2Ff60bSx3V3mFpERyoQfahPx31j2aI2vOro8zzSeOc5SYGBLVxmqKcdB2/HKnUyDMrqCaikCSvUTkNaDglIQPPNEIeov5SsW4ZmhD0GM1kP1yIrU0+xpw4/9bu55v/mwovYZbKw2uQr2Wjd79f5x4cKMIEKfAAAAAASUVORK5CYII=";var _=new Image;function $(t){return y(N(N({x:W.width,y:Math.random()*W.height,Ut:6},t),{update:function(){this.x-=t.speed*(P/24+1),this.x<-t.width&&(this.x=600,this.y=600*Math.random(),this.Ct=!1,this.opacity=1)}}))}function tt(){var t=$({width:30,height:30,ht:O,speed:2,Ct:!1});B.push(t),z.push(t)}function it(){var t=$({width:60,height:15,ht:_,speed:3,Ct:!1,opacity:1});Q.push(t),z.push(t)}function st(t){j=Math.min(Math.max(t,0),100),document.getElementById("lifebar").style.width="".concat(j,"%"),0==j&&(H.stop(),document.getElementById("result").innerHTML="You survived at sea for ".concat(P," hours"),T.style.display="block",document.querySelector("#restart").addEventListener("click",(function(){ht()})))}_.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAPBAMAAABKPLFCAAAAAXNSR0IArs4c6QAAABhQTFRFAAAAUF1jMlFgEjBBVoWautTie7fTaqC88UeMnQAAAAV0Uk5TAV3l/f6SUqreAAAApklEQVR42n3PzRGCMBCG4UUbYK1AFma8OlkaEFAaMDSgA3fEfO2bXJRf38ntmU2y9KdUYyLeLFWmSDcTMSTA1Q6olpWSxoGbpsGKFyKea3dXCwwLNemZyAx42w5w7axnHviQwVkA7byuFCGK8gpYYede4Wu0v63pQ1UzMX5cTgvuqwszqyYUXq8n3AG9HD2ExXw7hZve6/FXxCJF9j0Jc0yTZNx49AOeyGdbddrr+AAAAABJRU5ErkJggg==";var et=new Image;function nt(){var t=y({x:100,y:W.height/2,Ut:6,ht:et,update:function(){var t=this;C(D)||C("w")?this.C=-1:C(q)||C("s")?this.C=1:this.C=0,this.rotation=1/30*this.dy,this.y<0?(this.y=0,this.dy=0):this.y+this.height>W.height&&(this.y=W.height-this.height,this.dy=0),B.forEach((function(i){!i.Ct&&A(t,i)&&(i.Ct=!0,st(j-30),function(){E(this,void 0,void 0,(function(){var t;return Y(this,(function(i){switch(i.label){case 0:t=0,i.label=1;case 1:return t<3?(V.style.transition="none",V.style.filter="invert(0.4)",[4,K(150)]):[3,5];case 2:return i.Rt(),V.style.filter="",[4,K(150)];case 3:i.Rt(),V.style.transition="",i.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))}())})),Q.forEach((function(i){!i.Ct&&A(t,i)&&(i.Ct=!0,st(j+10),i.opacity=0)})),this.advance()}});z.push(t)}function ht(){z=[],st(100),L(!0),function(){for(var t=0;t<4;t++)setTimeout(tt,1e3*t);for(t=0;t<2;t++)setTimeout(it,5e3*t)}(),nt(),V.classList.remove("night"),H.start(),T.style.display=""}et.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAwBAMAAAC/EAQ6AAAAAXNSR0IArs4c6QAAABVQTFRFVVUA6tt0wZxNU3xElFsoUTorIRkZFZ3NXQAAAAJ0Uk5TA/d+Z/lEAAAAfElEQVR42r2RQQ0AIRAD18JZwMJZqIVawL+EK2lIuMC3zIOUzj42UGfI1qqAqHbYoABkslqctAeyen2bJpwA56wmV/08lkLtPU3O1fwdEHEtXL6vE8QYzmsFQQ49l5pdWrvagcjqKrJ3D/xP8ooW45xrkr5VZbXpGyXC+gNQSO6JX4wqcwAAAABJRU5ErkJggg==",et.onload=nt,setInterval(L,1500),U(),window.onload=function(){var t=document.getElementById("start-button"),i=document.getElementById("start-screen");t.addEventListener("click",(function(){i.style.display="none",ht()}))}})();</script></body></html>