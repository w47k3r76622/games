<!DOCTYPE html><html><head> <title>FlappyBox by towc</title> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> <style>body{background-color:#333;}#c{position:absolute;left:0;top:calc(50% - 74vw);width:100%;}#error{position: absolute; top: calc(50% - 20px ); left: 0;width:100%;color: white;text-align: center;font:40px Verdana;display:none;}@media screen and (min-width: 66.6vh){#c{position:absolute; top:0; left:calc(50% - 33.3vh); height:100%; width: auto;}}@media screen and (orientation: landscape) and (max-height: 500px ){#error{display: inline-block;}#c{display: none;}}</style></head><body> <canvas id=c></canvas> <p id=error>Please don't use lanscape mode</p><script>function m(){n=!1,o=0,p=!1,q=!1,x=3*hw/2,y=h-100,vx=0,vy=-3,ax=0,ay=-5e-4,r=18,s=1,t=0,u=0,l.length=0,v=300,z=1,aa=60,ab=0,ac=0,ad=1,ae=0,af=Date.now(),ag=0}function ah(){if(q)return ai();window.requestAnimationFrame(ah);var a=Date.now(),i=ag+(a-af);for(i>50&&(i=0);i>16&&!q;){var f=!1;x<-r?(x+=w+r,vx*=.8):x>w+r?(x-=w+r,vx*=.8):f=!0;var m=x<hw?1:-1;if(m!==s&&f&&(ax=0,u=0,ac=2*vx,ab=0),s=m,Math.abs(vx)>6?vx*=.992:vx*=1.01,p||(vy+=ay),x+=vx+=.3*s+(ax*=.9),t=Math.atan(vy/vx),--o&&n&&u<5&&(o=10,n=!1,++u,ax=-s/3,vx-=2*s,(Math.sign(vx)===s||Math.abs(vx)<2)&&(vx=2*-s)),!p){if(v+=vy,v<=0){var b=0;do{Math.random()<.7&&(z*=-1);for(var S=hw+Math.random()*hw*z|0,T=35+50*Math.random()/(b+1)|0,M=-1,C=0;C<l.length;++C)l[C].q&&(M=C);var R=M>-1?l[M]:{};R.x=S,R.y=0,R.a=S+T>w,R.a?(R.w=w-S,R.b=T-R.w):R.w=T,R.q=!1,-1===M&&l.push(R),aa>0&&(aa-=2),v=aa+(90+30*Math.random())|0,++b}while(Math.random()<.1&&2>b)}for(var C=0;C<l.length;++C){var R=l[C];R.q||(R.y-=vy,R.y>h?R.q=!0:R.y>y&&R.y+vy<y&&(x>R.x&&x<R.x+R.w||R.a&&x<=R.b?q=!0:++ae))}}i-=16}if(q)return ai();ag=i,af=a,ab+=ac-=.1*ab,ac*=.8,c.globalCompositeOperation="source-over",c.fillStyle="#fff",c.fillRect(0,0,hw+(ab>0?ab/2|0:0),h),c.fillStyle="#000",c.beginPath(),c.moveTo(hw,0),c.lineTo(w,0),c.lineTo(w,h),c.lineTo(hw,h),c.quadraticCurveTo(hw+ab,y,hw,0),c.fill(),c.globalCompositeOperation="source-over",c.fillStyle="#f80808";for(var C=0;C<l.length;++C){var R=l[C];R.q||(c.fillRect(R.x,R.y,R.w,k),R.a&&c.fillRect(0,R.y,R.b,k))}c.globalCompositeOperation="difference",c.fillStyle="#fff",c.save(),c.translate(x,y),c.rotate(t),c.fillRect(ap[0],ap[0],r,r),c.restore(),c.fillStyle="#fff";var _=ad-(1-u/5);0>_?ad+=g:_>g&&(ad-=g),c.font=d[2],c.fillText(e[0],ap[1],ap[2]),c.fillRect(ap[3],ap[4],ad*ap[5],25),c.font=d[1];var O=ae;c.fillText(O,hw-c.measureText(O).width/2,80),p&&(c.font=d[2],c.fillText(e[2],ap[6],hh))}function ai(){c.globalCompositeOperation="source-over",c.fillStyle="rgba(120,120,120,.6)",c.fillRect(0,0,w,h),c.fillStyle="#eee",c.font=d[3];var a=e[1].replace("<ae>",ae);c.fillText(a,hw-c.measureText(a).width/2,hh-20);var t=+localStorage.game_highScore;ae>t&&(localStorage.game_highScore=ae),c.font=d[2],a=e[3].replace("<ae>",localStorage.game_highScore),c.fillText(a,hw-c.measureText(a).width/2,hh+20)}a=32,b=document.getElementById("c"),c=b.getContext("2d");var w=b.width=320,h=b.height=480,ww=window.innerWidth,wh=window.innerHeight,hw=w/2,hh=h/2,d=["40px Verdana","30px Verdana","20px Verdana","35px Verdana"],e=["jumps","Squashed at <ae>","spacebar or touch to begin","highscore of <ae>"],f=[];c.font=d[2],f[0]=c.measureText(e[0]).width,c.font=d[2],f[1]=c.measureText(e[2]).width,g=.02,k=6,l=[],m(),p=!0,ap=[-r/2,1.5*hw-f[0]/2,h-30,1.5*hw-f[0]/2-6,h-48,f[0]+10,hw-f[1]/2],ah(),interact=function(){p&&(p=!1),q?(m(),ah()):n=!0},window.addEventListener("keydown",function(e){e.keyCode===a&&interact()}),window.addEventListener("touchstart",interact),localStorage.game_highScore||(localStorage.game_highScore=0);</script></body></html>