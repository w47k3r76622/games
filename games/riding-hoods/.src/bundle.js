!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.randomBetween=function(t,e){return Math.random()*(e+t-1)+t},e.magnitude=function(t,e){return Math.sqrt(t*t+e*e)},e.seededRandomBetween=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=0;if(t+=e,0!==t.length)for(var a=0;a<t.length;a++)s=t.charCodeAt(a)+((s<<5)-s),s&=s;var r=(9301*s+49297)%233280;return i+Math.abs(r/233280)*(n-i)},e.generateSeed=function(){return Math.random().toString(36).substring(7)},e.distanceBetween=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)-(t.radius+e.radius)},e.rad=function(t,e,i,n){var s=e-n,a=t-i;return Math.atan2(s,a)},e.rotatePoint=function(t,e,i,n,s){var a=Math.sin(i),r=Math.cos(i);n-=t,s-=e;var o=n*r-s*a,h=n*a+s*r;return n=o+t,s=h+e,{x:n,y:s}},e.calcLight=function(t,e){return"hsl(0,0%,"+(2*Math.sqrt(t*t+e*e)-100)+"%)"},e.randomIntInRange=function(t,e){return Math.floor(Math.random()*(e-t))+t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blue";n(this,t),this.x=e,this.y=i,this.radius=12,this.radian=2*Math.PI*Math.random(),this.friction=.9,this.vx=0,this.vy=0,this.hoodcolor=s,this.facecolor="#FFDABC",this.dead=!1}return s(t,[{key:"kill",value:function(){this.dead=!0}},{key:"update",value:function(t){}},{key:"draw",value:function(t){if(this.dead)return t.context.fillStyle="red",t.context.beginPath(),t.context.arc(this.x,this.y,1.2*this.radius,0,2*Math.PI),void t.context.fill();t.context.fillStyle="rgba(0,0,0,0.2)",t.context.beginPath(),t.context.arc(this.x,this.y,1.2*this.radius,0,2*Math.PI),t.context.fill(),t.context.fillStyle="#CC8D56",t.context.beginPath();var e=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x,this.y+this.radius);t.context.arc(e.x,e.y,.5*this.radius,0,2*Math.PI),t.context.fill(),t.context.fillStyle=this.hoodcolor,t.context.beginPath(),t.context.arc(this.x,this.y,this.radius,0,2*Math.PI),t.context.fill(),t.context.beginPath();var i=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x,this.y-this.radius);t.context.moveTo(i.x,i.y);var n=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x-2.5*this.radius,this.y+5*Math.sin(t.frame/15)),s=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x-this.radius,this.y-this.radius),r=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x-this.radius,this.y-.5*this.radius+5*Math.cos(t.frame/15));t.context.bezierCurveTo(s.x,s.y,r.x,r.y,n.x,n.y);var o=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x,this.y+this.radius),h=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x-this.radius,this.y+.5*this.radius+5*Math.cos(t.frame/15)),u=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x-this.radius,this.y+this.radius);t.context.bezierCurveTo(h.x,h.y,u.x,u.y,o.x,o.y),t.context.fill(),t.context.fillStyle=this.facecolor,t.context.beginPath();var l=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+.2*this.radius,this.y);t.context.arc(l.x,l.y,.8*this.radius,this.radian-1.5,this.radian+1.5),t.context.fill();var c=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+this.radius,this.y);t.context.beginPath(),t.context.arc(c.x,c.y,.15*this.radius,0,2*Math.PI),t.context.fill(),t.context.fillStyle="#000";var d=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+.7*this.radius,this.y-.3*this.radius);t.context.beginPath(),t.context.arc(d.x,d.y,.06*this.radius,0,2*Math.PI),t.context.fill();var f=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+.7*this.radius,this.y+.3*this.radius);t.context.beginPath(),t.context.arc(f.x,f.y,.06*this.radius,0,2*Math.PI),t.context.fill()}}]),t}();e.default=r},function(t,e,i){t.exports=i(3)},function(t,e,i){"use strict";var n=i(4);(new(function(t){return t&&t.__esModule?t:{default:t}}(n).default)).run()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),o=n(r),h=i(7),u=n(h),l=i(8),c=n(l),d=i(9),f=n(d),y=i(1),x=n(y),v=i(12),p=n(v),g=i(13),w=n(g),b=i(14),m=n(b),P=i(15),k=n(P),M=i(16),T=n(M),_=i(17),E=n(_),S=i(18),O=n(S),I=i(0),R="MENU",A=function(){function t(){s(this,t),this.mouse=new u.default,this.keyboard=new c.default,this.debugger=new w.default,this.menu=new m.default,this.endscreen=new k.default,this.hint=new E.default,this.timer=null,this.width=1280,this.height=720,this.canvas=document.getElementById("c"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.seed=(0,I.generateSeed)(),this.frame=0,this.state=R,this.ambient=.3,this.backgroundColor="#666",this.wind=0,this.steps=[],this.sisters=[],this.wolves=[],this.player=null,this.world=null,this.messages=[],this.lastTimestamp=new Date,this.deltaTime=0,window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),this.gradient=this.context.createRadialGradient(this.width/2,this.height/2,0,this.width/2,this.height/2,3e3),this.gradient.addColorStop(0,"rgba(0,0,0,"+this.ambient+")"),this.gradient.addColorStop(.1,"rgba(0,0,0,1)")}return a(t,[{key:"loop",value:function(){this.frame++;var t=new Date;this.deltaTime=t-this.lastTimestamp,this.draw(),this.update(this.deltaTime),this.lastTimestamp=t,requestAnimationFrame(this.loop.bind(this))}},{key:"run",value:function(){this.loop()}},{key:"play",value:function(){var t=this;this.player=null,this.world=null,this.sisters=[],this.wolves=[],this.player=new o.default(0,0),this.world=new f.default({game:this,r:10,size:140}),this.sisters=Array(6).fill().map(function(e,i){return new x.default((0,I.randomIntInRange)(200-t.world.radius,t.world.radius-200),(0,I.randomIntInRange)(200-t.world.radius,t.world.radius-200),"hsl("+(60+45*i)+", 100%, 60%)")}),this.wolves=Array(60).fill().map(function(e,i){return new p.default((0,I.randomIntInRange)(200-t.world.radius,t.world.radius-200),(0,I.randomIntInRange)(200-t.world.radius,t.world.radius-200))}),this.timer=new T.default,this.state="PLAYING"}},{key:"drawDarkness",value:function(){this.context.fillStyle=this.gradient,this.context.fillRect(0,0,this.width,this.height)}},{key:"clear",value:function(){this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle="rgb( "+Math.round(255*this.ambient)+","+Math.round(255*this.ambient)+","+Math.round(255*this.ambient)+")",this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.width,this.height)}},{key:"update",value:function(){var t=this;switch(this.state){case R:this.menu.update(this);break;case"PLAYING":this.wind=Math.sin(this.frame/40),this.steps.forEach(function(e){e.update(t)}),this.sisters.forEach(function(e){e.update(t)}),this.player.update(this),this.wolves.forEach(function(e){e.update(t)}),this.keyboard.clear(),this.hint.update(this),this.timer.update(),this.sisters.length<=0&&this.messages.push(new O.default("Get out of safely!",1)),this.messages.forEach(function(e,i){e.duration>0?t.messages[0].update():t.messages.shift()});break;case"FINISHED":this.endscreen.update(this)}}},{key:"draw",value:function(){var t=this;switch(this.debugger.addFrame(Math.floor(1e3/this.deltaTime)),this.debugger.add("Seed:  "+this.seed),this.debugger.add("State: "+this.state),this.debugger.add("FPS:   "+Math.floor(1e3/this.deltaTime)),this.clear(),this.state){case R:this.menu.draw(this);break;case"PLAYING":var e=this.width/2-this.player.x,i=this.height/2-this.player.y;this.context.translate(e,i),this.debugger.add("Steps: "+this.steps.length),this.steps.forEach(function(e){e.draw(t)}),this.player.drawBefore(this),this.player.draw(this),this.debugger.add("Chars: "+(1+this.sisters.length+this.player.sisters.length)),this.sisters.forEach(function(e){e.draw(t)}),this.wolves.forEach(function(e){e.draw(t)}),this.world.draw(this),this.context.translate(-e,-i),this.drawDarkness(),this.hint.draw(this),this.timer.draw(this),(0,I.magnitude)(this.player.x,this.player.y)>this.world.radius+200&&(this.sisters.length<=0?this.state="FINISHED":(this.messages.push(new O.default("Turn around, missing sisters!",1)),this.player.vx*=.2,this.player.vy*=.2)),this.messages.forEach(function(e){t.messages[0].draw(t)});break;case"PAUSED":this.drawPause();break;case"FINISHED":this.endscreen.draw(this)}}},{key:"pause",value:function(){this.state="PAUSED"}},{key:"unpause",value:function(){this.state="PAUSED"}}]),t}();e.default=A},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(0),u=i(6),l=n(u),c=i(1),d=n(c),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,"#FF005A"));return n.radius=12,n.speed=.3,n.friction=.9,n.sisters=[],n.history=Array(120).fill([0,0]),n.colliding=!1,n}return r(e,t),o(e,[{key:"resolveCollision",value:function(t){}},{key:"update",value:function(t){var e=this,i=t.keyboard;t.mouse;(i.isPressed(i.ARROW_LEFT)||i.isPressed("a"))&&(this.vx-=this.speed),(i.isPressed(i.ARROW_RIGHT)||i.isPressed("d"))&&(this.vx+=this.speed),(i.isPressed(i.ARROW_UP)||i.isPressed("w"))&&(this.vy-=this.speed),(i.isPressed(i.ARROW_DOWN)||i.isPressed("s"))&&(this.vy+=this.speed);var n=Math.atan2(this.vy,this.vx),s=n-this.radian;if(s<-Math.PI?s+=2*Math.PI:s>Math.PI&&(s-=2*Math.PI),this.radian+=1*s,this.x+=this.vx,this.y+=this.vy,Math.abs(Math.sqrt(this.vx*this.vx+this.vy*this.vy))>1&&(this.history.unshift([this.x,this.y]),this.history.length>1e3&&this.history.pop()),t.frame%10==0&&(0!==Math.round(this.vx)||0!==Math.round(this.vy))){var a=new l.default(this.x,this.y);t.steps.unshift(a)}this.vx*=this.friction,this.vy*=this.friction,this.colliding=!1,t.sisters.forEach(function(i,n){(0,h.distanceBetween)(e,i)<0&&(e.sisters.unshift(i),t.sisters.splice(n,1))}),this.sisters.forEach(function(t,i){if(!t.dead){var n=.1*(e.history[15*i+15][0]-t.x),s=.1*(e.history[15*i+15][1]-t.y);t.radian=Math.atan2(s,n),t.x+=n,t.y+=s}})}},{key:"drawBefore",value:function(t){this.sisters.forEach(function(e){e.draw(t)})}}]),e}(d.default);e.default=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i,this.radius=3,this.life=180}return s(t,[{key:"update",value:function(t){--this.life<=0&&t.steps.pop()}},{key:"draw",value:function(t){var e=.002*this.life;t.context.fillStyle="rgba(0,0,0,"+e+")",t.context.beginPath(),t.context.arc(this.x,this.y,this.radius,0,2*Math.PI),t.context.fill()}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.x=0,this.y=0,document.addEventListener("mousemove",this.mousemove.bind(this))}return s(t,[{key:"mousemove",value:function(t){this.x=t.clientX,this.y=t.clientY}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.pressedKeys={},this.clickedKeys={},this.SPACE="Space",this.ARROW_LEFT="ArrowLeft",this.ARROW_RIGHT="ArrowRight",this.ARROW_UP="ArrowUp",this.ARROW_DOWN="ArrowDown",document.addEventListener("keydown",this.keydown.bind(this)),document.addEventListener("keyup",this.keyup.bind(this))}return s(t,[{key:"clear",value:function(){this.clickedKeys={}}},{key:"keydown",value:function(t){this.isPressed(t.which)&&this.isPressed(t.keyCode)&&this.isPressed(t.key)&&this.isPressed(t.code)||(this.clickedKeys[t.which]=!0,this.clickedKeys[t.keyCode]=!0,this.clickedKeys[t.key]=!0,this.clickedKeys[t.code]=!0),this.pressedKeys[t.which]=!0,this.pressedKeys[t.keyCode]=!0,this.pressedKeys[t.key]=!0,this.pressedKeys[t.code]=!0}},{key:"keyup",value:function(t){this.pressedKeys[t.which]=!1,this.pressedKeys[t.keyCode]=!1,this.pressedKeys[t.key]=!1,this.pressedKeys[t.code]=!1}},{key:"isPressed",value:function(t){return this.pressedKeys[t]}},{key:"isClicked",value:function(t){return this.clickedKeys[t]}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(10),o=(n(r),i(11)),h=n(o),u=i(0),l=function(){function t(e){var i=e.r,n=void 0===i?0:i,a=e.size,r=void 0===a?100:a,o=e.game,l=void 0===o?{seed:""}:o;s(this,t),this.radius=n*r,this.x=n,this.y=n,this.size=r,this.grid=[],this.game=l;for(var c=-this.x;c<this.x;c++)for(var d=-this.y;d<this.y;d++)this.grid[c]=this.grid[c]||[],Math.sqrt((c*r-r/2)*(c*r-r/2)+(d*r-r/2)*(d*r-r/2))<n*r?this.grid[c][d]=new h.default({x:(0,u.seededRandomBetween)(c+":"+c+":"+d,this.game.seed,c*this.size+20,(c+1)*this.size-20),y:(0,u.seededRandomBetween)(d+":"+c+":"+d,this.game.seed,d*this.size+20,(d+1)*this.size-20),trunkRadius:(0,u.seededRandomBetween)(c+":"+c+":"+d,this.game.seed,10,20),leafRadius:(0,u.seededRandomBetween)(c+":"+c+":"+d,this.game.seed,70,150)}):this.grid[c][d]=null}return a(t,[{key:"inView",value:function(t,e){var i=t.player,n=(t.width,t.height);return e.x>i.x-n/2-this.size&&e.x<i.x+n/2+this.size&&e.y>i.y-n/2-this.size&&e.y<i.y+n/2+this.size}},{key:"draw",value:function(t){for(var e=0,i=-this.x;i<this.x;i++)for(var n=-this.y;n<this.y;n++){var s=this.grid[i][n];s&&this.inView(t,s)&&(e++,s.draw(t))}t.debugger.add("Trees: "+e)}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=s,this.height=a}return s(t,[{key:"draw",value:function(t){var e=t.player,i=t.context,n=e.x,s=e.y,r=this.x,o=this.y,h=this.width,u=this.height,l=[{x:r,y:o,rad:(0,a.rad)(r,o,n,s)},{x:r,y:o+u,rad:(0,a.rad)(r,o+u,n,s)},{x:r+h,y:o,rad:(0,a.rad)(r+h,o,n,s)},{x:r+h,y:o+u,rad:(0,a.rad)(r+h,o+u,n,s)}];l.sort(function(t,e){return t.rad-e.rad>Math.PI?-1:t.rad-e.rad<-Math.PI?1:t.rad>e.rad});var c=i.createRadialGradient(r+h/2,o+u/2,0,r+h/2,o+u/2,200);c.addColorStop(0,"rgba(0,0,0,"+(1-t.ambient)+")"),c.addColorStop(1,"rgba(0,0,0,0)");var d=l[0],f=l[3];i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(d.x+4e3*Math.cos(d.rad),d.y+4e3*Math.sin(d.rad)),i.lineTo(f.x+4e3*Math.cos(f.rad),f.y+4e3*Math.sin(f.rad)),i.lineTo(f.x,f.y),i.fillStyle=c,i.fill();var y=.1*(r+h/2-n),x=.1*(o+u/2-s);i.beginPath(),x>0?(i.moveTo(r,o),i.lineTo(r+h,o),i.lineTo(r+h+y,o+x),i.lineTo(r+y,o+x),i.fillStyle=s>o?"#222":(0,a.calcLight)(y,x-u/2)):(i.moveTo(r,o+u),i.lineTo(r+h,o+u),i.lineTo(r+h+y,o+u+x),i.lineTo(r+y,o+u+x),i.fillStyle=s<o+u?"#222":(0,a.calcLight)(y,x+u/2)),i.fill(),i.beginPath(),y>0?(i.moveTo(r,o),i.lineTo(r+y,o+x),i.lineTo(r+y,o+u+x),i.lineTo(r,o+u),i.fillStyle=n>r?"#222":(0,a.calcLight)(y-h/2,x)):(i.moveTo(r+h,o),i.lineTo(r+h+y,o+x),i.lineTo(r+h+y,o+u+x),i.lineTo(r+h,o+u),i.fillStyle=n<r+h?"#222":(0,a.calcLight)(y+h/2,x)),i.fill(),i.fillStyle="#222",i.fillRect(r+y,o+x,h,u)}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=function(){function t(e){var i=this,s=e.x,r=void 0===s?0:s,o=e.y,h=void 0===o?0:o,u=e.trunkRadius,l=void 0===u?20:u,c=e.leafRadius,d=void 0===c?100:c;n(this,t),this.x=r,this.y=h,this.radius=l,this.leafRadius=d,this.amplitude=0,this.detail=10,this.points=Array(this.detail).fill().map(function(t){return(0,a.randomBetween)(1-i.amplitude,1)})}return s(t,[{key:"update",value:function(t){}},{key:"draw",value:function(t){var e=this;t.context.fillStyle="black",t.context.beginPath(),t.context.arc(this.x,this.y,this.radius,0,2*Math.PI),t.context.fill();var i=(0,a.rad)(t.player.x,t.player.y,this.x,this.y),n=this.x+this.radius*Math.cos(i-Math.PI/2),s=this.y+this.radius*Math.sin(i-Math.PI/2),r=this.x+this.radius*Math.cos(i+Math.PI/2),o=this.y+this.radius*Math.sin(i+Math.PI/2),h=(0,a.rad)(r,o,t.player.x,t.player.y),u=r+500*Math.cos(h),l=o+500*Math.sin(h),c=(0,a.rad)(n,s,t.player.x,t.player.y),d=n+500*Math.cos(c),f=s+500*Math.sin(c);t.context.fillStyle="black",t.context.beginPath(),t.context.moveTo(n,s),t.context.lineTo(r,o),t.context.lineTo(u,l),t.context.lineTo(d,f),t.context.fill(),t.context.fillStyle="rgba(0, 0, 0, 0.1)",t.context.beginPath(),this.points.forEach(function(i,n){t.context.lineTo(e.x+Math.cos(2*Math.PI/e.points.length*(n+1))*i*e.leafRadius+Math.sin(t.frame/30+i+e.x)*i*5,e.y+Math.sin(2*Math.PI/e.points.length*(n+1))*i*e.leafRadius+Math.sin(t.frame/30+i+e.y)*i*3)}),t.context.fill()}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i,this.radius=15,this.radian=0,this.target=null,this.hasEaten=!1,this.sightDistance=150}return s(t,[{key:"update",value:function(t){if(!this.hasEaten){this.target=null;var e=null;if(t.player.sisters.forEach(function(t){if(!t.dead)return void(e=t)}),t.player.sisters.length>0&&e)(0,a.distanceBetween)(this,e)<0?(this.hasEaten=!0,e.kill()):(0,a.distanceBetween)(this,e)<this.sightDistance&&(this.target=e);else{if((0,a.distanceBetween)(this,t.player)<0)return this.hasEaten=!0,t.player.kill(),void(t.state="FINISHED");(0,a.distanceBetween)(this,t.player)<this.sightDistance&&(this.target=t.player)}if(null!==this.target){var i=this.target.x-this.x,n=this.target.y-this.y;this.x+=i*(1-(0,a.distanceBetween)(this,this.target)/this.sightDistance)*.04,this.y+=n*(1-(0,a.distanceBetween)(this,this.target)/this.sightDistance)*.04,this.radian=Math.atan2(n,i)}}}},{key:"draw",value:function(t){this.hasEaten||this.target,t.context.fillStyle="#ccc",t.context.beginPath();var e=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x-15,this.y);t.context.arc(e.x,e.y,10,0,2*Math.PI),t.context.fill(),t.context.beginPath(),t.context.arc(this.x,this.y,this.radius,0,2*Math.PI),t.context.fill(),t.context.beginPath();var i=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+15,this.y);t.context.arc(i.x,i.y,10,0,2*Math.PI),t.context.fill(),t.context.beginPath();var n=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+25,this.y);t.context.arc(n.x,n.y,5,0,2*Math.PI),t.context.fill(),t.context.fillStyle="black",t.context.beginPath();var s=(0,a.rotatePoint)(this.x,this.y,this.radian,this.x+29,this.y);t.context.arc(s.x,s.y,2,0,2*Math.PI),t.context.fill()}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.output=[],this.frames=[]}return s(t,[{key:"add",value:function(t){this.output.push(t)}},{key:"addFrame",value:function(t){this.frames.unshift(t)}},{key:"clear",value:function(){this.output=[],this.frames.length>200&&this.frames.pop()}},{key:"draw",value:function(t){t.context.fillStyle="rgba(0,255,0,0.5)",t.context.fillRect(0,0,200,90+20*this.output.length),this.frames.forEach(function(e,i){t.context.fillRect(199-i,70-e,1,e)}),t.context.fillStyle="white",t.context.font="15px monospace",t.context.textAlign="left",this.output.forEach(function(e,i){t.context.fillText(e,12,95+20*i)}),this.clear()}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return s(t,[{key:"update",value:function(t){t.keyboard.isPressed(t.keyboard.SPACE)&&t.play()}},{key:"draw",value:function(t){t.context.fillStyle="black",t.context.fillRect(0,0,t.width,t.height),t.context.fillStyle="white",t.context.textAlign="center",t.context.font="100px Arial",t.context.fillText("Riding",t.width/2,.4*t.height),t.context.fillText("Hoods",t.width/2,.6*t.height),Math.sin(t.frame/15)>.2&&(t.context.font="30px Arial",t.context.fillText("Press space to start",t.width/2,.8*t.height))}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return s(t,[{key:"update",value:function(t){t.keyboard.isPressed(t.keyboard.SPACE)&&t.play()}},{key:"draw",value:function(t){t.context.fillStyle="black",t.context.fillRect(0,0,t.width,t.height),t.context.fillStyle="white",t.context.font="30px Arial",t.context.textAlign="center";var e=t.player.dead?"You were eaten!":"You survived!";t.context.fillText(e,t.width/2,.4*t.height);var i=0;t.player.sisters.forEach(function(t){t.dead||(i+=1)}),t.context.fillText("Sisters saved: "+i,t.width/2,.5*t.height),Math.sin(t.frame/15)>.2&&(t.context.font="30px Arial",t.context.fillText("Press space to restart",t.width/2,.8*t.height))}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.start=new Date,this.text="00:00"}return s(t,[{key:"update",value:function(){var t=new Date-this.start,e=~~(t/1e3/60),i=~~(t/1e3)-60*e;this.text=(e>9?e:"0"+e)+":"+(i>9?i:"0"+i)}},{key:"draw",value:function(t){t.context.fillStyle="white",t.context.textAlign="center",t.context.font="30px Arial",t.context.fillText(this.text,t.width/2,50)}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=function(){function t(){n(this,t),this.radian=null,this.x=0,this.y=0,this.radius=200}return s(t,[{key:"update",value:function(t){var e=null,i=null;if(t.sisters.forEach(function(n){var s=(0,a.distanceBetween)(t.player,n);(s<e||!e)&&(e=s,i=n)}),e<this.radius)return void(this.radian=null);i&&(this.radian=(0,a.rad)(i.x,i.y,t.player.x,t.player.y),this.x+=.5*(Math.cos(this.radian)*this.radius+t.width/2-this.x),this.y+=.5*(Math.sin(this.radian)*this.radius+t.height/2-this.y))}},{key:"draw",value:function(t){this.radian&&(t.context.fillStyle="rgba(255,255,255, "+((Math.sin(t.frame/20)+1)/2-.8)+")",t.context.beginPath(),t.context.arc(this.x,this.y,5*Math.sin(t.frame/20)+15,0,2*Math.PI),t.context.fill())}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,i){n(this,t),this.message=e,this.duration=i||1e3,console.log(this.duration)}return s(t,[{key:"update",value:function(t){this.duration=this.duration-1}},{key:"draw",value:function(t){t.context.fillStyle="white",t.context.textAlign="center",t.context.font="30px Arial",t.context.fillText(this.message,t.width/2,t.height/2-200)}}]),t}();e.default=a}]);