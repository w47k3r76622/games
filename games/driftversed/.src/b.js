var n=420,t=300,o=30,e=o/2,r=n/o,i=t/o,c=2,u=r+2*c,a=i+2*c,f=5,d=25,h=100,l=1.015,v=["s","h"],y=5,s=400,x=["Clear skies with a chance of satellite debris.","No, no, no, Houston, don't be anxious. Anxiety is bad for the heart.","I hate space!","So, what do you like about being up here?<br><br> The silence.","Houston, I have a bad feeling about this mission."],w=[[[210,100],[210,240],"222222222222222222222222222222222222221111111111111122221111100001111122221110000000011122221100000000001122221100000000001122221100000000001122221110000000011122221110000000011122221111110011111122221111111111111122222222222222222222222222222222222222",1],[[80,80],[375,255],"222222222222222222222222222222222222221111000000111122221000000000000122221000000000000122221000000000000122221000000000000122221000000001000122221000000001000122221000000001100122221000000001000122221111000001111122222222222222222222222222222222222222"],[[45,45],[315,225],"222222222222222222222222222222222222221111011111111122221001011111000122221001010100000122221001010100000022221000000000000022221000000000110122221011100000000122221001001110010122221000001110010122221111111111111122222222222222222222222222222222222222"],[[45,45],[375,135],"222222222222222222222222222222222222221110111100011122221010001000000122221011000010000122221000000110000022220000000100010022221110110000111022220000000100010022220000100100000022220000101101000022220000100001000022222222222222222222222222222222222222"]],b,g,m,p,M,E,I,k,H,T,B=0,C=0,L=v.length,N={},A={},O={},q=[],S={},_=[],j=[],F={},G={},P=function(n,t){0>t||t>=n.length||n.splice(t,1)},R=function(n){return Math.floor(n/o)*o+e},U=function(n){var t=n.co.i;delete S[t][Z(n)],delete S[t][W(n)]},z=function(n){"b"===n.t&&U(n)},D=function(n,t){n.forEach(z),P(q,t)},J=function(n,t){var o=n&&n[0],e=o&&o.t,r=e||"s"===e;!r||o.o>0||P(q,t)},K=function(){for(;q.length;)D(q[0],0)},Q=function(){for(var n=q.length;n--;)J(q[n],n)},V=function(n){var t,o,e,r,i=n.split("");for(K(),t=0;t<i.length;t++)r=X(t),o=R(r[0]),e=R(r[1]),"0"!==i[t]&&kn(o,e)},W=function(n){return(Math.floor(n.y/o)+c)*u+Math.floor(n.x/o)+c},X=function(n){return[(n%u-c)*o,(Math.floor(n/u)-c)*o]},Y=function(n){var t=W(n);return X(t)},Z=function(n){var t=Y(n);return $(t)},$=function(n){return n[0]+"_"+n[1]},nn=function(n){var t=n-u,o=n+u;return[t-1,t,t+1,n-1,n,n+1,o-1,o,o+1]},tn=function(n){var t,o=W(n),e=nn(o),r=e.length;for(n.c=[];r--;)t=S[n.co.i][e[r]],t&&n.c.push(t)},on=function(n,t,o,e){var r,i,c,u=n.aa;for(r=0;e>=r;r++)n.a[r]||(n.a[r]=[]);return c=n.a[e],r=c.indexOf(t),o?(i=u.indexOf(t),P(u,i),i=u.indexOf(t),void(0>i&&P(c,r))):(n.aa.push(t),void(0>r&&c.push(t)))},en=function(n,t,o,e){if(n)for(var r,i=n.length;i--;)r=n[i],on(r,t,o,e)},rn=function(n){q.push(n)},cn=function(n){n.w2=n.w/2,n.h2=n.h/2},un=function(n){n.vxt=n.vx-n.w2,n.vyt=n.vy-n.h2,n.vxb=n.vx+n.w2,n.vyb=n.vy+n.h2},an=function(n){n.vx=n.x+n.dx,n.vy=n.y+n.dy,un(n)},fn=function(n){n.xt=n.x-n.w2,n.yt=n.y-n.h2,n.xb=n.x+n.w2,n.yb=n.y+n.h2},dn=function(n){n.x=n.vx,n.y=n.vy,fn(n)},hn=function(n){n.dx+=n.ddx,n.dy+=n.ddy},ln=function(n,t){return n.xb<t.xt&&n.vxb>=t.xt},vn=function(n,t){return n.yb<t.yt&&n.vyb>=t.yt},yn=function(n,t){return n.xt>=t.xb&&n.vxt<t.xb},sn=function(n,t){return n.yt>=t.yb&&n.vyt<t.yb},xn=function(n,t){return n.vxt<t.xb&&n.vxb>t.xt&&n.vyt<t.yb&&n.vyb>t.yt},wn=function(n){for(var t,o=n.c.length;o--;)if(t=n.c[o],xn(n,t))return t;return!1},bn=function(n){return Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2))},gn=function(n){var t;n.cc++,n.cc===y&&(tn(n),n.cc=0),t=wn(n),t&&(vn(n,t)||sn(n,t)?(n.vy=n.y,n.dy*=-1):(n.vx=n.x,n.dx*=-1),n.hp-=bn(n)*f,n.dx/=l,n.dy/=l)},mn=function(n){n.ddx/=d,n.ddy/=d,n.dx/=l,n.dy/=l},pn=function(n,t,o){on(n,t,o,2)},Mn=function(n,t,o){pn(n,hn,o),pn(n,an,o),t&&pn(n,gn,o),pn(n,mn,o),pn(n,dn,o)},En=function(n,t,o){en(M,n,t,1),en(M,Hn,t,3)},In=function(n){n.o-=.01,n.ro+=Math.floor(10*Math.random())/100,n.o<0&&(n.o=0),n.w+=.2,n.h+=.2,cn(n)},kn=function(n,t){for(var e,r,i,c=Sn(["b",n,t,o-6,o-6,1,0]),u=c.length;u--;)e=c[u],i=e.co.i,S[i]||(S[i]={}),r=S[i],r[Z(e)]=r[W(e)]=e;rn(c)},Hn=function(n){var t=qn(["s",n.x,n.y,2,2,1,0,-n.ddx*h,-n.ddy*h,1,"200,200,210"],n.co);Mn(t),on(t,In,0,0),rn([t])},Tn=function(n,t,o,e){o.ddx+=n/d*o.co.r,o.ddy+=t/d*o.co.r},Bn=function(n,t){var o,e;t=t||window.event,o=t.which||t.keyCode,N[o]!==n&&(N[o]=n,e=F[n][o],e&&e(o))},Cn=function(n){var t,o,e;e=n.co.c,e.save(),e.translate(n.x,n.y),e.rotate(n.ro),n.i&&(e.globalAlpha=n.o,e.drawImage(n.i,-n.w2,-n.h2)),n.r&&(t=n.r,o=2*t,e.beginPath(),e.rect(-n.w2+t,-n.h2+t,n.w-o,n.h-o),e.strokeStyle="rgba("+n.rc+","+n.o+")",e.stroke(),e.closePath()),e.restore()},Ln=function(n,t){var o,e,r=0;for(r=0;r<t.a.length&&(!t.s||0===r);r++)for(e=t.a[r],o=0;o<e.length;o++)e[o](t,n);Cn(t)},Nn=function(n,t){for(var o,e=t.length;e--;)o=t[e],Ln(n,o)},An=function(n,t){t.c.clearRect(0,0,t.e.width,t.e.height)},On=function et(n){var t,o,e=Math.abs(C-n);for(B++,j.forEach(An.bind(0,e)),t=q.length;t--;)Nn(e,q[t]);C=n,p&&(m||(m=window.setTimeout(function(){o=p>0,Vn(o?1:0),m=null},2e3))),B%s===0&&Q(),window.requestAnimationFrame(et)},qn=function(n,t){var o={t:n[0],x:n[1],y:n[2],w:n[3],h:n[4],r:n[5],i:n[6],dx:n[7]||0,dy:n[8]||0,hp:n[9]||1,rc:n[10]||"80,90,80",ro:0,ddx:0,ddy:0,o:1,a:[],aa:[],c:[],cc:0,co:t};return cn(o),fn(o),o},Sn=function(n){for(var t,o,e=[],r=j.length;r--;)o=j[r],t=qn(n,o),e.push(t);return e},_n=function(n,t){for(var o,e=n.length;e--;)if(o=n[e],o.co===t.co)return o},jn=function(n){p=n},Fn=function(){for(var n=j.length;n--;)if(!j[n].w)return!1;return!0},Gn=function(n){n.s=1,Mn(n,1,1),on(n,In,0,0)},Pn=function(n){var t=_n(M,n);xn(t,n)?(t.co.w=!0,n.ro+=.1):t.co.w=!1,Fn()&&(Gn(t),jn(1))},Rn=function(n){n.co.h.width=(n.hp<0?0:n.hp)+"%",n.hp<=0&&(Gn(n),jn(-1))},Un=function(n){Gn(n),jn(-1)},zn=function(){var n,t=b[1];for(playerInfo=b[0],V(b[2]),M=Sn(["p",playerInfo[0],playerInfo[1],o,o,0,A.s,0,0,100]),E=Sn(["g",t[0],t[1],o,o,0,A.h]),en(E,Pn,0,0),n=M.length;n--;)Mn(M[n],1);en(M,Rn,0,0),rn(M),rn(E)},Dn=function(n,t,o,e){for(var r,i=t.length;i--;)r=t[i],n[r]=En.bind(0,o,e)},Jn=function(){var n;O.left=Tn.bind(0,-1,0),O.up=Tn.bind(0,0,-1),O.right=Tn.bind(0,1,0),O.down=Tn.bind(0,0,1),n=F.down={},Dn(n,["65","37"],O.left,0),Dn(n,["87","38"],O.up,0),Dn(n,["68","39"],O.right,0),Dn(n,["83","40"],O.down,0),Dn(n,["82"],Un,0),n=F.up={},Dn(n,["65","37"],O.left,1),Dn(n,["87","38"],O.up,1),Dn(n,["68","39"],O.right,1),Dn(n,["83","40"],O.down,1),Dn(n,["82"],Un,1),document.onkeydown=Bn.bind(0,"down"),document.onkeyup=Bn.bind(0,"up")},Kn=function(){_=[],I.innerHTML=k.innerHTML=""},Qn=function(){return b===w[0]},Vn=function(n){var t;if(Kn(),n&&($n(),!b))return void tt();for(Qn()||nt(),jn(0),t=0;t<(b[3]||2);t++)_.push("c_"+t);_.forEach(Wn),zn(),T||(T=!0,window.requestAnimationFrame(On))},Wn=function(o,e){var r,i,c;c=document.createElement("canvas"),c.width=n,c.height=t,I.appendChild(c),r=document.createElement("div"),r.className="w",k.appendChild(r),i=document.createElement("div"),i.className="h",r.appendChild(i),j.push({i:o,h:i.style,e:c,c:c.getContext("2d"),r:e%2?-1:1})},Xn=function(n,t){A[n]=t.target,L--,L||Vn()},Yn=function(n){var t;t=new Image,t.onload=Xn.bind(0,n),t.src=n},Zn=function(){var n,t,o=[];return b?Qn()?(t=document.cookie,n=w[t],n&&n!==w[0]||(t=1),o.unshift(t)):(t=w.indexOf(b)+1,o.unshift(t)):t=0,o.unshift(w[t]),o},$n=function(){var n=Zn();n[1]&&(document.cookie=n[1]),b=n[0]},nt=function(){H.style.display="none",G.l.className=G.r.className="",G.l.innerHTML=G.r.innerHTML=""},tt=function(){G.m.innerHTML='Good job, you can join US now!<br><img src="n" width="500px" height="400px">'},ot=function(){var n=x.length,t=Math.floor(Math.random()*n),o=x[t];I=document.getElementById("c"),k=document.getElementById("h"),H=document.getElementById("i"),H.innerHTML='"'+o+'" - <a href="http://www.imdb.com/title/tt1454468/" target="_blank">Gravity</a>',G.l=document.getElementById("left"),G.m=document.getElementById("mid"),G.r=document.getElementById("right"),$n(),Jn(),v.forEach(Yn)};window.onload=ot,window.cheat=jn;
