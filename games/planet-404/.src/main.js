var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),myWidth=window.innerWidth-5,myHeight=window.innerHeight-5,midwidth=[(myWidth+5)/2]-50,midheight=[(myHeight+5)/2]-50,planetx=[(myWidth+5)/2]-75,planety=[(myHeight+5)/2]-150;function getRandomIntInclusive(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}var fail=0;let frames=0;function init(){ctx.canvas.width=myWidth,ctx.canvas.height=myHeight}window.onload=function(){init(),window.addEventListener("resize",init,!1)};const sprite=new Image;sprite.src="sprite.svg";const canvasbg=new Image;canvasbg.src="bg.svg";const state={current:0,start:0,ready:1,game:2,over:3};function event(){switch(state.current){case state.start:state.current=state.ready;break;case state.ready:state.current=state.game,planet.jump();break;case state.game:planet.jump();break;case state.over:state.current=state.ready}}function clickevent(){state.current!=state.ready&&state.current!=state.game||0==fail&&event()}function home(){state.current=state.start}document.getElementById("startgamebtn").addEventListener("click",event),document.getElementById("playagainbtn").addEventListener("click",event),document.body.onkeyup=function(t){32==t.keyCode&&0==fail&&event()},document.getElementById("canvas").addEventListener("click",clickevent);const bg={sX:0,sY:0,w:1920,h:1080,x:50,y:50,draw:function(){ctx.drawImage(canvasbg,this.sX,this.sY,this.w,this.h,this.x,this.y,this.w,this.h)}},planet={sX:0,sY:0,w:120,h:126.8,x:planetx,y:planety,frame:0,gravity:.4,movementup:10,speed:0,draw:function(){state.current==state.game&&ctx.drawImage(sprite,this.sX,this.sY,this.w,this.h,this.x,this.y,this.w,this.h)},jump:function(){this.speed=-this.movementup},update:function(){state.current==state.ready?this.y=planety:state.current==state.game&&(this.y>myHeight?(this.speed=0,this.y=myHeight,fail=0,state.current=state.over):this.y<0-.75*this.h?(this.y=0-.75*this.h,this.speed=1):(this.speed+=this.gravity,this.y+=this.speed))}},planet_initial={sX:0,sY:0,w:120,h:126.8,animation:[{x:planetx,y:planety},{x:planetx,y:planety+1},{x:planetx,y:planety+2},{x:planetx,y:planety+3},{x:planetx,y:planety+4},{x:planetx,y:planety+5},{x:planetx,y:planety+6},{x:planetx,y:planety+7},{x:planetx,y:planety+8},{x:planetx,y:planety+9},{x:planetx,y:planety+10},{x:planetx,y:planety+11},{x:planetx,y:planety+12},{x:planetx,y:planety+13},{x:planetx,y:planety+14},{x:planetx,y:planety+15},{x:planetx,y:planety+16},{x:planetx,y:planety+17},{x:planetx,y:planety+18},{x:planetx,y:planety+19},{x:planetx,y:planety+20},{x:planetx,y:planety+21},{x:planetx,y:planety+22},{x:planetx,y:planety+23},{x:planetx,y:planety+24},{x:planetx,y:planety+25},{x:planetx,y:planety+26},{x:planetx,y:planety+27},{x:planetx,y:planety+28},{x:planetx,y:planety+29},{x:planetx,y:planety+30},{x:planetx,y:planety+31},{x:planetx,y:planety+32},{x:planetx,y:planety+33},{x:planetx,y:planety+34},{x:planetx,y:planety+35},{x:planetx,y:planety+36},{x:planetx,y:planety+37},{x:planetx,y:planety+38},{x:planetx,y:planety+39},{x:planetx,y:planety+40},{x:planetx,y:planety+39},{x:planetx,y:planety+38},{x:planetx,y:planety+37},{x:planetx,y:planety+36},{x:planetx,y:planety+35},{x:planetx,y:planety+34},{x:planetx,y:planety+33},{x:planetx,y:planety+32},{x:planetx,y:planety+31},{x:planetx,y:planety+30},{x:planetx,y:planety+29},{x:planetx,y:planety+28},{x:planetx,y:planety+27},{x:planetx,y:planety+26},{x:planetx,y:planety+25},{x:planetx,y:planety+24},{x:planetx,y:planety+23},{x:planetx,y:planety+22},{x:planetx,y:planety+21},{x:planetx,y:planety+20},{x:planetx,y:planety+19},{x:planetx,y:planety+18},{x:planetx,y:planety+17},{x:planetx,y:planety+16},{x:planetx,y:planety+15},{x:planetx,y:planety+14},{x:planetx,y:planety+13},{x:planetx,y:planety+12},{x:planetx,y:planety+11},{x:planetx,y:planety+10},{x:planetx,y:planety+9},{x:planetx,y:planety+8},{x:planetx,y:planety+7},{x:planetx,y:planety+6},{x:planetx,y:planety+5},{x:planetx,y:planety+4},{x:planetx,y:planety+3},{x:planetx,y:planety+2},{x:planetx,y:planety+1},{x:planetx,y:planety}],frame:0,gravity:.3,movementup:10,speed:0,draw:function(){let t=this.animation[this.frame];state.current==state.ready&&ctx.drawImage(sprite,this.sX,this.sY,this.w,this.h,t.x,t.y,this.w,this.h)},jump:function(){this.speed=-this.movementup},update:function(){this.animation[this.frame];this.frame+=1,this.frame=this.frame%this.animation.length}},rock1={sX:130,sY:0,position:[],dimension:[],dx:5,draw:function(){for(let t=0;t<this.position.length;t++){let e=this.position[t],a=this.dimension[t];state.current==state.game&&ctx.drawImage(sprite,this.sX,this.sY,a.w,a.h,e.x,e.y,a.w,a.h)}},update:function(){if(state.current==state.ready);else if(state.current==state.game&&0==fail){frames%200==0&&(this.position.push({x:myWidth,y:(myHeight-95)*Math.random()}),this.dimension.push({w:100*getRandomIntInclusive(1,4),h:100}),this.dimension.push({w:100,h:100*getRandomIntInclusive(1,4)}));for(let t=0;t<this.position.length;t++){let e=this.position[t],a=this.dimension[t];e.x-=this.dx,e.x+a.w<=0&&(this.position.shift(),this.dimension.shift()),planet.x+planet.w>e.x&&planet.x<e.x+a.w&&planet.y+planet.h>e.y+25&&planet.y<e.y+a.h-25&&(fail=1)}}}},gas={sX:230,sY:100,position:[],w:50,h:50,dx:5,draw:function(){for(let t=0;t<this.position.length;t++){let e=this.position[t];state.current==state.game&&ctx.drawImage(sprite,this.sX,this.sY,this.w,this.h,e.x,e.y,this.w,this.h)}},update:function(){if(state.current==state.ready);else if(state.current==state.game&&0==fail){(frames+50)%200==0&&this.position.push({x:myWidth,y:(myHeight-95)*Math.random()});for(let t=0;t<this.position.length;t++){let e=this.position[t];e.x-=this.dx,planet.x+planet.w>e.x&&planet.x<e.x+this.w&&planet.y+planet.h>e.y&&planet.y<e.y+this.h&&(e.x=-100,score.value+=1,score.best=Math.max(score.value,score.best),localStorage.setItem("best",score.best),this.dx+=.25,gas2.dx+=.25,rock1.dx+=.25),e.x+this.w<=0&&this.position.shift()}}}},gas2={sX:230,sY:100,position:[],w:50,h:50,dx:5,draw:function(){for(let t=0;t<this.position.length;t++){let e=this.position[t];state.current==state.game&&ctx.drawImage(sprite,this.sX,this.sY,this.w,this.h,e.x,e.y,this.w,this.h)}},update:function(){if(state.current==state.ready);else if(state.current==state.game&&0==fail){(frames+150)%200==0&&this.position.push({x:myWidth,y:(myHeight-95)*Math.random()});for(let t=0;t<this.position.length;t++){let e=this.position[t];e.x-=this.dx,planet.x+planet.w>e.x&&planet.x<e.x+this.w&&planet.y+planet.h>e.y&&planet.y<e.y+this.h&&(e.x=-100,score.value+=1,score.best=Math.max(score.value,score.best),localStorage.setItem("best",score.best),this.dx+=.25,gas.dx+=.25,rock1.dx+=.25),e.x+this.w<=0&&this.position.shift()}}}},score={best:parseInt(localStorage.getItem("best"))||0,value:0,draw:function(){state.current!=state.ready&&state.current!=state.game||(ctx.fillStyle="#FFFFFF",ctx.font="bold 75px Montserrat",ctx.fillText(this.value,myWidth-145,100))}};function draw(){ctx.fillStyle="#221E38",ctx.fillRect(0,0,myWidth,myHeight),bg.draw(),planet_initial.draw(),state.current!=state.ready&&state.current!=state.game||(ctx.fillStyle="#221E38",ctx.fillRect(myWidth-200,0,200,150)),gas.draw(),gas2.draw(),rock1.draw(),planet.draw(),score.draw()}function update(){planet_initial.update(),planet.update(),gas.update(),gas2.update(),rock1.update(),state.current!=state.start?document.getElementById("gamestart").style.display="none":document.getElementById("gamestart").style.display="block",state.current!=state.over?document.getElementById("gameover").style.display="none":document.getElementById("gameover").style.display="block",state.current==state.start||state.current==state.over?document.getElementById("gameplay").style.display="none":(document.getElementById("gameplay").style.display="block",document.getElementById("gameplay").addEventListener("click",home)),state.current==state.over&&(document.getElementById("gameoverscore").innerHTML=score.value,document.getElementById("highscore").innerHTML=score.best,score.value==score.best&&score.value>10?document.getElementById("overtext").innerHTML="Bravo! It's a new highscore!<br> Give yourself a pat on the back and buckle up again to beat that score.":document.getElementById("overtext").innerHTML="Light Years to go before I rest! <br> Come on, get yourself up and ready to beat that score."),state.current==state.ready&&(rock1.position.length=0,rock1.dimension.length=0,gas.position.length=0,gas2.position.length=0,score.value=0,rock1.dx=5,gas.dx=5,gas2.dx=5)}function loop(){draw(),update(),frames++,requestAnimationFrame(loop)}loop();
