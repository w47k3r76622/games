(()=>{"use strict";const t={spaces:null,counter:0,turn:1,spaces1:0,spaces2:0,mode:"",level:"",player1Name:"",player2Name:""},e=40,r="#333",a=function(t,e){return Math.floor(Math.random()*(e+1-t))+t},l=function(t){document.querySelector("#msg p").innerHTML=t},c=function(e,r,n){let i=!1;if(r<7&&e<7&&(t.spaces[r][e]++,4==t.spaces[r][e]&&(u(e,r),i=!0)),"h"===n?r>0&&(t.spaces[r-1][e]++,4==t.spaces[r-1][e]&&(u(e,r-1),i=!0)):e>0&&(t.spaces[r][e-1]++,4==t.spaces[r][e-1]&&(u(e-1,r),i=!0)),0==--t.counter){let e="";return e=t.spaces1>t.spaces2?t.player1Name+" Win!!":t.player2Name+" Win!!",void l(e+"<br /><a href='javascript:location.reload()'>Start page</a>")}i?l("Click again!"):(1==t.turn?(t.turn=2,document.querySelector("#player1 .arrow").classList.remove("current"),document.querySelector("#player2 .arrow").classList.add("current")):(t.turn=1,document.querySelector("#player1 .arrow").classList.add("current"),document.querySelector("#player2 .arrow").classList.remove("current")),l("Click on the bar!")),"com"==t.mode&&2==t.turn&&function(){if("easy"==t.level){let t=document.querySelectorAll(".wall[data-clicked='0']"),e=a(0,t.length-1);return setTimeout((function(){t[e].setAttribute("data-clicked",1);let r=t[e].getAttribute("data-x"),a=t[e].getAttribute("data-y"),l=t[e].getAttribute("data-type");c(r,a,l)}),1e3),void l("Thinking...")}{for(let e=0;e<t.spaces.length;e++)for(let r=0;r<t.spaces[e].length;r++)if(3==t.spaces[e][r]){let t=document.querySelector(".wall[data-x='"+r+"'][data-y='"+e+"'][data-type='h']"),a=document.querySelector(".wall[data-x='"+(r+1)+"'][data-y='"+e+"'][data-type='v']"),l=document.querySelector(".wall[data-x='"+r+"'][data-y='"+(e+1)+"'][data-type='h']"),u=document.querySelector(".wall[data-x='"+r+"'][data-y='"+e+"'][data-type='v']");return void(0==t.getAttribute("data-clicked")?(t.setAttribute("data-clicked",1),c(r,e,"h")):0==a.getAttribute("data-clicked")?(a.setAttribute("data-clicked",1),c(r+1,e,"v")):0==l.getAttribute("data-clicked")?(l.setAttribute("data-clicked",1),c(r,e+1,"h")):0==u.getAttribute("data-clicked")&&(u.setAttribute("data-clicked",1),c(r,e,"v")))}let e=document.querySelectorAll(".wall[data-clicked='0']"),r=a(0,e.length-1);setTimeout((function(){e[r].setAttribute("data-clicked",1);let t=e[r].getAttribute("data-x"),a=e[r].getAttribute("data-y"),l=e[r].getAttribute("data-type");c(t,a,l)}),1e3),l("Thinking...")}}()};function u(e,r){1==t.turn?(document.querySelector("#x"+e+"y"+r).setAttribute("fill","lime"),document.querySelector("#player1 .spaces span").innerText=++t.spaces1):(document.querySelector("#x"+e+"y"+r).setAttribute("fill","magenta"),document.querySelector("#player2 .spaces span").innerText=++t.spaces2)}function n(e){t.mode=e,"player"==e?(t.player1Name="Player 1",t.player2Name="Player 2"):"com"==e&&(t.player1Name="Player",t.player2Name="Computer"),document.querySelector("#player1 div:not(.arrow) h2").innerHTML=t.player1Name,document.querySelector("#player2 div:not(.arrow) h2").innerHTML=t.player2Name,document.querySelector("#intro").classList.add("hide")}document.documentElement.addEventListener("touchstart",(function(t){t.touches.length>=2&&t.preventDefault()}),{passive:!1});var i=0;document.documentElement.addEventListener("touchend",(function(t){var e=(new Date).getTime();e-i<350&&t.preventDefault(),i=e}),!1),window.addEventListener("DOMContentLoaded",(a=>{!function(){let a=document.querySelector("#board"),l=document.createElementNS("http://www.w3.org/2000/svg","rect");l.setAttribute("fill","black"),l.setAttribute("width",e),l.setAttribute("height",e),l.setAttribute("rx",12),l.setAttribute("ry",12);let u=new Array(7);for(let t=0;t<7;t++)u[t]=new Array(7);for(let t=0;t<7;t++)for(let r=0;r<7;r++)u[t][r]=l.cloneNode(!0),u[t][r].setAttribute("x",4+e*r),u[t][r].setAttribute("y",4+e*t),u[t][r].setAttribute("id","x"+r+"y"+t),a.appendChild(u[t][r]);let i=document.createElementNS("http://www.w3.org/2000/svg","line");i.setAttribute("stroke",r),i.setAttribute("stroke-width",8),i.setAttribute("class","wall"),i.setAttribute("data-type","h"),i.setAttribute("data-clicked",0);let d=new Array(8);for(let t=0;t<8;t++)d[t]=Array(7);for(let r=0;r<8;r++)for(let l=0;l<7;l++)d[r][l]=i.cloneNode(!0),d[r][l].setAttribute("x1",4+e*l+4),d[r][l].setAttribute("y1",4+e*r),d[r][l].setAttribute("x2",4+e*(l+1)-4),d[r][l].setAttribute("y2",4+e*r),d[r][l].setAttribute("data-x",l),d[r][l].setAttribute("data-y",r),a.appendChild(d[r][l]),t.counter++;let o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("stroke",r),o.setAttribute("stroke-width",8),o.setAttribute("class","wall"),o.setAttribute("data-type","v"),o.setAttribute("data-clicked",0);let s=new Array(7);for(let t=0;t<7;t++)s[t]=Array(8);for(let r=0;r<7;r++)for(let l=0;l<8;l++)s[r][l]=o.cloneNode(!0),s[r][l].setAttribute("x1",4+e*l),s[r][l].setAttribute("y1",4+e*r+4),s[r][l].setAttribute("x2",4+e*l),s[r][l].setAttribute("y2",4+e*(r+1)-4),s[r][l].setAttribute("data-x",l),s[r][l].setAttribute("data-y",r),a.appendChild(s[r][l]),t.counter++;t.spaces=new Array(7);for(let e=0;e<7;e++)t.spaces[e]=Array(7).fill(0);document.querySelectorAll(".wall").forEach((e=>{e.addEventListener("click",(e=>{if("com"==t.mode&&2==t.turn)return;if(1==e.currentTarget.getAttribute("data-clicked"))return;e.currentTarget.setAttribute("data-clicked",1);let r=e.currentTarget.getAttribute("data-x"),a=e.currentTarget.getAttribute("data-y"),l=e.currentTarget.getAttribute("data-type");c(r,a,l)}))})),document.querySelector("#mode_player").addEventListener("click",(t=>{n("player")})),document.querySelector("#mode_com_hard").addEventListener("click",(e=>{n("com"),t.level="hard"}))}()}))})();