var G=Object.defineProperty;var N=(i,h,s)=>h in i?G(i,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[h]=s;var e=(i,h,s)=>(N(i,typeof h!="symbol"?h+"":h,s),s);(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const C of a.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&n(C)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();class H{constructor(h,s){e(this,"xy");e(this,"w");e(this,"h");this.xy={x:h,y:s}}collide(h,s,n,r){return h.isPointInPath(s,n,r)}}const F=i=>`rgb(${i.r},${i.g},${i.b})`,A=(i,h)=>({r:Math.floor(i.r*h),g:Math.floor(i.g*h),b:Math.floor(i.b*h)}),P=i=>i.xy.x>=t.cx&&i.xy.x<=t.cx+t.cw||i.xy.x+i.w>=t.cx&&i.xy.x+i.w<=t.cx+t.cw?i.xy.y>=t.cy&&i.xy.y<=t.cy+t.ch||i.xy.y+i.h>=t.cy&&i.xy.y+i.h<=t.cy+t.ch:!1;class f{constructor(h){e(this,"paths");e(this,"a");this.a=0,this.paths=Array(),h.forEach(s=>{this.paths.push([new Path2D(s[0]),s[1]])})}draw(){const h=t.ctx;for(let s=0;s<this.paths.length;s++)h.save(),h.fillStyle=F(this.paths[s][1]),h.fill(this.paths[s][0]),h.restore()}}const d={rc:null,fc:null,rctx:null,fctx:null,floor:null,init:()=>{d.rc=document.createElement("canvas"),d.rc.width=t.cw,d.rc.height=t.ch,d.rctx=d.rc.getContext("2d");const i=d.rctx;i.filter="url(#rock)",i.fillRect(0,0,t.cw,t.ch),d.fc=document.createElement("canvas"),d.fc.width=t.cw,d.fc.height=t.ch,d.fctx=d.fc.getContext("2d");const h=t.ctx.createImageData(t.cw,t.ch),s=new Uint32Array(h.data.buffer);for(let n=0;n<s.length;n++)s[n]=Math.floor(n/t.ch/(Math.random()*8))*Math.random()<1?4279312913+Math.random()*40:4281549892;d.fctx.putImageData(h,0,0)}},K={r:68,g:68,b:51},Y={r:27,g:60,b:26},j={x:800,y:-100};class D extends H{constructor(s,n,r){super(t.tw*s,t.th*n);e(this,"w");e(this,"h");e(this,"p");this.h=60,this.w=t.tw*r,this.p=new f([[`M0,60L10,0L${this.w-10},0L${this.w},60L0,60`,Y],[`M0,60L0,77L${this.w},77L${this.w},60L0,60Z`,K]])}get vx(){return this.xy.x-t.cx}get vy(){return this.xy.y-t.cy}draw(){const s=t.ctx;s.save(),s.filter="brightness(1.4)",s.beginPath(),s.moveTo(this.vx,this.vy+60),s.lineTo(this.vx+(j.x-this.vx)*60/(this.vy+60-j.y),this.vy),s.lineTo(this.vx+this.w-(this.vx+this.w-j.x)*60/(this.vy+60-j.y),this.vy),s.lineTo(this.vx+this.w,this.vy+60),s.lineTo(this.vx,this.vy+60),s.clip(),s.drawImage(d.fc,this.xy.x-t.cx,this.xy.y-t.cy),s.restore(),s.drawImage(d.fc,this.vx,this.vy+60,this.w,17)}update(s){console.log(s)}xin(s){return s.xy.x>=this.xy.x&&s.xy.x<=this.xy.x+this.w-s.w*.4||s.xy.x+s.w>=this.xy.x+s.w*.4&&s.xy.x+s.w<=this.xy.x+this.w}}class S extends H{constructor(s,n,r){super(s,n);e(this,"lt");e(this,"g");e(this,"sx");this.lt=0,this.g=1,this.sx=r}draw(){if(P(this)){const s=t.ctx;s.save(),s.fillStyle="rgb(200,86,40)",s.beginPath(),s.arc(this.xy.x-t.cx,this.xy.y-t.cy,5,0,6.28),s.fill(),s.restore()}}update(s){(this.lt===0||s-this.lt>120)&&(this.lt=s);const n=(s-this.lt)/1e3;this.g*=1.01,this.xy.y+=this.g*n,this.xy.x+=this.sx*n,this.xy.y>t.wh&&$(this),this.lt=s}}const Z=[{r:78,g:78,b:78},{r:192,g:181,b:154},{r:40,g:40,b:10},{r:100,g:40,b:50},{r:193,g:70,b:70},{r:0,g:0,b:0},{r:170,g:156,b:120},{r:235,g:231,b:220},{r:188,g:178,b:176},{r:194,g:167,b:161}],g={ar:.05,al:.05,tr:.15,tl:.15,sl:.2,sr:.2,foot:-.2},u={arm:(i,h)=>[["M82,87C79,75 117,79 131,80C140,81 146,87 146,94C145,101 138,105 130,104C115,103 85,101 82,87Z",i],["M33,59C42,54 47,66 81,73C91,75 99,85 96,90C94,95 85,96 76,92C61,84 23,64 33,59Z",i],["M30,49C30,49 20,42 17,41C16,40 15,43 16,44C17,45 21,49 25,51C21,48 15,45 13,44C11,44 10,46 11,47C13,49 21,54 26,56L26,57C21,54 14,49 12,49C11,48 10,51 11,51C13,53 18,57 22,60C19,57 15,55 13,54C11,53 10,55 11,56C14,58 30,68 34,66L39,59C40,57 37,54 37,54C37,52 28,39 30,49Z",h]],head:i=>{const h=A(i,.8),s={r:i.r+30,g:i.g,b:i.b};return[["M135,66C135,66 127,69 119,70C116,70 118,60 116,57C114,54 107,58 105,57C100,54 93,49 98,48C115,46 101,40 99,40C93,41 98,38 94,36C86,34 99,32 100,20C103,0 134,2 140,6C160,20 146,40 136,52C129,60 142,64 135,66Z",i],["M109,21C106,21 104,23 103,25C102,28 104,31 106,31C109,32 112,30 113,27C113,24 112,22 109,21Z",Z[4]],["M109,23C107,23 106,24 105,26C105,28 105,29 107,29C108,30 110,28 110,26C111,25 110,23 109,23Z",Z[5]],["M104,20C105,18 108,17 111,18C114,19 115,21 115,22C114,22 112,21 110,20C108,20 105,19 104,20Z",Z[5]],["M136,52C129,60 142,32 141,29C139,22 135,20 129,14C123,7 102,18 103,12C105,-8 134,2 140,6C160,20 146,40 136,52Z",A(i,.3)],["M128,33C130,32 131,29 130,26C128,22 126,23 122,25C123,27 127,24 128,27C129,29 128,31 128,33Z",h],["M124,31C125,31 127,30 127,29C127,27 126,27 122,27C123,28 126,28 125,29C125,30 124,31 124,31Z",h],["M98,42C98,41 98,40 98,40L97,40C97,40 96,41 96,41C96,41 96,44 97,44L98,44C98,44 98,42 98,42Z",Z[7]],["M98,48C98,49 98,50 98,50L97,50C97,50 96,49 96,49C96,49 96,46 97,46L98,46C98,46 98,48 98,48Z",Z[7]],["M96,39C94,40 95,41 99,41C101,41 103,42 104,43C106,44 108,46 108,45C108,43 103,41 101,40C99,39 97,38 96,39Z",s],["M97,50C95,49 96,48 100,48C102,48 104,47 105,46C106,45 109,44 108,45C107,46 104,48 102,49C100,50 98,51 97,50Z",s],["M123,32C122,33 121,34 121,35C122,36 123,36 125,34C125,34 123,35 122,34C122,34 123,33 123,32Z",h]]},core:i=>[["M137,64C147,68 156,87 149,106C136,139 147,174 143,186C141,192 113,189 98,188C81,187 101,137 107,98C108,85 114,75 120,69L137,64Z",i]],thigh:i=>[["M71,258C53,244 91,211 97,190C101,175 117,172 128,183C135,190 136,203 123,216C116,225 89,269 81,260C69,248 80,265 71,258Z",i]],shin:i=>[["M67,326C58,324 57,329 50,321C44,316 66,277 64,261C63,248 68,245 76,247C85,248 91,258 89,270C85,290 82,330 67,326Z",i]],foot:i=>[["M70,337C68,342 66,350 55,346C37,338 30,353 20,332C17,325 41,335 56,323C60,320 70,321 72,323L70,337Z",i]]},m=(i,h,s)=>{const n=t.ctx;n.save(),n.translate(i,h),n.rotate(s),n.translate(-i,-h)},E=i=>({r:Math.floor(Math.random()*i),g:Math.floor(Math.random()*i),b:Math.floor(Math.random()*i)}),J=()=>{const i=Math.random();return{r:Math.floor(i*192)+20,g:Math.floor(i*181)+20,b:Math.floor(i*124)+20}};class Q extends H{constructor(s,n,r){super(s,n);e(this,"die");e(this,"w");e(this,"h");e(this,"s");e(this,"f");e(this,"lt");e(this,"lf");e(this,"armL");e(this,"armR");e(this,"head");e(this,"core");e(this,"thighR");e(this,"thighL");e(this,"shinR");e(this,"shinL");e(this,"footR");e(this,"footL");e(this,"wp");e(this,"angs");e(this,"pl");e(this,"onCollide");this.die=0,this.w=194,this.h=350,this.xy={x:s,y:n},this.f=!1,this.wp=1,this.lt=0,this.lf=0,this.s=t.zsp,this.angs={al:0,ar:-.2,tl:0,sl:0,fl:0,tr:0,sr:0,fr:0,da:0},this.pl=r;const a=E(225),C=E(225),p=E(32),w=J();this.armL=new f(u.arm(a,w)),this.armR=new f(u.arm(a,w)),this.head=new f(u.head(w)),this.core=new f(u.core(a)),this.thighR=new f(u.thigh(C)),this.thighL=new f(u.thigh(C)),this.shinR=new f(u.shin(C)),this.shinL=new f(u.shin(C)),this.footR=new f(u.foot(p)),this.footL=new f(u.foot(p))}dp(s){s.draw()}get vx(){return this.xy.x-t.cx}get vy(){return this.xy.y-t.cy}draw(){if(P(this)){const s=t.ctx;s.save(),this.f?s.setTransform(-1,0,0,1,this.w+this.vx,this.vy):s.translate(this.vx,this.vy),m(112,350,this.angs.da),m(133,93,this.angs.ar),this.dp(this.armR),s.restore(),m(114,184,this.angs.tr-.4),this.dp(this.thighR),m(77,252,this.angs.sr),this.dp(this.shinR),m(65,326,this.angs.fr),this.dp(this.footR),s.restore(),s.restore(),s.restore(),m(114,184,this.angs.tl-.4),this.dp(this.thighL),m(77,252,this.angs.sl),this.dp(this.shinL),m(65,326,this.angs.fl),this.dp(this.footL),s.restore(),s.restore(),s.restore(),this.dp(this.head),this.dp(this.core),m(133,93,this.angs.al),this.dp(this.armL),s.restore(),s.restore(),s.restore()}}update(s){(this.lt===0||s-this.lt>120)&&(this.lt=s);const n=(s-this.lt)/1e3;if(t.gs==2)if(this.die!=0)this.angs.da<1.2&&this.angs.da>-1.2?this.angs.da+=3*n*this.die*(this.f?-1:1):V(this);else{if(s-this.lf>3e3){let a=Math.random()*400+this.s;this.f?t.fs.push(new S(this.xy.x+95,this.xy.y+42,a)):t.fs.push(new S(this.xy.x+99,this.xy.y+42,-a)),this.lf=s}this.s>0&&this.xy.x+this.w<this.pl.xy.x+this.pl.w||this.s<0&&this.xy.x>this.pl.xy.x?this.xy.x+=this.s*n*Math.random():(this.f=!this.f,this.s=-this.s);const r=t.ns/325;this.wp===1&&(this.angs.tl<g.tl?(this.angs.al+=r*n*g.al,this.angs.ar-=r*n*g.ar,this.angs.tl+=r*n*g.tl,this.angs.tr-=r*n*g.tr,this.angs.sl-=r*n*g.sl,this.angs.sr-=r*n*g.sr,this.angs.fl+=r*n*g.foot,this.angs.fr+=r*n*g.foot):this.wp=2),this.wp===2&&(this.angs.tl>-g.tl?(this.angs.al-=r*n*g.al,this.angs.ar+=r*n*g.ar,this.angs.tl-=r*n*g.tl,this.angs.tr+=r*n*g.tr,this.angs.sl+=r*n*g.sl,this.angs.sr+=r*n*g.sr,this.angs.fl-=r*n*g.foot,this.angs.fr-=r*n*g.foot):this.wp=1)}this.lt=s}}const c={st:null,hp:null,msg:null,but:null,init:()=>{c.st=document.querySelector("#st"),c.hp=document.querySelector("#hp"),c.msg=document.querySelector("#msg"),c.but=document.querySelector("#but"),c.but.addEventListener("click",()=>t.gsn())},update:()=>{c.hp.innerText="HEALTH: "+t.hp.toString(),c.st.innerText="SCORE: "+t.score.toString()},setMsg:i=>{c.msg.innerHTML=i},setBut:(i,h)=>{var s;c.but.innerText=i,h&&(s=c.but)!=null&&s.classList.contains("hid")&&c.but.classList.remove("hid")},hideBut:()=>{c.but.classList.add("hid")}},t={gs:1,score:0,hp:100,ctx:void 0,cw:1600,ch:900,ww:14e3,wh:6e3,cx:0,cy:0,th:240,tw:350,tyo:65,tr:25,tc:40,ns:1200,ls:!1,pe:200,zsp:-100,nj:null,init:()=>{for(let i=3;i<t.tr;i++)for(let h=0;h<t.tc;h++)i%3==0?h%3==0&&t.ps.push(new D(h,i,1)):(i-1)%3==0&&(h-1)%3==0&&t.ps.push(new D(h,i,2))},ps:[],zs:[],fs:[],zGen:()=>{t.ps.forEach(i=>{if(!(i.xy.x==0&&i.xy.y==(t.tr-1)*t.th)){const h=new Q(i.xy.x+Math.random()*(i.w-t.pe*2)+t.pe,i.xy.y-314,i);Math.random()>.5&&(h.f=!0,h.s=-t.zsp),t.zs.push(h)}})},reset:()=>{t.nj.xy.x=0,t.nj.xy.y=t.wh-800,t.nj.g=1,t.nj.yo=0,t.score=0,t.hp=100,c.update(),t.zs=[],t.fs=[],t.zGen(),c.hideBut(),c.setMsg("")},gsn:()=>{t.gs<3?t.gs++:t.gs=2,t.gs==2&&t.reset()},end:()=>{c.setMsg("<h2>DEATH COMES TOO SOON</h2>"),c.setBut("Play Again",!0)}},V=i=>{t.zs=t.zs.filter(h=>h!=i)},$=i=>{t.fs=t.fs.filter(h=>h!=i)},x=[{r:1,g:1,b:0},{r:202,g:190,b:160},{r:18,g:18,b:18},{r:235,g:235,b:235},{r:241,g:208,b:103},{r:65,g:62,b:51},{r:86,g:84,b:79},{r:192,g:181,b:154}],I=.2,y={ca:1.4,tl:.75,sl:.5,fl:-1.2,tr:-.8,sr:-.3,fr:.8},L=(i,h,s)=>{const n=t.ctx;n.save(),n.translate(i,h),n.rotate(s),n.translate(-i,-h)},W=-.45,O=6;class X extends H{constructor(s,n){super(s,n);e(this,"w");e(this,"h");e(this,"s");e(this,"f");e(this,"lt");e(this,"ct");e(this,"core");e(this,"thighL");e(this,"armL");e(this,"sword");e(this,"swHand");e(this,"armR");e(this,"thighR");e(this,"shinR");e(this,"shinL");e(this,"footR");e(this,"footL");e(this,"wp");e(this,"angs");e(this,"cr");e(this,"jmp");e(this,"yo");e(this,"g");e(this,"pl");e(this,"ij");e(this,"onCollide");this.w=189,this.h=449,this.xy={x:s,y:n},this.f=!1,this.wp=0,this.lt=0,this.s=0,this.g=1,this.ij=0,this.angs={ca:0,tl:0,sl:0,fl:0,tr:0,sr:0,fr:0},this.cr=0,this.yo=0,this.jmp=0,this.pl=null,this.ct=!1,this.thighL=new f([["M129,360C145,357 115,310 103,292C96,282 85,277 77,282C70,286 69,298 76,309C88,327 111,364 129,360Z",x[2]]]),this.armL=new f([["M116,188C121,179 86,175 73,173C65,172 58,176 58,181C57,186 62,191 70,192C83,194 110,198 116,188Z",x[2]],["M156,182C163,189 148,189 123,195C114,197 108,195 107.,190C106,186 111,183 118,182C129,180 148,174 156,182Z",x[2]]]),this.core=new f([["M63,159C63,159 84,168 94,161C107,150 101,133 90,116C79,99 57,111 57,111C38,118 41,153 63,159Z",x[0]],["M92,120C89,118 79,121 76,123C75,126 77,135 80,136C83,138 96,138 98,136C100,133 95,121 92,120Z",x[1]],["M86,127C87,126 88,128 89,129C89,131 88,132 87,133C86,133 85,132 85,130C84,128 85,127 86,127Z",x[0]],["M90,124C89,123 86,122 84,123C81,123 80,125 80,127C81,126 83,125 85,125C87,124 88,124 90,124Z",x[0]],["M61,168C50,172 41,191 49,209C67,257 33,317 87,302C103,297 96,241 91,201C89,189 84,178 77,172L81,156L64,152L61,168Z",x[0]]]),this.sword=new f([["M56,3L66,9C66,9 96,54 108,78C120,102 139,155 139,155L133,158C133,158 114,106 102,81C89,56 56,4 56,4Z",x[3]]]),this.swHand=new f([["M130,157L141,154L142,159L132,162L130,157Z",x[4]],["M131,163L144,158L145,161L132,165L131,163Z",x[5]],["M134,165L143,162L154,193L145,196L134,165",x[0]],["M148,178C148,178 140,181 138,182C138,182 139,184 139,184C141,184 144,183 146,182C144,183 140,184 139,185C139,185 140,188 140,187C142,187 146,186 149,184L149,185C146,185 142,187 141,188C140,189 141,191 142,191C143,190 147,189 150,188C148,189 144,190 142,191C142,191 142,193 143,193C145,193 152,191 153,189C153,189 158,184 157,182L154,178C154,177 151,177 151,177C150,176 147,175 148,178Z",x[7]]]),this.armR=new f([["M105,210C114,202 85,184 73,177C67,173 59,174 55,179C52,184 55,192 61,196C73,203 95,218 105,210Z",x[2]],["M134,173C124,170 125,182 101,193C93,196 91,206 94,210C98,215 106,214 111,209C121,200 143,177 134,174Z",x[2]],["M136,168C136,168 142,164 144,164C145,164 146,166 145,166C144,167 141,169 139,170C141,169 145,168 146,167C147,167 148,169 147,169C146,170 142,173 139,174L139,174C142,173 146,171 147,170C148,170 149,172 148,173C147,173 144,175 141,176C143,175 147,174 148,173C149,173 150,175 150,175C148,176 142,180 140,180C139,180 135,181 135,180L131,174C130,172 132,171 132,171C132,170 134,166 136,168Z",x[7]]]),this.thighR=new f([["M57,374C80,377 74,325 85,306C93,295 80,282 69,281C59,279 41,289 47,308C53,329 34,371 57,374Z",x[2]]]),this.shinR=new f([["M11,431C26,433 22,416 57,391C67,384 68,367 61,362C54,357 43,360 36,370C24,387 -4,429 11,431Z",x[2]]]),this.shinL=new f([["M151,425C137,422 144,408 120,373C113,364 116,348 123,346C130,343 139,350 143,361C149,380 164,428 151,425Z",x[2]]]),this.footL=new f([["M141,429C141,434 142,443 154,440C172,436 176,452 190,434C195,428 169,432 157,418C154,414 149,414 146,416L141,429Z",x[0]]]),this.footR=new f([["M2,435C2,440 2,449 14,447C33,444 36,460 51,443C56,437 30,440 19,425C16,421 11,420 8,422L2,435Z",x[0]]])}checkCol(s){let n=null;t.fs.forEach(r=>{s.paths.forEach(a=>{this.collide(t.ctx,a[0],r.xy.x-t.cx,r.xy.y-t.cy)&&(n=r)})}),n&&($(n),t.hp--,c.update(),t.hp<1&&t.end())}dp(s){s.draw(),this.checkCol(s)}get vx(){return this.xy.x-t.cx}get vy(){return this.xy.y-t.cy}draw(){const s=t.ctx;s.save(),this.f?s.setTransform(-1,0,0,1,this.w+this.vx,this.vy+this.yo):s.translate(this.vx,this.vy+this.yo),L(91,277,this.angs.ca/2-this.cr),L(66,186,this.angs.ca+this.cr),this.dp(this.armL),s.restore(),this.dp(this.core),L(66,186,this.angs.ca+this.cr),this.sword.draw(),this.dp(this.swHand),this.dp(this.armR),s.restore(),s.restore(),L(66,298,this.angs.tl+this.cr),this.dp(this.thighL),L(129,358,this.angs.sl-this.cr*3),this.dp(this.shinL),L(152,423,this.angs.fl+this.cr*2),this.dp(this.footL),s.restore(),s.restore(),s.restore(),L(66,298,this.angs.tr+this.cr),this.dp(this.thighR),L(58,365,this.angs.sr-this.cr*3),this.dp(this.shinR),L(12,431,this.angs.fr+this.cr*2),this.dp(this.footR),s.restore(),s.restore(),s.restore(),s.restore()}setCollider(s){this.onCollide=s}update(s){(this.lt===0||s-this.lt>120)&&(this.lt=s);const n=this.pl!=null,r=(s-this.lt)/1e3,a=(this.ij-this.g)*r;if(this.xy.y+this.yo>t.wh+this.h)t.hp=0,c.update(),t.end();else{this.cr==0&&(this.pl=null,t.ps.forEach(o=>{const v=o.xy.y-(this.xy.y+this.h+this.yo-39);o.xin(this)&&v>=0&&v+a<=0&&(this.pl=o)}));const C=t.ns/125;if(this.lt===0&&(this.lt=s),this.ct&&this.angs.ca<y.ca?this.angs.ca+=I:!this.ct&&this.angs.ca>0&&(this.angs.ca-=I,this.angs.ca<0&&(this.angs.ca=0)),(this.s>0&&this.xy.x+this.w<t.ww||this.s<0&&this.xy.x>0)&&(this.xy.x+=this.s*r,this.xy.x>t.cw/2&&this.xy.x<t.ww-t.cw/2&&(t.cx=this.xy.x-t.cw/2)),t.cy=this.xy.y-t.ch/2+this.h/2,this.s!=0&&this.jmp!=1&&(this.wp===0&&(this.wp=1),this.wp===1&&(this.angs.tl<y.tl?(this.angs.tl+=C*r*y.tl,this.angs.tr+=C*r*y.tr,this.angs.sl+=C*r*y.sl,this.angs.fl+=C*r*y.fl,this.angs.sr+=C*r*y.sr,this.angs.fr+=C*r*y.fr):this.wp=2),this.wp===2&&(this.angs.tl>-.1?(this.angs.tl-=C*r*y.tl,this.angs.tr-=C*r*y.tr,this.angs.sl-=C*r*y.sl,this.angs.fl-=C*r*y.fl,this.angs.sr-=C*r*y.sr,this.angs.fr-=C*r*y.fr):this.wp=1)),this.jmp==-1&&this.cr>W&&(this.cr-=O*r,this.yo+=440*r),this.jmp==0&&this.cr<0&&(this.cr+=O*r,this.cr>0&&(this.cr=0),this.yo-=440*r,this.yo<0&&(this.yo=0)),this.jmp==1&&(this.g*=1.4,this.yo-=a),!this.pl)this.g*=1.4,this.yo-=a;else if(!n&&this.cr==0){const o=this.pl;this.ij=0,this.xy.y=o.xy.y-this.h+39,this.yo=0,this.jmp=-1,this.g=1,this.s=0,setTimeout(()=>{this.jmp=0},200)}let p,w;this.f?(p=this.xy.x-(this.cr<0?140:114),w=this.xy.y+(this.cr<0?35:0)):(p=this.xy.x+(this.cr<0?104:54),w=this.xy.y+(this.cr<0?35:0));const q=o=>{const v=this.cr<0?225:250,k=this.cr<0?315:285;return o.xy.x>=p&&o.xy.x<=p+v||o.xy.x+o.w>=p&&o.xy.x+o.w<=p+v?o.xy.y>=w&&o.xy.y<=w+k||o.xy.y+o.h>=w&&o.xy.y+o.h<=w+k:!1};this.angs.ca!=0&&t.zs.forEach(o=>{(this.f&&this.xy.x>o.xy.x||!this.f&&this.xy.x<o.xy.x)&&o.die==0&&q(o)&&setTimeout(()=>{o.die==0&&(t.score+=1,this.xy.x<o.xy.x?o.die=1:o.die=-1,c.update())},200)}),this.lt=s}}}const b=class{constructor(){e(this,"downHandlers");e(this,"upHandlers");e(this,"addDownHandler",(h,s)=>{this.downHandlers.set(h,s)});e(this,"addUpHandler",(h,s)=>{this.upHandlers.set(h,s)});e(this,"onKeyDown",h=>{const s=this.downHandlers.get(h.key);s&&s()});e(this,"onKeyUp",h=>{const s=this.upHandlers.get(h.key);s&&s()});document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.downHandlers=new Map,this.upHandlers=new Map}static init(){return b.instance||(b.instance=new b),b.instance}};let R=b;e(R,"instance");const z={draw:()=>{const i=t.ctx;i.drawImage(d.rc,-t.cx%t.cw,-t.cy%t.ch),i.drawImage(d.rc,-t.cx%t.cw+t.cw,-t.cy%t.ch),i.drawImage(d.rc,-t.cx%t.cw,-t.cy%t.ch+t.ch),i.drawImage(d.rc,-t.cx%t.cw+t.cw,-t.cy%t.ch+t.ch)}},T=document.getElementById("canvas");T.width=1600;T.height=900;t.init();t.ctx=T.getContext("2d");const _=t.ctx;t.nj=new X(0,t.wh-800);const l=t.nj;d.init();c.init();l.setCollider(()=>{console.log("hit")});const M=R.init();M.addDownHandler(" ",()=>{l.ct=!0});M.addDownHandler("ArrowRight",()=>{l.f?l.f=!1:l.s=t.ns});M.addDownHandler("ArrowLeft",()=>{l.f?l.s=-t.ns:l.f=!0});M.addDownHandler("ArrowDown",()=>{l.jmp===0&&(l.jmp=-1)});M.addDownHandler("ArrowUp",()=>{l.jmp==0&&(l.jmp=-1,setTimeout(()=>{l.jmp=0,setTimeout(()=>{l.ij=1700,l.jmp=1,l.cr=0},50)},150))});M.addUpHandler(" ",()=>{l.ct=!1});M.addUpHandler("ArrowRight",()=>{l.s=0});M.addUpHandler("ArrowLeft",()=>{l.s=0});M.addUpHandler("ArrowDown",()=>{l.jmp==-1&&(l.jmp=0,l.s=0)});t.zGen();c.setMsg(`<h1>ZOMBIE FUNGUS</h1><p>A brain eating fungus is turning people into zombies. You are a ninja whose mission is to stop the spread of the fungus by killing the zombies.</p><p>It is virutally impossilbe to carry out this mission
without also becoming infected. To avoid spreading the fungus yourself, you have taken herbs that will prevent you from becoming a zombie by turning into poison if it comes in contact with the fungus. To avoid injury, you must evade the
orange spores of the fungus. </p><p>Move using the arrow keys on the keyboard and attack using the space bar</p>`);c.setBut("Start Game",!0);let U=!0;const B=i=>{t.gs==2&&U&&(c.update(),U=!1),_.clearRect(0,0,t.cw,t.ch),z.draw(),t.ps.forEach(h=>{h.draw()}),l.update(i),l.draw(),t.fs.forEach(h=>{h.update(i),h.draw()}),t.zs.forEach(h=>{h.update(i),h.draw()}),window.requestAnimationFrame(h=>{B(h)})};B(0);
