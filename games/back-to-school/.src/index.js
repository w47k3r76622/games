!function(){"use strict";function e(e,n){for(var r=[],t=[],a=arguments.length;a-- >2;)r.push(arguments[a]);for(;r.length;){var o=r.pop();if(o&&o.pop)for(a=o.length;a--;)r.push(o[a]);else null!=o&&!0!==o&&!1!==o&&t.push(o)}return"function"==typeof e?e(n||{},t):{nodeName:e,attributes:n||{},children:t,key:n&&n.key}}var n,r;!function(e){e[e.ADDITION=0]="ADDITION",e[e.CLR=1]="CLR",e[e.CONFIRM=2]="CONFIRM",e[e.MULTIPLY=3]="MULTIPLY",e[e.DIVISION=4]="DIVISION",e[e.DELETE=5]="DELETE",e[e.EMPTY=6]="EMPTY",e[e.NEXT=7]="NEXT",e[e.APPEND=8]="APPEND"}(n||(n={})),function(e){e[e.GUIDE=0]="GUIDE",e[e.PLAY=1]="PLAY"}(r||(r={}));var t,a=function(e){return e.screenType===r.PLAY},o=[{screenType:r.GUIDE,messages:["hi !\nmy name is numbie","this is just a simple math.","you must achieve the goal before running out of steps","pro tips : do backward thinking !"]},{level:1,screenType:r.PLAY,goal:"2",steps:2,initialValue:"0",choices:[{type:n.ADDITION,params:[1],label:"+1"}]},{level:2,screenType:r.PLAY,goal:"8",steps:3,initialValue:"0",choices:[{type:n.ADDITION,params:[3],label:"+3"},{type:n.ADDITION,params:[2],label:"+2"}]},{screenType:r.GUIDE,messages:["seems easy huh ?","let's move to another level !\n can you ?"]},{level:3,screenType:r.PLAY,goal:"9",steps:3,initialValue:"-1",choices:[{type:n.ADDITION,params:[1],label:"+1"},{type:n.ADDITION,params:[3],label:"+3"},{type:n.MULTIPLY,params:[3],label:"x3"}]},{level:4,screenType:r.PLAY,goal:"77",steps:2,initialValue:"0",choices:[{type:n.ADDITION,params:[7],label:"+7"},{type:n.MULTIPLY,params:[11],label:"x11"}]},{level:5,screenType:r.PLAY,goal:"75",steps:3,initialValue:"10",choices:[{type:n.MULTIPLY,params:[3],label:"x3"},{type:n.ADDITION,params:[-5],label:"-5"}]},{screenType:r.GUIDE,messages:["now i want to introduce you to new button.","this button remove last number"]},{level:7,screenType:r.PLAY,goal:"12",steps:3,initialValue:"12345",choices:[{type:n.DELETE,params:[],label:"<<"}]},{screenType:r.GUIDE,messages:["still easy right? ."]},{level:8,screenType:r.PLAY,goal:"4",steps:3,initialValue:"0",choices:[{type:n.ADDITION,params:[8],label:"+8"},{type:n.MULTIPLY,params:[5],label:"x5"},{type:n.DELETE,params:[],label:"<<"}]},{level:7,screenType:r.PLAY,goal:"4",steps:3,initialValue:"0",choices:[{type:n.ADDITION,params:[8],label:"+8"},{type:n.MULTIPLY,params:[5],label:"x5"},{type:n.DELETE,params:[],label:"<<"}]},{screenType:r.GUIDE,messages:["what if i add more button ?","this button append a number in the end of your number"]},{level:7,screenType:r.PLAY,goal:"45",steps:1,initialValue:"4",choices:[{type:n.APPEND,params:[5],label:"5"}]},{screenType:r.GUIDE,messages:["you've completed all the callenge !","im running out of time, i havent write problem set for following levels :(","but i hope it explains the whole mechanic"]}];!function(e){e[e.IDDLE=0]="IDDLE",e[e.PLAYING=1]="PLAYING",e[e.WIN=2]="WIN",e[e.LOSE=3]="LOSE"}(t||(t={}));var i={screens:o,screenPointer:0,guideMsgPointer:0,remainingMove:0,displayMsg:"",isAcceptInput:!0,gameState:t.IDDLE},s={restartOperator:function(){return function(e){var n=e.screens[e.screenPointer];return{gameState:t.PLAYING,displayMsg:n.initialValue,remainingMove:n.steps}}},initScreen:function(){return function(e){var n=e.screens[e.screenPointer];if(n.screenType===r.GUIDE)return{guideMsgPointer:0,displayMsg:n.messages[0]}}},loadScreen:function(e){return function(n){var a=e,o=n.screens[a];return o.screenType===r.GUIDE?{screenPointer:a,guideMsgPointer:0,displayMsg:o.messages[0],gameState:t.IDDLE}:{screenPointer:a,gameState:t.PLAYING,displayMsg:o.initialValue,remainingMove:o.steps}}},confirmOperator:function(){return function(e,n){var r=e.guideMsgPointer+1,a=e.screens[e.screenPointer].messages;if(r===a.length){var o=e.screenPointer+1,i=e.screens[o];return{screenPointer:e.screenPointer+1,displayMsg:i.initialValue,remainingMove:i.steps,guideMsgPointer:0,gameState:t.PLAYING}}return{guideMsgPointer:r,displayMsg:a[r]}}},loadNextScreen:function(){return function(e){var n=e.screenPointer+1,a=e.screens[n];return a.screenType===r.GUIDE?{screenPointer:n,guideMsgPointer:0,displayMsg:a.messages[0],gameState:t.IDDLE}:{screenPointer:n,gameState:t.PLAYING,displayMsg:a.initialValue,remainingMove:a.steps}}},addOperator:function(e){return function(n){if(n.gameState===t.PLAYING){var r=(parseInt(n.displayMsg)+e).toString(),a=n.screens[n.screenPointer],o=n.remainingMove-1;return r===a.goal?{displayMsg:r,remainingMove:o,gameState:t.WIN}:o?{displayMsg:r,remainingMove:o}:{displayMsg:r,remainingMove:o,gameState:t.LOSE}}}},multiplyOperator:function(e){return function(n){if(n.gameState===t.PLAYING){var r=(parseInt(n.displayMsg)*e).toString(),a=n.screens[n.screenPointer],o=n.remainingMove-1;return r===a.goal?{displayMsg:r,remainingMove:o,gameState:t.WIN}:o?{displayMsg:r,remainingMove:o}:{displayMsg:r,remainingMove:o,gameState:t.LOSE}}}},divisionOperator:function(e){return function(n){if(n.gameState===t.PLAYING){var r=(parseInt(n.displayMsg)/e).toString(),a=n.screens[n.screenPointer],o=n.remainingMove-1;return r===a.goal?{displayMsg:r,remainingMove:o,gameState:t.WIN}:o?{displayMsg:r,remainingMove:o}:{displayMsg:r,remainingMove:o,gameState:t.LOSE}}}},deleteOperator:function(){return function(e){if(e.gameState===t.PLAYING){var n=e.displayMsg,r=n.substring(0,n.length-1),a=""===r?"0":r,o=e.screens[e.screenPointer],i=e.remainingMove-1;return a===o.goal?{displayMsg:a,remainingMove:i,gameState:t.WIN}:i?{displayMsg:a,remainingMove:i}:{displayMsg:a,remainingMove:i,gameState:t.LOSE}}}},appendOperator:function(e){return function(n){if(n.gameState===t.PLAYING){var r=""+n.displayMsg+e,a=n.screens[n.screenPointer],o=n.remainingMove-1;return r===a.goal?{displayMsg:r,remainingMove:o,gameState:t.WIN}:o?{displayMsg:r,remainingMove:o}:{displayMsg:r,remainingMove:o,gameState:t.LOSE}}}}};var l=function(e,n){return e(n={exports:{}},n.exports),n.exports}((function(e){!function(){var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=r.apply(null,a);i&&e.push(i)}else if("object"===o)for(var s in a)n.call(a,s)&&a[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r}()})),p=0,c=document.head.appendChild(document.createElement("style")).sheet;function u(e,n){return n+"{"+e+"}"}var d,g=function(e,n){var r={};return(n=n||{}).returnObject?{style:t,css:a}:t;function t(n){return function(r){return function(t,o){o=(t=t||{}).children||o;var i="function"==typeof r?r(t):r;return t.class=[a(i),t.class].filter(Boolean).join(" "),e(n,t,o)}}}function a(e){var n=function e(n,r){var t=[""];for(var a in r=r||0,n){var o=n[a];a=a.replace(/[A-Z]/g,"-$&").toLowerCase(),o.sub||Array.isArray(o)?(o=Array.isArray(o)?o:[o]).forEach((function(e){return t[0]+=a+":"+e+";"})):(a=a.replace(/&/g,""),t.push(u(e(o,!/^@/.test(a)).join(""),a)))}return r||(t[0]=u(t[0],"")),t}(e),t=n.join("");return r[t]||(r[t]=function(e,n){var r="p"+p++,t=n+r;return e.forEach((function(e){if(/^@/.test(e)){var n=e.indexOf("{")+1;e=e.slice(0,n)+t+e.slice(n)}else e=t+e;c.insertRule(e,c.cssRules.length)})),r}(n,"."))}}(e,{returnObject:!0}),f=(g.style,g.css),x=f({flex:"1",padding:"48px"}),m=f({backgroundColor:"#373c40",borderRadius:"25px",height:"100%",padding:"16px"}),v=f({display:"flex",justifyContent:"space-between",marginBottom:"12px",padding:"4px"}),y=f({fontSize:"28px",padding:"8px",color:"white",fontFamily:"sans-serif"}),h=f({boxShadow:"inset 0px 4px 0px 0px #4c2c29",borderRadius:"4px",border:"2px solid #000",backgroundColor:"#643933",width:"120px"}),b=f({borderRight:"2px solid #70453f",width:"28px",height:"100%",display:"inline-block"}),I=f({boxShadow:"inset 0px 10px 0px 0px #8a9984",backgroundColor:"#a6b8a2",borderRadius:"12px",height:"300px",margin:"8px",padding:"8px"}),M=f({height:"75px",display:"flex",marginTop:"8px"}),L=f({borderRadius:"8px",flex:"1",margin:"10px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"sans-serif",fontSize:"16px"}),P=f({color:"#3d3d3d",fontWeight:"bolder",fontSize:"20px",borderRadius:"20px"}),S=f({opacity:"0"}),N=f({backgroundColor:"#3d3d3d",color:"#a6b8a2"}),D=f({color:"#3d3d3d",height:"200px",fontFamily:"digits",position:"relative"}),E=f({color:"#a1b29f",display:"flex",fontSize:"125px",justifyContent:"center",alignItems:"center"}),T=f({color:"#3d3d3d",zIndex:"2",position:"absolute",top:"0px"}),O=f({fontSize:"125px",flexDirection:"row-reverse"}),A=f({fontSize:"40px"}),w=function(){return function(n,r){var o,i,s,p=n.screens,c=n.screenPointer,u=n.remainingMove,d=n.displayMsg,g=n.gameState,f=p[c],w=a(f),C=f.level,Y=w?"MOVE "+u:"",k=w?"GOAL : "+f.goal:"";return e("div",{class:x},e("div",{class:m},e("div",{class:v},e("div",{class:y},"Level : ",C),e("div",{class:h},e("div",{class:b}),e("div",{class:b}),e("div",{class:b}))),e("div",{class:I},e("div",{class:M},e("div",{class:l(L,P)},function(e){switch(e){case t.WIN:return"~(˘▾˘~)";case t.LOSE:return"(╥﹏╥)";case t.IDDLE:return"o(￣ˇ￣)o";default:return"（⌒▽⌒）"}}(g)),e("div",{class:l((o={},o[L]=!0,o[N]=!0,o[S]=!w,o))},Y),e("div",{class:l((i={},i[L]=!0,i[N]=!0,i[S]=!w,i))},k)),e("div",{class:D},e("div",{class:E},"888888"),e("div",{class:l((s={},s[T]=!0,s[O]=w,s[A]=!w,s))},d)))))}},C=function(){return(C=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},Y=f({flex:"1",paddingTop:"32px",paddingLeft:"48px",paddingRight:"48px",paddingBottom:"32px",display:"flex",flexDirection:"column"}),k=f({flex:"1",display:"flex"}),R=f({position:"relative",top:"0px",marginTop:"0px",marginBottom:"10px",height:"100%",border:"0px",cursor:"pointer",width:"100%",color:"#fff",fontFamily:"sans-serif",fontSize:"40px",borderRadius:"8px",opacity:"0.9","&:active":{boxShadow:"none",top:"0px",marginBottom:"0px"},"&:hover":{opacity:1}}),G=f(((d={flex:"1",margin:"8px",display:"flex",backgroundColor:"#b6b0a4",justifyContent:"center",alignItems:"center",borderRadius:"8px",boxShadow:"inset 0px 8px 0px 0px #cdc5ba"})["&:active "+R]={boxShadow:"none",top:"0px",marginBottom:"0px"},d)),U=(f({backgroundColor:"#45494c",boxShadow:"0px 10px 0px 0px #1a1a1c"}),f({backgroundColor:"#c62e2d",boxShadow:"0px 10px 0px 0px #962223"}),f({backgroundColor:"#8a7bd8",boxShadow:"0px 10px 0px 0px #463a86"}),f({backgroundColor:"#ec6c15",boxShadow:"0px 10px 0px 0px #b54900"}),f({fontSize:"24px",backgroundColor:"#ec6c15",boxShadow:"0px 10px 0px 0px #b54900"}),f({backgroundColor:"#24a19d",boxShadow:"0px 10px 0px 0px #1a7671"}),f({backgroundColor:"#48ad2f",boxShadow:"0px 10px 0px 0px #368323"}),f({position:"relative",top:"0px",marginTop:"0px",marginBottom:"10px",height:"100%",border:"0px",cursor:"pointer",width:"100%",color:"#fff",fontFamily:"sans-serif",fontSize:"40px",borderRadius:"8px",opacity:"0.9","&:active":{boxShadow:"none",top:"0px",marginBottom:"0px"},"&:hover":{opacity:1}})),V=f({backgroundColor:"#45494c",boxShadow:"0px 10px 0px 0px #1a1a1c"}),j=f({backgroundColor:"#c62e2d",boxShadow:"0px 10px 0px 0px #962223"}),z=f({backgroundColor:"#8a7bd8",boxShadow:"0px 10px 0px 0px #463a86"}),B=f({backgroundColor:"#ec6c15",boxShadow:"0px 10px 0px 0px #b54900"}),F=(f({fontSize:"24px",backgroundColor:"#ec6c15",boxShadow:"0px 10px 0px 0px #b54900"}),f({backgroundColor:"#24a19d",boxShadow:"0px 10px 0px 0px #1a7671"}),f({backgroundColor:"#48ad2f",boxShadow:"0px 10px 0px 0px #368323"})),W=function(r){var t=r.type,a=r.params,o=r.label;return function(r,i){var s,p=l(((s={})[U]=!0,s[V]=[n.ADDITION,n.MULTIPLY,n.DIVISION].includes(t),s[j]=t===n.CLR,s[F]=[n.CONFIRM,n.NEXT].includes(t),s[B]=[n.DELETE].includes(t),s[z]=[n.APPEND].includes(t),s)),c=function(e){switch(e){case n.ADDITION:return"addOperator";case n.MULTIPLY:return"multiplyOperator";case n.DIVISION:return"divisionOperator";case n.DELETE:return"deleteOperator";case n.CONFIRM:return"confirmOperator";case n.CLR:return"restartOperator";case n.NEXT:return"loadNextScreen";case n.APPEND:return"appendOperator";default:return"addOperator"}}(t);return e("button",{class:p,onclick:function(){console.log("test clicked"),i[c].apply(i,a)}},o)}},X=function(){return function(r,o){for(var i=r.screens,s=r.screenPointer,l=r.gameState,p=i[s],c=a(p),u=(i.length,p.choices||[]),d=u.slice(),g=u.length;g<8;g++)d.push({type:n.EMPTY,params:[],label:""});d.push(function(e){return c?e===t.WIN?{type:n.NEXT,params:[],label:"Ok"}:{type:n.CLR,params:[],label:"CLR"}:{type:n.CONFIRM,params:[],label:"Ok"}}(l));var f=[];for(g=0;g<3;g++){for(var x=[],m=0;m<3;m++){var v=d[3*g+m];x.push(v)}f.push(x)}return e("div",{class:Y},f.map((function(r){return e("div",{class:k},r.map((function(r){return e("div",{class:G},r.type!==n.EMPTY&&e(W,C({},r)))})))})))}},Z=f({backgroundColor:"#3a405a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),$=f({width:"576px",height:"900px",backgroundColor:"#e4dccf",display:"flex",flexDirection:"column",borderRadius:"20px"});!function(e,n,r,t){var a,o=[].map,i=t&&t.children[0]||null,s=i&&function e(n){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:o.call(n.childNodes,(function(n){return 3===n.nodeType?n.nodeValue:e(n)}))}}(i),l=[],p=!0,c=x(e),u=function e(n,r,t){for(var a in t)"function"==typeof t[a]?function(e,a){t[e]=function(e){var o=a(e);return"function"==typeof o&&(o=o(v(n,c),t)),o&&o!==(r=v(n,c))&&!o.then&&f(c=m(n,x(r,o),c)),o}}(a,t[a]):e(n.concat(a),r[a]=x(r[a]),t[a]=x(t[a]));return t}([],c,x(n));return f(),u;function d(e){return"function"==typeof e?d(e(c,u)):null!=e?e:""}function g(){a=!a;var e=d(r);for(t&&!a&&(i=function e(n,r,t,a,o){if(a===t);else if(null==t||t.nodeName!==a.nodeName){var i=function e(n,r){var t="string"==typeof n||"number"==typeof n?document.createTextNode(n):(r=r||"svg"===n.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",n.nodeName):document.createElement(n.nodeName);var a=n.attributes;if(a){a.oncreate&&l.push((function(){a.oncreate(t)}));for(var o=0;o<n.children.length;o++)t.appendChild(e(n.children[o]=d(n.children[o]),r));for(var i in a)b(t,i,a[i],null,r)}return t}(a,o);n.insertBefore(i,r),null!=t&&I(n,r,t),r=i}else if(null==t.nodeName)r.nodeValue=a;else{!function(e,n,r,t){for(var a in x(n,r))r[a]!==("value"===a||"checked"===a?e[a]:n[a])&&b(e,a,r[a],n[a],t);var o=p?r.oncreate:r.onupdate;o&&l.push((function(){o(e,n)}))}(r,t.attributes,a.attributes,o=o||"svg"===a.nodeName);for(var s={},c={},u=[],g=t.children,f=a.children,m=0;m<g.length;m++){u[m]=r.childNodes[m],null!=(h=y(g[m]))&&(s[h]=[u[m],g[m]])}m=0;for(var v=0;v<f.length;){var h=y(g[m]),M=y(f[v]=d(f[v]));if(c[h])m++;else if(null==M||M!==y(g[m+1]))if(null==M||p)null==h&&(e(r,u[m],g[m],f[v],o),v++),m++;else{var L=s[M]||[];h===M?(e(r,L[0],L[1],f[v],o),m++):L[0]?e(r,r.insertBefore(L[0],u[m]),L[1],f[v],o):e(r,u[m],null,f[v],o),c[M]=f[v],v++}else null==h&&I(r,u[m],g[m]),m++}for(;m<g.length;)null==y(g[m])&&I(r,u[m],g[m]),m++;for(var m in s)c[m]||I(r,s[m][0],s[m][1])}return r}(t,i,s,s=e)),p=!1;l.length;)l.pop()()}function f(){a||(a=!0,setTimeout(g))}function x(e,n){var r={};for(var t in e)r[t]=e[t];for(var t in n)r[t]=n[t];return r}function m(e,n,r){var t={};return e.length?(t[e[0]]=e.length>1?m(e.slice(1),n,r[e[0]]):n,x(r,t)):n}function v(e,n){for(var r=0;r<e.length;)n=n[e[r++]];return n}function y(e){return e?e.key:null}function h(e){return e.currentTarget.events[e.type](e)}function b(e,n,r,t,a){if("key"===n);else if("style"===n)if("string"==typeof r)e.style.cssText=r;else for(var o in"string"==typeof t&&(t=e.style.cssText=""),x(t,r)){var i=null==r||null==r[o]?"":r[o];"-"===o[0]?e.style.setProperty(o,i):e.style[o]=i}else"o"===n[0]&&"n"===n[1]?(n=n.slice(2),e.events?t||(t=e.events[n]):e.events={},e.events[n]=r,r?t||e.addEventListener(n,h):e.removeEventListener(n,h)):n in e&&"list"!==n&&"type"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!a?e[n]=null==r?"":r:null!=r&&!1!==r&&e.setAttribute(n,r),null!=r&&!1!==r||e.removeAttribute(n)}function I(e,n,r){function t(){e.removeChild(function e(n,r){var t=r.attributes;if(t){for(var a=0;a<r.children.length;a++)e(n.childNodes[a],r.children[a]);t.ondestroy&&t.ondestroy(n)}return n}(n,r))}var a=r.attributes&&r.attributes.onremove;a?a(n,t):t()}}(i,s,(function(n,r){return e("div",{class:Z,oncreate:function(){return r.loadScreen(0)}},e("div",{class:$},e(w,null),e(X,null)))}),document.body)}();
