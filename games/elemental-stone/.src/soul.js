function game(){var p=document.getElementById("main");p.style.display="none";var aD=document.getElementById("sceen"),J=aD.getContext("2d");aD.style.display="block";aD.width=640;aD.height=640;var N=document.getElementById("endGame");var r=document.getElementById("gameOver");var aA=document.documentElement.offsetHeight;var Y=window.innerHeight;var au=aA-Y;window.scrollTo(0,au);var w=[[2,2,2,2,2,2,2,1,1,1,1,1,4,4,4,4,4,4,1,4],[1,2,2,1,1,1,2,2,2,2,2,2,2,1,1,1,1,4,4,4],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1],[1,2,3,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,3,1],[1,2,3,1,3,3,3,3,3,3,14,3,3,3,3,3,3,4,3,1],[2,2,3,1,3,1,1,1,1,1,4,4,4,4,4,4,3,4,3,1],[2,1,3,1,3,1,3,3,3,3,3,3,3,3,3,4,3,4,3,1],[2,2,3,1,3,1,3,1,4,4,4,4,4,4,3,4,3,4,3,1],[1,2,14,2,14,2,3,1,3,3,3,14,3,4,3,4,3,4,14,2],[2,2,3,2,3,1,3,1,3,4,1,4,3,4,3,4,3,1,3,2],[2,2,3,2,3,1,3,4,3,4,3,4,3,4,3,4,3,1,3,2],[2,1,3,2,3,1,3,1,3,4,3,4,3,4,3,4,3,1,3,2],[2,1,3,2,3,1,3,1,3,3,3,4,3,4,3,1,3,1,3,2],[2,1,3,2,3,1,3,1,4,4,4,4,3,4,3,2,14,2,14,2],[2,1,3,2,14,2,3,3,3,3,3,3,14,4,3,2,3,2,3,1],[2,1,3,2,3,2,2,1,2,2,2,2,2,1,3,2,3,2,3,1],[1,1,3,1,3,3,14,3,14,3,3,3,3,3,3,2,3,2,3,1],[1,1,3,1,2,1,2,1,2,2,2,2,2,2,2,2,3,2,3,2],[1,1,3,3,3,3,14,3,3,3,3,3,3,3,3,3,3,2,3,2],[1,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,3,2]];var P=[[6,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,7],[0,10,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,10,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0],[11,11,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,11,11,11,9,0,0,0,0,0,9,10,0,0,0,0,0,0,9,11],[11,11,0,11,0,0,0,0,0,10,0,0,13,0,0,0,0,0,0,11],[11,11,0,10,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,11],[11,0,9,10,0,0,0,0,0,0,9,0,0,0,0,12,0,0,0,11],[11,0,0,10,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,11],[11,0,0,15,0,0,0,0,0,0,0,0,9,0,0,11,9,15,9,11],[11,0,0,11,9,11,0,0,0,9,0,0,11,0,9,11,0,0,0,0],[11,0,0,11,0,11,11,0,11,11,15,11,11,0,0,11,0,0,0,0],[0,0,9,0,0,0,11,0,11,0,0,0,0,0,9,11,0,0,0,0],[0,0,0,0,11,0,0,0,11,11,10,10,11,15,11,11,0,0,15,11],[0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,9,0,0,11],[5,0,0,0,11,0,11,11,11,10,11,15,10,11,11,11,11,0,8,11]];var G=0;var y=1;var ao=2;var e=3;var Z=4;var l=5;var ag=6;var c=7;var ab=8;var aE=9;var u=10;var n=11;var ai=12;var R=13;var am=14;var F=15;var f=16;var az=32;var O=null;var j=w.length;var an=w[0].length;var aa=8;var U=[];var ac=[];var at=[];var V=[];var b=[];var x=[];var g=[];var A=[];var C=[];var s=[];var K=[];var M=[];var av=[];var ap=0;var ak=new Image();ak.addEventListener("load",t,false);ak.src="image.png";av.push(ak);var k={sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32,width:32,height:32,x:0,y:0,vx:0,vy:0,visible:true,centerX:function(){return this.x+(this.width/2)},centerY:function(){return this.y+(this.height/2)},halfWidth:function(){return this.width/2},halfHeight:function(){return this.height/2},};var aC=0;var af=1;var z=2;var aq=aC;var al=38;var aj=40;var i=39;var a=37;var ad=88;var L=67;var T=90;var X=false;var ax=false;var o=false;var m=false;var ah=false;var B=false;var I=false;window.addEventListener("keydown",function(aF){aF.preventDefault();switch(aF.keyCode){case al:X=true;break;case aj:ax=true;break;case a:m=true;break;case i:o=true;break;case ad:ah=true;break;case L:B=true;break;case T:I=true;break}},false);window.addEventListener("keyup",function(aF){switch(aF.keyCode){case al:X=false;break;case aj:ax=false;break;case a:m=false;break;case i:o=false;break;case ad:ah=false;break;case L:B=false;break;case T:I=false;break}},false);(function(){var aG=0;var aH=["ms","moz","webkit","o"];for(var aF=0;aF<aH.length&&!window.requestAnimationFrame;++aF){window.requestAnimationFrame=window[aH[aF]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[aH[aF]+"CancelAnimationFrame"];window[aH[aF]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(aM,aJ){var aI=new Date().getTime();var aK=Math.max(0,16-(aI-aG));var aL=window.setTimeout(function(){aM(aI+aK)},aK);aG=aI+aK;return aL}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(aI){clearTimeout(aI)}}}());D();function D(){requestAnimationFrame(D);switch(aq){case aC:break;case af:ae(w);ae(P);aq=z;break;case z:aB();break}Q()}function t(){ap++;if(ap===av.length){ak.removeEventListener("load",t,false);aq=af}}function ae(aL){for(var aM=0;aM<j;aM++){for(var aG=0;aG<an;aG++){var aK=aL[aM][aG];if(aK!==G){var aF=Math.floor((aK-1)%aa)*az;var aN=Math.floor((aK-1)/aa)*az;switch(aK){case y:var aH=Object.create(k);aH.sourceX=aF;aH.sourceY=aN;aH.x=aG*az;aH.y=aM*az;U.push(aH);g.push(aH);V.push(aH);b.push(aH);x.push(aH);break;case ao:var aI=Object.create(k);aI.sourceX=aF;aI.sourceY=aN;aI.x=aG*az;aI.y=aM*az;U.push(aI);x.push(aI);break;case e:var aJ=Object.create(k);aJ.sourceX=aF;aJ.sourceY=aN;aJ.x=aG*az;aJ.y=aM*az;U.push(aJ);V.push(aJ);b.push(aJ);break;case Z:lava=Object.create(k);lava.sourceX=aF;lava.sourceY=aN;lava.x=aG*az;lava.y=aM*az;U.push(lava);at.push(lava);x.push(lava);V.push(lava);break;case F:rock=Object.create(k);rock.sourceX=aF;rock.sourceY=aN;rock.x=aG*az;rock.y=aM*az;U.push(rock);A.push(rock);x.push(rock);x.push(rock);b.push(rock);V.push(rock);break;case u:magoNegro=Object.create(k);magoNegro.sourceX=aF;magoNegro.sourceY=aN;magoNegro.x=aG*az;magoNegro.y=aM*az;U.push(magoNegro);C.push(magoNegro);at.push(magoNegro);V.push(magoNegro);x.push(magoNegro);break;case am:bridge=Object.create(k);bridge.sourceX=aF;bridge.sourceY=aN;bridge.x=aG*az;bridge.y=aM*az;U.push(bridge);break;case l:herowind=Object.create(k);herowind.sourceX=aF;herowind.sourceY=aN;herowind.x=aG*az;herowind.y=aM*az;U.push(herowind);ac.push(herowind);break;case ag:heroearth=Object.create(k);heroearth.sourceX=aF;heroearth.sourceY=aN;heroearth.x=aG*az;heroearth.y=aM*az;U.push(heroearth);ac.push(heroearth);break;case c:herofire=Object.create(k);herofire.sourceX=aF;herofire.sourceY=aN;herofire.x=aG*az;herofire.y=aM*az;U.push(herofire);ac.push(herofire);break;case ab:herowater=Object.create(k);herowater.sourceX=aF;herowater.sourceY=aN;herowater.x=aG*az;herowater.y=aM*az;U.push(herowater);ac.push(herowater);break;case n:cactus=Object.create(k);cactus.sourceX=aF;cactus.sourceY=aN;cactus.x=aG*az;cactus.y=aM*az;U.push(cactus);s.push(cactus);at.push(cactus);b.push(cactus);x.push(cactus);break;case f:stone=Object.create(k);stone.sourceX=aF;stone.sourceY=aN;stone.x=aG*az;stone.y=aM*az;U.push(stone);M.push(stone);break;case ai:boton=Object.create(k);boton.sourceX=aF;boton.sourceY=aN;boton.x=aG*az;boton.y=aM*az;U.push(boton);break;case R:wall=Object.create(k);wall.sourceX=aF;wall.sourceY=aN;wall.x=aG*az;wall.y=aM*az;U.push(wall);x.push(wall);b.push(wall);V.push(wall);break;case aE:spider=Object.create(k);spider.sourceX=aF;spider.sourceY=aN;spider.x=aG*az;spider.y=aM*az;U.push(spider);K.push(spider);at.push(spider);b.push(spider);V.push(spider);break}}}}}function aB(){aw();var aF=herowind;if(ah){var aF=herofire}if(B){var aF=herowater}if(I){var aF=heroearth}if(X&&!ax){aF.vy=-6;if(aF.y<=320){window.scroll(aF.x,0)}if(aF.y>=320){window.scroll(aF.x,au)}}if(ax&&!X){aF.vy=6;if(aF.y<=320){window.scroll(aF.x,0)}if(aF.y>=320){window.scroll(aF.x,au)}}if(m&&!o){aF.vx=-6;if(aF.y<=320){window.scroll(aF.x,0)}if(aF.y>=320){window.scroll(aF.x,au)}}if(o&&!m){aF.vx=6;if(aF.y<=320){window.scroll(aF.x,0)}if(aF.y>=320){window.scroll(aF.x,au)}}if(!X&&!ax){aF.vy=0}if(!m&&!o){aF.vx=0}aF.x=Math.max(0,Math.min(aF.x+aF.vx,aD.width-aF.width));aF.y=Math.max(0,Math.min(aF.y+aF.vy,aD.height-aF.height));for(var aG=0;aG<at.length;aG++){ay(herowind,at[aG])}for(var aG=0;aG<V.length;aG++){ay(heroearth,V[aG])}for(var aG=0;aG<b.length;aG++){ay(herofire,b[aG])}for(var aG=0;aG<x.length;aG++){ay(herowater,x[aG])}for(var aG=0;aG<C.length;aG++){H(herofire,C[aG])}for(var aG=0;aG<s.length;aG++){H(heroearth,s[aG])}for(var aG=0;aG<K.length;aG++){H(herowater,K[aG])}for(var aG=0;aG<A.length;aG++){S(herowind,A[aG])}q(herofire,boton);d(herowater,stone)}var E=90;var v=60;var W=2;function aw(){var aF=document.getElementById("countdown");var aG=document.getElementById("timer");aG.style.display="block";aF.style.display="block";aF.innerHTML=W+":"+v;if(E>0){--E}if(E===0){E=60;v--}else{if(v===0){v=60;W--}}if(W===-1){E=false;aG.style.display="none";aF.style.display="none";h()}}function ay(aH,aF){var aK=aH.centerX()-aF.centerX();var aJ=aH.centerY()-aF.centerY();var aL=aH.halfWidth()+aF.halfWidth();var aM=aH.halfHeight()+aF.halfHeight();if(Math.abs(aK)<aL){if(Math.abs(aJ)<aM){var aI=aL-Math.abs(aK);var aG=aM-Math.abs(aJ);if(aI>=aG){if(aJ>0){aH.y=aH.y+aG}else{aH.y=aH.y-aG}}else{if(aK>0){aH.x=aH.x+aI}else{aH.x=aH.x-aI}}}}}function S(aL,aJ){var aI=aL.centerX()-aJ.centerX();var aH=aL.centerY()-aJ.centerY();var aK=aL.halfWidth()+aJ.halfWidth();var aM=aL.halfHeight()+aJ.halfHeight();if(Math.abs(aI)<aK){if(Math.abs(aH)<aM){var aG=aK-Math.abs(aI);var aF=aM-Math.abs(aH);if(aG>=aF){if(aH>0){aJ.y=aJ.y-6}else{aJ.y=aJ.y+6}}else{if(aI>0){aJ.x=aJ.x-6}else{aJ.x=aJ.x+6}}}}}function H(aG,aF){if(aG.x<=(aF.x+16)&&aF.x<=(aG.x+16)&&aG.y<=(aF.y+16)&&aF.y<=(aG.y+16)){aF.x=aF.x-1000}}function q(aG,aF){if(aG.x<=(aF.x+16)&&aF.x<=(aG.x+16)&&aG.y<=(aF.y+16)&&aF.y<=(aG.y+16)){wall.x=wall.x-1000;aF.visible=false}}function d(aG,aF){if(aG.x<=(aF.x+16)&&aF.x<=(aG.x+16)&&aG.y<=(aF.y+16)&&aF.y<=(aG.y+16)){ar()}}function ar(){aD.style.display="none";N.style.display="block";E=false}function h(){aD.style.display="none";r.style.display="block"}function Q(){J.clearRect(0,0,aD.width,aD.height);if(U.length!==0){for(var aG=0;aG<U.length;aG++){var aF=U[aG];if(aF.visible){J.drawImage(ak,aF.sourceX,aF.sourceY,aF.sourceWidth,aF.sourceHeight,Math.floor(aF.x),Math.floor(aF.y),aF.width,aF.height)}}}}};
