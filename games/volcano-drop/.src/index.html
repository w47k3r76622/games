<!doctype html><meta charset=utf-8><head><title>Volcano Drop</title><style>body { background-color: black; color: white; }
canvas, div { display: block; position: relative; margin-left: auto; margin-right: auto; max-width: 100%; width: 1024px; }
canvas { aspect-ratio: 4 / 3; }
div { margin-top: 5px; }
</style></head></head><body><body><canvas width="1024" height="768"></canvas><div><label><input type="checkbox" id="music" checked/> Music</label><div><script>const aa=[204,204,204,0,8,145,255,118,8,119,43,21,7,7,7,211,157,118,96,0,156,4,4,4,119,119,119,204,23,0,73,40,23,255,255,255],ba={v:[-0,-7.59,0,-0,-6.9,-.69,-0,-6.21,0,-0,-6.9,.69,-3.8,-6.57,0,-3.45,-5.98,-.69,-3.11,-5.38,0,-3.45,-5.98,.69,-6.57,-3.79,0,-5.98,-3.45,-.69,-5.38,-3.1,0,-5.98,-3.45,.69,-7.59,-0,0,-6.9,-0,-.69,-6.21,-0,0,-6.9,0,.69,-6.57,3.79,-0,-5.98,3.45,-.69,-5.38,3.1,-0,-5.98,3.45,.69,-3.8,6.57,-0,-3.45,5.98,-.69,-3.11,5.38,-0,-3.45,5.98,.69,-0,7.59,-0,-0,6.9,-.69,-0,6.21,-0,-0,6.9,
.69,3.79,6.57,-0,3.45,5.98,-.69,3.1,5.38,-0,3.45,5.98,.69,6.57,3.79,-0,5.98,3.45,-.69,5.38,3.1,-0,5.98,3.45,.69,7.59,-0,0,6.9,-0,-.69,6.21,-0,0,6.9,-0,.69,6.57,-3.8,0,5.98,-3.45,-.69,5.38,-3.11,0,5.98,-3.45,.69,3.79,-6.57,0,3.45,-5.98,-.69,3.11,-5.38,0,3.45,-5.98,.69],C:[4,1,0,1,6,2,6,3,2,3,4,0,8,5,4,5,10,6,10,7,6,7,8,4,8,13,9,13,10,9,14,11,10,11,12,8,12,17,13,17,14,13,18,15,14,19,12,15,16,21,17,17,22,18,22,19,18,23,16,19,24,21,20,25,22,21,22,27,23,23,24,20,28,25,24,25,30,26,30,27,26,27,28,24,32,
29,28,29,34,30,34,31,30,31,32,28,36,33,32,37,34,33,34,39,35,35,36,32,40,37,36,37,42,38,42,39,38,43,36,39,40,45,41,41,46,42,46,43,42,47,40,43,44,1,45,1,46,45,46,3,47,3,44,47,4,5,1,1,5,6,6,7,3,3,7,4,8,9,5,5,9,10,10,11,7,7,11,8,8,12,13,13,14,10,14,15,11,11,15,12,12,16,17,17,18,14,18,19,15,19,16,12,16,20,21,17,21,22,22,23,19,23,20,16,24,25,21,25,26,22,22,26,27,23,27,24,28,29,25,25,29,30,30,31,27,27,31,28,32,33,29,29,33,34,34,35,31,31,35,32,36,37,33,37,38,34,34,38,39,35,39,36,40,41,37,37,41,42,42,43,39,
43,40,36,40,44,45,41,45,46,46,47,43,47,44,40,44,0,1,1,2,46,46,2,3,3,0,44],F:[1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0]},ca={v:[.48,-1.59,-.18,.48,-1.59,.18,-.48,-1.59,-.09,-.48,-1.59,.18,.58,1.74,-.21,.58,1.74,.21,-.58,1.74,-.21,-.58,1.74,.21,-0,-1.59,-.17,-0,-1.59,.26,0,1.74,-.31,0,1.74,.31,-.32,2.42,.15,-.32,2.42,-.15,0,2.42,-.27,0,2.42,.27,.32,2.42,
.15,.32,2.42,-.15,0,2.96,-.14,-1.14,-3.02,.21,-0,-3.25,.21,1.14,-3.02,.21,2.5,-.45,.08,2.41,1.22,.16,.5,-.7,.08,.5,1.42,.08,4.39,.27,.08,4.4,1.48,.08,5.67,1.79,.08,4.23,-.57,.14,.97,-1.4,-.01,1.51,1.02,.28,1.75,-.74,.08,2,-1.22,.18,5.14,.59,-.13,-.58,.34,-.45,-.58,-.48,.21,.58,.34,-.45,.58,-.48,.21,-0,-.48,.31,0,.34,-.54,3.41,1.35,.08,3.34,-.3,.08,3,-.67,-.07,-2.41,-.45,.08,-2.33,1.22,.11,-.45,-.7,.08,-.41,1.42,.08,-4.3,.27,.08,-4.31,1.39,.01,-5.58,1.7,.08,-4.4,-.57,.23,-1.12,-1.4,.16,-1.43,1.25,
.23,-1.66,-.74,.08,-1.81,-1.22,-.03,-5.25,.59,-.04,-3.32,1.35,.08,-3.25,-.3,.08,-2.74,-.67,.13],C:[2,20,19,35,7,6,4,16,5,38,0,37,10,37,40,39,1,38,3,39,36,35,10,40,11,12,7,3,2,19,12,15,18,13,12,18,10,13,14,10,17,4,11,16,15,6,12,13,0,1,21,31,24,32,16,17,18,14,13,18,17,14,18,15,16,18,41,26,27,1,20,21,3,20,9,0,20,8,27,26,28,42,22,43,32,24,30,22,32,33,22,31,32,28,26,34,35,8,2,36,11,7,39,5,11,40,0,8,5,37,4,2,36,35,26,42,29,23,42,41,46,53,54,57,48,58,49,50,48,58,59,44,54,52,46,44,55,54,44,53,45,50,56,48,
48,51,58,45,58,44,2,8,20,35,36,7,4,17,16,38,1,0,10,4,37,39,9,1,3,9,39,35,6,10,11,15,12,10,6,13,10,14,17,11,5,16,6,7,12,31,25,24,41,42,26,1,9,20,3,19,20,0,21,20,22,23,31,35,40,8,36,39,11,39,38,5,40,37,0,5,38,37,2,3,36,23,22,42,46,47,53,57,49,48,44,54,53,45,57,58],F:[5,3,4,3,3,3,3,3,4,5,2,2,4,4,4,4,5,3,2,2,2,2,3,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,3,4,3,3,3,3,3,4,4,4,4,4,3,3,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3]},da={v:[16.25,-3.54,-.01,-16.25,-3.54,-.01,16.25,1.67,-.3,16.25,1.67,.3,-16.25,
1.67,-.3,-16.25,1.67,.3,-16.25,2.29,.14,-16.25,2.29,-.14,16.25,2.29,-.14,16.25,2.29,.14,2.24,-2.69,-3.71,2.06,-2.69,-.14,-2.13,-2.69,-3.71,-1.96,-2.69,-.14,2.24,1.36,-3.5,1.82,2.08,-.14,-2.13,1.36,-3.5,-1.71,2.08,-.14,-1.36,-2.69,-5.07,1.47,-2.69,-5.07,-1.36,2.08,-5.07,1.47,2.08,-5.07,-1.46,3.32,-1.39,-1.96,4.24,-3.34,2.06,4.24,-3.34,1.57,3.32,-1.39,1.47,4.59,-4.67,-1.36,4.59,-4.67,-1.1,6.25,-1.62,-1.48,6.36,-3.15,1.59,6.36,-3.15,1.21,6.25,-1.62,1.13,6.36,-4.19,-1.03,6.36,-4.19,-.61,-19.59,-3.36,
.72,-19.59,-3.36,.72,-19.59,-2.23,-.61,-19.59,-2.23,-.41,-19.59,-3.62,.52,-19.59,-3.62,-.54,7.93,-1.67,-.56,7.93,-2.73,.67,7.93,-2.73,.65,7.93,-1.67,5.45,-19.29,-2.6,-5.45,-19.29,-2.6,5.45,-16.62,-3.14,5.45,-16.62,-2.53,-5.45,-16.62,-3.14,-5.45,-16.62,-2.53,-5.45,-16.01,-2.84,5.45,-16.01,-2.84,0,-19.29,-2.6,0,-14.08,-3.14,0,-14.08,-2.53,0,-13.47,-2.84,.01,-19.37,2.58,-.3,-16.7,2.58,.31,-16.7,2.58,.01,-16.09,2.58,.01,-19.37,-2.53,-.3,-14.17,-1.9,.31,-14.17,-1.9,.01,-13.55,-1.9,1.9,-.81,-3.73,1.39,
-.44,-4.12,1.34,-1.18,-4.05,4.19,-1.41,-7.06,-1.18,-.83,-3.65,-.67,-1.2,-4.05,-.62,-.46,-3.97,-3.47,-1.41,-6.98,.06,2.97,-4.42,-.24,2.46,-4.67,.27,2.46,-4.67,.03,4.86,-7.12,4.43,-2.48,-7.68,4.59,-2.95,-6.77,3.84,-2.48,-7.68,3.68,-2.95,-6.77,4.43,-.87,-7.68,4.59,-.66,-6.77,3.84,-.87,-7.68,3.68,-.66,-6.77,-3.11,-2.48,-7.68,-2.95,-2.95,-6.77,-3.7,-2.48,-7.68,-3.87,-2.95,-6.77,-3.11,-.87,-7.68,-2.95,-.66,-6.77,-3.7,-.87,-7.68,-3.87,-.66,-6.77,.29,4.17,-7.77,.45,3.59,-6.91,-.3,4.17,-7.77,-.46,3.59,-6.91,
.29,5.76,-7.57,.45,5.86,-6.64,-.3,5.76,-7.57,-.46,5.86,-6.64,2.19,-2.65,-1.47,-2,-2.65,-1.47,-1.92,.97,-1.82,2.03,.97,-1.82],C:[1,5,4,2,9,3,2,3,0,4,0,1,1,3,5,6,8,7,4,8,2,3,6,5,5,7,4,13,36,11,13,102,101,21,24,14,103,11,100,14,19,21,13,15,17,20,19,18,16,18,12,12,38,34,15,22,17,26,33,32,27,29,33,20,23,27,21,27,26,32,41,42,33,29,41,25,28,22,23,28,29,26,30,24,24,31,25,36,34,35,35,38,39,10,39,19,37,13,101,100,11,36,19,38,18,40,42,41,31,40,28,28,41,29,30,32,42,31,42,43,45,49,48,47,46,51,46,47,44,52,46,44,
52,47,54,53,50,55,54,51,55,48,49,50,54,50,49,53,51,46,49,52,54,48,52,45,56,58,57,61,59,63,57,58,59,62,59,58,58,60,62,57,60,56,64,67,65,65,67,66,66,67,64,68,71,69,69,71,70,70,71,68,72,75,73,73,75,74,74,75,72,76,79,78,78,83,82,83,80,82,81,76,80,82,76,78,79,81,83,84,87,86,86,91,90,91,88,90,89,84,88,90,84,86,91,85,89,92,95,94,94,99,98,99,96,98,97,92,96,98,92,94,99,93,97,103,10,14,12,102,16,17,22,102,25,15,103,14,25,103,16,22,23,12,37,101,36,10,100,2,8,9,4,2,0,1,0,3,6,9,8,4,7,8,3,9,6,5,6,7,13,37,36,13,
17,102,21,26,24,103,15,11,14,10,19,13,11,15,20,21,19,16,20,18,12,18,38,15,25,22,26,27,33,27,23,29,20,16,23,21,20,27,32,33,41,25,31,28,23,22,28,26,32,30,24,30,31,36,37,34,35,34,38,10,35,39,19,39,38,40,43,42,31,43,40,28,40,41,31,30,42,52,53,46,52,44,47,53,48,50,54,47,51,54,55,50,53,55,51,49,45,52,48,53,52,61,57,59,62,63,59,58,56,60,57,61,60,76,77,79,78,79,83,83,81,80,81,77,76,82,80,76,79,77,81,84,85,87,86,87,91,91,89,88,89,85,84,90,88,84,91,87,85,92,93,95,94,95,99,99,97,96,97,93,92,98,96,92,99,95,93,
103,100,10,12,101,102,14,24,25,16,102,22,12,34,37,36,35,10],F:[6,6,6,8,8,8,8,8,6,8,7,8,7,8,8,8,8,8,7,8,8,8,8,8,8,6,6,8,6,8,8,8,8,8,8,6,6,6,8,6,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,6,8,8,7,7,8,8,8,8,6,8,8,8,8,8,6,8,7,8,7,8,8,8,8,8,7,8,8,8,8,8,6,6,8,6,8,8,8,8,6,6,6,6,8,6,8,8,8,8,6,8,8,8,6,6,8,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,8]},ea={v:[-.62,3.23,-.2,-.62,1.75,-.73,.68,3.23,-.2,.68,1.75,-.73,-.63,2.8,1.01,-.63,1.32,.48,.67,2.8,1.01,.67,1.32,
.48,.98,-1.78,.5,.98,1.38,.5,-1,-1.78,.5,-1,1.38,.5,.98,-1.78,-.8,.98,1.38,-.8,-1,-1.78,-.8,-1,1.38,-.8,.43,.88,.96,.43,-1.25,.96,.61,.88,.86,.61,-1.25,.86,.61,.88,.66,.61,-1.25,.66,.43,.88,.56,.43,-1.25,.56,.26,.88,.66,.26,-1.25,.66,.26,.88,.86,.26,-1.25,.86,-.07,.83,.94,-.07,-1.29,.94,.13,.83,.92,.13,-1.29,.92,.21,.83,.74,.21,-1.29,.74,.1,.83,.58,.1,-1.29,.58,-.1,.83,.59,-.1,-1.29,.59,-.19,.83,.77,-.19,-1.29,.77,-.62,.92,.71,-.62,-1.21,.71,-.56,.92,.9,-.56,-1.21,.9,-.37,.92,.95,-.37,-1.21,.95,-.23,
.92,.81,-.23,-1.21,.81,-.28,.92,.62,-.28,-1.21,.62,-.48,.92,.57,-.48,-1.21,.57,-.4,.74,1.08,-.4,-1.39,1.08,-.33,.74,1.26,-.33,-1.39,1.26,-.13,.74,1.29,-.13,-1.39,1.29,-.01,.74,1.13,-.01,-1.39,1.13,-.08,.74,.94,-.08,-1.39,.94,-.28,.74,.92,-.28,-1.39,.92,.13,.81,1.26,.13,-1.31,1.26,.33,.81,1.29,.33,-1.31,1.29,.46,.81,1.13,.46,-1.31,1.13,.39,.81,.95,.39,-1.31,.95,.19,.81,.92,.19,-1.31,.92,.06,.81,1.07,.06,-1.31,1.07,.54,-.66,1.19,.82,-.65,.52,.54,-.04,1.19,.82,-.02,.52,.24,-.65,1.41,.24,-.02,1.41,-.34,
-.65,1.33,-.34,-.02,1.33,-.57,-.65,1.1,-.57,-.02,1.1,-.78,-.68,.51,-.78,-.06,.51],C:[0,3,1,0,6,2,5,0,1,1,7,5,7,4,5,2,7,3,9,10,8,11,14,10,14,13,12,12,9,8,14,8,10,11,13,15,17,18,16,19,20,18,21,22,20,23,24,22,25,23,21,25,26,24,27,16,26,18,22,26,29,30,28,31,32,30,33,34,32,35,36,34,35,33,29,37,38,36,39,28,38,36,38,30,41,42,40,43,44,42,45,46,44,47,48,46,47,45,41,49,50,48,51,40,50,42,46,50,53,54,52,55,56,54,57,58,56,59,60,58,53,61,57,61,62,60,63,52,62,58,60,62,65,66,64,67,68,66,69,70,68,71,72,70,73,71,69,
73,74,72,75,64,74,72,74,66,77,78,76,78,80,76,81,82,80,83,84,82,84,87,86,0,2,3,0,4,6,5,4,0,1,3,7,7,6,4,2,6,7,9,11,10,11,15,14,14,15,13,12,13,9,14,12,8,11,9,13,17,19,18,19,21,20,21,23,22,23,25,24,21,19,25,19,17,25,17,27,25,25,27,26,27,17,16,26,16,18,18,20,22,22,24,26,29,31,30,31,33,32,33,35,34,35,37,36,33,31,29,29,39,37,37,35,29,37,39,38,39,29,28,38,28,30,30,32,34,34,36,30,41,43,42,43,45,44,45,47,46,47,49,48,45,43,41,41,51,49,49,47,41,49,51,50,51,41,40,50,40,42,42,44,46,46,48,50,53,55,54,55,57,56,57,
59,58,59,61,60,57,55,53,53,63,61,61,59,57,61,63,62,63,53,52,62,52,54,54,56,62,56,58,62,65,67,66,67,69,68,69,71,70,71,73,72,69,67,65,65,75,69,75,73,69,73,75,74,75,65,64,74,64,66,66,68,70,70,72,66,77,79,78,78,81,80,81,83,82,83,85,84,84,85,87],F:[0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,
9,9,9,10,10,10,10,10]},fa={v:[.13,-.47,-.43,.13,-.47,.43,.13,.47,-.43,.13,.47,.43,3.21,-.47,-.43,3.21,-.47,.43,3.21,.47,-.43,3.21,.47,.43,-.03,.31,-.28,-.03,-.31,-.28,-.03,-.31,.28,-.03,.31,.28],C:[2,11,3,3,6,2,7,4,6,5,0,4,6,0,2,3,5,7,10,8,9,0,10,9,3,10,1,2,9,8,2,8,11,3,7,6,7,5,4,5,1,0,6,4,0,3,1,5,10,11,8,0,1,10,3,11,10,2,0,9],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},ha={v:[.13,-.53,-.43,.13,-.53,.43,.13,.53,-.43,.13,.53,.43,4.16,-.53,-.43,4.16,-.53,.43,4.16,.53,-.43,4.16,.53,.43,-.03,.34,-.28,
-.03,-.34,-.28,-.03,-.34,.28,-.03,.34,.28],C:[2,11,3,3,6,2,7,4,6,5,0,4,6,0,2,3,5,7,10,8,9,0,10,9,3,10,1,0,8,2,2,8,11,3,7,6,7,5,4,5,1,0,6,4,0,3,1,5,10,11,8,0,1,10,3,11,10,0,9,8],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},ia={v:[0,0,-2,1.45,-1.05,-.89,-.55,-1.7,-.89,-1.79,0,-.89,-.55,1.7,-.89,1.45,1.05,-.89,.55,-1.7,.89,-1.45,-1.05,.89,-1.45,1.05,.89,.55,1.7,.89,1.79,0,.89,0,0,2,-.32,-1,-1.7,.85,-.62,-1.7,.53,-1.62,-1.05,1.7,0,-1.05,.85,.62,-1.7,-1.05,0,-1.7,-1.38,-1,-1.05,-.32,1,-1.7,-1.38,1,-1.05,
.53,1.62,-1.05,1.9,-.62,0,1.9,.62,0,0,-2,0,1.18,-1.62,0,-1.9,-.62,0,-1.18,-1.62,0,-1.18,1.62,0,-1.9,.62,0,1.18,1.62,0,0,2,0,1.38,-1,1.05,-.53,-1.62,1.05,-1.7,0,1.05,-.53,1.62,1.05,1.38,1,1.05,.32,-1,1.7,1.05,0,1.7,-.85,-.62,1.7,-.85,.62,1.7,.32,1,1.7],C:[0,13,12,1,13,15,0,12,17,0,17,19,0,19,16,1,15,22,2,14,24,3,18,26,4,20,28,5,21,30,1,22,25,2,24,27,3,26,29,4,28,31,5,30,23,6,32,37,7,33,39,8,34,40,9,35,41,10,36,38,38,41,11,38,36,41,36,9,41,41,40,11,41,35,40,35,8,40,40,39,11,40,34,39,34,7,39,39,37,11,
39,33,37,33,6,37,37,38,11,37,32,38,32,10,38,23,36,10,23,30,36,30,9,36,31,35,9,31,28,35,28,8,35,29,34,8,29,26,34,26,7,34,27,33,7,27,24,33,24,6,33,25,32,6,25,22,32,22,10,32,30,31,9,30,21,31,21,4,31,28,29,8,28,20,29,20,3,29,26,27,7,26,18,27,18,2,27,24,25,6,24,14,25,14,1,25,22,23,10,22,15,23,15,5,23,16,21,5,16,19,21,19,4,21,19,20,4,19,17,20,17,3,20,17,18,3,17,12,18,12,2,18,15,16,5,15,13,16,13,0,16,12,14,2,12,13,14,13,1,14],F:[11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11]},ja=aa.length/3;aa.push(255,255,255);const k=Float32Array;function m(b,a,c,e,d){for(var g=0;g<d;++g)c[e+g]=b[a+g]}function p(){return Math.random()}function t(b){return(2*p()-1)*b}
function na(b,a){var c=[0,0,0],e=[];let d=2*Math.PI/a;for(var g=0;g<a;++g){const f=d*g,h=b(f);c.push(h*Math.cos(f),h*Math.sin(f),0)}for(g=0;g<a;++g)e.push(0,g+1,(g+1)%a+1);return{v:c,C:e,F:Array(a).fill(ja)}}function u(b,a,c){return b<a?a:b>c?c:b}function oa(b,a,c){for(var e=0;e<b.length;++e)c[e]=b[e]+a[e]}function v(b,a,c){for(var e=0;e<b.length;++e)c[e]=b[e]-a[e]}function pa(b,a){for(var c=0;c<a.length;++c)a[c]*=b;return a}function qa(b,a,c,e){for(var d=0;d<a.length;++d)e[d]=(1-b)*a[d]+b*c[d]}
function ra(b,a){var c=[];v(b,a,c);c[2]=0;return Math.sqrt(x(c,c))}function va(b,a,c){c[0]=b[1]*a[2]-b[2]*a[1];c[1]=b[2]*a[0]-b[0]*a[2];c[2]=b[0]*a[1]-b[1]*a[0]}function x(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}function y(b){return pa(1/Math.sqrt(x(b,b)),b)}function A(b){b.fill(0);b[0]=1;b[5]=1;b[10]=1;b[15]=1;return b}function B(){return A(new k(16))}function C(b){return[b[3],b[7],b[11]]}function D(b,a){a[3]=b[0];a[7]=b[1];a[11]=b[2]}
function H(b,a,c){const e=Math.cos(b);b=Math.sin(b);2==a?(c[0]=e,c[4]=b,c[1]=-b,c[5]=e):1==a?(c[0]=e,c[8]=b,c[2]=-b,c[10]=e):0==a&&(c[5]=e,c[9]=b,c[6]=-b,c[10]=e)}function wa(b,a,c){c.fill(0);for(let e=0;4>e;++e)for(let d=0;4>d;++d)c[e]+=b[4*e+d]*a[d]}function xa(b,a,c){for(var e=0;4>e;++e)for(var d=0;4>d;++d)for(var g=d+4*e,f=c[g]=0;4>f;++f)c[g]+=b[f+4*e]*a[d+4*f]}
function ya(b,a,c){if(0!=b.length){b.sort((f,h)=>h[3]-f[3]);var e=-1,d=null,g=new k(4);b.forEach(([f,h,l])=>{var q;if(!(q=e!=l)){a:{for(q=0;q<h.length;++q)if(.005<Math.abs(h[q]-d[q])){q=!1;break a}q=!0}q=!q}if(q){-1!=e&&I.fill();e=l;d=h;m(aa,3*l,g,0,3);pa(Math.min(1,c?Math.max(.45,x(h,c)):1),g);g[3]=1;if(a)for(h=0;h<a.length;++h)g[h]*=a[h];I.fillStyle="rgba("+g.join(",")+")";I.beginPath()}I.moveTo(f[0],f[1]);for(h=3;h<f.length;h+=3)I.lineTo(f[h],f[h+1]);I.closePath()});I.fill()}}
const za=document.querySelector("canvas"),I=za.getContext("2d",{alpha:!1,antialias:!1});setInterval(Aa,16);const L={};window.addEventListener("keydown",b=>L[b.keyCode]=!0);window.addEventListener("keyup",b=>{L[b.keyCode]=!1;81==b.keyCode&&Da()});var Ea=B(),Fa,Ga=B();const Ha=Math.tan(.3925);Ga[0]=1/(4/3*Ha);Ga[5]=1/Ha;Ga[10]=-21/19;Ga[11]=-40/19;Ga[14]=-1;Fa=Ga;var Ia=y([0,-.5,1]),Ja=3600,M=null,N,O,P,Q,Ka,R,La;
function S(b,a){this.type=b;this.transform=B();this.ma=B();a&&(this.position=a,D(a,this.transform));this.s=[];this.ia=[];this.va=A(B());this.Ca=A(B())}
function Ma(){S.call(this,2,[0,0,0]);this.model=ea;this.g=0;this.pa=!1;this.o=this.oa=this.h=this.i=0;this.T=100;this.s=[{j:[0,0,0],l:1},{j:[0,2,0],l:1}];this.R=()=>{T(new Na(this,fa,[1,.6,.05],[1,.1,.2]));T(new Na(this,fa,[-1,.6,.05],[-1,.1,.2]));T(new Na(this,ha,[.5,-1.75,.05],[.25,-1,.3]));T(new Na(this,ha,[-.5,-1.75,.05],[-.25,-1,.3]));this.Da=T(new Oa(this));M=this};this.U=0;this.m=[1,1,1];this.na=0;this.Da=null;this.ha=b=>{this.T=Math.max(this.T-b,0);this.U=1;0>=this.T&&Pa(3)};this.Ga=()=>{this.rotate=
this.transform.slice();const b=A(B());H(t(.08),0,b);const a=A(B());H(t(.08),1,a);this.wa=B();xa(b,a,this.wa)};this.Fa=()=>{const b=.15*(1-.5*this.g);this.i*=.25;this.h*=.25;this.g=L[16]?u(this.g+.02,0,1):.95*this.g;L[40]?(this.position[1]-=b,this.h=.2):L[38]&&(this.position[1]+=b,this.h=-.2);L[37]?(this.position[0]-=b,this.i=.2):L[39]&&(this.position[0]+=b,this.i=-.2);this.oa+=u(this.i-this.oa,-.02,.02);this.o+=u(this.h-this.o,-.02,.02);H(this.oa,1,this.va);H(this.o+this.g*-Math.PI/2,0,this.Ca);xa(this.va,
this.Ca,this.transform)};this.ta=()=>{this.na=900};this.update=()=>{this.na=Math.max(0,this.na-1);const b=0<this.na;this.Da.model=b?ca:null;this.pa?N=u(N+.005,0,(b?.75:.5)+.25*this.g):N=0;O-=N;this.U=u(this.U-.05,0,1);qa(this.U,[1,1,1],[1,0,0],this.m);0!=P&&0<Q&&(Q=Math.max(Q-16,0),0>=Q&&(T(new Qa(this.position,()=>this.type=0)),Pa(3)));if(3==P)this.rotate||this.Ga(),xa(this.wa,this.rotate,this.transform),this.rotate=this.transform.slice();else if(1==P||2==P)this.Fa(),5>=O&&(Pa(3),this.type=0);D(this.position,
this.transform)}}
function Na(b,a,c,e){S.call(this,128,c);this.model=a;this.o=[c[0],c[1],c[2],1];this.h=y(e);this.i=Array(4);this.g=this.h.slice();this.s=[{j:[1,0,0],l:.4}];this.target=b;this.ha=d=>{this.g[2]+=.5;this.target?.ha(d)};this.ta=()=>{this.target?.ta()};this.update=()=>{if(this.target){this.m=this.target.m;wa(this.target.transform,this.o,this.position);wa(this.target.transform,[this.h[0],this.h[1],this.h[2],0],this.i);oa(this.g,[0,0,.1*N*(1-this.g[2])],this.g);y(this.g);var d=this.g,g=this.i,f=this.g,h=
Math.acos(u(x(d,g),-1,1)),l=Math.sin(h);1E-4<Math.abs(l)?(d=d.slice(),pa(Math.sin(.96*h)/l,d),g=g.slice(),pa(Math.sin(.04*h)/l,g),oa(d,g,f)):m(d,0,f,0,3);f=this.target.transform;g=[f[2],f[6],f[10]];f=this.g;h=this.transform;A(h);l=[];va(g,f,l);y(l);g=[];va(f,l,g);for(d=0;3>d;++d)h[4*d]=f[d],h[4*d+1]=l[d],h[4*d+2]=g[d];D(this.position,this.transform)}else this.type=0}}function Ra(b,a,c){const e=t(Math.PI);T(new Sa([b+90*Math.cos(e),a+90*Math.sin(e),c]))}
function Ta(){S.call(this,8);Q=Ka?13E3:25E3;this.T=.5;this.i=this.h=0;this.U=Ja+200;this.o=800*p();this.g=[];for(var b=0;5>b;++b)this.g.push((.05+.8*p())*Ja);this.g.sort((a,c)=>a-c);this.R=()=>{const a=V.find(c=>64==c.type);T(new Ua(C(a.transform)))};this.update=()=>{if(0>-250+O)this.type=0;else{var a=1-O/Ja,c=Math.sin(a*Math.PI);a=Math.sin(3*a*Math.PI);this.T=.5*(c*c+a*a);100<this.U-O&&(c=36*this.T,this.h=u(this.h+t(c),-600,600),this.i=u(this.i+t(c),-600,600),T(new Va([this.h,this.i,-250])),this.U=
O);--this.o;0>=this.o&&(c=M)&&(Ra(c.position[0],c.position[1],-175),this.o=1E3+400*p());c=this.g.length;0<c&&O- -250<this.g[c-1]&&(T(new Xa([this.h,this.i,-375])),this.g.pop())}}}
function Ya(){S.call(this,8);Q=12E4;this.i=[[250,()=>R="It's time to blow up the volcano!"],[250,()=>R="The fuse is burning. Deliver the TNT before it explodes!"],[250,()=>R="Use arrow keys to move. Hold shift to dive."],[250,()=>R="Diving is faster, but limits mobility."],[300,()=>{R="Fly through rings to earn more time.";T(new Va([0,0,-250]))}],[300,()=>{T(new Va([10,0,-250]))}],[400,()=>{R=null;T(new Va([0,0,-250]))}],[450,()=>{R="Catch the bird to get a powerup!";T(new Xa([0,0,-250],!0))}],[500,
()=>{R="Birds fly away from you as you approach.";T(new Xa([0,0,-250]))}],[500,()=>{R="Avoid hitting planes. They hurt :(";const b=M;Ra(b.position[0],b.position[1],-250)}],[600,()=>{R="Watch out for flares from the volcano!";T(new Ua([0,0,0]));T(new Va([-10,0,-250]))}],[600,()=>{R="Land in the volcano! You may have to leave rings behind.";T(new Va([30,50,-250]))}]];this.g=0;this.h=-1;this.update=()=>{--this.g;if(0>=this.g)if(++this.h,this.h<this.i.length){const b=this.i[this.h];this.g=b[0];b[1]?.()}else this.type=
0}}
function Va(b){S.call(this,4);this.ga=a=>{this.type=1;if(4.5>ra(C(a.transform),C(this.transform))){Za($a[0]);this.i*=2;this.g=100;Q+=Ka?2800:3200;var c=this.update;this.update=()=>{this.m=[0,1,0,this.g/100];c.call(this);--this.g;0>this.g&&(this.type=0)}}else this.g=10,this.update=()=>{this.m=[1,1,1,this.g/10];--this.g;0>this.g&&(this.type=0)},a.ha(15),Za($a[2]),N-=.5};this.s=[{j:[0,0,0],l:7}];this.model=ba;D(b,this.transform);this.h=0;this.i=.025;this.update=()=>{this.h+=this.i;H(this.h,2,this.transform);this.transform[11]+=
N;0<this.transform[11]&&(this.type=0)}}const ab=na(()=>.5,5);ab.v[2]=6;function bb(b,a){S.call(this,256,b);this.s=[{j:[0,0,0],l:1}];this.model=ab;this.m=[1,.1,0,1];this.g=0;this.direction=a;this.Aa=!0;this.ga=c=>{c.ha?.(15);this.type=0;Za($a[3])};this.update=()=>{this.g+=.1;H(this.g,2,this.transform);this.transform[3]+=2*this.direction[0];this.transform[7]+=2*this.direction[1];this.transform[11]+=2*this.direction[2];0<this.transform[11]&&(this.type=0)}}
function Ua(b){S.call(this,512,b);this.i=0;this.g=5;this.h=0;this.R=()=>this.target=M;this.o=()=>{if(this.target){var a=C(this.transform);a[0]+=t(6);a[1]+=t(6);var c=C(this.target.transform);c[0]+=t(8);c[1]+=t(8);var e=Array(3);v(c,a,e);var d=(Math.max(-250,a[2])-a[2])/e[2];c=e.map(g=>g);pa(d,c);100<c[2]&&1600>c[2]&&(d=Array(3),oa(a,c,d),T(new bb(d,y(e))))}};this.update=()=>{0<this.h&&--this.h;0<this.i&&--this.i;0<this.g&&0==this.h&&(--this.g,this.o(),0==this.g?this.i=250:this.h=24);0==this.g&&0==
this.i&&(this.g=5);this.transform[11]=-O}}
function Sa(b){S.call(this,1024,b);this.model=da;this.R=()=>{this.target=M;this.h=Math.atan2(this.target.transform[7]-this.transform[7],this.target.transform[3]-this.transform[3]);this.update()};this.ga=a=>{this.type=1;Za($a[4]);a.ha(Ka?75:50);N-=.5;this.g=50;this.update=()=>{--this.g;this.m=[1,1,1,this.g/50];0>this.g&&(this.type=0)}};this.s=[{j:[0,0,-3],l:3},{j:[0,5,-2],l:2.5},{j:[0,-5,-2],l:2.5},{j:[0,-14,-2],l:2.5},{j:[0,-16,-2],l:4},{j:[5.5,0,-1],l:2},{j:[9.5,0,-1],l:2},{j:[-5.5,0,-1],l:2},{j:[-9.5,
0,-1],l:2}];this.speed=.3+.1*p();this.h=t(Math.PI);this.update=()=>{H(this.h-Math.PI/2,2,this.transform);this.transform[3]+=Math.cos(this.h)*this.speed;this.transform[7]+=Math.sin(this.h)*this.speed;this.transform[11]+=N;0<this.transform[11]&&(this.type=0)}}function Oa(b){var a=[0,0,1.3];S.call(this,1,a);this.model=ca;const c=B();D(a,c);this.target=b;this.update=()=>{this.target?xa(this.target.transform,c,this.transform):this.type=0}}
function Xa(b,a){S.call(this,16,b);this.R=()=>{a||(this.target=M)};this.ga=c=>{c.ha(5);c.ta?.();Q+=Ka?7500:8E3;this.type=0;Za($a[1])};this.s=[{j:[0,1.5,0],l:1.5},{j:[0,-1.5,0],l:1.5},{j:[-2.5,-0,0],l:1.5},{j:[2.5,-0,0],l:1.5}];this.model=ca;this.h=()=>{this.i=(.5<p()?1:-1)*Math.PI/400};this.h();this.g=2*p()*Math.PI;this.update=()=>{if(this.target){var c=[];v(C(this.target.transform),C(this.transform),c);c=Math.sqrt(x(c,c))<(Ka?43:35)?.25:.05}else c=.05;this.speed=c;.01>p()&&this.h();this.g+=this.i;
H(this.g-Math.PI/2,2,this.transform);this.transform[3]+=Math.cos(this.g)*this.speed;this.transform[7]+=Math.sin(this.g)*this.speed;this.transform[11]+=N;0<this.transform[11]&&(this.type=0)}}
function cb(b){var a=.15+.1*p();S.call(this,1,b);this.model=ia;this.size=0;this.g=45;b=[[222,145,11],[245,110,0],[245,110,0],[222,62,11],[222,62,11],[255,21,13]];this.m=[...b[Math.floor(Math.random()*b.length)].map(c=>c/255),1];this.update=()=>{this.size+=a;this.m[3]=.2+.8*u(this.g/45,0,1);A(this.transform);D(this.position,this.transform);for(var c=this.size,e=this.transform,d=0;3>d;++d)for(var g=0;3>g;++g)e[4*d+g]*=c;--this.g;0>this.g&&(this.type=0)}}
function Qa(b,a,c){S.call(this,1,b);this.g=0;this.h=c||6;this.i=()=>{for(var e=0;3>e;++e){var d=Array(3).fill(0).map(()=>t(3));oa(d,b,d);T(new cb(d))}Za($a[5],t(.75)+1)};this.update=()=>{0<this.h?(--this.g,0>=this.g&&(this.i(),--this.h,this.g=20)):(a?.(),this.type=0)}}
function db(){S.call(this,32);this.model=da;this.g=0;this.R=()=>{Ia=y([.5,1,0]);this.h=T(new Ma);this.h.pa=!1;La="Volcano Drop!"};var b=0,a=0;this.update=()=>{a+=.2;b=u(b,0,1);A(this.transform);H(.003*Math.sin(a)+.03*Math.sin(a/20),0,this.transform);H(.008*Math.cos(.2*a),1,this.transform);0==b&&(this.h.transform=this.transform.slice());D([-5.5,1.7,6.5],this.transform);var c=[];qa(b,[6.5,-34,8],[0,0,0],c);var e=[];qa(b,[0,0,1],[0,1,0],e);qa(b,[0,0,0],[0,0,-30],this.h.position);var d=Ea,g=[];v(this.h.position,
c,g);y(g);var f=[];va(g,e,f);y(f);e=[];va(f,g,e);for(var h=0;3>h;++h)d[h]=f[h],d[h+4]=e[h],d[h+8]=-g[h],d[h+12]=0;d[3]=-x(f,c);d[7]=-x(e,c);d[11]=x(g,c);d[15]=1;qa(b,[.5,1,0],[0,-.5,1],Ia);y(Ia);0==this.g?L[49]?(this.g=1,eb()):L[50]?(Ka=!1,this.g=2,eb()):L[51]&&(Ka=!0,this.g=2,eb()):(La=null,b+=.015,1<=b&&(A(Ea),this.type=0,this.h.pa=!0,T(new fb),Pa(this.g)))}}
function gb(b,a,c,e){S.call(this,1,b);var d=a;c||(b=[[143,174,112],[106,158,54],[120,210,90],[72,107,36]],c=b[Math.floor(Math.random()*b.length)].map(g=>g/255));this.m=[...c,1];this.model=na(()=>d=Math.max(d+t(.4*a),.5*a),20);e||(e=5*p()+3);this.g=-e;this.model.v[2]=e;this.update=()=>{this.transform[11]=-O+this.g;this.m[3]=1-.5*u((O-500)/1300,0,1)}}
function hb(b){S.call(this,64,b);this.model=na(()=>8,24);this.m=[.98,.26,.05,1];this.Aa=!0;this.s=[{j:[0,0,0],l:8}];this.ga=a=>{a.type=0;T(new Qa(C(this.transform),null,50));Pa(4)};this.update=()=>{this.transform[11]=-O;this.m[3]=1-.5*u((O-500)/1300,0,1)}}
function fb(){S.call(this,1);this.g=[8,6,5];this.R=()=>{this.target=M};this.update=()=>{if(this.target){this.transform[3]+=Math.min(0,this.target.transform[3]-(this.transform[3]-this.g[0]));this.transform[3]+=Math.max(0,this.target.transform[3]-(this.transform[3]+this.g[0]));this.transform[7]+=Math.min(0,this.target.transform[7]-(this.transform[7]-this.g[1]));this.transform[7]+=Math.max(0,this.target.transform[7]-(this.transform[7]+this.g[1]));var b=C(this.transform).map(a=>-a);D(b,Ea)}}}
const ib={[4]:130,[64]:2,[16]:130,[256]:130,[1024]:130};let V=[];function Da(){P=0;O=Ja;N=0;R=null;V=[];V.push(new db);const b=[t(20),t(20),0],a=(2*p()|0)+6;for(var c=0;c<a;++c){const e=100+300*p(),d=2*p()*Math.PI;V.push(new gb([b[0]+Math.cos(d)*e,b[1]+Math.sin(d)*e,0],15*p()+20))}V.push(new gb(b,60,[.2,.2,.2],10));V.push(new hb([b[0],b[1],8]));V.forEach(e=>e.R?.())}Da();
function Pa(b){if(P!=b)switch(P=b,b){case 4:case 3:jb(8);jb(512);La=4==b?"You win!":"Game Over";R="Press (q) to return to the menu.";break;case 2:case 1:T(2==b?new Ta:new Ya)}}
function Aa(){V.forEach(d=>{d.target&&0==d.target.type&&(d.target=null);d.update?.()});M?.type||(M=null);const b=new k(4),a=new k(4);V.forEach(d=>{d.ia.length!=d.s.length&&(d.ia=d.s.map(()=>({l:0,j:Array(3)})));for(var g=0;g<d.s.length;++g){const f=d.s[g];m(f.j,0,b,0,3);b[3]=1;wa(d.transform,b,a);m(a,0,d.ia[g].j,0,3);d.ia[g].l=f.l}});const c=new k(3);let e=(d,g)=>{d=V[d].ia;g=V[g].ia;for(let f=0;f<d.length;f++)for(let h=0;h<g.length;h++){v(d[f].j,g[h].j,c);let l=d[f].l+g[h].l;if(x(c,c)<l*l)return!0}return!1};
for(let d=0;d<V.length;d++){let g=V[d];for(let f=d+1;f<V.length;f++){let h=V[f];const l=(ib[g.type]||0)&h.type,q=(ib[h.type]||0)&g.type;(l||q)&&e(d,f)&&(l&&g.ga?.(h),q&&h.ga?.(g))}}V=V.filter(d=>d.type);V.forEach(d=>{xa(Ea,d.transform,d.ma)});kb()}function T(b){V.push(b);b.R?.();return b}function jb(b){V.filter(a=>a.type==b).forEach(a=>a.type=0)}
function kb(){function b(g){I.fillStyle="#222222";I.strokeStyle="#222222";I.beginPath();I.rect(24,24,270,24);I.fill();I.stroke();I.fillStyle="#FF0000";I.beginPath();I.rect(24,24,g/100*270,24);I.fill()}function a(g,f){I.font="54px sans-serif";I.textAlign="right";I.fillStyle=3E3>f?0==(f/100|0)%2?"#FF0000":"#FFFF00":"#FF0000";I.fillText((""+(f/6E4|0)).padStart(2,"0")+":"+(""+(f/1E3|0)%60).padStart(2,"0"),1012,46);I.fillStyle="#FFFFFF";I.fillText((195*g).toFixed(0),980,740);I.font="16px sans-serif";I.textAlign=
"left";I.fillText("mph",980,740)}const c=za.width,e=za.height;I.fillStyle="#87CEEB";I.beginPath();I.rect(0,0,c,e);I.fill();const d=V.slice();d.sort((g,f)=>g.ma[11]-f.ma[11]);d.forEach(g=>{if(g.model){var f=g.ma,h=g.model.v,l=g.model.C,q=g.model.F,n=Fa,E=h.length/3;const pb=l.length/3;let W=new k(4),ka=new k(4),Ba=new k(4*E);var J=B();xa(n,f,J);for(n=0;n<E;++n)W[3]=1,m(h,3*n,W,0,3),wa(J,W,ka),m(ka,0,Ba,4*n,4);E=[];J=new k(12);var X=new k(4),la=new k(3),sa=new k(3),ta=new k(3),F=new k(3);let Ca=[];
for(n=0;n<pb;++n){m(Ba,4*l[3*n],J,0,4);m(Ba,4*l[3*n+1],J,4,4);m(Ba,4*l[3*n+2],J,8,4);Ca.length=0;for(var r=J,z=Ca,w=r.length,U=0;U<w;U+=4){var K=U,ua=(U+4)%w,ma=r[K+2]+r[K+3];const Wa=r[ua+2]+r[ua+3];if(0<ma)for(var G=0;4>G;++G)z.push(r[K+G]);if(0>ma*Wa)for(ma=-ma/(Wa-ma),G=0;4>G;++G)z.push(r[K+G]+ma*(r[ua+G]-r[K+G]))}if(!(3>Ca.length)){r=[];z=Ca;U=r;for(w=G=0;w<z.length;w+=4){ua=z[w+3];for(K=0;3>K;++K)U.push(z[w+K]/ua);G+=z[w+2]}z=G/(z.length/4);m(h,3*l[3*n],X,0,3);m(h,3*l[3*n+1],la,0,3);m(h,3*l[3*
n+2],sa,0,3);v(la,X,ta);v(sa,X,F);va(ta,F,W);W[3]=0;wa(f,W,ka);y(ka);X[3]=1;wa(f,X,W);0<=x(W,ka)||E.push([r,ka.slice(0,3),q[n],z])}}for(f=0;f<E.length;++f)for(l=E[f][0],h=0;h<l.length;h+=3)l[h]=(.5*l[h]+.5)*c|0,l[h+1]=(.5-.5*l[h+1])*e|0;ya(E,g.m,g.Aa?null:Ia)}});0!=P&&a(N,Q);2!=P&&1!=P||b(M?.T||0);R&&(I.fillStyle="#FF0000",I.font="36px sans-serif",I.textAlign="center",I.fillText(R,512,700));La&&(I.fillStyle="#FFFFFF",I.font="bold 84px sans-serif",I.textAlign="center",I.fillText(La,512,112));0==P&&
La&&(I.fillStyle="#FFFFFF",I.font="34px sans-serif",I.textAlign="center",I.fillText("Press (1) for tutorial",320,580),I.fillText("Press (2) for regular",700,580),I.fillText("Press (3) for hard",512,660),I.fillStyle="#222222",I.font="16px sans-serif",I.textAlign="right",I.fillText("Created by Justin Meiners and Robert Williams for js13k 2022.",1E3,730))}
function lb(b){let a={za:function(){a.Ja=0;a.P=100/(b.H*b.H+.001);a.Ba=100/(b.B*b.B+.001);a.Ka=0<b.B;a.sa=1-.01*Math.pow(b.Z,3);a.Oa=1E-6*-Math.pow(b.Y,3);a.u=.5-.5*b.V;a.Ia=5E-5*-b.W;a.Ha=0<=b.A?1-.9*Math.pow(b.A,2):1+10*Math.pow(b.A,2);a.la=Math.floor(2E4*Math.pow(1-b.G,2)+32);1===b.G&&(a.la=0)}};a.za();a.ja=parseInt(b.fa,10);a.D=.1*Math.pow(b.L,3);a.La=1!=b.L;a.Na=1+1E-4*b.ba;a.ra=5/(1+20*Math.pow(b.ca,2))*(.01+a.D);.8<a.ra&&(a.ra=.8);a.S=.1*Math.pow(b.$,2);a.ya=1+3E-4*b.aa;a.Pa=.01*Math.pow(b.da,
2);a.Ea=.5*b.ea;a.xa=[Math.floor(b.I*b.I*1E5),Math.floor(b.K*b.K*1E5),Math.floor(b.J*b.J*1E5)];a.Ma=b.X;a.ka=1020*Math.pow(b.M,2);0>b.M&&(a.ka=-a.ka);a.qa=Math.pow(b.N,2);0>b.N&&(a.qa=-a.qa);a.ua=Math.floor(2E4*Math.pow(1-b.O,2)+32);0===b.O&&(a.ua=0);a.gain=Math.exp(.25)-1;for(var c=0,e=0,d=0,g=Array(32),f=0;32>f;++f)g[f]=2*Math.random()-1;var h=0,l=0,q=0,n=0,E=0,J=Array(1024);for(f=0;1024>f;++f)J[f]=0;for(var X=[],la=0,sa=0,ta=0;;++ta){0!=a.ua&&++a.Ja>=a.ua&&a.za();0!=a.la&&ta>=a.la&&(a.la=0,a.P*=
a.Ha);a.sa+=a.Oa;a.P*=a.sa;if(a.P>a.Ba&&(a.P=a.Ba,a.Ka))break;var F=a.P;0<a.Ea&&(q+=a.Pa,F=a.P*(1+Math.sin(q)*a.Ea));F=Math.floor(F);8>F&&(F=8);a.u+=a.Ia;0>a.u&&(a.u=0);.5<a.u&&(a.u=.5);if(++l>a.xa[h]&&(l=0,2<++h))break;var r=l/a.xa[h];r=0===h?r:1===h?1+2*(1-r)*a.Ma:1-r;a.ka+=a.qa;var z=Math.abs(Math.floor(a.ka));1023<z&&(z=1023);0!=a.ya&&(a.S*=a.ya,1E-5>a.S&&(a.S=1E-5),.1<a.S&&(a.S=.1));for(var w=0,U=0;8>U;++U){f=0;n++;if(n>=F&&(n%=F,3===a.ja))for(f=0;32>f;++f)g[f]=2*Math.random()-1;f=n/F;if(0===
a.ja)f=f<a.u?.5:-.5;else if(1===a.ja)f=f<a.u?-1+2*f/a.u:1-2*(f-a.u)/(1-a.u);else if(2===a.ja)f=Math.sin(2*f*Math.PI);else if(3===a.ja)f=g[Math.floor(32*n/F)];else throw"ERROR: Bad wave type: "+a.ja;var K=c;a.D*=a.Na;0>a.D&&(a.D=0);.1<a.D&&(a.D=.1);a.La?(e+=(f-c)*a.D,e-=e*a.ra):(c=f,e=0);c+=e;d+=c-K;f=d-=d*a.S;J[E&1023]=f;f+=J[E-z+1024&1023];E=E+1&1023;w+=f*r}la+=w;1<=++sa&&(sa=0,w=la,la=0,w/=8,w*=a.gain,X.push(w))}return X}
function Za(b,a=1){let c=new AudioContext,e=c.createGain();e.gain.setValueAtTime(a,c.currentTime);a=c.createBufferSource();a.buffer=b;a.connect(e).connect(c.destination);a.start(c.currentTime)}var Y=null,mb=null,nb=null,Z=null;
function ob(b){Y&&(Y.stop(0),Y=null);mb&&(clearTimeout(mb),mb=null);Z=nb=null;Z=new AudioContext;Y=new OscillatorNode(Z,{type:"sine",frequency:0});nb=new GainNode(Z,{value:0});var a=document.getElementById("music").checked;nb.gain.setValueAtTime(a?.18:0,0);for(let [c,e]of b)Y.frequency.setValueAtTime(qb[c-6],e/1E3);a=b.reduce((c,e)=>Math.max(c,e[1]),0)+1E3;for(let [c,e]of b)Y.frequency.setValueAtTime(qb[c],(e+a)/1E3);Y.connect(nb).connect(Z.destination);Y.start(Z.currentTime);mb=setTimeout(()=>{mb=
null;ob(b)},2*a)}
const $a=[{fa:1,I:0,K:.08471101207408382,X:.3468633995198561,J:.357179930548691,H:.6811589321967947,B:0,Z:0,Y:0,ea:0,da:0,A:.41912637580473566,G:.6487335786143021,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:1,I:0,K:.2248469135034446,X:0,J:.4958265678246262,H:.37756649565996814,B:0,Z:.14431964296874503,Y:0,ea:0,da:0,A:0,G:0,V:1,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:3,I:0,K:.06841022161375787,X:0,J:.403,H:.3280483280173474,B:0,Z:-.5887646078252177,Y:0,ea:0,da:0,A:0,G:0,V:0,W:0,O:0,M:0,N:0,
L:1,ba:0,ca:0,$:0,aa:0},{fa:3,I:0,K:.0813713430429975,X:0,J:.22567589583494954,H:.695525791616842,B:0,Z:-.46141484506510827,Y:0,ea:0,da:0,A:0,G:0,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:.025630963865669387,aa:0},{fa:3,I:0,K:.257837057859972,X:.47594063886278615,J:.2934573294998162,H:.23179617917817402,B:0,Z:0,Y:0,ea:0,da:0,A:0,G:0,V:0,W:0,O:.6715554672938782,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:3,I:0,K:.35,X:.527,J:.694,H:.03498685185395313,B:0,Z:.0199162440173406,Y:0,ea:.18176693090338614,da:.4993350372296267,
A:0,G:0,V:0,W:0,O:.4255423790055556,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:1,I:0,K:.043234146187052895,X:.4932882977952163,J:.25885335733347026,H:.8997029847534574,B:0,Z:0,Y:0,ea:0,da:0,A:.43487715157261797,G:.5884500505757229,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0}].map(function(b){b=lb(b);let a=new AudioBuffer({numberOfChannels:1,length:b.length,sampleRate:44100}),c=a.getChannelData(0);for(let e=0;e<b.length;e++)c[e]=b[e];return a}),qb=[];qb[57]=440;for(let b=58;128>=b;b++)qb[b]=1.0595*qb[b-1];
for(let b=56;0<=b;b--)qb[b]=qb[b+1]/1.0595;
const rb=[[58,2E3],[70,2854],[68,3864],[66,4104],[65,4312],[63,4562],[66,5557],[65,5791],[63,6E3],[62,6239],[63,6901],[65,7140],[58,9104],[62,9604],[63,10244],[65,10489],[66,10708],[68,10963],[66,12083],[65,12328],[66,12552],[63,13432],[65,14072],[66,14286],[68,14505],[70,14739],[58,16104],[70,16984],[68,18057],[66,18291],[65,18505],[66,18713],[65,18927],[63,19166],[66,19880],[65,20145],[63,20343],[65,20609],[63,21343],[62,21588],[60,22265],[58,22526],[58,23864],[66,24359],[66,25375],[68,25859],[66,
26078],[65,26328],[65,27260],[66,27687],[65,27916],[63,28171]];function eb(){Za($a[6]);ob(rb)}document.getElementById("music").addEventListener("change",b=>{b.currentTarget.checked?Z&&nb.gain.setValueAtTime(.18,Z.currentTime):Z&&nb.gain.setValueAtTime(0,Z.currentTime)});
</script></body>