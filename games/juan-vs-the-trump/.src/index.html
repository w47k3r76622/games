<!doctype html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <title>Juan vs. The Trump</title>
    <!-- DONT EDIT THE FOLLOWING LINE - NEEDED FOR BUILD -->
    <style>body {  margin: 0;  padding: 0;  font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;  font-weight: 300;  color: #333;  background-color: #8ABFDA;}main {  width: 100%;  height: 100%;}main canvas {  display: block;  position: absolute;  margin: 0 auto;  left: 50%;  box-shadow: 0px 0px 14px 1px #6C97AD;  border-radius: 25px;}.score {  display: block;  position: absolute;  margin: 0 auto;  left: 50%;  z-index: 99;  background-color: #3186B1;  max-height: 25px;  font-weight: 600;  border-radius: 25px 25px 0px 0px;}.score span {  text-align: center;  width: 100%;  display: inline-block;  font-size: 18px;  color: #f1f1f1;}img { display: none; }.left { text-align: left; width: 49%; display: inline-block; }.right { text-align: right; width: 49%; display: inline-block; }</style>
  </head>

  <body class="app">


    <img id="player" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABIBAMAAACTum9oAAAAKlBMVEUAAAD/xZaIAABERET/zADMAAD/iAAAAACggFv/RERxQidUJAmIiIj///9JTOEAAAAAAXRSTlMAQObYZgAAAj5JREFUeF7d1a9v20AUB/BbMmWRQvZmTT5SKTvJ0sJsPVIQMGCFz5LBWEAUVStZ0IVM6q1SU1ISacD/wIBHggoaGGpStBL/L3vPXuH9AEX7Ej/pPnpn8rUFZ4jCGUz7B85PDjVEbDo4bE7o2jhvENN+yHYbK+M9Ur/t4Em2Tpjd/ekhyvZR2uEpu2vhimAWZQA02SAgAEgasuss3tghSgTdQwCttbBCgFjrbwR5swtmJLd84/Dc8YosDagPwJOi2B2fV3tJYJCUZTG1u0E5q0o+V2VVlcoFk+54UHypqp/J1AELxRuTPcNZ4YAUgupf7JABQbhZ5fniAqxwlFOWQpgbHi6kF4rX+WKVfxJ2yDfysMqXI5psmawJLjtIaOWA96t8ze5Y/xbioT5a4fGBBRuGpG0hWB+eW+tK3/q+XYhO+NxXxHmTer4AJ4bxNqLBnlfa9Jvi1syd8PtTxNCctQYdcAztUzRP6QkQZZEdGgIIDONNdB6lDqgBDQqhtQZwwDdabwA6yLutcAw7chHyBHBNzhZ4p0BiQK/NrKLzoF5X+5BeMygIhvRaJf9NrwXfuPT2ul+5WB98veas88XlwdvrvtHHg7/XYlIT7CZEERRsmiA5REoaAnebeBsCsX08azEEAiUEgjZSQwiMuY9+J8fw/jNcGS8EZQCkAv/G8uPt7Y/SCG+SQilViADIdQ2BA27h9EWhooTAUV8ef8iRDFiYd/GvvO/reumF9a81FfJr7Yf1gYvmh5P+Z0z6hfIXtRbVwS+xKy0AAAAASUVORK5CYII="/>
    <img id="platform" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAADIAgMAAAC7e19xAAAADFBMVEUAAACQSABsJADYbAAEoao2AAAAAXRSTlMAQObYZgAAAW1JREFUeF7s1TEKwkAYBWHRzqN4n9+b2VuPh4jnSWUdJLGRhRDYDf4RRGbqB1/5dn/fEeimWfcqcAKmeR8hFTuHiIiIiIiUYbWCrOy5Gumrdh4RERERESlPkUWWPZrIUOwvISIiIiIih6JujYzAtSC5gNtvISIiIiIiABshPZBARERERET2b7PLIEs6Is5NZGzaA3CJiPWIiIiIiMirPbvHQRAG4zAuekEHq4mLO5fwFO4uDujgEbySi4uJHwSb/IOvJS/t6POMbemvG6H8RA6tW7dQPqJnIu1FZNv3UZwN5QgICAgIiNarMUisCcqHpO2gshEQEBAQEN0S3YQ0WuFE7O5b8+83gay+bdNGWz1yEBAQEBCQV78yRLQLSds6gipFQEBAQEBsfkRZei6kKGOCgICAOAM5fjr3gfsoJN72BNswkh7eBVMeAgICAgLSVVl+nYPY74tFBwwhTdq2SJ2DgICAgICkq9zI5F96AzzNUnR1Ya77AAAAAElFTkSuQmCC"/>
    <img id="platform-spike" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEDBAMAAADpY08SAAAAFVBMVEUAAABsJADYbACQSACAgIAAAADY/P+2mlKkAAAAAXRSTlMAQObYZgAAAiJJREFUeAHt3L2NFEEQBeA+fnwmA7QREAIh4BAlDiGQACmMyGDWB7EYqzJoHU+3Td81J77nzBhVtf2Vzmnt6u7abdmuj7s3qejnt5Hqqq3WlL31AQEBAQEBAQEBGYGA9APHswfIUMIOJkEu53E2CAgICAgICAgIyCpIvkMsg+Tsfw85BtirISAgICAgICAgICAv3sba9ZBwezh6yJqEnYCAgICAgICAgICAHPWyDBLW2kBAQEBAniogICAgIDUgzFsPqdpT/TpoHDK4xrDW+lPYQUBAQEBAQEBAQJ4a0tVsayHd51Rtmw7J1fk6dKoXEBAQEBAQEBAQkIWQbnzIfEhLJ6/Mh+TqXNxAQEBAQEBAQEBAFkGqZevGdwO7EfMh8eiX8/2t45CamKtzjvhPi0BAQEBAQEBAQEAeAXLKn7YCEmqnQY4Rdl7reggICAgICAgICAhIznxISkZ/7SFLs2UmCAgICAgICMiEgIBs/byUY3tUSP1c54b1jkJars7Xk5x/GgIC8vJde465nEFAQEBAQH4LyDWv3j9LyI8v1ycIyEMD8vrDvdf6Pd/9c0/uDZf2kK74++f/FwICAgICAgICAgJS+RiGh1Pc1lMnyDuMX2B8qhcQEBAQEBAQEBAQkDz8CNMGeh6yw8v5TwsAAQEBAQEBAQEBAcnDw7QJPWEfaQEgICAgICAgICAgIHl4njbek/fRLwAEBAQEBAQEBAQE5Be2jdpP+VSkOgAAAABJRU5ErkJggg=="/>
    <img id="cloud" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOsAAACyBAMAAABRpSXZAAAAD1BMVEUAAAAktP9s/P/Y/P////93m+dnAAAAAXRSTlMAQObYZgAAANVJREFUeNrt2MENgkAURVHoALQBRSvQDpT+a3LhsBjyJZOoOJhzl0A47F6GppEkfaQ+b3h2wGKxWCz2T9j0/t1QUnq4w2KxWCx2a2ybD+vEXsMuOTuFxWKxWGz9bHyUPCVgzJvxb8wvFovFYrHrsm3szBrD7vHDJfOLxWKxWOxv2SLnlg/rOf6KdPeIxWKxWGxFbLq4v5Y0Lhbvbbd0oMVisVgsdmU2Pmgei/6wzurDsFgsFoutkJ3N74s+52CxWCwWWwW7vMbfdrBYLBaLrYKVJEmb6gHeplXwYpzCVwAAAABJRU5ErkJggg=="/>
    <img id="coin" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAMAAAATZM5jAAAAElBMVEUAAABUJAn/RAD/iAD/zAD////mFWTwAAAAAXRSTlMAQObYZgAAAGNJREFUeNqVkksOADEIQgd07n/lsSpNzKxk9YjQ9PccIZQglgYCF2nGtsHknQw03oiHyiK4G+lMxJMqh8yXAxPVgHsDe6BMO5XtXzAtWhk5+Cy87yz4urDf0vrQ62vdP9z6a3wYyAOJRiAPKwAAAABJRU5ErkJggg=="/>
    <img id="trump" src="data:image/png;base64,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"/>

    <main id="main">
      <div class="score">Score:</div>
    </main>

    <script id="tmpl-score" type="text/template">
      <span>Score: {{ score }}</span>
    </script>

    <!-- DONT EDIT THE FOLLOWING LINE - NEEDED FOR BUILD -->
    <script>!function(a,b){"function"==typeof define&&define.amd?define([],b):a.App=b()}(this,function(){"use strict";var a,b,c;return function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,b){return function(){var c=v.call(arguments,0);return"string"!=typeof c[0]&&1===c.length&&c.push(null),n.apply(d,c.concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[],v=typeof c;if(f=f||a,"undefined"===v||"function"===v){for(b=!b.length&&c.length?["require","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c?c.apply(q[a],u):void 0,a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){if("string"==typeof a)return p[a]?p[a](b):j(o(a,b).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n},n.config=function(a){return n(a)},a._defined=q,c=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("node_modules/almond/almond.js",function(){}),c("src/js/vendor/eventemitter",[],function(){function a(a){return e.call(a,0)}function b(a){return void 0!==f[a]?f[a]:d.test(a)?(f[a]=a.split(d),f[a]):(f[a]=[a],f[a])}function c(){this._cache={}}var d=/\s+/,e=Array.prototype.slice,f={};return c.prototype={constructor:c,on:function(){var a,c,d=Array.prototype.slice.call(arguments),f=b(d[0]),g=e.call(d,1);for(a=0;a<f.length;a++){c=f[a],this._cache[c]=this._cache[c]||[];for(var h=0;h<g.length;h++)this._cache[c].push(g[h])}return this},off:function(){var c,d,f=a(arguments),g=b(f[0]),h=[],i=e.call(f,1);for(d=0;d<g.length;d++)if(c=g[d],this._cache[c]=this._cache[c]||[],i.length){for(var j=0;j<this._cache[c].length;j++)for(var k=0;k<i.length;k++)this._cache[c][j]!==i[k]&&h.push(this._cache[c][j]);this._cache[c]=h}else delete this._cache[c];return this},emit:function(){var a,c,d,e,f=Array.prototype.slice.call(arguments),g=b(f[0]);for(f.splice(0,1),a=f,c=0;c<g.length;c++){d=g[c],e=this._cache[d]||[];for(var h=0;h<e.length;h++)switch(a.length){case 0:e[h]();break;case 1:e[h](a[0]);break;case 2:e[h](a[0],a[1]);break;case 3:e[h](a[0],a[1],a[2]);break;default:e[h].apply(null,a)}}return this},once:function(a,b,c){var d,e=this;return d=function(){b.apply(c,arguments),e.off(a,d)},this.on(a,d)}},c}),c("src/js/lib/vent",["src/js/vendor/eventemitter"],function(a){var b=new a;return window.addEventListener("resize",function(){b.emit("resize")}),b}),c("src/js/classes/base",["src/js/vendor/eventemitter","src/js/lib/vent"],function(a,b){function c(d){function e(){this.vent=b,a.call(this),"function"==typeof this.init&&this.init.apply(this,arguments)}var f=this.prototype||{},g=Object.create(f);return Object.keys(d).forEach(function(a){d.hasOwnProperty(a)&&(g[a]=d[a])}),e.extend=c,e.prototype=g,e.prototype.constructor=e,e}var d=function(){};return c.call(d,a.prototype)}),c("src/js/lib/util",[],function(){var a;return a={now:function(){return(new Date).getTime()},isFunction:function(a){return"function"==typeof a},random:function(a,b){return a+Math.floor(Math.random()*(b-a))},approach:function(a,b,c){var d=a-b;return d>c?b+c:-c>d?b-c:a},scale:function(){var a,b,c=this.config.height/this.config.width;this.config.height>window.innerHeight&&(a=window.innerHeight,b=a/c,this.elem.style.width=b+"px",this.elem.style.height=a+"px",this.elem.style.marginLeft="-"+b/2+"px")},template:function(){var a={};return function(b,c){return Object.keys(c).forEach(function(d){var e,f="{{ "+d+" }}";e=a[f]||(a[f]=new RegExp("{{ "+d+" }}")),b=b.replace(e,c[d],"g")}),b}}(),stackTrace:function(){return(new Error).stack},extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})}),a},renderText:function(b,c,d,e){a.extend(b,e),b.fillText(c,d.x,d.y)}}}),c("src/js/classes/canvas",["src/js/classes/base","src/js/lib/util"],function(a,b){return a.extend({init:function(a){this.config=a||{},this.elem=document.createElement("canvas"),this.ctx=this.elem.getContext("2d"),this.entities=[],b.scale.call(this),this.setDimensions(a.width,a.height),a.bgColor&&(this.elem.style.backgroundColor=a.bgColor),this.bindEvents()},attachTo:function(a){return a.appendChild(this.elem)},addEntity:function(a){return this.entities.push(a)},addPlayer:function(a){return this.player=a,this.addEntity(a)},setDimensions:function(a,b){this.elem.width=a,this.elem.height=b},bindEvents:function(){var a=this;this.vent.on("before-update",function(){a.beforeUpdate(),a.emit("before-update")}),this.vent.on("update",function(){a.update(),a.emit("update")}),this.vent.on("render",function(){a.render(),a.emit("render")}),this.vent.on("resize",function(){b.scale.call(this)}.bind(this))},beforeUpdate:function(){this.clearDirty()},clearAll:function(){this.ctx.clearRect(0,0,this.elem.width,this.elem.height)},clearDirty:function(){var a=this.ctx;this.entities.forEach(function(b){b.isVisible()&&a.clearRect(b.x-5,b.y-5,b.w+5,b.h+5)})},update:function(){var a=this;this.entities.forEach(function(c){b.isFunction(c.render)&&c.update(a.ctx)})},render:function(){var a=this;this.entities.forEach(function(c){b.isFunction(c.render)&&c.render(a.ctx)})}})}),c("src/js/classes/hud",["src/js/classes/canvas","src/js/lib/util"],function(a,b){var c=document.querySelector("#trump");return a.extend({init:function(){a.prototype.init.apply(this,arguments),this.reverse=!1,this.gameOverText=[this.ctx,"Game Over",{x:this.elem.width/2,y:this.elem.height/2-25},{fillStyle:"#f1f1f1",font:"normal bold 80px sans-serif",textAlign:"center"}],this.replayText=[this.ctx,"click to replay",{x:this.elem.width/2,y:this.elem.height/2},{fillStyle:"#f1f1f1",font:"normal bold 20px sans-serif",textAlign:"center"}],this.trumpText=[this.ctx,"Trump!",{x:this.elem.width/2,y:this.elem.height/2-226},{fillStyle:"rgb( 51, 51, 51 )",font:"normal bold 80px sans-serif",textAlign:"center"}],function(){var a=!0,c=b.now();Object.defineProperty(this,"flicker",{get:function(){var d=b.now();return d-c>5?(c=d,a=!a):a},set:function(b){a=b}})}.call(this),this.vent.on("reverse",function(){this.reverse=!0,this.alpha=1}.bind(this)),this.on("render",this.onRender.bind(this)),this.vent.on("game-over",function(){this.gameOver=!0,this.vent.once("tap",function(){window.location=window.location})}.bind(this))},beforeUpdate:function(){this.reverse&&(this.alpha-=.01),this.ctx.clearRect(0,0,this.elem.width,this.elem.height),this.alpha<=0&&(this.reverse=!1,this.alpha=1)},onRender:function(){this.gameOver?(this.ctx.globalAlpha=this.alpha=1,b.renderText.apply(b,this.gameOverText),b.renderText.apply(b,this.replayText)):this.reverse&&(this.ctx.fillStyle=this.flicker?"#8ABFDA":"#f1f1f1",this.ctx.fillRect(0,0,this.elem.width,this.elem.height),b.renderText.apply(b,this.trumpText),this.ctx.globalAlpha=this.flicker?this.alpha:0,this.ctx.drawImage(c,this.elem.width/2-163,this.elem.height/2-226,325,409))}})}),c("src/js/lib/canvases",["src/js/classes/canvas","src/js/classes/hud","src/js/lib/util"],function(a,b,c){var d={width:640,height:960},e=document.getElementById("main"),f=new a(d),g=new a(d),h=new a(d),i=new b(d),j=new a(d),k=new a(d);return k.attachTo(e),g.attachTo(e),h.attachTo(e),f.attachTo(e),i.attachTo(e),j.attachTo(e),{main:f,world:g,items:h,bg:k,hud:i,title:j}}),c("src/js/lib/gameloop",["src/js/lib/vent"],function(a){function b(){a.emit("before-update"),a.emit("update"),a.emit("before-render"),a.emit("render"),a.emit("after-render"),a.emit("debug"),e||d(b)}function c(){e=!e}var d=window.requestAnimationFrame,e=!1;return a.on("start",b),a.on("pause",c),{start:function(){e=!1,b(),console.log("Game loop started")},pause:c}}),c("src/js/lib/interactions",["src/js/lib/util","src/js/lib/vent"],function(a,b){function c(){document.addEventListener("mousedown",function(){b.emit("tap")},!1),document.addEventListener("keydown",function(a){var c;d.hasOwnProperty(a.keyCode)&&(c=d[a.keyCode],b.emit("keydown",c))},!1),document.addEventListener("keyup",function(a){var c;d.hasOwnProperty(a.keyCode)&&(c=d[a.keyCode],b.emit("keyup",c)),32===a.keyCode&&b.emit("tap")},!1)}var d;d={37:"left",39:"right"},b.on("start",function(){window.setTimeout(c,0)})}),c("src/js/lib/titlescreen",["src/js/lib/canvases","src/js/lib/vent"],function(a,b){var c,d;c=document.querySelector("#trump"),d=document.querySelector("#player");var e={init:function(){return this.canvas=a.title,this.ctx=this.canvas.ctx,this.elem=this.canvas.elem,this.bindEvents(),this},bindEvents:function(){function a(){b.emit("start"),c.elem.remove()}var c=this;this.elem.addEventListener("mousedown",a,!1)},show:function(){this.ctx.fillStyle="#f1f1f1",this.ctx.font="normal bold 80px sans-serif",this.ctx.textAlign="center",this.ctx.fillText("Juan",this.elem.width/2,this.elem.height/2-226),this.ctx.fillText("vs",this.elem.width/2,this.elem.height/2-150),this.ctx.fillText("The Trump",this.elem.width/2,this.elem.height/2-70),this.ctx.font="normal bold 20px sans-serif",this.ctx.fillText("spacebar jumps — left/right arrows move",this.elem.width/2,this.elem.height/2-10),this.ctx.fillText("collect coins and watch out for the trump!",this.elem.width/2,this.elem.height/2+20),this.ctx.fillText("click to start",this.elem.width/2,this.elem.height/2+80),this.ctx.drawImage(d,0,0,15,15,-100,this.canvas.elem.height-300,300,300),this.ctx.drawImage(d,0,0,15,15,-100,this.elem.height-300,300,300),this.ctx.drawImage(c,this.elem.width-220,this.elem.height-345,325,409)}};return e.init()}),c("src/js/classes/entity",["src/js/classes/base"],function(a){return a.extend({init:function(a){a=a||{},this.x=a.x||0,this.y=a.y||0,this.w=a.w||0,this.h=a.h||0,this.shape=a.shape||"rectangle"},isVisible:function(){return this.y+this.h<0?!1:!0},render:function(a){},update:function(a){},collidesWith:function(a){if(a.shape!==this.shape)throw new Error("Entity shapes do not match for collision detect");return this.collisionFuncs[this.shape].call(this,a)},collisionFuncs:{rectangle:function(a){return this.x<a.x+a.w&&a.x<this.x+this.w&&this.y<a.y+a.h&&a.y<this.y+this.h?!0:!1}}})}),c("src/js/lib/camera",["src/js/lib/vent","src/js/lib/util"],function(a,b){return{offset:0}}),c("src/js/classes/sprite",["src/js/classes/base"],function(a){var b=a.extend({init:function(a){a.frames&&this.addFrames(a.frames)},getFrame:function(a,b){return this.frames[a]},addFrames:function(a){var b=this;this.frames={},Object.keys(a).forEach(function(c){var d=a[c];b.frames[c]=function(a){return d[5]=Math.floor(a.x),d[6]=Math.floor(a.y),d[7]=Math.floor(a.w),d[8]=Math.floor(a.h),d}})}});return b}),c("src/js/sprites/platform",["src/js/classes/sprite"],function(a){var b,c,d,e=document.querySelector("#platform");return c=document.createElement("canvas"),c.width=400,c.height=200,d=c.getContext("2d"),d.drawImage(e,0,0),b={"default":[c,0,0,400,200,null,null,null,null]},new a({frames:b})}),c("src/js/sprites/spikeplatform",["src/js/classes/sprite"],function(a){var b,c,d,e=document.querySelector("#platform-spike");return c=document.createElement("canvas"),c.width=400,c.height=259,d=c.getContext("2d"),d.drawImage(e,0,0),b={"default":[c,0,0,400,259,null,null,null,null]},new a({frames:b})}),c("src/js/entities/platform",["src/js/classes/entity","src/js/lib/camera","src/js/lib/util","src/js/sprites/platform","src/js/sprites/spikeplatform"],function(a,b,c,d,e){var f={"default":d,spike:e};return a.extend({init:function(d){Object.defineProperty(this,"y",{get:function(){return this._y-b.offset},set:function(a){this._y=a}}),function(){var a=d.type||"default";Object.defineProperty(this,"type",{get:function(){return a},set:function(b){a=b,this.sprite=f[a]}})}.call(this),this.type=d.type||"default",this.velocity={x:c.random(1,4)},this.direction=c.random(1,11)<=5?1:-1,a.prototype.init.apply(this,arguments),this.w=c.random(50,200),this.h=50,this.destroyed=!1},recycle:function(a){this.destroyed=!1,this.y=a,this.x=c.random(0,this.canvas.width-this.w-50),this.velocity={x:c.random(1,4)},this.w=c.random(50,200)},update:function(a){(this.x<=0||this.x>=a.canvas.width-this.w)&&(this.direction=-this.direction),this.x+=this.velocity.x*this.direction,this.y>a.canvas.height&&(this.destroyed=!0)},render:function(a){this.canvas||(this.canvas=a.canvas),this.isVisible()&&a.drawImage.apply(a,this.sprite.getFrame("default")(this))},collidesWithTop:function(a){return a.isFalling&&this.collidesWith(a)&&a.y+a.h<=this.y+30?!0:!1},collidesWithBottom:function(a){return a.isJumping&&this.collidesWith(a)&&a.y<=this.y+this.h-50?!0:!1}})}),c("src/js/sprites/player",["src/js/classes/sprite"],function(a){var b,c,d,e=document.querySelector("#player"),f=3;return c=document.createElement("canvas"),d=c.getContext("2d"),c.width=80*f,c.height=72*f,d.drawImage(e,0,0,80*f,72*f),b={right:[c,0,0,15*f,24*f,null,null,null,null],left:[c,0,24.5*f,16*f,23.25*f,null,null,null,null],dead:[c,0,48.5*f,15*f,24*f,null,null,null,null],"jump-left":[c,65*f,25*f,15*f,24*f,null,null,null,null],"jump-right":[c,65*f,0,15*f,24*f,null,null,null,null]},new a({frames:b})}),c("src/js/vendor/jsfxr",[],function(){function a(){this.setSettings=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;this.c<.01&&(this.c=.01);var c=this.b+this.c+this.e;if(.18>c){var d=.18/c;this.b*=d,this.c*=d,this.e*=d}}}function b(){this._params=new a;var b,c,d,e,f,g,h,i,j,k,l,m;this.reset=function(){var a=this._params;e=100/(a.f*a.f+.001),f=100/(a.g*a.g+.001),g=1-a.h*a.h*a.h*.01,h=-a.i*a.i*a.i*1e-6,a.a||(l=.5-a.n/2,m=5e-5*-a.o),i=1+a.l*a.l*(a.l>0?-.9:10),j=0,k=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},this.totalReset=function(){this.reset();var a=this._params;return b=a.b*a.b*1e5,c=a.c*a.c*1e5,d=a.e*a.e*1e5+12,3*((b+c+d)/3|0)},this.synthWave=function(a,n){var o=this._params,p=1!=o.s||o.v,q=o.v*o.v*.1,r=1+3e-4*o.w,s=o.s*o.s*o.s*.1,t=1+1e-4*o.t,u=1!=o.s,v=o.x*o.x,w=o.g,x=o.q||o.r,y=o.r*o.r*o.r*.2,z=o.q*o.q*(o.q<0?-1020:1020),A=o.p?((1-o.p)*(1-o.p)*2e4|0)+32:0,B=o.d,C=o.j/2,D=o.k*o.k*.01,E=o.a,F=b,G=1/b,H=1/c,I=1/d,J=5/(1+o.u*o.u*20)*(.01+s);J>.8&&(J=.8),J=1-J;for(var K,L,M,N,O,P,Q=!1,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=new Array(1024),aa=new Array(32),ba=_.length;ba--;)_[ba]=0;for(var ba=aa.length;ba--;)aa[ba]=2*Math.random()-1;for(var ba=0;n>ba;ba++){if(Q)return ba;if(A&&++Z>=A&&(Z=0,this.reset()),k&&++j>=k&&(k=0,e*=i),g+=h,e*=g,e>f&&(e=f,w>0&&(Q=!0)),L=e,C>0&&($+=D,L*=1+Math.sin($)*C),L|=0,8>L&&(L=8),E||(l+=m,0>l?l=0:l>.5&&(l=.5)),++S>F)switch(S=0,++R){case 1:F=c;break;case 2:F=d}switch(R){case 0:T=S*G;break;case 1:T=1+2*(1-S*H)*B;break;case 2:T=1-S*I;break;case 3:T=0,Q=!0}x&&(z+=y,M=0|z,0>M?M=-M:M>1023&&(M=1023)),p&&r&&(q*=r,1e-5>q?q=1e-5:q>.1&&(q=.1)),P=0;for(var ca=8;ca--;){if(X++,X>=L&&(X%=L,3==E))for(var da=aa.length;da--;)aa[da]=2*Math.random()-1;switch(E){case 0:O=l>X/L?.5:-.5;break;case 1:O=1-X/L*2;break;case 2:N=X/L,N=6.28318531*(N>.5?N-1:N),O=1.27323954*N+.405284735*N*N*(0>N?1:-1),O=.225*((0>O?-1:1)*O*O-O)+O;break;case 3:O=aa[Math.abs(32*X/L|0)]}p&&(K=W,s*=t,0>s?s=0:s>.1&&(s=.1),u?(V+=(O-W)*s,V*=J):(W=O,V=0),W+=V,U+=W-K,U*=1-q,O=U),x&&(_[Y%1024]=O,O+=_[(Y-M+1024)%1024],Y++),P+=O}P*=.125*T*v,a[ba]=Math.max(-1,Math.min(1,P))||0}return n}}var c=new b;return function(a,b){var d,e;return c._params.setSettings(a),e=new Float32Array(c.totalReset()),c.synthWave(e,e.length),d=b.createBuffer(1,e.length,44100),d.getChannelData(0).set(e),d}}),c("src/js/lib/sound",["src/js/vendor/jsfxr"],function(a){function b(b){var c=a(b,e);return{play:function(){if(!d)return!1;var a=e.createBufferSource();a.buffer=c,a.connect(e.destination),a.start(0)}}}var c=window.AudioContext||window.webkitAudioContext,d=!0,e=new c;return{jump:b([0,,.2129,,.1594,.3136,,.1639,,,,,,.5897,,,,,.9573,,,.2773,,.33]),die:b([3,,.19,.28,.48,.75,,-.4496,.34,,,.06,,,,.63,,,.73,.04,.01,.01,,.39]),coin:b([0,,.0176,.4936,.2906,.7508,,,,,,.5357,.5447,,,,,,1,,,,,.33]),reverse:b([3,5e-4,.9073,.1861,.1249,.0026,,.2186,-6e-4,-1e-4,-.2998,.8931,,,.3423,,.5833,.4341,.9996,.0769,-.5197,.1644,.1738,.28])}}),c("src/js/entities/player",["src/js/classes/entity","src/js/lib/util","src/js/lib/camera","src/js/sprites/player","src/js/lib/sound"],function(a,b,c,d,e){var f,g=.5;return new(f=a.extend({init:function(){return a.prototype.init.apply(this,arguments),this.w=45,this.h=72,this.x=null,this.y=null,this.sprite=d,this.isJumping=!1,this.jumpHeight=16,this.jumpCount=0,this.canvas=null,this.directionStr="right",this.velocity={approach:{x:0,y:0},x:0,y:0},this.elem=document.querySelector("#player"),this.bindEvents(),this},bindEvents:function(){this.vent.on("tap",this.onTap.bind(this)),this.vent.on("keydown",this.onLeftRightDown.bind(this)),this.vent.on("keyup",this.onLeftRightUp.bind(this))},onTap:function(){this.dead||(this.isJumping?this.isJumping&&this.jumpCount<2&&this.startJump():this.startJump())},onLeftRightDown:function(a){if(!this.lateral){var b="left"===a?-1:1;this.direction=b,this.directionStr=a,this.velocity.x=5*b,this.velocity.approach.x=0,this.lateral=!0}},onLeftRightUp:function(a){this.velocity.x=0,this.lateral=!1},setCanvas:function(a){this.canvas=a},worldBounds:function(){return this.canvas.height-this.h},render:function(a){var b;this.x=null===this.x?a.canvas.width/2-this.w/2:this.x,this.y=null===this.y?a.canvas.height-this.h-10:this.y,b=this.dead?this.sprite.getFrame("dead"):this.isJumping?this.sprite.getFrame("jump-"+this.directionStr):this.sprite.getFrame(this.directionStr||"right"),a.drawImage.apply(a,b(this))},update:function(a){this.canvas||this.setCanvas(a.canvas),this.lateral&&(this.x+=this.velocity.approach.x,this.currentPlatform&&!this.currentPlatform.collidesWithTop(this)&&(this.isJumping=!0,this.currentPlatform=null)),this.currentPlatform&&(this.x+=this.currentPlatform.velocity.x*this.currentPlatform.direction),this.isJumping&&(this.velocity.y+=g,this.y+=this.velocity.y,this.isFalling=this.velocity.y>0?!0:!1,this.y<=a.canvas.height/2-this.h&&(c.offset+=this.velocity.y,this.y=a.canvas.height/2-this.h)),this.velocity.approach.x=b.approach(this.velocity.x,this.velocity.approach.x,.3),this.x>=this.canvas.width-this.w&&(this.x=this.canvas.width-this.w),this.x<0&&(this.x=0),this.isJumping&&this.y>=this.worldBounds()&&!this.dead&&this.die(),this.dead&&this.y&&this.y>=a.canvas.height&&this.vent.emit("player-dead game-over",this)},die:function(){this.dead=!0,this.jumpHeight=10,this.startJump(),e.die.play()},landOn:function(a){this.endJump(a.y-this.h),this.currentPlatform=a||null,this.isJumping=!1,this.isFalling=!1},startJump:function(){this.jumpCount++,this.currentPlatform=null,this.velocity.y=-this.jumpHeight,this.isJumping=!0,this.isFalling=!1,e.jump.play()},endJump:function(a){this.velocity.y=0,this.y=a||null,this.jumpCount=0,this.isJumping=!1,this.isFalling=!1}}))}),c("src/js/sprites/cloud",["src/js/classes/sprite"],function(a){var b,c,d,e=document.querySelector("#cloud");return c=document.createElement("canvas"),c.width=235,c.height=178,d=c.getContext("2d"),d.drawImage(e,0,0),b={"default":[c,0,0,235,178,null,null,null,null]},new a({frames:b})}),c("src/js/entities/cloud",["src/js/classes/entity","src/js/lib/camera","src/js/lib/util","src/js/sprites/cloud"],function(a,b,c,d){return a.extend({init:function(e){Object.defineProperty(this,"y",{get:function(){return this._y-b.offset/8},set:function(a){this._y=a}}),this.originalY=e.y,this.velocity={x:Math.random()},this.direction=c.random(1,11)<=5?1:-1,a.prototype.init.apply(this,arguments),this.sprite=d,this.alpha=.3+.2*Math.random(),this.w=117,this.h=89,this.destroyed=!1},recycle:function(a){this.destroyed=!1,this.y=a},update:function(a){this.x<=0-this.w?this.x=a.canvas.width+this.w:this.x>=a.canvas.width+this.w&&(this.x=-this.w),this.y>a.canvas.height&&(this.destroyed=!0),this.x+=this.velocity.x*this.direction},render:function(a){this.canvas||(this.canvas=a.canvas),a.globalAlpha=this.alpha,a.drawImage.apply(a,this.sprite.getFrame("default")(this)),a.globalAlpha=1}})}),c("src/js/classes/pool",["src/js/classes/base"],function(a){var b=a.extend({init:function(a){this.entities=a},recycle:function(){return this.entities.filter(function(a){return a.destroyed===!0})[0]}});return b}),c("src/js/sprites/coin",["src/js/classes/sprite"],function(a){var b,c,d,e=document.querySelector("#coin");return c=document.createElement("canvas"),c.width=48,c.height=12,d=c.getContext("2d"),d.drawImage(e,0,0),b={0:[c,0,0,12,12,null,null,null,null],1:[c,12,0,12,12,null,null,null,null],2:[c,24,0,12,12,null,null,null,null],3:[c,36,0,12,12,null,null,null,null]},new a({frames:b})}),c("src/js/lib/score",["src/js/lib/vent","src/js/lib/util","src/js/classes/base","src/js/lib/canvases"],function(a,b,c,d){var e,f,g=document.querySelector(".score"),h=document.querySelector("#tmpl-score").innerHTML;return e=c.extend({init:function(){(function(){var a=0;Object.defineProperty(this,"points",{get:function(){return a},set:function(c){a=c,this.elem.innerHTML=b.template(h,{score:a})}})}).call(this),this.elem=g,this.config=d.main.config,this.elem.width=this.config.width,b.scale.call(this),this.elem.style.width=parseInt(this.elem.style.width)+1+" px",this.points=0}}),f=new e,a.on("resize",function(){b.scale.call(f),f.elem.style.width=parseInt(f.elem.style.width)+1+" px"}),f}),c("src/js/entities/coin",["src/js/classes/entity","src/js/sprites/coin","src/js/lib/util","src/js/lib/camera","src/js/lib/score","src/js/lib/sound"],function(a,b,c,d,e,f){return a.extend({init:function(){Object.defineProperty(this,"y",{get:function(){return this._y-d.offset},set:function(a){this._y=a}}),a.prototype.init.apply(this,arguments),this.w=36,this.h=36,this.sprite=b,this.canvas=null,this.frameNums=[0,1,2,3],this.frameIndex=0,this.frameDelay=100,this.lastFrameTime=null,this.consumed=!1,this.destroyed=!1,this.points=1},update:function(a){this.y>a.canvas.height&&(this.destroyed=!0)},render:function(a){if(!this.consumed&&!this.destroyed){var b=c.now();this.canvas||(this.canvas=a.canvas),this.lastFrameTime||(this.lastFrameTime=b),b-this.lastFrameTime>=this.frameDelay&&(this.frameIndex=this.frameNums[this.frameIndex+1]||0,this.lastFrameTime=b),a.drawImage.apply(a,this.sprite.getFrame(this.frameIndex)(this))}},recycle:function(a){this.destroyed=!1,this.consumed=!1,this.y=a,this.x=c.random(0,this.canvas.width-this.w)},consume:function(){this.consumed=!0,this.destroyed=!0,e.points+=this.points,f.coin.play()}})}),c("src/js/lib/engine",["src/js/lib/canvases","src/js/entities/platform","src/js/entities/player","src/js/entities/cloud","src/js/lib/vent","src/js/lib/util","src/js/classes/pool","src/js/lib/camera","src/js/entities/coin","src/js/lib/sound"],function(a,b,c,d,e,f,g,h,i,j){function k(){c.dead||(p.entities.forEach(function(a){a instanceof b&&(a.collidesWithTop(c)&&c.landOn(a),"spike"===a.type&&a.collidesWithBottom(c)&&c.die())}),q.entities.forEach(function(a){a.collidesWith(c)&&!a.consumed&&a.consume()}))}var l,m,n,o=a.bg,p=a.world,q=a.items,r=a.main,s=null;n=function(){var a=10;return function(){return 80===a?a:a+=1}}(),m=function(){var a=null;return function(){var b,c=f.now();a=null!==a?a:c,s=null!==s?s:c,c-s>=1e4&&(b=f.random(0,100),(20>=b||c-a>=3e4)&&(p.entities.forEach(function(a){a.direction=-a.direction}),j.reverse.play(),e.emit("reverse"),a=c),s=c)}}(),l={init:function(){this.createClouds(),this.createPlatforms(),this.createCoins(),this.setPlayer(),this.bindEvents()},bindEvents:function(){e.on("update",k),e.on("update",m),e.on("update",this.recycleSprite.bind(this))},createClouds:function(){var a,b=0;for(a=0;8>a;a++)o.addEntity(new d({x:f.random(0,440),y:f.random(b,b+200)})),b+=100;this.clouds=new g(o.entities)},createPlatforms:function(){var a;for(this.lastY=750,a=0;15>a;a++)p.addEntity(new b({x:f.random(0,440),y:this.lastY})),this.lastY-=200;this.platforms=new g(p.entities)},createCoins:function(){var a;for(a=0;5>a;a++)q.addEntity(new i({x:f.random(0,440),y:f.random(0,440)}));this.items=new g(q.entities)},setPlayer:function(){r.addPlayer(c);var a=p.entities[0];c.x=a.x+a.w/2-c.w/2,c.landOn(a)},recycleSprite:function(){for(var a;a=this.platforms.recycle();)a.recycle(this.lastY),this.lastY-=f.random(100,400),f.random(1,100)<=n()?a.type="spike":(a.type="spike")&&(a.type="default");for(;a=this.items.recycle();)a.recycle(h.offset-f.random(100,300));for(;a=this.clouds.recycle();)a.recycle(h.offset/8-f.random(300,500))}},l.init()}),c("src/js/index",["src/js/lib/canvases","src/js/lib/gameloop","src/js/lib/interactions","src/js/lib/vent","src/js/lib/titlescreen","src/js/lib/engine","src/js/lib/score"],function(a,b,c,d,e){document.addEventListener("DOMContentLoaded",function(){e.show()},!1)}),b("src/js/index")});</script>

  </body>

</html>
