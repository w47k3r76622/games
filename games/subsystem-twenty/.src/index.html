<!DOCTYPE html><html><head><title>Subsystem Twenty</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD
    8GO2jAAAAfUlEQVRIx2O8cu0/Ay0BE01Nr2n8wERT0xkYGFjg/CUrvlDR9Bs3/9AjiIaFBSz4
    Q5AkoKHOQkMftNQLkOADPC7CCmIieIZvJI9aMGrBqAWjFpBdHxAsI6ngA1zlO3V8oKHOQq1Gx
    mgqIiEOyGtJEOsDSDuSVhbQznQGBgYAL+0bz/QTdM0AAAAASUVORK5CYII=" rel="icon" type="image/png"><style>html{width:100vw;height:100vh;background:linear-gradient(30deg,#023,#056,#023) no-repeat}body{position:absolute;width:100vw;height:100vh;margin:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#canvas-background{background-color:#111;z-index:1}#canvas-block{background-color:rgba(0,0,0,0);z-index:2}#canvas-ship{background-color:rgba(0,0,0,0);z-index:3}#text-element{display:flex;align-items:center;justify-content:center;width:1200px;height:800px;color:#eee;font-family:monospace;z-index:4}.fadein{animation-name:fadeIn;animation-duration:2s;animation-fill-mode:forwards}@keyframes fadeIn{from{background-color:#111}to{background-color:rgba(17,17,17,0)}}.fadeout{animation-name:fadeOut;animation-duration:2s;animation-fill-mode:forwards}@keyframes fadeOut{from{background-color:rgba(17,17,17,0)}to{background-color:#111}}</style></head><body><canvas id="canvas-background" width="1200" height="800" class="center"></canvas><canvas id="canvas-block" width="1200" height="800" class="center"></canvas><canvas id="canvas-ship" width="1200" height="800" class="center"></canvas><div id="text-element" class="center"></div><template><div id="intro" style="font-size: 18px;"><p style="font-size: 60px; font-weight: bold;">Subsystem Twenty</p><p>An eccentric billionare has made the electrically powered spaceship reality in the near future.<br>Unfortunately and unsurprisingly, the ships's battery life is not good.</p><p>There is two ways to charge your ship's battery:</p><p>1. Land on a red launchpad.<br>2. Fly over a beacon's energy field.</p><p>You are offline when you leave a launchpad or a beacon. Offline state steadily drains<br>the battery until the engine shuts off and gravity takes care of the rest.<br>The red bar on the top of the screen is the battery level indicator.</p><p><br>CONTROLS:</p><p>A - anticlockwise<br>D - clockwise</p><p>W - accelerate (or launch the ship when on the launchpad)<br>S - decelerate</p><p><br>Your mission is to land the spaceship on the blue launchpad.</p><p><br>PRESS THE SPACE BAR TO START.</p></div><div id="gameover" style="text-align: center;"><p style="font-size: 60px;">GAME OVER</p><p style="font-size: 20px;">Press the space bar to start over at the first level.</p></div><div id="nextlevel" style="text-align: center;"><p style="font-size: 60px;">LEVEL COMPLETED</p><p style="font-size: 20px;">Press the space bar to move up to the next level.</p></div></template><script>"use strict";var e=this&&this.__awaiter||function(e,t,i,A){return new(i||(i=Promise))(function(a,n){function o(e){try{s(A.next(e))}catch(e){n(e)}}function h(e){try{s(A.throw(e))}catch(e){n(e)}}function s(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,h)}s((A=A.apply(e,t||[])).next())})};function t(e){return document.querySelector(e)}function i(e){const i=t("#text-element"),A=t("template"),a=document.importNode(A.content,!0);i.appendChild(a.querySelector(e)),i.className="center fadeout"}function A(e){return Math.floor(Math.random()*Math.floor(e))}function a(e){return new Promise(t=>{const i=new Image;i.onload=(()=>{t(i)}),i.src=e})}function n(e){return new Promise(t=>{const i=document.createElement("canvas"),A=i.getContext("2d");i.width=40,i.height=40,A.rotate(Math.PI/2),A.translate(0,-40),A.drawImage(e,0,0,40,40);const a=new Image;a.onload=(()=>{t(a)}),a.src=i.toDataURL()})}const o=[{worldPosition:1700,map:[13,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,9,5,5,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,6,19,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,12,8,8,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,3,3,0,0,0,0,3,3,3,3,3,0,9,5,5,10,0,0,0,0,9,5,17,1,1,1,18,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,6,3,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,19,7,0,0,0,0,12,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,13,8,11,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,3,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,3,3,0,0,0,0,0,6,14,5,5,5,5,5,5,10,0,0,0,0,0,0,6,7,0,0,0,0,0,0,3,3,0,0,0,0,0,6,4,4,4,4,4,4,4,7,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,19,4,19,4,19,4,7,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,4,4,4,4,4,7,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,13,8,8,8,8,8,8,11,0,0,0,0,9,5,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,19,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,19,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,10,0,0,0,0,0,0,0,0,0,0,12,8,8,11,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,9,5,5,5,5,5,5,5,5,15,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,6,3,4,19,4,19,4,3,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,12,8,8,8,8,8,8,8,8,16,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,13,11,0,0,0,0,0,0,0,0,0,0,9,5,5,10,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,3,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,3,14,5,5,5,5,5,10,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,4,19,4,4,4,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,13,8,8,8,8,8,11,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,3,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,5,17,1,1,1,1,18,5,10,0,0,6,4,4,7,0,0,9,5,5,17,2,2,2,2,18,5,5,15,4,3,4,4,4,4,4,4,3,7,0,0,6,4,3,7,0,0,6,4,3,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4,14,5,5,15,4,4,14,5,5,15,4,4,4,4,4,4,4,4,4,4,4],ship:{x:160},beacons:[{x:300,y:1e3,r:150},{x:1e3,y:1900,r:120}],foes:[{image:"block3",x:300,y:1640,index:100,length:100,path:0},{image:"block3",x:250,y:1720,index:200,length:100,path:0},{image:"block3",x:200,y:1800,index:0,length:100,path:0},{image:"block3",x:400,y:720,index:100,length:200,path:0},{image:"foe",x:500,y:500,index:100,length:120,path:2},{image:"foe",x:500,y:500,index:150,length:120,path:2},{image:"foe",x:500,y:500,index:200,length:120,path:2},{image:"block3",x:800,y:850,index:200,length:200,path:1},{image:"block3",x:600,y:120,index:100,length:500,path:0},{image:"foe",x:880,y:1520,index:50,length:180,path:0},{image:"foe",x:880,y:1560,index:100,length:180,path:0},{image:"foe",x:880,y:1600,index:150,length:180,path:0},{image:"foe",x:880,y:1640,index:200,length:180,path:0}]},{worldPosition:900,map:[13,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,9,5,5,5,5,5,5,5,5,10,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,19,4,4,4,4,4,4,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,13,8,8,8,8,16,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,6,4,7,0,0,0,3,3,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,6,4,7,0,0,0,3,3,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,6,4,7,0,0,0,3,3,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,6,4,14,5,5,5,5,15,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,3,0,0,0,0,0,6,19,4,4,4,4,4,4,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,12,8,8,8,8,8,8,8,8,11,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,6,14,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,10,0,0,0,0,3,0,0,0,0,0,0,0,6,4,3,4,4,4,4,3,4,4,4,4,4,3,4,4,4,7,0,0,0,0,3,0,0,0,0,0,0,0,6,4,4,4,3,4,4,4,4,4,3,4,4,4,4,4,3,7,0,0,0,0,3,0,0,0,0,0,0,0,6,13,8,8,8,8,8,8,8,8,8,8,8,8,8,16,4,7,0,0,0,0,3,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,19,7,0,0,0,9,5,5,17,2,2,2,18,5,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,6,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,12,8,8,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,6,14,5,5,17,1,1,1,18,10,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,3,4,4,4,4,4,7,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,0,0,0,0,0,6,13,8,8,8,8,8,8,8,11,0,0,0,0,0,12,8,11,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,9,5,5,5,5,5,5,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,6,3,4,4,4,4,3,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,12,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,9,5,10,0,0,0,0,3,0,0,3,3,3,3,3,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,3,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,6,3,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,5,17,1,1,1,18,5,15,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,4,4,4,4,4,4,4,4,14,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,15],ship:{x:180},beacons:[{x:900,y:1370,r:150},{x:840,y:240,r:160}],foes:[{image:"block3",x:660,y:2120,index:10,length:160,path:1},{image:"block3",x:480,y:200,index:10,length:280,path:0},{image:"block3",x:240,y:400,index:100,length:200,path:0},{image:"block3",x:240,y:560,index:200,length:200,path:0},{image:"block3",x:240,y:760,index:300,length:200,path:0},{image:"foe",x:280,y:1600,index:0,length:180,path:0},{image:"foe",x:280,y:1650,index:50,length:180,path:0},{image:"foe",x:280,y:1700,index:100,length:180,path:0},{image:"foe",x:880,y:1560,index:0,length:200,path:0},{image:"foe",x:880,y:1600,index:50,length:200,path:0},{image:"foe",x:880,y:1640,index:100,length:200,path:0},{image:"foe",x:950,y:2180,index:10,length:100,path:2},{image:"foe",x:950,y:2180,index:50,length:50,path:2},{image:"block3",x:1e3,y:640,index:50,length:120,path:0}]},{worldPosition:400,map:[13,8,8,8,8,8,8,8,8,16,4,4,13,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,6,19,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,19,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,19,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,19,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,4,4,7,3,3,3,3,0,0,3,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,12,16,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,14,5,17,2,2,18,10,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,4,4,4,4,4,4,7,0,0,0,6,19,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,13,8,8,8,8,8,11,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,14,5,17,1,1,18,5,5,10,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,4,13,8,8,8,8,8,16,4,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,6,3,7,0,0,0,0,0,6,3,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,12,8,11,0,0,0,0,0,12,8,11,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,9,5,5,5,5,5,5,5,5,10,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,6,4,4,4,4,4,4,4,4,7,3,0,3,0,3,0,3,0,0,0,0,0,0,6,7,0,0,0,0,0,12,8,8,8,8,8,8,8,8,11,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,5,17,1,1,1,18,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,4,4,4,4,4,14,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,15],ship:{x:600},beacons:[{x:600,y:1240,r:160},{x:120,y:1520,r:90}],foes:[{image:"block3",x:700,y:620,index:10,length:240,path:1},{image:"block3",x:240,y:360,index:100,length:240,path:1},{image:"foe",x:600,y:1960,index:0,length:260,path:2},{image:"foe",x:600,y:1960,index:20,length:220,path:2},{image:"foe",x:600,y:1960,index:40,length:180,path:2},{image:"foe",x:600,y:1960,index:60,length:160,path:2},{image:"foe",x:600,y:1960,index:80,length:120,path:2},{image:"foe",x:600,y:1960,index:200,length:260,path:2},{image:"foe",x:600,y:1960,index:220,length:220,path:2},{image:"foe",x:600,y:1960,index:240,length:180,path:2},{image:"foe",x:600,y:1960,index:260,length:160,path:2},{image:"foe",x:600,y:1960,index:280,length:120,path:2},{image:"foe",x:200,y:1040,index:100,length:110,path:2},{image:"foe",x:200,y:1040,index:200,length:50,path:2}]},{worldPosition:1800,map:[13,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,5,17,2,2,18,5,10,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,4,4,4,4,4,4,4,7,0,0,0,0,0,3,0,0,0,0,0,9,5,10,0,0,0,0,0,0,0,6,13,8,8,8,8,8,8,11,0,0,3,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,4,7,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,19,7,0,0,0,0,0,0,0,6,14,5,17,1,1,1,18,5,10,0,0,0,0,3,0,0,0,0,0,6,4,14,5,5,5,5,10,0,0,6,4,3,4,4,4,4,4,3,7,0,0,0,0,3,0,0,0,0,0,6,4,3,3,4,3,3,7,0,0,6,4,4,13,8,8,8,8,16,7,0,0,0,0,3,0,0,0,0,0,6,13,8,8,8,8,8,11,0,0,6,4,4,7,0,0,0,0,6,7,0,0,0,0,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,4,4,14,5,5,5,5,15,7,0,0,3,3,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,13,8,8,8,8,8,8,8,11,0,0,0,0,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,14,5,5,17,1,1,1,18,5,15,14,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,15,4,4,4,4,4,4,4,4,4,4],ship:{x:980},beacons:[{x:640,y:1240,r:90},{x:160,y:2200,r:100}],foes:[{image:"block3",x:700,y:620,index:10,length:240,path:1},{image:"block3",x:360,y:2160,index:10,length:160,path:1},{image:"block3",x:250,y:1700,index:10,length:200,path:0},{image:"foe",x:250,y:500,index:10,length:210,path:0},{image:"foe",x:250,y:540,index:20,length:210,path:0},{image:"foe",x:250,y:580,index:30,length:210,path:0},{image:"foe",x:250,y:620,index:40,length:210,path:0},{image:"foe",x:250,y:660,index:50,length:210,path:0},{image:"foe",x:250,y:700,index:60,length:210,path:0},{image:"foe",x:250,y:740,index:70,length:210,path:0},{image:"foe",x:250,y:780,index:80,length:210,path:0},{image:"foe",x:250,y:820,index:90,length:210,path:0},{image:"foe",x:250,y:860,index:100,length:210,path:0},{image:"foe",x:250,y:900,index:110,length:210,path:0},{image:"foe",x:250,y:940,index:120,length:210,path:0},{image:"foe",x:250,y:980,index:130,length:210,path:0},{image:"foe",x:250,y:1020,index:140,length:210,path:0},{image:"foe",x:250,y:1060,index:150,length:210,path:0},{image:"foe",x:250,y:1100,index:160,length:210,path:0},{image:"foe",x:250,y:1140,index:170,length:210,path:0},{image:"foe",x:250,y:1180,index:180,length:210,path:0},{image:"foe",x:250,y:1220,index:190,length:210,path:0},{image:"foe",x:250,y:1260,index:200,length:210,path:0}]}];class h{constructor(e){this.key=e,this._on=!1,window.addEventListener("keydown",e=>{this.pressed(e)}),window.addEventListener("keyup",e=>{this.released(e)})}get on(){return this._on}pressed(e){e.code===this.key&&(this._on=!0)}released(e){e.code===this.key&&(this._on=!1)}}var s,g;!function(e){e[e.Blank=0]="Blank",e[e.Game=1]="Game",e[e.Wait=2]="Wait",e[e.Fatal=3]="Fatal",e[e.Launchpad=4]="Launchpad",e[e.Nextlevel=5]="Nextlevel"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Fatal=1]="Fatal",e[e.Beacon=2]="Beacon",e[e.Launchpad=3]="Launchpad",e[e.Nextlevel=4]="Nextlevel"}(g||(g={}));const l=document.createElement("canvas");l.width=1200,l.height=2400;const c={STATE:s.Wait,BATTERY:0,CURRENT_LEVEL:0,WORLD_POSITION:0,BUFFER_CANVAS:l,IMAGES:{},BEACONS:[],FOES:[],CONTEXT:{background:t("#canvas-background").getContext("2d"),block:t("#canvas-block").getContext("2d"),ship:t("#canvas-ship").getContext("2d"),buffer:l.getContext("2d")},KEY_W:new h("KeyW"),KEY_A:new h("KeyA"),KEY_S:new h("KeyS"),KEY_D:new h("KeyD"),KEY_SPACE:new h("Space"),BLOCK_SIZE:40,WORLD_POSITION_MAX:1600,WORLD_POSITION_MIN:0};let r;window.onload=function(){return e(this,void 0,void 0,function*(){x.init();for(let e=0;e<400;e+=1){const t=2*Math.PI/400*e,i=Math.sin(t),A=Math.cos(t),a=A-i,n=i+A;E.circleLookup.push([a,n]),E.sineLookup.push(Math.sin(t))}for(const e of C)c.IMAGES[e.name]=yield a(e.data);const e=[[6,5],[7,8],[10,11],[11,12],[3,19],[19,19]];for(const t of e){const e="block"+t[0],i="block"+t[1],A=yield n(c.IMAGES[e]);c.IMAGES[i]=A}i("#intro"),p()})};class x{static init(){for(let e=-12;e<12;e+=1)x.frequency.push(440*Math.pow(2,e/12))}static play(e){if(x.isPlaying)return;x.isPlaying=!0;const t=x.audioCtx.createGain(),i=x.audioCtx.createOscillator(),A=x.sounds[e],a=A[0];i.type="sine",i.connect(t),t.connect(x.audioCtx.destination);let n=1;const o=setInterval(()=>{const e=x.audioCtx.currentTime;i.frequency.setValueAtTime(x.frequency[A[n]],e),1===n&&i.start(),(n+=1)===A.length&&(clearInterval(o),t.gain.setTargetAtTime(0,e,this.GAIN_ZERO/1e3/5),setTimeout(()=>{i.stop(),x.isPlaying=!1},this.GAIN_ZERO))},a)}}x.GAIN_ZERO=500,x.audioCtx=new AudioContext,x.frequency=[],x.isPlaying=!1,x.sounds={gameover:[200,3,2,2,2,2,5,7,8,9,8,8,7,6,5,4,3,3,3,4,5],nextlevel:[200,13,12,11,9,8,7,15,16,16,16],energy:[100,12,11]};class d{constructor(e,t,i,A,a,n){this.context=e,this.image=t,this.x=i,this.y=A,this.w=a,this.h=n,this.angle=0}addRotation(e){this.angle+=e,this.sanityRotation()}sanityRotation(){this.angle<0?this.angle+=2*Math.PI:this.angle>2*Math.PI&&(this.angle-=2*Math.PI)}}class I extends d{constructor(e,t,i,A,a,n){super(e,t,i,A,a,n),this.MAX_VELOCITY=10,this.SHIP_ZERO_ANGLE=1.5*Math.PI,this.COLLISION_POINTS=[[0,0],[27,5],[60,4],[80,20],[0,39],[27,34],[60,35]],this.velocity=0,this.gravity=2,this.SHIP_LANDING_MIN=this.SHIP_ZERO_ANGLE-.2,this.SHIP_LANDING_MAX=this.SHIP_ZERO_ANGLE+.2,this.collisionPoints=this.COLLISION_POINTS,this.angle=this.SHIP_ZERO_ANGLE,c.WORLD_POSITION>c.WORLD_POSITION_MAX&&(this.y+=c.WORLD_POSITION-c.WORLD_POSITION_MAX)}gravityOff(){this.gravity=0}gravityOn(){this.gravity=2}launch(){this.y-=10}zeroRotation(){this.angle=this.SHIP_ZERO_ANGLE}setVelocity(e){this.velocity=e,this.sanityVelocity()}addVelocity(e){this.velocity+=e,this.sanityVelocity()}sanityVelocity(){this.velocity<0?this.velocity=0:this.velocity>this.MAX_VELOCITY&&(this.velocity=this.MAX_VELOCITY)}draw(){this.calculatePosition(),this.context.save(),this.context.translate(this.x+this.w/2,this.y+this.h/2),this.context.rotate(this.angle),this.context.drawImage(this.image,-this.w/2,-this.h/2,this.w,this.h),this.context.restore()}calculatePosition(){this.x+=Math.cos(this.angle)*this.velocity;const e=Math.sin(this.angle)*this.velocity+this.gravity;c.WORLD_POSITION+=e,(c.WORLD_POSITION<c.WORLD_POSITION_MIN||c.WORLD_POSITION>c.WORLD_POSITION_MAX)&&(this.y+=e)}testCollision(){this.rotateCollisionPoints();for(const e of this.collisionPoints){const t=c.CONTEXT.block.getImageData(this.x+e[0],this.y+e[1],1,1).data;if(0!==t[3]){if(t[0]===t[1]&&t[0]===t[2])return g.Beacon;if(this.angle>this.SHIP_LANDING_MIN&&this.angle<this.SHIP_LANDING_MAX){if(t[0]>250&&t[1]<5&&t[2]<5)return g.Launchpad;if(t[0]<5&&t[1]<5&&t[2]>250)return g.Nextlevel}return g.Fatal}}return g.None}rotateCollisionPoints(){const e=Math.sin(this.angle),t=Math.cos(this.angle),i=[];for(const A of this.COLLISION_POINTS){const a=A[0]-this.w/2,n=A[1]-this.h/2,o=t*a-e*n+this.w/2,h=e*a+t*n+this.h/2;i.push([o,h])}this.collisionPoints=i}}class O extends d{constructor(e,t,i,A,a,n,o){super(e,t,A,a,n,o),this.BEACON_MIN_RADIUS=20,this.relativeWorld=c.WORLD_POSITION,this.beaconCircleRadius=20,this.BEACON_MAX_RADIUS=i}draw(){this.relativeWorld=c.WORLD_POSITION,c.WORLD_POSITION<c.WORLD_POSITION_MIN?this.relativeWorld=0:c.WORLD_POSITION>c.WORLD_POSITION_MAX&&(this.relativeWorld=c.WORLD_POSITION_MAX),this.drawBeaconCircle(),this.context.save(),this.context.translate(this.x+this.w/2,this.y+this.h/2-this.relativeWorld),this.context.rotate(this.angle),this.context.drawImage(this.image,-this.w/2,-this.h/2,this.w,this.h),this.context.restore()}drawBeaconCircle(){const e=200/this.BEACON_MAX_RADIUS,t="rgba("+(Math.floor(255-this.beaconCircleRadius*e)+",").repeat(3)+"255)",i=this.x+this.w/2,A=this.y+this.h/2-this.relativeWorld;this.context.save(),this.context.strokeStyle=t,this.context.lineWidth=2,this.context.beginPath(),this.context.arc(i,A,this.beaconCircleRadius,0,2*Math.PI,!0),this.context.stroke(),this.context.restore(),this.beaconCircleRadius+=1,this.beaconCircleRadius>this.BEACON_MAX_RADIUS&&(this.beaconCircleRadius=this.BEACON_MIN_RADIUS)}}class E extends d{constructor(e,t,i,A,a,n,o,h,s){super(e,t,n,o,h,s),this.index=i,this.length=A,this.path=a,this.originX=this.x,this.originY=this.y}draw(){let e=c.WORLD_POSITION;c.WORLD_POSITION<c.WORLD_POSITION_MIN?e=0:c.WORLD_POSITION>c.WORLD_POSITION_MAX&&(e=c.WORLD_POSITION_MAX),this.calculatePosition(),this.context.drawImage(this.image,this.x,this.y-e,this.w,this.h)}calculatePosition(){switch(this.path){case 0:this.x=this.originX+E.sineLookup[this.index]*this.length;break;case 1:this.y=this.originY+E.sineLookup[this.index]*this.length;break;case 2:this.x=this.originX+E.circleLookup[this.index][0]*this.length,this.y=this.originY+E.circleLookup[this.index][1]*this.length}this.index+=1,E.sineLookup.length===this.index&&(this.index=0)}}E.sineLookup=[],E.circleLookup=[];const C=[{name:"block1",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAYklEQVRYR+3YsQ0AMQgEQei/6Pf3MAnBIqcnoeEi7xyfPb7ftKBeKMEEVUDzdTBBFdB8HUxQBTRfBxNUAc3XwQRVQPN1MEEV0HwdTFAFNH+/g9/M/+7OtiAeJ0EE7I9aAecBWHIKH8vUgysAAAAASUVORK5CYII="},{name:"block2",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAZUlEQVRYR+3TwQkAIQAEMe2/aLWHICjM/Qc0t87x+DcfP9/ogPqHEkxQBbRvgwmqgPZtMEEV0L4NJqgC2rfBBFVA+zaYoApo3wYTVAHtf9jgWnrLm/0R7IAEnCDxnfiHV6x3vNtvTnwKH/6NF1kAAAAASUVORK5CYII="},{name:"block3",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAjUlEQVRYR+2YUQqAIBAF9dYebo/gFTpLsR9Fa0HIBr1g/FYcxtV9WHtf1iI8qjJga63IAjqcD0nAHe4W0Mw+rchx/4tBAB/OB4PZAsYgBnlmeGaytwCDGIxpijQzWxH04llj43wMYpA0Qy/O3gIMYpA0k6uB//fi8+dhzsU7q0OiVoMLP6yKcAegKpwDbuQHITAsaboRAAAAAElFTkSuQmCC"},{name:"block4",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAW0lEQVRYR+3SwQ0AEBQFQbrXgmopYi8i476JzH9zrX3Gw2/6YLwOwQg4CBKsArW3QYJVoPY2SLAK1N4GCVaB2tsgwSpQexskWAVqb4MEq0DtbZBgFai9DX4veAEceWppzAMsBgAAAABJRU5ErkJggg=="},{name:"block6",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAeElEQVRYR+3XwQnAIAwAQN1/JUdwhc7S9lWKUDBpnuc7CXLEBHsrOnMe57vUGKOkci+pchdxwb+SBAkmBbziJNyTRpDgroBBvSv1FUeQYFLAoE7CWXXNpynaOwZ1VGyNJ0gwKWDVJeGsOqsu3DoGdZhsSSBIMClwAXsE4mlLb4P9AAAAAElFTkSuQmCC"},{name:"block7",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAe0lEQVRYR+3YwQnAMAiFYd0+K3SGrvB2a2+BFgLmmeOfs0r4EA3JMa4nDhxJnyrSnQfKRnLBJiOCTUB6sAuIIIJlATZJmWoRiCCCpgCPBRNupiGIYFWAQV2VWsUhiKApwKA24Vh1we/Wbu8wqHfF/vEIImgKsOpMuJn2AiE4GDiabku3AAAAAElFTkSuQmCC"},{name:"block9",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAoElEQVRYR+3S2wnAIBBE0dh/S5ZgC6klwY9ACHmos+sOYfxfOFwnLeQvkfsWAdEfUkEVRAug99qgCqIF0HttUAXRAui9NvjrgqWsG+0XV1ytTwk8cJTAM44OeMVRAe9wOWeODT7hKAq+4cKBX7hQYAsuDNiKCwH24KYDe3FTgSO4acBR3BQggnMHojhXoAXODWiFcwFa4syB1jhToAeuAnerbHGV0VGvwAAAAABJRU5ErkJggg=="},{name:"block10",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAq0lEQVRYR+3T2w2AIAyFYbsbK7gTKziDK7CbiiYkBC/AifQ8lPcmHz9FJvIj5L7JgOgLWUEriBZA520HrSBaAJ23HbSCaAF03nYQLujcvIWw0paUCIy3ZEUmICsyAzIiCyAbUrxfjk8Sis/GspMn8KrGiUxAVmQGZEQWQDbkLZAJ+QhkQb4CGZCfQG1kFVATWQ3UQjYBNZDNwNHILuBIZDdwFBICjkDCwL+RO3SsiynUZoyqAAAAAElFTkSuQmCC"},{name:"block13",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAfUlEQVRYR+3U0QmAMAxF0Wb7ruAMrpDdFH/FQvQqKN5+90F68jR6n5b24hMOCLejIARsCipIBWjeDipIBWjeDipIBWj+Px3MTIp1mL9N0AHpfj4nmDkHffSWf6yDDnh2PfsOKqhgUcCvuAg1vKagglUBf9RVqdE9BRW8KLACcN7BaZYikPEAAAAASUVORK5CYII="},{name:"block14",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAjElEQVRYR+3WQQqAMAxE0eb2uYJn8Aq5mwUXgqBQOpPd79qE4XWgRuZxDcOpqteWqjMMa0cQUGREUASkgyogggguC/CSLFP9fIgggpsC/Cxswj1jbYKZqWa751sCusK1BHSGswd0h7MGtBTuY4mtgwTsElD3csUIqgLqPB1EUBVQ5+kggqqAOk8HVcEJmkTHyTsGwF0AAAAASUVORK5CYII="},{name:"block15",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAi0lEQVRYR+3Xuw3AIAxFUbw9K7CLR2CFzJJQRfkICfm5oLipeZZzMCixkvT0fpzPUu6eUtlSqowiNKhKIohgUIBTHIS7YwgiuCrARb0qNVuHIIJBAfvOTrDOL5b2RU2D4pbsv8W1ttffmPjC6XGjQdEUQRGwIIigKqDmmUEEVQE1zwwiqAqo+e1n8AI0s6xpZncO+gAAAABJRU5ErkJggg=="},{name:"block16",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAmUlEQVRYR+3W2wnAIBBEUe1tW0hP20J6sQRbSC15QYR8BMRREHL9zoTh7BoS3dc9THwiBcXpICgCBgQRVAXUPDuIoCqg5tlBBFUBNT//DpotQ/6ozUzFu/NxREF3DymlOQte5a4zZcGnXNeCXeZwviTn7bXL3QQpKApEMV/ijFiVRBDBRgFucSNciSGIYK0AH+paqa/nfit4AGOpqWlyOVaGAAAAAElFTkSuQmCC"},{name:"block17",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAw0lEQVRYR+3XwQ2AIAyFYdiaEVjBXRiBFZxFw00FEXiU1qSepfn84YDWTHpi3I9Jo25j7IyhVDjnnIGBlLgUDwJS4yBgCRdCgE/Mc8ZQQSpc+joYSImDgdQ4CLgCNwxchRsCrsR1A1fjuoAcuGYgF64JyIn7BHLjqkAJuFegFFwRKAnXBJxxZULuXNlt5lqQG1ctKAFXBHq/kfyNjW5ztsUK7EypBTuDZa9rQS2IFkDX6xnUgmgBdL2eQS2IFkDX/+4MnlIW9yEgH5zGAAAAAElFTkSuQmCC"},{name:"block18",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAuklEQVRYR+3XzQ2AIAyGYZnFFRyOnVyhI7CCs2g4mBjFH/ja0phyL3l80wOGlJZ1EDjTNAaOa4MUMMY4EM0wUgSYcftBkezAI44DeQESEbw6pTtaS4oA8xdyIcWAXEhRIAdSHIgiVYAIUg3YilQFtiDVgbXILsAaZDfgV2RX4Bdkd+Ab0gTwCWkGeIc0BSwhzQHPSJPAI9IscH/WOxD9wfGCXhAtgM77DnpBtAA67zvoBdEC6Lzv4O8LbnXHKnghF4TyAAAAAElFTkSuQmCC"},{name:"ship",data:"data:image/png;base64,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"},{name:"beacon",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAEvElEQVRYR82Y20sVURTGd8/pwa6UlXooLImuliFaFmXihSiMrCgqsnoqKIgeuj4EkRE99dJ/0L2HXkSIikSy0kREs+J4y6KLxrGeJ79da1qzZ+2ZOcceGhDPZc7ev/nWWt/ea09S//k1KV2+WdNmOrFYpsqaOl1NmTpDZU2Z5hnq++g3NTryRX0f+ap6E+/TniflH+bH5zsrVpeqOXPnaqDJGRn6/88fP8RnTSaTamz8D8CJd90pw0YGLCpc4yxdUaRmZ2cHih4Eih8O9idUR1ur+vTtc6S5Q29CKMs2Vqr8RYs8YYQi0mUDxL1QExcUTbzvUa2vnofOH3gDwlmzbaeaMy/Xx8IBg6Ckh+BhD1PTCgi4I8dOqbx4vupL9PoKICjvohReVEgRkMNhMg4I5UgxCpkEFIvFQjmjQPoAkXMnz1zUytFFgARHA+N7shP9etxScHHryRwHBSxVu6k8jWXLSR/giROnnf17D+uJ3o5XHCkIkI/Dw65lwOMG+hKh1chtSYKkKKC6JRvyAFaU1zhXGq67ygEQ6plw6fiZZFM8VcgrzaLxAN598NjZtL5EA/YnhrWCAOzu6tT+hSus6oISD2qu21jl8VIOiTkQGW4/LiDUu3X7vjs+ATY/bVIfhoa0ihOBo4HJusxw2wrGBbx67YZTf+CAT73Wlua0lymbmgh3RfVW92tSkYTgKmpAPNWde49Ubvz3MsbV6+rs8MkuTYwx6PNkciy0eOrrjzp82QSkVNEaUApv0+NGN/eCQguwg4XLfcxtiX71pG/ACiqpKIVZA8Jazp+74FHvdVuL6u3p0eFtbHpoNfSG6ioX7s2nYfc1AHHZIOG3u/cd0suo6a9856MnRv6Vr69wB0f1ojjCwnt5e62zcNbf3Y0EiEFvvnopPmDdjn1OUXGJBsSFMFMekpX5AMlaPgz2a0Cb5yG0XD1MYAO0qYjU2ly1xQOIMHO7sQKS99kA6wpXObuKiz25ZwNsHxkVN6qUh9iN8zD7AM+eu+QsX/l3Mm7OUQE5HKgpB4PyEIB1ew7qhyRA02rcIilZV+6qAcBUQ2xTLwhQCrEICE+qrKnVgLRzASBuDtr5okh8/mKoF1QkkheKRUJPwieLAgirOL5hrYeRhzZIPXwHe+NNl9Rg6RDzXKDZaAcT1uToniUvRxLy3xk1N00OSL4UpcHBGJwyrGtDeAsWLxE90LcWY2AyTROQZG9/8SzlnlaU9U/EsFkw7UXqn12Hh/HW7a33jUmLeFiobTDm57xT5CsIGTTu52u/ZwmCiuh/+WVuKCeyJ0Sul5ZtcttYaQ22blgBJW0m8bm5NU8n3HzVwJi8OyRrMdXDe98iDstZvGSZpwvjkHhN4QjrTVA4OXlxRUcmdMBkhjbo7Ma6y8DhkK1V5CnAF3f6nE67aAwJjB6U4MzQ0lgiIJ3H0AkWBwI0hZw/QNQikTo5G5wYYprIPGYzAVKFM08juHJB/XXg4REpSacDNpVssPxQiZ9sUQ5Gaf5Dj794ogMwypmLmaN4D8WoevE/rMACc1BSCiGPLyjQ7g9Fo14mWBTV+NihCpogpGh8vtfQJWAeShwsRWlHzXFSBuQD8IN0ETBNqAkpGDW0/+q+X9gZAXRmW+rLAAAAAElFTkSuQmCC"},{name:"foe",data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACDElEQVRYR+2XPUsDQRCGk1qFWIoiFmoj+JFCxF47sYmF4I8QUvgDLMQunY2FomATsBL8BSIW8QNs1ELiiaUBtY68BxMmy+3uzO0WKS7N3eVmdx6e3Z3dK5cG/FcecL5SARg6QoXBwqDLwOL8Und6dq4XMjQ8kt7//f70/nt7eS49PN3nnkq5GhIYAfmGEcB5QdWAtdpOVwpmggO02TxX5RQHm9ZGKxWruO9Ox/pOa1MMyM0R3Nj4RB/I12fSe/ZBSk2KAE04ApucmukDbL+/ps8EGgPSC4ihXaiupIlhzoRbXa6m727uWukVkFKTj61b7wr3AmbZgzkC4wqzIEMtOgGz7NGwZgGSSW7RBYh4n0UnoMYemYRFDaCv9EQF1A4x7TquFZ0LEB3HmIPRAdEhVrE5D8mcuYp984+mxenJkVWUyiAB4mqrgdI6yFd/FECqgxySJ+FguJfaQ2w0QA5pwvFnKRwKP2KjAhKI7bCggUNfSfLhPOGIC7XLmPYdP2xcnB07tzvVVqcFyYo3T0LBgHy7CwXkcKgC11eXzvmHfF6DCAo5RZtzltfR7a11b35vACUIgTTNYRfa3FjzHrXEBhGo/VCymQNcvb4r/jYRG8xj0jSHPg7390TmKJ8aUGrTXK04ZTcaB+p86gZ8Jds+3ClG+wWXVSWCAEPLjqR9ASix5IopDBYGQw2Etv8HrWMxOJXdulUAAAAASUVORK5CYII="}];function p(){switch(c.STATE){case s.Blank:break;case s.Wait:if(c.KEY_SPACE.on){c.STATE=s.Blank;const e=document.querySelector("#text-element");e.removeChild(e.firstChild),e.className="center fadein",function(){c.CONTEXT.background.clearRect(0,0,1200,800);for(let e=0;e<2e3;e+=1){const e=A(1200),t=A(800),i=A(100)+100+",";c.CONTEXT.background.fillStyle="rgba("+i.repeat(3)+"255)",c.CONTEXT.background.fillRect(e,t,1,1)}const e=o[c.CURRENT_LEVEL];c.WORLD_POSITION=e.worldPosition,c.BATTERY=1180,c.CONTEXT.buffer.clearRect(0,0,1200,2400);for(let t=0;t<60;t+=1)for(let i=0;i<30;i+=1){const A=e.map[30*t+i],a="block"+A;0!==A&&c.CONTEXT.buffer.drawImage(c.IMAGES[a],i*c.BLOCK_SIZE,t*c.BLOCK_SIZE,c.BLOCK_SIZE,c.BLOCK_SIZE)}c.BEACONS=[];for(const t of e.beacons)c.BEACONS.push(new O(c.CONTEXT.block,c.IMAGES.beacon,t.r,t.x,t.y,c.BLOCK_SIZE,c.BLOCK_SIZE));c.FOES=[];for(const t of e.foes)c.FOES.push(new E(c.CONTEXT.block,c.IMAGES[t.image],t.index,t.length,t.path,t.x,t.y,c.BLOCK_SIZE,c.BLOCK_SIZE));r=new I(c.CONTEXT.ship,c.IMAGES.ship,e.ship.x,380,2*c.BLOCK_SIZE,c.BLOCK_SIZE),c.STATE=s.Game}()}break;case s.Game:c.BATTERY>0?c.BATTERY-=1:r.addVelocity(-.01),R(),m(),function(){c.KEY_A.on&&r.addRotation(-.05);c.KEY_D.on&&r.addRotation(.05);c.KEY_W.on&&c.BATTERY>0&&r.addVelocity(.05);c.KEY_S.on&&r.addVelocity(-.05)}(),function(){switch(r.testCollision()){case g.None:break;case g.Beacon:x.play("energy"),c.BATTERY<1130&&(c.BATTERY+=50);break;case g.Fatal:c.STATE=s.Fatal,x.play("gameover"),c.CURRENT_LEVEL=0,r.setVelocity(0),r.gravityOff(),i("#gameover"),window.setTimeout(()=>{c.STATE=s.Wait},1e3);break;case g.Launchpad:c.STATE=s.Launchpad,x.play("energy"),c.BATTERY=1180,r.setVelocity(0),r.zeroRotation(),r.gravityOff();break;case g.Nextlevel:c.STATE=s.Nextlevel,x.play("nextlevel"),c.CURRENT_LEVEL+=1,c.CURRENT_LEVEL===o.length&&(c.CURRENT_LEVEL=0),r.setVelocity(0),r.zeroRotation(),r.gravityOff(),i("#nextlevel"),window.setTimeout(()=>{c.STATE=s.Wait},1e3)}}();break;case s.Fatal:r.addRotation(.1),R(),m();break;case s.Launchpad:c.KEY_W.on&&(r.launch(),r.addVelocity(3),r.gravityOn(),c.STATE=s.Game),R(),m();break;case s.Nextlevel:R(),m()}window.requestAnimationFrame(p)}function m(){c.CONTEXT.ship.clearRect(0,0,1200,800),r.draw(),c.CONTEXT.ship.fillStyle="rgb(0, 0, 0)",c.CONTEXT.ship.fillRect(8,3,c.BATTERY+4,14),c.CONTEXT.ship.fillStyle="rgb(200, 20, 20)",c.CONTEXT.ship.fillRect(10,5,c.BATTERY,10)}function R(){let e=c.WORLD_POSITION;c.WORLD_POSITION<c.WORLD_POSITION_MIN?e=c.WORLD_POSITION_MIN:c.WORLD_POSITION>c.WORLD_POSITION_MAX&&(e=c.WORLD_POSITION_MAX),c.CONTEXT.block.clearRect(0,0,1200,800);for(const e of c.BEACONS)e.addRotation(.05),e.draw();for(const e of c.FOES)e.draw();c.CONTEXT.block.drawImage(c.BUFFER_CANVAS,0,e,1200,800,0,0,1200,800)}</script></body></html>