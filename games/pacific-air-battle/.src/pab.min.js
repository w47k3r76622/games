'use strict';function aa(a,b=new a.g(16)){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}
function ba(a,b,c,d,e,f=new a.g(16)){a=b[0];var h=b[1],g=b[2],m=b[3],n=b[4],p=b[5],l=b[6],q=b[7],C=b[8],w=b[9],u=b[10],r=b[11],I=b[12],E=b[13],K=b[14],v=b[15];b!==f&&(f[0]=a,f[1]=h,f[2]=g,f[3]=m,f[4]=n,f[5]=p,f[6]=l,f[7]=q,f[8]=C,f[9]=w,f[10]=u,f[11]=r);f[12]=a*c+n*d+C*e+I;f[13]=h*c+p*d+w*e+E;f[14]=g*c+l*d+u*e+K;f[15]=m*c+q*d+r*e+v;return f}
function ca(a,b,c,d=new a.g(16)){a=b[0];var e=b[1],f=b[2],h=b[3],g=b[8],m=b[9],n=b[10],p=b[11],l=Math.cos(c);c=Math.sin(c);d[0]=l*a-c*g;d[1]=l*e-c*m;d[2]=l*f-c*n;d[3]=l*h-c*p;d[8]=l*g+c*a;d[9]=l*m+c*e;d[10]=l*n+c*f;d[11]=l*p+c*h;b!==d&&(d[4]=b[4],d[5]=b[5],d[6]=b[6],d[7]=b[7],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);return d}
function da(a,b,c,d=new a.g(16)){a=b[0];var e=b[1],f=b[2],h=b[3],g=b[4],m=b[5],n=b[6],p=b[7],l=Math.cos(c);c=Math.sin(c);d[0]=l*a+c*g;d[1]=l*e+c*m;d[2]=l*f+c*n;d[3]=l*h+c*p;d[4]=l*g-c*a;d[5]=l*m-c*e;d[6]=l*n-c*f;d[7]=l*p-c*h;b!==d&&(d[8]=b[8],d[9]=b[9],d[10]=b[10],d[11]=b[11],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);return d}function ea(a,b,c=new a.g(3)){a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);1E-5<a&&(c[0]=b[0]/a,c[1]=b[1]/a,c[2]=b[2]/a);return c}
function fa(a,b,c,d=new a.g(3)){d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];return d}function ha(a,b,c,d=new a.g(3)){d[0]=b[1]*c[2]-b[2]*c[1];d[1]=b[2]*c[0]-b[0]*c[2];d[2]=b[0]*c[1]-b[1]*c[0];return d}function ia(a,b,c,d,e=new a.g(16)){c=ea(a,fa(a,b,c));d=ea(a,ha(a,d,c));a=ea(a,ha(a,c,d));e[0]=d[0];e[1]=d[1];e[2]=d[2];e[3]=0;e[4]=a[0];e[5]=a[1];e[6]=a[2];e[7]=0;e[8]=c[0];e[9]=c[1];e[10]=c[2];e[11]=0;e[12]=b[0];e[13]=b[1];e[14]=b[2];e[15]=1;return e}
function ra(a,b,c,d=new a.g(16)){a=c[0];var e=c[1],f=c[2],h=c[3],g=c[4],m=c[5],n=c[6],p=c[7],l=c[8],q=c[9],C=c[10],w=c[11],u=c[12],r=c[13],I=c[14];c=c[15];var E=b[0],K=b[1],v=b[2],P=b[3],L=b[4],F=b[5],Q=b[6],t=b[7],J=b[8],R=b[9],S=b[10],D=b[11],M=b[12],G=b[13],V=b[14];b=b[15];d[0]=a*E+e*L+f*J+h*M;d[1]=a*K+e*F+f*R+h*G;d[2]=a*v+e*Q+f*S+h*V;d[3]=a*P+e*t+f*D+h*b;d[4]=g*E+m*L+n*J+p*M;d[5]=g*K+m*F+n*R+p*G;d[6]=g*v+m*Q+n*S+p*V;d[7]=g*P+m*t+n*D+p*b;d[8]=l*E+q*L+C*J+w*M;d[9]=l*K+q*F+C*R+w*G;d[10]=l*v+q*Q+
C*S+w*V;d[11]=l*P+q*t+C*D+w*b;d[12]=u*E+r*L+I*J+c*M;d[13]=u*K+r*F+I*R+c*G;d[14]=u*v+r*Q+I*S+c*V;d[15]=u*P+r*t+I*D+c*b;return d}function sa(a,b,c,d,e,f=new a.g(16)){a=Math.tan(.5*Math.PI-.5*b);b=1/(d-e);f[0]=a/c;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=a;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=(d+e)*b;f[11]=-1;f[12]=0;f[13]=0;f[14]=d*e*b*2;f[15]=0;return f}
function ta(a,b,c,d,e,f,h,g=new a.g(16)){g[0]=2/(c-b);g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/(e-d);g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=2/(f-h);g[11]=0;g[12]=(b+c)/(b-c);g[13]=(d+e)/(d-e);g[14]=(f+h)/(f-h);g[15]=1;return g}function ua(a,b,c=new a.g(16)){c[0]=b[0];c[1]=b[4];c[2]=b[8];c[3]=b[12];c[4]=b[1];c[5]=b[5];c[6]=b[9];c[7]=b[13];c[8]=b[2];c[9]=b[6];c[10]=b[10];c[11]=b[14];c[12]=b[3];c[13]=b[7];c[14]=b[11];c[15]=b[15];return c}
class va{constructor(){this.g=Float32Array}inverse(a,b=new this.g(16)){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],m=a[6],n=a[7],p=a[8],l=a[9],q=a[10],C=a[11],w=a[12],u=a[13],r=a[14];a=a[15];var I=q*a,E=r*C,K=m*a,v=r*n,P=m*C,L=q*n,F=e*a,Q=r*f,t=e*C,J=q*f,R=e*n,S=m*f,D=p*u,M=w*l,G=h*u,V=w*g,ja=h*l,ka=p*g,la=c*u,ma=w*d,na=c*l,oa=p*d,pa=c*g,qa=h*d,Ra=I*g+v*l+P*u-(E*g+K*l+L*u),Sa=E*d+F*l+J*u-(I*d+Q*l+t*u);u=K*d+Q*g+R*u-(v*d+F*g+S*u);d=L*d+t*g+S*l-(P*d+J*g+R*l);g=1/(c*Ra+h*Sa+p*u+w*d);b[0]=g*Ra;b[1]=
g*Sa;b[2]=g*u;b[3]=g*d;b[4]=g*(E*h+K*p+L*w-(I*h+v*p+P*w));b[5]=g*(I*c+Q*p+t*w-(E*c+F*p+J*w));b[6]=g*(v*c+F*h+S*w-(K*c+Q*h+R*w));b[7]=g*(P*c+J*h+R*p-(L*c+t*h+S*p));b[8]=g*(D*n+V*C+ja*a-(M*n+G*C+ka*a));b[9]=g*(M*f+la*C+oa*a-(D*f+ma*C+na*a));b[10]=g*(G*f+ma*n+pa*a-(V*f+la*n+qa*a));b[11]=g*(ka*f+na*n+qa*C-(ja*f+oa*n+pa*C));b[12]=g*(G*q+ka*r+M*m-(ja*r+D*m+V*q));b[13]=g*(na*r+D*e+ma*q-(la*q+oa*r+M*e));b[14]=g*(la*m+qa*r+V*e-(pa*r+G*e+ma*m));b[15]=g*(pa*q+ja*e+oa*m-(na*m+qa*q+ka*e));return b}};function wa(a){var b=["attribute vec4 aVertexPosition;\n\t\tattribute vec3 aVertexNormal;\n\t\t\n\t\tuniform mat4 uProjectionMatrix;\n\t\tuniform mat4 uNormalMatrix;\n\t\t\n\t\tvarying vec3 aVertexColor;\n\n\t\tvarying highp vec3 vLighting;\n\n\t\tvoid main()\n\t\t{\n\t\t\tgl_Position=uProjectionMatrix * aVertexPosition;\n\n\t\t\t// Apply lighting effect\n\n\t\t\thighp vec3 ambientLight = vec3(0.4, 0.4, 0.4);\n\t\t\thighp vec3 directionalLightColor = vec3(1, 1, 1);\n\t\t\thighp vec3 directionalVector = normalize(vec3(0.85, 1, 0.75));\n\n\t\t\thighp vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);\n\t\t\thighp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);\n\t\t\tvLighting = ambientLight + (directionalLightColor * directional);\n\n\t\t\taVertexColor=mat3(uNormalMatrix)* aVertexNormal;\n\t\t}",
"precision mediump float;\n\t\tvarying highp vec3 vLighting;\n\t\tvarying vec3 aVertexColor;\n\t\tuniform vec4 e;\n\t\tvoid main()\n\t\t{\n\t\t\tvec3 f=normalize(aVertexColor);\n\t\t\tgl_FragColor=e;\n\t\t\tgl_FragColor.rgb *= vLighting;\n\t\t}"];const c=[];for(let h=0;h<b.length;++h){var d=c,e=d.push,f=a;const g=f.l.createShader(a.l[a.g[h]]);f.l.shaderSource(g,b[h]);f.l.compileShader(g);e.call(d,g)}return a.createProgram(c)}
function xa(a){const b=a.clientWidth|0,c=a.clientHeight|0;if(a.width!==b||a.height!==c)a.width=b,a.height=c}class ya{constructor(a){this.l=a;this.g=["VERTEX_SHADER","FRAGMENT_SHADER"]}createProgram(a){const b=this.l.createProgram();a.forEach(c=>{this.l.attachShader(b,c)});this.l.linkProgram(b);return this.l.getProgramParameter(b,this.l.LINK_STATUS)?b:null}};function k(a){let b=[];b[0]=((a&16711680)>>16)/255;b[1]=((a&65280)>>8)/255;b[2]=(a&255)/255;return b}function za(a,b=a,c=[]){let d=b.children;b!==a&&c.push(b);d.forEach(e=>{e.visible&&(c=za(a,e,c))});return c}function Aa(a,b){b.G=[...b.position];let c=b.parent;c===a&&(b.G=[...b.position]);for(;c!==a;){if(!c){b.G=[0,0,0];break}b.G[0]+=c.position[0];b.G[1]+=c.position[1];b.G[2]+=c.position[2];c=c.parent}}
function Ba(a,b){b.parent!==a?(b.N=b.parent.N,b.N=ba(a.P,b.N,b.position[0],b.position[1],b.position[2])):(b.N=aa(a.P),b.N=ba(a.P,b.N,b.G[0],b.G[1],b.G[2]));b.N=da(a.P,b.N,b.wa);b.N=ca(a.P,b.N,b.ba)}
function Ca(a){let b=[];a.j.forEach(c=>{a.j.forEach(d=>{if(c!==d){let e=c.size[0]/2+d.size[0]/2,f=c.size[1]/2+d.size[1]/2;c.ha&d.constructor.M&&Math.abs(d.G[0]-c.G[0])<e&&Math.abs(d.G[2]-c.G[2])<f&&(b.find(h=>h.some(g=>g===c||g===d))||b.push([c,d]))}})});b.forEach(c=>{x(c[0].aa,c[0],c[1]);x(c[1].aa,c[1],c[0])})}function Da(a,b){a.j.includes(b)||a.j.push(b)}function y(a,b){let c=a.j.findIndex(d=>d===b);0<=c&&a.j.splice(c,1)}function Ea(a,b){b.forEach(c=>{y(a,c)})}
function z(a,b,c=a){b.parent&&a.removeChild(b);c.children.push(b);b.parent=c;a.ga=!0}function Fa(a,b,c){b.forEach(d=>{z(a,d,c)});a.ga=!0}function Ga(a,b){b.forEach(c=>{a.removeChild(c)});a.ga=!0}function Ha(a,b=a){for(;0<b.children.length;)a.removeChild(b.children[0]);a.ga=!0}function Ia(a,b,c){return[(a-c)/Math.sqrt(2),(a-2*b+c)/Math.sqrt(6)]}function Ja(a,b,c){b=(Math.sqrt(6)*b-Math.sqrt(2)*a+2*c)/2;return[Math.sqrt(2)*a+b,c,b]}
class Ka{constructor(){this.pa={Na:null,Ma:null};document.addEventListener("keydown",a=>{this.pa.Ma&&this.pa.Ma(a)});document.addEventListener("keyup",a=>{this.pa.Na&&this.pa.Na(a)});this.A=document.getElementById("glcanvas");this.canvas=document.getElementById("canvas");this.o=this.canvas.getContext("2d");this.A.style.background="#00bfff";this.o.font="32px Comic Sans MS";this.o.fillStyle="red";this.o.textAlign="left";this.l=this.A.getContext("webgl");this.W=new ya(this.l);this.P=new va;this.m=wa(this.W);
this.ia=[];this.J=this.l.getAttribLocation(this.m,"aVertexPosition");this.H=this.l.getAttribLocation(this.m,"aVertexNormal");this.ea=this.l.getUniformLocation(this.m,"uProjectionMatrix");this.da=this.l.getUniformLocation(this.m,"uNormalMatrix");this.Y=this.l.getUniformLocation(this.m,"e");this.Ra=[];this.children=[];this.s=[];this.i=this.l.canvas.width/this.l.canvas.height;this.V=Math.PI/3;this.D=20*this.i;this.I=20;this.v=ta(this.P,-10*this.i,10*this.i,-10,10,0,50);this.g=new La(this);this.l.enableVertexAttribArray(this.J);
this.l.enableVertexAttribArray(this.H);this.S=this.l.createBuffer();this.l.bindBuffer(this.l.ARRAY_BUFFER,this.S);this.l.bufferData(this.l.ARRAY_BUFFER,A.i,this.l.STATIC_DRAW);this.l.vertexAttribPointer(this.H,3,this.l.FLOAT,!1,0,0);this.Z=this.l.createBuffer();this.l.bindBuffer(this.l.ELEMENT_ARRAY_BUFFER,this.Z);this.l.bufferData(this.l.ELEMENT_ARRAY_BUFFER,new Uint16Array(A.g),this.l.STATIC_DRAW);xa(this.l.canvas);this.l.viewport(0,0,this.l.canvas.width,this.l.canvas.height);this.l.enable(this.l.CULL_FACE);
this.l.enable(this.l.DEPTH_TEST);this.l.useProgram(this.m);this.K=0;this.Ra=[];this.u=.2;requestAnimationFrame(this.F.bind(this));this.ga=!1;this.j=[]}F(a){this.ga&&(this.s=za(this),this.s.forEach(e=>{Aa(this,e);Ba(this,e)}),this.ga=!1);let b=(a-this.K)/1E3;this.K=a;b>this.u&&(b=this.u);this.l.clear(this.l.COLOR_BUFFER_BIT|this.l.DEPTH_BUFFER_BIT);let c=ra(this.P,this.v,this.g.j);this.s.forEach(e=>{e.position[0]+=e.speed[0]*b;e.position[2]+=e.speed[1]*b;Aa(this,e);e.ba+=e.qb*b;e.wa+=e.va*b;Ba(this,
e);if(e.la){this.l.bindBuffer(this.l.ARRAY_BUFFER,e.la.Qa);var f=this.l.FLOAT;this.l.vertexAttribPointer(this.J,3,f,!1,0,0);f=ra(this.P,c,e.N);var h=this.P.inverse(e.N);h=ua(this.P,h);this.l.uniformMatrix4fv(this.ea,!1,f);this.l.uniformMatrix4fv(this.da,!1,h);this.l.uniform4fv(this.Y,[...e.la.color,1]);f=this.l.UNSIGNED_SHORT;this.l.drawElements(this.l.TRIANGLES,36,f,0)}});Ca(this);this.Ra.forEach(e=>{e.update(b)});this.update(b);this.s.forEach(e=>{e.active&&e.update(b)});this.o.clearRect(0,0,this.canvas.width,
this.canvas.height);let d="";this.ia.forEach(e=>{d+=e});this.o.fillText(d,0,this.canvas.height/2);requestAnimationFrame(this.F.bind(this))}removeChild(a){a.parent.children.splice(a.parent.children.findIndex(b=>b===a),1);a.parent=null;this.ga=!0}update(){}stop(){}start(){}}
class A{static get i(){return new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0])}static get g(){return[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}constructor(a,b=[1,1,1],c=[0,1,0]){this.i=()=>{this.Qa=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Qa);var d=[this.size[0]/2,this.size[1]/2,this.size[2]/2];d=new Float32Array([-d[0],
-d[1],d[2],d[0],-d[1],d[2],d[0],d[1],d[2],-d[0],d[1],d[2],-d[0],-d[1],-d[2],-d[0],d[1],-d[2],d[0],d[1],-d[2],d[0],-d[1],-d[2],-d[0],d[1],-d[2],-d[0],d[1],d[2],d[0],d[1],d[2],d[0],d[1],-d[2],-d[0],-d[1],-d[2],d[0],-d[1],-d[2],d[0],-d[1],d[2],-d[0],-d[1],d[2],d[0],-d[1],-d[2],d[0],d[1],-d[2],d[0],d[1],d[2],d[0],-d[1],d[2],-d[0],-d[1],-d[2],-d[0],-d[1],d[2],-d[0],d[1],d[2],-d[0],d[1],-d[2]]);a.bufferData(a.ARRAY_BUFFER,d,a.STATIC_DRAW)};this.g=[];this.color=c;this.Qa=null;this.size=b}set size(a){this.g=
a;this.i()}get size(){return this.g}}class B{static get M(){return 0}constructor(a,b=[0,0,0],c=null){this.h=a;this.position=b;this.parent=null;this.la=c;this.G=[0,0,0];this.visible=!0;this.children=[];this.va=this.qb=this.wa=this.ba=0;this.N=[];this.speed=[0,0];this.ha=null;this.aa=new H;this.active=!0;this.size=[1,1];this.T=1}O(){this.position=[0,0,0];this.speed=[0,0];this.ba=this.wa=0;this.T=1}na(a){this.position=a.position||[0,0,0];this.active=!0}R(a){this.visible=a;this.h.ga=!0}update(){}}
function Ma(a){a.i=ia(a.h.P,a.position,a.target,a.g);a.j=a.h.P.inverse(a.i)}function Na(a,b=a.position,c=a.target,d=a.g){a.target=c;a.position=b;a.g=d;Ma(a)}class La{constructor(a){this.h=a;this.target=[0,0,0];this.position=[0,0,0];this.g=[0,1,0];this.j=this.i=null;Ma(this)}}function Oa(a,b){for(let c=0;c<b.length;c++)a.X(b[c])}function Pa(a,b){0<a.i.length?(a=a.i.pop(),a.na(b)):a=a.g(b);return a}class N{constructor(){this.i=[]}X(a){a.O();this.i.push(a)}g(){return{}}}
function O(a,b,c=a.o,d=a.m){a.endTime=T(c,d);a.active=b;a.j=!1;a.i=0}class Qa{constructor(a,b,c=b,d=!0){this.h=a;this.o=b;this.m=c;this.i=this.endTime=0;this.j=!1;this.g=null;this.active=!1;O(this,this.active);d&&a.Ra.push(this)}update(a){!this.j&&this.active&&(this.i+=a,this.i>this.endTime&&(this.j=!0,this.g&&this.g(this)))}}function x(a,...b){a.g.forEach(c=>{c.Db(...b)})}function U(a){a.g.length=0}class H{constructor(){this.g=[]}addListener(a){a=new Ta(a);this.g.push(a);return a}}
class Ta{constructor(a){this.Db=a}}function T(a,b){return Math.random()*(b-a)+a}function Ua(a){var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b))+b}function Va(){var a=Object.values(W.g);return a[Ua(a.length)]}function Wa(a,b){return[(1-b)**3*a.g+3*(1-b)**2*b*a.j+3*(1-b)*b**2*a.o+b**3*a.v,(1-b)**3*a.i+3*(1-b)**2*b*a.m+3*(1-b)*b**2*a.s+b**3*a.A]}class Xa{constructor(a,b,c,d,e,f,h,g){this.g=a;this.i=b;this.j=c;this.m=d;this.o=e;this.s=f;this.v=h;this.A=g}};function Ya(a,b,c,d,e){if(a.i[[d,e]])var f=a.i[[d,e]];else f=2*Math.random()*Math.PI,f={x:Math.cos(f),y:Math.sin(f)},a.i[[d,e]]=f;return(b-d)*f.x+(c-e)*f.y}function Za(a){return 6*a**5-15*a**4+10*a**3}
class $a{constructor(){this.i={};this.g={}}get(a,b){if(this.g.hasOwnProperty([a,b]))return this.g[[a,b]];var c=Math.floor(a);let d=Math.floor(b);var e=Ya(this,a,b,c,d);let f=Ya(this,a,b,c+1,d),h=Ya(this,a,b,c,d+1),g=Ya(this,a,b,c+1,d+1);e+=Za(a-c)*(f-e);c=e+Za(b-d)*(h+Za(a-c)*(g-h)-e);return this.g[[a,b]]=c}};const cb=(...a)=>{ab(bb(...a))},db=new (window.AudioContext||webkitAudioContext),ab=(...a)=>{let b=db.createBuffer(a.length,a[0].length,44100),c=db.createBufferSource();a.map((d,e)=>b.getChannelData(e).set(d));c.buffer=b;c.connect(db.destination);c.start()},bb=(a=1,b=.05,c=220,d=0,e=0,f=.1,h=0,g=1,m=0,n=0,p=0,l=0,q=0,C=0,w=0,u=0,r=0,I=1,E=0,K=0)=>{let v=2*Math.PI,P=m*=500*v/44100/44100;b=c*=(1+2*b*Math.random()-b)*v/44100;let L=[],F=0,Q=0,t=0,J=1,R=0,S=0,D=0,M,G;d=44100*d+9;E*=44100;e*=44100;f*=44100;
r*=44100;n*=500*v/44100**3;w*=v/44100;p*=v/44100;l*=44100;q=44100*q|0;for(G=d+E+e+f+r|0;t<G;L[t++]=D)++S%(100*u|0)||(D=h?1<h?2<h?3<h?Math.sin((F%v)**3):Math.max(Math.min(Math.tan(F),1),-1):1-(2*F/v%2+2)%2:1-4*Math.abs(Math.round(F/v)-F/v):Math.sin(F),D=(q?1-K+K*Math.sin(v*t/q):1)*(0<D?1:-1)*Math.abs(D)**g*a*.3*(t<d?t/d:t<d+E?1-(t-d)/E*(1-I):t<d+E+e?I:t<G-r?(G-t-r)/f*I:0),D=r?D/2+(r>t?0:(t<G-r?1:(G-t)/r)*L[t-r|0]/2):D),M=(c+=m+=n)*Math.cos(w*Q++),F+=M-M*C*(1-1E9*(Math.sin(t)+1)%2),J&&++J>l&&(c+=p,
b+=p,J=0),!q||++R%q||(c=b,m=P,J=J||1);return L};function eb(a,b){for(let c=1;c<=a;c++)b[b.length-c].va=8*Math.PI}function fb(a,b){b=Ia(b[0],b[1],b[2]);return b[0]>a.D/2||b[0]<-a.D/2||10<b[1]||-10>b[1]}
function gb(){return[[.1875,0,0,.375,1.1,.5,0].concat(X.g.B),[.1875,0,-.625,.375,1,.75,0].concat(X.g.B),[.1875,0,-1.375,.375,1,.75,0].concat(X.g.B),[.1875,-.1,-1.9375,.375,.9,.375,0].concat(X.g.B),[.16875,0,-2.25,.3375,.8,.25,0].concat(X.g.B),[.15,0,-2.5,.3,.7,.25,0].concat(X.g.B),[.16875,-.05,.5,.3375,1,.5,0].concat(X.g.B),[.15,-.0875,1,.3,.825,.5,0].concat(X.g.B),[.13125,-.125,1.5,.2625,.65,.5,0].concat(X.g.B),[.1125,-.1625,2,.225,.5,.5,0].concat(X.g.B),[.09375,-.1375,2.75,.1875,.425,1,0].concat(X.g.B),
[.15,.5125,-.875,.3,.125,.25,0].concat(X.g.C),[.15,.575,-.5,.3,.25,.5,0].concat(X.g.C),[.675,-.35,-.65,.6,.1,1.8,0].concat(X.g.B),[1.275,-.35,-.7,.6,.1,1.5,0].concat(X.g.B),[1.875,-.35,-.75,.6,.1,1.2,0].concat(X.g.B),[2.475,-.35,-.8,.6,.1,.9,0].concat(X.g.B),[3.075,-.35,-.85,.6,.1,.6,0].concat(X.g.B),[.375,.025,2.375,.375,.1,.25,0].concat(X.g.B),[.5625,.025,2.625,.75,.1,.25,0].concat(X.g.B),[.6875,.025,3,1,.1,.5,0].concat(X.g.B),[.025,.575,3,.05,1,.5,0].concat(X.g.B),[.025,.45,2.625,.05,.75,.25,0].concat(X.g.B),
[.025,.2625,2.375,.05,.375,.25,0].concat(X.g.B),[0,0,-2.725,.2,2,.2,1].concat(X.g.C)]}
function hb(){let a=X.g.Ua;return[[0,0,0,1,1,1,1].concat(a),[0,0,-1,1,1,1,1].concat(a),[0,.05,-2,.8,.9,1,1].concat(a),[0,.05,-2.75,.6,.7,.5,1].concat(a),[0,.05,-3.125,.4,.5,.25,1].concat(X.g.C),[0,.05,-3.3125,.2,.3,.125,1].concat(X.g.C),[0,.05,1.5,.8,.9,2,1].concat(a),[0,.125,2.75,.6,.85,.5,1].concat(a),[0,.125,3.25,.4,.65,.5,1].concat(a),[0,.125,3.625,.2,.45,.25,1].concat(X.g.C),[0,.575,-2.35,.6,.15,.2,1].concat(X.g.C),[0,.65,-1.5,.6,.3,1.5,1].concat(X.g.C),[0,.575,.875,.6,.15,3.25,1].concat(a),
[0,.8,2.125,.1,.3,.25,1].concat(a),[0,.95,2.375,.1,.6,.25,1].concat(a),[0,1.05,2.625,.1,1,.25,1].concat(a),[0,1.1,2.875,.1,1.1,.25,1].concat(a),[0,.9,3.125,.1,.9,.25,1].concat(a),[0,.75,3.375,.1,.6,.25,1].concat(a),[.75,0,-.6,.5,.1,1.8,0].concat(a),[1.25,0,-.6,.5,.1,1.6,0].concat(a),[1.75,0,-.6,.5,.1,1.4,0].concat(a),[2.25,0,-.6,.5,.1,1.2,0].concat(a),[2.75,0,-.6,.5,.1,1,0].concat(a),[3.25,0,-.6,.5,.1,.8,0].concat(a),[3.75,0,-.6,.5,.1,.6,0].concat(a),[4.25,0,-.6,.5,.1,.4,0].concat(a),[4.625,0,-.6,
.25,.1,.2,0].concat(a),[1.25,0,-.25,.3,.3,.5,0].concat(a),[1.25,0,-.75,.4,.4,.5,0].concat(a),[1.25,0,-1.5,.5,.5,1,0].concat(a),[1.25,0,-2.125,.4,.4,.25,0].concat(a),[.6,.4,2.625,.6,.1,.25,0].concat(a),[.8,.4,2.875,1,.1,.25,0].concat(a),[.9,.4,3.125,1.4,.1,.25,0].concat(a),[.8,.4,3.375,1.2,.1,.25,0].concat(a),[1.25,0,-2.35,.1,1.1,.1,1].concat(X.g.C),[-1.25,0,-2.35,.1,1.1,.1,1].concat(X.g.C)]}
class X extends Ka{static get g(){return{B:k(3168641),xa:k(16732009),ja:k(16775160),Za:k(15367466),Ab:k(16767557),rb:k(6860500),tb:k(9163093),Ua:k(2323280),C:k(0),Xa:k(7766156)}}static get i(){return{$:5,yb:1}}static get j(){return{sb:[2.42,,749,.03,.19,.52,4,2.71,,.6,,,,1.2,,1,.37,.48,.09],xb:[.5,,490,,.05,.08,4,1.14,-7,,,,,.4,,.2,,.5,.09,.01],ub:[1.04,,365,,.01,.11,2,2.76,-4.2,4.6,,,,1.9,.3,.1,,.95,.01],wb:[1.36,,441,.02,.12,.3,1,1.75,-7,3.9,434,.19,.1,,,,.01,.85,.14]}}constructor(){super();this.mb=
{Eb:"Space",Gb:"KeyW",Bb:"KeyS",Ib:"KeyA",Lb:"KeyD",Fb:"KeyF",Hb:"ArrowUp",Cb:"ArrowDown",Jb:"ArrowLeft",Mb:"ArrowRight"};let a=Object.values(this.mb);a.push("ArrowDown");a.push("ArrowUp");window.addEventListener("keydown",function(c){-1<a.indexOf(c.code)&&c.preventDefault()},!1);window.addEventListener("click",()=>{b.active&&(this.g.position=[20,20,20],this.g.target=[0,0,0],Na(this.g),this.v=ta(this.P,-10*this.i,10*this.i,-10,10,0,50),b.active=!1,this.removeChild(b),this.qa.R(!0),ib(this.qa))});
this.v=sa(this.P,this.V,this.i,.1,999);this.g.position=[15,10,-100];this.g.target=[0,0,0];Na(this.g);let b=new jb(this);z(this,b);this.qa=new kb(this);z(this,this.qa);this.qa.R(!1);this.ob=new B(this);z(this,this.ob)}}
class jb extends B{constructor(a){super(a);let b=()=>{c.position=[0,0,150];e.position=[0,0,0];n=[...m];g=0;c.wa=0;c.va=0;f.forEach((l,q)=>{l.position=[...h[q]];l.speed=[0,0]})},c=new B(a);var d=lb(a,gb(),4);eb(1,d);Fa(a,d,c);z(a,c,this);c.speed[1]=-30;let e=new B(a),f=lb(a,hb(),4);Fa(a,f,e);z(a,e,this);e.speed[1]=-20;eb(2,f);let h=[];f.forEach(l=>{h.push([...l.position])});let g=0,m=[],n=[];for(d=0;6>d;d++)m.push(new B(a,[0,0,0],new A(a.l,[1.5,1.5,3],X.g.xa)));n=[...m];let p=new Qa(a,.2);p.g=()=>
{let l=n.pop();l&&(l.speed[1]=-80,l.position=[...c.position],z(a,l,this));O(p,!0)};O(p,!0);a.ia[0]="Click to Start";b();this.update=()=>{m.forEach(l=>{l.position[2]<e.position[2]&&(l.position=[0,0,0],l.speed=[0,0],a.removeChild(l),g++,6==g&&f.forEach(q=>{q.speed[0]=T(-50,50);q.speed[1]=T(-50,50);c.va=1.5}))});-120>c.position[2]&&b()}}}
function ib(a){a.g=Pa(a.J,{h:a.h,position:Ja(0,0,X.i.$),L:a.L});Da(a.h,a.g);z(a.h,a.g);a.g.Ba.addListener(()=>{a.u=!0});a.g.ta.addListener(()=>{a.h.ia[3]=Math.round(100*a.g.T)});mb(a.L,a.g.position[0]);a.j.ma.addListener(b=>{a.g.oa=b});a.j.ra.addListener(b=>{a.m+=b.Kb;a.h.ia[5]=a.m;500<a.m-a.v&&(a.o=!0,a.v=500*Math.floor(a.m/500))});a.j.j.addListener(()=>{a.ua++;a.h.ia[1]=a.ua+1});a.h.ia.length=0;a.h.ia.push("Stage: ",a.ua+1," Health: ",0," Score: ",0);a.h.ia[3]=Math.round(100*a.g.T);a.i.position=
[...a.g.position];a.i.position[1]=0;a.i.speed[1]=nb.g;a.i.R(!0);a.i.active=!0;O(a.H,!0);O(a.s,!0)}
class kb extends B{constructor(a){super(a,[0,0,0]);this.g=null;this.J=new ob;this.L=new nb(a);z(a,this.L,this);this.j=new pb(a,this.L);z(a,this.j,this);this.A=new qb(a);z(a,this.A,this);this.u=!1;this.F=new H;this.kb=new B(a,[0,0,0]);z(a,this.kb,this);this.v=this.m=0;this.o=!1;this.H=new Qa(a,4);this.H.g=()=>{this.g.Da=!0};this.s=new Qa(a,8);this.s.g=()=>{this.i.R(!1);this.i.active=!1;rb(this.j)};this.i=new sb(a,this.L);z(a,this.i,this);this.i.R(!1);this.ua=0}update(){this.u&&(this.u=!1,this.J.X(this.g),
y(this.h,this.g),this.h.removeChild(this.g),tb(this.j),U(this.j.ma),U(this.j.ra),U(this.j.j),ub(this.A),this.v=this.m=0,this.o=!1,O(this.H,!1),O(this.s,!1),this.i.R(!1),this.i.active=!1,this.ua=0,ib(this),x(this.F));this.o&&this.j.Aa&&(vb(this.A),this.o=!1)}}function mb(a,b){a.U.forEach((e,f)=>{wb(e);e.position[2]=-f*Y.g.ca*Y.g.fa});let c=Y.i/2,d=Y.i;for(let e=-3+c+b;e<3+c+b;e++)for(let f=9;f<d;f++)a.U[0].sa[e][f]=X.i.$-.5}
function xb(a,b){a.U.forEach(c=>{c.position[2]+=a.pb*b});a.U[0].position[2]>Y.g.ca*Y.g.fa&&(a.U.push(a.U.shift()),a.U[1].position[2]=-1*Y.g.ca*Y.g.fa,wb(a.U[1]),yb(a.U[1]),x(a.nb,a))}class nb extends B{static get g(){return 5}constructor(a){super(a,[0,0,0]);this.g=new zb;this.U=[];this.pb=nb.g;this.nb=new H;z(a,new B(a,[0,-.5,0],new A(a.l,[100,1,100],X.g.rb)),this);for(let b=0;2>b;b++){let c=Pa(this.g,{h:a,position:[0,0,-b*Y.g.ca*Y.g.fa]});z(a,c,this);this.U.push(c)}}update(a){xb(this,a)}}
function wb(a){Oa(a.m,a.i);Ga(a.h,a.i);a.i.length=0;let b=[];for(let c=a.g;c<a.j;c++){let d=[];b.push(d);for(let e=a.g;e<a.j;e++)d.push(0)}a.sa=b}function yb(a){var b=a.o;b.i={};b.g={};b=Y.g.ca;let c=1/Y.g.fa,d=Y.g.vb,e,f=-a.g;for(let g=0;g<b;g+=c){e=a.g;for(let m=0;m<b;m+=c){var h=a.o.get(m,g);h=Math.floor(2*h*d);if(0<h){let n=Pa(a.m,{h:a.h,position:[e,h/2-.5,f],height:h});a.sa[e+a.j][f+a.j-1]=h-.5;a.i.push(n)}e++}f--}Fa(a.h,a.i,a)}
class Y extends B{static get g(){return{ca:2,fa:20,vb:3}}static get i(){return Y.g.ca*Y.g.fa}constructor(a,b){super(a,b);this.o=new $a;this.m=new Ab;this.i=[];this.size=Y.g.ca*Y.g.fa;this.g=Y.g.ca/2*-Y.g.fa;this.j=-this.g;this.sa=[];wb(this)}O(){super.O();wb(this)}}class Bb extends B{constructor(a,b,c){super(a,b,new A(a.l,[1,c,1],X.g.tb))}na(a){super.na(a);this.la.size=[1,a.height,1]}}function Cb(a){a.children.forEach((b,c)=>{b.la.color=a.hb[c]})}
function Db(a){a.children.forEach(b=>{b.la.color=a.zb})}function Eb(a){a.Ja=!0;cb(...X.j.sb);a.i.R(!1);y(a.h,a);O(a.W,!0);a.children.forEach(b=>{b.speed=[T(-4,4),T(-4,4)]});x(a.Pa,a);a.speed=[0,0];O(a.s,!1)}function Fb(a,b){cb(...X.j.ub);Db(a);O(a.ea,!0);a.T-=b;0>a.T&&(a.T=0,Eb(a))}
function Gb(a,b,c=[...a.G]){c=Pa(a.H,{h:a.h,position:c});a.o.push(c);z(a.h,c,a.h.qa.kb);Da(a.h,c);c.speed[0]=Math.cos(b)*a.S;c.speed[1]=Math.sin(b)*a.S;c.ba=-b;c.aa.addListener(d=>{a.H.X(d);y(a.h,d);a.h.removeChild(d);a.o.splice(a.o.findIndex(e=>d===e),1)});c.Ka.addListener(d=>{a.H.X(d);y(a.h,d);a.h.removeChild(d);a.o.splice(a.o.findIndex(e=>d===e),1)})}
class Hb extends B{constructor(a,b,c){super(a,b);this.L=c;c=this.A();this.Ga=lb(a,c,this.v);this.zb=X.g.xa;this.hb=[];Fa(a,this.Ga,this);this.i=new B(a,[b[0],0,b[2]]);this.K=4;b=Ib(a,c,this.v);Fa(a,b,this.i);z(a,this.i,a.ob);this.children.forEach(d=>{this.hb.push(d.la.color)});this.eb=this.Z=0;this.Pa=new H;this.Ba=new H;this.Ja=!1;this.s=new Qa(a,this.J);this.W=new Qa(a,2);this.W.g=()=>{x(this.Ba,this)};this.ea=new Qa(a,.2);this.ea.g=()=>{Cb(this)};this.Y();this.o=[];this.H=null;this.S=-10;this.j=
!0;this.Ha=.1}get J(){return 2}get g(){return X.g.ja}Y(){}A(){return[]}get v(){return.5}update(){this.cb()}cb(){let a=this.N,b=0;this.L.U.forEach(c=>{var d=Y.i/2;let e=[],f=Math.round(a[12])+d-Math.round(this.K/2);d=d-Math.round(c.position[2])+Math.round(a[14])-Math.round(this.K/2);for(let h=f;h<f+this.K;h++)if(c.sa[h])for(let g=d;g<d+this.K;g++){let m=c.sa[h][g];void 0!==m&&e.push(m)}0<e.length&&(c=Math.max(...e),c>b&&(b=c))});this.i.position=[a[12],this.i.position[1],a[14]];b!=a[12]&&(b==this.eb?
(this.Z++,5==this.Z&&(this.i.position[1]=b,this.Z=0)):this.Z=0);this.eb=b;this.i.ba=this.ba}O(){super.O();this.i.R(!1);U(this.Pa);U(this.Ba);U(this.aa);O(this.W,!1);this.Ja=!1;Jb(this,this.A(),this.v);Oa(this.H,this.o);Ga(this.h,this.o);Ea(this.h,this.o);this.o.length=0;O(this.ea,!1);Cb(this);O(this.s,!1)}na(a){super.na(a);this.i.R(!0);this.i.position=[...a.position];this.i.position[1]=0;this.Y();O(this.s,!0)}R(a){super.R(a);this.i.R(a)}}
class Kb extends Hb{static get M(){return 1}constructor(a,b,c){super(a,b,c);this.t=0;this.ha|=Z.M;this.H=new Lb;O(this.s,!0);this.s.g=()=>{this.j=!0};this.La=new H;this.j=this.ka=this.m=!1;this.Kb=100}get ka(){return this.m}get F(){return.5}get J(){let a=super.J-.2*this.h.qa.ua;return a>this.F?a:this.F}set ka(a){this.m=a;this.j=!1;this.m?O(this.s,!0,this.J):O(this.s,!1)}update(a){super.update(a);if(this.j&&this.ka){a=Math.PI/4;let b=0;for(let c=0;8>c;c++)Gb(this,c*a),b++;x(this.La,this);this.j=!1}}O(){super.O();
this.t=0;U(this.La);this.j=this.ka=!1}Y(){this.aa.addListener((a,b)=>{b.constructor===Mb?Fb(this,b.Ia):b.constructor===Z&&Fb(this,b.Ha)})}}
class Nb extends Kb{constructor(a,b,c){super(a,b,c);this.size=[8.8,1.6]}get g(){return X.g.Xa}A(){return[[0,0,0,1,1,20,1].concat(this.g),[0,1,.5,2,1,21,1].concat(this.g),[0,2,1,4,1,22,1].concat(this.g),[0,3,9,1,1,1,1].concat(this.g),[0,3,10,.3,.3,1,1].concat(this.g),[0,3.5,6,2,2,2,1].concat(this.g),[0,5,5.75,1.5,1,1.5,1].concat(this.g),[0,5.75,5.5,1,.5,1,1].concat(this.g),[0,3,2,2,1,4,1].concat(this.g),[0,4.25,2,1,1.5,1,1].concat(this.g),[0,5.25,2,1,.5,1,1].concat(X.g.C),[0,3,-4,1.5,1,3,1].concat(this.g),
[0,4,-4,1,1,1,1].concat(this.g),[0,4,-5,.3,.3,1,1].concat(this.g),[0,3,-7,1,1,1,1].concat(this.g),[0,3,-8,.3,.3,1,1].concat(this.g)]}get v(){return.4}}class Ob extends Kb{static get g(){return 1}constructor(a,b,c){super(a,b,c);eb(this.constructor.g,this.Ga)}}
class Pb extends Ob{constructor(a,b,c){super(a,b,c);this.size=[3,2.5]}get g(){return X.g.ja}get v(){return.37}A(){return[[0,0,0,1,1,1,1].concat(this.g),[0,0,-1.5,1,1,2,1].concat(this.g),[0,.575,-1.4,.5,.15,.2,1].concat(X.g.C),[0,.65,-.6,.5,.3,1.4,1].concat(X.g.C),[0,.6,.2,.5,.2,.2,1].concat(X.g.C),[0,.55,.4,.5,.1,.2,1].concat(X.g.C),[0,-.05,.875,.8,.9,.75,1].concat(this.g),[0,-.1,1.625,.6,.6,.75,1].concat(this.g),[0,-.15,2.375,.4,.7,.75,1].concat(this.g),[0,-.125,3.25,.2,.65,1,1].concat(this.g),[0,
.35,3.2,.1,.3,.9,1].concat(this.g),[0,.65,3.25,.1,.3,.7,1].concat(this.g),[0,.95,3.3,.1,.3,.5,1].concat(this.g),[.75,-.45,-.65,.75,.1,2.3,0].concat(this.g)].concat(this.u(),[[.25,.15,3.2,.3,.1,.9,0].concat(this.g),[.55,.15,3.25,.3,.1,.7,0].concat(this.g),[.85,.15,3.3,.3,.1,.5,0].concat(this.g),[1.15,.15,3.325,.3,.1,.25,0].concat(this.g),[0,0,-3.2,.3,3,.2,1].concat(X.g.C)])}u(){return[[0,0,-2.75,.9,.9,.5,1].concat(X.g.C),[1.5,-.45,-.7,.75,.1,2.05,0].concat(this.g),[2.25,-.45,-.725,.75,.1,1.9,0].concat(this.g),
[3,-.45,-.75,.75,.1,1.7,0].concat(this.g),[3.75,-.45,-.775,.75,.1,1.5,0].concat(this.g),[4.3125,-.45,-.75,.375,.1,1.1,0].concat(this.g),[4.6875,-.45,-.75,.375,.1,.7,0].concat(this.g),[4.9688,-.45,-.75,.188,.1,.3,0].concat(this.g)]}}
class Qb extends Pb{u(){return[[0,0,-2.75,1.2,1.2,.5,1].concat(X.g.C),[1.5,-.45,-.75375,.75,.1,2.07,0].concat(this.g),[2.25,-.45,-.825,.75,.1,1.85,0].concat(this.g),[3,-.45,-.9125,.75,.1,1.62,0].concat(this.g),[3.75,-.45,-1,.75,.1,1.4,0].concat(this.g),[4.5,-.45,-1.0875,.75,.1,1.17,0].concat(this.g),[5.25,-.45,-1.175,.75,.1,.95,0].concat(this.g)]}get g(){return X.g.Ua}}
class Rb extends Ob{constructor(a,b,c){super(a,b,c);this.size=[8,8];this.K=8;this.T=3}static get g(){return 2}get v(){return 1}get J(){return.75}O(){super.O();this.T=3}A(){return hb()}}function Sb(a){let b=(c,d)=>{let e=a.h.mb;if(e.Lb==c||e.Mb==c)a.m.right=d;if(e.Ib==c||e.Jb==c)a.m.left=d;if(e.Gb===c||e.Hb==c)a.m.forward=d;if(e.Bb===c||e.Cb==c)a.m.jb=d;if(e.Eb===c||e.Fb==c)a.m.lb=d};a.h.pa.Ma=c=>{b(c.code,!0)};a.h.pa.Na=c=>{b(c.code,!1)}}
function Tb(a){var b=a.N,c=Ia(b[12],b[13],b[14]);b=c[0];c=c[1];a.speed=[0,0];a.m.right&&b<a.Ea&&c<a.Fa?a.speed[0]=a.F:a.m.left&&b>a.fb&&c>a.gb&&(a.speed[0]=-a.F);a.m.forward&&b<a.Ea&&c>a.gb?a.speed[1]=-a.F:a.m.jb&&b>a.fb&&c<a.Fa&&(a.speed[1]=a.F);if(a.m.lb&&a.j){cb(...X.j.xb);let d=Math.PI/2;b=()=>{let e=[...a.G],f=[...a.G];e[0]-=.25;f[0]+=.25;Gb(a,d,e);Gb(a,d,f)};a.u==Z.g.ya?Gb(a,d,[...a.position]):a.u==Z.g.Va?b():a.u==Z.g.ab&&(b(),Gb(a,d+Math.PI/5),Gb(a,d-Math.PI/5));a.j=!1;O(a.s,!0)}}
class Z extends Hb{static get M(){return 2}static get i(){return 1}static get g(){return{ya:0,Va:1,ab:2}}constructor(a,b,c){super(a,b,c);this.m={left:!1,right:!1,forward:!1,jb:!1,lb:!1};Sb(this);this.F=10;this.Ea=a.D/2;this.fb=-this.Ea;this.Fa=a.I/2;this.gb=-this.Fa;this.size=[3,2.5];this.ha=Pb.M+Ub.M;this.H=new Vb;this.s.g=()=>{this.j=!0};this.$a=this.position[1];this.V=!1;eb(Z.i,this.Ga);this.u=Z.g.ya;this.da=new Qa(this.h,20);this.da.g=()=>{this.u=Z.g.ya};this.ta=new H;this.Ha=.7;this.Da=!1;this.S=
-15}get oa(){return this.$a}set oa(a){a!=this.oa&&(this.$a=a,this.V=!0)}get v(){return.5}get J(){return.3}A(){return gb()}Y(){this.aa.addListener((a,b)=>{if(b.constructor.M==Kb.M)Fb(this,b.Ha),x(this.ta,this);else if(b.constructor===Ub)Fb(this,b.Ia),x(this.ta,this);else if(b.constructor.M==W.M){cb(...X.j.wb);switch(b.za){case W.g.Ya:this.T=1;x(this.ta,this);break;case W.g.Wa:this.u=Z.g.Va;break;case W.g.bb:this.u=Z.g.ab}O(this.da,!0)}})}update(a){super.update(a);this.Da&&Tb(this);if(this.V){let b=
this.position[1]-this.oa;0>b?this.position[1]+=this.F*a:0<b&&(this.position[1]-=this.F*a);b=this.position[1]-this.oa;.2>Math.abs(b)&&(this.position[1]=this.oa,this.V=!1)}}O(){super.O();this.j=!0;this.oa=X.i.$;this.u=Z.g.ya;O(this.da,!1);U(this.ta);this.Da=!1}}function vb(a){let b=Pa(a.g,{h:a.h});z(a.h,b,a);Da(a.h,b);b.Oa.addListener(c=>{a.h.removeChild(c);y(a.h,c);a.g.X(c)});b.aa.addListener(c=>{a.h.removeChild(c);y(a.h,c);a.g.X(c)})}
function ub(a){a.children.forEach(b=>{a.g.X(b);y(a.h,b)});Ha(a.h,a)}class qb extends B{constructor(a){super(a,[0,0,0]);this.g=new Wb}}
class sb extends Hb{constructor(a,b){super(a,[0,0,0],b)}get g(){return X.g.Xa}A(){return[[0,0,0,1,1,20,1].concat(this.g),[0,1,.5,2,1,21,1].concat(this.g),[0,2,1,4,1,22,1].concat(this.g),[1.625,2.875,0,.75,.75,4,1].concat(this.g),[1.625,3.625,0,.75,.75,3,1].concat(this.g),[1.625,4.25,.5,.75,.5,.75,1].concat(this.g),[1.625,4.625,.5,.75,.25,.75,1].concat(X.g.C)]}get v(){return 1.8}cb(){this.i.position=[...this.position]}}
class W extends B{static get M(){return 16}static get g(){return{Ya:0,Wa:1,bb:2}}constructor(a){super(a);let b=[];var c=[[0,0,0,2,2,.5,1].concat(X.g.Za),[.3,0,0,.2,1.5,1,0].concat(X.g.ja)],d=[[0,0,0,2,2,.5,1].concat(X.g.Za),[.3,0,0,.2,1.5,1,0].concat(X.g.ja),[.7,0,0,.2,1.5,1,0].concat(X.g.ja)];let e=new Xb(this.h,W.g.Ya,lb(this.h,[[0,0,0,2,2,.5,1].concat(X.g.xa),[0,0,0,.5,1.5,1,1].concat(X.g.ja),[0,0,0,1.5,.5,1,1].concat(X.g.ja)],.75));c=new Xb(this.h,W.g.Wa,lb(this.h,c,.75));d=new Xb(this.h,W.g.bb,
lb(this.h,d,.75));b.push(e,c,d);this.g=b;Fa(a,this.g,this);this.i=null;this.za=Va();this.speed[1]=nb.g;this.Oa=new H;this.position=Ja(this.h.D/2,-this.h.I/2,X.i.$);this.qb=this.va=Math.PI;this.ha|=Z.M}get za(){return this.i}set za(a){this.g.forEach(c=>{c.R(!1)});let b=this.g.find(c=>c.ib===a);this.i=b.ib;b.R(!0)}update(){fb(this.h,this.position)&&(this.speed[1]=0,x(this.Oa,this))}na(a){super.na(a);this.speed[1]=nb.g;this.za=Va();this.position=Ja(this.h.D/2,-this.h.I/2,X.i.$);this.size=[1.5,1.5];this.speed[1]=
nb.g}O(){super.O();U(this.Oa);U(this.aa)}}class Xb extends B{constructor(a,b,c){super(a,[0,0,0]);this.ib=b;Fa(a,c,this)}}function rb(a){let b=[];a.m.forEach(c=>{c.active||c.Ta!=Math.floor(a.i)||b.push(c)});if(0<b.length){let c=b[Ua(b.length)];c.start();a.g.push(c);a.i+=c.Sa}else a.i=0,x(a.j),rb(a)}function tb(a){a.g.forEach(b=>{b.stop(!1)});a.g.length=0;a.i=0}
class pb extends B{constructor(a,b){super(a,[0,0,0]);this.m=[new Yb(a,b),new Zb(a,b),new $b(a,b),new ac(a,b),new bc(a,b),new cc(a,b),new dc(a,b)];this.m.forEach(c=>{c.Ca.addListener(d=>{x(this.Ca,d);this.g.splice(this.g.findIndex(e=>e===d),1);rb(this)});z(a,c,this);c.ma.addListener(d=>{x(this.ma,d)});c.ra.addListener(d=>{x(this.ra,d)})});this.g=[];this.ma=new H;this.Ca=new H;this.ra=new H;this.j=new H;this.i=0}get Aa(){return this.g.some(a=>a.Aa)}}
function ec(a,b){let c=[];a.children.forEach(d=>{a.ea(d,b);a.Z(d)&&(a.da(d),a.F.X(d),c.push(d))});0<c.length&&(Ga(a.h,c),Ea(a.h,c),fc(a));a.i==a.m&&0==a.children.length?a.Y():a.s()&&(gc(a,a.A),fc(a))}function fc(a){let b=[];a.children.forEach(d=>{d.ka||b.push(d)});let c=a.children.length-b.length;for(;1>c&&1<=a.children.length;){let d=Ua(b.length);b[d].ka=!0;b.splice(d,1);c++}}function gc(a,b){b.forEach(c=>{a.o(c)})}
class hc extends B{constructor(a,b){super(a,[0,0,0]);this.F=this.H;this.i=this.g=0;this.L=b;this.active=!1;this.Ca=new H;this.m=this.J=0;this.ma=new H;this.ra=new H;this.Aa=!0;this.Ta=0;this.Sa=.2}get H(){return new ic}update(a){ec(this,a)}start(){this.active=!0;this.v();this.m=this.g-this.J}stop(a=!0){Oa(this.F,this.children);Ea(this.h,this.children);Ha(this.h,this);this.active=!1;this.m=this.J=this.i=0;a&&x(this.Ca,this)}o(a){a=Pa(this.F,{h:this.h,position:a,L:this.L});z(this.h,a,this);Da(this.h,
a);this.i+=1;a.Ba.addListener(b=>{this.F.X(b);this.h.removeChild(b);y(this.h,b);this.J++;this.i==this.g&&0==this.children.length&&this.Y();fc(this)});a.La.addListener(b=>{b.ka=!1;fc(this)});a.Pa.addListener(b=>{x(this.ra,b)});return a}s(){return!1}Y(){this.stop()}Z(){return!1}ea(){}get A(){return[]}v(){}da(){}}
class jc extends hc{constructor(a,b){super(a,b);this.g=5;this.j=this.S=!1;this.V=!0;this.K=[];this.W=this.u}get A(){return[Wa(this.W,0)]}ea(a,b){a.Ja||(a.t+=.125*(this.j?-1:1)*b,b=Wa(this.W,a.t),b=Ja(b[0],b[1],X.i.$),this.V&&(a.ba=Math.atan2(-(b[2]-a.position[2]),b[0]-a.position[0])-Math.PI/2),a.position=[b[0],b[1],b[2]])}stop(a){super.stop(a);this.j=!1;this.K=[]}s(){return 0==this.children.length||this.i<this.m&&(!this.j&&.2<this.children[this.children.length-1].t||this.j&&.8>this.children[this.children.length-
1].t)}Z(a){return 1<a.t||0>a.t}get u(){return null}o(a){this.S?(a=super.o(a),0<this.K.length&&(a.T=this.K.shift()),this.j&&(a.t=1)):a=super.o(a);return a}Y(){this.S?(this.j=this.j?!1:!0,this.i=0,this.m=this.g-this.J,0==this.m&&this.stop()):this.stop()}da(a){this.K.push(a.T)}}class Yb extends jc{get u(){return new Xa(-this.h.D/2,-this.h.I/2,this.h.D/2,-this.h.I/4,-this.h.D/2,this.h.I/4,this.h.D/2,this.h.I/2)}}
class Zb extends jc{get u(){return new Xa(this.h.D/2,-this.h.I/2,-this.h.D/2,-this.h.I/4,this.h.D/2,this.h.I/4,-this.h.D/2,this.h.I/2)}}class kc extends jc{constructor(a,b){super(a,b);this.S=!0;this.g=1;this.V=!1}get u(){return new Xa(3*-this.h.D/8,-this.h.I/2,0,0,0,0,this.h.D/2,-this.h.I/4)}}class cc extends kc{constructor(a,b){super(a,b);this.Sa=this.Ta=1}get H(){return new lc}}class bc extends kc{constructor(a,b){super(a,b);this.g=4}get H(){return new mc}}
class nc extends hc{constructor(a,b){super(a,b);this.j=[0,0,0];this.W=6;this.V=Math.PI}o(a){a=super.o(a);a.ba=this.V;a.speed[1]=this.W;return a}Z(a){a=Ia(a.position[0],a.position[1],a.position[2]);return a[0]<-this.h.D/2||a[1]>this.h.I/2}}
class $b extends nc{constructor(a,b){super(a,b);this.v();this.g=5;this.S=6}v(a=X.i.$){var b=Math.ceil(0);var c=Math.floor(1);this.j=Math.floor(Math.random()*(c-b+1))+b?Ja(T(this.h.D/4,this.h.D/2),-this.h.I/2,a):Ja(this.h.D/2,T(-this.h.I/2,-this.h.I/4),a)}get A(){return[[...this.j]]}s(){var a;if(!(a=0==this.children.length)&&(a=this.i<this.m)){a=[this.children[this.children.length-1].position[0],this.children[this.children.length-1].position[2]];var b=[this.j[0],this.j[2]];a=Math.sqrt(Math.pow(b[0]-
a[0],2)+Math.pow(b[1]-a[1],2))>this.S}return a}}class dc extends $b{constructor(a,b){super(a,b);b.nb.addListener(()=>{this.active&&(wb(b.U[1]),this.u++,2==this.u?x(this.ma,X.i.yb):3==this.u&&(this.K=!0))});this.K=!1;this.S=12;this.W=b.pb;this.u=0;this.V=Math.PI/2;this.Aa=!1;this.Ta=2;this.Sa=1}s(){return this.K&&super.s()}get A(){this.v(.5);return super.A}stop(a){this.u=0;this.K=!1;super.stop(a);x(this.ma,X.i.$)}get H(){return new oc}}
class ac extends nc{constructor(a,b){super(a,b);this.g=4;this.v()}v(){this.j=Ja(this.h.D/2,-this.h.I/2,X.i.$);this.j[0]+=T(15,0)}get A(){let a=[];for(let b=0;b<this.g;b++){let c=[...this.j];c[0]-=4.5*b;a.push(c)}return a}s(){return 0==this.children.length||this.i<this.m}}class pc extends B{constructor(a,b,c){super(a,b,new A(a.l,[.5,.2,.2],c));this.size=[.5,.5];this.Ia=1/3;this.Ka=new H}O(){super.O();U(this.aa);U(this.Ka)}update(){fb(this.h,this.position)&&(this.speed=[0,0],x(this.Ka,this))}}
class Mb extends pc{static get M(){return 4}constructor(a,b){super(a,b,X.g.xa);this.ha|=Kb.M}}class Ub extends pc{static get M(){return 8}constructor(a,b){super(a,b,X.g.Ab);this.Ia=1/6}}function lb(a,b,c=1){let d=[];[-1,1].forEach(e=>{b.forEach(f=>{if(!f[6]||-1!=e){let g=f.slice(0);for(var h=0;6>h;h++)g[h]*=c;h=g.slice(0,3);h[0]*=e;d.push(new B(a,h,new A(a.l,g.slice(3,6),f.slice(7,11))))}})});return d}
function Ib(a,b,c=1){let d=[],e=X.g.C;[-1,1].forEach(f=>{b.forEach(h=>{h=h.slice(0);for(var g=0;6>g;g++)h[g]*=c;g=h.slice(0,3);g[0]*=f;g[1]=0;h=h.slice(3,6);h[1]=.1;d.push(new B(a,g,new A(a.l,h,e)))})});return d}function Jb(a,b,c=1){let d=0;[-1,1].forEach(e=>{b.forEach(f=>{if(!f[6]||-1!=e){f=f.slice(0);for(var h=0;6>h;h++)f[h]*=c;h=f.slice(0,3);h[0]*=e;let g=a.children[d];g.size=f.slice(3,6);g.position=h;g.speed=[0,0];d++}})})}class zb extends N{g(a){return new Y(a.h,a.position)}}
class Ab extends N{g(a){return new Bb(a.h,a.position,a.height)}X(a){super.X(a)}}class ic extends N{g(a){return new Pb(a.h,a.position,a.L)}}class lc extends N{g(a){return new Rb(a.h,a.position,a.L)}}class mc extends N{g(a){return new Qb(a.h,a.position,a.L)}}class oc extends N{g(a){return new Nb(a.h,a.position,a.L)}}class ob extends N{g(a){return new Z(a.h,a.position,a.L)}}class Vb extends N{g(a){return new Mb(a.h,a.position)}}class Lb extends N{g(a){return new Ub(a.h,a.position)}}
class Wb extends N{g(a){return new W(a.h)}}new X;
