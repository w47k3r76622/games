kontra.init();let factoryPositionX=600,factoryPositionY=450,instructionsFirstLine="Dodge The Asteroids and Collect Green Orbs",instructionsSecondLine="Collide with Satellite To Score Points",instructionsThirdLine="Reach 20 To Win",timeoutInstructions=0,score=0,collectedPickup=0,stars=[],halfFactory=0;function playSound(){for(f=function(e){return e>4e4?null:Math.sin(e/2e3-Math.sin(e/331)*Math.sin(e/61))*t(e,4e4)},t=((t,e)=>(e-t)/e),A=new AudioContext,m=A.createBuffer(1,96e3,48e3),b=m.getChannelData(0),i=96e3;i--;)b[i]=f(i);s=A.createBufferSource(),s.buffer=m,s.connect(A.destination),s.start()}let asteroids=[];kontra.assetPaths.images="assets/",kontra.loadAssets("star.png","shipEmpty.png","asteroid.png","pickup.png","shipHalf.png","shipFull.png","factoryEmpty.png","factoryHalf.png").then(function(){let t,e=kontra.sprite({x:100,y:400,image:kontra.images.shipEmpty}),i=kontra.sprite({x:factoryPositionX,y:factoryPositionY,image:kontra.images.factoryEmpty}),o=kontra.sprite({x:200,y:200,image:kontra.images.pickup});for(let t=0;t<200;t++)star=kontra.sprite({x:800*Math.random(),y:600*Math.random(),image:kontra.images.star}),stars.push(star);for(let e=0;e<7;e++)t=kontra.sprite({x:Math.floor(800*Math.random()),y:-20,image:kontra.images.asteroid}),asteroids.push(t);let a=kontra.gameLoop({update:function(){(timeoutInstructions+=1)>400&&(instructionsFirstLine="",instructionsSecondLine="",instructionsThirdLine=""),kontra.keys.pressed("up")&&(e.dy-=.05),kontra.keys.pressed("down")&&(e.dy+=.05),kontra.keys.pressed("left")&&(e.dx-=.05),kontra.keys.pressed("right")&&(e.dx+=.05),e.x>=game.width-30&&(e.dx=-1),e.y>=game.height-30&&(e.dy=-1),e.y<=15&&(e.dy=1),e.x<=0&&(e.dx=1),asteroids.forEach(function(t){t.dx=-.6,t.dy=1.8,(t.y>game.height||t.x<0)&&(t.x=Math.floor(800*Math.random()),t.y=-20),t.update(),t.collidesWith(e)&&(a.stop(),alert("GAME OVER"),window.location="")}),0===collectedPickup&&e.collidesWith(o)&&(o.x=600*Math.random(),o.y=400*Math.random(),e=kontra.sprite({x:e.x,y:e.y,image:kontra.images.shipHalf}),collectedPickup=1,playSound()),1===collectedPickup&&e.collidesWith(o)&&(o.x=600*Math.random(),o.y=400*Math.random(),e=kontra.sprite({x:e.x,y:e.y,image:kontra.images.shipFull}),collectedPickup=2,playSound()),1===collectedPickup&&1===halfFactory&&e.collidesWith(i)&&(e=kontra.sprite({x:e.x,y:e.y,image:kontra.images.shipEmpty}),i=kontra.sprite({x:factoryPositionX,y:factoryPositionY,image:kontra.images.factoryEmpty}),collectedPickup=0,halfFactory=0,score+=1),1===collectedPickup&&e.collidesWith(i)&&(e=kontra.sprite({x:e.x,y:e.y,image:kontra.images.shipEmpty}),i=kontra.sprite({x:factoryPositionX,y:factoryPositionY,image:kontra.images.factoryHalf}),collectedPickup=0,halfFactory=1,score+=1),2===collectedPickup&&e.collidesWith(i)&&(e=kontra.sprite({x:e.x,y:e.y,image:kontra.images.shipEmpty}),i=kontra.sprite({x:factoryPositionX,y:factoryPositionY,image:kontra.images.factoryEmpty}),collectedPickup=0,score+=2),20===score&&(a.stop(),alert("YOU WON!"),window.location=""),o.update(),star.update(),t.update(),e.update(),i.update()},render:function(){stars.map(t=>t.render()),asteroids.map(t=>t.render()),e.render(),o.render(),i.render();document.getElementById("game");var t=game.getContext("2d");t.font="25pt Calibri",t.fillStyle="blue",t.fillText(score,game.width/2,50),t.font="15pt Calibri",t.fillStyle="blue",t.fillText(instructionsFirstLine,10,150),t.font="15pt Calibri",t.fillStyle="blue",t.fillText(instructionsSecondLine,10,170),t.font="15pt Calibri",t.fillStyle="blue",t.fillText(instructionsThirdLine,10,190)}});a.start()});