<!DOCTYPE html><html><head> <title>MESS</title> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> <style>body{padding: 0; margin: 0; width: 100vw; height: 100vh; overflow: hidden; background-color: #ecf0f1; font-family: monospace; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none}#exit{position: fixed; width: 6vmin; height: 6vmin; text-align: center; line-height: 6vmin; font-weight: bold; color: #ecf0f1; border-radius: 50%; font-size: 3vmin; background: #2980b9; top: 2vmin; right: 2vmin; display: none;}#menu, #result{background: #ecf0f1; font-size: 6vmin; text-align: center; line-height: 38vmin; font-weight: bold; font-family: Helvetica Narrow, sans-serif;}#easy, #medium, #hard, #back{background-color: #2c3e50; color: white;}#easy, #back{border-color: #8e44ad;}#easy:hover, #back:hover{background-color: #8e44ad;}#medium{border-color: #27ae60;}#medium:hover{background-color: #27ae60;}#hard{border-color: #c0392b;}#hard:hover{background-color: #c0392b;}#logo{border-color: #2980b9; background-color: #2980b9; color: white;}#moves{border-color: #27ae60; background-color: #27ae60; color: white;}#level{border-color: #2980b9; background-color: #2980b9; color: white;}#time{border-color: #c0392b; background-color: #c0392b; color: white;}#game, #menu, #result{width: 100vmin; height: 100vmin; margin: 0 auto; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); transition: top 0.25s ease, 1s ease all; -webkit-transition: top 0.25 ease, 1s ease all; -moz-transition: top 0.25 ease, 1s ease all}#game, #result{display: none;}.content{display: flex; display: -webkit-flex; -webkit-flex: 1; -webkit-flex-direction: column; flex-direction: column; align-content: center; height: 100%; width: 100%;}.row{width: 100%; display: flex; display: -webkit-flex; -webkit-flex: 1; flex-grow: 1; flex-direction: row; align-content: center; align-self: center}.square{display: flex; display: -webkit-flex; -webkit-flex: 1; flex-grow: 1; position: relative;}.node{position: absolute; height: 80%; width: 80%; border-radius: 3vmin; border: 2vmin solid hsl(0, 0%, 90%); box-sizing: border-box; background: #aaa; top: 10%; left: 10%; box-shadow: 0 0 0 0.5vmin hsl(0, 0%, 90%); transition: background-color 1s;}</style></head><body> <div id="exit" onclick="showMenu()">x</div><div id="result"> <div class="content"> <div class="row"> <div class="square"> <div id="level" class="node"></div></div><div class="square"> <div id="time" class="node"></div></div></div><div class="row"> <div class="square"> <div id="moves" class="node"></div></div><div class="square"> <div id="back" class="node" onclick="showMenu()">menu</div></div></div></div></div><div id="game"> </div><div id="menu"> <div class="content"> <div class="row"> <div class="square"> <div id="logo" class="node">MESS</div></div><div class="square"> <div id="easy" class="node" onclick="initGame(3)">easy</div></div></div><div class="row"> <div class="square"> <div id="medium" class="node" onclick="initGame(4)">medium</div></div><div class="square"> <div id="hard" class="node" onclick="initGame(5)">hard</div></div></div></div></div><script>function isCorrect(permutation1, permutation2){for (var i=0; i < permutation1.length; i++){if (permutation1[i] !==permutation2[i]){return false;}}return true;}function randomEvenPermutation(n){var array=[]; for (var i=0; i < n; i++){array.push(i);}while (isCorrect(array, actualPermutation)){shuffle(array); if (!isEven(array)){swap(array, 0, 1);}}return array;}function swap(array, x, y){temp=array[x]; array[x]=array[y]; array[y]=temp;}function isEven(array){var inversions=0; for (var i=0; i < array.length - 2; i++){for (var j=i + 1; j < array.length - 1; j++){if (array[j] < array[i]){inversions++;}}}return inversions % 2==0;}function shuffle(array){var currentIndex=array.length - 1, randomIndex; while (0 !==currentIndex){randomIndex=Math.floor(Math.random() * currentIndex); currentIndex -=1; swap(array, currentIndex, randomIndex);}return array;}function reversePermutation(){activeIndex=op * op - 1 - activeIndex; for (var i=0; i < op * op / 2; i++){swapNodes(i, op * op - 1 - i);}}function inversePermutation(){var array=new Array(op * op); for (var i=0; i < actualPermutation.length; i++){array[actualPermutation[i]]=i;}for (var i=0; i < actualPermutation.length; i++){actualPermutation[i]=array[i]; document.getElementById("node" + i).style.backgroundColor=colorArray[actualPermutation[i]];}activeIndex=actualPermutation.indexOf(op * op - 1); if (isCorrect(actualPermutation, goalPermutation)){endGame();}}function progressiveColorArray(steps){var array=[]; for (var i=0; i < steps - 1; i++){array.push("hsl(" + i * 360 / steps + ", 60%, 50%)");}array.push("white"); return array;}function renderNodes(side, colorArray, permutation){var html='<div class="content">'; for (var i=0; i < side; i++){html +='<div class="row">'; for (var j=0; j < side; j++){html +='<div class="square"><div class="node" id="node' + (i * side + j) + '" style="background-color:' + colorArray[i * side + j] + '; border-color:' + colorArray[permutation[i * side + j]] + ';" onclick="processClick(' + (i * side + j) + ')"></div></div>';}html +='</div>';}html +='</div>'; document.getElementById("game").innerHTML=html;}function swapNodes(nodeIndex1, nodeIndex2){swap(actualPermutation, nodeIndex1, nodeIndex2); var temp=document.getElementById("node" + nodeIndex1).style.backgroundColor; document.getElementById("node" + nodeIndex1).style.backgroundColor=document.getElementById("node" + nodeIndex2).style.backgroundColor; document.getElementById("node" + nodeIndex2).style.backgroundColor=temp; if (isCorrect(actualPermutation, goalPermutation)){endGame();}}function initGame(option){actualPermutation=[]; for (var i=0; i < option * option; i++){actualPermutation.push(i);}goalPermutation=randomEvenPermutation(option * option); colorArray=progressiveColorArray(option * option); renderNodes(option, colorArray, goalPermutation); op=option; activeIndex=(op * op) - 1; document.getElementById("game").style.display="initial"; document.getElementById("exit").style.display="initial"; document.getElementById("menu").style.display="none"; if (op===3){timer=setInterval(reversePermutation, 10000);}else if (op==4){timer=setInterval(reversePermutation, 15000);}else{timer=setInterval(inversePermutation, 30000);}start=new Date().getTime(); numberOfMoves=0;}var op=0, actualPermutation, goalPermutation, activeIndex, timer, colorArray, start, time, numberOfMoves; document.addEventListener("keydown", processKey, false); function processKey(e){if (op==0){return;}e=e || window.event; if (e.keyCode===38){if (activeIndex - op >=0){swapNodes(activeIndex, activeIndex - op); activeIndex -=op; numberOfMoves++;}if (e.preventDefault) e.preventDefault(); return false;}else if (e.keyCode===40){if (activeIndex + op <=(op * op) - 1){swapNodes(activeIndex, activeIndex + op); activeIndex +=op; numberOfMoves++;}if (e.preventDefault) e.preventDefault(); return false;}else if (e.keyCode===37){if (activeIndex % op !==0){swapNodes(activeIndex, activeIndex - 1); activeIndex -=1; numberOfMoves++;}if (e.preventDefault) e.preventDefault(); return false;}else if (e.keyCode===39){if (activeIndex % op !==op - 1){swapNodes(activeIndex, activeIndex + 1); activeIndex +=1; numberOfMoves++;}if (e.preventDefault) e.preventDefault(); return false;}}function showMenu(){op=0; clearInterval(timer); document.getElementById("game").style.display="none"; document.getElementById("exit").style.display="none"; document.getElementById("result").style.display="none"; document.getElementById("menu").style.display="initial";}function endGame(){clearInterval(timer); time=new Date().getTime() - start; document.getElementById("game").style.display="none"; document.getElementById("exit").style.display="none"; if (op==3){document.getElementById("level").innerHTML="easy";}else if (op==4){document.getElementById("level").innerHTML="medium";}else{document.getElementById("level").innerHTML="hard";}document.getElementById("time").innerHTML=Math.round(time / 1000) + "s"; document.getElementById("moves").innerHTML=numberOfMoves + " moves"; document.getElementById("result").style.display="initial"; op=0;}function processClick(nodeIndex){if (nodeIndex===activeIndex + op || nodeIndex===activeIndex - op || nodeIndex===activeIndex - 1 || nodeIndex===activeIndex + 1){swapNodes(nodeIndex, activeIndex); activeIndex=nodeIndex; numberOfMoves++;}}</script></body></html>
