glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array;function g(a){var b=new glMatrixArrayType(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function aa(){var a=n;a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1}
function r(a,b){var c=b[0],d=b[1];b=b[2];a[12]=a[0]*c+a[4]*d+a[8]*b+a[12];a[13]=a[1]*c+a[5]*d+a[9]*b+a[13];a[14]=a[2]*c+a[6]*d+a[10]*b+a[14];a[15]=a[3]*c+a[7]*d+a[11]*b+a[15]}function u(a){var b=n,c=a[0],d=a[1];a=a[2];b[0]*=c;b[1]*=c;b[2]*=c;b[3]*=c;b[4]*=d;b[5]*=d;b[6]*=d;b[7]*=d;b[8]*=a;b[9]*=a;b[10]*=a;b[11]*=a}
function v(a,b,c){var d,f=c[0],e=c[1];c=c[2];var h=Math.sqrt(f*f+e*e+c*c);if(h){1!=h&&(h=1/h,f*=h,e*=h,c*=h);var k=Math.sin(b),m=Math.cos(b),l=1-m;b=a[0];var h=a[1],q=a[2],t=a[3],p=a[4],N=a[5],x=a[6],la=a[7],ma=a[8],na=a[9],oa=a[10],pa=a[11],W=f*f*l+m,X=e*f*l+c*k,Y=c*f*l-e*k,Z=f*e*l-c*k,G=e*e*l+m,H=c*e*l+f*k,I=f*c*l+e*k,f=e*c*l-f*k,e=c*c*l+m;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*W+p*X+ma*Y;d[1]=h*W+N*X+na*Y;d[2]=q*W+x*X+oa*Y;d[3]=t*W+la*X+pa*Y;d[4]=b*Z+p*G+ma*H;d[5]=
h*Z+N*G+na*H;d[6]=q*Z+x*G+oa*H;d[7]=t*Z+la*G+pa*H;d[8]=b*I+p*f+ma*e;d[9]=h*I+N*f+na*e;d[10]=q*I+x*f+oa*e;d[11]=t*I+la*f+pa*e}}function ba(){var a,b=w.Aa/w.za,c=y;a=.1*Math.tan(45*Math.PI/360);var b=a*b,d=-b,f=-a;c||(c=new glMatrixArrayType(16));var e=b-d,h=a-f;c[0]=.2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=.2/h;c[6]=0;c[7]=0;c[8]=(b+d)/e;c[9]=(a+f)/h;c[10]=-100.1/99.9;c[11]=-1;c[12]=0;c[13]=0;c[14]=-20/99.9;c[15]=0}
quat4={create:function(a){var b=new glMatrixArrayType(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},Eb:function(a,b){var c=a[0],d=a[1],f=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-f*f)),a;b[0]=c;b[1]=d;b[2]=f;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-f*f));return b},inverse:function(a,b){if(!b||a==b)return a[0]*=1,a[1]*=1,a[2]*=1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b},length:function(a){var b=
a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],f=a[2],e=a[3],h=Math.sqrt(c*c+d*d+f*f+e*e);if(0==h)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;h=1/h;b[0]=c*h;b[1]=d*h;b[2]=f*h;b[3]=e*h;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];var h=b[0],k=b[1],m=b[2];b=b[3];c[0]=d*b+a*h+f*m-e*k;c[1]=f*b+a*k+e*h-d*m;c[2]=e*b+a*m+d*k-f*h;c[3]=a*b-d*h-f*k-e*m;return c},Gb:function(a,b,c){c||(c=b);var d=b[0],f=b[1],e=b[2];b=a[0];
var h=a[1],k=a[2];a=a[3];var m=a*d+h*e-k*f,l=a*f+k*d-b*e,q=a*e+b*f-h*d,d=-b*d-h*f-k*e;c[0]=m*a+d*-b+l*-k-q*-h;c[1]=l*a+d*-h+q*-b-m*-k;c[2]=q*a+d*-k+m*-h-l*-b;return c},Mb:function(a,b){b||(b=new glMatrixArrayType(9));var c=a[0],d=a[1],f=a[2],e=a[3],h=c+c,k=d+d,m=f+f,l=c*h,q=c*k,c=c*m,t=d*k,d=d*m,f=f*m,h=e*h,k=e*k,e=e*m;b[0]=1-(t+f);b[1]=q-e;b[2]=c+k;b[3]=q+e;b[4]=1-(l+f);b[5]=d-h;b[6]=c-k;b[7]=d+h;b[8]=1-(l+t);return b},Nb:function(a,b){b||(b=new glMatrixArrayType(16));var c=a[0],d=a[1],f=a[2],e=
a[3],h=c+c,k=d+d,m=f+f,l=c*h,q=c*k,c=c*m,t=d*k,d=d*m,f=f*m,h=e*h,k=e*k,e=e*m;b[0]=1-(t+f);b[1]=q-e;b[2]=c+k;b[3]=0;b[4]=q+e;b[5]=1-(l+f);b[6]=d-h;b[7]=0;b[8]=c-k;b[9]=d+h;b[10]=1-(l+t);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},Jb:function(a,b,c,d){d||(d=a);var f=c;0>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]&&(f=-1*c);d[0]=1-c*a[0]+f*b[0];d[1]=1-c*a[1]+f*b[1];d[2]=1-c*a[2]+f*b[2];d[3]=1-c*a[3]+f*b[3];return d},Lb:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};augment=function(){var a,b=arguments[0];for(a=1;a<arguments.length;a++)for(var c in arguments[a])b[c]=arguments[a][c];return b};before=function(a,b,c){var d=a[b];a[b]=function(){c.apply(this,arguments);d.apply(this,arguments)}};after=function(a,b,c){var d=a[b];a[b]=function(){d.apply(this,arguments);c.apply(this,arguments)}};
window.U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};
function ca(){var a=window.innerWidth,b=window.innerHeight,c=document.getElementById("canvas");c.width=a;c.height=b;c.style.width=a+"px";c.style.height=b+"px";w.Aa=c.width;w.za=c.height;c=document.getElementById("radar");c.width=a;c.height=b;c.style.width=a+"px";c.style.height=b+"px";da(0)}
function ea(){var a=new glMatrixArrayType(16),b=n;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];z.push(a)}
function fa(){var a=new glMatrixArrayType(9);var b=a,c=n,d=c[0],f=c[1],e=c[2],h=c[4],k=c[5],m=c[6],l=c[8],q=c[9],c=c[10],t=c*k-m*q,p=-c*h+m*l,N=q*h-k*l,x=d*t+f*p+e*N;x&&(x=1/x,b||(b=new glMatrixArrayType(9)),b[0]=t*x,b[1]=(-c*f+e*q)*x,b[2]=(m*f-e*k)*x,b[3]=p*x,b[4]=(c*d-e*l)*x,b[5]=(-m*d+e*h)*x,b[6]=N*x,b[7]=(-q*d+f*l)*x,b[8]=(k*d-f*h)*x);a&&a!=a?(a[0]=a[0],a[1]=a[3],a[2]=a[6],a[3]=a[1],a[4]=a[4],a[5]=a[7],a[6]=a[2],a[7]=a[5],a[8]=a[8]):(b=a[1],d=a[2],f=a[5],a[1]=a[3],a[2]=a[6],a[3]=b,a[5]=a[7],a[6]=
d,a[7]=f);w.uniformMatrix3fv(A.rb,!1,a)}function ga(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}function ha(a,b){return a>b?b:a}function ia(a,b,c,d){return d?ha(a+b*c,d):a+b*c}var B=Math.PI,ja=2*B;function ka(a){return a-ja*Math.floor((a+B)/ja)}abs=Math.abs;floor=Math.floor;var C=1;function D(){return C=(1664525*C+1013904223)%4294967295}function E(a){return~~(D()/4294967295*a)};function sa(a){function b(){var a=D()/4294967295*384-128,b=D()/4294967295*384-128,d=40+D()/4294967295*128,e=40+D()/4294967295*128;p.strokeStyle=q;c(a+2,b+2,d,e);p.strokeStyle=l;c(a,b,d,e)}function c(a,b,c,d){e(a,b,a+c,b);e(a,b,a,b+d);e(a+c,b,a+c,b+d);e(a,b+d,a+c,b+d)}function d(a){for(var b=20,c=6;0<c;){p.lineWidth="3";p.strokeStyle="#151520";var d=a,e=b;p.beginPath();p.arc(d,e,6,0,2*Math.PI,!1);p.stroke();p.lineWidth="2";p.strokeStyle="#404050";d=a;e=b;p.beginPath();p.arc(d,e,3,0,2*Math.PI,!1);p.stroke();
p.lineWidth="2";p.strokeStyle="#606060";d=a;e=b;p.beginPath();p.arc(d,e,9,2,5.5,!1);p.stroke();p.lineWidth="2";p.strokeStyle="#101010";d=a;e=b;p.beginPath();p.arc(d,e,9,5.5,2,!1);p.stroke();c--;b+=42}}function f(){for(var a=20,b=0;4>b;b++){for(var c=20,d=0;5>d;d++)0>D()/4294967295?p.fillStyle=q:p.fillStyle=l,p.fillRect(c,a,30,40),c+=45;a+=60}}function e(a,b,c,d){p.beginPath();p.moveTo(a,b);p.lineTo(c,d);p.stroke()}function h(){for(var a=0;256>a;a++)for(var b=0;256>b;b++){var c=Math.floor(D()/4294967295*
256),d=Math.floor(D()/4294967295*256),e=Math.floor(D()/4294967295*256),f=a,h=b;p.fillStyle="#"+c.toString(16)+d.toString(16)+e.toString(16);p.fillRect(f,h,1,1)}}function k(a,b,c){var d=p.getImageData(0,0,256,256).data,e;for(e=0;e<d.length;e++)d[e]=d[e+1]=d[e+2]=Math.floor(D()/4294967295*128),d[e+3]=255;var f=0;e=Array(512);for(var h=0,k=0;k<d.length;k++){if(0===k||0===k%512)e[f]=[],h=f,f++;e[h].push(d[k])}for(d=0;d<e.length;d++)e[0][0]=0,e[d][0]=0,e[0][d]=0,e[e.length-1][d]=0,e[d][e.length-2]=0;for(var l,
q,t,G,H,I,qa,ra,d=0;d<e.length;d++)for(f=0;f<e[d].length;f++)0<d-1&&0<f-1?l=e[d-1][f-1]:l=0,0<f-1?q=e[d][f-1]:q=0,d+1<e.length&&0<f-1?t=e[d+1][f-1]:t=0,0<d-1?G=e[d-1][f]:G=0,d+1<e.length?H=e[d+1][f]:H=0,0<d-1&&f+1<e.length?I=e[d-1][f+1]:I=0,d+1<e.length?qa=e[d+1][f]:qa=0,0<d-1&&f+1<e.length?ra=e[d-1][f+1]:ra=0,h=e[d][f],h=parseInt((l+q+t+G+H+I+qa+ra+h)/9,10),h<=a&&(h=0),h>b&&(h=b),e[d][f]=h;for(b=1;b<e.length-1;b++)for(l=1;l<e.length-1;l++)0===e[b-1][l]&&0===e[b+1][l]&&0===e[b][l-1]&&0===e[b][l+1]&&
(e[b][l]=0),0===e[b-1][l]&&0===e[b+1][l]&&0===e[b][l-1]&&0===e[b][l+1]&&(e[b][l]=0);for(b=0;256>b;b++)for(l=0;256>l;l++){if(2!=c||e[b][l]>a)q=b,t=l,p.fillStyle="rgba("+(e[b][l]*m[0]+m[4])+","+(e[b][l]*m[1]+m[5])+","+(e[b][l]*m[2]+m[6])+","+m[3]+")",p.fillRect(q,t,1,1);1==c&&e[b][l]<=a&&(q=b,t=l,p.fillStyle="rgb("+m[7]+","+m[8]+","+m[9]+")",p.fillRect(q,t,1,1))}}var m=[128,128,128,0,0,255],l,q,t=document.createElement("canvas");t.width=256;t.height=256;var p=t.getContext("2d");switch(a){case 0:h();
break;case 1:m=[3,2,0,1,60,60,-50];k(0,255,1);break;case 2:m=[.8,.6,.6,1,10,10,20];k(0,255,0);m=[.8,.2,.2,.3,0,0,0];k(44,100,2);m=[1.2,.3,.3,1,0,0,0];k(47,100,2);d(20);d(236);break;case 3:m=[1,1,1,1,0,0,-20];k(0,120,0);break;case 4:m=[1,1,1,1,100,100,100];k(0,255,0);break;case 5:m=[1.5,1.5,3,1,0,0,0];k(40,255,0);break;case 6:m=[1,1,2,1,0,0,0];k(0,255,0);p.strokeStyle="#202070";p.lineWidth="3";e(0,256/6,256,256/6);e(0,256/6*2,256,256/6*2);e(0,256/6*3,256,256/6*3);e(0,256/6*4,256,256/6*4);e(0,256/6*
5,256,256/6*5);e(128,0,128,256/6);e(128,256/6*2,128,256/6*3);e(128,256/6*4,128,256/6*5);e(64,256/6,64,256/6*2);e(192,256/6,192,256/6*2);e(64,256/6*3,64,256/6*4);e(192,256/6*3,192,256/6*4);e(64,256/6*5,64,256);e(192,256/6*5,192,256);break;case 7:m=[.6,.6,.9,1,10,10,20];k(0,255,0);m=[.4,.3,.6,.9,0,0,0];k(47,100,2);d(20);d(236);break;case 8:m=[.6,.6,1,1,0,0,0];k(0,255,0);d(20);d(236);break;case 9:m=[.8,.6,.6,1,10,10,20];k(0,255,0);m=[.8,.2,.2,.3,0,0,0];k(44,100,2);m=[1.2,.3,.3,1,0,0,0];k(47,100,2);d(20);
d(236);break;case 10:m=[.7,.5,.5,1,10,10,20];k(0,255,0);m=[.8,.2,.2,.3,0,0,0];k(44,100,2);m=[.9,.3,.3,1,0,0,0];k(48,100,2);d(20);d(236);break;case 11:m=[.7,.5,.5,1,10,10,20];k(0,255,0);m=[.8,.2,.2,.3,0,0,0];k(44,100,2);m=[.9,.3,.3,1,0,0,0];k(48,100,2);p.lineWidth="2";l="#000000";q="#404040";C=15;for(a=0;15>a;a++)b();d(20);d(236);break;case 12:m=[.6,.6,1,1,0,0,0];k(0,255,0);p.lineWidth="2";l="#000000";q="#404040";C=35;for(a=0;10>a;a++)b();break;case 13:m=[1.5,.6,.6,1,0,0,0];k(0,255,0);m=[.8,.4,.4,
.7,0,0,0];k(33,255,0);break;case 14:m=[.8,.5,.6,1,60,40,40];k(0,255,0);m=[.8,.4,.4,.5,50,50,50];k(47,255,2);break;case 15:m=[.8,.7,.7,1,60,40,40];k(0,255,0);break;case 16:m=[1,1,1,1,55,60,50];k(32,255,1);break;case 17:m=[1,1,1,1,55,60,50];k(32,255,1);C=105;l="#202030";q="#FFA030";f();break;case 18:m=[3,2,0,1,60,60,-50];k(0,255,1);break;case 19:m=[3,1,.5,1,0,0,0];k(0,255,0);p.lineWidth="2";l="#000000";q="#404040";C=5832;for(a=0;15>a;a++)b();break;case 20:m=[1,3,.8,1,0,0,0];k(0,255,0);p.lineWidth="2";
l="#000000";q="#404040";C=693;for(a=0;12>a;a++)b();break;case 21:m=[4,2.5,.5,1,0,0,0];k(0,255,0);p.lineWidth="2";l="#000000";q="#404040";C=81;for(a=0;10>a;a++)b();break;case 22:m=[2,2,2.5,1,0,0,0];k(0,255,0);p.lineWidth="2";l="#000000";q="#404040";C=176;for(a=0;15>a;a++)b();break;default:h()}t=t.toDataURL("image/png");a=new Image;a.src=t;return a}
function ta(a){_resources++;a.Ka.onload=function(){_loaded++;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!0);w.bindTexture(w.TEXTURE_2D,a);w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,a.Ka);w.generateMipmap(w.TEXTURE_2D);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR);w.bindTexture(w.TEXTURE_2D,null)}}function ua(){for(var a=0;25>a;a++){var b=w.createTexture();b.Ka=sa(a);material[a]=b;ta(b)}};function va(){var a=document.getElementById("canvas");w=a.getContext("webgl",{alpha:!1});ca();w.Aa=a.width;w.za=a.height}
document.addEventListener("DOMContentLoaded",function(){radarCanvas=document.getElementById("radar");ctx=radarCanvas.getContext("2d");va();wa();overlayData=!0;overlay=document.getElementById("overlay");statusBar=document.getElementById("status");messageBar=document.getElementById("message");w.clearColor(.03,0,.1,1);w.enable(w.DEPTH_TEST);w.enable(w.BLEND);w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA);window.onkeydown=xa;window.onkeyup=ya;window.oncontextmenu=za;window.addEventListener("resize",ca,
!1);document.U=function(){"hidden"==document.visibilityState&&(env.pause=!0)};ua();F.push(J(Aa,120));F.push(J(Ba,200));F.push(J(Ca,!1));F.push(J(Da,!1));F.push(J(Ea,!1));F.push(J(Fa,!1));F.push(J(Ca,!1));F.push(J(Da,!1));F.push(J(Da,!1));F.push(J(Ga,220));F.push(J(Aa,110));F.push(J(Aa,220));F.push(J(Ha,220));Ia();Ja=Date.now();Ka()});function La(a){var b=w;a=document.getElementById(a);for(var c="",d=a.firstChild;d;)3==d.nodeType&&(c+=d.textContent),d=d.nextSibling;var f;"x-shader/x-fragment"==a.type?f=b.createShader(b.FRAGMENT_SHADER):"x-shader/x-vertex"==a.type&&(f=b.createShader(b.VERTEX_SHADER));b.shaderSource(f,c);b.compileShader(f);return b.getShaderParameter(f,b.COMPILE_STATUS)?f:(alert(b.getShaderInfoLog(f)),null)}
function wa(){var a=La("shader-fs"),b=La("shader-vs");A=w.createProgram();w.attachShader(A,b);w.attachShader(A,a);w.linkProgram(A);w.useProgram(A);A.Za=w.getAttribLocation(A,"aVertexPosition");w.enableVertexAttribArray(A.Za);A.Ya=w.getAttribLocation(A,"aVertexNormal");w.enableVertexAttribArray(A.Ya);A.Va=w.getAttribLocation(A,"aTextureCoord");w.enableVertexAttribArray(A.Va);A.Cb=w.getUniformLocation(A,"uShading");A.cb=w.getUniformLocation(A,"uAmbientLight");A.F=w.getUniformLocation(A,"uDirLight");
A.ub=w.getUniformLocation(A,"uPMatrix");A.Qa=w.getUniformLocation(A,"uMVMatrix");A.rb=w.getUniformLocation(A,"uNMatrix");A.yb=w.getUniformLocation(A,"uSampler")};var Ma=!0,Na=.7,F=[],K=2*Math.PI,L=new (window.AudioContext||window.webkitAudioContext),Oa=1/L.sampleRate;function Pa(a){return 2*Math.floor(a)-Math.floor(2*a)+.5}function Qa(a){return 2*Math.abs(2*(a-Math.floor(a+.5)))-1}function Ra(a,b,c,d,f,e,h){return a<b?a/b*c:a<b+d?f+(c-f)*(1-(a-b)/d):a<b+d+e?f:a<b+d+e+h?f*(1-(a-b-d-e)/h):0}function Fa(a){return.5>a?Ra(a,.05,.2,0,.2,.3,.1)*(2*Math.random()+Qa(a)):9}
function Aa(a,b){return.4<a?9:Ra(a,.05,.6,.1,.4,.1,.1)*Pa(b*a+4*(1>a?.6+.4*(1-a/1):.6)*Math.sin(K*b/4*a)+Math.sin(K*b*2*a))*.05}function Ga(a,b){var c=Math.sin(K*b*a+1*Math.sin(b/16*K*a));.2>a&&(c*=a/.2);var d=a-1;if(0<d){if(1<=d)return 9;c*=1-d}return c}function Ca(a){var b=Ra(a,.3,.8,.3,.6,.5,2)*Pa(120*a+4*(1.7>a?.8*a/1.7:.8)*Math.sin(120*K/4*a)+Math.sin(240*K*a));a-=2;if(0<a){if(.2<a)return 9;b*=.2>a?1-a/.2:0}return.2*b}
function Da(a){var b=Ra(a,.3,.8,.3,.6,.5,2)*Pa(120*a+32*(.7>a?.8*a/.7:.8)*Math.sin(120*K/4*a)+16*(1.5>a?0:1.7>a?(a-1.5)/.2*.8:.8)*Math.sin(120*K/4*a)+Math.sin(240*K*a));a-=2;if(0<a){if(.2<a)return 9;b*=.2>a?1-a/.2:0}return.2*b}function Ea(a){var b=Qa((1E3-2E3*a)*a);.1>a&&(b*=a/.1);a-=.2;if(0<a){if(.2<=a)return 9;b*=1-a/.2}return.5*b}function Ba(a,b){.2>a&&(b*=1.5);var c=.1*Pa(b*a)+.4*Qa(b*a)+.4*Math.sin(K*b*a);.1>a&&(c*=a/.1);var d=a-.3;if(0<d){if(.1<=d)return 9;c*=1-d/.1}return c}
function Ha(a,b){var c;c=(b+1E3-1800*a)*a;c=c-Math.floor(c)-.5;.1>a&&(c*=a/.1);var d=a-.3;if(0<d){if(.1<=d)return 9;c*=1-d/.1}return c}function J(a,b){for(var c=0,d=0,f=[];9>c;)c=a(d,b),f.push(c),d+=Oa;f.pop();for(var c=L.createBuffer(1,f.length,L.sampleRate),d=c.getChannelData(0),e=0;e<c.length;e++)d[e]=f[e];return c}
function M(a,b){var c=1;if(!Ma){var d=0;if(b&&O){var f=O.W(b);if(25<f)return;5<f&&(c*=1-(f-5)/20);1<f&&(d=2*(O.eb(b)/B),d=-1>d?-1+(-d-1):1<d?1-(d-1):d)}f=L.createBufferSource();f.buffer=F[a];var e=L.createGain();e.gain.value=Na*c;L.createStereoPanner?(c=L.createStereoPanner(),f.connect(c),c.pan.value=d,c.connect(e)):f.connect(e);e.connect(L.destination);f.playbackRate=2;f.start(0)}};var P={};function xa(a){var b=a.which||a.keyCode;P[b]=!0;8!=b&&9!=b&&80!=b&&(env.M=0);a.preventDefault();a.stopPropagation();return!1}
function ya(a){var b=a.which||a.keyCode;P[b]=!1;if(env.pause&&8!=b&&9!=b&&81!=b&&18!=b)return env.pause=!1;switch(b){case 27:Ia();break;case 79:case 112:Sa();break;case 113:env.ua=!env.ua;overlay.style.display="initial";break;case 115:Q(0);break;case 116:Q(1+E(4));break;case 123:O.Xa();break;case 81:R?R=!1:O&&1==O.type&&O.j&&(R=O);break;case 8:env.O||P[18]?S(-1):S(-1,O.c);break;case 9:env.O||P[18]?S():S(1,O.c);break;case 80:env.pause=!0}a.preventDefault();a.stopPropagation();return!1}
function za(a){a.preventDefault();a.stopPropagation();return!1};function Ta(){this.Ua=!1;this.Ta=0;this.J=[1,1,1];this.F=[1,1,1];this.D=this.f=this.pitch=this.z=this.y=this.x=0;this.scale=[1,1,1];this.Ab=function(){for(var a=0;a<this.l.length;a+=3)this.l[a]+=-.5};this.Bb=function(){for(var a=2;a<this.l.length;a+=3)this.l[a]+=-.5};this.tb=function(){this.ca=[];for(var a=0,b=this.l;a<b.length-8;){var c=g([b[a]-b[a+3],b[a+1]-b[a+4],b[a+2]-b[a+5]]),d=g([b[a]-b[a+6],b[a+1]-b[a+7],b[a+2]-b[a+8]]),f=new glMatrixArrayType(3),e=c[0],h=c[1],c=c[2],k=d[0],m=d[1],d=d[2];
f[0]=h*d-c*m;f[1]=c*k-e*d;f[2]=e*m-h*k;e=f;c=new glMatrixArrayType(3);d=e[0];f=e[1];e=e[2];(h=Math.sqrt(d*d+f*f+e*e))?1==h?(c[0]=d,c[1]=f,c[2]=e):(h=1/h,c[0]=d*h,c[1]=f*h,c[2]=e*h):(c[0]=0,c[1]=0,c[2]=0);d=this.ca;d.push.apply(d,c);this.Ua?a+=3:(d=this.ca,d.push.apply(d,c),d=this.ca,d.push.apply(d,c),a+=9)}};this.bind=function(){var a=this.l.length/3;this.L=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,this.L);w.bufferData(w.ARRAY_BUFFER,new Float32Array(this.l),w.STATIC_DRAW);this.L.oa=3;this.L.ta=
a;this.P=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,this.P);w.bufferData(w.ARRAY_BUFFER,new Float32Array(this.va),w.STATIC_DRAW);this.P.oa=2;this.P.ta=a;this.tb();this.Ra=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,this.Ra);w.bufferData(w.ARRAY_BUFFER,new Float32Array(this.ca),w.STATIC_DRAW)};this.hb=function(){w.bindBuffer(w.ARRAY_BUFFER,this.P);w.vertexAttribPointer(A.Va,this.P.oa,w.FLOAT,!1,0,0);w.bindBuffer(w.ARRAY_BUFFER,this.L);w.vertexAttribPointer(A.Za,this.L.oa,w.FLOAT,!1,0,0);w.bindBuffer(w.ARRAY_BUFFER,
this.Ra);w.vertexAttribPointer(A.Ya,3,w.FLOAT,!1,0,0);this.Ua?w.drawArrays(w.TRIANGLE_STRIP,0,this.L.ta):w.drawArrays(w.TRIANGLES,0,this.L.ta)};this.u=function(){ea();r(n,[-this.x,-this.y,-this.z]);this.scale&&u(this.scale);this.D&&v(n,this.D,[0,0,1]);this.pitch&&v(n,this.pitch,[1,0,0]);this.f&&v(n,this.f,[0,1,0]);w.uniformMatrix4fv(A.Qa,!1,n);fa();w.uniform3fv(A.cb,this.J);w.uniform3fv(A.F,this.F);w.uniform1i(A.Cb,this.Ta);w.activeTexture(w.TEXTURE0);w.bindTexture(w.TEXTURE_2D,this.I);w.uniform1i(A.yb,
0);this.hb();n=z.pop()}}
function T(a){this.l=[0,0,0,0,1,0,1,0,0,0,1,0,1,1,0,1,0,0,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,1,0,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,1,1,1,0,0,1,1,0,1,0,1,1,0,1,1,1,0,1,1,1];for(var b=0;b<this.l.length;b++)this.l[b]-=.5;this.va=[1,0,1,1,0,0,1,1,0,1,0,0,1,0,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,0,0,1,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,0,0,0,0,1,1,0,1];this.I=a;this.A=function(a){this.f-=1*a;this.pitch-=.6*a}}
T.prototype=new Ta;function Ua(a,b,c,d,f){this.l=[0,0,-a,-c,0,0,0,d,0,0,0,-a,0,d,0,c,0,0,0,0,-a,0,-d,0,-c,0,0,0,0,-a,c,0,0,0,-d,0,0,0,b,0,d,0,-c,0,0,0,0,b,c,0,0,0,d,0,0,0,b,-c,0,0,0,-d,0,0,0,b,0,-d,0,c,0,0];this.va=[0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,.1,.1,.1,0,0,0,.1,.1,.1,0,0,0,.1,.1,.1,0,0,0,.1,.1,.1,0];this.I=f;this.A=function(a){this.f-=.4*a;this.pitch-=.05*a}}Ua.prototype=new Ta;
Quad=function(a){this.l=[0,0,1,1,0,1,0,0,0,1,0,1,1,0,0,0,0,0];this.Ab();this.Bb();this.va=[1,0,1,1,0,0,1,1,0,1,0,0];this.I=a;this.A=function(){}};Quad.prototype=new Ta;_Actor={j:!0,s:1,pitch:0,f:0,D:0,scale:[1,1,1],nb:function(a,b,c){this.x=a;this.y=b;this.z=c},W:function(a){return ga(this.x,this.z,a.x,a.z)},dir:function(a){return Math.atan2(a.x-this.x,a.z-this.z)},V:function(a){var b=g([this.x,this.y,this.z]),c=g([a.x,a.y,a.z]);new glMatrixArrayType(3);var d=new glMatrixArrayType(3);d&&b!=d?(d[0]=b[0]-c[0],d[1]=b[1]-c[1],d[2]=b[2]-c[2],b=d):(b[0]-=c[0],b[1]-=c[1],b[2]-=c[2]);c=b[0];d=b[1];b=b[2];Math.sqrt(c*c+d*d+b*b)<this.s+a.s&&this.$(a)},Kb:function(){},Ib:function(){},
$:function(){},G:function(){this.j=!1},toString:function(){return this.name}};function Va(){this.type=1;this.ka=++Va.U;this.qa=1;this.name="Drone "+this.ka;this.Ja=this.c=0;this.h=!1;this.H=this.move=this.B=this.action=0;augment(this,_Actor);this.s=.3;this.scale=[.2,.2,.2];this.w=4;this.T=5;this.Ca=7;this.R=1;this.Fa=.8;this.Da=.9;this.$a=this.Ba=.5;this.S=100;this.ia=10;this.ja=.3;this.fa=1.5*-this.s;this.ga=this.s/2;this.ab=1.2*-this.s;this.ha=.1;this.Ea=20;this.Oa=1;this.g=this.speed=0;this.v=this.S;this.o=this.da=0;this.K=1;this.Ma=0;this.La=!1;this.Ha=function(a){this.c=
a;this.action=this.Ja=0;this.target=!1;this.w*=2;this.Ga()};this.Xa=function(){if(20<this.qa)O==this&&V("Can't install more upgrades",3);else{this.qa++;this.Oa++;var a="";switch(E(5)){case 0:this.w*=1.2;a="Drone speed upgraded +20%";break;case 1:this.S*=1.3;a="Drone speed upgraded +30%";break;case 2:this.T*=1.2;a="Drone acceleration upgraded +20%";break;case 3:this.ja*=.9;a="Drone fire speed upgraded +10%";break;case 4:this.ia*=1.2,a="Laser power upgraded +20%"}O==this&&V(a,3)}};this.Ga=function(){switch(this.c){case 0:this.b.F=
[.5,.5,.5];this.b.I=material[22];break;case 1:this.b.F=[.5,.5,1];this.b.I=material[20];break;case 2:this.b.F=[.5,.5,.5];this.b.I=material[19];break;case 3:this.b.F=[.5,.5,.5];this.b.I=material[12];break;case 4:this.b.F=[.5,.5,.5],this.b.I=material[21]}};this.i=function(a,b){switch(a){case 1:this.wa=!0;this.speed+=this.T*b;this.speed>this.w&&(this.speed=this.w);break;case 2:this.ya=!0;this.g+=this.Fa*b;this.g>this.R&&(this.g=this.R);break;case 3:this.ya=!0;this.g-=this.Fa*b;this.g<-this.R&&(this.g=
-this.R);break;case 4:this.wa=!0;this.speed-=this.T*b;this.speed<-this.w&&(this.speed=-this.w);break;case 5:if(0>=this.da){var c=Wa(Xa,this.x,this.y+.05,this.z);c.join(this);0<this.speed&&(c.speed+=this.speed);this.da=this.ja;M(12,this)}}};this.sb=function(a){this.wa||(0<this.speed?(this.speed-=this.Ca*a,0>this.speed&&(this.speed=0)):0>this.speed&&(this.speed+=this.Ca*a,0<this.speed&&(this.speed=0)));this.ya||(0<this.g?(this.g-=this.Da*a,0>this.g&&(this.g=0)):0>this.g&&(this.g+=this.Da*a,0<this.g&&
(this.g=0)))};this.mb=function(a){0<this.c||0==a.c||abs(this.speed)>abs(a.speed)||(this.Ha(a.c),stat.lb[a.c]++,a==R&&stat.vb[a.c]++,this.c==O.c&&V("New Lost Drone joined out team!",3),M(9,this))};this.$=function(a){switch(a.type){case 1:if(this.ka<a.ka){if(.5>env.Y-this.Ma&&this.La==a)break;this.Ma=env.Y;this.La=a;this.speed=-this.speed;0==this.speed&&(this.speed=(.5>D()/4294967295?-1:1)*this.w);a.speed=-a.speed;0==a.speed&&(a.speed=(.5>D()/4294967295?-1:1)*a.w);1!=a.action&&(a.action=1,a.B=1+E(2));
1!=this.action&&(this.action=1,this.B=1+E(2))}this.mb(a)}};this.zb=function(){var a=this,b=entities.filter(function(b){return b.j&&3>b.type&&b.c!=a.c&&20>b.W(a)});0<b.length?this.h=b[0]:this.h=!1;return this.h};this.fb=function(){return this.h?ka(ka(this.f)-this.dir(this.h)):0};this.eb=function(a){return ka(ka(this.f)-this.dir(a))};this.Db=function(a){0>=this.H&&(this.move=1+E(3),this.H=1+E(5));this.i(this.move,a)};this.jb=function(a){0>=this.B&&(this.action=0);0>this.H&&(this.move=1+E(3),this.H=
5+E(10));this.i(this.move,a)};this.kb=function(a){if(this.h&&this.h.j){var b=this.h.W(this);if(40<b)this.action=0,this.h=!1;else{var c=this.fb(),d=Math.abs(c);.03>d?1==this.h.type&&this.h.c!=this.c&&0!=this.h.c?(4>b?this.i(4,a):7<b&&this.i(1,a),this.i(5,a)):1==this.h.type&&0==this.h.c||2==this.h.type?this.i(1,a):(this.h=!1,this.action=0):2.5<d?this.i(2,a):0>c?(this.i(2,a),4>b?this.i(4,a):8<b&&this.i(1,a)):0<c&&(this.i(3,a),4>b?this.i(4,a):8<b&&this.i(1,a))}}else this.zb()||(this.action=3)};this.Pa=
function(a){this.x+=Math.sin(this.f)*this.speed*a;this.z+=Math.cos(this.f)*this.speed*a};this.A=function(a){this.ya=this.wa=!1;if(this==R)P[38]||P[87]?this.i(1,a):(P[40]||P[83])&&this.i(4,a),P[37]||P[65]?this.i(2,a):(P[39]||P[68])&&this.i(3,a),(P[32]||P[16]||P[69])&&this.i(5);else switch(this.H-=a,this.B-=a,this.action){case 0:0==this.c?(this.action=2,this.B=0):(this.action=4,this.B=10+E(20));break;case 1:0>=this.B&&(this.action=0);break;case 2:this.Db(a);break;case 3:this.jb(a);break;case 4:this.kb(a)}this.sb(a);
0==this.speed?(this.y>this.fa-this.ga?this.K=-1:this.y<this.fa+this.ga&&(this.K=1),this.o+=this.K*this.ha*a):0<this.speed?this.y<this.ab?(this.K=1,this.o+=this.K*this.ha*a):this.o=0:0>this.speed&&(this.y>this.fa-this.ga?(this.K=-1,this.o+=this.K*this.ha*a):this.o=0);var b=this.o,c=-this.Ea,d=this.Ea;this.o=b<c?c:b>d?d:b;this.da-=a;this.f+=this.g*a;this.Pa(a);this.y+=this.o*a;grid.ma(this.x,this.z,1.2*this.s)||(this.speed=-this.speed,this.H=this.move=0);this.y=ha(this.y,-this.s);0>=this.v&&this.G()};
this.b=new Ua(4,.5,2,1,material[16]);this.b.z=-1.25;this.b.bind();this.Ga();this.u=function(){ea();r(n,[-this.x,-this.y,-this.z]);u(this.scale);v(n,this.f+this.Ba*this.g,[0,1,0]);v(n,this.D+this.$a*this.g,[0,0,1]);v(n,this.pitch,[1,0,0]);this.b.u();n=z.pop()};this.G=function(a){this.j=!1;for(var b=this.Oa+E(3),c=0;c<b;c++)Wa(Ya,this.x,this.y,this.z).ib();stat.pb[this.c]++;this==R&&(this.speed=-1,this.na=5,stat.xb[this.c]++);a&&(stat.ob[a.c]++,a==R&&stat.wb[a.c]++);M(2,this)};this.toString=function(){return this.name+
" MK"+this.qa+" ["+this.c+"]"}}Va.U=0;function Xa(){this.type=3;augment(this,_Actor);this.s=.01;this.scale=[.1,.1,.1];this.speed=12;this.Sa=10;this.pa=2.5;this.join=function(a){this.source=a;this.Sa=a.ia;this.f=a.f+a.Ba*a.g;this.D=a.D;this.pitch=a.pitch;this.A(.07);switch(a.c){case 0:this.b.J=[2,2,2];break;case 1:this.b.J=[2,2,0];break;case 2:this.b.J=[3,1,0];break;case 3:this.b.J=[2,.3,0];break;case 4:this.b.J=[.5,1.5,2]}};this.$=function(a){switch(a.type){case 1:case 2:this.source!=a&&(this.G(),a.v-=this.Sa,0>=a.v&&a.G(a.source))}};
this.A=function(a){this.x+=Math.sin(this.f)*this.speed*a;this.z+=Math.cos(this.f)*this.speed*a;this.pa-=a;0>this.pa&&this.G()};this.b=new Ua(8,8,.3,.3,material[4]);this.b.Ta=1;this.J=[2,2,0];this.b.bind();this.u=function(){ea();r(n,[-this.x,-this.y,-this.z]);u(this.scale);v(n,this.f,[0,1,0]);v(n,this.D,[0,0,1]);v(n,this.pitch,[1,0,0]);this.b.u();n=z.pop()};this.G=function(){this.j=!1}};function Ya(){augment(this,_Actor);this.type=2;this.name="Pod";this.s=.2;this.speed=0;this.v=10+E(40);this.scale=[.3,.3,.3];this.bb=.5;this.ib=function(){this.f=D()/4294967295*ja-B;this.speed=1+E(3)};this.A=function(a){this.x+=Math.sin(this.f)*this.speed*a;this.z+=Math.cos(this.f)*this.speed*a;var b=this.speed,b=b-this.bb*a;this.speed=0>b?0:b;grid.ma(this.x,this.z,10*this.s)||(this.speed=-this.speed);this.b.A(a)};this.Wa=E(2);switch(this.Wa){case 0:this.b=new Ua(1,1,1,1,material[18]);this.b.bind();
this.b.scale=[.6,.6,.6];this.b.A=function(a){this.f-=.8*a};break;case 1:this.b=new T(material[10]),this.b.scale=[1,1,1],this.b.bind()}this.$=function(a){switch(a.type){case 1:switch(this.G(),this.Wa){case 0:a.v+=this.v;M(1,this);O==a&&V("Energy +"+this.v,2);break;case 1:a.Xa(),M(4,this)}}};this.u=function(){ea();r(n,[-this.x,-this.y,-this.z]);u(this.scale);v(n,this.f,[0,1,0]);v(n,this.D,[0,0,1]);v(n,this.pitch,[1,0,0]);this.b.u();n=z.pop()}};SCALE=5;HSC=SCALE/2;
function Za(){var a=env.level;function b(a,b,d,f,l){return 0>f||f>=c.width||0>f||l>=c.width?!1:100>=c.C[f][l]?!0:!(a+d>=f&&a-d<=f+1&&b+d>=l&&b-d<=l+1)}var c=this;C=2001*a;this.width=ia(20,a,2,40);this.m=floor(this.width/2)-1;this.C=[];this.a=[];this.a[0]=new Quad(material[16]);this.a[0].bind();this.a[0].scale=[SCALE,SCALE,SCALE];this.a[1]=new Quad(material[3]);this.a[1].bind();this.a[1].scale=[SCALE,SCALE,SCALE];this.a[2]=new Quad(material[5]);this.a[2].bind();this.a[2].scale=[SCALE,SCALE,SCALE];
this.a[101]=new T(material[17]);this.a[101].bind();this.a[101].y=-SCALE/2;this.a[101].scale=[SCALE,SCALE,SCALE];this.a[102]=new T(material[11]);this.a[102].bind();this.a[102].y=-SCALE/2;this.a[102].scale=[SCALE,SCALE,SCALE];this.a[103]=new T(material[8]);this.a[103].bind();this.a[103].y=-SCALE/2;this.a[103].scale=[SCALE,SCALE,SCALE];this.a[104]=new T(material[12]);this.a[104].bind();this.a[104].y=-SCALE/2;this.a[104].scale=[SCALE,SCALE,SCALE];this.a[105]=new T(material[9]);this.a[105].bind();this.a[105].y=
-SCALE/2;this.a[105].scale=[SCALE,SCALE,SCALE];this.a[106]=new T(material[7]);this.a[106].bind();this.a[106].y=-SCALE/2;this.a[106].scale=[SCALE,SCALE,SCALE];for(var a=101+E(6),d=0;d<this.width;d++){this.C[d]=[];for(var f=0;f<this.width;f++){this.C[d][f]=0;if(0==d||d==this.width-1)this.C[d][f]=a;if(0==f||f==this.width-1)this.C[d][f]=a}}this.gb=function(a,b,c){2<a&&a<this.width-4&&2<b&&b<this.width-4&&(this.C[a][b]=c)};this.rect=function(a,b,c,d,f){for(var q=0;q<c;q++)for(var t=0;t<d;t++)this.gb(a+
q,t+b,f)};this.block=function(){type=101+E(6);var a=1+E(3),b=1+E(3),c=2+E(this.width-4),d=2+E(this.width-4);this.rect(c,d,a,b,type)};this.la=function(){type=1+E(2);var a=1+E(3),b=1+E(3),c=2+E(this.width-4),d=2+E(this.width-4);this.rect(c,d,a,b,type)};for(a=0;a<this.width;a++)this.la(),this.la();for(a=0;a<this.width;a++)this.block(),this.la();this.Z=function(a){a=floor((a+HSC)/SCALE);return a>this.width?-1:a};this.ma=function(a,c,d){var f=(a+HSC)/SCALE,l=(c+HSC)/SCALE;d/=SCALE;a=this.Z(a);c=this.Z(c);
return 0>a||a>=this.width||0>c||c>=this.width?!0:b(f,l,d,a,c)&&b(f,l,d,a-1,c)&&b(f,l,d,a+1,c)&&b(f,l,d,a,c-1)&&b(f,l,d,a,c+1)&&b(f,l,d,a-1,c+1)&&b(f,l,d,a-1,c-1)&&b(f,l,d,a+1,c+1)&&b(f,l,d,a+1,c-1)};this.sa=function(a){var b=floor(++a/this.width),c=a%this.width;return b>=this.width?this.sa(this.width):100>this.C[b][c]?[b*SCALE,c*SCALE]:this.sa(a)};this.Ia=function(a){var b=E(this.width*this.width),c=floor(b/this.width),b=b%this.width;switch(a){case 1:c=1+E(this.m);b=1+E(this.m);break;case 2:c=this.m+
E(this.m);b=E(this.m);break;case 3:c=E(this.m);b=this.m+E(this.m);break;case 4:c=this.m+E(this.m),b=this.m+E(this.m)}return 100>this.C[c][b]?[c*SCALE,b*SCALE]:this.sa(c*this.width+b)};this.V=function(a){this.ma(a.x,a.z,.1)||a.G()};this.u=function(){var a=floor((O.x+HSC)/SCALE),b=floor((O.z+HSC)/SCALE),c;c=b-CULLING/SCALE;c=0>c?0:c;for(var d=ha(a+CULLING/SCALE,this.width),b=ha(b+CULLING/SCALE,this.width),f=0,a=a-CULLING/SCALE,a=0>a?0:a;a<d;a++)for(var q=c;q<b;q++){var t=this.a[this.C[a][q]];t.x=a*
SCALE;t.z=q*SCALE;t.u();env.ra++;f++}}};function $a(a){switch(a){case 1:return"Green";case 2:return"Red";case 3:return"Blue";case 4:return"Yellow";default:return"Lost"}}function ab(){if(stat.aa>=env.xa&&0==stat.units(0,1)||0==stat.X(1)||0==stat.X(2)||0==stat.X(3)||0==stat.X(4)){for(var a=0,b=0,c=1;5>c;c++){var d=stat.units(c,1);d>b&&(a=c,b=d)}return a}return 0}
function bb(){env.xa=ia(30,env.level,10,200);env.qb=ia(100,env.level,10,250);stat={aa:0,lb:[0,0,0,0,0],vb:[0,0,0,0,0],ob:[0,0,0,0,0],wb:[0,0,0,0,0],pb:[0,0,0,0,0],xb:[0,0,0,0,0],units:function(a,b){var c=0;0>a?entities.forEach(function(a){a.type==b&&a.j&&c++}):entities.forEach(function(d){d.type==b&&d.c==a&&d.j&&c++});return c},X:function(a){var b=0;entities.forEach(function(c){1==c.type&&c.c!=a&&0!=c.c&&c.j&&b++});return b}}};var w;CULLING=60;SPAWN_RATE=.5;ROLLING_DEMO_TIME=30;_loaded=_resources=0;material=[];textureSets=[];env={pause:!1,level:0,Y:0,Na:0,M:0,N:0,ua:!1,Hb:!1,status:"none",message:"",ba:0};entities=[];markers=[];var R=!1,O=!1,y=new glMatrixArrayType(16),n=new glMatrixArrayType(16),z=[];new glMatrixArrayType(16);var Ja=Date.now(),A;function V(a,b){env.message=a;b||(b=3);env.ba=b}
function Ia(){env.level++;entities=[];grid=new Za;bb();Ma=!0;C=7181*env.level;for(var a=Q(1),b=ia(10,env.level,2,20),c=0;c<b;c++)for(var d=1;5>d;d++)Q(d);for(c=0;c<2*grid.width;c++)cb();Ma=!1;O=R=a;V("Zone "+env.level,7)}
function db(a,b,c){if(0>c){c=b;b=-1;if(!c||c>=entities.length)c=entities.length-1;for(;0<=c&&0>b;c--)a(entities[c])&&(b=c);if(0>b)for(i=entities.length-1;0<=i&&0>b;i--)a(entities[i])&&(b=i)}else{c=b;b=-1;if(!c||0>c)c=0;for(c=c?c:0;c<entities.length&&0>b;c++)a(entities[c])&&(b=c);if(0>b)for(i=0;i<entities.length&&0>b;i++)a(entities[i])&&(b=i)}a=b;return 0>a?null:entities[a]}
function S(a,b){var c=entities.indexOf(O);a?c+=a:c++;var d=!1;if(d=b?db(function(a){return a.j&&1==a.type&&a.c==b?!0:!1},c,a):db(function(a){return a.j&&1==a.type?!0:!1},c,a))O=d,R&&(R=O),env.ea=5+E(10);return d}function Wa(a,b,c,d){a=new a;a.nb(b,c,d);b=!1;for(c=0;c<entities.length;c++)if(!entities[c].j){entities[c]=a;b=!0;break}b||entities.push(a);return a}
function Q(a){var b=grid.Ia(a),c=db(function(a){return 5>ga(a.x,a.z,b[0],b[1])&&3>a.type}),d=60;O&&(d=floor(ga(O.x,O.y,b[0],b[1])));return!c&&(a||40<d)?(c=Wa(Va,b[0],-.5,b[1]),c.f=D()/4294967295*ja-B,a&&c.Ha(a),0==a&&stat.aa++,M(10),c):Q(a)}function cb(){var a=grid.Ia();db(function(b){return 2>ga(b.x,b.z,a[0],a[1])&&3>b.type})||Wa(Ya,a[0],-.5,a[1])}
function Ka(){var a=Date.now(),b=(a-Ja)/1E3;window.U(Ka);try{da(b);for(.3<b&&(b=.3);.05<b;)eb(.05),b-=.05;eb(b)}catch(c){console.log(c)}Ja=a;env.Fb=Date.now()-a}function Sa(){env.O=!0;env.ea=7;R=!1;env.M=ROLLING_DEMO_TIME+1}
function eb(a){if(!env.pause&&(env.Y+=a,env.Na+=a,env.M+=a,env.ba-=a,0<env.N&&(env.N-=a,0>=env.N&&Ia()),O||S(),O.j||(0<O.na?(O.na-=a,O.Pa(a)):null==S(1,O.c)&&(S(),Sa())),env.O?(env.ea-=a,0>env.ea&&S(),env.M<ROLLING_DEMO_TIME&&(env.O=!1,R=O)):env.M>ROLLING_DEMO_TIME&&Sa(),markers.map(function(b){b.A(a)}),entities.map(function(b){b.j&&b.A(a)}),entities.map(function(b){b.j&&b.V&&(grid.V(b,a),entities.map(function(d){b!=d&&d.j&&b.V(d,a)}))}),D()/4294967295<SPAWN_RATE*a&&stat.units(-1,1)<env.qb&&stat.aa<
env.xa&&Q(0),0==env.N)){var b=ab();0<b&&(V("ZONE "+env.level+" COMPLETED<hr>"+$a(b)+" Team Wins!",7),env.N=8)}}
function da(a){w.viewport(0,0,w.Aa,w.za);w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT);if(_loaded===_resources&&A){ba();aa();if(O){var b=O;v(y,.1,[1,0,0]);r(y,[0,-1,-2.5]);v(y,-b.pitch,[1,0,0]);v(y,-b.f,[0,1,0]);v(y,-b.D,[0,0,1]);r(y,[b.x,b.y,b.z])}else v(y,0,[1,0,0]),v(y,0,[0,1,0]),r(y,[0,0,0]);w.uniformMatrix4fv(A.ub,!1,y);w.uniformMatrix4fv(A.Qa,!1,n);fa();env.ra=0;grid.u();markers.map(function(a){env.ra++;a.u()});entities.map(function(b){b.j&&Math.sqrt((O.x-b.x)*(O.x-b.x)+(O.z-b.z)*(O.z-b.z))<
CULLING&&(env.ra++,b.u(a))});aa();0<env.ba?messageBar.innerHTML=env.message:messageBar.innerHTML="";O&&(statusBar.innerHTML='<font color="#A0A0D0">Lost: '+stat.units(0,1)+"/"+(env.xa-stat.aa)+'</font>&nbsp&nbsp<font color="#40FF20"> Green: '+stat.units(1,1)+'</font>&nbsp&nbsp<font color="#FF5020"> Red: '+stat.units(2,1)+'</font>&nbsp&nbsp<font color="#5020FF"> Blue: '+stat.units(3,1)+'</font>&nbsp&nbsp<font color="#FFD000"> Yellow: '+stat.units(4,1)+"</font>"+(env.pause?"<br>(GAME PAUSED) ":"")+(env.O?
"<br>(DEMO MODE) ":""));O&&env.ua?overlay.innerHTML=(R?"Controlling ":"")+O+" @"+grid.Z(O.x)+"x"+grid.Z(O.z)+"<br>"+floor(100*O.x)/100+" -- "+floor(100*O.z)/100+" -- "+floor(100*O.y)/100+"<br>Shield: "+O.v+"<br>Speed: "+floor(O.speed)+(R?"":"<hr>Goal: "+O.Ja+(O.h?"<br>Target: "+O.h+" @"+Math.round(O.W(O.h))+"m":"")+"<br>Action: "+O.action+"["+floor(O.B)+"]<br>Move: "+O.move+"["+floor(O.H)+"]")+"<br>Drones: "+stat.units(-1,1)+"<br>Status: "+env.status+"<hr>FPS: "+Math.round(1/a):O&&(overlay.innerHTML=
""+O+"<br>Shield: "+O.v+"/"+O.S)}};
