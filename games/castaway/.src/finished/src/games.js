var F=!1,srcX,srcY,srcX1,srcY1,sheetWidth=62,sheetHeight=16,sheetWidth1=32,sheetHeight1=16,cols=4,rows=1,cols1=2,rows1=1,width=sheetWidth/cols,height=sheetHeight/rows,width1=sheetWidth1/cols1,height1=sheetHeight1/rows1,currentFrame=0,currentFrame1=0,down=!1,up=!1,left=!1,right=!1,heroX=Math.floor(536*Math.random())+1,heroY=Math.floor(536*Math.random())+1,chestX=Math.floor(568*Math.random())+1,chestY=Math.floor(568*Math.random())+1,mX=Math.floor(500*Math.random())+1,mY=Math.floor(500*Math.random())+
1,buffX=Math.floor(536*Math.random())+1,buffY=Math.floor(536*Math.random())+1,buffO=!0,ok=!0,darkX,darkY,cOn=!1,stairs=!1,tPositionX=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,480,512,544,576,608,640],tPositionY=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,480,512,544,576,608,640],key=!1,end=!1,mX1=[mX,120,30,mX+mY,300,500],mY1=[mY,176,500,mY+mX,300,32],mY2=[300,32,500,50,40,600,70,8,20,55],mX2=[300,500,32,20,60,300,200,70,80,90],mSY1=[mY,176,500,mY+mX,300,32],mSX1=[mX,120,
30,mX+mY,300,500],mSY2=[300,32,500,50,40,600,70,8,20,55],mSX2=[300,500,32,20,60,300,200,70,80,90],speedMX=[1,2,3,4,1,2,3,4,1,2],speedMY=[.5,1,1.5,2,2.5,3,.5,1,1.5],count1=Math.floor(10*Math.random())+1,health=100,hunger=100,move=600,t=!0,borderX=-16,scoreG=0,scoreE=0,reload=!1,timer=0,aRX=heroX-32,aRY=heroY-32,aO=!0,uD=.5>Math.random()?-3:3,lR=.5>Math.random()?-7:7,heroS=new Image;heroS.src="assets/hero.png";var s=new Image;s.src="assets/stairs.png";var tile=new Image;tile.src="assets/tile.png";
var chest=new Image;chest.src="assets/chest.png";var monster=new Image;monster.src="assets/Undead.png";var slimer=new Image;slimer.src="assets/slimer.png";var buff=new Image;buff.src="assets/animal.png";var grass=new Image;grass.src="assets/grass.png";var map1=new Image;map1.src="assets/map.png";
function drawT(){if(0==stairs){for(var a=0;20>a;a++)for(var b=0;20>b;b++)canvasContext.drawImage(grass,tPositionX[a],tPositionY[b],32,32);canvasContext.drawImage(map1,0,0,canvas.width,canvas.height);canvasContext.strokeStyle="#18892a";canvasContext.lineWidth=32;canvasContext.strokeRect(borderX,16,canvas.width,canvas.height-32);timer=0}if(stairs){for(a=0;20>a;a++)for(b=0;20>b;b++)canvasContext.drawImage(tile,tPositionX[a],tPositionY[b],32,32);200<timer&&canvasContext.drawImage(chest,chestX,chestY,
32,32);canvasContext.strokeStyle="gray";canvasContext.lineWidth=32;canvasContext.strokeRect(16,16,canvas.width-32,canvas.height-32);canvasContext.drawImage(s,352,254,32,32);canvasContext.strokeStyle="black";canvasContext.globalAlpha=.8;canvasContext.lineWidth=500;canvasContext.strokeRect(darkX,darkY,canvas.width,canvas.height);canvasContext.lineWidth=500;canvasContext.strokeRect(60,-40,canvas.width,canvas.height);canvasContext.globalAlpha=1;200<timer&&(canvasContext.strokeStyle="white",canvasContext.lineWidth=
2,canvasContext.strokeRect(chestX,chestY,32,32));down&&cOn&&539>heroY&&(darkY+=10,scoreG++);up&&cOn&&33<heroY&&(darkY-=10,scoreG++);left&&cOn&&33<heroX&&(darkX-=10,scoreG++);right&&cOn&&538>heroX&&(darkX+=10,scoreG++);heroX>=chestX&&heroX+20<=chestX+32&&heroY>=chestY&&heroY+20<=chestY+32&&1==cOn&&200<timer&&(alert("You found a map home, and folow it!"),scoreG+=100,stairs=!stairs,cOn=!cOn,heroY=400,heroX=canvas.width/2,key=!0,end=!end)}384>=heroX&&352<=heroX&&284>=heroY+20&&252<=heroY&&(cOn=!cOn,scoreG++,
(stairs=!stairs)&&(heroX=400),0==stairs&&(heroX=332))}function updateFrame(){currentFrame=++currentFrame%cols;srcX=currentFrame*width;srcY=0;currentFrame1=++currentFrame1%cols1;srcX1=currentFrame1*width1;srcY1=0}
function hero(){down&&(heroY+=10,hunger-=.1);up&&(heroY-=10,hunger-=.1);left&&(heroX-=10,hunger-=.1);right&&(heroX+=10,hunger-=.1);heroY>canvas.height-60&&(scoreG--,heroY=canvas.height-60,--health);32>heroY&&(scoreG--,heroY=33,--health);heroX>canvas.width-60&&0==end&&(scoreG--,heroX=canvas.width-61,--health);0>heroX&&0==cOn&&(alert("The current is too strong to swim any further!"),scoreG--,down=up=right=left=!1,heroX=1,--health);32>heroX&&cOn&&(heroX=32);updateFrame();aRX=heroX+15;aRY=heroY+15;canvasContext.drawImage(heroS,
srcX,srcY,width,height,heroX,heroY,32,32);aO&&(canvasContext.strokeStyle="silver",canvasContext.lineWidth=1,canvasContext.beginPath(),canvasContext.arc(aRX,aRY,48,0,2*Math.PI,!0),canvasContext.stroke());if(0==cOn){darkY=-50;darkX=114;count1=Math.floor(10*Math.random())+1;for(var a=0;a<count1;a++)mY1[a]=mSY1[a],mX1[a]=mSX1[a],mX2[a]=mSX2[a],mY2[a]=mSY2[a];if(buffO||ok)canvasContext.drawImage(buff,srcX1,srcY1,width1,height1,buffX,buffY,32,32),buffX+=lR,buffY+=uD;buffY>aRY-48&&buffY+32<aRY+48&&buffX>
aRX-48&&buffX+32<aRX+48&&0==buffO&&100>hunger&&(alert("You killed the Buffalo and gained 10 hunger!"),hunger+=10,scoreG+=10,down=up=right=left=key=!1,buffX=Math.floor(536*Math.random())+1,buffY=Math.floor(536*Math.random())+1,lR=.5>Math.random()?-7:7,uD=.5>Math.random()?-3:3,buffO=!0);100<hunger&&hunger--}reload&&location.reload();key&&0==stairs&&(alert("YOU WIN, CONGRATULATIONS!"),left=key=!1,right=!0,down=up=!1,hunger=health=100);canvasContext.fillStyle="lime";50>=health&&25<health&&(canvasContext.fillStyle=
"yellow");25>=health&&(canvasContext.fillStyle="red");canvasContext.fillRect(25,25,health,10);canvasContext.lineWidth=3;canvasContext.strokeStyle="lightgray";canvasContext.strokeRect(25,25,100,10);canvasContext.fillStyle="lightgray";canvasContext.font="italic 10pt new times roman";canvasContext.fillText("HP = "+Math.floor(health),50,20);75<hunger&&100>health&&(health+=.5,hunger-=.5);1>hunger&&1<health&&(health-=.5,hunger=.9);0>hunger&&(hunger=0);0==t&&(hunger-=.01);canvasContext.fillStyle="#5B3E00";
canvasContext.fillRect(25,55,hunger,10);canvasContext.lineWidth=3;canvasContext.strokeStyle="lightgray";canvasContext.strokeRect(25,55,100,10);canvasContext.fillStyle="lightgray";canvasContext.font="italic 10pt new times roman";canvasContext.fillText("Hunger",55,50);canvasContext.fillText("Score = "+scoreG,50,80);end&&(scoreE=scoreG,canvasContext.fillStyle="black",canvasContext.fillRect(move,0,2*canvas.width,2*canvas.height),canvasContext.fillStyle="orange",canvasContext.font="italic 60pt new times roman",
canvasContext.fillText("GAME OVER",move+100,canvas.height/2),canvasContext.font="italic 30pt new times roman",canvasContext.fillText("Score = "+scoreE,move+250,canvas.height/2+100),move-=5);-20>move&&(end=!1,location.reload());if(cOn){for(a=0;a<count1;a++)canvasContext.drawImage(slimer,srcX1,srcY1,width1,height1,mX2[a],mY2[a],32,32),canvasContext.drawImage(monster,srcX1,srcY1,width1,height1,mX1[a],mY1[a],32,32);timer+=1}t&&(canvasContext.fillStyle="#1f9b33",canvasContext.fillRect(0,0,canvas.width,
canvas.height),canvasContext.drawImage(map1,0,0,canvas.width,canvas.height),canvasContext.strokeStyle="#18892a",canvasContext.lineWidth=32,canvasContext.strokeRect(-16,16,canvas.width,canvas.height-32),canvasContext.strokeStyle="gray",canvasContext.fillStyle="black",canvasContext.globalAlpha=.7,canvasContext.fillRect(0,0,canvas.width,canvas.height),canvasContext.fillRect(canvas.width/2-200,26,422,98),canvasContext.fillRect(canvas.width/2-105,175,242,29),canvasContext.fillRect(canvas.width/2-131,465,
292,37),canvasContext.fillRect(64,230,493,87),canvasContext.fillRect(64,330,493,107),canvasContext.globalAlpha=1,canvasContext.font="italic 80pt new times roman",canvasContext.fillStyle="gray",canvasContext.fillText("Castaway",canvas.width/2-200,100),canvasContext.lineWidth=2,canvasContext.strokeRect(canvas.width/2-200,26,422,98),canvasContext.strokeRect(canvas.width/2-105,174,242,30),canvasContext.strokeRect(canvas.width/2-131,463,292,37),canvasContext.font="italic 25pt new times roman",canvasContext.fillText('Press "S" to start',
canvas.width/2-100,200),canvasContext.fillText("Coded by: The Coder",canvas.width/2-130,490),canvasContext.font="italic 15pt new times roman",canvasContext.strokeRect(62,230,495,87),canvasContext.fillText("One night you wake up on an Island, completly disoriantated",65,250),canvasContext.fillText("eventually you realise that you are trapped",65,270),canvasContext.fillText("and need to find a key to escape.",65,290),canvasContext.fillText("You then realise that you are not alone...",65,310),canvasContext.strokeRect(62,
330,495,107),canvasContext.fillText("Press the arrow keys to move around",65,350),canvasContext.fillText('Press "X" to atack animals',65,370),canvasContext.fillText('Press "S" again to go to the menu',65,390),canvasContext.fillText('Press "R" to reload the game',65,410),canvasContext.fillText('Press "A" to turn off attack radius',65,430))}
function collision(){0>=health&&(alert("You lost =("),stairs=!stairs,heroX=heroY=100,cOn=!cOn,end=!0,hunger=health=100,scoreG=0);if(cOn){for(var a=0;a<count1;a++){mX2[a]-=speedMX[a];mY2[a]+=speedMY[a];if(0>mX2[a]||mX2[a]>canvas.width-32)speedMX[a]=-speedMX[a];if(0>mY2[a]||mY2[a]>canvas.height-32)speedMY[a]=-speedMY[a]}for(a=0;a<count1;a++)heroY<mY1[a]&&--mY1[a],heroY>mY1[a]&&(mY1[a]+=1);for(a=0;a<count1;a++)heroX>mX1[a]&&(mX1[a]+=1),heroX<mX1[a]&&--mX1[a];for(a=0;a<count1;a++)mY1[a]>=heroY&&mY1[a]<=
heroY+1&&mX1[a]>=heroX&&mX1[a]<=heroX+32&&(health--,0<scoreG&&scoreG--),mY2[a]>=heroY&&mY2[a]<=heroY+1&&mX2[a]>=heroX&&mX2[a]<=heroX+32&&(health-=20,0<scoreG&&scoreG--)}}document.onkeydown=function(a){40===a.keyCode&&(down=!0);38===a.keyCode&&(up=!0);39===a.keyCode&&(right=!0);37===a.keyCode&&(left=!0);83===a.keyCode&&(t=!t);88===a.keyCode&&(buffO=!1);82===a.keyCode&&(reload=!0);65===a.keyCode&&(aO=!aO)};
document.onkeyup=function(a){40===a.keyCode&&(down=!1);38===a.keyCode&&(up=!1);39===a.keyCode&&(right=!1);37===a.keyCode&&(left=!1);88===a.keyCode&&(buffO=!0);82===a.keyCode&&(reload=!1)};