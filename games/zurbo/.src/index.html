<!DOCTYPE html><html><body><div id="viewport"></div><script>var Sprites_base64='data:image/png;base64,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'</script><script>(function(){var o;var n;var i;var f;var c;var s;var l;var v;var t;var d;var u;var h;var e=function(){Canvas_backgroundCanvas=r(w,x);Canvas_backgroundContext=y(Canvas_backgroundCanvas);o=r(w,x);n=y(o);b.appendChild(o);i=r(256,26*7);f=y(i);c=r(2e3,100);s=y(c);l=r(w,x);v=y(l);u=r(da,da);h=y(u);t=r(w,x);d=y(t)};var p=function(){v.clearRect(0,0,w,x)};var a=function(e){e.style.position="fixed";e.style.border="2px solid red";e.style.top=0;document.body.appendChild(e)};var r=function(e,a){var r=document.createElement("canvas");r.style.display="inline-block";r.style.position="absolute";r.width=e;r.height=a;return r};var y=function(e){var a=e.getContext("2d");a.mozImageSmoothingEnabled=false;a.webkitImageSmoothingEnabled=false;a.imageSmoothingEnabled=false;return a};function g(e,a,r){d.clearRect(0,0,e.width,e.height);d.save();d.scale(1/r,1/r);d.drawImage(e,0,0,e.width,e.height);d.restore();a.clearRect(0,0,e.width,e.height);a.drawImage(t,0,0,e.width/r,e.height/r,0,0,e.width+3,e.height)}var m=function(e){e.style.width="100%";e.style.height="100%";e.style.margin=0;e.style.padding=0};var b;var w=1400;var x=600;var M;var T;var S;var k=5;var L=5;var I;var C=2e3;var E=0;var _=1;var P=2;var D=3;var j=4;var R=5;var A=6;var Y=7;var B=8;var W=9;var V=E;var H=function(){T=document.body.clientWidth/2;S=-200;z();e();la();X();N();G();Z();F();U();setTimeout(function(){ga();ma();Xa();oe()},50)};var q=function(){J(_)};var U=function(){var e=setInterval(function(){if(ia){clearInterval(e);q()}},17)};var X=function(){var e=window,a=document,r=a.documentElement,t=a.getElementsByTagName("body")[0],n=e.innerWidth||r.clientWidth||t.clientWidth,i=e.innerHeight||r.clientHeight||t.clientHeight;if(n/i>=w/x){o.style.width="auto";o.style.height="100%";o.style.top="auto";o.style.left="50%";o.style.transform="translateX(-50%)"}else{o.style.width="100%";o.style.height="auto";o.style.top="50%";o.style.left="auto";o.style.transform="translateY(-50%)"}};var O=function(e){var a=0;var r=0;var t=document.body.clientWidth;var n=document.body.clientHeight;var i;var o;if(n/t>=x/w){i=t;o=t*x/w;a=(n-o)/2}else{o=n;i=n*w/x;r=(t-i)/2}return{x:(e.x-r)*w/i,y:(e.y-a)*x/o}};var Z=function(){window.addEventListener("resize",function(){X()});document.body.addEventListener("mousemove",function(e){T=e.clientX;S=e.clientY});document.addEventListener("keydown",function(e){var a=e.which||e.keyCode;if(a===13){if(V>Y){J(P)}else if(V>E&&V<Y){J(V+1)}}})};var z=function(){var e=document.querySelector("html");var a=document.querySelector("body");e.style.backgroundColor="black";a.style.backgroundColor="black";b=document.getElementById("viewport");m(e);m(a);m(b)};var F=function(){requestAnimationFrame(F);N();G()};var G=function(){n.clearRect(0,0,w,x);if(V===Y){he();Fe();za();ua()}else{Ma()}g(o,n,Math.round(k))};var N=function(){var e=(new Date).getTime();if(!M){M=e}var a=(e-M)/1e3;if(a<.1){if(V===Y){ce(a);Je(a);Na(a);pa(a)}Q(a)}M=e};var J=function(e){if(e===Y){k=40;L=1;I=48;Oa();Ze();fe();ya("start")}else if(e===P){K();sa()}else if(e===B){K();ca()}else if(e===W){K();ca();ya("player-win")}else{K()}V=e};var K=function(){k=20;L=5;I=24};var Q=function(e){if(k!==L){k-=e*I;if(k<L){k=L}}};var $={init:H};var ee;var ae;var re;var te=[];var ne=[];var ie=15;var oe=function(){ee=Re;ae=Be;re=Ye;re();Le()};var fe=function(){var e=[-200,-250,-275,0];var a=[300,350,310,200];ne=[];for(var r=0;r<4;r++){ne.push({x:e[r]+Ua,y:a[r],yVelocity:Math.random()*10,wingScaleOffset:Math.random(),wingScale:(Math.random()-.5)*2,speed:Math.random()*20+40})}};var le=function(e,a){return{x:a*100+50,y:e*100+100}};var ce=function(e){ge(e)};var se=function(e,a,r){var t=Math.round((e-50)/100);var n=Math.round((a-50)/100);var i=ee[r][n]&&ee[r][n][t];return i};var ve=function(e,a){var r=se(e,a,2);return r!==undefined&&ae[r]};var de=function(e){return e-e%100-1};var ue=function(e){return e+100-e%100};var he=function(){var e=-1*Ta/4-w;n.save();n.translate(e,0);var a=Math.ceil(Ae/w/4)+1;for(var r=0;r<a;r++){n.translate(w,0);n.drawImage(Canvas_backgroundCanvas,0,0,w,x,0,0,w+2,x)}n.restore();pe();Ee(Ta);me()};var pe=function(e){p();ne.forEach(function(e){ye(e)});g(l,v,3);n.drawImage(l,0,0,w,x,0,0,w,x)};var ye=function(e){v.fillStyle="#0f2b55";v.save();v.beginPath();v.translate(e.x-Ta/4,e.y);v.rotate(-1*Math.PI*.05);v.fillRect(0,-1,13,3);v.scale(1,e.wingScale);v.moveTo(0,0);v.lineTo(5,10);v.lineTo(10,0);v.fill();v.restore()};var ge=function(a){var r=(new Date).getTime()/1e3;ne.forEach(function(e){e.x+=a*e.speed;e.y+=-1*a*e.yVelocity;e.wingScale=Math.sin((r+e.wingScaleOffset)*ie)})};var me=function(){if(ka){n.fillStyle="rgba(0, 0, 0, 0.7)";n.fillRect(0,0,w,x)}};var be=function(e){return e[Math.round(Math.random()*(e.length-1))]};var we=function(){p();s.beginPath();s.fillStyle="#64645c";s.fillRect(0,0,100,100);Me(30,30,15);Me(60,60,20);Me(20,50,10);Me(85,35,15);Me(20,80,15);Me(70,15,12);Me(80,80,13);Me(15,15,8);Me(55,90,8);Me(40,10,8);g(l,v,3);s.drawImage(l,0,0,100,100,0,0,100,100)};var xe=function(e,a,r,t){v.save();v.beginPath();v.translate(e,a);v.scale(1,.5);v.arc(0,0,r,0,Math.PI*2,false);v.fillStyle=t;v.fill();v.restore()};var Me=function(e,a,r){xe(e,a+2,r,"#111");xe(e,a-2,r,"#bdbdb3");xe(e,a,r,"#828277")};var Te=function(e,a){var r;for(var t=0;t<100/a;t++){for(var n=0;n<100/a;n++){r=be(e);s.fillStyle=r;s.fillRect(t*a,n*a,a,a)}}};var Se=function(e,a,r){var t=5;var n=20;var i,o,f;s.fillStyle=a;s.fillRect(0,0,100,100);for(var l=0;l<4;l++){o=l*(n+t);if(l%2===0){i=0;f=45;ke(r,i,o,f,n);ke(e,i+2,o+2,f-2,n-2);i+=45+t;f=45;ke(r,i,o,f,n);ke(e,i+2,o+2,f-2,n-2)}else{i=0;f=22;ke(r,i,o,f,n);ke(e,i,o+2,f,n-2);i+=22+t;f=45;ke(r,i,o,f,n);ke(e,i+2,o+2,f-2,n-2);i+=45+t;f=23;ke(r,i,o,f,n);ke(e,i+2,o+2,f-2,n-2)}}};var ke=function(e,a,r,t,n){s.fillStyle=e;s.fillRect(a,r,t,n)};var Le=function(){var e;for(var a in ae){e=ae[a];s.save();s.translate(e.index*100,0);e.render();s.restore()}};var Ie=function(){s.fillStyle="rgba(255, 255, 255, 0.3)";s.fillRect(0,0,100,20)};var Ce=function(){s.fillStyle="rgba(0, 0, 0, 0.4)";s.fillRect(0,80,100,100)};var Ee=function(e){var a=Math.round(e/100);var r=a*100-e;n.save();n.translate(r-100,0);_e(1,n,a);_e(2,n,a);n.restore()};var _e=function(e,t,n){var i;var o;var f;var l;ee[e].forEach(function(e,a){l=0;for(var r=n-8;r<=n+7;r++){i=e[r];o=ae[i];if(o){f=o.index;t.drawImage(c,f*100,0,100,100,Math.floor(l),Math.floor(a*100),102,100)}l+=100}})};var Pe="A";var De="M";var je="B";var Re=[[],[[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5,5,5,5,5,5,5,5,5,5,5,5,5,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,,,5,5,5,5,,5,,,5,5,,,,,,5,5,,,1,5,5,5,5,5,,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,1,,1,1,,1,1,1,1,1,5,5,5,5,5,5,,,5,5,,5,1,1,5,5,5,5,,1,5,5,5,5,5,5,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,,,,,,,,,,,,,,,,1,1,,,,,,,,,1,1,,,,,1,1,1,1,1,,,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,5,1,1,5,5,5,5,5,,5,5,5,5,5,5,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,7,7,7,7,7,7,5,5,5,5,5,5,5,5,,,5,5,5,5,5,5,7,5,5,5,5,5,5,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,1,1,,,,1,1,1,1,1,1,,,,,,,,,,,,,,,,1,1,,,,,,,,,1,1,,,,,1,1,1,1,1,,,,1,1,1,1,,5,5,5,,,5,5,5,5,5,5,,,5,5,5,5,5,5,5,,5,5,5,5,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,7,7,7,7,7,7,5,5,5,5,5,5,5,,,,5,5,5,5,5,5,7,5,5,5,5,5,5,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,1,1,,,,,,,,,,,,,,,,,,,1,1,,,,,1,1,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5,5,,,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[0,0,0,0,0,0,0,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,0,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,9,9,10,10,10,10,9,9,9,9,10,10,9,9,9,9,9,10,10,9,9,10,10,10,10,10,9,9,10,10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,6,,6,,6,,6,6,6,6,6,6,6,6,6,6,6,,,,,,,,,,,,,,6,6,6,6,6,6,6],[0,0,0,0,0,0,0,0,0,,,,,,,,,,,,,,,,,,,,2,3,3,3,,,,,,,,,,,,,,,,,,,,,,,,,4,4,,,,,,,,,0,4,,,,,,10,10,,,,,10,10,9,9,,,9,10,10,10,10,,,10,9,,,,,,10,10,,,,,,,,,,De,,,,,,,,,,,,,De,,,,,,,,,,,,6,6,6,6,6,6,6,6,6,6,6,6,6,,,,,,,,,,,,,,,,,,6,6,6,6,6,6,6],[0,0,0,0,0,0,0,0,0,,,,,,,,,,,,,,Pe,,,,3,3,4,,,,,,,,2,,,,,,,,,,,3,3,,,,,,,,,,,,2,2,2,2,3,,4,,,2,,,,,,,,,,,,10,10,,,10,,,,,,,,10,,,,,,,,,,,,,,,,,8,,,,,,,,,,,,,8,,,,,,,,,,,,6,6,6,6,6,6,6,6,6,6,6,6,,,,,,,,6,6,6,,,,6,6,6,,,6,6,6,6,6,6,6],[0,0,0,0,0,0,0,0,0,,,,,,,,,,,,,3,3,,,,,,,,,,,,,2,0,2,,,,,Pe,,,,,,,,,,,,,,,,,2,0,0,0,4,,,,,2,0,,,,,,,,,,,De,,,,,,,,,,,,,,10,,,,,,,,,,,,De,,,,9,,,,,,,,,De,,,,9,,,,De,,,,,,,,,,,,,,,,,,,,,,,6,6,,,,,,,,,,,,,,6,6,6,6,6,6,6],[0,0,0,0,0,0,0,0,0,2,,,,,,,,2,2,,,,,,,,,,,,Pe,,,,,0,0,0,,,,3,3,,,,,,,,,,,,Pe,,,,,0,0,0,0,,,Pe,,2,0,0,2,,Pe,,,8,,,,8,8,,,,,,,8,8,,,,,,,De,8,,,,,De,8,,,,8,,,,9,,,,De,,,,,8,,,,9,,,,8,,,,,,,,,,,,,,,,,,,,,,6,6,6,,,,,,,,,,,je,,,6,6,6,6,6,6,6],[0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,0,0,,,,,,2,2,2,2,2,2,2,2,2,2,2,0,0,0,,,,,,,,,,,,,,,,,2,2,,,2,0,0,0,0,2,2,2,2,0,0,0,0,2,2,2,2,9,8,8,8,9,9,8,8,8,8,8,8,9,9,8,8,8,,8,8,8,9,8,8,8,8,8,9,,,,9,,,,9,,,,8,,,,,9,,,,9,,,,9,,,,8,8,8,8,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6]]];var Ae=Re[2][0].length*100;var Ye=function(e){var a;var r;var t;var n;var i;p();v.fillStyle="#1f4379";v.fillRect(0,0,w,x);for(i=0;i<40;i++){a=Math.random()*w;r=Math.random()*x;t=Math.random()*3;n=Math.random();v.save();v.beginPath();v.arc(a,r,t,0,Math.PI*2,false);v.fillStyle="white";v.globalAlpha=n;v.fill();v.restore()}var o=[91,494,142,544,199,513,240,545,338,453,400,460,488,430,577,500,696,490,823,531,872,490,924,500,1014,413,1068,454,1205,340,1335,468,w-5,600];v.beginPath();v.moveTo(0,550);for(i=0;i<o.length;i+=2){v.lineTo(o[i],o[i+1]-50)}v.lineTo(w,550);v.lineTo(w,x);v.lineTo(0,x);v.closePath();v.fillStyle="#0f2b55";v.fill();g(l,v,3);Canvas_backgroundContext.drawImage(l,0,0,w,x,0,0,w,x)};var Be={0:{index:0,render:function(){Te(["#749f29","#84a33b","#718612","#9fc236","#2b4400","#94a729","#acd440"],2)}},1:{index:1,render:function(){Te(["#593f28","#3d220d","#573b25","#6b4f39","#553923","#3d210b"],2)}},2:{index:2,render:function(){Te(["#749f29","#84a33b","#718612","#9fc236","#2b4400","#94a729","#acd440"],2);Ie()}},3:{index:3,render:function(){Te(["#749f29","#84a33b","#718612","#9fc236","#2b4400","#94a729","#acd440"],2);Ie();Ce()}},4:{index:4,render:function(){Te(["#749f29","#84a33b","#718612","#9fc236","#2b4400","#94a729","#acd440"],2);Ce()}},5:{index:5,render:function(){Se("#302d36","#19171c","#45414f")}},6:{index:6,render:function(){s.beginPath();s.fillStyle="#e9f0f0";s.fillRect(0,0,100,100);s.beginPath();s.moveTo(0,100);s.lineTo(100,0);s.lineTo(100,100);s.fillStyle="#8dc7d1";s.fill();var e=s.createLinearGradient(20,20,60,60);e.addColorStop(0,"#cee1e0");e.addColorStop(.5,"#b2d4d7");e.addColorStop(1,"#cae0df");s.fillStyle=e;s.fillRect(20,20,60,60)}},7:{index:7,render:function(){Se("#cee1e0","#8dc7d1","#e9f0f0")}},8:{index:8,render:function(){we();Ie()}},9:{index:9,render:function(){we()}},10:{index:10,render:function(){we();Ce()}}};var We=[];var Ve=-800;var He=.5;var qe=.5;var Ue=0;var Xe=1200;var Oe={A:{spriteVelocity:6,runSpeed:200,spriteY:26,spriteHitY:26+52,spriteDeadY:26+52+52,spriteStartIndex:0,startLife:5,hitDistance:60},M:{spriteVelocity:6,runSpeed:100,spriteY:26,spriteHitY:26+52,spriteDeadY:26+52+52,spriteStartIndex:4,startLife:15,minTimeBetweenLasers:2,hitDistance:1200,projectileSpeed:400,projectileColor:"orange",projectileType:"ball"},B:{spriteVelocity:6,runSpeed:300,spriteY:26*4,spriteHitY:26*2,spriteDeadY:26*4,spriteStartIndex:4,startLife:40,minTimeBetweenLasers:.5,hitDistance:1200,projectileSpeed:1e3,projectileColor:"red",projectileType:"laser"}};var Ze=function(){var t,n;We=[];ee[2].forEach(function(e,r){e.forEach(function(e,a){if(ze(e)){n=Oe[e];t=le(r,a);We.push({type:e,spriteIndex:Math.round(Math.random()*3),direction:-1,x:t.x,y:t.y,hit:false,life:n.startLife,verticalVelocity:0,hitDistance:n.hitDistance,minTimeBetweenLasers:n.minTimeBetweenLasers,lastLaserTime:0,projectileColor:n.projectileColor,projectileSpeed:n.projectileSpeed,projectileType:n.projectileType})}})})};var ze=function(e){return e==="A"||e==="M"||e==="B"};var Fe=function(){We.forEach(function(e){var a=Oe[e.type].spriteStartIndex;var r;var t;if(e.life===0){r=0+a;t=Oe[e.type].spriteDeadY}else if(e.hit){r=Math.round(e.spriteIndex%3)+a;t=Oe[e.type].spriteHitY}else{r=Math.round(e.spriteIndex%3)+a;t=Oe[e.type].spriteY}n.save();n.translate(e.x-Ta+w/2,e.y+1);n.scale(-1*e.direction*4,4);n.translate(-16,-26);n.drawImage(i,r*32,t,32,26,0,0,32,26);n.restore();e.hit=false})};var Ge=function(){n.fillStyle="red";n.fillRect(-2,-2,4,4)};var Ne=function(e,a){var r;for(var t=0;t<We.length;t++){r=We[t];if(e>r.x-32&&e<r.x+32&&a>r.y-54-54&&a<r.y-54+54){return r}}return null};var Je=function(e){$e();ea(e);aa(e);Qe();Ke()};var Ke=function(){var t=(new Date).getTime()/1e3;We.forEach(function(e,a,r){if((e.type==="B"||e.type==="M")&&e.life>0&&Ia>0&&t-e.lastLaserTime>e.minTimeBetweenLasers){if(Math.abs(Sa-(e.y-52))<=e.hitDistance){if(Ta>e.x&&Ta-e.x<=e.hitDistance||Ta<e.x&&e.x-Ta<=e.hitDistance){ha(e.x,e.y-52,Ta,Sa-52,e.projectileColor,e.projectileSpeed,e.projectileType);e.lastLaserTime=t}}}})};var Qe=function(){We.forEach(function(e,a,r){if(e.type==="A"&&e.life>0){if(Math.abs(Sa-(e.y-52))<=e.hitDistance){if(e.direction===1&&Ta>e.x&&Ta-e.x<=e.hitDistance||e.direction===-1&&Ta<e.x&&e.x-Ta<=e.hitDistance){tr()}}}})};var $e=function(){We.forEach(function(e,a,r){if(e.y>x){r.splice(a,1)}})};var ea=function(o){We.forEach(function(e){var a=Oe[e.type].runSpeed;var r=a*o;var t=e.x;var n;var i;if(e.life>0){e.x+=r*e.direction;if(ve(e.x,e.y-1)){if(e.direction==1){e.x=de(e.x);e.direction=-1}else{e.x=ue(e.x);e.direction=1}}if(!ve(e.x,e.y)){if(e.direction==1){e.x=de(e.x);e.direction=-1}else{e.x=ue(e.x);e.direction=1}}}else{e.verticalVelocity+=C*o;e.y+=e.verticalVelocity*o}})};var aa=function(r){We.forEach(function(e){var a=Oe[e.type];e.spriteIndex+=a.spriteVelocity*r})};var ra=function(e){e.hit=true;if(e.life>0){e.life--;if(e.life===0){e.verticalVelocity=Ve;ya("bad-guy-die");if(e.type==="B"){ta()}}ya("hit")}};var ta=function(){setTimeout(function(){J(W)},3e3)};var na;var ia=false;var oa=false;var fa={songData:[{i:[3,192,116,0,3,192,128,0,0,0,7,12,22,0,0,0,0,0,0,2,255,0,0,32,61,3,29,4],p:[1,2,1,2,,,,,1,2,1,2],c:[{n:[147,150,154,147,150,154,147,150,154,147,150,154,142,145,147,154,142,145,149,142,145,149,142,145,149,142,145,149,137,140,142,149,135,,,,147,,,,135,,,,147,,,,130,,,,142,,,,130,,,,142],f:[]},{n:[145,149,152,145,149,152,145,149,152,145,149,152,140,142,145,152,140,144,147,140,144,147,140,144,147,140,144,147,135,140,144,147,133,,,,145,,,,133,,,,145,,,,128,,,,140,,,,128,,,,140],f:[]}]},{i:[2,128,116,0,2,127,116,15,0,0,83,35,129,0,0,3,130,4,1,2,40,167,2,32,89,5,91,7],p:[,,1,2,1,2,1,2,,,1,2,1,2,3],c:[{n:[135,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,123,,,,,,,,,,,,,,,,,118],f:[]},{n:[133,,,,,,,,,,,,,,,,128,,,,,,,,,,,,,,,,121,,,,,,,,,,,,,,,,,116],f:[]},{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],f:[]}]},{i:[2,96,116,0,2,96,116,13,0,0,97,50,124,0,0,1,138,7,1,3,37,84,2,32,135,4,92,3],p:[,,1,2,1,2,1,2,,,1,2,1,2,3],c:[{n:[154,,,,,,,,,,,,,,,,154,,,,,,,,,,,,,,,,159,,,,,,,,,,,,,,,,157,,,,,,,,,,,,,,,,162,,,,,,,,,,,,,,,,161],f:[]},{n:[152,,,,,,,,,,,,,,,,152,,,,,,,,,,,,,,,,157,,,,,,,,,,,,,,,,156,,,,,,,,,,,,,,,,161,,,,,,,,,,,,,,,,159],f:[]},{n:[154,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,159,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,162],f:[]}]},{i:[3,250,140,0,3,55,128,3,0,17,3,16,41,0,0,0,83,4,1,2,242,164,1,69,77,6,25,6],p:[,,,,1,2,1,2,,,1,2,1,2],c:[{n:[123,,,,130,,,126,,126,125,,123,,126,,118,,,,125,,,121,,121,120,,118,,121],f:[]},{n:[121,,,,128,,,125,,125,123,,121,,125,,116,,,,123,,,120,,120,118,,116,,120],f:[]}]},{i:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,32,0,0,0,0],p:[,,,,1,1,1,1,,2,1,1,1,1],c:[{n:[147,,,,147,,,147,,,147,,147,,,,147,,,,147,,,147,,,147,,147,,,147],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,,,,147,,147,147],f:[]}]},{i:[0,0,128,0,0,0,128,0,0,60,4,10,34,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,,,,1,1,1,1,1,1,1,1,1,1],c:[{n:[,147,147,,,147,147,,,147,147,,,147,147,147,,147,147,,,147,147,,,147,147,,,147,147,147],f:[]}]},{i:[2,128,116,0,2,128,128,15,0,0,7,14,39,0,0,0,97,4,1,3,49,154,0,109,107,4,79,4],p:[,,,,,,1,2,1,2,,,1,2],c:[{n:[147,150,154,147,150,154,147,150,154,147,150,154,142,145,147,154,142,145,149,142,145,149,142,145,149,142,145,149,137,140,142,149,135,,,,147,,,,135,,,,147,,,,130,,,,142,,,,130,,,,142],f:[]},{n:[145,149,152,145,149,152,145,149,152,145,149,152,140,142,145,152,140,144,147,140,144,147,140,144,147,140,144,147,135,140,144,147,133,,,,145,,,,133,,,,145,,,,128,,,,140,,,,128,,,,140],f:[]}]}],rowLen:6014,patternLen:32,endPattern:14,numChannels:7};var la=function(){var r=new lr;r.init(fa);var t=setInterval(function(){var e=r.generate()>=1;if(e){clearInterval(t);var a=r.createWave();na=document.createElement("audio");na.src=URL.createObjectURL(new Blob([a],{type:"audio/wav"}));na.loop=true;ia=true}},17)};var ca=function(){na.pause();na.currentTime=0};var sa=function(){ca();na.play();oa=true};var va=[];var da=100;var ua=function(){p();va.forEach(function(e){var a=e.startX-Ta+w/2;var r=e.startY;var t=e.magnitude;var n=e.angle;var i=Math.cos(n)*t+a;var o=Math.sin(n)*t+r;var f=Math.cos(n)*30;var l=Math.sin(n)*30;var c=e.type;h.clearRect(0,0,da,da);if(c==="laser"){h.beginPath();h.moveTo(da/2,da/2);h.lineTo(da/2+f,da/2+l);h.lineWidth=7;h.strokeStyle=e.color;h.stroke();h.beginPath();h.moveTo(da/2,da/2);h.lineTo(da/2+f,da/2+l);h.lineWidth=3;h.strokeStyle="white";h.stroke()}else{h.beginPath();h.arc(da/2,da/2,10,0,Math.PI*2,false);h.lineWidth=3;h.fillStyle="white";h.fill();h.strokeStyle=e.color;h.stroke()}v.save();v.beginPath();v.translate(i,o);v.translate(da/-2,da/-2);v.drawImage(u,0,0);v.restore()});g(l,v,3);n.drawImage(l,0,0,w,x,0,0,w,x)};var ha=function(e,a,r,t,n,i,o){var f=Math.atan((t-a)/(r-e));if(r>=e){}else{f+=Math.PI}va.push({startX:e,startY:a,angle:f,magnitude:50,angleChangeSpeed:(Math.random()-.5)*.4,color:n,speed:i,type:o});if(o==="laser"){ya("laser")}else{ya("fire-ball")}};var pa=function(o){va.forEach(function(e,a,r){e.magnitude+=o*e.speed;e.angle+=e.angleChangeSpeed*o;var t=Math.cos(e.angle)*e.magnitude+e.startX;var n=Math.sin(e.angle)*e.magnitude+e.startY;var i=Ne(t,n);if(i){r.splice(a,1);ra(i)}else if(e.color!=="blue"&&t>Ta-32&&t<Ta+32&&n>Sa-54-54&&n<Sa-54+54){tr()}else if(ve(t,n)){r.splice(a,1);ya("damage")}else if(n<0||n>x){r.splice(a,1)}})};var ya;var ga=function(){var a=new fr;ya=function(e){a.play(e)};a.add("laser",5,[[0,,.15,.5099,.2743,.9399,.2726,-.36,.0599,.27,.1299,.14,.4499,.4699,-.3199,,-.0399,-.4199,1,,,.0599,.0199,.5]]);a.add("fire-ball",5,[[3,,.3062,.4533,.3957,.0177,,.2154,,,,,,,,,,,1,,,,,.5]]);a.add("start",1,[[2,.4045,.2127,.6091,.5411,.552,,-.7327,.0561,.0021,,-.5946,,.2111,-.9549,.8694,.0593,-.6822,.9964,-.3453,.4295,.4381,,.97]]);a.add("jump",2,[[0,,.1756,,.1978,.339,,.2471,,,,,,.1883,,,,,.8865,,,,,.5]]);a.add("damage",5,[[3,,.1426,.3949,.4827,.1746,,-.0503,,,,,,,,,,,1,,,,,.38],[3,,.2189,.7895,.1358,.1205,,-.2385,,,,,,,,,.2261,-.144,1,,,,,.38],[3,,.1728,.4996,.2668,.0808,,.1381,,,,,,,,,.4345,-.0425,1,,,,,.38],[3,,.3191,.5696,.3516,.775,,-.3272,,,,.6291,.7188,,,.6283,,,1,,,,,.38]]);a.add("hit",5,[[3,.0943,.0682,.0338,.7676,.5,,1e-4,-.0676,.0794,.2326,-.861,.474,-.0235,-.5411,.0969,5e-4,-3e-4,.8762,-.6923,.4782,,.3177,.5],[3,,.01,,.2457,.6007,,-.3863,,,,,,,,,,,1,,,,,.5],[3,,.096,,.1501,.3326,,-.3845,,,,,,,,,,,1,,,,,.5]]);a.add("bad-guy-die",5,[[3,.0669,.32,.64,.39,.62,,1e-4,.26,-.926,.1831,-.36,.5,,,,-.0348,-.48,.3483,-.012,.66,.0464,.56,.5]]);a.add("player-hit",4,[[3,2e-4,.02,.3558,.9727,.5,,.0138,-.8858,.0016,.8367,-.9543,.6003,,-.7373,.9221,-.0312,-.1326,.9548,-.4151,.4419,.0027,.0959,.5]]);a.add("player-die",1,[[3,,.1099,.3199,1,.23,,.4,-.34,,,-.4799,.9499,,.0281,.2099,-.1199,-.1599,.9952,.1272,.37,,.0736,.86]]);a.add("player-win",1,[[0,9e-4,.1511,.3111,.9371,.5483,,.2513,-.0433,.3465,.2313,.5955,.1058,.0313,-.1773,.5405,-.199,-.0699,.8486,.4363,,,-.4909,.5]]);a.add("laser-jam",1,[[3,,.0833,,.248,.2707,,-.5066,,,,,,,,,,,1,,,,,.5]]);a.add("evil-online",2,[[1,.3546,.01,.0196,.8704,.1556,,-8e-4,-.0255,,,-.7422,.5081,,.0142,.4572,.0187,-.6615,.2794,-.0333,.3196,.4398,-.1309,.5]]);a.add("evil-offline",2,[[0,.0037,.0443,.0071,.9835,.0096,,.605,.6706,-.0455,.9295,-.1253,.3149,,.0708,.6381,.693,-.0557,.383,-.2426,,,,.5]])};var ma=function(){var e=new Image;e.src=Sprites_base64;e.onload=function(){f.drawImage(e,0,0);ba();wa();xa()}};var ba=function(){var e=f.getImageData(0,0,256,52);var a=e.data;for(var r=0;r<a.length;r+=4){if(a[r]>0||a[r+1]>0||a[r+2]>0){a[r]=255;a[r+1]=255;a[r+2]=255}}f.putImageData(e,0,52)};var wa=function(){var e=f.getImageData(0,0,256,52);var a=e.data;for(var r=0;r<a.length;r+=4){var t=.34*a[r]+.5*a[r+1]+.16*a[r+2];a[r]=t;a[r+1]=t;a[r+2]=t}f.putImageData(e,0,104)};var xa=function(){v.clearRect(0,0,w,x);v.save();v.translate(10,20);v.fillStyle="red";v.beginPath();v.moveTo(0,0);v.lineTo(-10,-15);v.lineTo(10,-15);v.closePath();v.fill();v.beginPath();v.arc(-5,-15,5,0,Math.PI,true);v.fill();v.beginPath();v.arc(5,-15,5,0,Math.PI,true);v.fill();v.restore();g(l,v,3);f.save();f.beginPath();f.translate(0,26*6+5);f.drawImage(l,0,0);f.restore()};var Ma=function(){switch(V){case E:Text_renderLine("Loading...",80,0);break;case _:Text_renderLine("Press [Enter] to continue...",80,0);break;case P:Text_renderLine("Wake up Zurbo...",80,0);break;case D:Text_renderLine("I've been watching you",80,-60);Text_renderLine("and your world...",80,60);break;case j:Text_renderLine("In its darkest corners",80,-120);Text_renderLine("evil is online",80,0);Text_renderLine("Your powers will fade there...",80,120);break;case R:Text_renderLine("Meet me in the",80,-120);Text_renderLine("Throne of Mirrors",80,0);Text_renderLine("before it's too late...",80,120);break;case A:Text_renderLine("[WASD] - move around",80,-120);Text_renderLine("[Space] - jump and double jump",80,0);Text_renderLine("Mouse - Blaster Bow",80,120);break;case B:Text_renderLine("Zurbo, You have failed...",80,-120);Text_renderLine("We are now one...",80,0);Text_renderLine("Press [Enter] to continue...",80,120);break;case W:Text_renderLine("Zurbo, you have defeated",80,-180);Text_renderLine("your inner darkness",80,-60);Text_renderLine("Evil is... offline",80,60);Text_renderLine("Press [Enter] to play again...",80,180);break}};Text_renderLine=function(e,a,r){n.save();n.font=a+"px verdana";n.fillStyle="white";n.textBaseline="middle";n.textAlign="center";n.translate(w/2,x/2+r);n.fillText(e,0,0);n.restore()};var Ta;var Sa;var ka;var La;var Ia;var Ca;var Ea=500;var _a=0;var Pa=-835;var Da=6;var ja=7;var Ra=0;var Aa=false;var Ya=false;var Ba=false;var Wa=0;var Va=false;var Ha=0;var qa=1e3;var Ua=1200;var Xa=function(){Za()};var Oa=function(){Sa=-200;Ta=Ua;Ia=ja;Ca=1;La=0;ka=false};var Za=function(){document.addEventListener("mousedown",function(){if(V==Y&&Ia>0){if(ka){ya("laser-jam")}else{var e=O({x:T,y:S});var a=Ta;var r=Sa-52;var t=e.x+Ta-w/2;var n=e.y;ha(a,r,t,n,"blue",qa,"laser")}}});document.addEventListener("keydown",function(e){var a=e.which||e.keyCode;switch(a){case 65:Aa=true;if(Ia>0){_a=-1;Ca=-1}break;case 68:Ya=true;if(Ia>0){_a=1;Ca=1}break;case 32:if(!Ba){if(Ia>0&&Ra>0){La=Pa;Ra--;Ba=true;ya("jump")}}break}});document.addEventListener("keyup",function(e){var a=e.which||e.keyCode;switch(a){case 65:Aa=false;if(Ia>0&&!Aa&&!Ya){_a=0}break;case 32:case 32:Ba=false;break;case 68:Ya=false;if(Ia>0&&!Aa&&!Ya){_a=0}break}})};var za=function(){var e;var a;if(Ia===0){a=52+52;e=0}else if(Va){a=52;if(ar()){e=Math.round(Ha%3)+4}else{e=Math.round(Ha%3)}}else{a=0;if(ar()){e=Math.round(Ha%3)+4}else{e=Math.round(Ha%3)}}n.save();n.translate(w/2,Sa);n.scale(-1*Ca*4,4);n.translate(-16,-26);n.drawImage(i,e*32,a,32,26,0,0,32,26);n.restore();Fa();Va=false};var Fa=function(){var e;for(var a=0;a<Ia;a++){e=a*30+10;n.save();n.drawImage(i,0,26*6+5,20,20,e,10,20,20);n.restore()}};var Ga=function(){n.fillStyle="red";n.fillRect(-2,-2,4,4);n.fillRect(-2,-2-104,4,4)};var Na=function(e){$a(e);er(e);Ka();Ja()};var Ja=function(){var e=se(Ta,Sa-1,1)===5;if(ka!==e){ka=e;if(ka){ya("evil-online")}else{ya("evil-offline")}}};var Ka=function(){if(Ia>0&&Sa>x+500){Qa()}};var Qa=function(){Ia=0;_a=0;ya("player-die");setTimeout(function(){J(B)},3e3)};var $a=function(e){var a=Ta;var r=Sa;var t=false;if(_a!==0){Ta+=Ea*_a*e;if(ve(Ta,Sa-1)){if(_a==1){Ta=de(Ta);t=true}else{Ta=ue(Ta);t=true}}if(!t){if(ve(Ta,Sa-80)){if(_a==1){Ta=de(Ta);t=true}else{Ta=ue(Ta);t=true}}}}La+=C*e;if(La!==0){Sa+=La*e;if(Sa>r){if(ve(Ta,Sa)){Sa-=Sa%100;La=0;Ra=2}}else if(Sa<r){if(ve(Ta,Sa-100)){Sa+=100-(Sa-100)%100;La=0}}}};var er=function(e){Ha+=Da*e};var ar=function(){return!rr()&&(Aa||Ya)};var rr=function(){return Ra<2};var tr=function(){var e=(new Date).getTime()/1e3;if(Ia>0){if(e-Wa>He){Wa=e;Va=true;Ia--;ya("player-hit");if(Ia===0){Qa()}}}};function nr(){this.setSettings=function(e){for(var a=0;a<24;a++){this[String.fromCharCode(97+a)]=e[a]||0}if(this["c"]<.01){this["c"]=.01}var r=this["b"]+this["c"]+this["e"];if(r<.18){var t=.18/r;this["b"]*=t;this["c"]*=t;this["e"]*=t}}}function ir(){this._params=new nr;var z,F,G,N,J,K,Q,$,ee,ae,re,te;this.reset=function(){var e=this._params;N=100/(e["f"]*e["f"]+.001);J=100/(e["g"]*e["g"]+.001);K=1-e["h"]*e["h"]*e["h"]*.01;Q=-e["i"]*e["i"]*e["i"]*1e-6;if(!e["a"]){re=.5-e["n"]/2;te=-e["o"]*5e-5}$=1+e["l"]*e["l"]*(e["l"]>0?-.9:10);ee=0;ae=e["m"]==1?0:(1-e["m"])*(1-e["m"])*2e4+32};this.totalReset=function(){this.reset();var e=this._params;z=e["b"]*e["b"]*1e5;F=e["c"]*e["c"]*1e5;G=e["e"]*e["e"]*1e5+12;return((z+F+G)/3|0)*3};this.synthWave=function(e,a){var r=this._params;var t=r["s"]!=1||r["v"],n=r["v"]*r["v"]*.1,i=1+r["w"]*3e-4,o=r["s"]*r["s"]*r["s"]*.1,f=1+r["t"]*1e-4,l=r["s"]!=1,c=r["x"]*r["x"],s=r["g"],v=r["q"]||r["r"],d=r["r"]*r["r"]*r["r"]*.2,u=r["q"]*r["q"]*(r["q"]<0?-1020:1020),h=r["p"]?((1-r["p"])*(1-r["p"])*2e4|0)+32:0,p=r["d"],y=r["j"]/2,g=r["k"]*r["k"]*.01,m=r["a"];var b=z,w=1/z,x=1/F,M=1/G;var T=5/(1+r["u"]*r["u"]*20)*(.01+o);if(T>.8){T=.8}T=1-T;var S=false,k=0,L=0,I=0,C=0,E=0,_,P=0,D,j=0,R,A=0,Y,B=0,W,V,H=0;var q=new Array(1024),U=new Array(32);for(var X=q.length;X--;){q[X]=0}for(var X=U.length;X--;){U[X]=Math.random()*2-1}for(var X=0;X<a;X++){if(S){return X}if(h){if(++B>=h){B=0;this.reset()}}if(ae){if(++ee>=ae){ae=0;N*=$}}K+=Q;N*=K;if(N>J){N=J;if(s>0){S=true}}D=N;if(y>0){H+=g;D*=1+Math.sin(H)*y}D|=0;if(D<8){D=8}if(!m){re+=te;if(re<0){re=0}else if(re>.5){re=.5}}if(++L>b){L=0;switch(++k){case 1:b=F;break;case 2:b=G}}switch(k){case 0:I=L*w;break;case 1:I=1+(1-L*x)*2*p;break;case 2:I=1-L*M;break;case 3:I=0;S=true}if(v){u+=d;R=u|0;if(R<0){R=-R}else if(R>1023){R=1023}}if(t&&i){n*=i;if(n<1e-5){n=1e-5}else if(n>.1){n=.1}}V=0;for(var O=8;O--;){j++;if(j>=D){j%=D;if(m==3){for(var Z=U.length;Z--;){U[Z]=Math.random()*2-1}}}switch(m){case 0:W=j/D<re?.5:-.5;break;case 1:W=1-j/D*2;break;case 2:Y=j/D;Y=(Y>.5?Y-1:Y)*6.28318531;W=1.27323954*Y+.405284735*Y*Y*(Y<0?1:-1);W=.225*((W<0?-1:1)*W*W-W)+W;break;case 3:W=U[Math.abs(j*32/D|0)]}if(t){_=P;o*=f;if(o<0){o=0}else if(o>.1){o=.1}if(l){E+=(W-P)*o;E*=T}else{P=W;E=0}P+=E;C+=P-_;C*=1-n;W=C}if(v){q[A%1024]=W;W+=q[(A-R+1024)%1024];A++}V+=W}V*=.125*I*c;e[X]=V>=1?32767:V<=-1?-32768:V*32767|0}return a}}var or=new ir;window["jsfxr"]=function(e){or._params.setSettings(e);var a=or.totalReset();var r=new Uint8Array(((a+1)/2|0)*4+44);var t=or.synthWave(new Uint16Array(r.buffer,44),a)*2;var n=new Uint32Array(r.buffer,0,44);n[0]=1179011410;n[1]=t+36;n[2]=1163280727;n[3]=544501094;n[4]=16;n[5]=65537;n[6]=44100;n[7]=88200;n[8]=1048578;n[9]=1635017060;n[10]=t;t+=44;var i=0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="data:audio/wav;base64,";for(;i<t;i+=3){var l=r[i]<<16|r[i+1]<<8|r[i+2];f+=o[l>>18]+o[l>>12&63]+o[l>>6&63]+o[l&63]}return f};function fr(){this.sounds={}}fr.prototype.add=function(n,i,e){this.sounds[n]=[];e.forEach(function(e,a){this.sounds[n].push({tick:0,count:i,pool:[]});for(var r=0;r<i;r++){var t=new Audio;t.src=jsfxr(e);this.sounds[n][a].pool.push(t)}},this)};fr.prototype.play=function(e,a){var r=this.sounds[e];var t=r.length>1?r[Math.floor(Math.random()*r.length)]:r[0];t.pool[t.tick].volume=a||1;t.pool[t.tick].play();t.tick<t.count-1?t.tick++:t.tick=0};"use strict";var lr=function(){var U=function(e){return Math.sin(e*6.283184)};var e=function(e){return 2*(e%1)-1};var a=function(e){return e%1<.5?1:-1};var r=function(e){var a=e%1*4;if(a<2)return a-1;return 3-a};var L=function(e){return.003959503758*Math.pow(2,(e-128)/12)};var X=function(e,a,r){var t=O[e.i[0]],n=e.i[1],i=e.i[3],o=O[e.i[4]],f=e.i[5],l=e.i[8],c=e.i[9],s=e.i[10]*e.i[10]*4,v=e.i[11]*e.i[11]*4,d=e.i[12]*e.i[12]*4,u=1/d,h=e.i[13],p=r*Math.pow(2,2-e.i[14]);var y=new Int32Array(s+v+d);var g=0,m=0;var b,w,x,M,T,S,k;for(b=0,w=0;b<s+v+d;b++,w++){if(w>=0){h=h>>8|(h&255)<<4;w-=p;S=L(a+(h&15)+e.i[2]-128);k=L(a+(h&15)+e.i[6]-128)*(1+8e-4*e.i[7])}x=1;if(b<s){x=b/s}else if(b>=s+v){x-=(b-s-v)*u}M=S;if(i){M*=x*x}g+=M;T=t(g)*n;M=k;if(l){M*=x*x}m+=M;T+=o(m)*f;if(c){T+=(2*Math.random()-1)*c}y[b]=80*T*x|0}return y};var O=[U,a,e,r];var Z,z,F,G,N;this.init=function(e){Z=e;z=e.endPattern;F=0;G=e.rowLen*e.patternLen*(z+1)*2;N=new Int32Array(G)};this.generate=function(){var e,a,r,t,n,i,o,f,l,c,s,v,d,u,h,p,y;var g=new Int32Array(G),m=Z.songData[F],b=Z.rowLen,w=Z.patternLen;var x=0,M=0,T;var S,k=false;var L=[];for(t=0;t<=z;++t){f=m.p[t];for(n=0;n<w;++n){var I=f?m.c[f-1].f[n]:0;if(I){m.i[I-1]=m.c[f-1].f[n+w]||0;if(I<16){L=[]}}var C=O[m.i[15]],E=m.i[16]/512,_=Math.pow(2,m.i[17]-9)/b,P=m.i[18],D=m.i[19],j=m.i[20]*43.23529*3.141592/44100,R=1-m.i[21]/255,A=m.i[22]*1e-5,Y=m.i[23]/32,B=m.i[24]/512,W=6.283184*Math.pow(2,m.i[25]-9)/b,V=m.i[26]/255,H=m.i[27]*b&~1;h=(t*w+n)*b;for(i=0;i<4;++i){o=f?m.c[f-1].n[n+i*w]:0;if(o){if(!L[o]){L[o]=X(m,o,b)}var q=L[o];for(a=0,e=h*2;a<q.length;a++,e+=2){g[e]+=q[a]}}}for(a=0;a<b;a++){l=(h+a)*2;u=g[l];if(u||k){p=j;if(P){p*=C(_*l)*E+.5}p=1.5*Math.sin(p);x+=p*M;T=R*(u-M)-x;M+=p*T;u=D==3?M:D==1?T:x;if(A){u*=A;u=u<1?u>-1?U(u*.25):-1:1;u/=A}u*=Y;k=u*u>1e-5;c=Math.sin(W*l)*B+.5;S=u*(1-c);u*=c}else{S=0}if(l>=H){S+=g[l-H+1]*V;u+=g[l-H]*V}g[l]=S|0;g[l+1]=u|0;N[l]+=S|0;N[l+1]+=u|0}}}F++;return F/Z.numChannels};this.createWave=function(){var e=44;var a=e+G*2-8;var r=a-36;var t=new Uint8Array(e+G*2);t.set([82,73,70,70,a&255,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,r&255,r>>8&255,r>>16&255,r>>24&255]);for(var n=0,i=e;n<G;++n){var o=N[n];o=o<-32767?-32767:o>32767?32767:o;t[i++]=o&255;t[i++]=o>>8&255}return t};this.getData=function(e,a){var r=2*Math.floor(e*44100);var t=new Array(a);for(var n=0;n<2*a;n+=1){var i=r+n;t[n]=e>0&&i<N.length?N[i]/32768:0}return t}};$.init()})();</script></body></html>