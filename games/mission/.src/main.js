(function(){function G(){A.style.display="none"}function q(a){A.style.display="block";A.scrollTop=0;L.innerHTML=a}function s(a,b){return Math.floor(Math.random()*(b-a+1))+a}function H(a){for(var b=a.length-1;0<b;b--){var e=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[e];a[e]=d}}function S(){var a=document.createElement("canvas");a.width=f;a.height=h;for(var b=a.getContext("2d"),e=0;e<f*h/100;e++)b.beginPath(),b.arc(Math.random()*f,Math.random()*h,.5*Math.random()+.25,0,2*Math.PI),b.fillStyle=p([210,
280,100,100,70,100,30,60]),b.fill();for(e=0;e<f*h/500;e++)b.beginPath(),b.arc(Math.random()*f,Math.random()*h,.5*Math.random()+.5,0,2*Math.PI),b.fillStyle="rgba(122,122,255,"+(.25*Math.random()+.7)+")",b.fillStyle=p([210,280,100,100,90,100,50,90]),b.fill();return a}function z(a){a+="";for(var b=0,e="",d=a.length-1;0<=d;d--)b++,e=a[d]+e,0==b%3&&0<d&&(e=","+e);return e}function I(){d.clearRect(0,0,f,h);d.drawImage(B,0,0);r=[];for(var a=0;3>a;a++){var b=s(0,3),e=s(1,3),n=(b+5)/8*maxRadius,g=s(0,3),q=
maxRadius/3,m=(g+1)/4*q,t=M({a:2*m,j:"rgba(255,200,200,1)",n:"rgba(150,0,0,1)",d:"rgba(255,255,255,1)",b:"rgba(255,255,25,1)",f:!1,g:3}),l=Math.random();if(.6<l)var l=[0,360,30,100,0,100],k=[0,360,30,100,30,100];else.3<l?(l=[0,360,70,100,0,100],k=[0,360,70,100,30,100]):.05<l?(k=360*Math.random(),l=[k,k+25,0,100,0,100],k=[k,k+20,0,100,30,100]):(l=[0,360,0,20,0,100],k=[0,360,0,20,30,100]);l={a:2*n,j:p(l),n:p(l),d:p(l),b:p(k),i:p(l),f:!0,g:e};waterValue=.8<Math.random()?2:1;2==waterValue&&(k=[205,240,
85,95,40,60],l.b=p(k),l.i=p(k),l.j=p(k));for(var l=M(l),k="",v=0;4>v;v++)if(.5<Math.random()||1>=v)k+="BCDFGHJKLMNPQRSTVWXYZ"[s(0,20)],k+="AEIOUY"[s(0,5)],.6666<Math.random()&&(k=.5<Math.random()?k+"BCDFGHJKLMNPQRSTVWXYZ"[s(0,20)]:k+"AEIOUY"[s(0,5)]);else break;for(var k=k+"-",k=.666<Math.random()?k+"BCDFGHJKLMNPQRSTVWXYZ"[s(0,20)]:k+Math.floor(1E3*Math.random()),u=n*(2.06+.08*e),b=[b,g,waterValue,e],e=1,v=0;v<b.length;v++)3==b[v]?e*=.9:1==b[v]?e*=.8:0==b[v]&&(e*=.5);g=!1;Math.random()<=e&&(g=!0);
r.push({p:l,q:u,elements:b,name:k,o:e,l:g,m:!1});b=f/2-u/2;e=2*maxRadius*a+margin*(a+.5)-.15*n+(maxRadius-n);d.drawImage(t,0,0,Math.floor(4.8*m),Math.floor(4.8*m),b-(maxRadius-n)+(q-m),e+N,2.4*m,2.4*m);d.drawImage(l,0,0,Math.floor(4.8*n),Math.floor(4.8*n),b,e,2.4*n,2.4*n)}D()}function p(a){if(a)var b=Math.random()*(a[1]-a[0])+a[0],e=Math.random()*(a[3]-a[2])+a[2],d=Math.random()*(a[5]-a[4])+a[4];else b=360*Math.random(),e=40*Math.random()+60,d=80*Math.random()+15;return"hsla("+b+","+e+"%,"+d+"%,"+
(8==a.length?(Math.random()*(a[7]-a[6])+a[6])/100:1)+")"}function M(a){var b=document.createElement("canvas");b.width=2.4*a.a;b.height=2.4*a.a;var e=b.getContext("2d"),d=1.03+.04*a.g,f=.97-.05*a.g;J({e:e,k:a.a,c:a.a*d,h:a.b.substr(0,a.b.length-2)+(.2*a.g+.4)+")",d:a.b.substr(0,a.b.length-2)+"0)"});d=a.a*d-a.a;e.translate(d,d);e.beginPath();e.arc(a.a,a.a,a.a,0,2*Math.PI);e.closePath();e.clip();J({e:e,k:0,c:a.a,h:a.n,d:a.j});for(var d=1500+2500*Math.random(),h=(.25*Math.random()+.25)*d,g=0;g<d;g++){e.globalAlpha=
.1*Math.random();var m=Math.random()*a.a*2,l=Math.random()*a.a*2;e.beginPath();e.arc(m,l,a.a/5*Math.random(),0,2*Math.PI);e.closePath();e.fillStyle=g>h?a.b:a.d;a.i&&3500<d&&.5<Math.random()&&(e.globalAlpha*=.5,e.fillStyle=a.i);e.fill()}e.globalAlpha=1;a.f&&(e.rect(0,0,2*a.a,2*a.a),d=e.createRadialGradient(.5*a.a,.75*a.a,.3*a.a,.5*a.a,.75*a.a,a.a*(1.1+.4*Math.random())),d.addColorStop(0,"rgba(0,0,0,0)"),d.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=d,e.fill(),J({e:e,k:a.a*f,c:a.a,h:a.b.substr(0,a.b.length-
2)+"0)",d:a.b}));return b}function T(){var a=document.createElement("canvas");a.width=20;a.height=20;var b=a.getContext("2d");b.fillStyle="white";b.beginPath();b.moveTo(0,8);b.lineTo(20,8);b.lineTo(4,20);b.lineTo(10,0);b.lineTo(16,20);b.fill();return a}function U(){var a=document.createElement("canvas");a.width=20;a.height=20;var b=a.getContext("2d");b.fillStyle="white";for(var d=0;3>d;d++)b.fillRect(20*d/3,0,20/6,20);return a}function V(){var a=document.createElement("canvas");a.width=20;a.height=
20;var b=a.getContext("2d");b.fillStyle="#777";b.beginPath();b.arc(10,5,5,0,2*Math.PI);b.fill();b.beginPath();b.arc(10,20,10,Math.PI,2*Math.PI);b.fill();b.fillStyle="white";b.fillRect(10,4/6*20,10,20/6);b.fillRect(4/6*20,10,20/6,10);return a}function W(){var a=document.createElement("canvas");a.width=40;a.height=40;var b=a.getContext("2d");b.fillStyle="white";b.beginPath();b.arc(10,5,5,0,2*Math.PI);b.fill();b.beginPath();b.arc(10,20,10,Math.PI,2*Math.PI);b.fill();return a}function J(a){a.e.rect(0,
0,2*a.c,2*a.c);var b=a.e.createRadialGradient(a.c*(a.f?.75:1),a.c*(a.f?.75:1),a.k,a.c*(a.f?.75:1),a.c*(a.f?.75:1),a.c);b.addColorStop(0,a.h);b.addColorStop(1,a.d);a.e.fillStyle=b;a.e.fill()}function D(){if(4==g){var a=O;d.clearRect(0,0,f,h);d.drawImage(B,0,0);d.drawImage(r[a].p,f/2-r[a].q,350);d.fillStyle="white";var b=24;for(d.font="bold 20px Helvetica, Arial";d.measureText(r[a].name).width<f-30&&120>b;)b++,d.font="bold "+b+"px Helvetica, Arial";d.textBaseline="bottom";d.textAlign="center";d.fillText(r[a].name,
f/2,355);d.textAlign="left";d.textBaseline="top";for(var b="<h3>Welcome to "+r[a].name+"</h3>",e=["earth","fire","water","air"],n=0;4>n;n++){for(var p=r[a].elements[n];0<=p;p--)b+='<div class="'+e[n]+'"></div>';b+="<br>"}b+="<h3>Estimated habitability: "+Math.floor(1E4*r[a].o)/100+"%</h3>";r[a].l?(b+=r[a].name+" harbors life!",e="insect humanoid reptile crow squid cow spider bear worm duck fungus coyote goat".split(" "),n="arms legs eyes tentacles antennae wings horns tails fins claws spikes".split(" "),
p="emojis;clicks;beeps and boops;awkward silences;brow furrowing;whistling;secret handshakes;clapping;winks;high fives;telepathy;song;poetry".split(";"),H(e),H(n),H(p),b+=" The dominant species is some sort of "+e[0]+"/"+e[1]+" with "+s(2,12)+" "+n[0]+" that appears to communicate solely through "+p[0]+".",.666<Math.random()&&(m++,b+="<br><br>You found some fuel deposits. Without the technology to mine it, the locals surely won't mind. ")):(b+="Sorry. There are no intelligent life-forms here.",.666<
Math.random()&&(m++,b+="<br><br>At least you found some fuel deposits."));r[a].m||(r[a].m=!0,q(b))}d.fillStyle="white";d.font="16px Courier";d.textBaseline="top";d.textAlign="left";d.drawImage(U(),f/20,h-100);d.fillText(m,f/20+30,h-100);d.drawImage(T(),f/20,h-75);d.fillText(z(t),f/20+30,h-75);d.drawImage(W(),f/20,h-50);d.fillText(z(u),f/20+30,h-50);d.drawImage(V(),f/20,h-25);d.fillText(z(E)+" ("+w+")",f/20+30,h-25);buttonContainer.innerHTML="";4==g?(P&&(100>C&&(buttonContainer.innerHTML+='<div class="button">PREACH</div>',
buttonContainer.innerHTML+='<div class="button">THREATEN</div>',buttonContainer.innerHTML+='<div class="button">GIFT (fuel)</div>'),0<m&&(buttonContainer.innerHTML+='<div class="button">TRADE (fuel for crew)</div>')),buttonContainer.innerHTML+='<div class="button">LEAVE</div>'):3==g&&(buttonContainer.innerHTML+='<div class="button corner-button">...</div>')}function K(){5!=g&&(0>=m&&3==g&&(q("<h3>Mission failed</h3>You have ran out of fuel.<br><br>Followers: <strong>"+z(u)+"</strong>"),g=5),0>=t&&
(q("<h3>Mission failed</h3>Your entire crew was killed in battle.<br><br>Followers: <strong>"+z(u)+"</strong>"),D(),g=5),0>w&&(q("<h3>Mission failed</h3>You failed to meet a quota.<br><br>Followers: <strong>"+z(u)+"</strong>"),D(),g=5))}function Q(){d.clearRect(0,0,f,h);d.drawImage(B,0,0);var a=20;d.fillStyle="white";for(d.font="bold 20px Helvetica, Arial";d.measureText("MISSION").width<f-20&&150>a;)a++,d.font="bold "+a+"px Helvetica, Arial";d.textBaseline="middle";d.textAlign="center";d.fillText("MISSION",
f/2,h/2)}var f,h,R,d,N,r=[],B,A,L,g=0,C,P,m,t,u,O,F;window.onload=function(){f=window.innerWidth;h=window.innerHeight;margin=20;maxRadius=((h-50)/3-margin)/2;N=.15*maxRadius;R=document.querySelector("#c");d=R.getContext("2d");c.width=f;c.height=h;c.style.width=f+"px";c.style.height=h+"px";buttonContainer=document.querySelector("#button-container");buttonContainer.style.width=f;buttonContainer.addEventListener("click",function(a){var b=a.srcElement||a.target;if("button-container"!=b.id){b=b.innerHTML;
a.preventDefault();a.stopPropagation();if("..."==b)w--,F++,K(),I();else if("LEAVE"==b)g=3,w--,F++,K(),I();else if("THREATEN"==b).5<Math.random()?(a=Math.min(t,s(50,200+20*F)),t-=a,q("These aliens are more advanced than you expected and they don't take kindly to threats. During the counterattack, you lose "+a+" crew members.")):(C--,q("A little spin of your dark matter cannon has set these aliens straight. Their civilization is mesmerized by your God's fearsome power."));else if("PREACH"==b)if(0>=
C){a=Math.floor(3E9*Math.random());u+=a;for(followerText="The denizens of this planet are receptive to your divine claims. You gain "+z(a)+" new followers.";u>=E;)a=Math.max(1,Math.min(4,w)),m+=a,followerText+="<h3>Congratulations!</h3>You've reached the quota, so you have been awarded "+a+" fuel and 100 new crew members.",t+=100,a=s(1,4),E+=1E9*a,w+=a+Math.floor(Math.max(0,4-.08*F));q(followerText);C=100}else q("The lifeforms on this planet give you odd looks. No one is swayed by your proselytizing.");
else"TRADE (fuel for crew)"==b?(q("You've traded 1 fuel for 100 crew new members."),m--,t+=100):"GIFT (fuel)"==b&&(.333<Math.random()&&C--,m--,q("Your generous gift of fuel has demonstrated the blessings of your God.<br><br>However, gifts are never a surefire method of influence. You'll have to wait and see."));K();D()}},!1);A=document.querySelector("#text-container");L=document.querySelector("#text-inner");A.style.width=f-20;A.style.height=h-120;html=document.querySelector("html");html.style.width=
f+"px";html.style.height=h+"px";document.querySelector("body").addEventListener("click",function(a){x=a.clientX;a=y=a.clientY;0==g?(g++,d.clearRect(0,0,f,h),d.drawImage(B,0,0),q("You are Reverend Captain Lore Whitaker. You're a missionary, flying deep into the galactic backwaters.<br><br>There's billions and billions of stars in the galaxy. And way out in prefecture 461, there's billions of billions of souls still waiting for the good news. But if you're going to save souls, first you've got to find them.<br><br>For centuries, successful missions have been founded on one simple concept: that the four elements describe both our terrestial lives and our spiritual lives. Easy to remember. Easy to spread to alien civilizations. We call it the worldless book: <h3><div class='earth'></div> EARTH</h3>Earth represents the sin we are instilled with by being worldly creatures.<h3><div class='fire'></div> FIRE</h3>Fire represents a choice between hellfire (continuing in sin) and the blood of the savior. <h3><div class='water'></div> WATER</h3> Water represents baptism and forgiveness of sins.<h3><div class='air'></div> AIR</h3> Air represents heaven, purity, and freedom from sin.")):
1==g?(g++,d.clearRect(0,0,f,h),d.drawImage(B,0,0),q("This is what we teach, but we also use it as a rule of thumb for finding habitable planets:<h3><div class='earth'></div> EARTH</h3>The size/mass of a planet.<h3><div class='fire'></div> FIRE</h3>Heat, the distance from a planet's star. <h3><div class='water'></div> WATER</h3> Liquid water.<h3><div class='air'></div> AIR</h3> A planet's atmosphere.<h3>Planet Hunting</h3>Try to pick planets that might be habitable. If you don't like your current selection, you can hit the '...' button to search for more planets. This takes a turn, but doesn't waste fuel.<h3>Ratings</h3>When you visit a planet, you'll see a rating of 1-4 for each element. Three is ideal. All elements can be estimated from a <u>visual inspection</u>, so try to learn the relationship between the look of the planet and the ratings! <h3>Quotas</h3>Upcoming follower quotas are noted at the bottom of your screen along with how many turns you have to meet them. Meet a quota early and you'll be rewarded with fuel and crew. Failing a quota means failing the mission.<br><br>Godspeed!")):
2==g?(g++,E=2E9,w=5,m=6,t=1E3,F=u=0,I(),G()):3==g?(planet=Math.floor(a/((h-50)/3)),3>planet&&(O=planet,g++,C=s(0,1),P=r[planet].l,m--,D())):4==g?G():5==g&&(G(),g=0,Q())},!1);B=S();Q()};var E,w})();
