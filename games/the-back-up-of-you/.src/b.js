'use strict';const aa=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];function e(a,b){return!0===a.F.get(b)?(a.a.set(b,!0),!1):!0===a.a.get(b)?(a.a.delete(b),!0):!1}class ba{constructor(){this.F=new Map;this.a=new Map}start(){document.addEventListener("keydown",this.b.bind(this,!0));document.addEventListener("keyup",this.b.bind(this,!1))}b(a,b){const c=b.key||b.keyCode;aa.includes(c)&&(this.F.set(c,a),b.preventDefault())}};function k(a,b){a.a.set(b,void 0)}class r{constructor(){this.a=new Map}};function u(a){return[...Array(a).keys()]}function w(a){return~~(Math.random()*a)}function ca(a,b){const c=u(a);return u(b).map(()=>{const [d]=c.splice(w(c.length),1);return d})}function y(a,b){const c=a[0],d=b(c);return a.slice(1).reduce(([f,g],h)=>{const l=b(h);return l<g?[h,l]:[f,g]},[c,d])}function da(a){return a.reduce((b,c)=>b+c,0)};function ea(a){const b=new z;for(const c of a)A(b,c);return b}function A(a,b){a[0]+=b[0];a[1]+=b[1]}function B(a,b){return new z(a[0]*b,a[1]*b)}function C(a,b){a[0]*=b;a[1]*=b}function fa(a){var b=new z(.995,1);a[0]*=b[0];a[1]*=b[1]}
class z extends Float32Array{constructor(a=0,b=0){super(2);this[0]=a;this[1]=b}get x(){return this[0]}get y(){return this[1]}set x(a){this[0]=a}set y(a){this[1]=a}add(a){return new z(this[0]+a[0],this[1]+a[1])}trim(a){const b=Math.sqrt(this[0]*this[0]+this[1]*this[1]);b>a&&C(this,a/b)}clone(){return new z(this[0],this[1])}};const D=1/60,E=32/D,ha=new z(0,-64),ia=new z(0,384),F=new z(-256,0),ja=B(F,-1),G=new z(128,288),ka=[64];class H{constructor(a,b,c){this.H=a;this.left=b;this.right=c}}const I=[new H(!1,!1,!1),new H(!0,!1,!1),new H(!1,!0,!1),new H(!1,!1,!0),new H(!0,!0,!1),new H(!0,!1,!0)];function J(a,b){b*=a.h;return a.buffer.slice(b,b+a.h)}class K{constructor(a,b,c=null){this.rows=a;this.h=b;c?this.buffer=c:this.buffer=new Float32Array(a*b)}set(a){let b=0;for(const c of a)for(const d of c)this.buffer[b++]=d}}function la(a,b){return new K(a.rows,a.h,a.buffer.map((c,d)=>c+b[d%a.h]))}function ma(a){return new K(a.rows,a.h,a.buffer.map(b=>1/(1+Math.exp(-b))))}function na(a){a=a.map(c=>Math.exp(c));const b=a.reduce((c,d)=>c+d,0);return a.map(c=>c/b)}
function oa(a){const b=new K(a.rows,a.h);u(a.rows).forEach(c=>{const d=na(J(a,c));b.buffer.set(d,c*b.h)});return b}function pa(a){let b,c;for(const [d,f]of a.entries())if(void 0===b||f>c)b=d,c=f;return b};class qa{}class ra extends qa{constructor(a){super();this.width=a}K(){return this.width}L(a){return a*this.width+this.width}R(a,b){this.b=new K(a,this.width,b.subarray(0,a*this.width));this.a=new Float32Array(this.width)}w(a){{var b=this.b;const c=new K(a.rows,b.h);for(let d=0;d<a.rows;d++)for(let f=0;f<b.h;f++){let g=0;for(let h=0;h<a.h;h++)g+=a.buffer[d*a.h+h]*b.buffer[h*b.h+f];c.buffer[d*c.h+f]=g}a=c}return la(a,this.a)}}class sa extends qa{K(a){return a}L(){return 0}R(){}}
class ta extends sa{w(a){return ma(a)}}class ua extends sa{w(a){return oa(a)}}class va{constructor(a,b,c=null){this.a=b;{let d=a,f=0;for(const g of b)f+=g.L(d),d=g.K(d);b=f}if(null===c){c=this.I=new Float32Array(b);for(let d=0,f=c.length;d<f;d++)c[d]=2*Math.random()-1}else this.I=c;c=0;for(const d of this.a)b=d.L(a),d.R(a,this.I.subarray(c,c+b)),c+=b,a=d.K(a)}w(a){return this.a.reduce((b,c)=>c.w(b),a)}};function wa(a=null){var b=[];for(const c of ka)b.push(new ra(c)),b.push(new ta);b.push(new ra(I.length));b.push(new ua);return new va(138,b,a)};const {localStorage:xa}=window;function ya(){var a=xa.getItem("bckp_of_yo");if(null===a)return[void 0,0];const {generation:b,weights:c}=JSON.parse(a);a=Float32Array.from(c);return[wa(a),b]};class za{constructor(){this.a=new r;this.b=new r;this.V=new Worker("w.js");this.V.addEventListener("message",this.c.bind(this))}c(a){a=a.data;console.log(`Got ${a.type} message from worker`);if(0===a.type){var b=this.a;a=[a.step,a.totalSteps];for(var c of b.a.keys())c(a)}else{{const d=wa(a.weights);c=JSON.stringify({generation:a.generation,weights:Array.from(d.I)});xa.setItem("bckp_of_yo",c);c=this.b;a=[d,a.generation];for(b of c.a.keys())b(a)}}}};const Aa=Uint8ClampedArray.from([109,164,26,255]),Ba=Uint8ClampedArray.from([192,232,236,255]);
async function Ca(a,b,c,d,f,g,h){function l(v,x){n.set(d,4*(1024*(576-v-1)+x))}const p=new ImageData(1024,576),n=p.data;for(var m=0;1024>m;m++)for(var q=0;576>q;q++)(Math.sin(m/1024*2*Math.PI*a)/2+.5)*b+c>q&&l(q,m);f=ca(1024-2*h,f).map(v=>v+h);for(const v of f){f=~~((Math.sin(v/1024*2*Math.PI*a)/2+.5)*b+c);m=~~(h/2);for(q=-g;q<g;q++)for(var t=-m;t<m;t++)l(f+q,v+t);q=m*m;for(t=0;t<m;t++)for(let x=-m;x<m;x++)t*t+x*x<q&&l(f+g+t,v+x)}return createImageBitmap(p)}
async function Da(){return Ca(3,100,200,Aa,5,50,28)}async function Ea(){return Ca(4,50,400,Ba,3,26,16)};function Fa(){return new Promise((a,b)=>{const c=new Image;c.addEventListener("load",()=>a(c));c.addEventListener("error",b);c.src="t.png"})};async function Ga(){var a=document.querySelector("canvas");const b=new za,c=new ba,d=await Da(),f=await Ea(),g=await Fa();a.width=1024;a.height=576;const h=a.getContext("2d");c.start();const [l,p]=ya(),n={canvas:a,s:h,Y:b,o:c,W:d,backgroundImage:f,S:g,u:l,G:p,step:0,O:0};k(b.a,([m,q])=>{n.step=m;n.O=q});k(b.b,([m,q])=>{n.step=n.O;n.u=m;n.G=q});return n};function L(a){a.a.s.clearRect(0,0,1024,576)}function Ha(a,b,c,d,f,g="left",h="white"){({s:a}=a.a);a.font=`${c}px monospace`;a.textAlign=g;a.fillStyle="black";c=[-1,0,1];for(const l of c)for(const p of c)a.fillText(b,d-l,f-p);a.fillStyle=h;a.fillText(b,d,f)}
function M(a,b,c,d,f,g="center"){const {s:h}=a.a;h.font=`${c}px monospace`;const l=b.map(([m])=>h.measureText(m).width),p=da(l);let n;"left"===g?n=d:n="center"===g?d-p/2:d-p;for(const [m,[q,t]]of b.entries())"transparent"!==t&&Ha(a,q,c,n,f,"left",t),n+=l[m]}function Ia(a,b,c,d,f,g="center"){for(const [h,l]of b.entries())M(a,l,c,f,(h+1)*(c+d)-d,g)}class Ja{constructor(a){this.l=0;this.a=a}loop(){try{return this.update()}finally{this.l++}}};function N(a,b){const {s:c,backgroundImage:d,W:f}=a.a;a=~~(-1/3*b%1024);b=~~(-1/12*b%1024);c.drawImage(d,b,0);c.drawImage(d,b+1024,0);c.drawImage(f,a,0);c.drawImage(f,a+1024,0)}class Ka extends Ja{};function O(a){return[a,"white"]}function P(a){return[a,"red"]}function Q(a){return[a,"orange"]}function La(a){return[a,"gray"]}function Ma(a){return[a,"transparent"]}function R(a,b){const c=~~(a%60);return[b(String(~~(a/60)).padStart(2,"0")),O("m:"),b(String(c).padStart(2,"0")),O("s")]};function S(a){return a.c.findIndex(([,b])=>b)}function Na(a,b,c){for(const [f,[g,h]]of a.c.entries()){var d=f===a.b;const l=c+f*(b+10);d=[(d?P:h?O:La)(g),(d?Q:Ma)(" \u279c")];M(a,d,b,512,l)}}function Oa(a,b,c){M(a,[O("USE "),Q("ARROW UP "),O("AND "),Q("ARROW DOWN "),O("TO CHANGE OPTION.")],b,512,c);M(a,[O("USE "),Q("ARROW RIGHT "),O("TO SELECT.")],b,512,c+b+10)}
class Pa extends Ka{constructor(a){super(a);this.c=this.m();this.b=S(this)}update(){var {a:{o:a}}=this;if(e(a,"ArrowRight"))return[,,a]=this.c[this.b],a();if(e(a,"ArrowUp")){do this.b--,0>this.b&&(this.b=this.c.length-1),[,a]=this.c[this.b];while(!a)}else if(e(a,"ArrowDown")){do this.b=(this.b+1)%this.c.length,[,a]=this.c[this.b];while(!a)}}};class Qa extends Pa{m(){return[["CONTINUE",void 0!==this.a.u,this.f.bind(this)],["NEW GAME",!0,this.i.bind(this)],["CREDITS",!0,this.g.bind(this)]]}f(){return 8}i(){return 2}g(){return 1}update(){const a=super.update();{const b=10*Math.sin(2*Math.PI*this.l/120);L(this);N(this,10*this.l);M(this,[O("THE "),P("BACK"),O("-UP OF "),P("YOU")],64,512,138+b);M(this,[O("by "),Q("kurazu")],32,512,b+188);Na(this,32,338);Oa(this,~~(64/3),506)}return a}};class T extends Pa{constructor(a){super(a);this.i=0;this.D=this.f()}m(){const a=this.i||0;return[["NEXT",a!==this.f().length-1,this.B.bind(this)],["DONE",!0,this.g.bind(this)],["PREVIOUS",0!==a,this.C.bind(this)]]}B(){this.i++;this.c=this.m();this.b=S(this)}C(){this.i--;this.c=this.m();this.b=S(this)}update(){const a=super.update();L(this);N(this,10*this.l);Ia(this,this.D[this.i],32,10,512);Na(this,16,426);Oa(this,16,526);return a}};const Ra=[[O("So "),Q("ROOKIE "),O("...")],[O("You want to work for the")],[Q("METRO PACKAGE SERVICE"),O("?")]],Sa=[[Q("Before "),O("you can get this job,")],[O("you need to "),Q("prove "),O("your "),Q("efficiency ")],[O("with one of our "),Q("hoverloaders"),O(".")]],Ta=[[O("Finish a delivery round under "),...R(80,Q),O("!")]];class Ua extends T{f(){return[Ra,Sa,Ta]}g(){return 3}};class Va{constructor(a,b){this.position=a;this.size=b}get i(){return B(this.size,.5)}get A(){return this.i.x}get b(){return this.i.y}get left(){return this.position.x-this.A}set left(a){this.position.x=a+this.A}get right(){return this.position.x+this.A}set right(a){this.position.x=a-this.A}get top(){return this.position.y+this.b}set top(a){this.position.y=a-this.b}get bottom(){return this.position.y-this.b}set bottom(a){this.position.y=a+this.b}};const Wa=new z(32,32);class Xa extends Va{constructor(a,b){super(a,Wa);this.X=b}};class Ya{constructor(a,b){this.a=new z(Math.cos(a)*b,Math.sin(a)*b)}getCurrentPosition(a){return a.position.add(this.a)}}function Za(){const a=2*Math.PI/20,b=u(20).map(d=>d*a),c=u(15).map(d=>32*(d+1));return b.map(d=>c.map(f=>new Ya(d,f)))};function*$a(){for(const a of u(18))yield[0,a,0];for(const a of u(19))yield[a+1,0,1],yield[a+1,17,2]}function*ab(a){const b=w(8)+3,c=w(2)+1;for(var d=1;d<b;d++)yield[a,17-d,3];yield[a,17-b,8];for(d=1;d<=c;d++)yield[a+d,17-b,d===c?9:8],yield[a-d,17-b,d===c?7:8]}function*bb(a){const b=w(8)+3,c=w(2)+1;for(var d=1;d<b;d++)yield[a,d,3];yield[a,b,5];for(d=1;d<=c;d++)yield[a+d,b,d===c?6:5],yield[a-d,b,d===c?4:5]}
function*cb(a){const b=w(3)+1,c=w(12)+3;1===b?yield[a,c,1]:2===b?(yield[a,c,2],yield[a+1,c,2],yield[a,c+1,1],yield[a+1,c+1,1]):(yield[a,c,0],yield[a-1,c,1],yield[a+1,c,1],yield[a,c-1,2],yield[a,c+1,1])}function*db(a){let b=20;for(;b<a-10;){const c=Math.random();.4>c?yield*ab(b):.8>c?yield*bb(b):yield*cb(b);b+=w(8)+8}for(const c of u(a-20-10))yield[c+20,0,1],yield[c+20,17,2]}function*eb(a){for(const b of u(10))yield[a-10+b,0,1],yield[a-10+b,17,2]}function*fb(a){yield*$a();yield*db(a);yield*eb(a)};function U(a,b){a=Object.create(a);a.position=b;return a}const gb=new Map;function hb(a,b,c){const d=[];b=~~(b/32)-1;for(c=~~(c/32)+1;b<c;b++){const f=a.b.get(b)||gb;for(const g of f.values())d.push(g)}return d}function ib(a,b){return a.f.map(c=>c.findIndex(d=>{var f=d.getCurrentPosition(b);d=~~(f.y/32);d=(f=a.b.get(~~(f.x/32)))?f.get(d):void 0;return d})).map(c=>-1===c?null:c)}
function V(a,b,c=hb(a,b.left,b.right)){return c.filter(d=>d.left<b.right&&d.right>b.left&&d.bottom<b.top&&d.top>b.bottom)}
function jb(a,b){var c=ib(a,b);const {H:d,left:f,right:g}=b.v(c);c=[ha];d&&c.push(ia);f&&c.push(F);g&&c.push(ja);c=B(ea(c),D);A(b.j,c);fa(b.j);b.j.trim(E);c=b.position.add(B(b.j,D));var h=U(b,c);h=V(a,h);delete b.T;if(h.length){var l=b.position.clone();l=U(b,l);var p=V(a,U(l,new z(b.position.x,c.y)),h);p.length?([p]=y(p,n=>Math.abs(n.position.y-b.position.y)),b.position.y<p.position.y?b.top=p.bottom:b.bottom=p.top,b.j.y=0):b.position.y=c.y;a=V(a,U(l,new z(c.x,b.position.y)),h);a.length?([a]=y(a,n=>
Math.abs(n.position.x-b.position.x)),b.position.x<a.position.x?b.right=a.left:b.left=a.right,b.j.x=0):b.position.x=c.x;C(b.j,.95);b.T=!0}else b.position=c}
class kb{constructor(a=320){this.f=Za();this.b=new Map;this.a=[];this.c=32*a;for(const [c,d,f]of fb(a)){{a=c;var b=d;const g=new Xa(new z(32*(a+.5),32*(b+.5)),f);let h=this.b.get(a);h||(h=new Map,this.b.set(a,h));h.set(b,g)}}}update(){for(var a of this.a)jb(this,a);a=this.a.map(b=>[b,b.position.x]);a.sort(([,b],[,c])=>c-b);return a.some(([,b])=>b>this.c)?a:null}};class W extends Array{constructor(a){super();this.J=a}push(...a){for(;this.length+a.length>this.J;)this.shift();return super.push(...a)}};const lb=1/3;function mb(a,b){return~~(b-Math.min(Math.max(a.b.position.x-1024*lb,0),a.a-1024))}function nb(a,b){const {left:c,top:d}=b;return new z(mb(a,c),~~(576-d))}function ob(a){return~~Math.min(Math.max(a.b.position.x-1024*lb,0),a.a-1024)}class pb{constructor(a,b){this.b=a;this.a=b}}function qb(a){var {b}=a;b=b.a.sort((c,d)=>d.position.x-c.position.x).map(c=>{const d=32+c.A;return[Q(c.name),O(" \ud83c\udfc1 "),Q(((c.position.x-d)/(a.b.c-d)*100).toFixed(0)),O("%")]});Ia(a,b,24,4,2,"left")}
class X extends Ka{constructor(a){super(a);this.f=new Map;this.b=new kb(this.U());this.c=this.B();a=this.b;var b=this.c;b.position=G.clone();C(b.j,0);a.a.push(b);this.f.set(this.c,new W(4));this.m=new pb(this.c,this.b.c)}U(){}update(){const a=this.b.update();{L(this);const {m:f,b:g}=this;var b=ob(f),c=ob(f)+1024;N(this,b);for(var d of hb(g,b,c)){{const {a:h,m:l}=this,{s:p,S:n}=h,{x:m,y:q}=nb(l,d),{x:t,y:v}=d.size;p.drawImage(n,d.X*t,0,t,v,m,q,t,v)}}for(const h of g.a){{b=h;const {a:l,m:p}=this,{s:n,
S:m}=l;c=[...this.f.get(b),b.position];for(const [q,t]of c.entries()){n.globalAlpha=(q+1)/c.length;d=U(b,t);const {x:v,y:x}=nb(p,d);n.drawImage(m,320,0,64,32,v,x,64,32)}Ha(this,b.name,12,mb(p,b.position.x),~~(576-(b.top+2)),"center",b.M?void 0:"grey")}}this.C()}if(a)return this.D();for(const f of this.b.a)this.f.get(f).push(f.position.clone())}C(){qb(this);{const a=R(this.N,(void 0===this.g?0:this.N>=this.g)?P:Q);void 0!==this.g&&a.push(O("/"),...R(this.g,O));M(this,a,24,1022,24,"right")}}get N(){return this.l/
60}};class rb extends Va{constructor(a,b){super(a,b);this.j=new z}};const sb=new z(64,32);class tb extends rb{constructor(){super(new z,sb);this.T=!1}get M(){return!0}};class Y extends tb{constructor(a){super();this.o=a}v(){const a=!0===this.o.F.get("ArrowRight"),b=!0===this.o.F.get("ArrowLeft"),c=!0===this.o.F.get("ArrowUp");return new H(c,b,a)}get name(){return"ROOKIE"}};class ub extends Y{constructor(){super(...arguments);this.P=[]}v(a){const b=super.v(a),c=this.j.clone(),d=this.position.clone();this.P.push([a,c,d,b]);return b}};function vb(a,b,c){const d=new Float32Array(23);let f=0;for(const g of c)c=(null===g?15:g)/15,d[f++]=c;d[f++]=a.x/E;d[f++]=a.y/E;d[f++]=b.y/576;return d}function wb(a){const b=I.findIndex(c=>c.H===a.H&&c.left===a.left&&c.right===a.right);return-1!==b?b:a.H?1:0}
function xb(a){const b=a.map(([g,h,l,p])=>[vb(h,l,g),wb(p)]);a=Math.max(0,a.length-300);const c=new K(a,138),d=new Uint8Array(a);for(let g=0;g<a;g++){for(var f=0;6>f;f++){const [h]=b[g+60*f];c.buffer.set(h,g*c.h+23*f)}[,f]=b[g+300];d[g]=f}return[c,d]}function yb(a){for(;a.length!==a.J;)a.unshift(a[0]);const b=new K(1,138);for(let c=0;6>c;c++)b.buffer.set(a[60*c],23*c);return b};class zb extends X{constructor(){super(...arguments);this.g=80}U(){return 560}D(){if(80<=this.N)return 4;const {c:{P:a},a:{Y:b}}=this;console.log(`Gathered ${a.length} records`);const [c,d]=xb(a);{const f=c.buffer.buffer,g=d.buffer;b.V.postMessage({inputs:f,labels:g},[f,g])}return 5}B(){return new ub(this.a.o)}};const Ab=[[O("Not bad, but you can do better.")],[O("I cannot give you this job")],[O("unless you can fly under "),...R(80,Q),O(".")]],Bb=[[O("Try again.")],[O("This time give it "),Q("all you got"),O("!")]];class Cb extends T{f(){return[Ab,Bb]}g(){return 3}};const Db=[[O("Great job! You're "),Q("HIRED"),O("!")]],Eb=[[O("Now gather "),Q("100"),O(" air miles")],[O("to receive your "),Q("weekly bonus"),O("!")]];class Fb extends T{f(){return[Db,Eb]}g(){return 6}};class Gb extends X{B(){return new Y(this.a.o)}C(){super.C();var a=this.a.step/this.a.O;a=isNaN(a)?0:100*a;M(this,[Q(a.toFixed(1).padStart(3,"0")),O("/100 airmiles")],24,1022,52,"right")}D(){return this.a.u?7:6}};class Hb extends tb{constructor(a,b){super();this.f=[];this.u=a;this.l=new W(301);this.G=b}v(a){this.l.push(vb(this.j,this.position,a));if(this.f.length)return this.f.shift();a=yb(this.l);a=this.u.w(a);a=pa(J(a,0));const b=I[a];this.f=u(10).map(()=>b);return b}get M(){return!0}get name(){return`BACKUP-gen-${this.G+1}`}};class Ib extends Hb{constructor(){super(...arguments);this.g=0;this.c=new W(900);this.a=0}v(a){a=super.v(a);var b=this.position.x;const c=Math.max(this.g,b);this.c.push(c);if(this.a)return this.a--,this.a||(this.c=new W(900),this.g=b),I[2];b=this.c;return b.length===b.J&&0>=c-this.c[0]?(this.a=90,I[2]):a}get M(){return!this.a}};class Jb extends X{constructor(a){super(a);this.i=new Ib(a.u,a.G);a=this.b;var b=this.i;b.position=G.clone();C(b.j,0);a.a.push(b);this.f.set(this.i,new W(4))}B(){return new Y(this.a.o)}D(){return this.c.position.x>=this.i.position.x?9:10}};const Kb=[[O("Do you remember your timed test drive, "),Q("ROOKIE"),O("?")],[O("We recorded it.")]],Lb=[[O("Have you ever heard about "),Q("Artifical Intelligence"),O("?")],[O("While you were working hard for your "),Q("bonus")],[O("we trained a "),Q("neural network ")],[O("to replicate your driving patterns")],[O("from that test drive.")]],Mb=[[O("Then we let an "),Q("unsupervised genetic algorithm")],[O("improve on those skills "),Q("beyond "),O("the initial level. ")]],Nb=[[O("Now we have an "),
Q("autonomic driving algorithm ")],[O("for the other hoverloader.")],[O("We are going to keep you for now,")],[O("while we debug the "),Q("AI"),O(".")]],Ob=[[O("But once it bests you, you're "),Q("OUT"),O("!")]];class Pb extends T{f(){return[Kb,Lb,Mb,Nb,Ob]}g(){return 8}};const Qb=[[O("The "),Q("AI "),O("takes over.")],[O("You are "),Q("FIRED"),O("!")]];class Rb extends T{f(){return[Qb]}g(){return 8}};const Sb=[[O("You are in front of the "),Q("AI"),O(".")],[O("But for how long?")],[O("It works for "),Q("free"),O(".")]];class Tb extends T{f(){return[Sb]}g(){return 8}};const Ub=[[O("THE "),P("BACK"),O("-UP OF "),P("YOU")],[],[O("by "),Q("kurazu")],[Q("Tomasz Ma\u0107kowiak")],[O("kurazu@kurazu.net")],[O("GitHub: "),Q("https://github.com/kurazu/js13kgames19")],[],[O("Special thanks to my "),Q("beloved wife ")],[O("who survived a month of furious game development.")]];class Vb extends T{f(){return[Ub]}g(){return 0}};const Z=new Map;Z.set(0,Qa);Z.set(2,Ua);Z.set(3,zb);Z.set(4,Cb);Z.set(5,Fb);Z.set(6,Gb);Z.set(8,Jb);Z.set(7,Pb);Z.set(10,Rb);Z.set(9,Tb);Z.set(1,Vb);async function Wb(){function a(){const d=c.loop();void 0!==d&&(c=new (Z.get(d))(b));requestAnimationFrame(a)}const b=await Ga();let c=new (Z.get(0))(b);requestAnimationFrame(a)};function Xb(){Wb().catch(a=>{console.error("Failed to start the game",a)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Xb,!1):Xb();
