!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([,function(e,t,i){var n='{"height":24,"infinite":false,"layers":[{"data":[1,1,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,1,1,1,1,1,1,1,1,1,1,1,1,1,7,7,1,1,1,1,1,1,1,1,3,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,3,2,2,3,2,2,2,2,2,2,2,3,2,1,1,1,1,1,1,1,3,2,7,1,1,1,1,1,1,1,7,2,3,1,1,3,1,1,1,1,1,1,1,3,2,7,7,7,7,7,7,7,3,2,7,1,1,1,1,1,1,1,7,2,3,1,7,3,1,1,1,7,7,7,7,3,2,2,2,2,2,2,2,2,2,2,7,1,1,1,1,1,1,1,7,2,3,3,2,2,1,1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,1,1,1,1,1,1,1,7,2,3,3,1,1,1,1,3,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,7,1,1,1,1,1,1,1,7,2,3,3,7,1,1,1,3,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,7,1,1,1,1,1,1,1,7,2,3,2,2,3,1,1,3,7,7,7,7,7,2,7,7,7,7,7,7,7,7,2,1,1,7,1,7,1,7,1,1,2,3,1,1,3,1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1,7,3,1,3,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,1,1,1,1,1,1,1,1,1,1,7,3,3,2,2,1,3,7,7,1,7,7,1,1,1,1,3,2,2,2,2,2,1,1,1,1,2,2,2,2,2,2,7,3,3,1,1,7,2,2,2,3,2,2,2,7,7,7,3,1,1,7,7,7,7,7,1,1,2,2,2,2,2,2,7,3,3,7,1,7,7,7,7,3,7,7,7,7,7,7,3,1,3,2,2,2,2,2,1,1,2,2,7,7,7,2,7,3,2,2,3,7,2,2,2,3,2,2,2,7,7,7,3,1,3,1,1,7,7,7,7,7,1,2,2,7,7,2,7,3,1,1,3,7,2,7,2,3,2,7,2,7,7,7,3,1,3,1,3,2,2,2,2,2,1,1,2,2,7,2,7,3,1,7,3,7,2,2,2,3,2,2,2,7,7,7,3,1,3,1,3,1,1,7,7,7,7,7,1,2,2,2,7,3,3,2,2,7,1,1,1,3,1,1,1,7,7,7,3,1,3,1,3,1,3,2,2,2,2,2,1,1,1,1,7,3,3,1,1,7,2,2,2,3,2,2,2,7,7,7,3,1,3,1,3,1,3,1,1,7,7,7,7,7,1,1,7,3,3,7,1,7,2,7,2,3,2,7,2,7,7,7,3,1,3,1,3,1,3,1,3,2,2,2,2,2,1,1,7,3,2,2,3,7,2,7,2,3,2,7,2,7,7,7,3,1,3,1,3,1,3,1,3,1,1,7,7,7,7,7,7,3,1,1,3,7,2,2,2,3,2,2,2,7,7,7,3,1,3,1,3,1,3,1,3,1,3,2,2,2,2,2,7,3,4,1,3,1,1,1,1,3,1,1,1,1,1,1,3,1,3,1,3,1,3,1,3,1,3,1,1,1,1,1,7,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"height":24,"name":"level","opacity":1,"type":"tilelayer","visible":true,"width":32,"x":0,"y":0}],"nextobjectid":10,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.1.6","tileheight":32,"tilesets":[{"columns":7,"firstgid":1,"image":"../../assets/tileset.png","imageheight":32,"imagewidth":224,"margin":0,"name":"js13k","spacing":0,"tilecount":7,"tileheight":32,"tileproperties":{"0":{"isStable":false,"name":"air"},"1":{"isStable":true,"name":"floor"},"2":{"isStable":true,"name":"ladder"},"3":{"isStable":false,"name":"door"},"4":{"isStable":false,"name":"player"},"5":{"isStable":false,"name":"enemy"},"6":{"isStable":false,"name":"battery"}},"tilepropertytypes":{"0":{"isStable":"bool","name":"string"},"1":{"isStable":"bool","name":"string"},"2":{"isStable":"bool","name":"string"},"3":{"isStable":"bool","name":"string"},"4":{"isStable":"bool","name":"string"},"5":{"isStable":"bool","name":"string"},"6":{"isStable":"bool","name":"string"}},"tilewidth":32}],"tilewidth":32,"type":"map","version":1,"width":32}',s=ga(1024,768,function(){let e=new(window.AudioContext||window.webkitAudioContext);c=new class{constructor(e){this.ctx=e}init(){this.osc=this.ctx.createOscillator(),this.gainNode=this.ctx.createGain(),this.osc.connect(this.gainNode),this.gainNode.connect(this.ctx.destination),this.osc.type="sine"}play(e,t){this.init(),this.osc.frequency.value=e,this.gainNode.gain.setValueAtTime(.5,this.ctx.currentTime),this.osc.start(t),this.stop(t)}stop(e){this.gainNode.gain.exponentialRampToValueAtTime(.001,e+.25),this.osc.stop(e+.25)}battery(){this.play(8e3,this.ctx.currentTime)}move(){this.play(5,this.ctx.currentTime),this.play(5,this.ctx.currentTime),this.play(5,this.ctx.currentTime)}blast(){this.play(50,this.ctx.currentTime),this.play(99,this.ctx.currentTime+.05)}doorOpen(){this.play(261.63,this.ctx.currentTime+.25),this.play(329.63,this.ctx.currentTime+.35)}win(){this.play(261.63,this.ctx.currentTime+.25),this.play(329.63,this.ctx.currentTime+.35),this.play(392,this.ctx.currentTime+.45),this.play(523.25,this.ctx.currentTime+.55)}lose(){this.play(261.63,this.ctx.currentTime+.25),this.play(246.94,this.ctx.currentTime+.35),this.play(233.08,this.ctx.currentTime+.45)}}(e),s.canvas.style.border="none",s.backgroundColor="black",endMessage=s.text("Placeholder Text","32px Helvetica","#15e815",0,0),(d=s.group(endMessage)).visible=!1,(u=s.text("Sir! That earthquake knocked the building offline! The bio-restraint has failed...","25px Helvetica","#15e815",0,0)).y=200,(f=s.text("Electronics are dead, batteries scattered, and the security-organics are haywire!","25px Helvetica","#15e815",0,0)).y=250,introMessage3=s.text("The door cycle will drain the reserve. Go retrive the batteries so we can fix this!","25px Helvetica","#15e815",0,0),introMessage3.y=300,introMessage4=s.text("You're the best Organic Electro-Chemical Technician we've got, be safe in there.","25px Helvetica","#15e815",0,0),introMessage4.y=350,introScene=s.group(u,f,introMessage3,introMessage4),introScene.visible=!1,y=s.text("- OFFLINE: O.E.C.T. -","64px Courier","#15e815",0,0),h=s.text("By Ben Fox.","32px Courier","#15e815",0,0),p=s.text("[ SPACE ] to page/pause.","32px Courier","#15e815",0,0),m=s.text("[ A/D ] to blast the floor. [ ARROWS ] to move.","32px Courier","#15e815",0,0),w=s.text(`[ D ] -> Difficulty: ${x.difficulty.toUpperCase()}`,"24px Courier","#0098ff",0,0),y.y=275,h.y=360,p.y=410,m.y=460,w.y=510,titleScreen=s.group(y,h,p,m,w),titleScreen.visible=!1,world=s.makeTiledWorld(n,"tileset.png"),a=s.group(),r=world.getObjects(s.tileTypes.door),v=world.getObjects(s.tileTypes.floor),g=world.getObjects(s.tileTypes.ladder),T=world.getObjects(s.tileTypes.battery),r.forEach(e=>{a.addChild(e),e.canUse=!1,e.alpha=.25,j[e.index]=e}),v.forEach(e=>{a.addChild(e)}),T.forEach(e=>{a.addChild(e),k[e.index]=e}),A=Object.keys(k).length,g.forEach(e=>{a.addChild(e)}),directions={up:"u",down:"d",left:"l",right:"r",current:"c",still:"still"},l=function(e,t){let i=s.sprite({image:"tileset.png",x:128,y:0,width:32,height:32});return i.spawnX=e,i.spawnY=t,i.x=i.spawnX,i.y=i.spawnY,i.dead=!1,i.won=!1,i.hasStarted=!1,i.landingTile=void 0,i.lastMove=Date.now(),i.movement={falling:!1,moving:!1,direction:directions.still},i.freshSpawn=!0,i.currentTile=s.getSpriteIndex(i),i}(32,704),a.addChild(l),levelGraph=function(){const e={},t=world.objects;let i=0;for(t.length;i<t.length;i++){let n=t[i];"level"!==n.name&&(e[n.index]={},adjTiles=s.getAdjacentTiles(n.index),adjTiles.d.isStable?(F(l,adjTiles.c,adjTiles.u)&&(e[n.index][adjTiles.u.index]=1),F(l,adjTiles.c,adjTiles.d)&&(e[n.index][adjTiles.d.index]=1),F(l,adjTiles.c,adjTiles.l)&&(e[n.index][adjTiles.l.index]=1),F(l,adjTiles.c,adjTiles.r)&&(e[n.index][adjTiles.r.index]=1)):adjTiles.d.isStable||(e[n.index][adjTiles.d.index]=1))}return e}(),dijkstra2=new function(e){this.vertices=e,this.addVertex=function(e,t){this.vertices[e]=t},this.shortestPath=function(e,t){e=e.toString(),t=t.toString();var i,n,s,l,o=new function(){this._nodes=[],this.enqueue=function(e,t){this._nodes.push({key:t,priority:e})},this.dequeue=function(){return this._nodes.shift().key},this.sort=function(){this._nodes.sort(function(e,t){return e.priority-t.priority})},this.isEmpty=function(){return!this._nodes.length}},r={},a={},d=[];for(n in this.vertices)n===e?(r[n]=0,o.enqueue(0,n)):(r[n]=1/0,o.enqueue(1/0,n)),a[n]=null;for(o.sort();!o.isEmpty();){if((i=o.dequeue())===t){for(d=[];a[i];)d.push(Number(i)),i=a[i];break}if(r[i]===1/0&&"0"==i)break;if(i&&r[i]!==1/0)for(s in this.vertices[i])(l=r[i]+this.vertices[i][s])<r[s]&&(r[s]=l,a[s]=i,o.enqueue(l,s),o.sort())}return{path:d.concat([Number(e)]).reverse(),distance:d.length,updated:Date.now()}}}(levelGraph),s.key.space.press=function(){if(s.state===q)s.shake(titleScreen,16,!1,120),b?(clearTimeout(b),s.state=P):b=s.wait(2e3,()=>{s.state=P});else if(s.state===P)for(var e in b&&(b=void 0),x.difficulty!==x.difficulties.playground&&(o.push(C(672,256,1)),o.push(C(0,128,2)),o.push(C(320,352,3)),o.push(C(288,32,4)),o.push(C(928,704,5)),o.forEach(e=>{a.addChild(e)})),x.difficulty===x.difficulties.easy&&(O(645,2,32),O(649,2,32),O(684,10,32),O(275,8,1),O(444,3,1),O(476,2,1),O(508,1,1)),s.state=G,a.visible=!0,introScene.visible=!1,x);else s.state===G?s.paused&&!l.dead?s.resume():s.pause():s.state!==E&&s.state!==B||location.reload()},s.key.rightArrow.press=function(){l.hasStarted?l.hasStarted:l.hasStarted=!0,l.movement.direction=directions.right},s.key.leftArrow.press=function(){l.hasStarted?l.hasStarted:l.hasStarted=!0,l.movement.direction=directions.left},s.key.upArrow.press=function(){l.hasStarted?l.hasStarted:l.hasStarted=!0,l.movement.direction=directions.up},s.key.downArrow.press=function(){l.hasStarted?l.hasStarted:l.hasStarted=!0,l.movement.direction=directions.down},s.key.a.press=function(){l.hasStarted?l.hasStarted:l.hasStarted=!0,R("dl")},s.key.d.press=function(){s.state===G?(l.hasStarted?l.hasStarted:l.hasStarted=!0,R("dr")):s.state===q&&function(){x.difficulty===x.difficulties.normal?S(x.difficulties.hard):x.difficulty===x.difficulties.hard?S(x.difficulties.playground):x.difficulty===x.difficulties.playground?S(x.difficulties.easy):x.difficulty===x.difficulties.easy&&S(x.difficulties.normal);w.content=`[ D ] -> Difficulty: ${x.difficulty.toUpperCase()}${x.difficulty===x.difficulties.hard?" (!)":""}`}()},s.key.rightArrow.release=function(){l.movement.direction===directions.right&&(l.movement.direction=directions.still)},s.key.leftArrow.release=function(){l.movement.direction===directions.left&&(l.movement.direction=directions.still)},s.key.upArrow.release=function(){l.movement.direction===directions.up&&(l.movement.direction=directions.still)},s.key.downArrow.release=function(){l.movement.direction===directions.down&&(l.movement.direction=directions.still)},s.state=q},["tileset.png"]);document.getElementById("restart").addEventListener("click",()=>{location.reload()});var l,o,r,a,d,c,u,f,h,p,m,y,v,g,T,b,w,x={playerMoveSpeed:150,enemyMoveSpeed:250,blockRespawnSpeed:3300,pathUpdateFrequency:500,enemyUnstuckSpeed:void 0,allowFallingKills:!1,difficulties:{playground:"playground",easy:"easy",normal:"normal",hard:"hard"},difficulty:void 0};function S(e){e===x.difficulties.normal&&(x.difficulty=x.difficulties.normal,x.allowFallingKills=!1,x.enemyMoveSpeed=250,x.enemyUnstuckSpeed=x.blockRespawnSpeed/2.5),e===x.difficulties.hard&&(x.difficulty=x.difficulties.hard,x.allowFallingKills=!0,x.enemyMoveSpeed=200,x.enemyUnstuckSpeed=x.blockRespawnSpeed/2.5),e===x.difficulties.easy&&(x.difficulty=x.difficulties.easy,x.allowFallingKills=!1,x.enemyMoveSpeed=300,x.enemyUnstuckSpeed=x.blockRespawnSpeed/2),e===x.difficulties.playground&&(x.difficulty=x.difficulties.playground,x.allowFallingKills=!1,x.enemyMoveSpeed=250,x.enemyUnstuckSpeed=x.blockRespawnSpeed/2.5)}S(x.difficulties.normal),s.start(),destroyedBlocks={queue:[],hash:{}};const k={},j={},D=[];let A=0,M=0;function O(e,t,i){for(;t;)k[e- --t*i].visible=!1,M++}function C(e,t,i){let n=s.sprite({image:"tileset.png",x:160,y:0,width:32,height:32});return n.spawnX=e,n.spawnY=t,n.x=n.spawnX,n.y=n.spawnY,n.id=i,n.movement={falling:!1,moving:!1,stuck:!1,stuckAt:void 0,direction:directions.still},n.allowMoveAgain=function(){n.movement.moving=!1},n.makeStuck=function(e){this.movement.moving=!1,this.movement.falling=!1,this.movement.stuck=!0,this.inHoleRef=e,this.movement.stuckAt=Date.now()},n.unStick=function(){this.movement.stuck=!1,this.inHoleRef=void 0,this.movement.stuckAt=void 0,this.climbingOut=!0},n.climbingOut=!1,n.currentTile=s.getSpriteIndex(n),n.dead=!1,n.freshSpawn=!0,n.inHoleRef=void 0,n.needsPath=!0,n.pathData={path:null,updated:null,distance:null},n}function B(){a.visible=!1,d.visible=!0,titleScreen.visible=!1,endMessage.content="Oh no! You're part of the building, now.",endMessage.y=s.canvas.height/2-35}function E(){a.visible=!1,titleScreen.visible=!1,d.visible=!0,endMessage.content="You made it, nice work! We'll be back online in no time!",endMessage.y=s.canvas.height/2-35}function q(){titleScreen.visible=!0,a.visible=!1,d.visible=!1,introScene.visible=!1}function P(){a.visible=!1,titleScreen.visible=!1,d.visible=!1,introScene.visible=!0}function R(e){if(currentTile=s.getSpriteIndex(l),tileToDestroy=s.getAdjacentTile(currentTile,e),aboveTile=s.getAdjacentTile(tileToDestroy.index,directions.up),!destroyedBlocks.hash[tileToDestroy.index]&&aboveTile.type!==s.tileTypes.floor&&!l.dead&&(spriteToDestroy=v.find(e=>e.index===tileToDestroy.index),spriteToDestroy&&spriteToDestroy.visible)){let n=1;"dl"===e&&(n*=-1);var t=s.line("yellow",3,l.centerX+10*n,l.centerY+2,spriteToDestroy.centerX+2*n,spriteToDestroy.centerY-16);s.wait(35,()=>{s.remove(t)}),c.blast(),world.children[0].data[tileToDestroy.index]=1,s.fadeOut(spriteToDestroy,15);let o={sprite:spriteToDestroy,tile:tileToDestroy,time:Date.now(),occupied:!1,occupy:function(){this.occupied=!0,world.children[0].data[this.tile.index]=2},vacate:function(){this.occupied=!1,world.children[0].data[this.tile.index]=1}};i=o,destroyedBlocks.hash[i.tile.index]=i,destroyedBlocks.queue.push(i.tile.index)}var i}function U(){let e=destroyedBlocks.queue[0],t=destroyedBlocks.hash[e];D.push(e),delete destroyedBlocks.hash[destroyedBlocks.queue.shift()],world.children[0].data[e]=2,s.fadeIn(t.sprite,10).onComplete=function(){D.splice(D.indexOf(e),1)}}function F(e,t,i){switch(t.index-i.index){case 32:if(i.type&&t.type===s.tileTypes.ladder&&i.type!==s.tileTypes.floor)return!0;break;case-32:if(i.type&&t.type===s.tileTypes.ladder&&i.type!==s.tileTypes.floor||i.type&&i.type===s.tileTypes.ladder||i.type&&e.movement.falling)return!0;break;case-1:case 1:if(i.type&&i.type!==s.tileTypes.floor)return!0;break;default:return!1}}function Y(e,t,i){let n=s.getAdjacentTile(t,directions.current),l=s.getAdjacentTile(t,i);if(canMove=F(e,n,l),canMove){let i=l.index,n=(s.getTile(t,world.objects[0].data,world),s.getTile(i,world.objects[0].data,world));return nextX=n.x,nextY=n.y,e.x=nextX,e.y=nextY,e.currentTile=i,!0}return!1}function H(e){return thisTile=s.getAdjacentTile(e.currentTile,directions.current),belowTile=s.getAdjacentTile(e.currentTile,directions.down),!(thisTile.type===s.tileTypes.ladder||belowTile.isStable||!belowTile.index)}function _(){l.movement.moving=!1}function X(e){var t;e.dead=!0,e.visible=!1,(t=e).needsPath=!0,t.x=t.spawnX,t.y=t.spawnY,t.currentTile=s.getSpriteIndex(t),t.inHoleRef=void 0,t.freshSpawn=!0,t.movement={falling:!1,moving:!1,stuck:!1,stuckAt:void 0,direction:directions.still},t.pathData={path:null,updated:null,distance:null},setTimeout(function(){t.visible=!0},250),setTimeout(function(){t.dead=!1},1e3)}function N(){c.lose(),s.shake(a,12,!1,75),l.dead=!0,l.visible=!1,setTimeout(function(){s.resume(),s.state=B},1500),s.pause()}function I(e){if(e.freshSpawn&&(e.movement.falling=H(e),e.freshSpawn=!1),!e.movement.moving){if(e.movement.stuck||(e.movement.falling=H(e)),!e.movement.falling&&e.needsPath){let t=0;e.movement.stuck&&(t=32),x.difficulty===x.difficulties.hard?e.pathData=dijkstra2.shortestPath(e.currentTile-t,l.movement.falling?l.landingTile:l.currentTile):e.pathData=dijkstra2.shortestPath(e.currentTile-t,l.currentTile),e.needsPath=!1}!e.movement.falling&&Date.now()-e.pathData.updated>x.pathUpdateFrequency&&(e.needsPath=!0),e.movement.stuck&&Date.now()-e.movement.stuckAt>x.enemyUnstuckSpeed&&function(e){!e.dead&&destroyedBlocks.hash[e.inHoleRef.tile.index]&&(e.inHoleRef.vacate(),e.unStick())}(e);let t=!1,i=e.pathData.path?e.pathData.path[0]:void 0,n=e.pathData.path?e.pathData.path[1]:void 0;e.movement.stuck||(e.movement.falling?(destroyedBlocks.hash[e.currentTile+32]&&!destroyedBlocks.hash[e.currentTile+32].occupied||!destroyedBlocks.hash[e.currentTile+32])&&(t=Y(e,e.currentTile,directions.down)):n&&(e.movement.direction=function(e,t){if(t<e)return t+1===e?directions.left:directions.up;if(t>e)return t-1===e?directions.right:directions.down}(i,n),t=Y(e,i,e.movement.direction)),t&&(!e.movement.falling&&e.pathData.path&&e.pathData.path.shift(),e.movement.moving=!0,s.wait(x.enemyMoveSpeed,e.allowMoveAgain))),e.movement.stuck||(e.movement.falling=H(e))}}function K(){if(l.freshSpawn&&(l.movement.falling=H(l),l.freshSpawn=!1),!l.movement.moving){let e;if(Date.now()>l.lastMove+2e3){let e=s.getAdjacentTile(l.currentTile,directions.left),t=s.getAdjacentTile(l.currentTile,directions.right),i=s.getAdjacentTile(l.currentTile,directions.down);e.type===s.tileTypes.floor&&t.type===s.tileTypes.floor&&i.type===s.tileTypes.floor&&N(),l.lastMove=Date.now()}if(l.movement.falling?e=Y(l,l.currentTile,directions.down):l.movement.direction!==directions.still&&(e=Y(l,l.currentTile,l.movement.direction)),e&&(l.lastMove=Date.now(),c.move(),!l.won&&j[l.currentTile]&&j[l.currentTile].canUse&&(l.won=!0,c.win(),s.state=E),k[l.currentTile]&&k[l.currentTile].visible&&(k[l.currentTile].visible=!1,M++,c.battery(),A===M&&(c.doorOpen(),r.forEach(e=>{e.alpha=1,e.canUse=!0}))),l.movement.moving=!0,s.wait(x.playerMoveSpeed,_)),l.movement.falling=H(l),l.movement.falling&&!l.landingTile)for(idx=l.currentTile;!l.landingTile;){let e=world.tileTypes[world.objects[0].data[idx]-1];e&&e.isStable?l.landingTile=idx-32:e?idx+=32:l.landingTile=idx-32}else l.movement.falling||(l.landingTile=void 0)}}function G(){l.hasStarted&&(function(){-1!==D.indexOf(l.currentTile)&&N();o.forEach(e=>{-1!==D.indexOf(e.currentTile)&&X(e)})}(),K(),o.forEach(e=>{e.dead||(I(e),e.movement.stuck||(e.currentTile!==l.currentTile||!x.allowFallingKills&&(x.allowFallingKills||l.movement.falling)||N(),function(e){let t=destroyedBlocks.hash[e.currentTile];t&&(e.makeStuck(t),t.occupy())}(e)))}),function(){try{destroyedBlocks.queue.length&&Date.now()-destroyedBlocks.hash[destroyedBlocks.queue[0]].time>x.blockRespawnSpeed&&U()}catch(e){}}())}o=[]}]);