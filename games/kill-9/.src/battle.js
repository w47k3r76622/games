"use strict";(self.webpackChunkjs13k_kill_9=self.webpackChunkjs13k_kill_9||[]).push([[677],{419:(e,n,t)=>{var r=t(769),o=t(279),a=t(489),i=new Array;window.addEventListener("load",(function(){var e,n,t,s=io({upgrade:!1,transports:["websocket"]}),u=1,d=new o.SpinnerView;s.on("updatePlayerCount",(function(e){u=e})),s.on("startGame",(function(u,d){document.getElementById("wait").remove(),e=u,n=0;for(var c=0;c<9;++c)i.push(new r.Game(d));t=new o.ArenaView,document.getElementById("hud").style.display="block";var l=new a.KeyboardInput;l.start((function(n){var t=i[e];if(t.alive){for(t.update(n),s.emit("move",n);t.garbageOut>0;)t.garbageOut--,s.emit("sendGarbage");t.alive||s.emit("death")}else l.stop()}))})),s.on("scoreKill",(function(){n++})),s.on("notifyGarbage",(function(n,t){i[n].garbageIn.push(t),n===e&&s.emit("ackGarbage",t)})),s.on("updateOpponent",(function(e,n){i[e].update(n)})),s.on("disconnect",(function(){t=null,document.getElementById("game").remove(),document.getElementById("hud").remove(),document.getElementById("reconnect").style.display="block"})),window.requestAnimationFrame((function r(){t&&i.length?(t.renderBackground(i.length),i.forEach((function(n,r){t.renderCards(n,r,e)})),t.renderHud(n,i[e].score)):d.render(u),window.requestAnimationFrame(r)}))}))},489:(e,n)=>{n.__esModule=!0,n.KeyboardInput=void 0;var t=function(){function e(){}return e.prototype.createListener=function(e){return function(n){switch(n.key){case"ArrowUp":e([0,-1]);break;case"ArrowRight":e([1,0]);break;case"ArrowDown":e([0,1]);break;case"ArrowLeft":e([-1,0])}}},e.prototype.start=function(e){this.listener=this.createListener(e),window.addEventListener("keydown",this.listener)},e.prototype.stop=function(){this.listener&&(window.removeEventListener("keydown",this.listener),delete this.listener)},e}();n.KeyboardInput=t}},e=>{e(e.s=419)}]);