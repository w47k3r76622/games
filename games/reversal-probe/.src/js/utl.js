var Utl=function(){return{plr_to_scr:function(a,b){return sx=a*cvw/env.w,sy=b*cvh/env.h,[sx,sy]},get_xy:function(a,b,c,d){return[c-b*Math.sin(a-pi/2),d+b*Math.cos(a-pi/2)]},get_xy_0:function(a,b,c){env.w/2,env.h/2;return[a,b]},get_xy_course:function(a,b,c,d){var e=utl.get_xy(a,b,c,d);return[Math.round(e[0]),Math.round(e[1])]},bounds:function(a,b){return 0>a?0:a>b?b:a},any:function(a,b){return~~(Math.random()*(a+2*b))-b},infany:function(a){return Math.random()*a},infanyeq:function(a){return 2*utl.infany(a)-a},throb:function(a,b){return a*Math.sin(b*frame/1500+100*b)/2},is_close_course:function(a,b,c,d,e,f){return Math.abs(a-d)<c+f&&Math.abs(b-e)<c+f?!0:!1},is_close:function(a,b,c,d,e,f){return(c+f)*(c+f)>(a-d)*(a-d)+(b-e)*(b-e)?!0:!1},on_scrn:function(a,b){return utl.is_in_bounds(env.scrx,env.scrx+cvw,env.scry,env.scry+cvh,a,b)},is_in_bounds:function(a,b,c,d,e,f){return e>a&&b>e&&f>c&&d>f},in_env:function(a,b,c){return utl.is_in_bounds(-c,env.w+100,-100,env.h+100,a,b)},is_showing:function(a,b,c){var d=1.5*c;return a>env.scrx-d&&a<env.scrx+cvw+d&&b>env.scry-d&&b<env.scry+cvh+d},angle_between:function(a,b,c,d){return(Math.atan2(d-b,c-a)+9*pi)%(2*Math.PI)},turn_dir:function(a,b,c,d,e){var f=utl.angle_between(a,b,c,d);return e%(2*pi)+2*pi<f%(2*pi)+2*pi?1:-1},which_way:function(a,b){var c=1,d=(a+10*pi)%(2*pi),e=(b+10*pi)%(2*pi);return Math.abs(e-d)>pi/10&&(e<d-pi?c=-1:e>d&&2*pi-e+d>pi&&(c=-1)),c},remove_nmy:function(a){nmys.splice(a,1)},get_first_close_nmy:function(a,b){for(var c=0,d=nmys.length;d>c;c++){var e=nmys[c];if(Math.abs(e.x-a)<300&&Math.abs(e.y-b)<300&&["follow","circle","retreat","randomy","group"].indexOf(e.action)>-1)return e}},ht_nmys:function(a,b,c){for(var d=0,e=nmys.length;e>d;d++){var f=nmys[d];if(["follow","circle","retreat","randomy"].indexOf(f.action)>-1&&utl.is_close(f.x,f.y,f.r,a,b,c))return f.death_init(),scrbrd.pt(),!0;if("group"===f.action)for(var g=0,h=f.mmbrs.length;h>g;g++){var i=f.mmbrs[g];if("member"===i.action&&utl.is_close(f.mmbrs[g].x,f.mmbrs[g].y,f.mmbrs[g].r,a,b,c))return f.mmbrs[g].death_init(),scrbrd.pt(),!0}}},shape_start:function(a){cx.beginPath(),cx.moveTo(a[0],a[1])},shape_stop:function(a){a=a||!0,a&&cx.fill(),cx.stroke(),cx.closePath()},ln_2_pt:function(a){cx.lineTo(a[0],a[1])},lns_frm_arr:function(a){for(var b=a.length-1;b>=0;b--)utl.ln_2_pt(a[b])}}},utl=new Utl;