function sldr(a,b,c,d,e,f){var g=a.currentTime,h=a.createOscillator(),i=a.createGain();h.connect(i),i.connect(a.destination),h.frequency.setValueAtTime(b,g),i.gain.setValueAtTime(c,g),h.frequency.exponentialRampToValueAtTime(d,g+f),i.gain.exponentialRampToValueAtTime(e,g+f),h.start(g),h.stop(g+f)}function kck_drm(a){sldr(a,164.81,1.5,.001,.01,.5)}function bng(a,b,c,d,e){var f=a.currentTime,g=a.createBufferSource(),h=a.createGain();fltr=a.createBiquadFilter(),g.buffer=b,g.loop=!0,h.gain.value=0,g.connect(fltr),fltr.connect(h),fltr.type="lowpass",fltr.frequency.value=c+utl.infany(c/2),fltr.gain.value=utl.any(200,0),h.connect(a.destination),h.gain.setValueAtTime(d+utl.infany(d),f),h.gain.exponentialRampToValueAtTime(.001,f+e+utl.infany(e/2)),g.start(f),g.stop(f+.5)}var Snd=function(a,b){var b=b||[440],c=a.createOscillator(),d=a.createGain(),e=.75;return c.type="sine",c.frequency.value=b[0],d.gain.value=e,c.connect(d),d.connect(a.destination),c.start(0),{set_nt:function(a){c.frequency.value=b[a]},set_type:function(a){c.type=["sine","triangle","square","sawtooth"][a]},surprise_type:function(a,b){this.set_type(utl.any(b-a+1,0))},set_vol:function(a){d.gain.value=e*a}}},Nz=function(a,b,c){var d=a.createBufferSource(),e=a.createGain();d.buffer=b,d.loop=!0,e.gain.value=0;var f=a.createBiquadFilter();return d.connect(f),f.connect(e),f.type="lowpass",f.frequency.value=500,f.gain.value=25,e.connect(a.destination),d.start(0),{set_vol:function(a){e.gain.value=c*a}}},Snds=function(){function a(a){return Math.round(100*d*Math.pow(c,a))/100}function b(){switch(window.setTimeout(b,216),e++/16){case 32:q=new Snd(f,j);break;case 8:r=new Snd(f,i);break;case 0:s=new Snd(f,[a(-24),a(-21)]);break;case 24:t=new Snd(f,[a(0),a(3)]);break;case 16:u=new Snd(f,[a(24)]),u.set_vol(0)}switch((e%8===0||e%2===0&&utl.any(Math.min(~~(e/128)-1,3),0)>0)&&kck_drm(f),(e%2===1||e%2===0&&utl.any(Math.min(~~(e/128)-1,3),0)>0)&&bng(f,l,3e4,.2,.18),e%16){case 0:case 2:utl.any(9,0)>0&&(t&&(t.set_nt(utl.any(4,0)?0:1),t.surprise_type(1,3),t.set_vol(.6+utl.infany(.4))),s&&(s.set_nt(utl.any(6,0)?0:1),s.surprise_type(2,3),s.set_vol(1.3+utl.infany(1))));break;case 1:case 3:t&&t.set_vol(0),s&&s.set_vol(0);break;case 4:if(u&&utl.any(3,0)>0){var c=utl.any(4,0);u.set_type(c),u.set_vol(.03+(3-c)/3)}break;case 5:u&&u.set_vol(0)}r&&(e%2||!utl.any(2,0)?~~utl.any(2,0)&&r.set_vol(0):(r.set_nt(utl.any(i.length,0)),r.surprise_type(2,3),r.set_vol(Math.random()+1))),!q||e%2||!utl.any(2,0)||(q.set_nt(utl.any(j.length,0)),q.surprise_type(0,3),q.set_vol(Math.random()/12+.1))}for(var c=1.0594630943592953,d=440,e=0,f=new(window.AudioContext||window.webkitAudioContext),g=[-36,-33,-31,-29],h=[0,3,5,6,7],i=[],j=[],k=5e4,l=f.createBuffer(1,k,f.sampleRate),m=l.getChannelData(0),n=0;k>n;n++)m[n]=utl.any(21,0)/10-1;for(var o=new Nz(f,l,.6),n=0,p=g.length;p>n;n++)i.push(a(g[n]));for(var n=0,p=h.length;p>n;n++)j.push(a(h[n]));var q=0,r=0,s=0,t=0,u=0;return window.setTimeout(b,216),{thrust_start:function(){o.set_vol(1)},thrust_stop:function(){o.set_vol(0)},shoot:function(a){bng(f,l,400,1.25*a,.5)},boom:function(a){bng(f,l,100,16*a,3)},reset:function(){q&&q.set_vol(0),r&&r.set_vol(0),s.set_vol(0),t&&t.set_vol(0),u&&u.set_vol(0),q=0,r=0,s=0,t=0,u=0,e=0},upgrade:function(){sldr(f,110,.8,1760,1.2,.4)}}},snds=new Snds;