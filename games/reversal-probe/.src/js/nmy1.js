var Nmy1=function(){var a=this;Nmy0.call(a),a.r=7.5,a.shyness=80*a.v,a.clockwise=utl.any(2,0)-.5,a.av=.2,a.spin=0,a.v=utl.infany(.8)+.8,a.circle=function(){var b=a.get_pdir();a.a=b%(2*pi)+a.clockwise*pi,a.translate(),a.trail_wobble(),a.tail_test()},a.retreat=function(){var b=a.get_pdir();a.a=(2*pi+a.a-.01*utl.which_way(a.a,b))%(2*pi),a.translate(),a.trail_wobble(),a.tail_test()},a.mv=function(b){switch(a.id=b,a[a.action](),a.action){case"follow":utl.is_close(a.x,a.y,a.shyness,env.x,env.y,0)&&(a.action="circle");break;case"circle":if(utl.is_close(a.x,a.y,.9*a.shyness,env.x,env.y,0))a.action="retreat";else if(utl.is_close(a.x,a.y,1.2*a.shyness,env.x,env.y,0)){var c=mvs%~~(50*a.v);if("start"===game_mode&&0>=c&&utl.get_first_close_nmy(a.x,a.y)){nmys.push(new NmyBllt(a.x,a.y));var d=utl.on_scrn(a.x,a.y)?1:.4;snds.shoot(d)}}else a.action="follow";break;case"retreat":utl.is_close(a.x,a.y,1.2*a.shyness,env.x,env.y,0)||(a.action="follow");break;case"reversed":var c=mvs%~~(80*a.v);if(0>=c&&utl.get_first_close_nmy(a.x,a.y)){nmys.push(new PlrBllt(a.x,a.y));var d=utl.on_scrn(a.x,a.y)?1:.4;snds.shoot(d)}a.a+=rgd.ang.vel;break;case"death":(!a.bits.length||a.bits_count>32)&&utl.remove_nmy(a.id)}},a.drw=function(b,c){if("death"===a.action&&a.drw_death(),utl.is_showing(a.x,a.y,a.r))switch(a.action){case"follow":case"wobble":case"circle":case"retreat":case"reversed":var d=frame/200+a.spin,e=a.r*(.8+Math.abs(Math.sin(d)/2)),f=a.r*(.8+Math.abs(Math.sin(d+2*pi/3)/2)),g=a.r*(.8+Math.abs(Math.sin(d+4*pi/3)/2)),h=.8*a.r,i=a.spin;"wobble"===a.action&&a.drw_tmr(b,c,a.countdown/500),"wobble"===a.action||"reversed"===a.action||("pause"!==game_mode&&(a.spin+=a.av/30),~~(frame%(200-50*Math.abs(a.av)))||(a.av=utl.infany(.75)+.5,~~utl.any(2,0)&&(a.av*=-1))),"reversed"===a.action&&(i=a.a);var j=[a.npt_xy(i+1*pi/15,h),a.npt_xy(i+3*pi/15,h),a.npt_xy(i+4*pi/15,e),a.npt_xy(i+10*pi/15,e),a.npt_xy(i+11*pi/15,h),a.npt_xy(i+13*pi/15,h),a.npt_xy(i+14*pi/15,f),a.npt_xy(i+20*pi/15,f),a.npt_xy(i+21*pi/15,h),a.npt_xy(i+23*pi/15,h),a.npt_xy(i+24*pi/15,g),a.npt_xy(i,g)];cx.fillStyle=a.fill,cx.strokeStyle=a.stroke,utl.shape_start(j[0]),utl.lns_frm_arr(j),utl.shape_stop()}}};