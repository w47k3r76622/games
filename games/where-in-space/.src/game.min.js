ORBS.setFullScreenGameCss();var renderer=new ORBS.renderer({renderState:update,antiAliasing:!1,bgColor:"#0a001a",fps:24,width:window.innerWidth,height:window.innerHeight}),scene=new ORBS.scene,home=null,closeBy=!1,lastXPos=900,lastYPos=600,levelsExplored=[],curLevel=0,velocity=40,curCooldown=100;let brightness=110;var fortune=1,fortuneTable=!1,shipMax={electronics:25,structure:50,fuel:50},shipHealth={electronics:0,structure:0,fuel:0},shipFixed=!1,inventory={superCopper:0,shinyAlloy:0,gooyOil:0};renderer.addToImgCache(new ORBS.Sprite("./img/player-still.png"),"charecter"),renderer.addToImgCache(new ORBS.Sprite("./img/bg.png"),"bg"),renderer.addToImgCache(new ORBS.Sprite("./img/ship.png"),"ship"),renderer.addToImgCache(new ORBS.Sprite("./img/ship-damaged.png"),"shipDamaged"),renderer.addToImgCache(new ORBS.Sprite("./img/box.png"),"box"),renderer.addToImgCache(new ORBS.Sprite("./img/folliage.png"),"folliage"),renderer.addToImgCache(new ORBS.Sprite("./img/shinyAlloy.png"),"shinyAlloy"),renderer.addToImgCache(new ORBS.Sprite("./img/superCopper.png"),"superCopper"),renderer.addToImgCache(new ORBS.Sprite("./img/gooyOil.png"),"gooyOil");var bg=new ORBS.obj({type:sprite,name:"bg"});function setup(e){e.deleteObj=r=>{for(var t=0;t<e.vScene.length;t++)e.vScene[t].name==r&&e.vScene.splice(t,1)},e.add(bg);var r=new ORBS.scriptComponent((function(e,r,t){return e.y>t.screen.height-45&&0!=curLevel&&(lastXPos=e.x,lastYPos=50,levelChange(down),e.y=50),e.y<49&&(lastXPos=e.x,lastYPos=1031,levelChange(up),e.y=50),e.x>t.screen.width-31&&(e.x=t.screen.width-30),e.x<31&&(e.x=30),e})),t=new ORBS.obj({type:sprite,name:"charecter"});t.vars({x:lastXPos,y:lastYPos,width:100,height:100,sprite:renderer.imgStore.charecter}),t.attachScript(r),e.add(t)}function levelChange(e){e==up?(scene=levels[1](),renderer.setScene(scene),curLevel++):e==down&&(1==curLevel?(scene=home,renderer.scene=scene,curLevel--):curLevel>=1&&(scene=levels[1](),renderer.setScene(scene),curLevel--))}bg.vars({x:720,y:540,width:1440,height:1080,sprite:renderer.imgStore.bg}),levels=[()=>{let e=new ORBS.scene;e.collisionLayerSet("boxes"),setup(e);var r=new ORBS.scriptComponent((r=>(1!=r.repaired&&(e.getObj("charecter").x<r.x+300&&e.getObj("charecter").x>r.x-300&&e.getObj("charecter").y<r.y+300&&e.getObj("charecter").y>r.y-300?0!=closeBy&&closeBy!=r.name||(0==shipFixed?info.show("< SPACE > TO Fix the Ship"):info.show("< SPACE > TO Take of back to earth!"),closeBy=r.name,1==renderer.keyMap[" "]&&(0==shipFixed?(shipHealth.electronics+=inventory.superCopper,shipHealth.fuel+=inventory.gooyOil,shipHealth.structure+=inventory.shinyAlloy,inventory={superCopper:0,shinyAlloy:0,gooyOil:0},info.close(),closeBy=!1,text(`Ship Structure: ${shipHealth.structure}/${shipMax.structure} <br>Ship Electronics: ${shipHealth.electronics}/${shipMax.electronics}<br>Ship Fuel: ${shipHealth.fuel}/${shipMax.fuel}`),shipHealth.electronics>=shipMax.electronics&&shipHealth.structure>=shipMax.structure&&shipHealth.fuel>=shipMax.fuel&&(r.sprite=renderer.imgStore.ship,e.deleteObj("folliage"),e.deleteObj("folliage2"),e.deleteObj("folliage3"),shipFixed=!0)):(e.deleteObj("charecter"),r.repaired=!0,info.close(),setTimeout((()=>{r.toEarth=!0,r.dy=-1}),1e3)))):closeBy==r.name&&(info.close(),closeBy=!1)),1==r.toEarth&&(r.y<-50?setInterval((()=>brightness-=2),500):r.dy*=1.1),r))),t=new ORBS.obj({type:sprite,name:"shipDamaged"});t.vars({x:550,y:600,width:500,height:500,sprite:renderer.imgStore.shipDamaged}),t.attachScript(r),e.add(t);var o=new ORBS.obj({type:sprite,name:"box"});o.vars({x:1300,y:200,width:100,height:100,sprite:renderer.imgStore.box}),e.add(o);let n=new ORBS.scriptComponent((r=>{e.getObj("charecter").x<r.x+100&&e.getObj("charecter").x>r.x-100&&e.getObj("charecter").y<r.y+100&&e.getObj("charecter").y>r.y-100?0!=closeBy&&closeBy!=r.name||(info.show("< SPACE > TO upgrade mining tool"),closeBy=r.name,1==renderer.keyMap[" "]&&(0==fortuneTable?(text("upgrade your tool to extract more materials from mining upgrade your tool here using shiny Alloy"),fortuneTable=!0):inventory.shinyAlloy>=2*fortune?(inventory.shinyAlloy-=2*fortune,text(`upgraded your tool to mine ${fortune+=1} of materials from each ore.`)):text("you don't have enough shiny Alloy"))):closeBy==r.name&&(info.close(),closeBy=!1)}));var a=new ORBS.obj({type:sprite,name:"box2"});a.vars({x:1200,y:350,width:100,height:100,sprite:renderer.imgStore.box}),a.attachScript(n),e.add(a);var i=new ORBS.obj({type:sprite,name:"folliage"});i.vars({x:720,y:650,width:75,height:75,sprite:renderer.imgStore.folliage}),e.add(i);var s=new ORBS.obj({type:sprite,name:"folliage2"});s.vars({x:570,y:685,width:75,height:75,sprite:renderer.imgStore.folliage}),e.add(s);var l=new ORBS.obj({type:sprite,name:"folliage3"});l.vars({x:380,y:600,width:75,height:75,sprite:renderer.imgStore.folliage}),e.add(l);for(let r=0;r<3;r++){let t=new ORBS.obj({type:sprite,name:"folliage"+r+4});t.vars({x:Math.floor(1340*Math.random())+100,y:Math.floor(980*Math.random())+100,width:75,height:75,sprite:renderer.imgStore.folliage}),e.add(t)}return 1!=levelsExplored[0]&&(text('You have crashed landed on <strong style="color: aqua;">QSBXb25kZXJmdWwgUHVycGxlIFBsYW5ldCAg</strong>, look around to find for a way back to earth.'),levelsExplored[0]=!0),e},()=>{let e=new ORBS.scene;e.collisionLayerSet("boxes"),setup(e);for(let r=0;r<3;r++){let t=new ORBS.obj({type:sprite,name:"folliage"+r});t.vars({x:Math.floor(1340*Math.random())+100,y:Math.floor(980*Math.random())+100,width:75,height:75,sprite:renderer.imgStore.folliage}),e.add(t)}for(let r=0;r<3;r++){let t=new ORBS.obj({type:sprite,name:"folliage"+r});t.vars({x:Math.floor(1340*Math.random())+100,y:Math.floor(980*Math.random())+100,width:75,height:75,sprite:renderer.imgStore.folliage}),e.add(t)}return 1!=levelsExplored[1]&&(text('Looks like there are resources on this planet;<br><br><span style="color: springgreen;">SCANING SURROUNDING</span>'),setTimeout((()=>text('<span style="color: springgreen;">SCANING COMPLETE</span>; Hmm, there seems to be a large amount of resources falling towards the planet from outer space. <br><br><span style="font-weight: 900;">Objective: find resources to fix your ship and look for fuel sources</span>.')),5e3),levelsExplored[1]=!0),e}],renderer.on("keyboardEvent",(e=>{1!=e.keyMap.ArrowLeft&&1!=e.keyMap.a||(e.scene.getObj("charecter").x-=velocity*e.delta),1!=e.keyMap.ArrowUp&&1!=e.keyMap.w||(e.scene.getObj("charecter").y-=velocity*e.delta),1!=e.keyMap.ArrowRight&&1!=e.keyMap.d||(e.scene.getObj("charecter").x+=velocity*e.delta),1!=e.keyMap.ArrowDown&&1!=e.keyMap.s||(e.scene.getObj("charecter").y+=velocity*e.delta)}));const ran=()=>Math.round(Math.floor(9999*Math.random())+1e3);function startGame(){document.body.onclick=()=>{document.getElementById("textbox").className="hide"},setInterval((()=>{if(document.getElementById("inventory").innerHTML="<b>inventory</b>: <br>"+JSON.stringify(inventory).replaceAll('"',"").replaceAll(",","<br>").replace("{","").replace("}","")+"<br><br><b>Parts of the <br>Ship Fixed</b>: <br>"+JSON.stringify(shipHealth).replaceAll('"',"").replaceAll(",","<br>").replace("{","").replace("}",""),brightness<-100)try{document.getElementById(renderer.canvasId).style.opacity=0,renderer.renderState=still,scene.vScene=[],text('You got back to Earth safely! Congratulations on surviving on <strong style="color: aqua;">QSBXb25kZXJmdWwgUHVycGxlIFBsYW5ldCAg</strong>!<br><br>Thanks for playing the game by <a href="https://imagineeeinc.github.io/">Imagineee</a> for the JS13k Game Jam, made with JS and my personal game engine <a href="https://imagineeeinc.github.io/orbs-js/">Orbs JS</a>, art and music (if I added any) by me, Made with â™¥ and rush. (I had to make it in 1.5 weeks because I didn\'t do any thing in the first 3 weeks)')}catch(e){}}),500),renderer.startRenderCycle(),scene=levels[0](),renderer.setScene(scene),curLevel=0,home=scene}function text(e){document.getElementById("textbox").innerHTML=e,document.getElementById("textbox").className=""}renderer.setSize(1440,1080),window.onresize=()=>{window.innerHeight<=1080?document.body.style.zoom="50%":window.innerHeight>1080&&(document.body.style.zoom="100%")},renderer.shaderSet((e=>{e.filter=`brightness(${brightness}%)`})),renderer.canvasAttactToDom(document.body,"prepend"),window.onload=()=>{text("<h1>Where In Space?</h1><h5>by Imagineee</h5><h4>When you are stuck in space on a bizarre planet</h4><a href='javascript:startGame()'>Start Game</a>")},renderer.on("beforeRender",(()=>{let e=Math.round(Math.floor(9999*Math.random())+1e3);if(scene.vScene.length<15&&0!=curLevel&&Math.round(Math.floor(1e3*Math.random())+0)<20){let r=Math.round(Math.floor(5*Math.random())+0);r>=4?r="shinyAlloy":3==r?r="superCopper":r<=2&&(r="gooyOil");let t=new ORBS.obj({type:sprite,name:r+e});t.vars({x:Math.floor(1340*Math.random())+100,y:Math.floor(980*Math.random())+100,width:75,height:75,sprite:renderer.imgStore[r]});let o=new ORBS.scriptComponent((e=>(scene.getObj("charecter").x<e.x+100&&scene.getObj("charecter").x>e.x-100&&scene.getObj("charecter").y<e.y+100&&scene.getObj("charecter").y>e.y-100?0!=closeBy&&closeBy!=e.name||(info.show("< SPACE > TO mine "+r),closeBy=e.name,1==renderer.keyMap[" "]&&(inventory[r]+=1*fortune,scene.deleteObj(closeBy),info.close(),closeBy=!1,info.show(`Collected 1 ${r}.`))):closeBy==e.name&&(info.close(),closeBy=!1),e)));t.attachScript(o),scene.add(t)}}));const info={show:e=>{document.getElementById("info").innerHTML=e,document.getElementById("info").className=""},close:()=>document.getElementById("info").className="hide"};
