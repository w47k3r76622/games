<html>
<body style="overflow: hidden; background-color: black;">
<script>
const n=(a,b)=>a+(Math.random()*(b-a+1)|0),r=(a,b,c)=>{b=(1-a)*b[0]+a*b[1]|0;return b+(Math.random()*(((1-a)*c[0]+a*c[1]|0)-b+1)|0)},t=(a,b,c)=>{let d=Math.random(),e=a[0],f=b[0],g,h=Math.min(a.length,b.length),k=(1-c)*e+c*f;for(g=0;g<h&&!(d<k);++g)g<h-1&&(e=a[g+1],f=b[g+1],k+=(1-c)*e+c*f);return g};class aa{constructor(a,b,c,d,e,f){this.i=void 0;this.g=a;this.h=Array.from(b);this.m=c;this.type=d;this.u=e;this.l=f}play(a){const b=["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime"],c=this.g.currentTime,d=this.g.createOscillator(),e=this.g.createGain();d.type=this.type;a*=this.m;d.frequency.setValueAtTime(this.h[0],c);e.gain.setValueAtTime(.2*a,c);e.gain.exponentialRampToValueAtTime(Math.max(Math.min(a,1),.01),c+this.l/60);let f=0,g,h;for(let k=0;k<this.h.length;k+=2)g=
this.h[k],h=this.h[k+1],d.frequency[b[this.u]](g,c+f),f+=1/60*h;e.gain.exponentialRampToValueAtTime(.5*a,c+f);d.connect(e).connect(this.g.destination);d.start(c);d.stop(c+f);d.onended=()=>d.disconnect();this.i?.disconnect();this.i=d}};function u(a,b,c=1){if(a.g)try{b.play(c*a.wa)}catch(d){}}class ba{constructor(){this.W=(a,b=1,c="square",d=2,e=2)=>new aa(this.h,a,b,c,d,e);this.toggle=(a=!this.g)=>this.g=a;this.h=new AudioContext;this.g=!0}};class w{constructor(a=0,b=0){this.g=()=>new w(this.x,this.y);this.x=a;this.y=b}};const ca=()=>{let a,b;b=document.createElement("canvas");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;");b.width=192;b.height=144;a=document.createElement("div");a.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");a.appendChild(b);document.body.appendChild(a);return[b,b.getContext("2d")]};
function x(a){var b=window.innerWidth,c=window.innerHeight;let d=Math.min(b/a.width,c/a.height);1<d&&(d|=0);a.g.style.width=String(d*a.width|0)+"px";a.g.style.height=String(d*a.height|0)+"px";a.g.style.left=String(b/2-d*a.width/2|0)+"px";a.g.style.top=String(c/2-d*a.height/2|0)+"px"}
function da(a,b,c=a.width/2,d=a.height/2){const e=a.T;var f=Math.max(0,d-b)|0;const g=Math.min(a.height,d+b)|0;0<f&&e.fillRect(0,0,a.width,f);g<a.height&&e.fillRect(0,g,a.width,a.height-g);for(let k=f;k<g;++k){var h=k-d;Math.abs(h)>=b?e.fillRect(0,k,a.width,1):(f=Math.round(c-Math.sqrt(b*b-h*h)),h=Math.round(c+Math.sqrt(b*b-h*h)),0<f&&e.fillRect(0,k,f,1),h<a.width&&e.fillRect(h,k,a.width-f,1))}}
function y(a,b,c=0,d=0,e=0,f=0,g=b.width,h=b.height,k=0){const l=a.T,m=0!=k;c+=a.H.x;d+=a.H.y;e|=0;f|=0;g|=0;h|=0;c|=0;d|=0;m&&l.save();0!=(k&1)&&(l.translate(g,0),l.scale(-1,1),c*=-1);0!=(k&2)&&(l.translate(0,h),l.scale(1,-1),d*=-1);l.drawImage(b,e,f,g,h,c,d,g,h);m&&l.restore()}function A(a,b,c,d,e,f=0,g=0,h=0){const k=b.width/16|0;let l=d;1==h&&(l=d-=c.length*(k+f)/2);for(let m=0;m<c.length;++m)h=c.charCodeAt(m),10==h?(l=d,e+=k+g):(h-=32,y(a,b,l,e,h%16*k,(h/16|0)*k,k,k),l+=k+f)}
class ea{constructor(){this.h="#ffffff";this.width=192;this.height=144;[this.g,this.T]=ca();this.T.imageSmoothingEnabled=!1;this.H=new w;window.addEventListener("resize",()=>{x(this)});x(this)}clear(a){const b=this.T;b.fillStyle=a;b.fillRect(0,0,this.width,this.height);b.fillStyle=this.h}fillColor(a){this.T.fillStyle=this.h=a}fillRect(a=0,b=0,c=this.width,d=this.height){this.T.fillRect(a+this.H.x|0,b+this.H.y|0,c|0,d|0)}moveTo(a=0,b=0){this.H.x=a;this.H.y=b}move(a,b){this.H.x+=a;this.H.y+=b}};function B(a,b,c){a.g.set(b,c)}function C(a,b,c){const d=new Image;d.onload=()=>{B(a,b,d);++a.loaded};d.src=c;++a.h}class fa{constructor(){this.h=this.loaded=0;this.F=a=>this.g.get(a);this.R=a=>this.U.get(a);this.i=()=>this.loaded>=this.h;this.g=new Map;this.U=new Map}};class ha{get la(){return this.g.width}get V(){return this.g.height}constructor(a,b,c,d,e){this.o=1;this.g=a;this.S=b;this.input=c;this.audio=d;this.s=e}};class ia{constructor(a){this.keys=Array.from(a)}}function D(a,b,c){a.keys.get(b)!==c-2&&(a.keys.set(b,c),a.g||(a.g=!!(c&1)))}function E(a,b,c){a.actions.set(b,new ia(c))}function F(a,b){b=a.actions.get(b);if(void 0===b)return 0;let c=0;for(let d of b.keys)if(0!=(c=a.keys.get(d)??0))break;return c}
class ja{constructor(){this.g=!1;this.keys=new Map;this.h=[];this.actions=new Map;window.addEventListener("keydown",a=>{this.h.includes(a.code)&&a.preventDefault();D(this,a.code,3)});window.addEventListener("keyup",a=>{this.h.includes(a.code)&&a.preventDefault();D(this,a.code,2)});window.addEventListener("contextmenu",a=>a.preventDefault());window.addEventListener("mousemove",()=>window.focus());window.addEventListener("mousedown",()=>window.focus())}update(){let a;for(let b of this.keys.keys())1<
(a=this.keys.get(b))&&this.keys.set(b,a-2);this.g=!1}};class ka{constructor(){this.g=void 0;this.S=new Map}update(a){this.g?.update(a)}ha(a,b){this.g?.ha(a,b)}};function G(a,b){const c=a.s.i();a.g=Math.min(a.g+(b-a.m),83.33335);a.m=b;c&&!a.l&&(a.u?.(a.h),a.l=!0);for(b=!0;16.66667<=a.g;a.g-=16.66667)c&&a.S.update(a.h),b&&(a.h.input.update(),b=!1);c?a.S.ha(a.i,a.s):a.i.clear("#0055aa");window.requestAnimationFrame(d=>G(a,d))}class la{constructor(){this.m=this.g=0;this.l=!1;this.u=void 0;this.i=new ea;this.audio=new ba;this.input=new ja;this.s=new fa;this.S=new ka;this.h=new ha(this.i,this.S,this.input,this.audio,this.s)}};class H{constructor(){this.g=!1;this.da=()=>this.g}}function I(a,b){for(let c of b)if(!c.da())return c;a=new a.prototype.constructor;b.push(a);return a};const ma=[1,2],na=[5,4],J=[12,6],K=[18,12],oa=[2,0],pa=[1,0];function qa(a){let b=n(2,a.width/2);const c=n(1,3);a.u[b]=c;b=n(b+4,a.width-4);a.u[b]=1+(c-1+n(1,2))%3}function L(a){let b=ma[a.l],c=na[a.l];1==a.l&&(b+=a.X.g??0,c+=a.X.g??0);return[b,c]}function ra(a,b){const c=[.67,.33];return 1!=a.h||0!=a.i?(a.K=0,!1):0<--a.K?!0:0>=--a.B?(a.B=r(b,J,K),a.K=1+t(c,c,1),!0):!1}
class M{constructor(a,b,c=0){this.K=this.G=this.O=this.i=this.v=this.m=0;this.J=!1;this.X=this;this.aa=()=>this.g;this.xa=()=>0==this.h;this.qa=()=>0!=this.h&&0==this.i&&!this.J;this.va=()=>Math.min(this.G,this.m);this.width=a;this.g=oa[b];this.h=pa[b];this.height=Array(this.width).fill(this.g);this.type=Array(this.width).fill(this.h);this.C=Array(this.width).fill(0);this.u=Array(this.width).fill(0);this.L=Array(this.width).fill(!1);this.A=n(4,16);this.N=n(8,16);this.B=n(J[0],K[0]);this.l=b;this.D=
c;0==b&&qa(this)}update(a,b){a:{var c=[.67,.33];this.O=this.i;0>=--this.v&&(this.i=0);const [h,k]=L(this);if(1==this.h&&1==this.l){var d=this.g-this.X.g;if(-1==this.X.i&&2>=d||1>=d){this.i=-1;this.A=2;this.v=0;this.g-=this.i;++this.m;break a}}1==this.h&&2<=this.m&&0>=--this.A&&(this.v=Math.min(this.m-1,1+t(c,c,1)),this.A=this.v-1+n(4,16),this.i=.5>Math.random()?-1:1,c=this.g-this.i*this.v,c!=Math.max(Math.min(c,k),h)&&(this.i*=-1),++this.m);this.g-=this.i}c=[[2,2,2],[4,2,0]];d=[[4,16,6],[16,10,0]];
const e=[.33,0],[f,g]=L(this);0==this.h&&++this.G;0>=--this.m&&0==this.O&&(1!=this.h?(this.h=1,1==this.l&&(this.g=n(f,g)),this.G=0):(this.h=!this.J&&Math.random()<e[this.l]?2:0,0==this.l&&0==this.h&&(this.g=n(Math.max(f,this.g-2),Math.min(g,this.g+2)))),this.m=n(c[this.l][this.h],d[this.l][this.h]));this.u[a]=0;(this.L[a]=this.J=ra(this,b))||0<--this.N||1!=this.h||0!=this.i||0==this.l&&0!==this.X.h||(b=[.2,.3,.5],b=t(b,b,1)+1,0==this.l&&1==this.X.h&&2>=this.X.g-this.g&&(b=3),3==b&&(2>=this.A||1>=
this.m)&&(b=2),this.u[a]=b,this.N=n(8,16),3==b&&(this.B=Math.max(this.B+1,1)));this.height[a]=this.g;this.type[a]=this.h;this.C[a]=this.i}P(a,b,c,d){const e=[80,32,96],f=[0,0,-1];let g,h,k;const l=a.height/16|0;let m;for(let z=0;z<this.width;++z){g=(z+c)%this.width;var p=this.C[g];h=16*z-(d|0)-32+this.D;k=l-this.height[g];var q=this.width;q=1!=this.type[((g-1)%q+q)%q];m=1!=this.type[(g+1)%this.width];if(0!=this.u[g]){var v=this.u[g];y(a,b,h+[,-8,0,8][v],16*k+[,-33,-16,-16][v],[,160,24,0][v],[,0,48,
48][v],[,32,16,24][v],[,33,16,16][v])}switch(this.type[g]){case 1:v=e[p+1];q?v-=16:m&&(v+=16);y(a,b,h,16*k+16*f[p+1],v,0,16,32);v=32;q?v-=16:m&&(v+=16);for(p=k+f[p+1]+2;p<l;++p)y(a,b,h,16*p,v,p==k?0:16,16,16);q&&y(a,b,h-16,16*k,0,0,16,16);m&&y(a,b,h+16,16*k,64,0,16,16);break;case 2:q||y(a,b,h-16,16*k+-2-14,0,64,16,16),m||y(a,b,h+16,16*k+-2-14,32,64,16,16),y(a,b,h,16*k+-2-14,16,64,16,16),y(a,b,h,16*k+-2,96,32,16,16)}this.L[g]&&y(a,b,h,16*(k-1),112+c%2*16,48,16,16)}}$(a,b,c,d,e){let f;const g=e.V/16|
0,h=((a.ea().x-this.D)/16|0)+2;let k,l;for(let q=h-2;q<=h+2;++q){var m=this.width;m=((q+c)%m+m)%m;if(0!=this.type[m]){var p=this.width;k=Number(0==this.type[((m-1)%p+p)%p]);l=Number(0==this.type[(m+1)%this.width]);p=16*q-d-32+this.D;f=16*(g-this.height[m]);switch(this.C[m]){case 0:N(a,p,f,p+16,f,b,e,k,l);break;case -1:N(a,p,f+16,p+16,f,b,e,0,0);break;case 1:N(a,p,f-16,p+16,f,b,e,0,0)}this.L[m]&&a.ya?.(p+2,f-6,e)}}}};class sa extends H{constructor(){super();this.type=this.width=0;this.j=new w}Z(a,b,c,d){this.j.x=a;this.j.y=b;this.width=c;this.type=d;this.g=!0}update(a,b){this.g&&(this.j.x-=a*b.o)<=8*-this.width&&(this.g=!1)}P(a,b){if(this.g){var c=Math.round(this.j.x),d=a.height-this.j.y;switch(this.type){case 0:for(var e=0;e<this.width;++e){var f=128;0==e?f-=16:e==this.width-1&&(f+=16);y(a,b,c-8*this.width+16*e,d,f,0,16,16)}y(a,b,c-12,d+16,124,16,24,16);for(f=2;f<((a.height-d)/16|0);++f)y(a,b,c-8,d+16*f,128,
32,16,16);break;case 1:if(y(a,b,c-8*this.width-16,d,0,32,16,16),y(a,b,c+8*this.width,d,64,32,16,16),1==this.width)y(a,b,c-8,d,80,32,16,16);else for(e=0;e<this.width;++e)f=32,0==e?f-=16:e==this.width-1&&(f+=16),y(a,b,c-8*this.width+16*e,d,f,32,16,16)}}}$(a,b,c){if(this.g){var d=c.V-this.j.y;N(a,this.j.x-8*this.width,d,this.j.x+8*this.width,d,b,c)}}};const O=(a,b,c)=>a<b?Math.min(b,a+c):Math.max(b,a-c);function N(a,b,c,d,e,f,g,h=1,k=1,l=0){if(!a.na||!a.g||a.l||a.speed.y<=l||a.j.x+a.M.x+a.I.x/2*h<b||a.j.x+a.M.x-a.I.x/2*k>d)return!1;d=(e-c)/(d-b);b=a.j.x*d+(c-d*b);c=a.j.y+a.M.y+a.I.y/2;f=Math.abs(d*(a.speed.x+f))*g.o;return c<b+8+Math.abs(a.speed.y)*g.o+f&&c>=b-2-f?(a.j.y=b-a.M.y-a.I.y/2,a.speed.y=0,a.i=!0,a.ma(),!0):!1}
class P extends H{constructor(a=0,b=0){super();this.i=this.l=!1;this.na=!0;this.fa=()=>this.l;this.ea=()=>this.j.g();this.ka=(c,d,e)=>this.j.x+this.M.x+this.I.x/2>=c.x+d.x-e.x/2&&this.j.x+this.M.x-this.I.x/2<=c.x+d.x+e.x/2&&this.j.y+this.M.y+this.I.y/2>=c.y+d.y-e.y/2&&this.j.y+this.M.y-this.I.y/2<=c.y+d.y+e.y/2;this.ra=c=>this.ka(c.j,c.M,c.I);this.j=new w(a,b);this.speed=new w;this.target=new w;this.D=new w(1,1);this.I=new w;this.M=new w}ia(){return!0}move(a){this.speed.x=O(this.speed.x,this.target.x,
this.D.x*a.o);this.speed.y=O(this.speed.y,this.target.y,this.D.y*a.o);this.j.x+=this.speed.x*a.o;this.j.y+=this.speed.y*a.o}ma(){}update(a,b){this.g&&(this.l?this.ia(a,b)&&(this.g=this.l=!1):(this.pa?.(a,b),this.move(b),this.i=!1))}};const Q=(a,b,c,d,e)=>{const f=[16,8,8,8][c];y(a,b,d+(16-f)/2,e-6,[32,48,56,48][c],48,f,8,[0,0,0,1][c])};function R(a,b,c){u(c.audio,c.s.R("ak"),.5);a.l=!0;a.m=0;b.ba+=100*(1+b.ga/10)|0}
class S extends P{constructor(){super();this.v=this.A=this.m=this.h=this.type=0;this.g=this.u=!1;this.D=new w(.15,.125)}ia(a,b){this.j.x-=a*b.o;return 1<=(this.m+=1/12*b.o)}pa(a,b){const c=2*Math.PI/60,d=2*Math.PI/150;let e=1,f=1;switch(this.type){case 1:this.h=(this.h+c*b.o)%(2*Math.PI);break;case 2:this.h=(this.h+.1*b.o)%4;break;case 5:this.speed.x=0,this.i||(this.speed.x=-.5),this.target.x=this.speed.x,e=2,f=.75;case 3:this.i&&3<=(this.h+=.1*e*b.o)&&(this.h=0,this.speed.y=-3.25*f);break;case 4:this.h=
(this.h+2/15*b.o)%2;this.target.x=this.speed.x=-.5;this.u&&!this.i&&(this.speed.y=-2.5);break;case 6:this.h=(this.h+d*b.o)%(2*Math.PI),this.target.x=this.speed.x=-.25,this.A=12*Math.sin(this.h),this.j.y=this.v+this.A}-8>(this.j.x-=a*b.o)&&(this.g=!1);this.u=this.i}Z(a,b,c){this.j=new w(a,b);var d=this.speed;d.x=0;d.y=0;d=this.target;d.x=0;d.y=0;d=this.M;d.x=0;d.y=0;this.v=b;this.type=c;this.g=!0;this.l=!1;b=1==c;c=6==c;this.I=new w(b?12:8,12);this.h=0;b||c||(this.target.y=2.5,this.M.y=2);this.h=(a/
16|0)%2*Math.PI*(c?.5:1);this.i=!0;this.u=!1;this.na=!c;this.D.y=c?.05:.15}P(a,b){var c=[0,1,0,2];if(this.g&&0!=this.type){var d=b.F("b"),e=Math.round(this.j.x),f=Math.round(this.j.y),g=1==this.type;if(this.l){if(b=.25+.75*this.m,a.fillColor(g?"#ffaaff":"#ff0000"),d=a.T,c=b*b*16|0,g=16*b|0,!(c>=g))for(e+=a.H.x,a=f+a.H.y,e|=0,a|=0,f=-g;f<=g;++f)if(b=f/g,!(0>=(b=Math.round(Math.sqrt(1-b*b)*g)))){var h=0;Math.abs(f)<c&&(h=f/c,h=Math.round(Math.sqrt(1-h*h)*c));0>=h?d.fillRect(e-b,a+f,2*b,1):(d.fillRect(e-
b,a+f,b-h,1),d.fillRect(e+h,a+f,b-h,1))}}else if(g)y(a,d,e-8,f-8+Math.round(2*Math.sin(this.h)),48,88,16,16);else{g=b.F("b"+String(this.type-1));var k=h=b=0,l=16;[2,3,5].includes(this.type)?(k=c[this.h|0],h=1<Math.abs(this.speed.y)?2*Math.sign(this.speed.y):0):4==this.type&&(l=14,h=2,b=-1);y(a,g,e-8,f-7,16*k,0,16,l);y(a,d,e-5+b,f-3+h+[0,1,-1][k],16+[0,8,0,24,16][this.type-2],112,8,[8,8,4,8,8][this.type-2]);4==this.type?(k=this.h|0,y(a,d,e-8,f+1,48,104+8*k,16,8)):6==this.type&&Q(a,d,(this.h/(2*Math.PI)*
32|0)%4,e-8,f-5)}}}};const T=[4,1],ta=[12,6],ua=[16,6],va=[32,12],U=[[.5,.3,.2],[.1,.5,.4]],wa=[[.4,.3,.2,.1],[.25,.25,.25,.25]];function xa(a,b){const c=1==a.l?-10:-8,d=a.i;I(S,a.u).Z(a.D()+8-16*(1-d)-8*d,b.V-16*a.g[d].aa()+c,a.l)}function ya(a){return!a.g[a.i].qa()&&!a.g[a.i=1-a.i].qa()}function za(a,b,c){if(0<a.A){if(ya(a))return!1;--a.A;xa(a,c);return!0}if(0<--a.G)return!1;a.i=1-a.i;if(ya(a))return!1;a.l=1==a.l?2+t(wa[0],wa[1],b):1;a.A=t(U[0],U[1],b);a.G=a.A+r(b,T,ta);xa(a,c);return!0}
class Aa{constructor(a){this.i=this.A=this.C=this.h=this.m=0;this.l=1;this.B=0;this.D=()=>16*this.width-32+this.h%16;this.width=(a.la/16|0)+5;this.g=Array(2);this.g[0]=new M(this.width,0);this.g[1]=new M(this.width,1,8);this.g[0].X=this.g[1];this.g[1].X=this.g[0];this.C=n(4,16);this.v=[];this.G=n(T[0],ta[0]);this.B=n(ua[0],va[0]);this.u=[]}update(a,b,c,d){for(var e of this.v)e.update(c,d);for(var f of this.u){f.update(c,d);e=f;var g=c,h=a,k=d;if(e.g&&h.da()&&!e.fa()&&!h.fa()){var l=1==e.type,m=e.j.x-
10,p=e.j.y+e.M.y+-6;!l&&h.ua(e)?R(e,h,k):!l&&N(h,m,p,m+20,p,g,k,1,1,-1)?(R(e,h,k),e=h,e.speed.y=-3,e.B=!0,e.j.y+=-2):e.ra(h)&&(g=h,l?(++g.ga,g.u=Math.min(1,g.u+.15),u(k.audio,k.s.R("ag"),.6)):V(g,k),l&&(e.l=!0,e.m=0))}this.$(f,c,d)}if(16<=(this.h+=c*d.o)){this.h-=16;for(var q of this.g)q.update(this.m,b);if(!(0<--this.C||(a=n(1,5),this.g[1].va()<=a/2+1))){c=this.g[0].aa();this.g[1].xa()||(c=this.g[1].aa());c+=n(3,5);f=[.75,.25];f=t(f,f,1);if(5==a)f=0;else if(c>=this.g[0].aa()+6||2>=a)f=1;q=this.D();
I(sa,this.v).Z(q,16*c,a,f);this.C=n(a+2,16);if(.5>Math.random())for(f=Math.min(3,n(1,a)),a=q+8-16*a/2+16*(Math.random()*(a-f+1)|0),c=d.V-16*c+(1==this.l?-10:-8),q=0;q<f;++q)I(S,this.u).Z(a+16*q,c,this.l)}if(!(za(this,b,d)||0<--this.B))for(a=.5>Math.random()?0:1,d=d.V-16*this.g[a].aa()-32,c=t(U[0],U[1],b),this.B=r(b,ua,va),b=0;b<c;++b)I(S,this.u).Z(this.D()+8-16*(1-a)-8*a+16*b,d,6);this.m=(this.m+1)%this.width}}P(a,b){const c=b.F("t");for(var d of this.v)d.P(a,c);for(d=1;0<=d;--d)this.g[d].P(a,c,this.m,
this.h);for(let e of this.u)e.P(a,b)}$(a,b,c){if(a.da()&&!a.fa()){for(let d of this.g)d.$(a,b,this.m,this.h,c);for(let d of this.v)d.$(a,b,c)}}};function Ba(a){a.g+=1;0>a.g?a.g=3:3<a.g&&(a.g=0)}function Ca(a,b,c){if(0>=b)Ba(a);else for(a.i+=c;a.i>=b;)a.i-=b,Ba(a)}class Da{constructor(){this.i=this.g=0;this.h=()=>this.g}};class Ea extends H{constructor(){super(...arguments);this.y=this.x=this.h=0}Z(a,b){this.x=a;this.y=b;this.h=1;this.g=!0}update(a,b){this.g&&(0>=(this.h-=1/30*b.o)?this.g=!1:this.x-=a*b.o)}P(a,b){this.g&&y(a,b,Math.round(this.x)-4,Math.round(this.y)-4,32+8*Math.round(3*(1-this.h)),72,8,8)}}function W(a){a.J.x=a.j.x+24+64*Math.sin((1-a.h)*Math.PI);a.J.y=a.j.y+3}function V(a,b){a.l=!0;u(b.audio,b.s.R("ad"),.6)}
class Fa extends P{constructor(a){super(64,a);this.v=this.C=0;this.m=!1;this.G=0;this.Y=!1;this.B=!0;this.h=this.A=0;this.N=10;this.u=1;this.ga=this.ca=this.ba=0;this.ua=b=>b.ka(this.J,new w,new w(16,8));this.oa=()=>this.A;this.sa=()=>this.u;this.ja=()=>this.ba;this.ta=()=>this.ga;this.D=new w(.15,.15);this.I=new w(12,12);this.M=new w(0,2);this.K=new Da;this.O=new Da;this.g=!0;this.J=new w;W(this);this.L=[]}pa(a,b){var c=1/180,d=0;0!=(F(b.input,"r")&1)?d=1:0!=(F(b.input,"l")&1)&&(d=-1);this.target.x=
1.5*d;this.target.y=4;d=F(b.input,"j");const e=0!=(d&1);this.Y&&!e&&(this.Y=!1);this.m=0<this.u&&!this.Y&&e;0<this.v&&3==d?(this.C=20,this.i=!1,this.v=0,u(b.audio,b.s.R("aj"),.6)):0==(d&1)&&(this.C=0);this.m?(this.u=Math.max(0,this.u-c*b.o),0<this.G?(this.G-=b.o,this.speed.y=Math.max(Math.min(this.speed.y-.3*b.o,2),-1.5)):!this.B&&.75<=this.speed.y?(this.speed.y=.75,this.target.y=this.speed.y):this.B&&(this.G=60,this.B=!1)):this.G=0;c=F(b.input,"t");0>=this.h&&3==c?(this.h=1,u(b.audio,b.s.R("aa"),
.6)):.5<this.h&&0==(c&1)&&(this.h=1-this.h);0<this.C&&(this.speed.y=-2.75,this.C-=b.o);0<this.v&&(this.v-=b.o);0<this.h&&(this.h-=1/60*b.o);0>this.speed.x&&0>=this.j.x-this.I.x/2?(this.j.x=this.I.x/2,this.speed.x=0):0<this.speed.x&&this.j.x+this.I.x/2>=b.la&&(this.j.x=b.la-this.I.x/2,this.speed.x=0);this.j.y>b.V&&(V(this,b),this.j.y=b.V);this.i?Ca(this.K,8-2*a,b.o):(c=5,-.5>this.speed.y?c=4:.5<this.speed.y&&(c=6),this.K.g=c);c=this.O.h();this.m&&(Ca(this.O,2,b.o),this.O.h()!=c&&0==c&&u(b.audio,b.s.R("ap"),
.6));c=this.m?6:8;d=this.m?1:a;(this.i||this.m)&&0>=(this.N-=d*b.o)&&(this.N+=c,I(Ea,this.L).Z(this.j.x-4,this.j.y+7));for(let f of this.L)f.update(a,b);this.i=!1;6<=(this.ca+=a*b.o)&&(this.ca-=6,this.ba+=1+this.ga/10|0);W(this)}ia(a,b){for(let c of this.L)c.update(a,b);return 60<=(this.A+=b.o)}ma(){this.i=!0;this.v=8;this.Y=!0;this.m=!1;this.B=!0}P(a,b){if(this.g){var c=Math.round(this.j.x)-8,d=Math.round(this.j.y)-7;b=b.F("b");for(var e of this.L)e.P(a,b);if(this.l){c=["#5555aa","#aaaaff","#ffffff"];
d=[7,5,3];b=this.A/60*64;for(var f=0;8>f;++f){var g=2*Math.PI/8*f;e=this.j.x+Math.cos(g)*b;var h=this.j.y+Math.sin(g)*b;for(var k=0;3>k;++k){a.fillColor(c[(k+(this.A/3|0)%3)%3]);let p,q=void 0;g=e;var l=h,m=d[k];const v=a.T;g+=a.H.x;l+=a.H.y;g|=0;l|=0;for(let z=-m;z<=m;++z)p=z/m,0>=(q=Math.round(Math.sqrt(1-p*p)*m))||v.fillRect(g-q,l+z,2*q,1)}}}else for(e=16*[0,1,0,2,0,0,1][this.K.h()],f=40+8*[0,0,0,0,1,0,1][this.K.h()],g=16*[0,1,0,2,1,0,2][this.K.h()],W(this),l=Math.round(this.j.x),m=Math.round(this.J.x),
h=Math.round(this.J.y),k=m-l,a.fillColor("#000000"),a.fillRect(l,h-1,k,3),a.fillColor("#aa5500"),a.fillRect(l,h,k,1),y(a,b,m-8,h-3,0,112,16,8),y(a,b,c,d,48,32,16,16),y(a,b,c,d+8,e,f,16,8),this.m?Q(a,b,this.O.h(),c,d):y(a,b,c,d-6,g,32,16,8),a.fillColor("#aa0000"),b=0;2>b;++b)a.fillRect(c+7+4*b,d+6,1,1)}}ya(a,b,c){this.g&&!this.l&&this.ka(new w(a+6,b+3),new w,new w(12,6))&&V(this,c)}};class Ga{constructor(){this.speed=1;this.ea=()=>this.y;this.y=-144}};const X=a=>{a=String(a);return"0".repeat(Math.max(0,6-a.length))+a};
class Ha{constructor(a){this.m=this.v=0;this.L=1;this.l=this.K=this.D=0;this.G=!1;this.h=0;this.i=1;this.O=!1;this.J=0;this.C=!0;this.A=.49;this.Y=!1;this.B=1;this.N=new Aa(a);this.g=new Fa(a.V-40);this.u=new Ga;a:{try{var b=Number(window.localStorage.getItem("__s"));break a}catch(c){}b=0}this.J=b}update(a){var b=1/30,c=1/60,d=this.C?.5:1;if(0<this.i)0>=(this.i-=b*d*a.o)&&2==this.h&&(this.i=1,this.O=!1,this.g=new Fa(a.V-40),this.N=new Aa(a),this.m=this.u.y=0,this.L=1,this.l=this.K=this.D=0,this.B=
1,this.h=0);else if(this.A=(this.A+c*a.o)%1,this.C)this.v=(this.v+.25*a.o)%48,3==F(a.input,"s")&&(u(a.audio,a.s.R("as"),.6),this.C=!1);else if(this.Y)if(2==this.h)3==F(a.input,"s")&&(u(a.audio,a.s.R("as"),.6),this.i=1,this.O=!0);else{if(0==this.h&&3==F(a.input,"p")&&(u(a.audio,a.s.R("as"),.6),this.G=!this.G),!this.G){0<this.l&&(this.l-=a.o);this.D+=a.o;4>this.K&&this.D>=1200*(this.K+1)&&(this.L=1+.25*++this.K,this.l=180,u(a.audio,a.s.R("au"),.5));this.m=O(this.m,this.L,1/60*(2*this.h+1));this.B=O(this.B,
this.g.sa(),1/60*a.o);this.N.update(this.g,this.D/10800,this.m,a);this.g.update(this.m,a);if(0==this.h&&this.g.fa()){this.h=1;this.L=0;b=this.J=Math.max(this.g.ja(),this.J);try{window.localStorage.setItem("__s",String(b))}catch(e){}}this.g.da()?(this.N.$(this.g,this.m,a),b=this.u,c=this.g.ea().y-a.V/2+24,d=b.y-c,16<=Math.abs(d)&&(b.y=c+16*Math.sign(d)),b.y=Math.min(0,b.y),this.v=(this.v+(.25+.125*this.m)*a.o)%48):this.h=2}}else b=this.u,b.speed=Math.min(4,b.speed+.1*a.o),0<=(b.y+=b.speed*a.o)?(b.y=
0,a=!0):a=!1,this.Y=a}ha(a,b){var c=b.F("fy");a.moveTo();var d=b.F("b");y(a,b.F("s"));a.move(0,-Math.round(.25*this.u.ea()));a.fillColor("#ffffff");a.fillRect(0,80,a.width,16);var e=-Math.round(this.v);for(var f=0;f<a.width/48+2;++f)y(a,d,e+48*f,64,0,56,48,16);a.fillColor("#0055aa");a.fillRect(0,112,a.width,a.height-112);for(e=0;e<a.width/8;++e)y(a,d,8*e,96,48,56,8,16);a.moveTo();a.moveTo(0,-Math.round(this.u.y));1==this.h&&30>this.g.oa()&&a.move(4*(2*Math.random()-1)|0,4*(2*Math.random()-1)|0);this.N.P(a,
b);this.g.P?.(a,b);a.moveTo();if(0<this.h)if(c=b.F("g"),e=b.F("fy"),f=a.width/2,d=f-60,2==this.h&&(a.fillColor("#000000aa"),a.fillRect(),A(a,e,"SCORE: "+X(this.g.ja()),f,80,-1,0,1),A(a,e,"BEST: "+X(this.J),f,96,-1,0,1),.5<=this.A&&A(a,e,"PRESS ENTER",f,a.height-24,-1,0,1)),e=this.g.oa()/60,1==this.h&&.5>e){e=2*(.5-e);e*=e;f=a.T;var g=1+16*e;for(var h=0;h<c.height;++h)f.drawImage(c,0,h,c.width,1,d+32*Math.sin(8*Math.PI/c.height*h+4*e*Math.PI)*e|0,32+h*g|0,c.width,1)}else y(a,c,d,32);else if(!this.C){d=
["#aaff00","#ffff55","#ffaa00","#aa0000","#000000"];e=["#55aa00","#aaaa00","#aa5500","#550000","#000000"];f=["#000000","#555555"];g=b.F("b");h=b.F("fw");a.fillColor("#00000033");a.fillRect(0,0,a.width,16);y(a,g,a.width/2-8,1,48,80,16,8);A(a,h,X(this.g.ja()),a.width/2,8,-1,0,1);y(a,g,a.width-40,4,32,88,8,8);A(a,h,"#"+String(this.g.ta()),a.width-31,4,-1);y(a,g,2,4,40,88,8,8);for(g=0;2>g;++g)a.fillColor(f[g]),a.fillRect(12+g,5+g,40-2*g,7-2*g);f=38*this.B|0;g=3-Math.round(3*this.B);1<f&&(a.fillColor(e[g]),
a.fillRect(13,6,f,5),a.fillColor(d[g]),a.fillRect(13,6,f-1,4));this.G?(a.fillColor("#00000055"),a.fillRect(),A(a,c,"PAUSED",a.width/2,a.height/2-4,-1,0,1)):0<this.l&&(60<this.l||0==(this.l/4|0)%2)&&A(a,c,"SPEED UP!",a.width/2,32,-1,0,1)}if(this.C){c=b.F("l");d=b.F("fy");b=b.F("fw");e=a.width;f=a.height;a.fillColor("#00000055");a.fillRect();g=0;0<this.i&&(g=this.i*a.height);a.move(0,Math.round(g));g=e/2-c.width/2;h=(this.A+this.i)*Math.PI*2;var k=2*Math.PI;const p=a.T;g+=a.H.x;var l=12+a.H.y;for(let q=
0;q<c.width;++q){var m=h+q/c.width*k;m=Math.round(4*Math.sin(m));p.drawImage(c,q|0,0,1,c.height,g+q|0,l+m|0,1,c.height)}a.fillRect(24,48,a.width-48,56);A(a,d,"CONTROLS: ",a.width/2,52,0,0,1);A(a,b,"+;/< OR A/D: MOVE",28,62);A(a,b,"+= OR W: JUMP/FLY",28,72);A(a,b,"+SPACE: ATTACK",28,82);A(a,b,"+ENTER: PAUSE",28,92);.5<=this.A&&A(a,d,"PRESS ENTER",e/2,f-28,-1,0,1);A(a,d,"$2023 JANI NYK%NEN",e/2,f-9,-1,0,1);a.moveTo()}0>=this.i||(b=this.i,this.O||(b=1-b),a.fillColor("#000000"),da(a,Math.hypot(a.width/
2,a.height/2)*b*b|0))}};const Ia=a=>{let b=[],c;for(let d=0;d<a.length;++d){c=a[d].length/2|0;b.push(Array(c));for(let e=0;e<c;++e)b[d][e]=parseInt(a[d].substring(2*e,2*e+2),16)}return b},Ja=(a,b,c,d,e,f)=>{let g,h;for(let k=c;k<c+8;++k)for(let l=b;l<b+8;++l){h=k*d+l;g=f[e[a.data[4*h]/85|0]];for(let m=0;4>m;++m)a.data[4*h+m]=g[m]}};
var Y=(a,b)=>{var c=Ka;const d=document.createElement("canvas"),e=d.getContext("2d");d.width=a.width;d.height=a.height;e.drawImage(a,0,0);const f=e.getImageData(0,0,a.width,a.height),g=d.width/8|0,h=d.height/8|0;a=a.width;c=Ia(c);let k,l=0;for(let m=0;m<h;++m)for(let p=0;p<g;++p)l>=b.length||(k=(b[l]??"0000").split("").map(q=>parseInt(q,32)),Ja(f,8*p,8*m,a,k,c),++l);e.putImageData(f,0,0);return d},Z=(a,b,c,d,e)=>{const f=document.createElement("canvas"),g=f.getContext("2d");f.width=a;f.height=b;d(g,
a,b,c);if(e){g.drawImage(f,0,0);c=g.getImageData(0,0,f.width,f.height);a*=b;for(b=0;b<a;++b){for(d=0;3>d;++d)c.data[4*b+d]=e[d];c.data[4*b+3]=192>c.data[4*b+3]?0:255}g.putImageData(c,0,0)}return f};const Ka="00000000 000000ff ffffffff ffff00ff aaff00ff 55aa00ff aa5555ff ffaa55ff ffffaaff aa0000ff ff5500ff aaaa55ff aaaaaaff 555555ff aa5500ff 5555aaff aaaaffff 0055aaff 55aaffff 005500ff aaffffff ff0000ff aaffaaff 55aa55ff 550055ff aa55aaff ffaaffff".split(" "),La="1540 1540 6670 0880 1E70 19A0 19A0 19A0 1670 1670 1B80 1B80 1E70 19A0 19A0 19A0 1670 1670 1540 1540 1670 1B80 1B80 1B80 6660 6660 1540 1540 1670 1670 1L30 1970 1FG0 1FG0 1FG0 1FG0 1FG0 1FG0 1DC0 1DC0 1B80 1B80 1B80 1B80 1B80 1B80 1DC0 1DC0 1B80 1B80 1B80 1B80 1FG0 1FG0 1FG0 1FG0 H2I0 H2I0 H2I0 H2I0 H2I0 H2I0 0HI2 1780 H2I0 H2I0 H2I0 H2I0 H2I0 H2I0 0HI2 1780 1J50 1J50 1J50 1J50 0B80 0B80 0B80 0B80 1540 1540 1540 1E70 1E70 1E70 3000 3000 1540 1540 1540 0K20 1QP0 14C0 1QP0 1OP0 1DC0 1DC0 1DC0 1DC0 1DC0 1DC0 1OP0 1OP0 1DC0 1DC0 1DC0 1DC0 1DC0 1DC0 1620 1620 1DC0 12C0 1020 1020 1020 1020 1620 1620".split(" "),
Ma=(a,b)=>{B(b.s,"fw",Y(a,Array(64).fill("0002")));B(b.s,"fy",Y(a,Array(64).fill("0003")))},Na=(a,b,c,d)=>{const e=d[0];b=(g,h,k,l,m=0,p=0)=>{a.drawImage(e,8*g,8*h,8,8,8*k+m,8*l+p,8,8)};a.fillStyle="#000000";a.translate(8,0);for(c=0;2>c;++c)for(a.drawImage(e,12,0,4,8,4,32*c,4,8),a.drawImage(e,8,0,4,8,56,32*c,4,8),d=0;6>d;++d){1==c&&(0==d?b(0,2,d+1,5):5==d?b(1,2,d+1,5):b(5,3,d+1,5));if(0==c)for(var f=0;3>f;++f)b(0,1,d+1,f+1);b(0,0,d+1,4*c);b(2,0,d+1,4*c+1,0,-2)}for(c=1;4>c;++c)a.drawImage(e,8,8,2,
8,8,8*c,2,8),a.drawImage(e,14,8,2,8,54,8*c,2,8);b(0,2,9,5);b(1,2,10,5);for(c=0;2>c;++c)b(0,0,9+c,4),b(2,0,9+c,5,0,-2);a.fillRect(8,6,1,2);a.fillRect(55,6,1,2);a.fillRect(8,38,1,2);a.fillRect(55,38,1,2);a.fillRect(72,38,1,2);a.fillRect(87,38,1,2);for(c=0;2>c;++c){for(d=0;4>d;++d)b(0,1,9+d,2+c);for(f=0;2>f;++f)d=f*c*2-(c+f),b(4,2+c,9+f+2*c,2+d),b(2+c,2,9+f+2*c,1+d),b(2+c,3,9+f+2*c,2+d),b(c,3,9+f+2*c,2+d,0,-1)}for(c=0;2>c;++c)b(4,0,11+c,4),b(4,1,11+c,5),b(3,0,11+c,4,1,5),b(6,3,13+c,7),b(7,3,15+c,7);
for(c=0;2>c;++c)b(7,7,20,1+c,4,1);b(7,8,20,3,4,1);a.drawImage(e,0,72,32,8,152,5,32,8);for(c=0;2>c;++c)a.fillRect(160+11*c,4,5,1);for(c=0;4>c;++c)b(2,1,15,5-c),b(3,1,16,5-c);a.fillStyle="#aaaa55";a.fillRect(122,16,12,1);a.drawImage(e,40,16,24,8,116,24,24,8);for(c=0;4>c;++c)b(6,0,14+c,0),b(6,1,14+c,1);for(c=0;2>c;++c)b(5+2*c,0,13+5*c,0),b(5+2*c,1,13+5*c,1);a.translate(-8,0);a.drawImage(e,0,80,24,16,0,48,24,16);a.drawImage(e,0,80,8,16,24,48,8,16);a.drawImage(e,16,80,8,16,32,48,8,16);b(3,10,1,9);b(4,
10,2,9);b(4,10,3,9);b(5,10,4,9)},Oa=(a,b,c,d)=>{const e=[[32,16,0],[84,40,1],[64,8,1],[112,20,0],[8,36,1],[48,48,0],[180,12,0],[180,64,1],[104,64,0],[18,62,1],[32,80,0],[64,72,1],[128,84,1],[176,88,0]],f=(g,h,k)=>{for(let m=-k;m<=k;++m){var l=m/k;l=Math.round(Math.sqrt(1-l*l)*k);0>=l||a.fillRect(g-l|0,h+m|0,2*l,1)}};a.fillStyle="#55aaff";a.fillRect(0,0,b,c);a.fillStyle="#aaffff";f(b-48,36,28);a.fillStyle="#55aaff";f(b-66,26,26);for(let g of e)a.drawImage(d[0],24,88+4*g[2],4,4,g[0],g[1],4,4)},Pa=(a,
b,c)=>{a.font="bold 18px Arial";a.textAlign="center";a.fillStyle="#ffffff";a.fillText("Game Over!",b/2,c-2)},Qa=(a,b,c)=>{a.font="bold 19px Arial";a.textAlign="center";a.fillStyle="#ffffff";a.fillText("Knight Dreams",b/2,c-6)},Ra=(a,b,c,d)=>{for(b=-1;2>=b;++b)for(c=-1;1>=c;++c)a.drawImage(d[0],c+1,b+1);a.drawImage(d[1],1,1)},Sa=a=>{var b=a.audio.W([96,7,112,6,160,5,256,3],.6,"sawtooth",2,6);a.s.U.set("aj",b);b=a.audio.W([128,4,192,4,320,10],.4,"square",0,4);a.s.U.set("ag",b);b=a.audio.W([96,3],.7,
"sawtooth",0,2);a.s.U.set("ap",b);b=a.audio.W([96,8,144,8,96,10,64,16],.5,"square",2,6);a.s.U.set("ad",b);b=a.audio.W([224,20],.5,"sawtooth",1,6);a.s.U.set("as",b);b=a.audio.W([320,6,192,4,80,10],.55,"square",1,4);a.s.U.set("ak",b);b=a.audio.W([96,4,128,8,256,6],.4,"square",2,4);a.s.U.set("aa",b);b=a.audio.W([96,6,192,4,128,4,192,6,256,16],.5,"square",1,6);a.s.U.set("au",b);b=a.audio.W([128,8],.5,"sawtooth",0,1);a.s.U.set("ac",b)},Ta=a=>{const b=[["12M0","1NM0"],["12K0","1IK0"],["12Q0","16Q0"],["12C0",
"1DC0"],["13A0","19A0"]];var c=a.s.F("_b"),d=a.s.F("_f");Ma(d,a);d=Y(c,La);B(a.s,"b",d);B(a.s,"t",Z(256,128,[d],Na));B(a.s,"s",Z(192,144,[d],Oa));d=Z(112,20,[],Pa,[255,85,0]);const e=Z(112,20,[],Pa,[85,0,0]),f=Z(132,24,[],Qa,[255,85,0]),g=Z(132,24,[],Qa,[85,0,0]);B(a.s,"g",Z(114,22,[e,d],Ra));B(a.s,"l",Z(134,26,[g,f],Ra));d="010101111111".split("").map(h=>Number(h));c=Z(48,16,[c],(h,k,l,m)=>{h.drawImage(m[0],0,96,48,16,0,0,48,16)});for(let h=0;5>h;++h)B(a.s,"b"+String(h+1),Y(c,d.map(k=>b[h][k])));
Sa(a)};function Ua(a,b,c,d,e){const f=["#000000","#ffffff","#000000"];b-=d/2;c-=e/2;a.fillColor("#00000055");a.fillRect(b+4,c+4,d,e);for(let g=0;g<f.length;++g)a.fillColor(f[g]),a.fillRect(b+g,c+g,d-2*g,e-2*g)}
class Va{constructor(){this.g=0;const a=["ENABLE AUDIO? PRESS","ENTER TO CONFIRM.","","WARNING: AUDIO DOES","NOT WORK ON SAFARI!"];this.width=Math.max(...a.map(b=>b.length));this.height=a.length}update(a){if(3==F(a.input,"u")||3==F(a.input,"d"))this.g=1-this.g;if(3==F(a.input,"s")){a.audio.toggle(0==this.g);var b=a.S;b.g=b.S.get("g");u(a.audio,a.s.R("ac"),.6)}}ha(a,b){b=[b.F("fw"),b.F("fy")];a.clear("#0055aa");var c=7*this.width,d=10*this.height;Ua(a,a.width/2,48,c+12,d+12);A(a,b[0],"ENABLE AUDIO? PRESS\nENTER TO CONFIRM.\n\nWARNING: AUDIO DOES\nNOT WORK ON SAFARI!",
a.width/2-c/2,48-d/2,-1,2);Ua(a,a.width/2,112,40,32);for(let e=0;2>e;++e)d=e==this.g,c=(d?"&":" ")+["YES","NO"][e],A(a,b[Number(d)],c,a.width/2-18,102+10*e,-1,0)}};window.onload=()=>{var a=new la,b=a.h;b.audio.wa=.4;E(b.input,"l",["ArrowLeft","KeyA"]);E(b.input,"r",["ArrowRight","KeyD"]);E(b.input,"u",["ArrowUp","KeyW"]);E(b.input,"d",["ArrowDown","KeyS"]);E(b.input,"s",["Enter","Space"]);E(b.input,"j",["ArrowUp","KeyW"]);E(b.input,"t",["Space"]);E(b.input,"p",["Enter"]);var c=b.S,d=new Ha(b);c.S.set("g",d);c.g=d;c=b.S;d=new Va;c.S.set("a",d);c.g=d;C(b.s,"_f","f.png");C(b.s,"_b","b.png");a.u=Ta;G(a,0)};
</script>
</body>
</html>
