<head><meta name="viewport" content="width=device-width, user-scalable=no" /><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /><style>#c,body{touch-action:none}body{margin:0;background-color:#111;display:flex;justify-content:center;align-items:center}#c{image-rendering:pixelated;display:block}</style></head><canvas id="c" width="600" height="400"></canvas><script>'use strict';(() => {const aa=a=>{let c=performance.now(),b=0;const g=e=>{b=Math.min((e-c)/1E3,.1);a(0,b)&&requestAnimationFrame(g);c=e};g(c)};const n="#AA7939 #EAD0AE #CAA26D #8A5712 #6A3D00 #AA8E39 #EADBAE #CAB36D #8A6C12 #6A5000 #AA5939 #EABFAE #CA876D #8A3412 #6A1E00 #000 #666 #FFF".split(" "),q=(a=[0,0],c=1,b=0,g=[])=>[a,c,b,g,0,1,[],[],null,2*(Math.random()-.5)],t=(a,c=24,b=24)=>{c=new OffscreenCanvas(c*a[1],b*a[1]);b=c.getContext("2d");b.translate(c.width/2,c.height/2);r(b,a);a[8]=c},r=(a,c,b=!0)=>{a.save();a.globalAlpha=Math.max(0,c[5]);b||a.translate(c[0][0],c[0][1]);a.scale(c[1],c[1]);x(a,c);for(b=0;b<c[6].length;b++)r(a,c[6][b],!1);a.restore()},z=(a,c)=>{for(let b=a[6].length-1;0<=b;b--){const g=a[6][b],e=c(g,b);e&&e&4&&a[6].splice(b,1);if(e&&e&8)break;g[6].length&&z(g,c)}},A=(a,c)=>{a[7].push(c)},D=(a,c)=>{z(a,b=>b===c?12:0)},x=(a,c)=>{let b=0;for(;b<c[3].length;){a.beginPath();a.fillStyle=n[parseInt(c[3][b])];a.moveTo(c[3][b+1]*(c[4]&4?-1:1),c[3][b+2]*(c[4]&8?-1:1));for(b+=3;"number"===typeof c[3][b];)a.lineTo(c[3][b]*(c[4]&4?-1:1),c[3][b+1]*(c[4]&8?-1:1)),b+=2;a.fill()}},E=(a,c,b,g)=>{a.save();a.globalAlpha=Math.max(0,
c[5]);g?a.translate(c[0][0]-g[0][0]+a.canvas.width/2,c[0][1]-g[0][1]+a.canvas.height/2):a.translate(c[0][0],c[0][1]);if(c[8])a.rotate(c[2]),a.drawImage(c[8],-(c[8].width/2),-(c[8].height/2));else for(a.scale(c[1],c[1]),a.rotate(c[2]),x(a,c),g=0;g<c[6].length;g++)E(a,c[6][g],b);a.restore();for(g=0;g<c[7].length;g++)c[7][g](c,b,a)};const F=(a,c)=>[a[0]+c[0],a[1]+c[1]],G=(a,c)=>Math.atan2(a[0]-c[0],a[1]-c[1]),H=a=>`${`0${Math.floor(a/60)}`.slice(-2)}:${`0${Math.floor(a%60)}`.slice(-2)}`,J=(a,c=0)=>Math.floor(Math.random()*(a-c)+c),ba=a=>[a[0]+400*(Math.random()-.5),a[1]+400*(Math.random()-.5)],K=a=>new Promise(c=>setTimeout(c,a));const ca=()=>{const a=document.querySelector("#c"),c=a.transferControlToOffscreen(),b=URL.createObjectURL(new Blob([document.querySelector("script").innerHTML],{type:"text/javascript"})),g=new Worker(b),e=document.addEventListener,k=window.addEventListener;let d=0,f=0;const h=()=>{const m=480*Math.max(.55,Math.min(1.5,window.innerWidth/window.innerHeight)),l=window.innerHeight/480;a.setAttribute("width",m);a.setAttribute("height",480);a.style.height=`${480*l}px`;a.style.width=`${m*l}px`;d=(window.innerWidth-
m*l)/2;f=(window.innerHeight-480*l)/2;g.postMessage({size:[m,480]});window.onresize=window.onresize||h};g.postMessage({canvas:c},[c]);(()=>{const m={keys:{},V:null},l=v=>u=>{m.keys[u.key]!=v&&(m.keys[u.key]=v,g.postMessage({input:m}))},p=v=>async u=>{m.V=v?[u.clientX-d,u.clientY-f]:null;g.postMessage({input:m})};k("keydown",l(!0));k("keyup",l(!1));e("pointerend",p(!1));e("pointercancel",p(!1));e("pointerdown",p(!0))})();h()};const ha=()=>{let a,c=!1;const b={keys:{},da:[]},g=async()=>{await ea(a);await fa(a,b)};self.onmessage=async({data:e})=>{if(e.canvas){if(c)return;a=e.canvas;g();c=!0}e.input&&Object.assign(b,e.input,{t:Math.random()});e.size&&a&&(a.width=e.size[0],a.height=e.size[1])}};const ia=a=>c=>{c[0][0]+=.01*Math.cos(a.time);c[0][1]+=.01*Math.sin(a.time)},ja=()=>(a,c)=>{a[5]=Math.max(0,a[5]-c/2)},ka=()=>{var a=0;return(c,b)=>{c[5]=Math.min(1,a+=2*b)}},la=(a,c)=>{let b=a.input.t;return()=>{a.input.t!==b&&(b=a.input.t,c(a.input))}},L=(a,c=[0,0])=>b=>{b[0]=F(a.g.anchor[0],c)};const M=(a,c=n[3])=>{const b=a.canvas.width,g=a.canvas.height;a.fillStyle=n[5];a.beginPath();a.roundRect(0,0,b,g,4);a.fill();a.fillStyle=n[4];a.beginPath();a.roundRect(0,1,b,g-1,4);a.fill();a.fillStyle=c;a.beginPath();a.roundRect(3,3,b-6,g-6,4);a.fill()},N=(a,c,b,g)=>{a.font="13px serif";a.textAlign="left";a.fillStyle=n[14];g.forEach((e,k)=>{a.fillText(e,c+1,b+2+14*k)});a.fillStyle=n[1];g.forEach((e,k)=>{a.fillText(e,c,b+14*k)})},ma=(a,c,b,g,e)=>{a.fillStyle=n[4];a.fillRect(10,c,b,g);e&&(a.strokeStyle=
n[17],a.strokeWidth=2,a.beginPath(),a.rect(10,c,b,g),a.stroke())},O=(a,c,b)=>{a.fillStyle=n[2];a.font="10px serif";a.textAlign="left";b.forEach((g,e)=>{a.fillText(g,10,c-14*e)})};const na=["17",-2,1,2,1,0,-4],oa=["3",-3,-5,0,-9,3,-5,2,4,0,5,-2,4,"0",-2,-5,0,-8,2,-5,1,4,-1,4,"0",-1,-2,0,-12,1,-2,"6",-1,-5,-5,-3,-6,-1,0,-4,6,-1,5,-3,1,-5,"7",-6,-1,0,-4,6,-1,0,-3,"6",-1,-2,-4,-1,-5,0,0,-1,5,0,4,-1,1,-2,"7",-5,0,5,0,0,-1,"6",-1,1,-3,1,-4,2,0,3,4,2,3,1,"7",-4,2,0,1,4,2,0,3,"3",0,2,-3,3,-3,4,3,4,3,3,"0",-3,3,3,3,0,2],pa=["5",-1,-1,-5,-3,-5,-2,-8,-3,-12,0,-8,2,-4,1,-1,1,-4,2,-6,5,-6,8,-1,5,0,2,0,5,1,4,3,6,7,6,5,2,2,0,6,0,6,-1,9,-4,4,-5,1,-3,1,-7,-2,-10,-4,-6,-3,-4,-4,-4,"7",-2,-10,
-1,-6,-2,-4,-1,-4,0,-1,1,-3,1,-7,"7",1,-1,5,-2,5,-3,9,-4,6,-1,6,0,2,0,"7",2,0,2,2,4,4,3,6,7,6,5,2,"7",-1,1,-3,3,-5,5,-6,8,-6,5,-4,2,"7",-1,1,-5,-1,-5,0,-9,-1,-12,0,-8,2],qa=["9",-11,-6,-10,-8,-11,-10,-9,-10,-8,-11,-7,-10,-5,-11,-6,-8,"9",1,-7,0,-8,-1,-5,0,-3,1,-4,3,-4,2,-6,3,-7,2,-7,2,-8,"3",-9,-6,-10,-6,-11,-5,-11,0,-10,1,-7,1,5,2,-4,-2,"4",-11,5,-6,11,0,4,"1",-9,-9,0,-9,0,-1,-9,-1,"2",-9,-5,-9,-1,0,-1,0,-6,-4,-4,-7,-6,"4",-8,0,-9,-1,0,-1,"4",-5,1,12,2,11,6,-4,7,"3",-4,1,11,1,12,2,12,5,11,6,2,6,
-4,6,"1",-5,-1,-11,5,-6,10,0,4,"2",-3,1,-5,4,-7,5,-7,6,-9,7,-6,10,0,4,"11",0,5,-1,6,-1,7,0,8,1,8,2,7,2,6,1,5,"12",0,5,0,6,1,7,2,7,1,8,0,8,-1,7,-1,6,"4",8,6,11,2,9,6,"4",7,1,6,5,8,1,"4",3,6,5,1,4,6],ra=["4",-12,9,-11,11,-10,11,-9,9,-10,2,5,1,-10,0,"3",5,-2,-10,-2,-12,0,-12,9,-11,10,-10,10,-9,9,-9,1,5,1,"4",-9,-6,-8,-4,3,-4,2,-6,"4",-9,9,-12,6,-9,8,"4",-12,1,-9,4,-12,2,"4",-6,-2,-9,1,-5,-2,"3",2,-8,-8,-8,-9,-7,-9,-6,-8,-5,2,-5,"14",1,-4,4,0,10,-1,11,-4,"4",-5,1,-1,-2,-4,1,"12",1,-8,4,-11,8,-11,11,-8,
11,-4,8,-1,4,-1,1,-4,"13",1,-8,3,-4,6,-6,8,-5,11,-8,11,-4,8,-1,4,-1,1,-4,"4",0,2,0,-9,-2,-9,-1,2,"3",2,2,4,8,10,4,"1",2,2,8,0,10,4,4,7,"2",8,0,8,3,4,4,2,2,4,7,10,4,"3",0,3,-2,5,-1,6,1,4,"3",0,6,1,5,2,7,1,8,"4",-8,-8,-5,-5,-7,-8,"4",-2,-5,-4,-8,-1,-5,"1",5,-9,7,-3,8,-3,6,-10,"3",6,-10,7,-10,8,-4,8,-3,"8",7,7,9,7,9,4,10,6,12,5,11,7,11,9,10,9,8,11,8,8,"8",-4,-6,-3,-4,-5,-3,-3,-3,-3,-1,-1,-3,1,-2,0,-4,1,-6,-1,-5,-2,-7,-2,-5],sa=["2",-7,10,-7,4,-6,4,-5,10,"2",-2,10,-2,4,-1,4,0,10,"3",-12,-4,-11,-2,-1,
-2,10,-3,"0",9,-9,-11,-9,-12,-8,-12,-4,-11,-3,10,-3,"0",-8,9,-9,10,-9,11,-8,12,5,12,10,11,10,9,"3",-9,10,-8,11,10,11,6,12,1,12,-8,12,-9,11,"2",-12,-8,-11,-9,9,-9,3,-8,0,-9,1,-8,-5,-8,-7,-9,-6,-8,"3",5,-4,7,1,12,-3,"6",5,-4,10,-6,12,-3,7,0,"7",6,-2,8,-2,9,-3,11,-4,12,-3,7,0,"3",3,7,11,9,12,2,"6",4,1,12,2,11,8,3,7,"7",4,4,7,6,9,5,10,6,11,6,12,2,11,8,3,7,4,1,"9",9,0,10,-1,11,0,10,1,"9",10,-8,11,-7,12,-8,11,-9,"9",11,-7,11,-6,12,-6,12,-7,"3",-2,-5,-1,-4,1,-6,0,-7,"3",-2,-6,-4,-4,-5,-5,-3,-7,"3",1,-7,
2,-5,3,-5,2,-7,"3",-8,-7,-10,-5,-9,-3,-9,-5,"3",-8,-7,-7,-5,-9,-2,-8,-5,"3",-7,-5,-8,-2,-10,-1,"11",-8,-7,-8,-5,-11,3,-9,-5,"12",-8,-7,-11,3,-10,2,-8,-5,"4",-2,-5,-1,-5,0,-6,1,-6,-1,-4,"4",-5,-5,-4,-5,-3,-6,-2,-6,-4,-4,"4",1,-7,2,-6,3,-5,2,-5,"5",7,-4,7,-3,8,-3,8,-4,"8",1,-4,2,-2,0,-2,2,0,-1,1,2,1,3,4,3,1,6,2,4,0,7,-2,4,-1,4,-4,3,-2,"8",9,-12,11,-11,11,-10,10,-7,8,-7,7,-9,5,-10,6,-12,8,-11],ta=["3",-5,0,0,-5,5,0,0,1,"2",-5,0,-2,-2,-2,-1,-1,-3,0,-4,2,-2,2,-1,3,-1,5,0,0,-6],ua=["17",-10,3,0,-4,12,3,
0,0,"17",-2,-1,-5,-3,-10,0,-5,-2,"17",-1,9,7,7,12,9,7,8,"17",11,-8,7,-10,4,-8,7,-9],P=[[],["3",-1,-12,0,-7,1,-3,4,0,7,0,12,1,12,-1,"0",12,0,7,-1,4,-1,1,-5,0,-9,-1,-12,12,-12,"6",2,0,5,1,9,1,5,2],["0",0,12,1,6,1,2,4,1,8,-1,12,0,12,12,"6",-1,4,0,6,-1,2],["3",0,-12,0,-10,1,-3,2,-4,"0",0,-12,1,-6,-1,4,0,7,0,12,12,12,12,-12,"3",-1,4,-1,5,0,8,0,7,"6",-2,6,-1,9,-2,8,"6",-1,-9,-1,-7,0,-5],["0",-12,0,-4,1,-2,6,1,8,1,12,-12,12,"6",-3,1,-2,4,-2,2],["3",0,-12,1,-3,2,-6,"0",-12,0,-8,1,-5,5,-1,6,1,10,1,12,-12,
12,"3",0,-2,0,-1,1,2,4,3,8,1,12,1,12,-1,"0",0,-12,1,-6,0,-2,1,1,4,2,8,0,12,0,12,-12,"6",-2,-9,-1,-7,-3,-4,-2,-7,"6",7,6,8,3,10,3,8,4,"6",-5,1,-4,4,-2,4,-4,3],["0",-12,0,-4,1,6,-1,12,0,12,12,-12,12],["3",-2,-8,-2,-5,1,4,"0",-12,0,-5,1,-1,-2,-2,-8,0,-12,12,-12,12,12,-12,12,"6",-8,-1,-4,-2,-3,-5,-5,-3,"6",-3,-9,-4,-6,-6,-6,-4,-7],["3",-12,1,-5,0,-3,-2,-1,-2,-1,-7,0,-10,-12,-1,"0",-12,0,-5,-1,-2,-3,-1,-8,0,-10,0,-12,-12,-12,"6",-6,2,-2,1,0,-2,-1,2,"6",-9,4,-4,4,-2,3,-4,5],["3",-12,1,-6,2,1,0,7,0,10,1,
12,1,12,-1,0,-3,-12,-1,"0",-12,0,-5,1,2,-1,7,-1,10,0,12,0,12,-12,-12,-12,"6",-9,3,-3,4,3,3,-2,5,"6",6,1,9,2,11,2,9,3],["3",2,-7,2,-3,4,1,6,0,8,-3,8,-4,5,-3,"3",-12,2,-12,4,-7,3,-2,5,2,8,1,5,-2,2,-7,1,"0",0,-12,-1,-6,-1,-3,1,-1,4,2,8,1,12,0,12,12,0,12,1,6,-2,3,-7,2,-12,3,-12,-12,"0",2,-7,2,-4,4,-1,6,-1,8,-4,"6",2,-11,3,-8,6,-7,3,-9,"6",1,-8,0,-5,1,-3,"6",-10,5,-6,5,-4,8,-6,6],["3",-12,0,-12,1,-4,2,-2,7,0,11,0,-2,"0",-12,0,-4,1,-2,6,0,10,0,12,12,12,12,-12,-12,-12,"6",-8,3,-5,4,-4,8,-6,5,"6",-11,3,-8,
4,-7,6,-9,4],["3",1,2,-1,5,0,10,1,4,"0",-12,-12,-12,12,0,12,0,7,1,2,0,-3,0,-12,"6",2,6,1,10,1,8,"6",2,-7,1,-10,2,-5],["3",12,0,12,1,8,2,7,6,3,7,0,12,0,1,"0",12,0,8,1,7,4,3,5,0,11,0,12,-12,12,-12,-12,12,-12,"6",5,9,8,8,9,4,9,9],["0",0,-12,1,-5,5,-4,8,-1,12,0,12,12,-12,12,-12,-12,"6",3,-6,6,-5,8,-2,7,-6,"6",2,-7,6,-8,5,-9],["0",12,-12,12,12,-12,12,-12,-12]],va=["3",-12,-3,-11,1,-7,4,-6,4,-3,5,-2,4,-2,5,1,4,1,5,6,3,7,4,8,3,10,4,11,-6,7,-7,7,-6,5,-6,4,-5,3,-6,2,-5,0,-4,-2,-6,-4,-4,-6,-6,-10,-5,-11,-3,
"7",-10,-3,-6,1,-8,1,-11,-2,-10,1,-7,3,-5,1,-8,-3,-6,-3,-7,-2,-5,-3,-6,-5,-9,-4,"7",-6,-1,-2,-5,-1,-4,-1,2,-3,3,-2,-4,-5,-1,-4,1,"7",0,-3,-1,4,1,3,1,-4,"7",3,-5,2,-2,2,4,4,3,6,2,3,2,"7",5,-5,4,-3,8,1,7,1,4,-1,7,3,9,1,5,-4,7,-4,7,-2,8,-3,7,-5,"7",-1,2,-3,4,-6,3,-3,0,-4,2,"7",8,-6,9,0,10,0,10,-5,"7",10,1,8,2,9,3,"6",-10,-3,-8,-4,-6,-4,-5,-3,-6,-5,-9,-4,"6",-11,-2,-9,1,-7,2,-6,1,-8,1,"6",-6,-1,-2,-4,-1,-2,-1,-4,-2,-5,"6",-3,0,-5,3,-6,3,"6",1,-4,-1,4,0,-3,"6",2,-2,3,-3,3,-5,"6",3,2,3,3,6,2,"6",4,-3,5,
-4,7,-5,5,-5,"6",5,-4,8,1,9,1,"6",4,-1,7,2,8,1,7,1,"6",8,-6,9,-5,10,-2,10,-5];const V=((a,c=2.5)=>a.map(b=>{b=q([0,0],c,0,b);t(b);return b[8]}))([["13",-9,1,-12,3,-12,12,12,12,10,3,8,2,2,1,"12",2,1,8,2,10,3,8,3,5,3,4,5,"0",2,7,4,6,4,3,5,1,3,-2,4,-4,4,-7,-7,-5,-8,1,"12",-8,0,-10,5,-6,8,-11,7,-12,7,-12,3,"2",2,-4,4,-4,3,-6,0,-7,-2,-6,-3,-4,-1,-4,1,-4,1,-2,4,1,5,1,3,-2,"14",-8,-1,0,4,1,6,2,8,1,9,-9,4,-10,1,"2",-3,-1,-2,0,-1,1,-4,0,"8",3,-9,9,-9,6,-6,-6,-4,-12,-5,-7,-8,-6,-11,-2,-12,2,-11,"5",-6,-8,-9,-6,-8,-5,1,-6,-3,-8,"5",-2,-11,-2,-9,0,-9,"7",-7,-9,-2,-9,3,-10,3,-9,1,-8,-3,
-7,-7,-8,"5",-5,-11,-6,-9,-3,-9,-3,-11],["13",-12,1,-6,-2,5,-1,11,3,12,5,12,12,-12,12,"0",-1,8,5,7,7,3,6,0,4,-2,5,-4,4,-7,-3,-10,-8,-5,-8,0,-6,6,"2",4,-5,5,-4,4,-6,-1,-7,-3,-6,-3,-4,-1,-5,1,-4,0,-2,3,1,4,1,5,0,3,-2,2,-4,"2",-3,-1,-1,0,0,2,-3,0,-5,0,"8",-8,-2,-6,-6,-1,-8,4,-7,5,-8,4,-11,-1,-12,-7,-11,-10,-8,-10,-5,"9",-10,-5,-8,-4,-7,-7,-5,-7,-5,-8,-2,-9,1,-9,3,-8,5,-8,4,-7,-1,-8,-6,-6,-8,-2,"2",1,4,2,3,6,4,"10",-8,-1,-6,3,-1,6,2,11,-7,9,-10,5,-11,2,"10",6,0,8,2,7,9,5,11,5,6,6,4],["2",-5,2,-11,5,-12,
6,-12,12,12,12,12,8,8,4,2,2,"1",2,2,8,4,12,8,12,12,11,8,9,6,10,8,7,5,2,4,"1",-5,2,-7,4,-5,6,-6,6,0,9,-7,7,-8,5,-9,6,-10,9,-10,7,-12,10,-12,6,-11,5,"0",1,8,4,8,5,7,6,0,4,-2,5,-4,3,-9,-2,-10,-6,-8,-7,-4,-6,-2,-7,0,-6,3,"2",3,-4,5,-4,4,-6,-2,-6,-3,-4,0,-4,1,-3,0,-2,2,1,4,1,4,0,3,-1,2,-3,"2",-2,0,-1,1,0,2,-3,1,-3,0,"2",3,3,1,3,4,4,"3",4,-7,-1,-7,-4,-5,-6,-3,-7,-3,-8,-4,-8,-5,-2,-9,4,-8],["3",-5,2,-11,5,-12,6,-12,12,12,12,12,8,8,4,2,2,"0",5,1,8,3,8,4,8,8,7,11,6,12,2,12,5,10,6,8,"2",-1,7,4,8,6,6,7,1,5,
-2,5,-4,3,-9,-2,-10,-6,-8,-7,-4,-6,-2,-7,0,-6,3,"1",5,-4,3,-9,-2,-10,-6,-8,-6,-6,-3,-7,0,-5,-2,-4,1,-3,2,1,4,1,4,0,3,-1,2,-3,3,-4,"1",-2,-1,0,0,0,1,-2,2,-4,0,"1",3,3,1,4,5,4,"0",-11,5,-10,2,-8,1,-6,2,0,7,4,8,4,9,3,10,-4,8,-7,5],["13",-5,2,-11,5,-12,6,-12,12,12,12,12,8,8,4,2,2,"12",5,3,8,4,12,8,12,10,11,8,8,5,8,6,9,9,9,11,5,8,3,8,1,6,"12",-7,3,-2,4,-5,5,-4,8,-4,10,-7,7,-9,7,-10,9,-10,7,-11,9,-11,12,-12,12,-12,6,-11,5,"2",3,7,5,5,6,3,5,-2,5,-4,4,-7,-1,-9,-6,-7,-7,-3,-7,0,-4,4,1,7,"1",2,-3,0,-4,-2,-3,
1,-3,2,-2,3,-3,5,-3,4,-4,"1",-2,-1,0,1,-2,0,-3,0,"1",2,-2,3,1,4,1,"8",-1,-9,2,-6,0,-3,-2,-2,-1,-4,-3,-2,-3,3,0,9,-5,6,-8,3,-9,1,-9,-6,-7,-9,-3,-10,"8",-1,-9,0,-10,4,-10,7,-6,6,-1,6,3,5,-2,5,-4,"7",-2,-9,-5,-9,-8,-6,-8,1,-6,4,-7,-2,-6,-5,-6,-1,-5,-5,0,-7,"7",0,-9,4,-9,6,-6,4,-7,3,-8]]),wa=a=>{let c=0,b=0;const g=a.o.u,e=a.o.I,k=Object.keys(g).length;a.j.D(240,400,(d,f)=>{var h=Object.keys(g)[c];if(f.keys.q)a.j.m();else{f.keys.e&&b?(0<b?(a.g.h[h]=a.g.h[h]||0,a.g.h[h]+=b,a.g.i-=g[h].p*b,g[h].q-=b):(a.g.h[h]+=
b,a.g.i+=g[h].p*Math.abs(b),g[h].q+=Math.abs(b)),b=0):f.keys.s?(c=Math.min(k-1,c+1),b=0):f.keys.w?(c=Math.max(0,c-1),b=0):f.keys.a?b=0>=b?Math.max(-a.g.h[h]||0,b-1):b-1:f.keys.d&&(f=g[h].p*(b+1)<a.g.i,b=0<=b&&f?Math.min(g[h].q,b+1):0<=b?b:b+1);d.fillStyle=n[4];d.fillRect(2,2,237,96);d.fillStyle=n[17];d.font="14px serif";d.textAlign="left";d.fillText("d"===e?"Den":"a"===e?"Anchorage":"Outpost",10,20);O(d,390,["[W,S] WARE, [A,D] QUANTITY","[Q] CLOSE, [E] CONFIRM"]);d.translate(0,48);h=V[Math.min(Object.keys(g).length,
4)];d.drawImage(h,10,0);d.font="12px serif";d.fillStyle=n[1];h=["Welcome.","Please browse our wares."];(f=Object.keys(g).find(l=>g[l].R||g[l].ca))&&(h=g[f].R?[`Looking for ${f.toLowerCase()}?`,"You better pay. Demand is up!"]:[`We\'re getting rid of ${f.toLowerCase()}!`,"Fill your holds!"]);N(d,80,16,h);d.translate(0,72);var m=0;Object.keys(g).forEach((l,p)=>{const v=g[l],u=(p=p===c)?b:0,w=0<u;ma(d,2,220,40,p);let y=18;d.fillStyle=p?n[17]:n[2];d.textAlign="left";d.fillText(`${l} (${v.q})`,20,y);d.textAlign=
"right";d.fillText(`\u25c4 ${u?w?`Buy ${u}`:`Sell ${Math.abs(u)}`:"0"} \u25ba`,220,y);y+=16;d.textAlign="left";d.fillText(`${v.p} \u0192`,20,y);d.textAlign="right";d.font="12px serif";d.fillText(u?`${0<u?"Cost:":"Gain:"} ${Math.abs(u*v.p)} \u0192`:`In hold: ${a.g.h[l]||0}`,220,y);m++;d.translate(0,48)})}})},W=(a,c)=>{a.j.D(200,110,(b,g)=>{g.keys.q&&a.j.m();N(b,10,28,c);O(b,100,["[Q] CLOSE"])})},X=(a,c)=>{var b=V[0];return new Promise(g=>{a.j.D(180,180,(e,k)=>{k.keys.q&&(a.j.m(),g());e.drawImage(b,
10,10);N(e,10,90,c);O(e,170,["[Q] CLOSE"])})})},Y=(a,c,b)=>{var g=V[J(5)];const e=b.length;let k=0;a.j.D(260,180,(d,f)=>{f.keys.e?(a.j.m(),b[k][1]()):(f.keys.s?k=Math.min(e-1,k+1):f.keys.w&&(k=Math.max(0,k-1)),O(d,170,["[W,S] SELECT, [E] CONFIRM"]),g&&d.drawImage(g,10,10),N(d,g?80:10,28,c),d.translate(0,80),b.forEach((h,m)=>{m=k===m;ma(d,0,240,28,m);d.fillStyle=m?n[17]:n[2];d.font="14px serif";d.textAlign="left";d.fillText(h[0],20,18);d.translate(0,34)}))})};const Z=a=>{a=a.g.Z();if(a.length)return a[J(a.length)]},xa=[[a=>0<a.g.i,a=>{Z(a);const c=3+J(3);Y(a,["You see a big package bobbing","in the water. What might it be?"],[["Poke it with an oar",()=>{.5<Math.random()?W(a,["Just some junk.","Oh well."]):.5<Math.random()?(W(a,["A pirate jumps out of the package and","scales the side of your ship. He manages","to steal some money before leaving."]),a.g.i-=J(Math.floor(a.g.i/2))):(W(a,["It cloinks like metal. You drag it","on board. It's a small stash of ",
"weapons! Finders keepers!"]),a.g.h.Weapons=a.g.h.Weapons||0,a.g.h.Weapons+=c)}],["Leave it alone",()=>{W(a,["You sail on.","Some stones are best left unturned."])}]])}],[a=>Z(a),a=>{const c=Z(a);Y(a,["A shady ship pulls up.",`"Give us your ${c}!`,'If not, bad things happen!"'],[[`Give your ${c}`,()=>{W(a,["The ship sails off.","You can hear the crew laughing."]);a.g.h[c]=0}],["Refuse",()=>{.5<Math.random()?W(a,["You refuse, and break away.","The pirates cannot keep up."]):(W(a,["You try to refuse.",
"The pirates enter your ship.","They take the ${ware},","and half your money."]),a.g.i=Math.ceil(a.g.i/2),a.g.h[c]=0)}]])}],[a=>Z(a),a=>{const c=Z(a),b=2+J(10);Y(a,["A fellow trader stops you.",`"I\'m in dire need of ${c}.`,"I'll trade you my cotton for one!\""],[['"Sure"',()=>{W(a,[`The sailor gives you ${b} Cotton.`]);--a.g.h[c];a.g.h.Cotton=a.g.h.Cotton||0;a.g.h.Cotton+=b}],['"I don\'t think so"',()=>{W(a,["The sailor leaves, still longing",`for some ${c.toLowerCase()}.`])}]])}]];const ya=(a,c)=>{const b={},g=d=>{let f=Array.from({length:d[0].length+2},()=>0);return[f,...d.map(h=>[0,...h,0]),f]},e=()=>{let d=!1;return f=>{var h=a.g.position;var m=f.J.L;h=Math.max(Math.abs(h[0]-m[0]),Math.abs(h[1]-m[1]));h<(f[8].width-60)/2&&a.g.P();if(h>2*f[8].width)D(c,b.C),a.o.W(),h=[0,1.8*f[8].width],f=G(a.g.position,f[0])+.4*(Math.random()-.5)-Math.PI,b.C=k(F(a.g.position,[h[0]*Math.cos(f)-h[1]*Math.sin(f),h[0]*Math.sin(f)-h[1]*Math.cos(f)])),c[6].push(b.C);else if(h>f[8].width&&!d)a.g.Y(f.J.L);
else if(!d&&(d=!0,a.g.X(),.4<Math.random()))a:for(f=0;10>f++;)for(let [l,p]of xa)if(.8<2*(Math.random()-.5)&&l(a)){p(a);break a}}},k=d=>{var f=J(5,3);const h=-(f/2*45)-22.5;var m=f/2;const l=[];for(var p=0;p<f;p++){var v=Math.abs(m-p),u=[];for(var w=0;w<f;w++)u.push(Math.random()*f*2.5>Math.abs(m-w)+v?1:0);l.push(u)}d=q(d,1,0,P[0]);m=g(l);v=p=!1;u=[];for(w=1;w<l[0].length+2;w++){const da=[];for(let B=1;B<l.length+2;B++){var y=m[B-1][w-1]?8:0,C=m[B-1][w]?1:0;let Q=m[B][w-1]?4:0,I=m[B][w]?2:0,R=y+C+
Q+I;da.push(R);let S=h+45*w,T=h+45*B;d[6].push(q([S,T],2,0,P[y+C+Q+I]));const U=[d[0][0]+S,d[0][1]+T];12==R&&w>f&&2<B&&!p?(a.o.H("x",U),p=!0):3==R&&2>w&&2<B&&!v&&(v=!0,.3>Math.random()?a.o.H("a",U):.4>Math.random()&&a.o.H("d",U));if(C&&!I||C&&I&&y&&Q)for(y=0;2>y;y++)C=q([S+J(-8,8),T+J(-8,8)],1.5+Math.random(),0,pa),C[2]=Math.random()*Math.PI,d[6].push(C)}u.push(da)}d.J={aa:h,ea:u,L:F(d[0],[22,22])};t(d,45*m[0].length,45*m.length);f=e();d[7].push(f);return d};b.C=k([300,0]);c[6].push(b.C);return b};const za=(a,c)=>{const b={u:null,I:null};let g=[];const e=()=>{let k=!1;return d=>{const f=Math.max(Math.abs(a.g.position[0]-d[0][0]),Math.abs(a.g.position[1]-d[0][1]));50>f&&b.u!==d.A?(b.u=d.A,b.I=d.N,a.T.O(d[0][0],d[0][1]),d=a.j.M(120,24,[0,60],n[0]),d.fillStyle=n[17],d.font="12px serif",d.textAlign="center",d.fillText("[E] TRADE",60,15)):b.u===d.A&&a.input.keys.e&&!k?(k=!0,wa(a)):50<f&&b.u===d.A&&(b.u=null,b.I=null,k=!1,a.j.m())}};b.W=()=>{for(let k of g)D(c,k),g=[]};b.H=(k,d)=>{const f={};let h;
if("a"===k)h=sa,.8>Math.random()&&(f.Oars={p:120+J(60),q:10+J(20)}),.6>Math.random()&&(f.Sails={p:400+J(200),q:8+J(10)}),.4>Math.random()&&(f.Anchors={p:2E3+J(1E3),q:6+J(6)});else if("d"===k){if(h=ra,.4>Math.random()&&(f.Khat={p:18+J(18),q:20+J(30)}),.4>Math.random()&&(f.Hashish={p:82+J(82),q:10+J(40)}),.4>Math.random()||!f.length)f.Opium={p:1858+J(1800),q:4+J(12)}}else h=qa,.8>Math.random()&&(f.Wheat={p:12+J(4),q:10+J(40)}),.7>Math.random()&&(f.Cotton={p:93+J(30),q:5+J(20)}),.6>Math.random()&&(f.Tools=
{p:171+J(80),q:5+J(10)}),.5>Math.random()&&(f.Weapons={p:718+J(400),q:5+J(15)}),.5>Math.random()&&(f.Spices={p:1918+J(1E3),q:4+J(10)}),4>Object.keys(f).length&&(f.Gold={p:3742+J(2500),q:3+J(6)});if(.5<Math.random()){const l=.5<Math.random();var m=Object.keys(f);m=m[J(m.length)];f[m].p*=l?1+Math.random():.2+.4*Math.random();f[m].p=Math.round(f[m].p);f[m][l?"h":"l"]=!0}d=q([d[0],d[1]],2,.2*(Math.random()-.5),h);d.A=f;d.N=k;k=e();d[7].push(k);t(d);c[6].push(d);g.push(d)};return b};const Aa=a=>{const c={},b=[],g=(e,k)=>{0>e[5]||(e[0][0]+=20*e.F[0]*k,e[0][1]+=20*e.F[1]*k,e[1]*=1-1*k,e[5]-=k,e[2]-=12*e.F[0]*k,0>e[5]&&b.push(e))};c.K=(e,k,d,f=1)=>{let h;b.length?h=b.pop():(h=q(),h[3]=[...na],a[6].push(h));h[0][0]=e;h[0][1]=k;h[3][0]="17";h[1]=d;h[5]=f;h[7]=[g];h.F=[2*(Math.random()-.5),2*(Math.random()-.5)]};c.O=(e,k)=>{for(let d=0;10>d;d++)c.K(e,k,1+(Math.random()-.5),g)};return c};const Ba=(a,c)=>{const b={position:[0,0],G:!1,i:2E3,h:{},v:900};let g=0,e=0,k=0;var d=[0,0];b.P=()=>{e=-88};b.Z=()=>Object.keys(b.h).filter(m=>0<b.h[m]);b.anchor=q([d[0]+200,d[1]+100],2,0,P[0]);b.anchor[5]=0;const f=q([0,50],1,0,ta);f[5]=0;const h=q([d[0],d[1]],2,0,oa);b.Y=m=>{m=G(h[0],m);f[0]=[50*Math.sin(m+Math.PI),50*Math.cos(m+Math.PI)];f[2]=-m;0===f[5]&&f[7].push(ka())};b.X=()=>{1===f[5]&&(f[7]=[ja()])};A(h,(m,l)=>{b.G||(b.v-=l,a.input.keys.d&&(g=Math.min(20,g+20*l)),a.input.keys.a&&(g=Math.max(-20,
g-20*l)),g*=.9-Math.min(l,.9),m[2]+=g*l,e=a.input.keys.w?Math.min(80,e+80*l):.99*e*l,m[0][0]+=e*Math.cos(m[2]-Math.PI/2)*l,m[0][1]+=e*Math.sin(m[2]-Math.PI/2)*l,b.position=[m[0][0],m[0][1]],10<e&&(k+=4*l)>1-e&&(a.U.K(m[0][0],m[0][1],1.4,.6),k=0),b.anchor[0][0]+=.05*(h[0][0]-b.anchor[0][0]),b.anchor[0][1]+=.05*(h[0][1]-b.anchor[0][1]))});h[7].push(ia(a));c[6].push(h);b.anchor[6].push(f);c[6].push(b.anchor);t(h);return b};const Ca=(a,c)=>{const b={current:null};var g=q([0,0],2,0,[]);A(g,L(a,[0,-210]));A(g,(e=>{let k=e.g.i,d=Math.floor(e.g.v);const f=h=>{const m=h[8]||new OffscreenCanvas(240,24),l=m.getContext("2d");l.clearRect(0,0,240,30);M(l);l.textAlign="center";l.font="bold 16px serif";l.fontWeight="bold";l.fillStyle=n[4];l.fillText(`${k} \u0192`,60,19);l.fillText(`${0<d?H(d):"\u221e"}`,180,19);l.fillStyle=n[1];l.fillText(`${k} \u0192`,59,17);l.fillText(`${0<d?H(d):"\u221e"}`,179,17);h[8]=m};return h=>{h[8]&&k==
e.g.i&&d===Math.floor(e.g.v)||(k=e.g.i,d=Math.floor(e.g.v),f(h),0===d&&(1E4<=k?X(e,['"Your time is up!"']).then(()=>K(200)).then(()=>X(e,['"Looks like you made it!',"Good job. We had high hopes.",'You did not disappoint."'])).then(()=>K(200)).then(()=>X(e,['"We will take our money,',"and leave you to it.",'Bon voyage!"'])).then(()=>K(1100)).then(()=>e.g.i-=1E4):X(e,['"Your time is up!"']).then(()=>K(200)).then(()=>X(e,['"Now, where is our money?',"You don't have it?!\""])).then(()=>K(200)).then(()=>
X(e,['"Well, then. This ship is ours.','Your cargo and money, too."'])).then(()=>K(200)).then(()=>X(e,['"Our men will escort you off."'])).then(()=>{e.S=!0})))}})(a));c[6].push(g);g=q([0,0],2,0,[]);A(g,L(a,[0,140]));A(g,(e=>{let k=0,d;const f=h=>{const m=h[8]||new OffscreenCanvas(100,100);d=d||m.getContext("2d");d.clearRect(0,0,100,100);d.font="12px serif";d.fillStyle=n[17];let l=0;for(let p of Object.keys(e.g.h))0<e.g.h[p]&&(d.textAlign="center",d.fillText(`${e.g.h[p]}x ${p}`,50,8+14*l),l++);h[8]=
m};return h=>{let m=Object.values(e.g.h).reduce((l,p)=>l+p,0);m!==k&&(k=m,f(h))}})(a));c[6].push(g);b.m=()=>{b.B&&(a.g.G=!1,D(c,b.B),b.B=null)};b.M=(e,k,d=[0,0],f=n[3])=>{b.m();e=new OffscreenCanvas(e,k);k=e.getContext("2d");M(k,f);f=q(F(a.g.position,d),1,0,null);f[5]=0;f[8]=e;f[7].push(L(a,d));f[7].push(ka());c[6].push(f);f.$={offset:d};b.B=f;return k};b.D=(e,k,d)=>{b.m();a.g.G=!0;const f=b.M(e,k,[0,10]);A(b.B,la(a,h=>{f.clearRect(0,0,e,k);f.beginPath();M(f);f.save();d(f,h);f.restore()}));f.save();
d(f,a.input);f.restore()};return b};const Da=(a,c)=>{const b=(d,f)=>{d.l+=f;d[0][0]+=5*f;1>d.l?d[5]=d.l/2:2<d.l&&3>d.l?d[5]=(3-d.l)/2:3<d.l&&(d[5]=0,d.l=0,f=ba(a.g.position),d[0][0]=f[0],d[0][1]=f[1])},g=[];for(var e=0;10>e;e++){var k=ba(a.g.position);k=q([k[0],k[1]],1-Math.random()/2,0,ua);t(k);k.l=3*Math.random();k[7].push(b);c[6].push(k);g.push(k)}return{}};const ea=a=>new Promise(async c=>{const b=a.getContext("2d"),g=a.width/2,e=()=>{b.fillStyle="#222";b.fillRect(0,0,a.width,a.height)};K(400).then(()=>e()||N(b,g-10,250,["Adventure!"])).then(()=>K(800)).then(()=>e()||N(b,g-20,230,["Gold!"])).then(()=>K(800)).then(()=>e()||N(b,g+20,320,["Pirates!"])).then(()=>K(800)).then(()=>e()||N(b,g-5,210,["Profit!"])).then(()=>K(800)).then(()=>e()).then(()=>K(2E3)).then(()=>{e();N(b,g-100,200,["I always wanted to earn my fortune on the high seas."])}).then(()=>
K(2E3)).then(()=>{e();N(b,g-100,200,["I always wanted to earn my fortune on the high seas.","But it's expensive to get rich."])}).then(()=>K(3E3)).then(()=>e()).then(()=>K(1E3)).then(()=>{e();N(b,g-100,200,["I've found a shady broker that is willing to bet on me."])}).then(()=>K(3E3)).then(()=>{e();N(b,g-100,200,["I've found a shady broker that is willing to bet on me.","The terms are lousy, but it's my only shot."])}).then(()=>K(3E3)).then(()=>{e();N(b,g-100,200,["I've found a shady broker that is willing to bet on me.",
"The terms are lousy, but it's my only shot.","It's time for some big..."])}).then(()=>K(3E3)).then(()=>{e();b.save();b.translate(g+60,200);b.scale(14,14);x(b,q([g,200],20,0,va));b.restore()}).then(()=>K(3E3)).then(c)});const fa=(a,c)=>new Promise(()=>{const b=a.getContext("2d"),g=q(),e=q();g[6].push(e);const k=q();g[6].push(k);const d=q();g[6].push(d);const f=q();g[6].push(f);const h=q();g[6].push(h);const m=q();g[6].push(m);const l={time:0,canvas:a,input:c};l.U=Aa(e);l.T=Aa(h);l.g=Ba(l,f);l.fa=Da(l,e);l.o=za(l,d);l.ba=ya(l,k);l.j=Ca(l,m);K(2E3).then(()=>X(l,['"There you go, as requested.',"A fine ship, and some initial",'capital."'])).then(()=>K(200)).then(()=>X(l,['"We have faith in you, but',"you better be ready in time",
'to pay back. With interest."'])).then(()=>K(200)).then(()=>X(l,['"We will expect 10 000 \u0192."']));aa((p,v)=>{l.time+=v;b.globalAlpha=1;b.fillStyle="#768";b.fillRect(0,0,l.canvas.width,l.canvas.height);E(b,g,v,l.g.anchor);return l.S?0:1})});(async()=>{self.WorkerGlobalScope?ha():ca()})();
})()</script>