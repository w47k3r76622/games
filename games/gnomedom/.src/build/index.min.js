var c=c||{};c.scope={};c.ASSUME_ES5=!1;c.ASSUME_NO_NATIVE_MAP=!1;c.ASSUME_NO_NATIVE_SET=!1;c.defineProperty=c.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};c.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};c.global=c.getGlobal(this);
c.polyfill=function(a,b){if(b){var d=c.global;a=a.split(".");for(var g=0;g<a.length-1;g++){var h=a[g];h in d||(d[h]={});d=d[h]}a=a[a.length-1];g=d[a];b=b(g);b!=g&&null!=b&&c.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};c.polyfill("Array.prototype.fill",function(a){return a?a:function(a,d,g){var b=this.length||0;0>d&&(d=Math.max(0,b+d));if(null==g||g>b)g=b;g=Number(g);0>g&&(g=Math.max(0,b+g));for(d=Number(d||0);d<g;d++)this[d]=a;return this}},"es6","es3");
var e,f,k,l,m,aa,ba,ca,n,p,q,r,t,u,v,w=!1,da=!1,ea,fa,x=[],y=[],A=[],ha=[],B=[],ia=[],C=[],D=[],ja=[],ka=[],la=[],E={},G={left:!1,right:!1,up:!1,upHold:10};function ma(a){var b={pop:2};na(a,7,5);H(a-10).camp=b;H(a+10).camp=b;setInterval(function(){w&&2>b.pop&&(H(a-10+40*Math.random()).camp=b,b.pop++)},3E4);[a+25,a-25,a+38,a-35,a+45,a-49,a+55,a-95,a+97,a+110,a-120,a-130,a-150,a-170,a-200,a-220,a-460,a-380,a-420].forEach(oa);I(a-80);I(a-150)}
function oa(a){thing=J({x:a,width:40*Math.random()+2,height:37*Math.random()+2,things:ja,className:"bush"});thing.color=.5<Math.random()?"#006400":"#173300"}
function I(a,b){thing=J({x:a,y:uWorldHeight-(b||7),width:3,height:7,things:D,className:"coinflower"});thing.sprite=E.coinflower;thing.sH=7;thing.sW=3;thing.canBePickedUp=!0;thing.bloomHour=24*Math.random();thing.maxCoins=1;thing.levelUp=function(){x.push(this);this.resets=1;this.targetable=!0};thing.build=function(a){this.builder=a;a.building=!0;this.targetable=!1;if(0<this.buildTime)return--this.buildTime;K(this.x/m,this.y/m-4,2,3);this.buildTime=800;if(0<this.resets)this.resets--;else return this.builder=
null,this.coins=0,this.sated=a.building=!1,"built"}}function L(a){thing=J({x:a,width:10+20*Math.random(),height:10+30*Math.random(),things:ja,className:"coinflower"});thing.skin=.5<Math.random()?"cointree":"cointree2";thing.sH=3.5+.5*Math.random();thing.sW=3;thing.tree=!0}
function M(a,b,d,g,h){h=h||ctx;if(a.sprite||a.color)if(spriteX=a.x+f.x+50*m-a.width/2+(void 0===d?0:d),!(spriteX<-a.width||spriteX>k+a.width)){if(a.color)return pa(a,spriteX,h);spriteY=a.y+(g||0);h.drawImage(a.sprite,b*a.sW,a.sY||0,a.sW,a.sH,Math.round(spriteX),spriteY,a.width,a.height)}}function pa(a,b,d){d=d||ctx;d.fillStyle!==a.color&&(d.fillStyle=a.color||"#000");d.fillRect(Math.round(b),a.y,a.width,a.height)}
function qa(a,b,d,g){t.save();t.globalCompositeOperation="destination-out";var h=.05*Math.sin(1.1*Date.now()/1E3);d*=1+h;h=t.createRadialGradient(a,b,0,a,b,d);h.addColorStop(0,"rgba(255, 0, 0, "+g+")");h.addColorStop(1,"rgba(255, 0, 0, 0)");t.fillStyle=h;t.beginPath();t.arc(a,b,d,0,2*Math.PI);t.fill();t.restore()}function ra(a,b,d,g,h,z){t.fillStyle=h;t.globalAlpha=z;t.fillRect(a,b,d,g);t.globalAlpha=1}
function N(a,b){var d=new Image;d.src=a;d.onload=function(){E[b]=d;E.gnomeWalk&&!E.flipped&&N(O(E.gnomeWalk),"flipped");E.gnomeWalk&&!E.poor&&N(O(E.gnomeWalk,"grayscale(90%)"),"poor");E.gnomeWalk&&!E.evil&&N(O(E.gnomeWalk,"brightness(5%)"),"evil");E.gnomeWalk&&!E.green&&N(O(E.gnomeWalk,"hue-rotate(90deg)"),"green");E.gnomeWalk&&!E.blue&&N(O(E.gnomeWalk,"hue-rotate(220deg)"),"blue");E.evil&&!E.evilRich&&N(O(E.evil,null,!0),"evilRich");E.campfire&&!E.evilCampfire&&N(O(E.campfire,"brightness(5%)",null,
20,4),"evilCampfire");E.wave&&!E.wave1&&N(O(E.wave,null,null,25,4,!1),"wave1");E.wave1&&!E.wave2&&N(O(E.wave1,null,null,250,40,!0),"wave2");E.coinflower&&!E.cointree&&N(O(E.coinflower,"hue-rotate(60deg)",null,6,7,!0),"cointree");E.coinflower&&!E.cointree2&&N(O(E.coinflower,"hue-rotate(90deg)",null,6,7,!0),"cointree2")}}
function O(a,b,d,g,h,z){var F=document.createElement("canvas");F.width=g||14;F.height=h||11;h=F.getContext("2d");h.translate(g||14,0);h.scale(-1,1);h.filter=b;h.drawImage(a,0,0);z&&(E.waveP=h.createPattern(a,"repeat"));d&&(h.fillStyle="#FFFF00",h.fillRect(1,5,4,5),h.fillRect(8,5,4,5));return F.toDataURL()}
function sa(){ra(0,0,q.clientWidth,q.clientHeight,"#000000",P);D.forEach(function(a){"campfire"===a.className&&a.burning&&qa(a.x+50*m+f.x,q.clientHeight-13*m,a.radius,a.intensity)});C.forEach(function(a){a.destroyed||qa(a.x+50*m+f.x,q.clientHeight-18*m,23*m,.8)})}var Q;function ta(a){a.sprite?(Q=a.shaking?-1*m:0,a.destroyed?M(a,0,Q):M(a,1,Q)):a.sprite=E.wall}function ua(){pa(u,u.x,t);v.width=0<e.coins?e.coins*m/3:0;pa(v,v.x,t)}var R,S,T;
function va(a){T=S?a-S:0;S=a;var b=(a=e.currentCoinTaker)?a.price:null;a&&(prevTaker=a);e.currentCoinTaker=null;D.forEach(wa);C.forEach(wa);xa(e.currentCoinTaker,b);ctx.clearRect(0,0,q.clientWidth,q.clientHeight);t.clearRect(0,0,q.clientWidth,q.clientHeight);ja.forEach(ya);A.forEach(za);D.forEach(ya);C.forEach(ta);B.forEach(Aa);la.forEach(Ba);Ca();ua();0>e.coins?(e.classList.add("dead"),document.body.classList.add("game-over")):e.x<-690*m?document.body.classList.add("win"):(e.x>127*m?G.right=!1:e.x<
-620*m&&!ca.destroyed&&(G.left=!1),G.left?(Da(T,1),e.classList.add("run"),e.classList.remove("right")):G.right?(Da(T,-1),e.classList.add("run","right")):0<T&&e.classList.remove("run"),G.up&&Ea(G));requestAnimationFrame(va)}
function ya(a){a.update&&a.update();if(a.className.match("campfire"))a.levelUp&&M({x:11*m,y:l-70*m,width:90*m,height:70*m,sprite:E.base,sW:9,sH:7},a.level?a.level-1:0),a.sprite?(R=Math.tan(S/190),a.burning?-.66>R?M(a,1):-.66<R&&.66>R?M(a,2):M(a,3):a.evil?M(a,3):M(a,0)):a.sprite=a.evil?E.evilCampfire:E.campfire;else{if(a.className.match("coinflower"))return a.sprite=E.coinflower,a.tree?(a.sprite="cointree"===a.skin?E.cointree:E.cointree2,a=M(a,0)):(U(e,a)?a.canBePickedUp?(M(a,1),a.canBePickedUp=!1,
e.coins++):M(a,0):(a.canBePickedUp?M(a,1):M(a,0),a.bloomHour>V&&a.bloomHour<V+.01&&(a.canBePickedUp=!0)),a=void 0),a;if(a.className.match("bar"))return ua(a);a.className.match("wave1")?a.sprite?(a.sW=25,a.sH=2,a.sY=0<Math.sin(S/100)?0:2,M(a,0,0,0,t),M(a,0,0,0,t)):a.sprite=E.wave1:a.className.match("water")?M(a,0,0,0,t):a.className.match("evilWall")?a.sprite?a.destroyed?M(a,1,Q):M(a,0,Q):a.sprite=E.evilWall:a.color&&M(a,0)}}
function wa(a){0>=a.maxCoins||a.coins>=a.maxCoins||2>ea.level&&!a.mainFire||!(fa||"coinflower"!==a.className&&"wall"!==a.className)||!U(e,a)||(e.currentCoinTaker=a)}
function xa(a,b){if(a){a.price||(a.price=J({x:a.x/m-20,y:a.y/m-20,width:4,height:4,things:D,className:"price"}));a.price.classList.contains("show")||setTimeout(function(){a.price.classList.add("show")},0);Fa(a.price);b&&a.price!==b&&b.classList.remove("show");b=[];for(var d=a.maxCoins-a.coins;0<d;d--)b.push("\x26FilledSmallSquare; ");+a.price.innerHTML!==a.maxCoins-a.coins&&(a.price.innerHTML=b.join(""))}else b&&b.classList.remove("show")}var W=1,V=4,P=.8;w=!0;
function Ca(){V+=.00038*T;24<V&&(V=0,W++,document.querySelector(".day").innerHTML="Day "+W);6<V&&17>V&&0<P?(w&&(document.body.classList.add("dayStart"),setTimeout(function(){document.body.classList.remove("dayStart")},9E3)),w=!1,P-=.00005*T):(17<V||6>V)&&.8>P&&(w=!0,P+=.00005*T);0>P&&(P=0);.8<P&&(P=.8);sa()}
function Ga(a,b,d,g){a=J({x:a,y:b,width:d,height:g,thingPool:ka,things:la,className:"stone"});a.color="#333";a.vX=-3*m/12+(0<.5-Math.random()?1:-1)*Math.random()*m/12;a.vY=-m/4-Math.random()*m/4;a.canBePickedUp=!0;return a}function Ba(a){a.active&&(a.vY+=m/50,a.x+=a.vX,a.y+=a.vY,M(a,0));Ha(a)}function Fa(a){a.style.transform="translate3d("+Math.round(a.x+f.x)+"px, "+Math.round(a.y)+"px, 0)"}
function U(a,b){return a===b?!1:a.x+2*m<b.x+b.width&&a.x-2*m+a.width>b.x&&a.y<b.y+b.height&&a.height+a.y>b.y}function Ia(a){37==a.which&&(G.left=!0);39==a.which&&(G.right=!0);38==a.which&&(G.up=!0)}
function Ja(a){37==a.which&&(G.left=!1);39==a.which&&(G.right=!1);if(38==a.which){G.up=!1;if((coinTaker=e.currentCoinTaker)&&coinTaker.coins<coinTaker.maxCoins&&0<coinTaker.coins){for(a=0;a<coinTaker.coins;a++)K(e.x/m+4,e.y/m-4,2,3);coinTaker.coins=0}else 0<e.coins&&(e.coins--,K(e.x/m+4,e.y/m-4,2,3));G.upHold=0}}function Da(a,b){aa=m/25;f.x+=Math.round(b*aa*a);e.x=-f.x-e.width/2}
function H(a,b,d,g){g=g||6.3;b=b||uWorldHeight-g;gnome=J({x:a,y:b,width:d||4,height:g,thingPool:ia,things:B,className:"gnome"});gnome.sprite=E.poor;gnome.sW=7;gnome.sH=11;gnome.vX=0;gnome.vY=0;gnome.wait=5;gnome.headedHome=!1;gnome.attackWait=193;gnome.moveType="standing";gnome.filter="poor";gnome.task="idle";gnome.maxCoins=1;gnome.villagePos=-20*m+60*m*Math.random();gnome.campX=gnome.x;gnome.speed=m/5;gnome.health=2;gnome.dead=!1;return gnome}
function Ka(a){a.active&&(a.y=l-a.height,"walking"===a.moveType&&(a.x+=a.vX),a.sprite?a.dead?(M(a,0,null,5*m),a.active=!1):(a.sprite="poor"===a.filter?E.poor:E.green,"evil"===a.filter&&(a.sprite=a.coins>=a.maxCoins?E.evilRich:E.evil),"blue"===a.filter&&(a.sprite=E.blue),"default"===a.filter&&(a.sprite=E.gnomeWalk),"walking"===a.moveType?0<Math.sin(S/100)?M(a,0):M(a,1):"evil"===a.filter&&a.attacking?M(a,0,2*m*a.attackDirection):M(a,0)):a.sprite=E.poor)}
function La(a){a.closeTarget&&a.closeTarget.active?(X(a,a.closeTarget.x),a.headedHome=!1):Y(a,a.home)?a.headedHome&&(a.vX=0,a.moveType="standing",a.headedHome=!1):Ma(a)}function Ma(a){a.headedHome=!0;X(a,a.home)}function X(a,b){a.attackDirection=0<a.x-b?-1:1;a.vX=0<a.x-b?-a.speed:a.speed;a.moveType="walking"}function Z(a,b){b&&b.active&&b.targetable&&(p=Math.abs(b.x-a.x),p<n&&(n=p,a.closeTarget=b))}
function Aa(a){a.active&&(a.home="poor"===a.filter||"evil"===a.filter?a.campX:a.villagePos,"evil"===a.filter?Na(a):a.gnomezilla?(a.filter="default",a.vX=-a.speed,a.moveType="walking",B.forEach(function(b){"evil"===b.filter&&U(a,b)&&(b.dead=!0)}),D.forEach(function(b){b.burning&&b.evil&&U(a,b)&&(b.burning=!1);b.evil&&U(a,b)&&(b.destroyed=!0)})):"poor"===a.filter?Oa(a):Pa(a),Ka(a))}function Y(a,b){return a.x>b-1.5*m&&a.x<b+1.5*m}
function Na(a){(a.coins>=a.maxCoins||!(13<V||6>V)||a.headedHome)&&a.leftHome?(X(a,a.campX),a.x>a.campX-1*m&&a.x<a.campX+4*m&&(a.active=!1,ia.push(a)),a.coins<a.maxCoins&&(Z(a,e),a.closeTarget&&a.closeTarget.active&&U(a,a.closeTarget)&&Qa(a,a.closeTarget))):a.x>139*m?a.headedHome=!0:(a.startingAttack||C.forEach(function(b){Ra(a,b)}),a.startingAttack||(n=50*m,a.closeTarget&&a.closeTarget.active||(a.closeTarget=null),B.forEach(function(b){a!==b&&Z(a,b)}),Z(a,e),a.closeTarget&&a.closeTarget.active&&U(a,
a.closeTarget)&&Qa(a,a.closeTarget)),"attack"!==a.moveType&&!a.startingAttack||a.coins===a.maxCoins?a.coins!==a.maxCoins&&(a.campX-a.villagePos?X(a,1E5):X(a,-1E5)):(a.targetWall&&a.targetWall.destroyed&&(a.targetWall=null),a.targetWall?Sa(a,a.targetWall):a.coins!==a.maxCoins&&(a.campX-a.villagePos?X(a,1E5):X(a,-1E5))))}
function Ra(a,b){b&&!b.destroyed&&U(a,b)&&!a.startingAttack&&(a.targetWall=b,a.vX=0<a.vX?-.05*m:.05*m,a.startingAttack=!0,ba=100+600*Math.random(),setTimeout(function(){a.startingAttack=!1;a.moveType="attack";a.vX=0},ba))}function Sa(a,b){0>=a.attackWait&&!a.dead&&(a.attackWait=193,a.attacking=!0,b.shaking=!0,--b.health,b.coins=2,b.sated=!1,setTimeout(function(){b.shaking=!1;a.attacking=!1},30),0>=b.health&&(b.destroyed=!0,b.sated=!1,b.coins=0,a.moveType="walking"));--a.attackWait}
function Qa(a,b){("evil"!==b.filter&&0<b.coins||b===e)&&(50>a.attackWait||99<a.attackWait)&&(a.attackWait=63,a.attacking=!0,b.coins--,a.coins++,b.filter="poor",a.vX=0,a.moveType="standing",setTimeout(function(){a.attacking=!1},50));--a.attackWait}function Oa(a){da&&(0<a.coins?(a.filter="green",Ma(a),a.camp&&a.camp.pop&&a.camp.pop--):0<a.wait?a.wait--:(a.wait=7,n=50*m,a.closeTarget&&a.closeTarget.active||(a.closeTarget=null),A.forEach(function(b){Z(a,b)}),La(a)))}
function Pa(a){n=15550*m;"green"===a.filter?(a.closeTarget=null,a.moveType="standing",y.forEach(function(b,d){0<b.coins&&U(a,b)?(b.sated=!1,b.coins=0,b.y-=4*m,a.filter=d?"blue":"default"):0<b.coins&&Z(a,b)}),La(a),a.closeTarget=null):("walking"===a.moveType&&"defend"!==a.task&&Y(a,a.villagePos)&&(a.moveType="standing",a.task="idle"),"default"===a.filter?w?(a.attackWait-=.1*T,0>a.attackWait&&(Ga(a.x/m,a.y/m,1,1),a.attackWait=200),"idle"===a.task&&(a.closeTarget=C[0].x+4*m+9*m*Math.random(),X(a,a.closeTarget),
a.task="defend"),Y(a,a.closeTarget)&&(a.moveType="standing")):(a.task="idle",La(a)):"blue"===a.filter&&(a.building||(a.closeTarget=null,x.forEach(function(b){Z(a,b)})),a.closeTarget?U(a,a.closeTarget)?"built"===a.closeTarget.build(a)?(a.moveType="standing",a.building=!1,a.closeTarget.builder=null,a.building=!1,a.closeTarget.targetable=!1,a.closeTarget=null):0<Math.sin(S/80)?X(a,a.closeTarget.x+13*m):X(a,a.closeTarget.x-13*m):X(a,a.closeTarget.x):(X(a,a.villagePos),Y(a,a.villagePos)&&(a.moveType="standing",
a.task="idle",a.moveType="standing",a.building=!1))))}
function J(a){var b=a.thingPool&&0<a.thingPool.length?a.thingPool.pop():document.createElement("div");a.things=a.things||D;b.className=a.className;b.x=a.x*m;b.y=a.y*m;b.width=m*a.width||b.clientWidth;b.height=m*a.height||b.clientHeight;a.y||(b.y=l-b.height);b.active=!0;b.coins=0;b.maxCoins=0;b.sated=!1;b.level=0;b.buildTime=500;b.targetable=!0;b.inDom||"coin"!==b.className&&"price"!==b.className||(b.inDom=!0,f.appendChild(b));b.inGroup||(b.inGroup=!0,a.things.push(b));return b}
function Ta(){function a(h,z){if(!(15<V||6>V))return d=0;if(!(d>W-1)&&g.burning){z||d++;b=H(-569);b.filter="evil";b.moveType="walking";b.speed=m/1.8;var F=b;F.leftHome=!1;setTimeout(function(){F.leftHome=!0;8<W&&!z&&a(null,!0);10<W&&!z&&a(null,!0);12<W&&!z&&a(null,!0);14<W&&!z&&a(null,!0)},500)}}[-50,-120].forEach(function(a){b=J({x:a,y:uWorldHeight-13,width:5,height:13,things:C,className:"wall"});b.maxCoins=3;b.destroyed=!0;b.sW=5;b.sH=7;b.health=0;b.levelUp=function(){x.push(this);this.targetable=
!0};b.build=function(){if(0<this.buildTime)return--this.buildTime;this.buildTime=500;0===this.level?(this.level++,this.health=30,this.maxCoins=4,this.coins=0,this.sated=!1):1===this.level&&30===this.health?(this.width=10*m,this.height=18*m,this.health=40):(this.health=30,this.coins=0,this.sated=!1);this.destroyed=!1;return"built"}});var b=na(11,9,8);b.maxCoins=1;b.radius=46*m;b.intensity=1;b.burning=!1;b.mainFire=!0;ea=b;b.levelUp=function(){this.level++;this.sated=!1;this.burning=!0;this.coins=0;
1===this.level&&(da=!0,document.body.classList.remove("unlit"),this.maxCoins=3);if(2===this.level){this.maxCoins=11;b=J({x:-20,y:uWorldHeight-14,width:5,height:5});b.maxCoins=1;var a=b;b.color="#5C0000";y.push(b);b=J({x:40,y:uWorldHeight-14,width:5,height:5});b.maxCoins=1;var d=b;b.color="#200E4F";y.push(b);d.levelUp=function(){a.coins=0;a.sated=!1;fa=!0;a.y>this.y&&(a.y=this.y);this.y+=3.8*m};a.levelUp=function(){d.coins=0;d.sated=!1;d.y>this.y&&(d.y=this.y);this.y+=3.8*m}}3===this.level&&(this.maxCoins=
18,b=J({x:-30,y:uWorldHeight-10,width:3,height:2}),b.color="#111",b.attackWait=50,b.update=function(){this.attackWait-=.1*T;w&&0>this.attackWait&&(b=Ga(this.x/m,this.y/m,1.5,1.5),b.vY=-1*m,b.vX=-2.4*m/12-Math.random()*m/12,this.attackWait=50)});4===this.level&&(H(40,null,80,91.5).gnomezilla=!0,this.maxCoins=0)};H(-40);H(20);I(-10);I(30);I(-110);L(60);L(90);L(100);L(110);J({x:144,width:13,height:22,things:D}).color="#006400";J({x:145,width:10,height:20,things:D}).color="#333";I(133);J({x:181,y:uWorldHeight,
width:60,height:10,things:D,className:"water"}).color="#2500FF";J({x:158,y:uWorldHeight-1,width:15,height:1,things:D,className:"wave1"});J({x:172,y:uWorldHeight-1,width:15,height:1,things:D,className:"wave1"});J({x:217,y:uWorldHeight-1,width:15,height:1,things:D,className:"wave1"});I(145,29);ma(-290);L(-140);b=J({x:-620,width:40,height:40,className:"evilWall"});b.evil=!0;b.sW=4;b.sH=4;ca=b;b=na(-569,13,17);b.evil=!0;I(-593);var d=0;b.spawner=setInterval(a,4E3);var g=b;a();u=J({x:2,y:2,width:15,height:2,
className:"bar"});u.color="#444";v=J({x:2,y:2,width:15,height:2,className:"bar"});v.color="#ffff00"}function na(a,b,d){thing=J({x:a,width:b,height:d,className:"campfire"});thing.sW=5;thing.sH=4;thing.burning=!0;thing.radius=13*m;thing.intensity=.5;return thing}
function Ea(a){if((coinTaker=e.currentCoinTaker)&&!(0>=e.coins)){if(coinTaker&&30<a.upHold&&coinTaker.coins<coinTaker.maxCoins){coinTaker.coins++;coinTaker.coins!==coinTaker.maxCoins||coinTaker.sated||(coinTaker.sated=!0,coinTaker.levelUp&&coinTaker.levelUp());--e.coins;var b=K(e.x/m+4,e.y/m-1,2,3);setTimeout(function(){b.canBePickedUp=!0;setTimeout(function(){--e.coins;0>e.coins&&(e.coins=0)},230)},30);a.upHold=0}a.upHold++}}
function K(a,b,d,g){var h=J({x:a,y:b,width:d,height:g,thingPool:ha,things:A,className:"coin"});h.vX=(0<.5-Math.random()?1:-1)*m/12+(0<.5-Math.random()?1:-1)*Math.random()*m/12;h.vY=-m/2-Math.random();h.canBePickedUp=!1;setTimeout(function(){return h.classList.add("in")},20);return h}function Ua(a){a.x+=a.vX;a.y+=a.vY;a.vY+=m/50;a.y>=f.clientHeight-a.clientHeight&&(a.y=f.clientHeight-a.clientHeight,a.vX=0,a.vY=0,setTimeout(function(){a&&a.active&&(a.canBePickedUp=!0)},500));Fa(a)}
function Va(a,b){a.active&&(a.canBePickedUp&&"stone"===a.className&&"evil"===b.filter&&!b.dead&&U(a,b)?(b.health--,0>b.health&&(b.dead=!0),a.canBePickedUp=!1,setTimeout(function(){a.active=!1},50)):"stone"===a.className||!a.canBePickedUp||!U(a,b)||b.maxCoins<=b.coins||(a.canBePickedUp=!1,b.coins++,a.vX=0,a.active=!1,"evil"!==a.filter&&(setTimeout(function(){a.y-=40*m;a.classList.add("picked-up")},30),setTimeout(function(){a.className="out";ha.push(a)},900))))}
function Ha(a){Va(a,e);B.forEach(function(b){Va(a,b)})}function za(a){Ua(a);Ha(a)}document.addEventListener("DOMContentLoaded",Wa);
function Wa(){e=document.querySelector(".horse");f=document.querySelector(".world");document.addEventListener("keydown",Ia);document.addEventListener("keyup",Ja);k=window.innerWidth;m=k/100;l=f.clientHeight;uWorldHeight=f.clientHeight/m;f.x=-125*m;e.y=f.clientHeight-e.clientHeight;e.width=e.clientWidth;e.height=e.clientHeight;q=document.querySelector(".canvas");q.width=q.clientWidth;q.height=q.clientHeight;ctx=q.getContext("2d");ctx.imageSmoothingEnabled=!1;N("./images/gnome-walk-sheet.gif","gnomeWalk");
N("./images/gnome-stand.gif","gnomeStand");N("./images/campfire-sheet.gif","campfire");N("./images/wall-sheet.gif","wall");N("./images/coinflower.gif","coinflower");N("./images/base-sheet.gif","base");N("./images/wave.gif","wave");N("./images/evil-wall.gif","evilWall");r=document.createElement("canvas");r.width=q.clientWidth;r.height=q.clientHeight;t=r.getContext("2d");t.imageSmoothingEnabled=!1;document.body.appendChild(r);Ta();Da(0,1);e.coins=0;e.active=!0;e.targetable=!0;e.classList.add("run");
document.body.classList.add("loaded","unlit");va();document.addEventListener("keydown",function(a){var b=document.querySelector(".keys");if(37===a.which||39===a.which)setTimeout(function(){b.classList.add("hide")},4E3),setTimeout(function(){b.classList.add("out")},5E3)})};
