<!doctype html><html><title>üê°‚öîÔ∏èüõ°</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta property="og:image" content="https://platane.github.io/js13k-2021/images/600x400.jpg"><meta name="description" content="A pretty blob simulation with zero game play. A game made for the 2021 js13kGames.com competition."><meta name="title" content="Delph"><meta name="viewport" content="width=device-width,initial-scale=1"><style>body{font-family:Helvetica,sans-serif;background-color:#f4f4f0}</style><body><canvas style="position:fixed;top:0;left:0;width:100%;height:100%;touch-action:none"></canvas><footer style="position:fixed;bottom:0;right:0;padding:0 4px"><a id="splash-up" href="#">controls</a> <a href="https://github.com/Platane/js13k-2021">source</a></footer><div id="splash" style="position:fixed;top:0;left:0;width:100%;height:100%;backdrop-filter:blur(5px);transition:opacity .2s ease;padding:40px;color:#333;background-color:#ffffff66;text-shadow:0 0 3px #f8f8f6;font-size:1.2em"><h1>Delph</h1><span>üê°‚öîÔ∏èüõ°</span><h4>A pretty blob simulation<br>With zero game play</h4><br><br><h5>Controls:</h5><ul><li><b>Left Click</b> to select a blob</li><li><b>Right Click</b> to command the blob to move</li><li><b>Drag</b> the blob to split it in half</li><br><li>There is no goals, apart from enjoying the graphics <i>(sorry)</i></li></ul><br><br><button id="splash-dismiss" style="padding:20px">Let's go !</button></div></body><script>let t=Object.fromEntries(Array.from(new URLSearchParams(window.location.search).entries()).map(([t,n])=>[t,"0"!==n])),n={t:0,o:0,s:0,i:0};if(Object.assign(n,t),"all"in t)for(let e in n)n[e]=t.all;let e=[Array.from({length:26},()=>new Uint16Array([65536*(.2*Math.random()+.5),65536*(.16*Math.random()+.6)])),Array.from({length:14},()=>new Uint16Array([65536*(.12*Math.random()+.4),65536*(.14*Math.random()+.15)])),Array.from({length:16},()=>new Uint16Array([65536*(.2*Math.random()+.3),65536*(.14*Math.random()+.32)]))];var o,r=1,a=[0,0],i=[65536,65536],l=e.map(()=>[]),s=0,u=null,c=null,f="undefined"!=typeof Float32Array?Float32Array:Array;function h(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function m(t,n,e,o){t[0]=n[0]+e[0]*o,t[1]=n[1]+e[1]*o}function M(t,n){return Math.hypot(n[0]-t[0],n[1]-t[1])}function d(t,n){var e=n[0]-t[0];return e*e+(t=n[1]-t[1])*t}function p(t){return Math.hypot(t[0],t[1])}function v(t,n){var e=n[0],o=n[1];0<(e=e*e+o*o)&&(e=1/Math.sqrt(e)),t[0]=n[0]*e,t[1]=n[1]*e}function g(t,n){return t[0]*n[0]+t[1]*n[1]}function y(t,n,e,o){var r=n[0];n=n[1],t[0]=r+o*(e[0]-r),t[1]=n+o*(e[1]-n)}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)}),o=new f(2),f!=Float32Array&&(o[0]=0,o[1]=0);let b=(t,n)=>{t[0][0]=Math.min(t[0][0],n[0]),t[0][1]=Math.min(t[0][1],n[1]),t[1][0]=Math.max(t[1][0],n[0]),t[1][1]=Math.max(t[1][1],n[1])},x=(t,n)=>{n.forEach(n=>b(t,n))},w=(t,n)=>{var e=t[0][0],o=t[1][0],r=n[0][0],a=n[1][0];return(e=e<=a&&r<=o||r<=o&&e<=a)&&(e=t[0][1],t=t[1][1],o=n[0][1],e=e<=(n=n[1][1])&&o<=t||o<=t&&e<=n),e},A=t=>(t[0][0]=Infinity,t[0][1]=Infinity,t[1][0]=-Infinity,t[1][1]=-Infinity,t),P=2.8/100*65536,S=Math.sqrt(-2*Math.log(.38)*P*P),k=(t,n,e)=>t.reduce((t,[o,r])=>(o=Math.hypot(n-o,e-r),t+Math.exp(-.5*o*o/(P*P))),0),K=Math.sqrt(-2*Math.log(.38)*P*P),B=K/4,T=[0,0],F=(t,n,e)=>{h(T,t[e],n=t[n]);var o=(e=p(T))-2*K;const r=Math.ceil(o/B);o=(o-(r-1)*B)/2;for(let a=0;a<r;a++){const i=r/2+(a%2?a/2:-(a+1)/2);if(!(.38<k(t,n[0]+T[0]/e*(K+o+i*B),n[1]+T[1]/e*(K+o+i*B))))return 0}return 1},I=(t,n,e=t.map((t,n)=>n))=>{const o=[n];for(-1!==(n=e.indexOf(n))&&e.splice(n,1),n=0;n<o.length;n++){const r=o[n];for(let n=e.length;n--;){const a=e[n];F(t,r,a)&&(e.splice(n,1),o.push(a))}}return o},U=(t,n,e)=>(t[0]=Math.floor(n/r-a[0]),t[1]=Math.floor(e/r-a[1]),t),_=Symbol(),j=Symbol(),q=null,D=0,N=0,$=[0,0],O=(t,n)=>{if(!(.38<k(n,t[0],t[1])))return null;let e=Infinity,o=0;return n.forEach((n,r)=>{(n=M(n,t))<e&&(e=n,o=r)}),I(n,o)},X=({pageX:t,pageY:n,button:o,ctrlKey:r,timeStamp:a})=>{switch(q=null,N=a,D=1,$[0]=t,$[1]=n,o){case 0:if(t=U([0,0],t,n),r)q=_,u=[t,t.slice()],c=null;else{if(!c||!((t,n,e)=>.38<k(t,n,e))((c??[]).map(t=>e[s][t]),t[0],t[1]))for(c=null,r=e.length;r--;)(n=O(t,e[r]))&&(c=n,s=r);c&&4<=c.length&&(q=j)}break;case 2:const o=c;if(o){var i=s;l[i].forEach((t,n)=>{t.l=t.l.filter(t=>!o.includes(t)),0===t.l.length&&l[i].splice(n,1)}),l[i].push({l:o.slice(),target:{u:U([0,0],t,n)}})}}},Y=({pageX:t,pageY:n})=>{switch(D=D&&50>M($,[t,n]),q){case j:const i=h([0,0],$,[t,n]);if(100<p(i)){q=null,v(i,i);const r=s,a=c.slice().sort((t,n)=>g(i,e[r][t])-g(i,e[r][n]));var o=Math.floor(a.length/2);const u=a.slice(0,o),f=a.slice(o),h=[0,0];U(h,t,n),m(h,h,i,500+500*Math.sqrt(o));const M=A([[],[]]);f.forEach(t=>b(M,e[r][t])),y(t=[0,0],...M,.5),m(t,t,i,500+500*Math.sqrt(o)),l[r].forEach((t,n)=>{t.l=t.l.filter(t=>!a.includes(t)),0===t.l.length&&l[r].splice(n,1)}),l[r].push({l:u,target:{u:h}},{l:f,target:{u:t}}),c=u.slice()}break;case _:(o=u)[1][0]=Math.floor(t/r-a[0]),o[1][1]=Math.floor(n/r-a[1]);const f=(([[t,n],[e,o]])=>{const r=Math.min(t,e),a=Math.max(t,e),i=Math.min(n,o),l=Math.max(n,o);return([t,n])=>r<=t&&t<=a&&i<=n&&n<=l})(o);c=e[s].reduce((t,n,e)=>f(n)?[...t,e]:t,[])}},z=({timeStamp:t})=>{if(q&&D&&240>t-N){t=U([0,0],$[0],$[1]);for(let n=e.length;n--;){const o=O(t,e[n]);o&&(c=o,s=n)}}q=u=null},L=document.getElementsByTagName("canvas")[0],R=L.getContext("2d"),C=()=>{L.width=L.clientWidth,L.height=L.clientHeight,r=Math.min(L.clientWidth/i[0],L.clientHeight/i[1])};C(),window.addEventListener("resize",C);let E=document.createElement("canvas");E.height=E.width=Math.min(window.innerWidth,window.innerHeight),E.style.position="fixed",E.style.zIndex="-1",E.style.top="0",E.style.left="0",E.style.transform="scale(1,-1)",document.body.appendChild(E);let G=E.getContext("webgl2"),H=(t,n)=>(n=G.createShader(n),G.shaderSource(n,t),G.compileShader(n),n),J=[],Q=[],V=document.createElement("canvas");V.width=V.height=128;let W=V.getContext("2d");W.scale(1.28,1.28),W.fillStyle="orange",W.beginPath(),W.fillRect(0,0,100,100),W.fillStyle="#f5ce88",W.beginPath(),W.moveTo(50,14),W.lineTo(10,55),W.lineTo(90,55),W.fill(),W.beginPath(),W.arc(50,60,28,0,Math.PI),W.fill();let{data:Z}=W.getImageData(0,0,128,128);Q.push(Z),J.push(V);let tt=document.createElement("canvas");tt.width=tt.height=128;let nt=tt.getContext("2d");nt.scale(1.28,1.28),nt.fillStyle="seagreen",nt.beginPath(),nt.fillRect(0,0,100,100),nt.fillStyle="#3fb774",nt.beginPath(),nt.moveTo(50,14),nt.lineTo(10,55),nt.lineTo(50,80),nt.lineTo(90,55),nt.fill();let{data:et}=nt.getImageData(0,0,128,128);Q.push(et),J.push(tt);let ot=document.createElement("canvas");ot.width=ot.height=128;let rt=ot.getContext("2d");rt.scale(1.28,1.28),rt.fillStyle="#b73f2b",rt.beginPath(),rt.fillRect(0,0,100,100),rt.fillStyle="#bf5d4d",rt.beginPath(),rt.arc(50,60,28,0,Math.PI),rt.fill(),rt.beginPath(),rt.arc(50,40,28,-Math.PI,0),rt.fill();let{data:at}=rt.getImageData(0,0,128,128);Q.push(at),J.push(ot);let it=document.createElement("canvas");it.width=it.height=128;let lt=it.getContext("2d");lt.scale(1.28,1.28),lt.fillStyle="#da9143",lt.beginPath(),lt.fillRect(0,0,100,100),lt.fillStyle="#e09c52",lt.beginPath(),lt.arc(50,60,28,0,Math.PI),lt.fill(),lt.beginPath(),lt.arc(50,40,28,-Math.PI,0),lt.fill();let{data:st}=lt.getImageData(0,0,128,128);Q.push(st),J.push(it);let ut=Q.map(t=>`rgb(${t[0]},${t[1]},${t[2]})`);Array.from({length:400},()=>({l:[0],h:[[0,0],[0,0]]}));let ct=Array.from({length:400},()=>({l:e.map(()=>[]),h:[[0,0],[0,0]]})),ft=t=>{let n=0;e.map((e,o)=>e.forEach((e,r)=>{const a=ct[n++];a.h[0][0]=e[0]-t,a.h[0][1]=e[1]-t,a.h[1][0]=e[0]+t,a.h[1][1]=e[1]+t,a.l.forEach(t=>t.length=0),a.l[o].push(r)}));let o=1;for(;o;){o=0;for(let t=0;t<n;t++)for(let e=t+1;e<n;e++)w(ct[t].h,ct[e].h)&&(x(ct[t].h,ct[e].h),ct[e].l.forEach((n,o)=>{ct[t].l[o].push(...ct[e].l[o])}),ct.push(...ct.splice(e,1)),n--,o=1)}return ct.slice(0,n)};const ht=H("#version 300 es\nuniform highp vec2 camera_a;\nuniform highp vec2 camera_offset;\nin vec2 position;\nin float iBox;\nout vec2 pos;\nflat out int iB;\n// out int iBox2;\nvoid main() {\ngl_Position = vec4(position.xy * camera_a * 2.0 - 1.0, 0.0, 1.0);\npos = position.xy;\niB = int(iBox);\n}",G.VERTEX_SHADER),mt=H("#version 300 es\nprecision highp float;\nuniform highp usampler2D pointTexture;\nuniform highp sampler2D bannerTexture;\nuniform highp float tauSquare;\nuniform highp float threshold;\nuniform int nPoint;\nuniform int nK;\nin vec2 pos;\nflat in int iB;\nout vec4 color;\nfloat gauss(float x) { return exp(-0.5 * (x * x) / (tauSquare)); }\nvoid main() {\n// color = vec4(0.0, 0.0, 0.0, 0.07);\nfloat bestSum = 0.0;\nint bestK = -1;\nfor (int k = 0; k < nK; k++) {\nfloat sum = 0.0;\nfor (int i = 0; i < nPoint; i++) {\nuvec2 uPointPosition =\ntexelFetch(pointTexture, ivec2(iB * nK + k, i), 0).xy;\nvec2 pointPosition = vec2(uPointPosition.xy);\nif (pointPosition.x != 0.0 || pointPosition.y != 0.0) {\nfloat d = distance(pointPosition, pos);\nsum += gauss(d);\n}\n}\nif (sum > threshold && sum > bestSum) {\nbestSum = sum;\nbestK = k;\n}\n}\nif (bestK >= 0) {\nfloat m = 0.0003;\nfloat w = 1.0 / float(nK);\nfloat y = floor(pos.y * m);\nvec2 u = vec2(\n//\n(mod((pos.x) * m + 0.5 * mod(y, 2.0), 1.0) * 0.96 + 0.02) * w +\nw * float(bestK),\n//\nmod(pos.y * m, 1.0) * 0.96 + 0.02);\ncolor = texture(bannerTexture, u);\ncolor.w = (bestSum - threshold) / (threshold * 0.1);\n}\n}\n",G.FRAGMENT_SHADER),Mt=G.createProgram();G.attachShader(Mt,ht),G.attachShader(Mt,mt),G.deleteShader(ht),G.deleteShader(mt),G.linkProgram(Mt),G.useProgram(Mt);let dt=e.length,pt=16*dt,vt=G.createTexture(),gt=new Uint16Array(256*pt),yt=G.getUniformLocation(Mt,"pointTexture");G.activeTexture(G.TEXTURE1),G.bindTexture(G.TEXTURE_2D,vt),G.uniform1i(yt,1),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST);let bt=G.createTexture(),xt=G.getUniformLocation(Mt,"bannerTexture");G.activeTexture(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,bt),G.uniform1i(xt,0);let wt=document.createElement("canvas");wt.width=e.length*J[0].width,wt.height=J[0].height;let At=wt.getContext("2d");e.forEach((t,n)=>{At.drawImage(t=J[n%J.length],n*t.width,0)}),G.texImage2D(G.TEXTURE_2D,0,G.RGBA,wt.width,wt.height,0,G.RGBA,G.UNSIGNED_BYTE,wt),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.generateMipmap(G.TEXTURE_2D),G.uniform1f(G.getUniformLocation(Mt,"tauSquare"),P*P),G.uniform1f(G.getUniformLocation(Mt,"threshold"),.38),G.uniform1i(G.getUniformLocation(Mt,"nK"),e.length);let Pt=G.getUniformLocation(Mt,"nPoint"),St=G.getUniformLocation(Mt,"camera_a"),kt=G.getUniformLocation(Mt,"camera_offset"),Kt=G.createBuffer(),Bt=new Float32Array(192),Tt=G.getAttribLocation(Mt,"position");G.bindBuffer(G.ARRAY_BUFFER,Kt),G.enableVertexAttribArray(Tt),G.vertexAttribPointer(Tt,2,G.FLOAT,0,0,0),G.bufferData(G.ARRAY_BUFFER,Bt,G.STATIC_DRAW),G.bindAttribLocation(Mt,Tt,"position");let Ft=G.createBuffer(),It=new Float32Array(96);for(let t=16;t--;)It.fill(t,6*t,6*(t+1));let Ut=G.getAttribLocation(Mt,"iBox");G.bindBuffer(G.ARRAY_BUFFER,Ft),G.enableVertexAttribArray(Ut),G.vertexAttribPointer(Ut,1,G.FLOAT,0,0,0),G.bufferData(G.ARRAY_BUFFER,It,G.STATIC_DRAW),G.bindAttribLocation(Mt,Ut,"iBox");let _t=[0,0],jt=[0,0],qt=[0,0],Dt=[0,0],Nt=[0,0],$t=(t,n,e)=>{const o=[0,0,0];return Dt[0]=(t[0]+n[0])/2,Dt[1]=(t[1]+n[1])/2,Nt[0]=(e[0]+n[0])/2,Nt[1]=(e[1]+n[1])/2,jt[0]=t[1]-n[1],jt[1]=-(t[0]-n[0]),qt[0]=n[1]-e[1],qt[1]=-(n[0]-e[0]),Math.abs(jt[0]*qt[1]-jt[1]*qt[0])<Number.EPSILON?Math.abs(jt[0]*(Dt[1]-Nt[1])-jt[1]*(Dt[1]-Nt[1]))<Number.EPSILON&&(o[0]=Dt[0],o[1]=Dt[1]):(n=Math.abs(qt[0])<Number.EPSILON?(Nt[0]-Dt[0])/jt[0]:Math.abs(qt[1])<Number.EPSILON?(Nt[1]-Dt[1])/jt[1]:((Dt[0]-Nt[0])/qt[0]-(Dt[1]-Nt[1])/qt[1])/(jt[1]/qt[1]-jt[0]/qt[0]),o[0]=Dt[0]+jt[0]*n,o[1]=Dt[1]+jt[1]*n),o[2]=d(t,o),o},Ot=[[0,0],[0,0]],Xt=t=>{x(A(Ot),t),Ot[0][0]-=1e6,Ot[0][1]-=1e6,Ot[1][0]+=1e6,Ot[1][1]+=1e6;var n=[[Ot[0][0],Ot[0][1]],[Ot[0][0],Ot[0][1]+2*(Ot[1][1]-Ot[0][1])],[Ot[0][0]+2*(Ot[1][0]-Ot[0][0]),Ot[0][1]]];const e=t.length;t.push(...n);const o=[[e,e+1,e+2]];n=[$t(...n)];for(let i=e;i--;){const e=t[i],l=[];for(var r=n.length;r--;)if(d(e,n[r])<=n[r][2]){var a=o[r];n.splice(r,1),o.splice(r,1);for(let t=3;t--;){const n=a[t],e=a[(t+1)%3],o=l.findIndex(([t,o])=>t===n&&o===e||t===e&&o===n);-1<o?l.splice(o,1):l.push([n,e,0])}}for(r=l.length;r--;)(a=l[r])[2]=i,n.push($t(t[a[0]],t[a[1]],e)),o.push(a)}for(n=o.length;n--;)(o[n][0]>=e||o[n][1]>=e||o[n][2]>=e)&&o.splice(n,1);return t.splice(e,3),o},Yt=(t,n,e,o,r,a)=>{const i=S/100;for(;Math.abs(r-a)>i;){const t=(r+a)/2;.38<k(n,e[0]+t*o[0],e[1]+t*o[1])?r=t:a=t}return t[0]=e[0]+(n=(r+a)/2)*o[0],t[1]=e[1]+n*o[1],t},zt=[1,0],Lt=[1,0],Rt=[0,0],Ct=[0,0],Et=(t,n,e)=>{var o=[0,0],r=Gt;let a=e;Lt[0]=r[1],Lt[1]=-r[0];for(let i=3;i--;){if(m(Rt,n,r,a),m(Rt,Rt,Lt,-e/2),m(Ct,Rt,Lt,e),.38<k(t,Rt[0],Rt[1])&&!(.38<k(t,Ct[0],Ct[1])))return Yt(o,t,Rt,Lt,0,e);a/=2}return null},Gt=[0,0],Ht=[1,0],Jt=t=>{var n=S/3;let e=(t=>{var n=[0,0];((t,n)=>{t[0]=n[0],t[1]=n[1]})(n,t.reduce((t,n)=>t[0]>n[0]?t:n));const e=S/1.2;n[0]+=.9*S;for(let o=100;o--;)if(n[0]+=e,!(.38<k(t,n[0],n[1])))return Yt(n,t,n,zt,-e,0);return null})(t);var o=[e[0],e[1]-1];const r=[e];for(let i=200;i--;){let i;if(h(Gt,e,o),v(Gt,Gt),i=Et(t,e,n),!i){var a=Gt;for((o=Ht)[0]=a[1],o[1]=-a[0],o=5;!i&&o--;)y(Gt,Gt,Ht,.5),v(Gt,Gt),i=Et(t,e,n)}if(!i)return null;if(o=e,e=i,4<r.length&&M(r[0],e)<1.6*n){0<g(t=h([0,0],r[0],e),Gt)&&r.push(e);break}r.push(e)}return r},Qt=(2.6*S)**2,Vt=t=>{const n=t.shift();if(!n)return[];const e=[n.m];let o;for(o=n;o=Wt(t,o);)e.push(o.m);for(o=n;o=Wt(t,o);)e.unshift(o.m);return t=Vt(t),2<=e.length&&t.push({M:n.M,p:n.p,line:e}),t},Wt=(t,n)=>{for(let e=t.length;e--;){const o=t[e];for(let r=n.e.length;r--;)for(let a=o.e.length;a--;)if(n.e[r]===o.e[a])return n.e.splice(r,1),o.e.splice(a,1),t.splice(e,1),o}return null},Zt=[0,0],tn=[0,0],nn=[0,0],en=e.map(()=>Array.from({length:128},()=>[0,0])),on=1/60,rn=t=>{600>t&&(t=600);const n=.9*S;let e=4e9/(t*t);return t>n&&(e/=(1+(t-n)/(.5*S))**4),t>1.3*n&&(e=0),e},an=Date.now()/1e3,ln=0,sn=()=>{for(var t=Date.now()/1e3;an+.016666666666666666*ln<=t;ln++)ft(1.5*S).forEach(t=>{const n=[],o=[];t.l.forEach((t,r)=>t.forEach(t=>{n.push(e[r][t]),o.push(r)}));const r=Xt(n),a=2<=t.l.reduce((t,n)=>t+ +!!n.length,0)?((t,n,e)=>{const o=[];return e.forEach(e=>{if(!(n[e[0]]!==n[e[1]]&&n[e[0]]!==n[e[2]]&&n[e[1]]!==n[e[2]]||n[e[0]]===n[e[1]]&&n[e[0]]===n[e[2]]))for(let u=3;u--;){const c=e[u],f=e[(u+1)%3],h=e[(u+2)%3];if(n[c]===n[f]&&(d(t[h],t[c])<Qt||d(t[h],t[f])<Qt)){var r=o,a=r.push,i=t[h],l=t[c],s=t[f];i=new Uint16Array([((i[0]+l[0])/2+(i[0]+s[0])/2)/2,((i[1]+l[1])/2+(i[1]+s[1])/2)/2]),a.call(r,{m:i,M:Math.min(n[c],n[h]),p:Math.max(n[c],n[h]),e:[Math.min(c,h)*t.length+Math.max(c,h),Math.min(f,h)*t.length+Math.max(f,h)]})}}}),Vt(o)})(n,o,r):[];t.l.forEach((n,o)=>n.forEach(n=>{const r=e[o][n],i=en[o][n];i[0]=0,i[1]=0;const s=l[o].find(t=>t.l.includes(n));t.l[o].forEach(t=>{(t=e[o][t])!==r&&(h(tn,t,r),t=p(tn),m(i,i,tn,-rn(t)*(s?1:.8)/t))}),s&&(h(tn,s.target.u,r),v(tn,tn),m(i,i,tn,8e3)),s&&a.forEach(({line:t})=>{for(let l=t.length-1;l--;){var n=t[l];h(nn,t[l+1],n);const s=p(nn);var e=1/s,o=nn,a=nn;o[0]=a[0]*e,o[1]=a[1]*e,(e=tn)[0]=(o=nn)[1],e[1]=-o[0],h(Zt,r,n),n=g(nn,Zt),0>(e=g(tn,Zt))&&(a=o=tn,o[0]=-a[0],o[1]=-a[1]),o=Math.max(1400,Math.abs(e)),-S/10<n&&n<s+S/10&&Math.abs(e)<1.4*S&&m(i,i,tn,1e7/o)}})})),t.l.forEach((t,n)=>t.forEach(t=>{const o=e[n][t];o[0]+=(t=en[n][t])[0]*on,o[1]+=t[1]*on}))}),l.forEach((t,n)=>t.forEach((t,o)=>{for(let o=t.l.length;o--;)1e3>M(e[n][t.l[o]],t.target.u)&&t.l.splice(o,1);0===t.l.length&&l[n].splice(o,1)}));if(R.clearRect(0,0,9999,9999),R.save(),R.scale(r,r),R.translate(a[0],a[1]),(()=>{const t=ft(1.6*S);gt.fill(0),t.forEach(({h:t,l:n},o)=>{Bt[12*o]=t[0][0],Bt[12*o+1]=t[0][1],Bt[12*o+2]=t[1][0],Bt[12*o+3]=t[0][1],Bt[12*o+4]=t[1][0],Bt[12*o+5]=t[1][1],Bt[12*o+6]=t[1][0],Bt[12*o+7]=t[1][1],Bt[12*o+8]=t[0][0],Bt[12*o+9]=t[1][1],Bt[12*o+10]=t[0][0],Bt[12*o+11]=t[0][1],n.forEach((t,n)=>t.forEach((t,r)=>{const[a,i]=e[n][t];128>r&&(gt[0+(t=2*(r*pt+(o*dt+n)))]=a,gt[t+1]=i)}))});const n=Math.max(...t.map(({l:t})=>t.map(({length:t})=>t)).flat());G.useProgram(Mt),G.uniform1i(Pt,n),G.uniform2f(St,1/i[0],1/i[1]),G.uniform2f(kt,a[0],a[1]),G.bindBuffer(G.ARRAY_BUFFER,Kt),G.bufferData(G.ARRAY_BUFFER,Bt,G.DYNAMIC_DRAW),G.activeTexture(G.TEXTURE1),G.bindTexture(G.TEXTURE_2D,vt),G.texImage2D(G.TEXTURE_2D,0,G.RG16UI,pt,128,0,G.RG_INTEGER,G.UNSIGNED_SHORT,gt),G.activeTexture(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,bt),G.clear(G.COLOR_BUFFER_BIT),G.drawArrays(G.TRIANGLES,0,6*t.length)})(),R.lineWidth=.5/r,R.strokeStyle="#000",u){const[[t,n],[e,o]]=u;R.strokeRect(t,n,e-t,o-n)}if((()=>{if(c){const n=s,o=c.slice();for(R.lineWidth=3/r,R.strokeStyle="#666";o.length;){var t=I(e[n],o[0],o);if(t=Jt(t.map(t=>e[n][t]))){R.beginPath(),R.moveTo(t[0][0],t[0][1]);for(let n=t.length;n--;)R.lineTo(t[n][0],t[n][1]);R.stroke()}}}})(),n.s&&(e.forEach((t,n)=>{for(const[e,o]of t)R.fillStyle="#333",R.beginPath(),R.arc(e,o,5/r,0,2*Math.PI),R.fill(),R.fillStyle=ut[n],R.beginPath(),R.arc(e,o,3/r,0,2*Math.PI),R.fill()}),(c||[]).forEach(t=>{const[n,o]=e[0][t];R.fillStyle="#aaa",R.beginPath(),R.arc(n,o,3.2/r,0,2*Math.PI),R.fill()}),R.lineWidth=1/r,l.forEach((t,n)=>t.forEach(t=>{t.l.forEach(o=>{h(_t,t.target.u,o=e[n][o]),v(_t,_t),m(_t,o,_t,20/r),R.beginPath(),R.moveTo(o[0],o[1]),R.lineTo(_t[0],_t[1]),R.stroke()})}))),n.i&&(R.lineWidth=.5/r,ft(1.6*S).forEach(({h:t})=>{R.strokeStyle="purple",R.beginPath(),R.strokeRect(t[0][0],t[0][1],t[1][0]-t[0][0],t[1][1]-t[0][1])})),n.o&&(R.lineWidth=.8/r,ft(1.6*S).forEach(({l:t})=>{const n=[],o=[];t.forEach((t,r)=>t.forEach(t=>{n.push(e[r][t]),o.push(r)})),t=Xt(n);const r=n.map(()=>[]);t.forEach(t=>{for(let e=3;e--;){var n=(e+1)%3;const o=Math.min(t[e],t[n]);n=Math.max(t[e],t[n]),r[o]=r[o]||[],r[o].includes(n)||r[o].push(n)}}),r.forEach((t,e)=>t.forEach(t=>{R.strokeStyle=o[e]!=o[t]?"purple":"blue",R.beginPath(),R.moveTo(n[e][0],n[e][1]),R.lineTo(n[t][0],n[t][1]),R.stroke()}))})),n.t){for(R.lineWidth=.7/r,R.fillStyle=R.strokeStyle="purple",R.font=`${Math.floor(8/r)}px sans-serif `,R.beginPath(),R.moveTo(10/r,17/r),R.lineTo(10/r,20/r),R.lineTo(10/r+1e3,20/r),R.lineTo(10/r+1e3,17/r),R.stroke(),R.beginPath(),R.fillText(Intl.NumberFormat().format(1e3),10/r,16/r),R.beginPath(),R.moveTo(10/r,47/r),R.lineTo(10/r,50/r),R.lineTo(10/r+1e4,50/r),R.lineTo(10/r+1e4,47/r),R.stroke(),R.beginPath(),R.fillText(Intl.NumberFormat().format(1e4),10/r,46/r),R.save(),R.translate(10/r,120/r),R.strokeStyle="black",R.beginPath(),R.moveTo(0,0),R.lineTo(1e4,0),R.stroke(),R.strokeStyle="red",R.beginPath(),R.moveTo(0,0),t=0;1e4>t;t+=50)R.lineTo(t,.4*-rn(t));R.stroke(),R.restore()}R.restore(),requestAnimationFrame(sn)};sn();let un,cn=()=>{clearTimeout(un);const t=Array.from({length:Math.floor(e[0].length)},(t,n)=>n);l[0].length=0,l[0].push({l:t,target:{u:new Uint16Array([(.6*Math.random()+.2)*i[0],(.6*Math.random()+.2)*i[1]])}}),un=setTimeout(cn,3e3)};cn(),document.getElementById("splash-dismiss").addEventListener("click",()=>{clearTimeout(un),document.addEventListener("mousemove",Y),document.addEventListener("mousedown",X),document.addEventListener("mouseup",z),document.addEventListener("contextmenu",t=>t.preventDefault());let t=document.getElementById("splash");t.style.opacity="0",t.style.pointerEvents="none"}),document.getElementById("splash-up").addEventListener("click",()=>{let t=document.getElementById("splash");t.style.opacity="1",t.style.pointerEvents="auto"});</script></html>