{"version":3,"file":"bundle.js","sources":["../src/main.js"],"sourcesContent":["const GLOBAL   = {};\nGLOBAL.mouse   = {};\nGLOBAL.keys    = [];\nGLOBAL.timer   = null;\n\nconst LEFT = 37;\nconst RIGHT = 39;\nconst UP = 38;\nconst validKeys = [LEFT, RIGHT, UP];\nconst GRAVITY  = 0.1;\nconst FRICTION = 0.7;\n\nfunction getXRange(min) {\n  return { min: min, max: window.innerWidth - min };\n}\n\nfunction getYRange(min) {\n  return { min: min, max: window.innerHeight - min };\n}\n\nfunction getRandomArbitrary(min, max) {\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction getRandomX(min) {\n  return getRandomArbitrary(min, window.innerWidth - min);\n}\n\nfunction getRandomY(min) {\n  return getRandomArbitrary(min, window.innerHeight - min);\n}\n\nfunction getRandom(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction getRadians(angle) {\n  return angle * Math.PI/180;\n}\n\nfunction getDxDy(angle, speed) {\n  const dx = Math.cos(getRadians(angle)) * speed;\n  const dy = Math.sin(getRadians(angle)) * speed;\n  return { dx, dy };\n}\n\nfunction createCircle() {\n  const type = 'circle';\n  const id = 100;\n  const radius = 50;\n  const x = window.innerWidth / 2;\n  const y = 100;\n  const nextX = x;\n  const nextY = y;\n  const testAngle = 270;\n  const angle = 0;\n  const speed = Math.abs(radius-100)/16;\n  const { dx, dy } = getDxDy(angle, speed);\n  const xRange = getXRange(radius);\n  const yRange = getYRange(radius);\n  const satelliteAngle = 0;\n  return { type, id, radius, x, y, angle, testAngle, speed, dx, dy, xRange, yRange, satelliteAngle };\n}\n\nfunction clone(obj) {\n  return Object.assign({}, obj);\n}\n\nfunction compose() {\n  var fns = arguments;\n\n  return function (result) {\n    for (var i = fns.length - 1; i > -1; i--) {\n      result = fns[i].call(this, result);\n    }\n\n    return result;\n  };\n};\n\nfunction clearScreen(ctx) {\n  ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n}\n\nfunction isCircle(obj) {\n  return obj && obj.type === 'circle';\n}\n\nfunction isBall(obj) {\n  return obj && obj.type === 'ball';\n}\n\nfunction isOverCount(obj) {\n  return obj && obj.type === 'ball' && (obj.lifeCount >= 300);\n}\n\nfunction isUnderCount(obj) {\n  return obj && obj.type === 'ball' && (obj.lifeCount < 300);\n}\n\nfunction isBlock(obj) {\n  return obj && obj.type === 'block';\n}\n\nfunction isNone(obj) {\n  return obj && obj.type === 'none';\n}\n\nfunction isBottom(obj) {\n  if (isBall(obj)) {\n    if ((obj.y + obj.radius) >= window.innerHeight) {\n      return true;\n    } else {\n      return false;\n    }\n  } else {\n    if (obj.y >= window.innerHeight) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nfunction isTop(obj) {\n  if (isBlock(obj)) {\n    if (obj.y <= 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nfunction isInRange(value, range) {\n  return value ? (value >= range.min && value <= range.max) : false;\n}\n\nfunction getTestAngle(angle, currentTestAngle) {\n  if (angle === 0) {\n    const nextTestAngle = currentTestAngle + 1;\n    if (nextTestAngle > 358) {\n      return 358;\n    } else {\n      return nextTestAngle;\n    }\n  } else {\n    const nextTestAngle = currentTestAngle - 1;\n    if (nextTestAngle < 182) {\n      return 182;\n    } else {\n      return nextTestAngle;\n    }\n  }\n}\n\nfunction getSatelliteAngle(currentAngle) {\n  const nextAngle = currentAngle + 10;\n  return nextAngle >= 360 ? 0 : nextAngle;\n}\n\nfunction applyLeftOrRight(circle) {\n  if (circle.dx === undefined) return circle;\n  const c = clone(circle);\n  if (isInRange(c.x + c.dx, c.xRange)) {\n    c.x += c.dx;\n  } else {\n    c.angle = 180 - c.angle;\n    const { dx } = getDxDy(c.angle, c.speed);\n    c.dx = dx;\n  }\n\n  c.testAngle = getTestAngle(c.angle, c.testAngle)\n  return c;\n}\n\nfunction applyUpOrDown(circle) {\n  if (circle.dy === undefined) return circle;\n  const c = clone(circle);\n  if (isInRange(c.y + c.dy, c.yRange)) {\n    c.y += c.dy;\n  } else {\n    c.angle = 360 - c.angle;\n    const { dy } = getDxDy(c.angle, c.speed);\n    c.dy = dy;\n  }\n  return c;\n}\n\nfunction applyKeyCircle(circle) {\n  if (GLOBAL.keys.length === 0) {\n    return circle;\n  }\n  const key = GLOBAL.keys[0];\n  if (key === LEFT || key === RIGHT) {\n    GLOBAL.keys.shift();\n    const c = clone(circle);\n\n    if (key === RIGHT) {\n      c.angle = 0;\n    } else {\n      c.angle = 180;\n    }\n    const { dx } = getDxDy(c.angle, c.speed);\n    c.dx = dx;\n\n    if (isInRange(c.x + c.dx, c.xRange)) {\n      c.x += c.dx;\n    }\n\n    c.testAngle = getTestAngle(c.angle, c.testAngle)\n    return c;\n  }\n  return circle\n}\n\nfunction applySatellite(circle) {\n  const c = clone(circle);\n  c.satelliteAngle = getSatelliteAngle(c.satelliteAngle)\n  return c;\n}\n\nconst update = filter => style => objs => {\n  return objs.map((obj, index) =>\n    filter(obj, objs, index) ? style(obj, objs, index) : obj\n  );\n}\n\nfunction incrementLifeCount(obj) {\n  const o = clone(obj);\n  o.lifeCount += 1;\n  return o;\n}\n\nconst applyFreely = compose(\n  incrementLifeCount,\n  applyLeftOrRight,\n  applyUpOrDown\n);\n\nfunction applyGravity(circle) {\n  const c = clone(circle);\n  if (!isInRange(c.y + c.dy, c.yRange)) {\n    c.dy = -c.dy * FRICTION;\n  } else {\n    c.dy += GRAVITY;\n  }\n  c.y += c.dy;\n  return c;\n}\n\nfunction upBlock(block) {\n  const b = clone(block);\n  b.height += b.speed;\n  b.y -= b.speed;\n  return b;\n}\n\nfunction downBlock(block) {\n  const b = clone(block);\n  b.height -= 10;\n  b.y += 10;\n  return b;\n}\n\nconst applyBlock = block => (\n  isInRange(block.y, getYRange(0)) ? upBlock(block) : {}\n);\n\nfunction countDown(obj) {\n  if (!obj) return obj;\n  const aObj = clone(obj);\n  if (aObj.timeoutCount === undefined) {\n    aObj.timeoutCount = 5;\n  }\n  aObj.timeoutCount--;\n  if (aObj.timeoutCount === 0) {\n    aObj.type = 'none';\n    return aObj;\n  } else {\n    return aObj;\n  }\n}\n\nfunction pauseBlock(obj) {\n  clearTimeout(GLOBAL.timer);\n  return obj;\n}\n\nconst checkBottom = obj => isBottom(obj) ? countDown(obj) : obj;\nconst checkTop = obj => isTop(obj) ? pauseBlock(obj) : obj;\n\nconst checkBallOnTheBottom = update(isBall)(checkBottom);\nconst checkBlockOnTheBottom = update(isBlock)(checkBottom);\nconst checkBlockOnTheTop = update(isBlock)(checkTop);\nconst updateBall = update(isUnderCount)(applyFreely);\nconst moveLeftOrRight = update(isOverCount)(applyLeftOrRight);\nconst gravityBall = update(isOverCount)(applyGravity);\nconst updateCircle = update(isCircle)(applyKeyCircle);\nconst updateSatellite = update(isCircle)(applySatellite);\nconst updateBlock = update(isBlock)(applyBlock);\nconst removeNoneType = (objs) => {\n  return objs.filter(obj => (obj.type !== 'none'));\n}\n\nconst widenBlock = (block, size) => {\n  const b = clone(block);\n  b.x = b.x - size;\n  b.y = b.y - size;\n  b.width = b.width + size;\n  b.height = b.height + size;\n  return b;\n}\n\nfunction isOverlap(ball, block) {\n  if (isBall(ball) && isBlock(block)) {\n    const wBlock = widenBlock(block, ball.radius);\n    if (\n      ball.x >= wBlock.x &&\n      ball.x <= wBlock.x + wBlock.width &&\n      ball.y >= wBlock.y &&\n      ball.y <= wBlock.y + wBlock.height\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\nconst checkCollisionBall = objs => {\n  const blocks = objs.filter(item => isBlock(item));\n  return objs.map(obj => {\n    if (isBall(obj)) {\n      const collision = blocks.some(block => isOverlap(obj, block));\n      if (collision) {\n        obj.type = \"none\";\n        return obj;\n      } else {\n        return obj;\n      }\n    } else {\n      return obj;\n    }\n  });\n}\n\nconst checkCollisionBlock = objs => {\n  const balls = objs.filter(item => isBall(item));\n  return objs.map(obj => {\n    if (isBlock(obj)) {\n      const collision = balls.some(ball => isOverlap(ball, obj));\n      if (collision) {\n        obj.fillStyle = '#80FF83';\n        return downBlock(obj);\n      } else {\n        obj.fillStyle = '#36B339';\n        return obj;\n      }\n    } else {\n      return obj;\n    }\n  });\n}\n\nfunction drawCircle(ctx, circle) {\n  ctx.beginPath();\n  ctx.fillStyle = circle.fillStyle || \"rgba(20, 100, 20, 0.1)\";\n  ctx.strokeStyle = circle.strokeStyle || \"black\";\n  ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI*2, false);\n  ctx.stroke();\n  ctx.fill();\n  ctx.beginPath();\n  ctx.fillStyle = circle.fillStyle || \"rgba(20, 100, 100, 0.1)\";\n  ctx.arc(circle.x, circle.y, circle.radius, getRadians(180 + 90 + circle.testAngle), getRadians(180 + 270 + circle.testAngle), false);\n  ctx.fill();\n}\n\nfunction drawDirectionLine(ctx, circle) {\n  ctx.beginPath();\n  ctx.strokeStyle = 'pink';\n  ctx.moveTo(circle.x, circle.y);\n  const { dx, dy } = getDxDy(circle.testAngle, circle.radius);\n  ctx.lineTo(circle.x + dx, circle.y + dy);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n\nfunction drawSatellite(ctx, circle) {\n  ctx.beginPath();\n  const { dx, dy } = getDxDy(circle.satelliteAngle, circle.radius);\n  const x = circle.x + dx;\n  const y = circle.y + dy;\n  ctx.arc(x, y, circle.radius/10, 0, Math.PI*2, false);\n  ctx.fillStyle = \"#FF98C6\"\n  ctx.strokeStyle = \"black\";\n  ctx.stroke();\n  ctx.fill();\n}\n\nconst drawBlock = ctx => {\n  return circles => {\n    circles.forEach(function(item) {\n      if(isBlock(item)) {\n        ctx.fillStyle = item.fillStyle;\n        ctx.fillRect(item.x, item.y, item.width, item.height);\n      }\n    });\n    return circles;\n  }\n}\n\nconst drawCircles = ctx => circles => {\n  circles.forEach(function(circle) {\n    if (isCircle(circle)) {\n      drawCircle(ctx, circle);\n      drawDirectionLine(ctx, circle);\n      drawSatellite(ctx, circle);\n    }\n    if (isBall(circle)) {\n      drawCircle(ctx, circle);\n    }\n  });\n  return circles;\n}\n\nfunction findBall(objs) {\n  return objs.find(item => {\n    return isBall(item);\n  });\n}\n\nfunction findCircle(objs) {\n  return objs.find(item => {\n    return isCircle(item);\n  });\n}\n\nfunction createBall(circle) {\n  const ball = clone(circle);\n  ball.type = 'ball';\n  ball.angle = circle.testAngle;\n  ball.testAngle = 0;\n  ball.fillStyle = '#B32464';\n  ball.radius = 6;\n  ball.xRange = getXRange(ball.radius);\n  ball.yRange = getYRange(ball.radius);\n  ball.speed = ball.speed * 1.5;\n  ball.lifeCount = 0;\n  const { dx, dy } = getDxDy(ball.angle, ball.speed);\n  ball.dx = dx;\n  ball.dy = dy;\n  return ball;\n}\n\nfunction addBall(objs) {\n  if (GLOBAL.keys.length === 0) {\n    return objs;\n  }\n\n  const key = GLOBAL.keys[0];\n  if (key === UP) {\n    GLOBAL.keys.shift();\n    const c = findCircle(objs);\n    if (c) {\n      c.id = objs.length;\n      objs.push(createBall(c));\n    }\n  }\n  return objs;\n}\n\nfunction findBlock(objs) {\n  return objs.find(obj => {\n    return isBlock(obj);\n  });\n}\n\nfunction createBlock(x, width) {\n  const type = 'block';\n  const height = 50;\n  const y = window.innerHeight - height;\n  const fillStyle = 'blue'\n  const xRange = getXRange(0);\n  const speed = getRandomArbitrary(1, 2);\n  return { type, x, y, width, height, fillStyle, xRange, speed };\n}\n\nfunction createBlocks(barLen) {\n  const blocks = [];\n  const width = window.innerWidth / barLen;\n  for (let i = 0; i < barLen; i++) {\n    blocks.push(createBlock(width * i, width));\n  }\n  return blocks;\n}\n\nconst addBlock = (function () {\n  let count = 0;\n  let step = 0;\n  return function (objs) {\n    const block = findBlock(objs);\n    if (block) {\n      count = 0;\n    } else {\n      count++;\n      if (count > 50) {\n        count = 0;\n        step++;\n        return objs.concat(createBlocks(step));\n      }\n    }\n    return objs;\n  };\n})();\n\nfunction startAnimation(ctx) {\n  let objs = [];\n  objs.push(createCircle());\n  const update = compose(\n    updateCircle,\n    updateSatellite,\n    checkBallOnTheBottom,\n    checkBlockOnTheBottom,\n    checkBlockOnTheTop,\n    addBall,\n    updateBall,\n    checkCollisionBall,\n    addBlock,\n    updateBlock,\n    checkCollisionBlock,\n    moveLeftOrRight,\n    gravityBall,\n    removeNoneType\n  );\n  const draw = compose(\n    drawCircles(ctx),\n    drawBlock(ctx)\n  );\n  function animate() {\n    objs = update(objs);\n    clearScreen(ctx);\n    objs = draw(objs);\n  }\n  GLOBAL.timer = setInterval(function() {\n    animate();\n  }, 30);\n}\n\nfunction activate() {\n  const c = document.querySelector(\"canvas\");\n  c.width = window.innerWidth;\n  c.height = window.innerHeight;\n  const ctx = c.getContext(\"2d\");\n  startAnimation(ctx);\n}\n\nfunction processKeyEvent(e) {\n  if (validKeys.includes(e.keyCode)) {\n    GLOBAL.keys.push(e.keyCode);\n  }\n}\n\nwindow.addEventListener('load', activate);\nwindow.addEventListener('keydown', processKeyEvent, true);\n"],"names":["GLOBAL","mouse","keys","timer","LEFT","RIGHT","UP","validKeys","GRAVITY","FRICTION","getXRange","min","max","window","innerWidth","getYRange","innerHeight","getRadians","angle","Math","PI","getDxDy","speed","dx","cos","dy","sin","clone","obj","Object","assign","compose","fns","arguments","result","i","length","call","this","isCircle","type","isBall","isOverCount","lifeCount","isBlock","isInRange","value","range","getTestAngle","currentTestAngle","nextTestAngle","applyLeftOrRight","circle","undefined","c","x","xRange","testAngle","update","filter","style","objs","map","index","applyFreely","o","y","yRange","checkBottom","radius","isBottom","aObj","timeoutCount","countDown","checkBallOnTheBottom","checkBlockOnTheBottom","checkBlockOnTheTop","isTop","clearTimeout","pauseBlock","updateBall","moveLeftOrRight","gravityBall","updateCircle","key","shift","updateSatellite","satelliteAngle","currentAngle","nextAngle","getSatelliteAngle","updateBlock","block","b","height","upBlock","removeNoneType","widenBlock","size","width","isOverlap","ball","wBlock","checkCollisionBall","blocks","item","some","checkCollisionBlock","balls","fillStyle","downBlock","drawCircle","ctx","beginPath","strokeStyle","arc","stroke","fill","drawBlock","circles","forEach","fillRect","drawCircles","moveTo","lineTo","closePath","drawDirectionLine","drawSatellite","addBall","find","findCircle","id","push","createBall","createBlock","floor","random","addBlock","count","step","findBlock","concat","barLen","createBlocks","startAnimation","abs","createCircle","draw","animate","clearRect","clearScreen","setInterval","addEventListener","document","querySelector","getContext","e","includes","keyCode"],"mappings":"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"}