!function(){"use strict";const n={mouse:{},keys:[],timer:null},t=37,e=39,i=38,r=[t,e,i],o=.1,u=.7;function l(n){return{min:n,max:window.innerWidth-n}}function c(n){return{min:n,max:window.innerHeight-n}}function s(n){return n*Math.PI/180}function d(n,t){return{dx:Math.cos(s(n))*t,dy:Math.sin(s(n))*t}}function f(n){return Object.assign({},n)}function a(){var n=arguments;return function(t){for(var e=n.length-1;e>-1;e--)t=n[e].call(this,t);return t}}function y(n){return n&&"circle"===n.type}function g(n){return n&&"ball"===n.type}function h(n){return n&&"ball"===n.type&&n.lifeCount>=300}function x(n){return n&&"block"===n.type}function w(n,t){return!!n&&(n>=t.min&&n<=t.max)}function p(n,t){if(0===n){const n=t+1;return n>358?358:n}{const n=t-1;return n<182?182:n}}function k(n){if(void 0===n.dx)return n;const t=f(n);if(w(t.x+t.dx,t.xRange))t.x+=t.dx;else{t.angle=180-t.angle;const{dx:n}=d(t.angle,t.speed);t.dx=n}return t.testAngle=p(t.angle,t.testAngle),t}const m=n=>t=>e=>e.map((i,r)=>n(i,e,r)?t(i,e,r):i);const b=a((function(n){const t=f(n);return t.lifeCount+=1,t}),k,(function(n){if(void 0===n.dy)return n;const t=f(n);if(w(t.y+t.dy,t.yRange))t.y+=t.dy;else{t.angle=360-t.angle;const{dy:n}=d(t.angle,t.speed);t.dy=n}return t}));const S=n=>!function(n){return g(n)?n.y+n.radius>=window.innerHeight:n.y>=window.innerHeight}(n)?n:function(n){if(!n)return n;const t=f(n);return void 0===t.timeoutCount&&(t.timeoutCount=5),t.timeoutCount--,0===t.timeoutCount?(t.type="none",t):t}(n),A=m(g)(S),C=m(x)(S),v=m(x)(t=>!function(n){if(x(n))return n.y<=0}(t)?t:function(t){return clearTimeout(n.timer),t}(t)),R=m((function(n){return n&&"ball"===n.type&&n.lifeCount<300}))(b),M=m(h)(k),P=m(h)((function(n){const t=f(n);return w(t.y+t.dy,t.yRange)?t.dy+=o:t.dy=-t.dy*u,t.y+=t.dy,t})),H=m(y)((function(i){if(0===n.keys.length)return i;const r=n.keys[0];if(r===t||r===e){n.keys.shift();const t=f(i);t.angle=r===e?0:180;const{dx:o}=d(t.angle,t.speed);return t.dx=o,w(t.x+t.dx,t.xRange)&&(t.x+=t.dx),t.testAngle=p(t.angle,t.testAngle),t}return i})),W=m(y)((function(n){const t=f(n);return t.satelliteAngle=function(n){const t=n+10;return t>=360?0:t}(t.satelliteAngle),t})),E=m(x)(n=>w(n.y,c(0))?function(n){const t=f(n);return t.height+=t.speed,t.y-=t.speed,t}(n):{}),F=n=>n.filter(n=>"none"!==n.type),I=(n,t)=>{const e=f(n);return e.x=e.x-t,e.y=e.y-t,e.width=e.width+t,e.height=e.height+t,e};function T(n,t){if(g(n)&&x(t)){const e=I(t,n.radius);if(n.x>=e.x&&n.x<=e.x+e.width&&n.y>=e.y&&n.y<=e.y+e.height)return!0}return!1}const B=n=>{const t=n.filter(n=>x(n));return n.map(n=>{if(g(n)){return t.some(t=>T(n,t))?(n.type="none",n):n}return n})},L=n=>{const t=n.filter(n=>g(n));return n.map(n=>{if(x(n)){return t.some(t=>T(t,n))?(n.fillStyle="#80FF83",function(n){const t=f(n);return t.height-=10,t.y+=10,t}(n)):(n.fillStyle="#36B339",n)}return n})};function j(n,t){n.beginPath(),n.fillStyle=t.fillStyle||"rgba(20, 100, 20, 0.1)",n.strokeStyle=t.strokeStyle||"black",n.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),n.stroke(),n.fill(),n.beginPath(),n.fillStyle=t.fillStyle||"rgba(20, 100, 100, 0.1)",n.arc(t.x,t.y,t.radius,s(270+t.testAngle),s(450+t.testAngle),!1),n.fill()}const q=n=>t=>(t.forEach((function(t){x(t)&&(n.fillStyle=t.fillStyle,n.fillRect(t.x,t.y,t.width,t.height))})),t),O=n=>t=>(t.forEach((function(t){y(t)&&(j(n,t),function(n,t){n.beginPath(),n.strokeStyle="pink",n.moveTo(t.x,t.y);const{dx:e,dy:i}=d(t.testAngle,t.radius);n.lineTo(t.x+e,t.y+i),n.closePath(),n.stroke()}(n,t),function(n,t){n.beginPath();const{dx:e,dy:i}=d(t.satelliteAngle,t.radius),r=t.x+e,o=t.y+i;n.arc(r,o,t.radius/10,0,2*Math.PI,!1),n.fillStyle="#FF98C6",n.strokeStyle="black",n.stroke(),n.fill()}(n,t)),g(t)&&j(n,t)})),t);function z(t){if(0===n.keys.length)return t;if(n.keys[0]===i){n.keys.shift();const e=function(n){return n.find(n=>y(n))}(t);e&&(e.id=t.length,t.push(function(n){const t=f(n);t.type="ball",t.angle=n.testAngle,t.testAngle=0,t.fillStyle="#B32464",t.radius=6,t.xRange=l(t.radius),t.yRange=c(t.radius),t.speed=1.5*t.speed,t.lifeCount=0;const{dx:e,dy:i}=d(t.angle,t.speed);return t.dx=e,t.dy=i,t}(e)))}return t}function D(n,t){var e,i;return{type:"block",x:n,y:window.innerHeight-50,width:t,height:50,fillStyle:"blue",xRange:l(0),speed:(e=1,i=2,Math.floor(Math.random()*(i-e)+e))}}const G=function(){let n=0,t=0;return function(e){if(function(n){return n.find(n=>x(n))}(e))n=0;else if(++n>50)return n=0,t++,e.concat(function(n){const t=[],e=window.innerWidth/n;for(let i=0;i<n;i++)t.push(D(e*i,e));return t}(t));return e}}();function J(t){let e=[];e.push(function(){const n=window.innerWidth/2,t=Math.abs(-50)/16,{dx:e,dy:i}=d(0,t);return{type:"circle",id:100,radius:50,x:n,y:100,angle:0,testAngle:270,speed:t,dx:e,dy:i,xRange:l(50),yRange:c(50),satelliteAngle:0}}());const i=a(H,W,A,C,v,z,R,B,G,E,L,M,P,F),r=a(O(t),q(t));function o(){e=i(e),function(n){n.clearRect(0,0,window.innerWidth,window.innerHeight)}(t),e=r(e)}n.timer=setInterval((function(){o()}),30)}window.addEventListener("load",(function(){const n=document.querySelector("canvas");n.width=window.innerWidth,n.height=window.innerHeight,J(n.getContext("2d"))})),window.addEventListener("keydown",(function(t){r.includes(t.keyCode)&&n.keys.push(t.keyCode)}),!0)}();
//# sourceMappingURL=bundle.js.map
