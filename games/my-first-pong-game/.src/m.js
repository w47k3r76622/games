var f="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;
function k(a,b){if(b){for(var d=g,c=a.split("."),e=0;e<c.length-1;e++){var h=c[e];h in d||(d[h]={});d=d[h]}c=c[c.length-1];e=d[c];h=b(e);h!=e&&null!=h&&f(d,c,{configurable:!0,writable:!0,value:h})}}k("Array.prototype.fill",function(a){return a?a:function(a,d,c){var e=this.length||0;0>d&&(d=Math.max(0,e+d));if(null==c||c>e)c=e;c=Number(c);0>c&&(c=Math.max(0,e+c));for(d=Number(d||0);d<c;d++)this[d]=a;return this}});
k("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}});function l(){Date.now||(Date.now=function(){return(new Date).getTime()});m("Allegro installed!")}var n;function p(){n();if(q)for(var a=0;128>a;a++)r[a]=!1}function t(a){n=a;window.setInterval(p,1E3/30);m("Game loop initialised!")}var u=[],r=[],q=!1,v=[112,113,114,115,116,117,118,119,120,121,122,123],w=[];
function x(){if(q)_allog("Keyboard already installed");else{w=v;for(var a=0;128>a;a++)u[a]=!1,r[a]=!1;document.addEventListener("keyup",z);document.addEventListener("keydown",A);q=!0;m("Keyboard installed!")}}function A(a){u[a.keyCode]||(r[a.keyCode]=!0);u[a.keyCode]=!0;-1==w.indexOf(a.keyCode)&&a.preventDefault()}function z(a){u[a.keyCode]=!1;-1==w.indexOf(a.keyCode)&&a.preventDefault()}var B,C;
function D(){var a,b=640,d=360;a="undefined"!==typeof a?a:!0;var c=document.getElementById("canvas_id");if(c){var e=c.getBoundingClientRect();b||(b=e.width);d||(d=e.height);c.width=b;c.height=d;e=c.getContext("2d");e.m=a;e.o=a;e.l=a;B={i:b,h:d,canvas:c,context:e,ready:!0};a=aa;c=document.createElement("style");e="font"+ba++;c.id=e;c.type="text/css";document.head.appendChild(c);c.textContent="@font-face { font-family: "+e+"; src:url('data:application/font-woff;base64,"+a+"') format('woff');}";C={element:c,
file:"",name:e,type:"fnt"};m("Graphics mode set to "+b+" x "+d)}else m("[ERROR] Can't find canvas with id canvas_id"),alert("Can't find canvas with id canvas_id")}function E(a,b){a.context.fillStyle="rgba("+(b>>16&255)+","+(b>>8&255)+","+(b&255)+","+(b>>>24)/255+")"}function F(a,b,d){d||(d=1);a.context.lineWidth=d;a.context.strokeStyle="rgba("+(b>>16&255)+","+(b>>8&255)+","+(b&255)+","+(b>>>24)/255+")"}function G(a,b,d,c,e){var h=B;E(h,e);h.context.fillRect(a,b,d,c)}
var aa="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",ba=
0;function H(a,b,d){var c=B;c.context.font=d.toFixed()+"px "+C.name;c.context.textAlign="center";E(c,4294967295);c.context.fillText(a,320,b);F(c,4278190080,2);c.context.strokeText(a,320,b)}function I(){return Math.floor(65536*Math.random())}var ca=!1;function m(a){ca&&console&&console.log(a)}function J(a){0>a&&(a+=1);1<a&&--a;return 1>6*a?.1875+.75*a:3>6*a?.3125:4>6*a?.1875+.125*(4-6*a):.1875}var da=1E3/30,K=new AudioContext;function L(a,b){this.b=a;this.size=b}
function M(a){var b=N.a;return{x:Math.abs(b.b.x-a.b.x)<b.size.x/2+a.size.x/2,y:Math.abs(b.b.y-a.b.y)<b.size.y/2+a.size.y/2}}function O(a,b,d,c){a=1E3+d+c-(1E3+a+b);if(0>a)return a;b=2*c-2*b;return a>b?a-b:0}function P(a){var b=N.a,d=b.b.x-a.b.x,c=b.b.y-a.b.y;return(b.size.x+a.size.x)/2-Math.abs(d)<(b.size.y+a.size.y)/2-Math.abs(c)?{x:Math.sign(d),y:0}:{x:0,y:Math.sign(c)}}function Q(a){this.a=new L(0==a?{x:1.5,y:9}:{x:30.5,y:9},{x:1,y:6});this.g=4294967295;this.speed=10/30}
Q.prototype.c=function(){G(20*(this.a.b.x-this.a.size.x/2),20*(this.a.b.y-this.a.size.y/2),20*this.a.size.x,20*this.a.size.y,this.g)};function R(){this.a=new L({x:16,y:9},{x:1,y:1});this.speed=10/30;this.dir={x:.707*(0<(I()|I()<<16)?1:-1),y:.707*(0<(I()|I()<<16)?1:-1)};this.f=0;this.g=4294967295;this.outline=4278190080}
R.prototype.c=function(){var a=20*(this.a.b.x-this.a.size.x/2),b=20*(this.a.b.y-this.a.size.y/2),d=20*this.a.size.x,c=20*this.a.size.y,e=B;F(e,this.outline,10);e.context.strokeRect(a,b,d,c);G(20*(this.a.b.x-this.a.size.x/2),20*(this.a.b.y-this.a.size.y/2),20*this.a.size.x,20*this.a.size.y,this.g);H(this.f.toString(),40,30);a=20*this.a.b.x;b=20*this.a.b.y;d=20*this.a.b.x+40*this.dir.x;c=20*this.a.b.y+40*this.dir.y;e=B;F(e,4294901760,4);e.context.beginPath();e.context.moveTo(a,b);e.context.lineTo(d,
c);e.context.stroke()};function S(a){var b=N;0!=a.x&&(b.dir.x=-b.dir.x);0!=a.y&&(b.dir.y=-b.dir.y)}R.prototype.update=function(a){var b=da/a;a=this.a.b.x-16;this.a.b.x+=this.dir.x*b*this.speed;this.a.b.y+=this.dir.y*b*this.speed;b=this.a.b.x-16;if(0>a&&0<=b||0<a&&0>=b)this.f++,1>this.speed&&!(this.f%2)&&(this.speed+=2.5/30)};R.prototype.reset=function(){this.a.b={x:16,y:9};this.dir={x:.707*(0<(I()|I()<<16)?1:-1),y:.707*(0<(I()|I()<<16)?1:-1)};this.f=0;this.speed=10/30};
var T=0,U=new Q(0),V=new Q({}.j),N=new R,W=new L({x:16,y:9},{x:32,y:18}),X=null,Y=null;function Z(a){bufsrc=K.createBufferSource();bufsrc.buffer=a;bufsrc.connect(K.destination);bufsrc.start()}
window.addEventListener("load",function(){l();x();D();X=K.createBuffer(1,.5*K.sampleRate,K.sampleRate);for(var a=X.getChannelData(0),b=0;b<X.length;b++)a[b]=.05*Math.sin(20*Math.PI*X.length/(b+1));Z(X);Y=K.createBuffer(1,K.sampleRate,K.sampleRate);a=Y.getChannelData(0);for(b=0;b<Y.length;b++)a[b]=.2*Math.random();for(b=0;b<Y.length/2;b++){var d=Math.sin(b/(Y.length/2)*Math.PI/2);a[b]*=d;a[Y.length-1-b]*=d}var c=Date.now();t(function(){var a,b,d=Date.now()-c;switch(T){case 0:r[32]&&(console.log("current_status <-- READY"),
T=1);break;case 1:r[32]&&(console.log("current_status <-- PLAYING"),T=2);break;case 2:u[39]&&(V.a.b.y-=V.speed,3>V.a.b.y&&(V.a.b.y=3));u[37]&&(V.a.b.y+=V.speed,15<V.a.b.y&&(V.a.b.y=15));u[38]&&(U.a.b.y-=U.speed,3>U.a.b.y&&(U.a.b.y=3));u[40]&&(U.a.b.y+=U.speed,15<U.a.b.y&&(U.a.b.y=15));N.update(d+(6E4<I()?0:Math.floor(50*Math.random())));a=M(U.a);a.x&&a.y&&(S(P(U.a)),Z(X));a=M(V.a);a.x&&a.y&&(S(P(V.a)),Z(X));b=N.a;a=O(b.b.x,b.size.x/2,W.b.x,W.size.x/2);b=O(b.b.y,b.size.y/2,W.b.y,W.size.y/2);a&&(console.log("current_status <-- GAMEOVER"),
T=3,Z(Y));b&&(a=N,a.dir.y=-a.dir.y,N.a.b.y+=b,Z(X));break;case 3:r[32]&&(console.log("current_status <-- INIT"),T=0,N.reset());break;default:console.log("current_status set to wrong value "+T)}a=B;b=Date.now()/10;b%=360;0>b&&(b+=360);b/=360;var y;y=65280|Math.floor(255*J(b+1/3));y=y<<8|Math.floor(255*J(b));b=y=y<<8|Math.floor(255*J(b-1/3));a.context.clearRect(0,0,a.i,a.h);E(a,b);a.context.fillRect(0,0,a.i,a.h);G(300,0,40,360,4294967295);U.c();V.c();N.c();1==T?H("Press space to throw",180,30):2!=T&&
(G(0,0,640,360,3489660928),3==T&&H("Game Over...",180,30),0==T&&(H("PONG!!",135,80),H("Press space to start",240,30)));c+=d})});
