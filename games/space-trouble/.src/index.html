<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">*{box-sizing:border-box}body,html{width:100%;height:100%;margin:0;padding:0;font-family:Arial Black,Gadget,sans-serif}body{background-color:#333}canvas{display:block}strong{color:red}#game-end-view,#game-finish-view,#start-game-view{background:#333;height:100vh;align-items:center;justify-content:center}#game-end-view,#game-finish-view,#game-ui,#start-game-view{color:#f2f2f2;width:100%;position:fixed;top:0;left:0;display:flex}#game-ui{justify-content:space-between;padding:10px;font-size:1.5em}.fuel{display:flex}.right{margin:0 10px}.info-text-content{max-width:400px;width:100%;text-align:center;margin:50px auto}.text-center,h1{text-align:center}h1{font-size:5em;font-family:Impact,Charcoal,sans-serif}button{border:1px solid #f2f2f2;color:#f2f2f2;background-color:transparent;text-transform:uppercase;padding:20px 30px;transition:background-color .2s ease,color .2s ease;-webkit-transition:background-color .2s ease,color .2s ease;cursor:pointer}button:hover{background-color:#f2f2f2;color:#333}.hidden{display:none!important}#fuel{position:relative;width:30%;height:10px}.bar{width:100%;height:100%;background-color:green;transition:background-color .2s ease;-webkit-transition:background-color .2s ease}</style></head>
<body>
  <div id="game-ui">
    <div id="fuel">
      <div class="bar" id="fuel-bar"></div>
    </div>
    <div id="tries">3</div>
  </div>
  <div id="start-game-view">
    <div class="start-info">
        <h1>Space Trouble</h1>
      <div class="info-text-content">
        <p>Astronaut has stranded in space storm and lifesupport system is offline. Your job is to guide the astronaut back to spaceship. You have limited amount of fuel at your disposal.</p>
        <p>Use <strong>UP</strong>, <strong>DOWN</strong> & <strong>RIGHT</strong> to control the astronaut.</p>
        <p>Good Luck!</p>
      </div>
      <div class="text-center">
          <button id="start-game">Start</button>
      </div>
    </div>
  </div>
  <div id="game-end-view" class="hidden">
    <div class="end-message">
      <p>Sorry! The astronaut died.</p>
      <div class="text-center">
        <button id="restart-game">Try again</button>
      </div>
    </div>
  </div>
  <div id="game-finish-view" class="hidden">
    <div class="end-message">
      <p>Congratulations! You saved the astronaut.</p>
    </div>
  </div>
  <canvas id="game-canvas"></canvas>
<script type="text/javascript">!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},a=function(t){var e=r.w/3;return t.x>0&&t.x<e?r.gravity[1].y:t.x>e&&t.x<2*e?r.gravity[2].y:t.x>2*e&&t.x<3*e?r.gravity[3].y:0},o=function(t){return r.h/2/2+100-t.y<0?-1:1},r={w:window.innerWidth,h:window.innerHeight,launches:3,fuelValues:{up:0,right:0,down:0},fuel:0,fuelLimit:200,launchActive:!1,astronautSaved:!1,resistance:i(1,5),gravityMultiplier:i(1,5),shuttleMovement:.01,gravity:{1:{y:i(1,5)},2:{y:-1*i(1,5)},3:{y:i(2,8)}}},s=r.w,u=document.getElementById("game-canvas"),c=u.getContext("2d"),h=void 0,d=function(t,e){t.y>r.h&&(t.y=0),t.y<0&&(t.y=r.h),t.x<0&&(t.x=r.w);var n={x:t.x-e.x,y:t.y-e.y},i=Math.sqrt(n.x*n.x+n.y*n.y),o={x:n.x/i,y:n.y/i},s=(200-i)/200;e.x>10?(s<0?s=0:(t.x=t.x0,t.y=t.y0),t.x0=t.x,t.y0=t.y,t.x0+=-1*r.resistance/4,t.y0+=a(t),t.x+=o.x*s*50*.99+-1*r.resistance/4,t.y+=o.y*s*50*.99+a(t)/5):(t.y+=a(t)/5,t.x+=-1*r.resistance/4),c.beginPath(),c.arc(t.x,t.y,t.size,0,2*Math.PI),c.fillStyle=t.color,c.fill()},l=function(t){h.forEach(function(e){d(e,t)})},f=function(t){var e=100*t,n=100-e,i=document.getElementById("fuel-bar");n<75&&(i.style.backgroundColor="yellow"),n<25&&(i.style.backgroundColor="red"),i.style.width=n+"%"},y=function(t){document.getElementById("tries").innerHTML=t},v=function(){document.getElementById("fuel-bar").style.width="100%",document.getElementById("fuel-bar").style.backgroundColor="green"};n(1);var x=document.getElementById("game-canvas");x.width=r.w,x.height=r.h;var p=new Image;p.src="images/astronaut.jpg";var g=new Image;g.src="images/shuttle.jpg",kontra.init(),function(){h=Array(s).fill().map(function(t){var e=i(0,r.w),n=i(0,r.h);return{x0:e,y0:n,x:e,y:n,color:"#f2f2f2",size:1}})}();var m={astronaut:kontra.sprite({x:10,y:r.h/2-25,color:"red",width:20,height:50,dx:0,image:p,fade:function(){this.context.globalAlpha-=.01,M()}}),shuttle:kontra.sprite({x:r.w-100,y:0,color:"white",width:20,height:100,dx:0,dy:0,image:g})},k=function(t){r.fuel+=1,r.fuel<=r.fuelLimit&&(r.launchActive=!0,r.fuelValues[t]+=1,f(r.fuel/r.fuelLimit),"right"===t&&(m.astronaut.dx+=w(r.fuelValues.right)/50),"up"===t&&(m.astronaut.dy+=-1*w(r.fuelValues.up)/50),"down"===t&&(m.astronaut.dy+=w(r.fuelValues.down)/50))},w=function(t){return t/10},_=function(){var t=Math.abs(m.astronaut.x-m.shuttle.x),e=Math.abs(m.astronaut.y-m.shuttle.y);Math.sqrt(t*t+e*e)<50&&E()},b=function(){setTimeout(function(){L.stop(),document.getElementById("game-end-view").classList.remove("hidden")},1e3)},E=function(){r.launchActive=!1,r.astronautSaved=!0},I=function(){m.astronaut.x=10,m.astronaut.y=r.h/2-25,m.astronaut.dx=0,m.astronaut.dy=0,m.astronaut.ddx=0},M=function(){setTimeout(function(){document.getElementById("game-finish-view").classList.remove("hidden")},3e3)},L=kontra.gameLoop({update:function(){kontra.keys.pressed("right")&&k("right"),kontra.keys.pressed("up")&&k("up"),kontra.keys.pressed("down")&&k("down"),m.astronaut.update(),_(),r.launchActive?(m.astronaut.dy+=a(m.astronaut)/100,m.astronaut.ddx=r.resistance/1e3*-1,m.astronaut.update(),m.astronaut.dx<0&&(m.astronaut.dx=0),(m.astronaut.x>r.w||m.astronaut.y>r.h||m.astronaut.x<-50||m.astronaut.y<0)&&(0===r.launches?b():(I(),r.fuel=0,r.launches--,r.fuelValues={up:0,down:0,right:0},r.launchActive=!1,y(r.launches),v()))):(m.astronaut.repel=!1,r.launchActive=!1),r.astronautSaved&&(m.astronaut.x=m.shuttle.x-50,m.astronaut.y=m.shuttle.y+25,m.astronaut.update(),m.astronaut.fade()),m.shuttle.dy+=.01*o(m.shuttle),m.shuttle.update()},render:function(){m.astronaut.render(),m.shuttle.render(),l(m.astronaut)}});document.getElementById("start-game").addEventListener("click",function(t){document.getElementById("start-game-view").classList.add("hidden"),L.start()}),document.getElementById("restart-game").addEventListener("click",function(t){location.reload()});n(2)},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();kontra={init:function(t){var e=this.canvas=document.getElementById(t)||t||document.querySelector("canvas");this.context=e.getContext("2d")},_noop:new Function,_tick:new Function},kontra.gameLoop=function(t){function e(){if(i=requestAnimationFrame(e),a=performance.now(),o=a-n,n=a,!(o>1e3)){for(kontra._tick(),s+=o;s>=u;)d.update(c),s-=u;h(),d.render()}}var n=void 0,i=void 0,a=void 0,o=void 0,r=(t=t||{}).fps||60,s=0,u=1e3/r,c=1/r,h=!1===t.clearCanvas?kontra._noop:function(){kontra.context.clearRect(0,0,kontra.canvas.width,kontra.canvas.height)},d={update:t.update,render:t.render,isStopped:!0,start:function(){n=performance.now(),this.isStopped=!1,requestAnimationFrame(e)},stop:function(){this.isStopped=!0,cancelAnimationFrame(i)}};return d},function(){for(var t={},e={},n={13:"enter",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},a=0;a<26;a++)n[65+a]=(10+a).toString(36);for(i=0;i<10;i++)n[48+i]=""+i;addEventListener("keydown",function(i){var a=n[i.which];e[a]=!0,t[a]&&t[a](i)}),addEventListener("keyup",function(t){e[n[t.which]]=!1}),addEventListener("blur",function(t){e={}}),kontra.keys={bind:function(e,n){[].concat(e).map(function(e){t[e]=n})},unbind:function(e,n){[].concat(e).map(function(e){t[e]=n})},pressed:function(t){return!!e[t]}}}(),function(){var t=function(){function t(e,i){n(this,t),this._x=e||0,this._y=i||0}return a(t,[{key:"add",value:function(t,e){this.x+=(t.x||0)*(e||1),this.y+=(t.y||0)*(e||1)}},{key:"clamp",value:function(t,e,n,i){this._c=!0,this._a=t,this._b=e,this._d=n,this._e=i}},{key:"x",get:function(){return this._x},set:function(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}},{key:"y",get:function(){return this._y},set:function(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}]),t}();kontra.vector=function(e,n){return new t(e,n)},kontra.vector.prototype=t.prototype;var e=function(){function t(){n(this,t)}return a(t,[{key:"init",value:function(t,e,n,i){for(e in t=t||{},this.position=kontra.vector(t.x,t.y),this.velocity=kontra.vector(t.dx,t.dy),this.acceleration=kontra.vector(t.ddx,t.ddy),this.width=this.height=0,this.context=kontra.context,t)this[e]=t[e];if(n=t.image)this.image=n,this.width=n.width,this.height=n.height;else if(n=t.animations){for(e in n)this.animations[e]=n[e].clone(),i=i||n[e];this._ca=i,this.width=i.width,this.height=i.height}return this}},{key:"isAlive",value:function(){return this.ttl>0}},{key:"collidesWith",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}},{key:"update",value:function(t){this.advance(t)}},{key:"render",value:function(){this.draw()}},{key:"playAnimation",value:function(t){this._ca=this.animations[t],this._ca.loop||this._ca.reset()}},{key:"advance",value:function(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.ttl--,this._ca&&this._ca.update(t)}},{key:"draw",value:function(){this.image?this.context.drawImage(this.image,this.x,this.y):this._ca?this._ca.render(this):(this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height))}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"dx",get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},{key:"dy",get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}},{key:"ddx",get:function(){return this.acceleration.x},set:function(t){this.acceleration.x=t}},{key:"ddy",get:function(){return this.acceleration.y},set:function(t){this.acceleration.y=t}}]),t}();kontra.sprite=function(t){return(new e).init(t)},kontra.sprite.prototype=e.prototype}(),t.exports=kontra},function(t,e){}]);</script></body>
</html>
