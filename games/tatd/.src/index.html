<html style="height:100%"><head style="height:100%"><meta charset="UTF-8"><title>TATD js13kgame</title><script type="text/javascript">/*! TATD-js13k 2015-09-12 */
function SfxrParams(){this.setSettings=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;this.c<.01&&(this.c=.01);var c=this.b+this.c+this.e;if(.18>c){var d=.18/c;this.b*=d,this.c*=d,this.e*=d}}}function SfxrSynth(){this._params=new SfxrParams;var a,b,c,d,e,f,g,h,i,j,k,l;this.reset=function(){var a=this._params;d=100/(a.f*a.f+.001),e=100/(a.g*a.g+.001),f=1-a.h*a.h*a.h*.01,g=-a.i*a.i*a.i*1e-6,a.a||(k=.5-a.n/2,l=5e-5*-a.o),h=1+a.l*a.l*(a.l>0?-.9:10),i=0,j=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},this.totalReset=function(){this.reset();var d=this._params;return a=d.b*d.b*1e5,b=d.c*d.c*1e5,c=d.e*d.e*1e5+12,3*((a+b+c)/3|0)},this.synthWave=function(m,n){var o=this._params,p=1!=o.s||o.v,q=o.v*o.v*.1,r=1+3e-4*o.w,s=o.s*o.s*o.s*.1,t=1+1e-4*o.t,u=1!=o.s,v=o.x*o.x,w=o.g,x=o.q||o.r,y=o.r*o.r*o.r*.2,z=o.q*o.q*(o.q<0?-1020:1020),A=o.p?((1-o.p)*(1-o.p)*2e4|0)+32:0,B=o.d,C=o.j/2,D=o.k*o.k*.01,E=o.a,F=a,G=1/a,H=1/b,I=1/c,J=5/(1+o.u*o.u*20)*(.01+s);J>.8&&(J=.8),J=1-J;for(var K,L,M,N,O,P,Q=!1,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=new Array(1024),aa=new Array(32),ba=_.length;ba--;)_[ba]=0;for(var ba=aa.length;ba--;)aa[ba]=2*Math.random()-1;for(var ba=0;n>ba;ba++){if(Q)return ba;if(A&&++Z>=A&&(Z=0,this.reset()),j&&++i>=j&&(j=0,d*=h),f+=g,d*=f,d>e&&(d=e,w>0&&(Q=!0)),L=d,C>0&&($+=D,L*=1+Math.sin($)*C),L|=0,8>L&&(L=8),E||(k+=l,0>k?k=0:k>.5&&(k=.5)),++S>F)switch(S=0,++R){case 1:F=b;break;case 2:F=c}switch(R){case 0:T=S*G;break;case 1:T=1+2*(1-S*H)*B;break;case 2:T=1-S*I;break;case 3:T=0,Q=!0}x&&(z+=y,M=0|z,0>M?M=-M:M>1023&&(M=1023)),p&&r&&(q*=r,1e-5>q?q=1e-5:q>.1&&(q=.1)),P=0;for(var ca=8;ca--;){if(X++,X>=L&&(X%=L,3==E))for(var da=aa.length;da--;)aa[da]=2*Math.random()-1;switch(E){case 0:O=k>X/L?.5:-.5;break;case 1:O=1-X/L*2;break;case 2:N=X/L,N=6.28318531*(N>.5?N-1:N),O=1.27323954*N+.405284735*N*N*(0>N?1:-1),O=.225*((0>O?-1:1)*O*O-O)+O;break;case 3:O=aa[Math.abs(32*X/L|0)]}p&&(K=W,s*=t,0>s?s=0:s>.1&&(s=.1),u?(V+=(O-W)*s,V*=J):(W=O,V=0),W+=V,U+=W-K,U*=1-q,O=U),x&&(_[Y%1024]=O,O+=_[(Y-M+1024)%1024],Y++),P+=O}P*=.125*T*v,m[ba]=P>=1?32767:-1>=P?-32768:32767*P|0}return n}}var synth=new SfxrSynth;jsfxr=function(a){synth._params.setSettings(a);var b=synth.totalReset(),c=new Uint8Array(4*((b+1)/2|0)+44),d=2*synth.synthWave(new Uint16Array(c.buffer,44),b),e=new Uint32Array(c.buffer,0,44);e[0]=1179011410,e[1]=d+36,e[2]=1163280727,e[3]=544501094,e[4]=16,e[5]=65537,e[6]=44100,e[7]=88200,e[8]=1048578,e[9]=1635017060,e[10]=d,d+=44;for(var f=0,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";d>f;f+=3){var i=c[f]<<16|c[f+1]<<8|c[f+2];h+=g[i>>18]+g[i>>12&63]+g[i>>6&63]+g[63&i]}return h},console.log("ss"),window.onload=function(){function a(){}function b(a,b){return U?b:a}function c(a){da=a,start.innerHTML=da}function d(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}function e(a,b){d(a,b)||(a.className+=" "+b)}function f(a,b){if(d(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}}function h(a,b){var c=[a,ha+b];return Ea.push(c),c}function i(a,b){a[0]+=b[0],a[1]+=b[1]}function j(a){if("object"!=typeof a)return a;if(null==a)return a;if(a.concat)var b=[];else var b={};for(var c in a)b[c]=j(a[c]);return b}function k(a,b){for(var c in b)a[c]=b[c]}function l(a,b,c){return void 0==a[c][b]?1:parseInt(a[c][b])}function m(a,b,c){var d=[[0,-b],[b,0],[0,b],[-b,0]];if(void 0==c){for(var e in d){var f=a(d[e][0],d[e][1],e);if(f)return f}return!1}return a(d[c][0],d[c][1],c)}function n(a,b){return fa.sqrt(fa.pow(fa.abs(a[0]-b[0]),2)+fa.pow(fa.abs(a[1]-b[1]),2))}function o(a,b,c){function d(b,c,g){function h(b,c){function d(b,d){return c&&b==c[0]&&d==c[1]?void 0:(l(a,b,d)||(f=!0),[!1,b,d])}function e(a){var b=[0,0,0,0];return a[0]<=0&&(b[3]=1),a[0]>=Ca&&(b[1]=1),a[1]<=0&&(b[0]=1),a[1]>=Ba&&(b[2]=1),b}var f=!1;return m(function(a,c,g){if(!e(b)[g]){var h=d(b[0]+a,b[1]+c);if(f)return h[0]=g,h}},1)}var i=h(b,g);e.push(i[0]);var g=b;b=[i[1],i[2]],f++,100!=f&&(b[0]!=c[0]||b[1]!=c[1])&&d(b,c,g)}var e=[],f=0;return d(b,c),e}function p(a){var b=50,c=50;return[(a[0]+.5)*b,(a[1]+.5)*c]}function q(a,b){if(b){for(;b.parentNode;){if("function"==typeof a){if(a(b))return a(b)}else if(b.parentNode==a)return b.parentNode;b=b.parentNode}return!1}}function r(a,b,c,d){return d&&ba&&towers_map&&(towers_map[a]++,ba.set_tower_panel()),new Tower(a,[b,c])}function s(a){ba&&towers_map&&(towers_map[parseInt(a.dataset.kind)]--,ba.set_tower_panel(),ia.tower.r_forEach(function(b,c){return b.d==a?(ia.tower.remove(b),!0):void 0}),mn.removeChild(a))}function t(a,b){u(a),h(function(){emy_create(a,b)},.3*W)}function u(a){e(ba.start_grid.querySelector(".startp"),"out"),setTimeout(function(){f(ba.start_grid.querySelector(".startp"),"out")},500)}function v(a){return a=a.cloneNode(!0),f(a,"hide"),f(a,"trans"),a.id="",a}function w(){return"undefined"!=typeof La}function x(a){La&&La.parentNode.removeChild(La),La=v(_("#tower_to_copy[kind='"+a+"']")),La.style["pointer-events"]="none",La.kind=a,e(La,"catching"),e(body,"catching"),body.appendChild(La),e(_("body"),"inactive"),ja=!0,my_panel.onmouseout(),my_panel.onmouseover(),my_panel.onmousemove(Ma)}function y(){w()&&(La.parentNode.removeChild(La),La=void 0,f(body,"catching"))}function z(){for(var a=0;oa>a;a++)Oa[0]&&Oa[0].step()}function A(a,b){var c=v(_("#emy_panel_to_copy")),d=v(_("#emy_to_copy[kind='"+b+"']")),f=[a.hp,1e3*ua.emy[b],a.str],g=[.2,1,15];return Array.prototype.forEach.call(c.querySelectorAll(".bar span"),function(a,b){a.style.width=f[b]*g[b]+"px";var c=document.createElement("label");e(c,"prop-value"),c.innerHTML=parseInt(f[b]),a.appendChild(c)}),c.querySelector(".top").appendChild(d),c.querySelector(".bottom p").innerHTML=a.des,c}function B(a,b,c){var d=v(_("#tower_panel_to_copy")),f=v(_("#tower_to_copy[kind='"+b+"']")),g=[a.power,a.range,1/ua.tower[b]/3*900,a.cost+(c?0:5*towers_map[b])];return tower_lens_k=[3,20,3,2],Array.prototype.forEach.call(d.querySelectorAll(".bar span"),function(a,b){a.style.width=g[b]*tower_lens_k[b]+"px";var c=document.createElement("label");e(c,"prop-value"),c.innerHTML=1!=b?parseInt(g[b]):g[b],a.appendChild(c)}),d.querySelector(".top").appendChild(f),d.querySelector(".bottom p").innerHTML=a.des,d}function C(a){var b="scaleX(-1)";if(a.style.transform.lastIndexOf(b)>-1){var c=a.style.transform,d=c.split(" ");c=d.length>1?d[0]:"",a.style.transform=c}else a.style.transform+=b}function D(a,b){ba&&ba.destroy(b),b?setTimeout(function(){ba=new Na(a)},300):ba=new Na(a)}function E(a){a.step()}function F(a){oa=a*na}function G(a,b){(new Array).forEach.call(aa(".speed .top-btn"),function(a){e(a,"inactive")}),f(a,"inactive"),F(b)}function H(a,b,c){e(a,"fadingout"),a.style.transition="all "+b+"ms",c&&f(a,"center"),e(a,"trans"),a.dataset.fadingcb=setTimeout(function(){f(a,"fadingout"),K(a)},b)}function I(a,b,c){a.style.transition="all "+b+"ms",J(a),setTimeout(function(){c&&e(a,"center"),f(a,"trans")},100)}function J(a){f(a,"displaynone")}function K(a){e(a,"displaynone")}function L(){D(T,!0),N("level_setting"),N("level_failed"),ba.reversing=!1}function M(){level_state="normal",ba.td_enter(),N("level_failed"),N("level_setting"),ba.reversing=!1}function N(a){H(_("#"+a),500,!0),H(body_mask,500),Y=!1}function O(a){y(),ba.reversing||(I(body_mask,500),e(_("#"+a),"down"),I(_("#"+a),300,!0),Y=!0)}function P(a){var b=jsfxr(a),c=new Audio;c.src=b,U||c.play()}function Q(){var a=navigator.userAgent,b=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];for(var c in b)if(a.indexOf(b[c])>0)return b[c]}function R(){if("Pause"==da&&!Y&&!X){Ja=!0,ia.emy.sort(function(a,b){return a.path_len>b.path_len?-1:a.path_len==b.path_len?0:1}),Ea.forEach(function(a,b){ha>=a[1]&&(a[0](),Ea.splice(b,1))});for(var a in ia)ia[a].forEach(E);z(),ha+=oa}requestAnimationFrame(R)}var S="ta",T=0;g={};var U="true"==localStorage.getItem("dbg")?!0:!1;U&&(my_panel.style.transition="transform 0s",T=0,S="td");var V=0,W=60,X=!1,Y=!1,Z=["bul","tower","emy"],$=document,_=function(a){return $.querySelector(a)},aa=function(a){return $.querySelectorAll(a)};body=_("body");var ba,ca,da,ea,fa=Math,ga=console,ha=0,ia={emy:[],bul:[],tower:[]},ja=!1,ka=!1,la=[],ma={bul:[],tower:[],emy:[]},na=1,oa=1,pa=[[1,,.1693,.111,.0106,.8855,.0802,-.5639,,,,,,.0314,.1647,,,,1,,,,,.5],[3,,.01,,.206,.4598,,-.4236,,,,,,,,,,,1,,,,,.44],[0,,.2368,.1023,,.7157,.2,-.2371,,,,,,.446,-.1164,,,,1,,,.2673,,.44],[2,,.2386,.2191,.3293,.6307,.0235,-.405,,,,,,.7376,-.6784,,,,1,,,,,.5]],qa=[3,,.2585,.7193,.0618,.7524,,-.389,,,,.4458,.8618,,,,.1306,-.1808,1,,,,,.44],ra=[0,,.2352,,.4135,.4361,,.4238,,,,,,.1343,,.5811,,,1,,,,,.44],sa=[1,,.3399,,.4035,.3884,,.4556,,,,,,,,.5184,,,1,,,,,.44],ta=[{map:["","","00000000000000","11111111111110","10000000000000","10","10","100000000000000","",""],start:[0,2],end:[14,7],hp:1,power:45,preset:[[6,1,0],[8,1,0],[8,3,0]]},{map:["","","0000","1110","1000","10","10","100000000000000","",""],start:[0,2],end:[14,7],hp:3,power:50,preset:[[2,5,1],[2,6,1],[2,3,0],[1,3,0]]},{map:["11111110","11111110","111111100","111111110","111100000","11110","11110","11110","11110","11110"],start:[7,0],end:[4,9],hp:2,power:60,preset:[[5,5,1],[7,3,1],[6,2,1]]},{map:["11111110","11111110","111111100","111111110","111111100","11111110","111111100","111111110","111111110","111111110"],start:[7,0],end:[8,9],hp:5,power:70,preset:[[7,3,2],[8,5,0],[8,1,2],[7,7,1]]},{map:["11111110","11111110","11111110","11111110","11111110","11111110","11111110","11111110","11111110","11111110"],start:[7,0],end:[7,9],hp:5,power:80,preset:[[8,4,2],[6,6,2],[8,5,1],[8,6,1]]},{map:["0","00","100","1100","11100","111100","1111100","11111100","111111100","111111110"],start:[0,0],end:[8,9],hp:5,power:95,preset:[[5,4,2],[7,6,3],[3,5,1],[4,6,1],[6,5,1]]},{map:["0","00000","11110","11000","11011000","11000010","11111110","11111110","111111100","111111110"],start:[0,0],end:[8,9],hp:10,power:75,preset:[[5,3,3],[6,6,0],[3,4,1],[4,4,0],[6,5,1]]}],ua={bul:[4,5,5,5,5,5],tower:[30,50,50,60],emy:[.03,.05,.03,.02]},va=[{hp:70,str:1,des:"Basic warrior.",cb:function(){},cd:.5},{hp:70,str:1,des:"Fast warrior.",cb:function(){},cd:.3,st:2},{hp:110,str:2,des:"Solid warrior.",cb:function(){},cd:1,st:4},{hp:300,str:3,des:"Final warrior.",cb:function(){},cd:1.5,st:6}],wa=Q(),xa=function(){var a=parseInt(document.documentElement.clientHeight),b=parseInt(document.documentElement.clientWidth),c=b/1020,d=a/620,e=100*Math.min(c,d);("iPhone"==wa||"iPad"==wa||"iPod"==wa)&&(e=Math.max(100,e)),body.style.zoom=e+"%",console.log(e,c,d,b)};if(wa){var ya=$.createElement("meta");ya.name="viewport",na=2,e(body,"phone"),oa*=na,ya.content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no",_("head").appendChild(ya),xa(),window.addEventListener("resize",xa,!1)}var za={cold:{add:function(a){var b=.4;e(a.d,"cold"),void 0==a.cold_cnt&&(a.cold_cnt=0),a.cold_cnt++,1==a.cold_cnt&&(a.speed_k*=b),h(function(){a.cold_cnt--,0==a.cold_cnt&&(f(a.d,"cold"),a.speed_k/=b)},W)}}},Aa=[{range:2,power:10,des:"Basic tower.",cost:10,rotate:!0},{range:1.5,power:10,des:"AOE tower.",emit:function(a){var b=$.createElement("div");e(b,"loop"),a.d.appendChild(b),h(function(){ia.emy.forEach(function(b){var c=n(b.pos,a.pos);c<Aa[a.kind].range&&b.suffer(a.kind)})},.225*W),setTimeout(function(){a&&a.d.removeChild(b)},900)},cost:15,rotate:!1,st:1},{range:2.5,power:5,des:"Cold tower.",blast:function(a){a.add_state(za.cold)},cost:20,bias:[0,-15],rotate:!1,st:3},{range:1.5,power:30,des:"Powerful tower.",cost:25,bias:[0,0],rotate:!1,st:5}];body.onkeypress=a;var Ba=10,Ca=15,Da=[];Z.forEach(function(a,b){var c=aa("#"+a+"_to_copy");Z.forEach.call(c,function(b){ma[a].push([b.offsetWidth,b.offsetHeight])})}),ga.log("std_size",ma),c("Pause"),Array.prototype.last=function(){return this[this.length-1]},Array.prototype.remove=function(a){for(var b=0;b<this.length;b++)this[b]==a&&this.splice(b,1)},Array.prototype.r_forEach=function(a){for(var b=0;b<this.length;b++)if(a(this[b]))return};for(var Ea=[],Fa=0;Ba*Ca>Fa;Fa++){var Ga=parseInt(Fa/Ca),Ha=Fa%Ca;Da[Ha]||(Da[Ha]=[]);var Ia=$.createElement("div");Da[Ha][Ga]=Ia,Ia.className="grid",Ia.dataset.x=Ha,Ia.dataset.y=Ga,mn.appendChild(Ia)}ea=_(".grid"),miao_obj=function(){},miao_obj.prototype.init=function(a,b,c){var d=_("#"+this.name+"_to_copy[kind='"+a+"']").cloneNode(!0);this.kind=a,this.d=d,this.d.id="",ua[this.name]&&(this.speed=ua[this.name][a]),f(this.d,"hide"),this.style=d.style,this.set_pos(b),this.register()},miao_obj.prototype.set_pos=function(a){this.pos=j(a);var b=p(a);b[0]-=ma[this.name][this.kind][0]/2,b[1]-=ma[this.name][this.kind][1]/2,this.bias&&i(b,this.bias),this.style.transform="translate("+b[0]+"px,"+b[1]+"px)"},miao_obj.prototype.register=function(){ia[this.name].push(this),mn.insertBefore(this.d,mn.firstChild)},miao_obj.prototype.unregister=function(){ia[this.name].remove(this),mn.removeChild(this.d)},miao_obj.prototype.r_unregister=function(){ia[this.name].remove(this)},miao_obj.prototype.r_remove=function(){mn.removeChild(this.d)};var Ja=!1;Bul=function(a,b,c,d,e){a>1&&(a=1),this.tower=e,e.target=c,this.name="bul",this.bias=d,this.target=c,this.init.apply(this,arguments),this.target.add_bul(this),this.step()},Bul.prototype=new miao_obj,Bul.prototype.blast=function(){this.target.suffer(this.tower.kind,this.tower),this.unregister()},Bul.prototype.cal_pos=function(a,b,c){var d=n(a,b);b[0]-a[0],b[1]-a[1];if(c>=d)return!1;var e=d;return a[0]+=(b[0]-a[0])/e*c,a[1]+=(b[1]-a[1])/e*c,a},Bul.prototype.step=function(){var a=this.cal_pos(this.pos,this.target.pos,this.speed*oa/W);a?this.set_pos(a):this.blast()},Tower=function(a,b){this.name="tower",this.init.apply(this,arguments),this.model=Aa[this.kind],k(this,{level:0,base_trans:"translate(-50%, -50%)",prepare:0,prepare_max:ua.tower[a]});var c=this;this.d.querySelector(".fill").onmouseout=function(){var a=c.d.childNodes;for(var b in a)a[b].className&&f(a[b],"active")},this.d.dataset.x=b[0],this.d.dataset.y=b[1],this.d.dataset.kind=a,this.d.querySelector(".fill").onmouseover=function(){var a=c.d.childNodes;for(var b in a)a[b].className&&e(a[b],"active")}},Tower.prototype=new miao_obj,Tower.prototype.set_pos=function(a){this.pos=j(a);var b=p(a);k(this.style,{left:b[0],top:b[1]})},Tower.prototype.f_rotate=function(a,b){var c=fa.atan2(a,b);this.style.transform=this.base_trans+" rotate("+(180*c/fa.PI+90)+"deg)"},Tower.prototype.step=function(){this.ready||(this.prepare+=oa,this.prepare>this.prepare_max&&(this.ready=!0));var a=this;ia.emy.r_forEach(function(b){var c=n(b.pos,a.pos);if(c<Aa[a.kind].range){if(a.model.rotate&&a.f_rotate(a.pos[1]-b.pos[1],a.pos[0]-b.pos[0]),a.ready){if(Aa[a.kind].emit)Aa[a.kind].emit(a);else{new Bul(a.kind,a.pos,b,a.model.bias?a.model.bias:null,a)}a.ready=!1,a.prepare=0}return!0}})};var Ka=function(a,b){this.name="emy",this.init.apply(this,arguments),k(this,{is_continue:!0,path_len:0,initted:!1,hp:va[a].hp,str:va[a].str,click_callback:va[a].cb,hp_max:va[a].hp,bf:this.d.querySelector(".fill"),dead:!1,buls:[]}),this.states=[],this.speed_k=1;var c=this;setTimeout(function(){f(c.d,"trans")},10),this.step()};Ka.prototype=new miao_obj,Ka.prototype.add_bul=function(a){this.buls.push(a)},Ka.prototype.add_state=function(a){a.add(this)},Ka.prototype.destroy=function(){if(!this.dead){this.dead=!0;var a=this;this.buls.forEach(function(a){e(a.d,"trans")}),e(this.d,"trans"),this.r_unregister(),setTimeout(function(){a.r_unregister(),ba.step()},500)}},Ka.prototype.suffer=function(a){P(pa[a]),this.hp-=Aa[a].power,Aa[a].blast&&Aa[a].blast(this),this.bf.style.right=100*(1-this.hp/this.hp_max)+"%",this.hp<=0&&this.destroy()},Ka.prototype.step=function(){if(!this.initted)return this.initted=!0,void this.set_pos(ta[V].start);if(this.is_continue){this.path_len+=this.speed*oa*this.speed_k;var a=Math.floor(this.path_len);a>=ba.dirs.length&&(ba.suffer(this),this.destroy(),this.is_continue=!1);var b=j(la[a]);m(function(a,c){i(b,[a,c])},this.path_len-a,ba.dirs[a]),this.pos=b,this.set_pos(b)}},emy_create=function(a,b){return new Ka(a,b)};var La;body.oncontextmenu=function(){return w()?(y(),!1):void 0};var Ma;my_panel.onmousemove=function(a){Ma=a,w()&&(a?(La.style.left=a.x,La.style.top=a.y):(console.log(my_panel),La.style.left=my_panel.x,La.style.top=my_panel.y))},my_panel.onmouseover=function(){ja||(ja=!0,e(mn,"active"),e(body,"active"),f(body,"inactive"))},my_panel.onmouseout=function(a){a?q(mn,a.toElement)||(ja=!1,f(mn,"active"),f(body,"active"),e(body,"inactive")):(ja=!1,f(mn,"active"),f(body,"active"),e(body,"inactive"))},mn.oncontextmenu=function(a){if(w())return y(),!1;var b=q(function(a){return d(a,"tower")?a:!1},a.target);return b?"Start"!=da?!1:(s(b),a.stopPropagation(),!1):void 0},mn.onclick=function(a){La&&"wall"==a.target.lang&&(ba.left_tower_points>=Aa[La.kind].cost+5*towers_map[La.kind]?(ba.left_tower_points-=Aa[La.kind].cost,ba.tower_points_update(),r(La.kind,parseInt(a.target.dataset.x),parseInt(a.target.dataset.y),!0)):(e(tower_points_label,"zoom"),setTimeout(function(){f(tower_points_label,"zoom")},100)))};var Na=function(a){this.side="ta",this.level_state="normal",this.new_unitted=!1,"td"==S?(this.emy_seq=JSON.parse("[[0,0],[14,0],[33,0],[90,0]]"),e(title,"td"),setTimeout(function(){title.innerHTML="LV"+(a+1)+"&nbsp;-&nbsp;TD"},300),this.half_level_finish("ta")):(this.emy_seq=[],title.innerHTML="LV"+(a+1)+"&nbsp;-&nbsp;TA"),this.tipped=!1,this.load_map(a),this.reversing=!1,ca=ta[a].map,this.level=a,this.hp=ta[a].hp,this.hp_max=this.hp,this.map_start=ta[a].start,this.map_end=ta[a].end,this.dirs=o(ca,this.map_start,this.map_end),la=[],la.push(j(this.map_start)),this.dirs.forEach(function(a){la.push(j(la.last())),m(function(a,b){i(la.last(),[a,b])},1,a)}),"ta"==S?this.ta_enter():this.td_enter()};Na.prototype.set_hp=function(a){this.hp=a,void 0==this.hp&&(this.hp=this.hp_max),this.hp<=0&&(this.hp=0,this.half_level_finish(this.side)),_(".endp>.fill").style.opacity=.2+.8*(this.hp_max-this.hp)/this.hp_max,progress.innerHTML=this.hp+"/"+this.hp_max},Na.prototype.suffer=function(a){P(qa),this.set_hp(this.hp-a.str)},Na.prototype.enter_init=function(){};var Oa=[],Pa=150;Eq=function(a,b){this.kind=a,this.cb=b,this.emy=v(_("#emy_to_copy[kind='"+a+"']")),this.grid=emy_queue_grid_to_copy.cloneNode(!0),this.grid.id="",this.wrap=this.grid.querySelector(".wrap"),this.wrap.appendChild(this.emy),left_panel.querySelector(".emy_queue").appendChild(this.grid),this.height=va[a].cd*Pa,this.height_max=this.height,this.wrap.style.height=this.height,this.set_height(this.height),Oa.push(this)},Eq.prototype.set_height=function(a){this.height=a,this.grid.style.height=a,this.wrap.style.top=-(this.height_max-a)},Eq.prototype.unregister=function(){"ta"==ba.side&&this.cb(),Oa.remove(this)},Eq.prototype.step=function(){this.height-=Pa/W,this.set_height(this.height),this.height<=0&&this.unregister()},Na.prototype.ta_enter=function(){var a=this;c("Pause"),emys_left.innerHTML="",this.remove_things(),left_panel.innerHTML="",setTimeout(function(){function b(b,c){if(b.st===a.level){if(ga.log(b.st,a.level),this.new_unitted)return;this.new_unitted=!0,O("new_panel"),P(sa),_("#new_panel").querySelector("#panel").innerHTML="",b.range?(_("#new_panel").querySelector("h1").innerHTML="New Tower",_("#new_panel").querySelector("#panel").appendChild(B(b,c,!0))):(_("#new_panel").querySelector("h1").innerHTML="New Warrior",_("#new_panel").querySelector("#panel").appendChild(A(b,c)))}}emys_left.innerHTML="",U||(va.forEach(b),Aa.forEach(b))},50),this.hp=this.hp_max,this.set_hp(ta[T].hp),this.queue=emy_queue_to_copy.cloneNode(!0),left_panel.appendChild(this.queue),va.forEach(function(b,c){if(!(b.st&&T<b.st)){var d=A(b,c);d.onclick=function(){new Eq(c,function(){t(c,a.map_start);var b=ha;0==a.emy_seq.length&&(a.pre_time=b),a.emy_seq.push([b-a.pre_time,c]),a.pre_time=b})},left_panel.appendChild(d)}}),ta[this.level].preset.forEach(function(a){var a=r(a[2],a[0],a[1],!1);e(a.d,"preset")})},Na.prototype.td_enter=function(){towers_map=[0,0,0,0,0,0],this.level_state="normal",ka=!1,c("Start"),this.remove_things(),this.emy_seq_len=this.emy_seq.length,emys_left.innerHTML=this.emy_seq.length+"/"+this.emy_seq_len,this.hp=this.hp_max,this.set_hp(),this.set_tower_panel()},Na.prototype.set_tower_panel=function(){this.side_init(),Aa.forEach(function(a,b){if(!(a.st&&T<a.st)){var c=B(a,b);left_panel.appendChild(c),c.onclick=function(){x(b,fa.map_start)}}})},Na.prototype.tower_points_update=function(){tower_points_value.innerHTML=this.left_tower_points},Na.prototype.side_init=function(){if("ta"==this.side);else{left_panel.innerHTML="",tower_points=tower_points_to_copy.cloneNode(!0),tower_points.id="tower_points",tower_points_value=tower_points.querySelector("#tower_points_value"),tower_points_label=tower_points.querySelector("#tower_points_label"),left_panel.appendChild(tower_points),this.left_tower_points=ta[this.level].power;for(var a=0;a<Aa.length;a++)for(var b=0;b<towers_map[a];b++)this.left_tower_points-=Aa[a].cost+5*b;tower_points_value.innerHTML=this.left_tower_points}},Na.prototype.remove_things=function(){Z.forEach(function(a){for(var b=ia[a].length,c=b-1;c>=0;c--){var d=ia[a][c];d.destroy?d.destroy():d.unregister()}}),Ea.length=0,Oa.length=0},Na.prototype.start=function(){function a(){emys_left.innerHTML=ba.emy_seq_len-d-1+"/"+ba.emy_seq_len,t(b,ba.map_start),d++,d<c.length?(b=c[d][1],e.outputing=h(a,c[d][0])):ka=!0}var b,c=ba.emy_seq,d=0,e=this;c.length&&(b=c[0][1],a())},Na.prototype.td_enter_finish=function(){console.log(this.level,this.tipped),0!=this.level||this.tipped||(this.tipped=!0,console.log("tip"),O("game_tip0"),btn_tip0_continue.onclick=function(){N("game_tip0")})},Na.prototype.ta_enter_finish=function(){},Na.prototype.half_level_finish=function(a){P(ra),towers_map=[0,0,0,0,0,0];var c=this;if(!this.reversing){var d=_(".endp>.fill");d.style.transition="transform "+b("3.5","0.1")+"s ease-in","ta"==a?(this.reversing=!0,e(d,"rotate"),setTimeout(function(){c.reversing=!1,"td"==c.side?c.td_enter_finish():c.ta_enter_finish()},b(4e3,0)),setTimeout(function(){C(startp_to_copy),C(endp_to_copy),my_panel.style.transform+=" rotateY(180deg)",C(my_panel.querySelector(".ftr")),d.style.transition="transform "+b("3.5","0.1")+"s ease-out",f(d,"rotate")},b(3e3,0)),setTimeout(function(){C(left_panel),c.side="td",c.td_enter(),e(title,"td"),setTimeout(function(){title.innerHTML="LV"+(c.level+1)+"&nbsp;-&nbsp;TD"},250)},b(3300,0))):(O("level_failed"),this.level_state="failed")}},Na.prototype.load_map=function(a){for(var b=0;Ba>b;b++)for(var c=(parseInt(ta[a].map[b],2),0);Ca>c;c++)Da[c][b].lang=l(ta[a].map,c,b)?"wall":"road";this.start_grid=Da[ta[a].start[0]][ta[a].start[1]],this.start_grid.lang="start",this.start_grid.appendChild(_("#startp_to_copy")),this.end_grid=Da[ta[a].end[0]][ta[a].end[1]],this.end_grid.lang="end",this.end_grid.appendChild(endp_to_copy)},Na.prototype.destroy=function(a){if(Ea.remove(this.outputing),"td"==this.side){var b=this;C(startp_to_copy),C(endp_to_copy),my_panel.style.transform+=" rotateY(180deg)",C(left_panel),C(my_panel.querySelector(".ftr"))}var b=this;a?(X=!0,setTimeout(function(){b.remove_things(),X=!1},300)):this.remove_things()},Na.prototype.step=function(){function a(){for(var a=0;3>a;a++){var b="#scores>div:nth-child("+(a+1)+")>label:nth-child(2)";_(b).innerHTML=arguments[a]}}if(0==ia.emy.length&&ka&&"td"==this.side&&"normal"==this.level_state){this.level_state="success",console.log("finish");var b=0;this.emy_seq.forEach(function(a){b+=a[0]}),b/=W,b*=1e3,console.log(this.emy_seq),a(this.emy_seq.length,ta[this.level].power-this.left_tower_points,parseInt(b)+"ms"),O("level_finish")}},D(T),start.onclick=function(){switch(da){case"Pause":c("Play");break;case"Start":ba.start(),c("Pause");break;case"Play":c("Pause")}},speedfor1.onclick=function(){G(speedfor1,1)},speedfor2.onclick=function(){G(speedfor2,2)},speedfor4.onclick=function(){G(speedfor4,4)},btn_restart.onclick=function(){"ta"==ba.side?K(_("#level_setting #btn_restart_defence1")):J(_("#level_setting #btn_restart_defence1")),O("level_setting")},btn_restart_attack.onclick=L,btn_restart_whole_level.onclick=L,btn_restart_defence1.onclick=M,btn_restart_defence2.onclick=M,btn_continue.onclick=function(){N("level_setting")},btn_next_level.onclick=function(){N("level_finish"),setTimeout(function(){T==ta.length-1?O("game_over"):D(++T,!0)},550)},btn_new_start.onclick=function(){N("new_panel")},btn_start_game.onclick=function(){N("game_cover")},U||0!=T||O("game_cover"),console.log(jsfxr),requestAnimationFrame(R)};</script><style>#head>#title,body{font-family:Arial,Verdana,Sans-serif}#head>#title,#my_panel,#right_panel .ftr{transition:transform 1s}.ftr .speed,.grid,.start{display:inline-block}#head,#right_panel .ftr,#scores,.endp,.grid,.m-panel,.startp,.top-btn{text-align:center}.zoom{transform:scale(1.3)}#stage,.blood{transform:translate(-50%,-50%)}#stage{width:1000px;height:600px;background-color:#222;top:50%;left:50%;position:absolute;border:10px solid #222;perspective:2000px}#left_panel,#right_panel{height:90%;background-color:#333}#left_panel,#right_panel,#stage>div{position:relative}#left_panel{width:246px;float:left;box-sizing:border-box}#right_panel{margin-left:246px;box-sizing:content-box;perspective:2000px;border-left:4px #bbb solid}#head,#mn,.grid,.start button{box-sizing:border-box}#right_panel .ftr{height:40px;width:100%;background:#111;position:absolute;bottom:0}.ftr .speed{width:30%;position:absolute;left:0;height:100%;float:left}.ftr .speed button{width:33%;margin:0}.ftr button{height:39px;position:relative;bottom:-1px}.start{width:20%;position:absolute;left:30%;height:100%}.start button{width:100%;margin:0}.top-btn{background:#595B5B;box-shadow:0 0 0 1px #303233;border:none;border-top:1px solid #666767;color:#FFF;text-shadow:0 -1px 0 #000;padding:3px 20px 4px 8px;-webkit-appearance:none;padding-left:0;padding-right:0;font-size:22px;position:relative;bottom:-1px;outline:0}.top-btn.inactive:hover{background-color:#454545}*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.src{float:right;width:37%;color:#ddd;line-height:40px}.src a{color:#4682b4}#head{height:10%;background:#333;border-bottom:4px #bbb solid;perspective:500px}#head>#title{color:#F0F1F1;font-size:35px;top:50%;left:50%;position:absolute;transform:translate(-50%,-50%) rotateX(0)}.emy-panel,.grid{position:relative}#head>#title.td{transform:translate(-50%,-50%) rotateX(360deg)}#mn{background-color:#333}.grid{height:50px;width:50px;-webkit-transition:.1s linear;-o-transition:.1s linear;transition:.1s linear}.grid[lang=wall]{background-color:#444}.phone .tower.catching{display:none;visibility:hidden;opacity:0}body.inactive .catching{display:none}body.catching #mn.active .grid[lang=wall]{border:1px solid #555}body.catching #mn.active .grid[lang=wall]:hover{cursor:pointer;border:3px solid #4682b4}.grid[lang=end],.grid[lang=road],.grid[lang=start]{background-color:#222}.emy-panel{margin:0;margin-right:50px;background-color:rgba(255,255,255,.15);padding-top:10px;border-bottom:1px #222 solid}.emy-panel.tower-panel{margin-right:0}.emy-panel *{cursor:pointer}#new_panel .emy-panel,#new_panel .emy-panel *{cursor:auto!important}.emy-panel .emy,.emy-panel .tower{top:50%;left:15%}.emy-panel .emy{animation:none!important}.emy-panel .abt{position:absolute;left:30%;top:50%;transform:translate(0,-50%)}.emy-panel .abt .bar{margin:25px;line-height:0;position:relative;margin-left:0;color:#fff;font-size:14px}.emy-panel.tower-panel .abt .bar{margin:20px;line-height:0;position:relative;margin-left:0;color:#fff}.emy-panel .abt .bar span{color:#fff;background-color:#4682b4;width:30px;height:10px;display:inline-block;line-height:100%;vertical-align:middle;position:absolute;left:55px;top:50%;transform:translate(0,-50%)}.emy-panel p{text-indent:2em;margin-top:10px;color:#fff}.emy-panel .top{height:70px;position:relative}.emy-panel.tower-panel .top{height:70px}.emy-panel.tower-panel:nth-child(2){margin-top:8px}.emy-panel .bottom{overflow:auto;position:relative}.hide{visibility:hidden}.displaynone{display:none!important}#scores,.endp>.fill{display:inline-block}.bul{z-index:1}.bul[kind="0"]{background-color:#6cf;position:absolute;transform:translate(-50%,-50%);border:4px solid transparent;border-radius:50%;height:0;width:0;left:0;top:0;transition:opacity .3s}.bul[kind='1'],.bul[kind='1']:after{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;position:absolute}.bul[kind='1']{border-bottom:10px solid #4682b4}.bul[kind='1']:after{border-top:10px solid #4682b4;content:"";top:3px;left:-5px}.bul[kind='2']{width:10px;height:2px;background-color:#4682b4;position:absolute}.blood{width:25px;height:5px;border:1px solid green;position:absolute;top:-10px;left:50%;overflow:hidden;box-shadow:none!important}.blood>.fill,.endp{width:100%;position:absolute;right:0}.blood>.fill{height:100%;background-color:red;box-sizing:content-box;top:1px;box-shadow:none!important}.endp{-webkit-perspective:250;perspective:200;left:0;top:0}.endp>.fill{position:relative;top:-15px;height:0;width:0;border-width:40px 11px;border-style:solid;border-color:transparent;border-top-color:#4682b4;border-bottom-width:0;animation:rotate 2s linear infinite;margin:0;opacity:.2;transition:transform 3s ease-in;left:2px}.endp>.fill.rotate{transform:rotateY(1440deg)}.startp{width:100%;box-sizing:border-box;position:relative;height:100%}.startp>.fill{position:absolute;left:0;right:0;top:0;bottom:0;border:25px solid #4682b4;opacity:.5;transition:all .5s}.startp.out>.fill{border-width:13px;opacity:.8}@keyframes rotate{0%,100%{top:-10px}50%{top:-20px}}#progress{color:#fff;position:relative;bottom:13px}#emys_left{position:absolute;left:50%;top:0;transform:translate(-50%,0);font-size:13px;color:#fff;font-weight:700}#level_finish{height:280px;width:500px}#level_finish>h1{margin-bottom:0}.m-panel{border:10px solid #222;background-color:#4A4D4E;z-index:1000;position:fixed;top:50%;left:50%;transform:translate(-50%,-100%);color:#fff;border-radius:20px}.m-panel.center{transform:translate(-50%,-50%)}#next_level{position:absolute;bottom:30px;left:50%;transform:translate(-50%,0);width:150px;border-radius:10px;padding:8px;padding-bottom:12px}.top-btn.inactive,.top-btn:active{background-color:#3f4041}#scores{margin-top:5px;width:300px}#scores>div{margin:15px;font-size:20px;overflow:auto;display:block}#scores>div>label:first-child{float:left}#scores>div>label:last-child{float:right}#level_setting{height:150px;width:600px}.m-panel .top-btn{margin:15px;border-radius:10px;padding:8px 15px}#game_over{width:400px}.m-panel li.chinese{font-size:12px;list-style:none;margin-top:0;margin-bottom:10px}#game_cover,#level_failed{width:500px}#game_cover ul{display:inline-block;text-align:left;font-size:20px;margin:5px}.trans{opacity:0}#tower_points{text-align:center;margin-top:10px;color:#fff}div#tower_points label{transition:.1s all}div#tower_points label.zoom{transform:scale(1.3)}#body_mask{position:fixed;width:100%;height:100%;background-color:rgba(255,255,255,.43);top:0;z-index:999}.emy,.emy[kind='2'] .head{transform:translate(-50%,-50%);z-index:1;position:absolute}.emy{left:0;top:0;text-align:center;transition:opacity .5s;opacity:1}.emy.trans{opacity:0}.emy[kind='0']{height:10px;width:10px}.emy[kind='0'] .body{height:10px;width:10px;background-color:#faebd7}.emy[kind='1']{height:16px;width:16px}.emy[kind='1'] .body{height:16px;width:16px;border-radius:5px;background-color:#faebd7}.emy[kind='1'] .eye{height:4px;width:4px;right:6px;top:5px;background-color:#000;position:absolute;animation:blink 4s infinite;box-shadow:none!important}.emy[kind='2']{height:30px;width:30px;animation:float 3s infinite}.emy[kind='2'] .head{height:18px;width:18px;border-radius:5px;background-color:#faebd7;top:10px;left:50%}.emy[kind='2'] .leg{height:20px;width:5px;border-radius:5px;background-color:#faebd7;position:absolute;bottom:0;left:50%;transform:translate(-50%,0)}.emy[kind='3']{height:30px;width:30px}.emy[kind='3'] .outline{height:30px;width:30px;border-radius:10px;border:5px solid #faebd7;box-sizing:border-box;position:absolute;transform:translate(-50%,-5%)}.emy[kind='3'] .core{height:10px;width:10px;left:50%;top:50%;border:6px solid #faebd7;border-radius:50%;box-sizing:border-box;position:absolute;transform:translate(-50%,-50%);box-shadow:none!important}@keyframes blink{0%,100%,40%,60%,80%{transform:scaleY(1)}50%,70%{transform:scaleY(0)}}@keyframes float{0%,100%{top:0}50%{top:-10px}}@keyframes r_rotate{0%{transform:translate(-50%,-50%) rotate(0)}50%{transform:translate(-50%,-50%) rotate(180deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}.tower,.tower.preset,.tower>.range{transform:translate(-50%,-50%);position:absolute}.tower,.tower.preset{height:50px;width:50px;overflow:visible;z-index:10;box-sizing:border-box}.tower>.range{left:50%;top:50%;border:2px solid #4682b4;border-radius:50%;box-sizing:border-box;transition:.3s ease-out;width:0;height:0;background-color:rgba(51,122,182,.1);opacity:0}.tower>.range.active{opacity:1}.tower[kind='0']>.range.active{width:200px;height:200px}.tower[kind='1']>.range.active{width:150px;height:150px}.tower[kind='2']>.range.active{width:300px;height:300px}.tower[kind='3']>.range.active{width:150px;height:150px}.tower[kind="0"] .shape{height:50px;width:50px;border:13px solid rgba(51,122,182,.6);border-bottom-color:transparent;border-radius:50%;box-sizing:border-box;display:inline-block}.tower[kind="0"] .shape .core{background-color:#6cf;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:6px solid rgba(102,204,255,0);border-radius:50%}.tower[kind="0"]>.fill{height:100%;width:100%;position:absolute;top:0}.tower[kind="1"] .outline1{height:30px;width:30px;border:5px solid rgba(51,122,182,.8);top:50%;left:50%;transform:translate(-50%,-50%) rotate(45deg) skew(10deg,10deg);box-sizing:border-box;display:inline-block;position:absolute}.tower[kind="1"] .core{background-color:#6cf;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:4px solid rgba(102,204,255,0);border-radius:50%}.tower[kind="2"] .head{height:0;width:0;border:5px solid rgba(102,204,255,1);top:20%;left:50%;transform:translate(-50%,-50%);box-sizing:border-box;display:inline-block;position:absolute;border-radius:50%}.tower[kind="2"] .body{height:0;width:0;top:40%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:5px solid #4682b4;border-bottom-width:35px;border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.tower[kind="2"] .base{top:80%;position:absolute;left:50%;height:10px;width:20px;transform:translate(-50%,-50%);display:inline-block;border:3px solid #4682b4;opacity:.6;border-radius:50%}.tower[kind="3"] .outline{height:40px;width:40px;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:3px solid #4682b4;opacity:.8}.tower[kind="3"] .core{height:0;width:0;border-radius:50%;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:5px solid rgba(102,204,255,1)}.tower[kind="3"] .shield{height:23px;width:23px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;border:4px solid transparent;border-right-color:#4682b4;animation:r_rotate 2s infinite linear;opacity:1}.emy_queue,.tower>.fill{top:0;position:absolute}.tower>.fill{height:100%;width:100%}label.prop-value{line-height:13px;font-size:13px;left:100%;position:absolute;margin-left:2px}.emy-panel span.cd{height:3px;position:absolute;background-color:#4682b4;bottom:0}.emy_queue{width:100px;background-color:rgba(51,122,182,.1);bottom:0;right:0;transform:scale(.5,.5) translate(50%,-50%);height:200%;overflow:auto;overflow-x:hidden}.emy_queue .emy{position:absolute;transform:translate(-50%,-50%);left:50%;top:60%;animation:none!important}.emy_queue_grid{height:50px;width:100px;position:relative;background-color:rgba(250,235,215,.2);margin-bottom:2px}.emy_queue_grid .wrap{position:absolute;top:0;bottom:0;left:0;right:0;height:50px}.cold *{box-shadow:0 0 0 3px #4682b4}.tower[kind='1'] .loop{left:50%;top:50%;position:absolute;border:3px solid #4682b4;border-radius:50%;transform:translate(-50%,-50%);animation:scale 1s}@keyframes scale{0%{height:10px;width:10px;opacity:1}100%{height:150px;width:150px;opacity:0}}#new_panel{height:270px;width:500px}#new_panel .emy-panel{margin-right:0;width:400px;display:inline-block;margin-top:10px;background:0 0;border-bottom:none;text-align:left;position:relative;left:80px}#new_panel .emy-panel .emy,#new_panel .emy-panel .tower{margin:0}</style></head><body style="background-color:#4A4D4E;height:100%;margin:0px"><div id="stage"><div id="head"><label id="title">LV1&nbsp;-&nbsp;TA</label></div><div id="my_panel"><div id="left_panel"></div><div id="right_panel"><div id="mn"></div><div class="ftr"><span class="speed"><button class="top-btn" id="speedfor1">&times;1</button><button class="top-btn inactive" id="speedfor2">&times;2</button><button class="top-btn inactive" id="speedfor4">&times;4</button></span><div class="start"><button class="top-btn" id="start">Start</button></div><div class="start" style="left:initial;right:37%;width:13%"><button class="top-btn" id="btn_restart">Restart</button></div><div class="src">TATD for <a href="http://2015.js13kgames.com/" target="_Blank">js13kgames</a> by <a href="https://github.com/blackmiaool" target="_Blank">blackmiaool</a></div></div></div></div></div><div class="emy hide trans" id="emy_to_copy" kind="0"><div class="blood"><div class="fill"></div></div><div class="body"></div></div><div class="emy hide trans" id="emy_to_copy" kind="1"><div class="blood"><div class="fill"></div></div><div class="body"></div><div class="eye"></div></div><div class="emy hide trans" id="emy_to_copy" kind="2"><div class="blood"><div class="fill"></div></div><div class="head"></div><div class="leg"></div></div><div class="emy hide trans" id="emy_to_copy" kind="3"><div class="blood"><div class="fill"></div></div><span class="outline"><span class="core"></span></span></div><div class="tower hide" id="tower_to_copy" kind="0"><div class="range"></div><div class="shape"><div class="core"></div></div><div class="fill"></div></div><div class="tower hide" id="tower_to_copy" kind="1"><div class="range"></div><div class="core"></div><div class="outline1"></div><div class="fill"></div></div><div class="tower hide" id="tower_to_copy" kind="2"><div class="range"></div><div class="base"></div><div class="body"></div><div class="head"></div><div class="fill"></div></div><div class="tower hide" id="tower_to_copy" kind="3"><div class="range"></div><div class="outline"></div><div class="core"></div><div class="shield"></div><div class="fill"></div></div><div class="emy-panel tower-panel hide" id="tower_panel_to_copy"><div class="top"><div class="abt"><div class="bar"><label>Str</label><span></span></div><div class="bar"><label>Range</label><span></span></div><div class="bar"><label>Speed</label><span></span></div><div class="bar cost"><label>Cost</label><span></span></div></div></div><div class="bottom"><p>Basic warrior.</p></div></div><div class="emy-panel hide" id="emy_panel_to_copy"><div class="top"><div class="abt"><div class="bar"><label>HP</label><span></span></div><div class="bar"><label>Move</label><span></span></div><div class="bar"><label>Str</label><span></span></div></div></div><div class="bottom"><p></p></div></div><div class="bul hide" id="bul_to_copy" kind="0"></div><div class="bul hide" id="bul_to_copy" kind="1"></div><div class="bul hide" id="bul_to_copy" kind="2"></div><div class="endp" id="endp_to_copy"><div class="fill"></div><br><label id="progress">0/10</label></div><div class="startp" id="startp_to_copy"><div class="fill"></div><label id="emys_left">10/10</label></div><div id="hide_div" style="display:none"><div id="tower_points_to_copy"><label id="tower_points_label">Tower Points : <font id="tower_points_value"></font></label></div><div id="emy_queue_to_copy" class="emy_queue"></div><div id="emy_queue_grid_to_copy" class="emy_queue_grid"><div class="wrap"></div></div></div><div id="body_mask" class="displaynone trans"></div><style></style><div id="level_finish" class="m-panel displaynone trans"><h1>You Win!</h1><div id="scores"><div><label>Warrior Cost :</label><label></label></div><div><label>Tower Points Cost :</label><label></label></div><div><label>Attack Time :</label><label></label></div></div><br><button class="top-btn" id="btn_next_level">Next Level</button></div><div id="level_setting" class="m-panel displaynone trans" style=""><h1 style="margin-bottom:10px">Restart</h1><div><button class="top-btn" id="btn_restart_attack">Restart Attack</button> <button class="top-btn" id="btn_continue">Continue</button> <button class="top-btn" id="btn_restart_defence1">Restart Defence</button></div></div><div id="level_failed" class="m-panel displaynone trans"><h1 style="margin-bottom:10px">What a Pity</h1><div><button class="top-btn" id="btn_restart_whole_level">Restart Whole Level</button> <button class="top-btn" id="btn_restart_defence2">Restart Defence</button></div></div><div id="game_cover" class="m-panel displaynone trans"><h1 style="margin-bottom:0px">TATD</h1><h3 style="margin:0px">Tower Attack and Tower Defence</h3><p style="margin:5px;margin-top:0px;font-size:12px">以彼之道，还施彼身&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----&nbsp;慕容复</p><ul><li>Click warriors in left panel to summon them.</li><li class="chinese">点击左边面板里的士兵来召唤他们。</li><li>Warriors you summon will attack you at last.</li><li class="chinese">你召唤出的士兵终将攻击你。</li></ul><div><button class="top-btn" id="btn_start_game">Start</button></div></div><div id="game_tip0" class="m-panel displaynone trans" style="width:450px"><h1 style="margin-bottom:10px">Tip</h1><p style="margin:5px;margin-top:0px;font-size:12px;line-height:18px">现在流的泪,都是当初召唤小兵时脑子进的水。&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----&nbsp;作者</p><ul style="text-align:left"><li>It's your turn, now.</li><li class="chinese">现在，轮到你了。</li><li>Warriors you summoned will attack you.</li><li class="chinese">你召唤出的士兵现在会攻击你。</li><li>The cost of a tower increases with the count of towers with the same kind.</li><li class="chinese">同一种塔的消耗随数量增加。</li><li>Before defence start, you can remove a tower by right click.</li><li class="chinese">防守开始前，你可以右键删除塔。</li><li>I guess you know what you should do now.</li><li class="chinese">你知道你现在该做什么了吧？</li></ul><div><button class="top-btn" id="btn_tip0_continue">Continue</button></div></div><div id="new_panel" class="m-panel displaynone trans"><h1 style="margin-bottom:0px">New Warrior</h1><div id="panel"></div><div><button class="top-btn" id="btn_new_start">Start</button></div></div><div id="game_over" class="m-panel displaynone trans"><h1>Congratulations!</h1><p>The game is over !</p><br></div></body></html>