!function(){"use strict";function e(){n("none"),d(),C.bank=0,o(),setTimeout(t,2e3)}function t(){for(var e=.1-.2*Math.random();Math.abs(e)<.02;)e=.1-.2*Math.random();R.style.cursor="wait",a(0,e)}function n(e){E.style.display=e}function o(){A.clearRect(0,0,W,L),J.draw(),N.draw(C)}function r(e){F.clearRect(0,0,W,L),F.save(),F.rotate(e),H.draw(),F.restore()}function a(e,t){function n(){r(e),e+=t,t*=.995,Math.abs(t)>5e-4?o=requestAnimationFrame(n):(cancelAnimationFrame(o),l(e),R.style.cursor="auto")}var o=requestAnimationFrame(n)}function i(e,t){function n(){r(e),e+=o,e>0&&X>e?a=requestAnimationFrame(n):(cancelAnimationFrame(a),r(0),R.style.cursor="auto",t())}var o=e>Math.PI?.01:-.01,a=requestAnimationFrame(n);R.style.cursor="none"}function l(e){for(var a,l=e>0?X-e%X:Math.abs(e)%X,d=0;l>D+D*d;)d++;a=d%6+1,1!==a?C.bank+=a:(C.bank=0,C.playerMove=!C.playerMove),o(),r(e),setTimeout(function(){i(e,function(){C.playerMove?(u(),n("block")):c()?setTimeout(t,1e3):(C.score.player-=C.bank,C.score.player<=0?(C.score.player=0,s()):(C.bank=0,C.playerMove=!0,o(),u()))})},1e3)}function s(){var e=C.score.gip?"Gip has cleaned you out!":"You have cleaned Gip out!";n("none"),d(),A.clearRect(-W/2,-L/2,W,L),F.clearRect(-W/2,-L/2,W,L),A.save(),A.textBaseline="middle",A.textAlign="center",A.fillStyle="#2E0C09",A.strokeStyle="#9C4300",A.lineWidth=4,A.fillRect(-q/2,-q/8,q,q/4),A.strokeRect(-q/2,-q/8,q,q/4),A.font="bold "+q/12+"px fantasy",A.strokeStyle="#1F0210",A.fillStyle="#9C4300",A.lineWidth=1,A.fillText(e,0,0),A.strokeText(e,0,0),A.restore(),C.score.gip?S.gip+=1:S.player+=1,localStorage.setItem("ReversedPigTournament",JSON.stringify(S)),setTimeout(function(){document.location.reload()},3e3)}function c(){return C.score.player-C.bank<=0?!1:C.bank<20}function u(){R.addEventListener("mousedown",h,!1),R.addEventListener("mouseup",y,!1),R.addEventListener("mousemove",m,!1)}function d(){R.removeEventListener("mousedown",h),R.removeEventListener("mouseup",y),R.removeEventListener("mousemove",m)}function f(e,t){var n=Math.abs(e-G),o=Math.abs(t-Y),r=Math.sqrt(n*n+o*o);return B>r&&r>B/3?r:!1}function h(e){var t,n,o,r=e.pageX,a=e.pageY,i=f(r,a);i&&(M=!0,R.style.cursor="-webkit-grabbing",R.style.cursor="-webkit-grabbing",R.style.cursor="-moz-grabbing",t=r-G,n=a-Y,o=Math.atan2(n,t),w=o>0?o:X+o,k=0)}function y(t){var o,r,l,s,c,h,y=t.pageX,m=t.pageY;M&&(M=!1,o=y-G,r=m-Y,s=Math.atan2(r,o),s=s>0?s:X+s,f(y,m)?(l=t.timeStamp,x=x||0,c=l-x,h=Math.abs(k),d(),h&&h>1&&200>c?(a(s-w,k/100),x=null,T=null,R.style.cursor="wait",n("none")):i(s,function(){C.playerMove?(u(),n("block")):e()})):(i(s,function(){C.playerMove?(u(),n("block")):e()}),x=null,T=null,k=0))}function m(e){var t,n,o,a,i,l,s=e.pageX,c=e.pageY,u=f(s,c);M&&u&&(t=s-G,n=c-Y,o=Math.atan2(n,t),o=o>0?o:X+o,a=e.timeStamp,x=x||0,T=T||w,i=a-x,l=o-T,r(o-w),i>100&&(k=l/i*1e3,x=a,T=o))}function p(e,t){function n(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=e.height=o,t.shadowBlur=10,t.shadowColor="rgba(0,0,0,0.5)",t.fillStyle="#2E0C09",t.strokeStyle="#9C4300",t.lineWidth=4,t.beginPath(),t.arc(r,r,o/3,0,X),t.fill(),t.stroke(),e}var o=Math.round(t),r=Math.round(t/2),a=Math.round(t/4),i=Math.round(t/8),l=n(o);this.draw=function(t){var n=a+i,s=t.playerMove?-(r-i/2):r-1.5*i;e.drawImage(l,-r,-r),e.save(),e.font="bold "+n+"px fantasy",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#9C4300",e.fillText(t.bank,0,0),e.translate(0,o-a/2),e.shadowBlur=10,e.shadowColor="rgba(0,0,0,0.5)",e.fillStyle="#2E0C09",e.strokeStyle="#9C4300",e.lineWidth=4,e.fillRect(-r,0,o,a),e.strokeRect(-r,0,o,a),e.font="bold "+a/3+"px fantasy",e.strokeStyle="#1F0210",e.fillStyle="#9C4300",e.lineWidth=1,e.fillText("YOU",-n,a/4),e.fillText(t.score.player,-n,a/4*3),e.fillText("GIP",n,a/4),e.fillText(t.score.gip,n,a/4*3),e.strokeText("YOU",-n,a/4),e.strokeText(t.score.player,-n,a/4*3),e.strokeText("GIP",n,a/4),e.strokeText(t.score.gip,n,a/4*3),e.fillRect(s,a/2,i,5),e.restore()}}function g(e,t){function n(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=Math.round(a/2);return e.width=o,e.height=r,A.save(),t.shadowBlur=10,t.shadowColor="rgba(0,0,0,0.5)",t.fillStyle="#2E0C09",t.strokeStyle="#9C4300",t.lineWidth=4,t.beginPath(),t.moveTo(5,5),t.lineTo(o-5,5),t.lineTo(o-5,r-a),t.lineTo(o/2+n,r-a),t.lineTo(o/2,r-5),t.lineTo(o/2-n,r-a),t.lineTo(5,r-a),t.lineTo(5,5),t.fill(),t.stroke(),t.restore(),t.font="bold "+a+"px fantasy",t.textBaseline="middle",t.lineWidth=1,t.strokeStyle="#1F0210",t.textAlign="center",t.fillStyle="#9C4300",t.fillText("GIP DESREVER",o/2,(r-a)/2),t.strokeText("GIP DESREVER",o/2,(r-a)/2),e}var o=Math.round(t),r=Math.round(t/3),a=Math.round(r/3),i=n();this.draw=function(){e.drawImage(i,-o/2,-(Y-a/2))}}function v(e,t,n){function o(){var e=t/2-10,o=document.createElement("canvas"),r=o.getContext("2d"),a=t/2,i=0,l=.85*e,s=0;for(o.width=o.height=t,r.strokeStyle="#9C4300",r.lineWidth=3,r.font="bold "+.075*e+"px sans-serif",r.textAlign="center",r.translate(a,a);24>s;i+=n,s++)r.fillStyle=s%2?"#4A1804":s%6?"#4C0E04":"#1F0210",r.beginPath(),r.arc(0,0,e,i,i+n),r.lineTo(0,0),r.fill();for(s=0,i=0;24>s;i+=n,s++)r.beginPath(),r.arc(0,0,e,i,i+n),r.lineTo(0,0),r.stroke();for(r.fillStyle="#9C4300",s=0,i=0;24>s;i+=n,s++)r.save(),r.rotate(i+n/2),r.fillText(s%6+1,0,-l),r.restore();return r.lineWidth=20,r.beginPath(),r.arc(0,0,e,0,2*Math.PI),r.stroke(),o}var r=o();this.draw=function(){e.drawImage(r,-t/2,-t/2)}}function b(e){return document.querySelector(e)}var M,w,k,x,T,S=JSON.parse(localStorage.getItem("ReversedPigTournament"))||{gip:0,player:0},C={bank:0,playerMove:Math.floor(Math.random()+.5),score:{player:100,gip:100}},E=b(".hold-btn"),R=b(".board"),P=b(".wheel"),I=b(".info"),A=R.getContext("2d"),F=P.getContext("2d"),W=R.width=P.width=window.innerWidth,L=R.height=P.height=window.innerHeight,G=W/2,Y=L/2,q=.85*Math.min(W,L),B=q/2,O=Math.round(B/2.5),X=2*Math.PI,D=X/24;F.translate(G,Y),A.translate(G,Y);var H=new v(F,q,D),J=new g(A,B),N=new p(A,B);o(),r(0),I.innerHTML="Tournament Score: You "+S.player+" | Gip "+S.gip,E.style.top=Math.round(Y+B-B/16)+"px",E.style.left=Math.round(G-O/2)+"px",E.style.width=O+"px",C.playerMove?u():e(),E.addEventListener("click",function(){C.playerMove&&(C.score.gip-=C.bank,C.score.gip<=0?(C.score.gip=0,s()):(C.playerMove=!1,e()))},!1)}(window,document);