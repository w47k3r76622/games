!function(){var t,i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),e=document.getElementById("c"),o=e.getContext("2d"),n=640,a=920,l=0,h=!0;e.width=n,e.height=a;for(var r=function(){var t=o.createLinearGradient(0,e.height,0,0);t.addColorStop(0,"#D84800"),t.addColorStop(1,"#FFA475"),o.fillStyle=t,o.beginPath(),o.rect(0,0,e.width,e.height),o.closePath(),o.fill()},d=10,f=[],c=0;d>c;c++)f.push([Math.random()*e.width,Math.random()*e.height,100*Math.random(),Math.random()/2]);var u=function(){for(var t=0;d>t;t++)o.fillStyle="rgba(255, 255, 255, "+f[t][3]+")",o.beginPath(),o.arc(f[t][0],f[t][1],f[t][2],0,2*Math.PI,!0),o.closePath(),o.shadowBlur=20,o.shadowColor="white",o.fill(),o.shadowColor="transparent"},m=function(t){for(var i=0;d>i;i++)f[i][1]+f[i][2]<0?(f[i][0]=Math.random()*e.width,f[i][2]=100*Math.random(),f[i][1]=e.height+f[i][2],f[i][3]=Math.random()/2):f[i][1]-=t},s=new function(){var t=this;t.image=new Image,t.image.src="img/player.png",t.width=32,t.height=32,t.X=0,t.Y=0,t.frames=1,t.actualFrame=0,t.interval=0,t.isJumping=!1,t.isFalling=!1,t.jumpSpeed=0,t.fallSpeed=0,t.setPosition=function(i,e){t.X=i,t.Y=e},t.draw=function(){try{o.shadowBlur=5,o.shadowColor="white",o.drawImage(t.image,t.width*t.actualFrame,0,t.width,t.height,t.X,t.Y,t.width,t.height)}catch(i){}o.shadowColor="transparent"},t.jump=function(){t.isJumping||t.isFalling||(t.fallSpeed=0,t.isJumping=!0,t.jumpSpeed=25)},t.checkJump=function(){t.Y<.5*e.height?t.setPosition(t.X,t.Y+t.jumpSpeed):(t.jumpSpeed>10&&l++,m(.5*this.jumpSpeed),p.forEach(function(i,o){if(i.y-=t.jumpSpeed,i.y<0){var n=~~(8*Math.random());n=0===n?1:0,p[o]=new v(Math.random()*(e.width-g),i.y+e.height,n)}})),t.jumpSpeed--,0===t.jumpSpeed&&(t.isJumping=!1,t.isFalling=!0,t.fallSpeed=1)},t.checkFall=function(){t.Y>0?(t.setPosition(t.X,t.Y-t.fallSpeed),t.fallSpeed+=.5):0===l?t.fallStop():F()},t.fallStop=function(){t.isFalling=!1,t.fallSpeed=0,t.jump()},t.moveLeft=function(){t.X>0&&t.setPosition(t.X-5,t.Y)},t.moveRight=function(){t.X+t.width<e.width&&t.setPosition(t.X+5,t.Y)}},w=6,p=[],g=70,S=20,v=function(t,i,e){var n=this;return n.firstColor="#F20000",n.onCollide=function(){s.fallStop()},1===e&&(n.firstColor="#AADD00",n.onCollide=function(){s.fallStop(),s.jumpSpeed=50}),n.x=~~t,n.y=i,n.type=e,n.isMoving=~~(2*Math.random()),n.direction=~~(2*Math.random())?-1:1,n.draw=function(){o.fillStyle="rgba(255, 255, 255, 1)",o.fillStyle=n.firstColor,o.shadowBlur=10,o.shadowColor="black",o.fillRect(n.x,n.y,g,S),o.shadowColor="transparent"},n},y=(function(){for(var t,i=e.height-S,o=0;w>o;o++)t=~~(5*Math.random()),t=0===t?1:0,p[o]=new v(Math.random()*(e.width-g),i,t),i>0&&(i-=~~(e.height/w))}(),function(){p.forEach(function(t){s.isFalling&&s.X<t.x+g&&s.X+s.width>t.x&&s.Y<t.y+S&&s.Y>t.y&&t.onCollide()})});s.setPosition(~~(e.width-s.width),~~(0+s.X)),document.onmousemove=function(t){s.X+e.offsetLeft>t.pageX?s.moveLeft():s.X+e.offsetLeft<t.pageX&&s.moveRight()},e.onclick=function(){s.jump()};var C=function(){r(),u(),m(1),s.isJumping&&s.checkJump(),s.isFalling&&s.checkFall(),s.draw(),p.forEach(function(t,i){t.isMoving&&(t.x<0?t.direction=1:t.x>e.width-g&&(t.direction=-1),t.x+=t.direction*(i/2)*~~(l/100)),t.draw()}),y(),o.fillStyle="white",o.font="bold 14pt Arial",o.shadowBlur=20,o.shadowColor="white",o.fillText("POINTS: "+l,10,e.height-10),h&&(t=i(C))},F=function(){h=!1,window.cancelAnimationFrame(t),setTimeout(function(){o.fillStyle="Black",o.beginPath(),o.rect(0,0,e.width,e.height),o.closePath(),o.fill(),o.fillStyle="White",o.font="bold 16pt Arial",o.textAlign="center",o.shadowBlur=30,o.shadowColor="white",o.fillText("GAME OVER",e.width/2,e.height/2-50),o.fillText("SCORE: "+l,e.width/2,e.height/2-30),o.fillText("Click to try again",e.width/2,e.height/2)},100),document.onclick=function(){location.reload(),h=!0}};C()}();