function SfxrParams(){this.setSettings=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;.01>this.c&&(this.c=.01);a=this.b+this.c+this.e;.18>a&&(a=.18/a,this.b*=a,this.c*=a,this.e*=a)}}
function SfxrSynth(){this._params=new SfxrParams;var a,b,c,d,e,h,l,n,K,B,p,L;this.reset=function(){var a=this._params;d=100/(a.f*a.f+.001);e=100/(a.g*a.g+.001);h=1-a.h*a.h*a.h*.01;l=-a.i*a.i*a.i*1E-6;a.a||(p=.5-a.n/2,L=5E-5*-a.o);n=1+a.l*a.l*(0<a.l?-.9:10);K=0;B=1==a.m?0:(1-a.m)*(1-a.m)*2E4+32};this.totalReset=function(){this.reset();var d=this._params;a=d.b*d.b*1E5;b=d.c*d.c*1E5;c=d.e*d.e*1E5+12;return 3*((a+b+c)/3|0)};this.synthWave=function(U,M){var f=this._params,N=1!=f.s||f.v,t=f.v*f.v*.1,O=
1+3E-4*f.w,q=f.s*f.s*f.s*.1,V=1+1E-4*f.t,W=1!=f.s,X=f.x*f.x,Y=f.g,P=f.q||f.r,Z=f.r*f.r*f.r*.2,E=f.q*f.q*(0>f.q?-1020:1020),Q=f.p?((1-f.p)*(1-f.p)*2E4|0)+32:0,$=f.d,R=f.j/2,aa=f.k*f.k*.01,F=f.a,G=a,ba=1/a,ca=1/b,da=1/c,f=5/(1+f.u*f.u*20)*(.01+q);.8<f&&(f=.8);for(var f=1-f,H=!1,S=0,x=0,y=0,C=0,v=0,z,w=0,k,r=0,u,I=0,g,T=0,s,J=0,D=Array(1024),A=Array(32),m=D.length;m--;)D[m]=0;for(m=A.length;m--;)A[m]=2*Math.random()-1;for(m=0;m<M;m++){if(H)return m;Q&&++T>=Q&&(T=0,this.reset());B&&++K>=B&&(B=0,d*=n);
h+=l;d*=h;d>e&&(d=e,0<Y&&(H=!0));k=d;0<R&&(J+=aa,k*=1+Math.sin(J)*R);k|=0;8>k&&(k=8);F||(p+=L,0>p?p=0:.5<p&&(p=.5));if(++x>G)switch(x=0,++S){case 1:G=b;break;case 2:G=c}switch(S){case 0:y=x*ba;break;case 1:y=1+2*(1-x*ca)*$;break;case 2:y=1-x*da;break;case 3:y=0,H=!0}P&&(E+=Z,u=E|0,0>u?u=-u:1023<u&&(u=1023));N&&O&&(t*=O,1E-5>t?t=1E-5:.1<t&&(t=.1));s=0;for(var ea=8;ea--;){r++;if(r>=k&&(r%=k,3==F))for(z=A.length;z--;)A[z]=2*Math.random()-1;switch(F){case 0:g=r/k<p?.5:-.5;break;case 1:g=1-r/k*2;break;
case 2:g=r/k;g=6.28318531*(.5<g?g-1:g);g=1.27323954*g+.405284735*g*g*(0>g?1:-1);g=.225*((0>g?-1:1)*g*g-g)+g;break;case 3:g=A[Math.abs(32*r/k|0)]}N&&(z=w,q*=V,0>q?q=0:.1<q&&(q=.1),W?(v+=(g-w)*q,v*=f):(w=g,v=0),w+=v,C+=w-z,g=C*=1-t);P&&(D[I%1024]=g,g+=D[(I-u+1024)%1024],I++);s+=g}s=.125*s*y*X;U[m]=1<=s?32767:-1>=s?-32768:32767*s|0}return M}}var synth=new SfxrSynth;
window.jsfxr=function(a){synth._params.setSettings(a);var b=synth.totalReset();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*synth.synthWave(new Uint16Array(a.buffer,44),b),c=new Uint32Array(a.buffer,0,44);c[0]=1179011410;c[1]=b+36;c[2]=1163280727;c[3]=544501094;c[4]=16;c[5]=65537;c[6]=44100;c[7]=88200;c[8]=1048578;c[9]=1635017060;c[10]=b;for(var b=b+44,c=0,d="data:audio/wav;base64,";c<b;c+=3)var e=a[c]<<16|a[c+1]<<8|a[c+2],d=d+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>18]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e&63]);return d};
function Utility(){window.requestAnimFrame=function(a){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();this.setFonts=function(){fontTitle="bold 80px verdana";fontTitleInterval=110;fontTask="20px Courier";fontTaskInterval=35;fontGrade="100px Courier";fontGradeInterval=100;fontSmallHeading="20px Courier";fontSmallHeadingInterval=20;fontRegular=
"15px Courier";fontRegularInterval=20;fontCredit="15px Courier";fontTiny="12px Courier";fontTinyInterval=15;fontTaskHeading="20px Helvetica";fontWindowHeading="30px Helvetica";fontSmallWindowHeading="15px Helvetica"};this.randomFromTo=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)};this.shuffleArray=function(a){for(var b=a.length-1;0<b;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c];a[c]=d}return a};this.removeFromArray=function(a,b){var c=b.indexOf(a);b.splice(c,1);return b}}
function Element(){this.name;this.elasticity;this.texture;this.temperature;this.solidity;this.allPropertiesArr=[];this.x;this.y;this.height=this.width=50;this.accelY=this.accelX=this.velY=this.velX=0;this.isHovered=!1;this.formula;this.sound;this.color="rgb(0,0,0)";this.hitTest=function(a,b){return a>this.x&&a<this.x+this.width&&b>this.y&&b<this.y+this.height?!0:!1};this.draw=function(){ctx.save();ctx.fillStyle="rgb("+this.color.r+","+this.color.g+","+this.color.b+")";ctx.fillRect(this.x,this.y,this.width,
this.height);ctx.fillStyle="#c6c9b1";ctx.textAlign="center";ctx.textBaseline="middle";var a=this.name.match(/.{1,2}/g)[0];ctx.font=fontSmallHeading;ctx.strokeStyle="#000";ctx.lineWidth=3;ctx.strokeText(a,this.x+this.width/2,this.y+this.height/2);ctx.fillText(a,this.x+this.width/2,this.y+this.height/2);ctx.restore();this.isHovered&&this.drawInformation()};this.setAllPropertiesArr=function(){this.allPropertiesArr=[{name:"elasticity",value:this.elasticity,description:elementManager.getPropertyDescription("elasticity",
this.elasticity)},{name:"texture",value:this.texture,description:elementManager.getPropertyDescription("texture",this.texture)},{name:"temperature",value:this.temperature,description:elementManager.getPropertyDescription("temperature",this.temperature)},{name:"solidity",value:this.solidity,description:elementManager.getPropertyDescription("solidity",this.solidity)}]};this.drawInformation=function(){var a,b;mixingPalette.hitTest(this.x,this.y)?(a=mixingPalette.x-5,b=this.y,ctx.textAlign="right"):(a=
this.x+this.width+5,b=this.y,ctx.textAlign="left");ctx.save();ctx.textBaseline="middle";ctx.font=fontTiny;ctx.fillStyle="rgb("+this.color.r+","+this.color.g+","+this.color.b+")";ctx.fillText(this.name,a,b);b+=13;ctx.fillStyle="#ccc";for(var c=0;c<this.allPropertiesArr.length;c++){var d=this.allPropertiesArr[c];ctx.fillText(d.name+": "+("Antemanium"!==this.name?d.description:"N/A"),a,b);b+=13}ctx.restore()}}
function Helper(){this.radius=25;this.color;this.name;this.property;this.x;this.y;this.parentX;this.parentY;this.allPropertiesArr;this.sound;this.hitTest=function(a,b){var c=this.x-a,d=this.y-b;return c*c+d*d<this.radius*this.radius};this.draw=function(){ctx.save();ctx.fillStyle="rgb("+this.color.r+","+this.color.g+","+this.color.b+")";ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1);ctx.closePath();ctx.fill();ctx.fillStyle="rgba(0,0,0,0.3)";var a=this.name.match(/.{1,2}/g)[0];ctx.textBaseline=
"middle";ctx.textAlign="center";ctx.font=fontSmallHeading;ctx.fillText(a,this.x,this.y);ctx.restore();this.isHovered&&this.drawInformation()};this.drawInformation=function(){var a=canvas.height-250;ctx.save();ctx.textAlign="right";ctx.textBaseline="middle";ctx.font=fontTiny;ctx.fillStyle="#c6c9b1";ctx.fillText(this.name,622,a);ctx.restore()}}
function ElementManager(){this.createHelperElements=function(){for(var a=565,b=canvas.height-105,c=0;2>c;c++)this.createHelper("Liquifier",a,b,15),a+=33;a=565;b-=35;for(c=0;2>c;c++)this.createHelper("Cooler",a,b,15),a+=33;a=565;b-=35;for(c=0;2>c;c++)this.createHelper("Smoother",a,b,15),a+=33;a=565;b-=35;for(c=0;2>c;c++)this.createHelper("Elasticizer",a,b,15),a+=33};this.createHelper=function(a,b,c,d){switch(a){case "Liquifier":var e=new Helper;e.name="Liquifier";e.radius=d;e.formula=[{count:1,symbol:"Li"}];
e.property={name:"solidity",value:-.25};e.isHelper=!0;e.color={r:122,g:122,b:122};e.x=b+d;e.y=c-d;e.parentX=b+d;e.parentY=c-d;helperElementsArr.push(e);break;case "Cooler":e=new Helper;e.name="Cooler";e.radius=d;e.formula=[{count:1,symbol:"Co"}];e.property={name:"temperature",value:-.25};e.isHelper=!0;e.color={r:145,g:145,b:145};e.x=b+d;e.y=c-d;e.parentX=b+d;e.parentY=c-d;helperElementsArr.push(e);break;case "Smoother":e=new Helper;e.name="Smoother";e.radius=d;e.formula=[{count:1,symbol:"Sm"}];e.property=
{name:"texture",value:-.25};e.isHelper=!0;e.color={r:189,g:189,b:189};e.x=b+d;e.y=c-d;e.parentX=b+d;e.parentY=c-d;helperElementsArr.push(e);break;case "Elasticizer":e=new Helper,e.name="Elasticizer",e.radius=d,e.formula=[{count:1,symbol:"El"}],e.property={name:"elasticity",value:-.25},e.isHelper=!0,e.color={r:219,g:219,b:219},e.x=b+d,e.y=c-d,e.parentX=b+d,e.parentY=c-d,helperElementsArr.push(e)}a=jsfxr([2,.02,.11,.35,.32,.91,,-.02,,.04,.14,-.88,.63,,-.56,,-.28,.06,1,,,,,.5]);e.sound=new Audio;e.sound.src=
a};this.restockHelperElements=function(){for(var a=this.getHelpers("Liquifier"),b=2-a.length,c=0;c<b;c++){var d=canvas.height-105;this.createHelper("Liquifier",0,0,15)}a=this.getHelpers("Liquifier");b=580;d=canvas.height-120;for(c=0;c<a.length;c++){var e=a[c];e.x=b;e.y=d;e.parentX=b;e.parentY=d;b+=33}a=this.getHelpers("Cooler");b=2-a.length;for(c=0;c<b;c++)this.createHelper("Cooler",0,0,15);a=this.getHelpers("Cooler");b=580;d-=35;for(c=0;c<a.length;c++)e=a[c],e.x=b,e.y=d,e.parentX=b,e.parentY=d,b+=
33;a=this.getHelpers("Smoother");b=2-a.length;for(c=0;c<b;c++)this.createHelper("Smoother",0,0,15);a=this.getHelpers("Smoother");b=580;d-=35;for(c=0;c<a.length;c++)e=a[c],e.x=b,e.y=d,e.parentX=b,e.parentY=d,b+=33;a=this.getHelpers("Elasticizer");b=2-a.length;for(c=0;c<b;c++)this.createHelper("Elasticizer",0,0,15);a=this.getHelpers("Elasticizer");b=580;d-=35;for(c=0;c<a.length;c++)e=a[c],e.x=b,e.y=d,e.parentX=b,e.parentY=d,b+=33};this.mixHelper=function(a){var b=container.calcFormula(mixedElementsArr[0],
a);this.combineElements(mixedElementsArr[0],a).formula=b;container.calcFormulaStr();for(b=0;b<mixedElementsArr[0].allPropertiesArr.length;b++)a.property.name===mixedElementsArr[0].allPropertiesArr[b].name&&(mixedElementsArr[0][a.property.name]+=a.property.value,1<mixedElementsArr[0][a.property.name]?mixedElementsArr[0][a.property.name]=1:-1>mixedElementsArr[0][a.property.name]&&(mixedElementsArr[0][a.property.name]=-1),mixedElementsArr[0].setAllPropertiesArr());helperElementsArr=utility.removeFromArray(a,
helperElementsArr)};this.getHelpers=function(a){for(var b=[],c=0;c<helperElementsArr.length;c++)helperElementsArr[c].name===a&&b.push(helperElementsArr[c]);return b};this.createBaseElements=function(){var a=new Element;a.name="Toughinium";a.formula=[{count:1,symbol:"To"}];a.elasticity=1;a.texture=0;a.temperature=0;a.solidity=0;var b=jsfxr([2,.02,.11,.35,.32,.77,,,,,,-.4,.63,,-.56,,,,1,,,,,.5]);a.sound=new Audio;a.sound.src=b;a.color={r:85,g:0,b:196};baseElementsArr.push(a);a=new Element;a.name="Roghitinam";
a.formula=[{count:1,symbol:"Ro"}];a.elasticity=0;a.texture=1;a.temperature=0;a.solidity=0;a.color={r:91,g:209,b:232};baseElementsArr.push(a);a=new Element;a.name="Heatoinium";a.formula=[{count:1,symbol:"He"}];a.elasticity=0;a.texture=0;a.temperature=1;a.solidity=0;a.color={r:232,g:0,b:43};baseElementsArr.push(a);a=new Element;a.name="Solidantium";a.formula=[{count:1,symbol:"So"}];a.elasticity=0;a.texture=0;a.temperature=0;a.solidity=1;a.color={r:227,g:16,b:235};baseElementsArr.push(a);a=new Element;
a.name="Antemanium";a.formula=[{count:1,symbol:"An"}];a.color={r:115,g:222,b:0};baseElementsArr.push(a);if("main"===gameMode)var b=25,c=canvas.height/2-142.5,d=25,e=40;else b=10,c=300,d=25,e=40;for(var h=0;h<baseElementsArr.length;h++)a=baseElementsArr[h],a.x=b,a.y=c,"main"===gameMode?(c+=d+e,a.setAllPropertiesArr()):b+=d+e};this.spawnNewElement=function(a){var b=new Element;switch(a){case "Toughinium":b.name="Toughinium";b.formula=[{count:1,symbol:"To"}];b.elasticity=1;b.texture=0;b.temperature=
0;b.solidity=0;a=jsfxr([2,.02,.11,.35,.32,.52,,.1599,,.04,.14,.4599,.63,,-.56,,-.28,.06,1,,,,,.5]);b.sound=new Audio;b.sound.src=a;b.color={r:85,g:0,b:196};break;case "Roghitinam":b.name="Roghitinam";b.formula=[{count:1,symbol:"Ro"}];b.elasticity=0;b.texture=1;b.temperature=0;b.solidity=0;a=jsfxr([2,.02,.11,.35,.32,.48,,.1599,,.04,.14,-.26,.63,,-.56,,-.28,.06,1,,,,,.5]);b.sound=new Audio;b.sound.src=a;b.color={r:91,g:209,b:232};break;case "Heatoinium":b.name="Heatoinium";b.formula=[{count:1,symbol:"He"}];
b.elasticity=0;b.texture=0;b.temperature=1;b.solidity=0;a=jsfxr([2,.02,.11,.35,.32,.72,,.1599,,.04,.14,-.3199,.63,,-.56,,-.28,.48,1,,,,,.5]);b.sound=new Audio;b.sound.src=a;b.color={r:232,g:0,b:43};break;case "Solidantium":b.name="Solidantium";b.formula=[{count:1,symbol:"So"}];b.elasticity=0;b.texture=0;b.temperature=0;b.solidity=1;a=jsfxr([2,.02,.11,.35,.32,.44,,.1599,,.04,.14,.4399,.63,,-.56,,-.28,.06,1,,,,,.5]);b.sound=new Audio;b.sound.src=a;b.color={r:227,g:16,b:235};break;case "Antemanium":b.name=
"Antemanium",b.formula=[{count:1,symbol:"An"}],b.elasticity=-1,b.texture=-1,b.temperature=-1,b.solidity=-1,a=jsfxr([2,.02,.11,.35,.32,.29,,.1599,,.04,.14,.4399,.63,,-.56,,-.28,.06,1,,,,,.5]),b.sound=new Audio,b.sound.src=a,b.color={r:115,g:222,b:0}}b.allPropertiesArr=[{name:"elasticity",value:b.elasticity,description:this.getPropertyDescription("elasticity",b.elasticity)},{name:"texture",value:b.texture,description:this.getPropertyDescription("texture",b.texture)},{name:"temperature",value:b.temperature,
description:this.getPropertyDescription("temperature",b.temperature)},{name:"solidity",value:b.solidity,description:this.getPropertyDescription("solidity",b.solidity)}];return b};this.stirElements=function(){container.volume=100;container.flushing=!1;if(2===mixedElementsArr.length){var a=container.calcFormula(mixedElementsArr[0],mixedElementsArr[1]),b=this.combineElements(mixedElementsArr[0],mixedElementsArr[1]);container.empty();b.formula=a;mixedElementsArr.push(b)}container.calcFormulaStr();initBubbles()};
this.combineElements=function(a,b){for(var c=b.name,d=a.name.match(/.{1,3}/g)[0],c=c.match(/.{1,3}/g),e="",h=1;h<c.length;h++)e+=c[h];c=d+e;d=new Element;d.name=c;"Antemanium"!==a.name&&"Antemanium"!==b.name?(d.elasticity=(a.elasticity+b.elasticity)/2,d.texture=(a.texture+b.texture)/2,d.temperature=(a.temperature+b.temperature)/2,d.solidity=(a.solidity+b.solidity)/2):(d.elasticity=a.elasticity*b.elasticity,d.texture=a.texture*b.texture,d.temperature=a.temperature*b.temperature,d.solidity=a.solidity*
b.solidity);d.setAllPropertiesArr();c={r:Math.round(.5*a.color.r+.5*b.color.r),g:Math.round(.5*a.color.g+.5*b.color.g),b:Math.round(.5*a.color.b+.5*b.color.b)};d.color=c;d.sound=a.sound;return d};this.getPropertyDescription=function(a,b){switch(a){case "elasticity":switch(!0){case .5<=b:return"Rigid";case -.5<b:return"Firm";default:return"Elastic"}case "texture":switch(!0){case .5<=b:return"Rough";case -.5<b:return"Semi-rough";default:return"Smooth"}case "temperature":switch(!0){case .5<=b:return"Hot";
case -.5<b:return"Warm";default:return"Cold"}case "solidity":switch(!0){case .5<=b:return"Solid";case -.5<b:return"Gel";default:return"Liquid"}}}}
function Bubble(){this.x=container.x;this.y=container.y;this.parentX=this.x;this.parentY=this.y;this.radius;this.color;this.floatSpeedX;this.floatSpeedY;this.alpha=1;this.init=function(){this.floatSpeedX=utility.randomFromTo(-10,10);this.floatSpeedX/=25;this.floatSpeedY=utility.randomFromTo(5,10)/25;this.radius=utility.randomFromTo(5,15);this.parentY=this.y=container.y-container.radius+this.radius};this.setColor=function(){this.color=mixedElementsArr[0].color};this.draw=function(){if(.01>=this.alpha)utility.removeFromArray(this,
bubblesArr);else if(this.color){if(!container.flushing){if(this.x<container.x-container.radius/2||this.x>container.x+container.radius/2)this.alpha-=.03;this.y<container.y-container.height&&(this.alpha-=.03)}this.x+=this.floatSpeedX;this.y-=this.floatSpeedY;ctx.fillStyle="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.alpha+")";ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1);ctx.closePath();ctx.fill()}}}
function MixingPalette(){this.width=65;this.height=300;this.x=635;this.y=115;this.draw=function(){ctx.save();ctx.fillStyle="#c6c9b1";ctx.fillRect(this.x,this.y,this.width,this.height);var a=this.width,b=this.x,c=this.y-87.5;ctx.fillStyle="#c6c9b1";ctx.fillRect(b,c,a,0);ctx.font=fontSmallWindowHeading;ctx.fillStyle="#c6c9b1";ctx.textAlign="left";ctx.textBaseline="middle";ctx.fillText("Palette",b+5,c+70);c+=2.5*fontSmallHeadingInterval;drawWindowStroke(b+3,c+3,this.width,this.height+35);ctx.restore()};
this.removeFromPalette=function(a){mixingPaletteElementsArr=utility.removeFromArray(a,mixingPaletteElementsArr)};this.hitTest=function(a,b){return a>this.x&&a<this.x+this.width&&b>this.y&&b<this.y+this.height?!0:!1}}
function Container(){this.width=100;this.height=250;this.radius=50;this.volume=this.radius+50;this.x=280;this.y=canvas.height-this.height+2*this.radius+30;this.formulaArr=[];this.formula="";this.flushing=!1;this.flushY=this.flushX=0;this.flushSpeed=10;this.flushHeight=this.flushWidth=15;this.saving=!1;this.saveY=this.saveX=0;this.saveSpeed=10;this.saveHeight=this.saveWidth=15;this.hitTest=function(a,b){var c=this.x-this.radius-45,d=this.y-this.height-this.radius;return a>c&&a<c+2*(this.radius+45)&&
b>d&&b<d+this.height+2*this.radius?!0:!1};this.empty=function(){progressionManager.cookValue=0;this.formula="";mixedElementsArr.length=0};this.calcFormula=function(a,b){var c,d;a.formula.length<b.formula.length?(c=a.formula,d=b.formula):(c=b.formula,d=a.formula);for(var e=0;e<c.length;e++)for(var h=c[e],l=0;l<d.length;l++){var n=d[l];if(h.symbol===n.symbol){d[l]={count:h.count+n.count,symbol:h.symbol};break}else if(l===d.length-1){d.push({count:1,symbol:h.symbol});break}}return d};this.flush=function(){var a=
jsfxr([2,,.0818,.09,.0981,.85,,-.5896,,,,.24,,.0491,-.04,,-.02,,.89,,,.0585,,.5]),b=new Audio;b.src=a;b.play();this.flushing=!0;this.flushX=this.x;this.flushY=this.y-100;this.flushHeight=this.flushWidth=15;this.flushColor=ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")"};this.mix=function(){mixedElementsArr[0].sound.play();this.saving=!0;this.saveX=this.x;this.saveY=this.y-155;this.saveHeight=this.saveWidth=15;this.saveColor=ctx.fillStyle=
"rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")"};this.calcFormulaStr=function(){for(var a="",b=0;b<mixedElementsArr[0].formula.length;b++){var c=mixedElementsArr[0].formula[b];1<c.count&&(a+=c.count);a+=c.symbol}this.formula=a};this.draw=function(){ctx.fillStyle="#ccc";ctx.beginPath();ctx.arc(this.x,this.y,2*this.radius,0,Math.PI,!1);ctx.stroke();ctx.closePath();ctx.beginPath();ctx.fillRect(this.x-this.radius,this.y-250,2*this.radius,this.height);
ctx.lineWidth=5;ctx.strokeStyle="rgba(255,255,255,0.2)";ctx.beginPath();ctx.arc(this.x,this.y,2*this.radius,0,Math.PI,!1);ctx.lineTo(this.x-this.radius,this.y-50);ctx.lineTo(this.x+this.radius,this.y-50);ctx.closePath();ctx.stroke();ctx.fill();ctx.save();0<mixedElementsArr.length&&(ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")",ctx.beginPath(),ctx.arc(this.x,this.y,this.volume,0,Math.PI,!1),ctx.lineTo(this.x-this.radius,this.y-
50),ctx.lineTo(this.x+this.radius,this.y-50),ctx.closePath(),ctx.fill(),ctx.restore(),1>=this.volume&&this.empty());this.drawFlushPipe();this.flushing&&this.moveFlushingMixture();this.drawPalettePipe();this.saving&&this.movePaletteMixture();this.drawLabel();this.drawPropertyBars();this.drawFormula()};this.drawFlushPipe=function(){var a=this.x,b=this.y-100;ctx.fillStyle="#ccc";ctx.fillRect(a,b,250,15);a+=250;ctx.fillRect(a,b,15,123);ctx.fillRect(a,b+123,100,15)};this.drawPalettePipe=function(){var a=
this.x,b=this.y-155;ctx.fillStyle="#ccc";ctx.fillRect(a,b,360,15)};this.movePaletteMixture=function(){ctx.fillStyle=this.saveColor;ctx.fillRect(this.saveX,this.saveY,this.saveWidth,this.saveHeight);this.saveX+this.saveWidth<this.x+360&&(this.saveWidth+=2*this.flushSpeed);this.saveX<this.x+360?(this.saveX+=this.flushSpeed,this.saveWidth-=this.flushSpeed,this.volume-=this.flushSpeed/5):(this.volume=100,this.saving=!1,this.empty())};this.moveFlushingMixture=function(){ctx.fillStyle=this.flushColor;ctx.fillRect(this.flushX,
this.flushY,this.flushWidth,this.flushHeight);this.flushY<=this.y-100?(this.flushX+this.flushWidth<this.x+265&&(this.flushWidth+=this.flushSpeed),this.flushX<this.x+250?(this.flushX+=this.flushSpeed/2,this.flushWidth-=this.flushSpeed/2):(this.flushX=this.x+250,this.flushY=this.y-75,this.flushWidth=15)):(this.flushY+this.flushHeight<this.y-100+123&&(this.flushHeight+=this.flushSpeed),this.flushY<this.y-100+123?(this.flushY+=this.flushSpeed/2,this.flushHeight-=this.flushSpeed/2):this.flushY>=this.y-
100+123&&this.flushX===this.x+250&&(this.flushY=this.y-100+123,this.flushX=this.x+250,this.flushHeight=15),this.flushY===this.y-100+123&&this.flushX+this.flushWidth<this.x+350&&(this.flushWidth+=this.flushSpeed),this.flushY===this.y-100+123&&this.flushX<this.x+300?(this.flushX+=this.flushSpeed/2,this.flushWidth-=this.flushSpeed/2):this.flushY>=this.y-100+123&&this.flushX>=this.x+300&&(this.volume=100,this.flushing=!1));this.volume-=this.flushSpeed/5};this.drawFormula=function(){ctx.save();ctx.textBaseline=
"top";var a=this.x-this.radius,b=this.y-this.height-this.radius/2;ctx.fillStyle="#c6c9b1";ctx.font=fontRegular;ctx.fillText(this.formula,a,b);ctx.restore()};this.drawLabel=function(){ctx.save();ctx.textBaseline="bottom";ctx.textAlign="left";var a=this.x-this.radius,b=this.y-this.height-this.radius/2;ctx.font="50px Courier";if(0<mixedElementsArr.length){ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")";ctx.fillText(mixedElementsArr[0].name,
a,b);ctx.fillStyle="#c6c9b1";ctx.font=fontRegular;for(var a=this.x+60,b=this.y-this.height+this.radius/2,c=0;c<mixedElementsArr[0].allPropertiesArr.length;c++){var d=mixedElementsArr[0].allPropertiesArr[c];ctx.fillText(d.name+": "+d.description,a,b);b+=fontRegularInterval}}else ctx.fillStyle="#c6c9b1",ctx.fillText("Empty",a,b);ctx.restore()};this.drawPropertyBars=function(){var a=this.x+this.radius+70,b=this.y-65;ctx.fillStyle="#C6C9B1";ctx.fillRect(a,b,100,5);ctx.textBaseline="top";0<mixedElementsArr.length&&
(ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")",ctx.fillRect(a+50+50*mixedElementsArr[0].allPropertiesArr[0].value,b,3,10));ctx.fillStyle="#C6C9B1";b+=7;ctx.font=fontTiny;ctx.fillText("Elastic -- Rigid",a-10,b);a=this.x+this.radius+70;b+=25;ctx.fillStyle="#C6C9B1";ctx.fillRect(a,b,100,5);ctx.textBaseline="top";ctx.textAlign="left";0<mixedElementsArr.length&&(ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+
","+mixedElementsArr[0].color.b+")",ctx.fillRect(a+50+50*mixedElementsArr[0].allPropertiesArr[1].value,b,3,10));ctx.fillStyle="#C6C9B1";a-=10;b+=7;ctx.font=fontTiny;ctx.fillText("Smooth ---- Rough",a,b);a=this.x+this.radius+70;b+=25;ctx.fillStyle="#C6C9B1";ctx.fillRect(a,b,100,5);ctx.textBaseline="top";0<mixedElementsArr.length&&(ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")",ctx.fillRect(a+50+50*mixedElementsArr[0].allPropertiesArr[2].value,
b,3,10));ctx.fillStyle="#C6C9B1";a-=10;b+=7;ctx.font=fontTiny;ctx.fillText("Cold -------- Hot",a,b);a=this.x+this.radius+70;b+=25;ctx.fillStyle="#C6C9B1";ctx.fillRect(a,b,100,5);ctx.textBaseline="top";0<mixedElementsArr.length&&(ctx.fillStyle="rgb("+mixedElementsArr[0].color.r+","+mixedElementsArr[0].color.g+","+mixedElementsArr[0].color.b+")",ctx.fillRect(a+50+50*mixedElementsArr[0].allPropertiesArr[3].value,b,3,10));ctx.fillStyle="#C6C9B1";a-=10;ctx.font=fontTiny;ctx.fillText("Liquid ---- Solid",
a,b+7)}}
function ProgressionManager(){this.difficulty=1;this.gradesArr="FEDCBA".split("");this.currentGrade="A";this.cooksCompleted=0;this.allCookResultsArr=[];this.lives=6;this.cookValue=0;this.requiredPropertiesArr=[];this.taskStr;this.resetProgression=function(){this.difficulty=1;this.maxDifficulty=3;this.requiredPropertiesArr.length=0;this.taskStr=null;this.currentGrade="A";this.lives=6;this.cooksCompleted=this.allCookResultsArr.length=0};this.startProgression=function(){this.assignTask()};this.assignTask=function(){var a=
["elasticity","texture","temperature","solidity"];this.requiredPropertiesArr=[];this.taskStr="Something";for(var b=0;b<this.difficulty;b++){var c=utility.randomFromTo(0,a.length-1),c=a[c],d=utility.randomFromTo(-1,1),e=elementManager.getPropertyDescription(c,d),d={name:c,value:d,description:e,fulfilled:!1},a=utility.removeFromArray(c,a);this.requiredPropertiesArr.push(d);this.taskStr+=" "+d.description;this.requiredPropertiesArr.length<this.difficulty&&(this.taskStr+=" AND")}};this.calcValue=function(){for(var a=
100*this.difficulty-10*(mixedElementsArr[0].formula.length-1),b=0;b<mixedElementsArr[0].formula.length-1;b++)1<mixedElementsArr[0].formula[b].count&&(a-=5);for(b=0;b<8-helperElementsArr.length;b++)a-=5;0>a&&(a=0);this.cookValue=a};this.testTask=function(){if(!container.flushing&&0<mixedElementsArr.length){for(var a=container.formula,b=0,c=new Audio,d=0;d<this.requiredPropertiesArr.length;d++)for(var e=this.requiredPropertiesArr[d],h=0;h<mixedElementsArr.length;h++)for(var l=mixedElementsArr[h].allPropertiesArr,
n=0;n<l.length;n++)property=l[n],property.name===e.name&&property.description===e.description&&b++;b===this.requiredPropertiesArr.length?(this.difficulty<this.maxDifficulty&&0===this.cooksCompleted%2&&this.difficulty++,b=jsfxr([2,.06,.53,.84,.14,.56,,,,,,.5599,.49,,,,,,1,,,,,.5])):(this.lives--,this.cookValue=0,b=jsfxr([2,.06,.53,.84,.14,.56,,,,,,-.2199,.49,,,,,,1,,,,,.5]));c.src=b;c.play();this.cooksCompleted++;this.currentGrade=this.gradesArr[this.lives-1];this.allCookResultsArr.push({formula:a,
value:this.cookValue});elementManager.restockHelperElements();container.formulaArr.length=0;10!==this.cooksCompleted&&"F"!==this.currentGrade||loadMode("finish");this.assignTask();container.flush()}else c=new Audio,b=jsfxr([3,,.0818,.05,.0981,.63,,-.6905,,,,,,,,,,,1,,,.1499,,.5]),c.src=b,c.play()};this.drawTask=function(){this.drawTaskLabel(45,100);this.drawTaskText(55,100)};this.drawTaskLabel=function(a,b){var c=canvas.width-347;ctx.save();ctx.fillStyle="#c6c9b1";ctx.strokeStyle="";ctx.fillRect(a,
0+b-17.5,c,35);ctx.restore();ctx.font=fontTaskHeading;ctx.fillStyle="#c6c9b1";ctx.textAlign="left";ctx.fillText("Cook:",a+10,b-17.5-27);drawWindowStroke(a,b-17.5-35+2,c,70)};this.drawTaskText=function(a,b){ctx.save();ctx.textAlign="left";ctx.textBaseline="middle";ctx.fillStyle="#000";ctx.font=fontTask;ctx.fillText(this.taskStr,a,b)};this.drawResults=function(a,b){this.drawResultsWindow()};this.drawResultsWindow=function(){ctx.save();var a=canvas.height-75-15,b=canvas.width-150-20,c=75;ctx.fillStyle=
"#c6c9b1";ctx.fillRect(b,c+35,155,a-35);drawWindowStroke(b+3,c+3,155,a);ctx.font=fontSmallWindowHeading;ctx.fillStyle="#c6c9b1";ctx.textAlign="left";ctx.textBaseline="top";ctx.fillText("Performance Review",b+10,c+10);c+=2.5*fontSmallHeadingInterval;ctx.font=fontRegular;ctx.fillStyle="#000";ctx.fillText("Grade:",b+10,c+10);c+=fontRegularInterval;ctx.fillStyle="#ff0000";ctx.textAlign="center";ctx.font=fontGrade;ctx.fillText(this.currentGrade,b+77.5,c+10);c+=fontGradeInterval+30;ctx.font=fontRegular;
ctx.fillStyle="#000";ctx.fillText("Cooks completed:",b+77.5,c);c+=fontRegularInterval;ctx.textAlign="center";ctx.font=fontSmallHeading;ctx.fillText(this.cooksCompleted+"/10",b+77.5,c+10);c+=fontSmallHeadingInterval+30;ctx.font=fontRegular;ctx.fillStyle="#000";ctx.fillText("This Cook Value:",b+77.5,c);c+=fontRegularInterval;ctx.textAlign="center";ctx.font=fontSmallHeading;ctx.fillText("$"+this.cookValue,b+77.5,c+10);ctx.restore()}}
var canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),baseElementsArr=[],mixedElementsArr=[],mixingPaletteElementsArr=[],helperElementsArr=[],progressionManager=new ProgressionManager,utility=new Utility,elementManager=new ElementManager,draggedElement,container,gameName="Breaking Brad",gameMode,bubblesArr=[],onMobile=!1;init();function init(){0<=window.orientation&&(onMobile=!0);utility.setFonts();loadMode("menu");main()}
function loadMode(a){gameMode=a;switch(a){case "menu":onMobile||(document.getElementById("endUI").style.display="none",document.getElementById("menuButton").disabled=!0,document.getElementById("startUI").style.display="block",document.getElementById("startButton").disabled=!1,elementManager.createBaseElements());break;case "main":window.addEventListener("mousemove",onMouseMove,!1);window.addEventListener("mousedown",onMouseDown,!1);document.getElementById("startUI").style.display="none";document.getElementById("startButton").disabled=
!0;baseElementsArr.length=0;helperElementsArr.length=0;bubblesArr.length=0;mixedElementsArr.length=0;progressionManager.resetProgression();elementManager.createBaseElements();elementManager.createHelperElements();container=new Container;mixingPalette=new MixingPalette;progressionManager.resetProgression();progressionManager.startProgression();initBubbles();document.getElementById("submitButton").style.display="block";document.getElementById("submitButton").disabled=!1;document.getElementById("emptyButton").style.display=
"block";document.getElementById("emptyButton").disabled=!1;break;case "finish":window.removeEventListener("mousemove",onMouseMove,!1),window.removeEventListener("mousedown",onMouseDown,!1),baseElementsArr.length=0,document.getElementById("submitButton").style.display="none",document.getElementById("submitButton").disabled=!0,document.getElementById("emptyButton").style.display="none",document.getElementById("emptyButton").disabled=!0,document.getElementById("endUI").style.display="block",document.getElementById("menuButton").disabled=
!1}}function initBubbles(){var a=utility.randomFromTo(10,20),b=utility.randomFromTo(50,100)/100,c;0<mixedElementsArr.length&&(c=mixedElementsArr[0].color);for(var d=0;d<a;d++){var e=new Bubble;e.init();e.alpha=b;e.color=c;bubblesArr.push(e)}}
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);var a=ctx.createRadialGradient(canvas.width/2-100,canvas.height/2,5,canvas.width/2-100,canvas.height/2,canvas.height);a.addColorStop(0,"#13410E");a.addColorStop(1,"#1C2400");ctx.fillStyle=a;ctx.fillRect(0,0,canvas.width,canvas.height);if(onMobile)ctx.fillStyle="#fff",ctx.font=fontSmallHeading,ctx.textBaseline="middle",ctx.textAlign="center",ctx.fillText("Sorry! No mobile support because reasons :( ",canvas.width/2,canvas.height/2);else switch(gameMode){case "menu":drawInstructions();
break;case "main":drawBaseElements();drawHelperElements();drawContainer();drawMixingPalette();drawDraggedElement();drawMixingPaletteElements();drawTask();drawBubbles();drawResults();drawUI();break;case "finish":ctx.save(),ctx.textBaseline="top",drawFinishHeading(),drawCookList(),ctx.restore()}}
function drawInstructions(){ctx.textBaseline="baseline";var a=10,b=250;ctx.font=fontRegular;ctx.fillStyle="#c6c9b1";ctx.fillText("Dear Brad,",a,b);b+=1.5*fontRegularInterval;ctx.fillText("Your teacher wants you to cook some totally legal substances using 5 base elements:",a,b);b+=1.5*fontRegularInterval+65;drawBaseElements();ctx.fillText('Then he wants to sell them. The simpler the final substance, the more "pure" and valuable it is.',a,b);b+=1.5*fontRegularInterval;ctx.save();ctx.fillStyle="#fff";
ctx.fillText("Combine the BASE ELEMENTS to get the properties he's looking for. They are unlimited.",a,b);b+=fontRegularInterval;ctx.fillText("You've got some limited HELPER ELEMENTS to use as well. These restock after each cook:",a,b);ctx.restore();a+=780;ctx.save();ctx.fillStyle="rgb(189,189,189)";ctx.beginPath();ctx.arc(a+15,b-5,15,0,2*Math.PI,!1);ctx.closePath();ctx.fill();ctx.fillStyle="rgba(0,0,0,0.3)";ctx.textBaseline="middle";ctx.textAlign="center";ctx.font=fontSmallHeading;ctx.fillText("Li",
a+15,b-5);ctx.restore();b+=1.5*fontRegularInterval;a-=780;ctx.fillText("TIP: Antemanium has a useful effect! Add it to a formula to reverse very polarized properties.",a,b);b+=fontRegularInterval;ctx.fillText("TIP: Drag elements from the mixing vial to the Palette to save them for later.",a,b)}
function drawFinishHeading(){ctx.textBaseline="top";var a=canvas.width/2;ctx.font=fontTitle;ctx.textAlign="center";ctx.fillStyle="#c6c9b1";"F"===progressionManager.currentGrade?ctx.fillText("You Failed",a,10):ctx.fillText("Done!",a,10)}
function drawCookList(){var a=canvas.width/4,b=130;ctx.font=fontSmallHeading;ctx.textAlign="left";for(var c=0,d=0;d<progressionManager.allCookResultsArr.length;d++){var e=progressionManager.allCookResultsArr[d];ctx.fillText("Cook "+(d+1)+":",a,b);a+=150;ctx.fillText(e.formula,a,b);a+=150;ctx.fillText("|",a,b);a+=100;ctx.fillText(e.value,a,b);a=canvas.width/4;b+=fontSmallHeadingInterval;c+=e.value}b+=fontSmallHeadingInterval;ctx.fillText("TOTAL EARNED: $"+c,a,b)}
function drawContainer(){container&&container.draw()}function drawMixingPalette(){mixingPalette&&mixingPalette.draw()}function drawBubbles(){for(var a=0;a<bubblesArr.length;a++)bubblesArr[a].draw()}function drawTask(){progressionManager.drawTask()}function drawBaseElements(){for(var a=0;a<baseElementsArr.length;a++)element=baseElementsArr[a],element.draw()}function drawHelperElements(){for(var a=0;a<helperElementsArr.length;a++)element=helperElementsArr[a],element.draw()}
function drawDraggedElement(){draggedElement&&draggedElement.draw()}function drawMixedElements(){for(var a=0;a<mixedElementsArr.length;a++)element=mixedElementsArr[a],element.draw()}function drawMixingPaletteElements(){for(var a=0;a<mixingPaletteElementsArr.length;a++)element=mixingPaletteElementsArr[a],element.draw()}function drawResults(){progressionManager.drawResults()}function drawUI(){drawFrame()}
function drawWindowStroke(a,b,c,d){ctx.beginPath();ctx.lineWidth=2;ctx.strokeStyle="#165124";ctx.rect(a-2,b-2,c,d);ctx.stroke();ctx.beginPath();ctx.lineWidth=1;ctx.strokeStyle="#616b4d";ctx.rect(a-2,b-2,c+1,d);ctx.stroke()}function drawFrame(){ctx.save();ctx.fillStyle="#c6c9b1";ctx.textBaseline="top";ctx.textAlign="left";ctx.font=fontWindowHeading;ctx.fillText(gameName,10,7);drawWindowStroke(3,3,canvas.width-5,canvas.height-4);ctx.restore()}
function main(){var a=Date.now(),b=a-then;window.requestAnimFrame(main);modifier=b/1E3;draw();then=a}var then=Date.now(),numShapes,shapes,dragIndex,dragging,mouseX,mouseY,dragHoldX,dragHoldY,timer,targetX,targetY,ease=.45,draggedFromMixingPalette=!1;
function onMouseDown(a){var b;b=canvas.getBoundingClientRect();mouseX=canvas.width/b.width*(a.clientX-b.left);mouseY=canvas.height/b.height*(a.clientY-b.top);for(b=0;b<baseElementsArr.length;b++)baseElementsArr[b].hitTest(mouseX,mouseY)&&(draggedElement=elementManager.spawnNewElement(baseElementsArr[b].name),draggedElement.x=mouseX,draggedElement.y=mouseY,dragging=!0,draggedFromMixingPalette=!1,dragIndex=0);for(b=0;b<mixingPaletteElementsArr.length;b++)mixingPaletteElementsArr[b].hitTest(mouseX,mouseY)&&
(draggedElement=mixingPaletteElementsArr[b],draggedElement.x=mouseX,draggedElement.y=mouseY,draggedFromMixingPalette=dragging=!0,dragIndex=0);for(b=0;b<helperElementsArr.length;b++)helperElementsArr[b].hitTest(mouseX,mouseY)&&(draggedElement=helperElementsArr[b],draggedElement.x=mouseX,draggedElement.y=mouseY,dragging=!0,dragIndex=0);container&&0<mixedElementsArr.length&&container.hitTest(mouseX,mouseY)&&(draggedElement=mixedElementsArr[0],draggedElement.x=mouseX,draggedElement.y=mouseY,dragging=
!0,draggedFromMixingPalette=!1,dragIndex=0);dragging&&(dragHoldX=mouseX-draggedElement.x,dragHoldY=mouseY-draggedElement.y,targetX=mouseX-dragHoldX,targetY=mouseY-dragHoldY,timer=setInterval(onTimerTick,1E3/30));window.removeEventListener("mousedown",onMouseDown,!1);window.addEventListener("mouseup",onMouseUp,!1);a.preventDefault?a.preventDefault():a.returnValue&&(a.returnValue=!1);return!1}
function onTimerTick(){draggedElement.x+=ease*(targetX-draggedElement.x);draggedElement.y+=ease*(targetY-draggedElement.y);!dragging&&.1>Math.abs(draggedElement.x-targetX)&&.1>Math.abs(draggedElement.y-targetY)&&(draggedElement.x=targetX,draggedElement.y=targetY)}
function onMouseUp(a){a=new Audio;window.addEventListener("mousedown",onMouseDown,!1);window.removeEventListener("mouseup",onMouseUp,!1);if(dragging){dragging=!1;clearInterval(timer);if(draggedElement===mixedElementsArr[0]||draggedElement.isHelper)draggedElement.isHelper?0<mixedElementsArr.length&&container.hitTest(draggedElement.x,draggedElement.y)?(elementManager.mixHelper(draggedElement),a=draggedElement.sound,progressionManager.calcValue()):(draggedElement.x=draggedElement.parentX,draggedElement.y=
draggedElement.parentY,b=jsfxr([3,,.0818,.05,.0981,.63,,-.6905,,,,,,,,,,,1,,,.1499,,.5]),a.src=b):mixingPalette.hitTest(draggedElement.x,draggedElement.y)?(mixingPaletteElementsArr.push(draggedElement),draggedElement===mixedElementsArr[0]&&container.mix()):(b=jsfxr([3,,.0818,.05,.0981,.63,,-.6905,,,,,,,,,,,1,,,.1499,,.5]),a.src=b);else if(container.hitTest(draggedElement.x,draggedElement.y))draggedFromMixingPalette&&mixingPalette.removeFromPalette(draggedElement),mixedElementsArr.push(draggedElement),
1===mixedElementsArr.length&&"Antemanium"===mixedElementsArr[0].name&&(a=mixedElementsArr[0],a.elasticity=0,a.solidity=0,a.texture=0,a.temperature=0,a.setAllPropertiesArr()),elementManager.stirElements(),progressionManager.calcValue(),a=draggedElement.sound;else{var b=jsfxr([3,,.0818,.05,.0981,.63,,-.6905,,,,,,,,,,,1,,,.1499,,.5]);a.src=b}a.play();draggedElement=null}}
function onMouseMove(a){if("main"===gameMode){var b=canvas.getBoundingClientRect();mouseX=canvas.width/b.width*(a.clientX-b.left);mouseY=canvas.height/b.height*(a.clientY-b.top);if(dragging){var c=draggedElement.width,d=canvas.width-c,e=canvas.height-c;a=mouseX-dragHoldX;b=mouseY-dragHoldY;targetX=a<c?c:a>d?d:a;targetY=b<c?c:b>e?e:b}else if(a=!1,!a){for(i=0;i<baseElementsArr.length;i++)baseElementsArr[i].hitTest(mouseX,mouseY)?baseElementsArr[i].isHovered||(a=baseElementsArr[i].isHovered=!0):baseElementsArr[i].isHovered&&
(baseElementsArr[i].isHovered=!1,a&&(a=!1));for(i=0;i<mixingPaletteElementsArr.length;i++)mixingPaletteElementsArr[i].hitTest(mouseX,mouseY)?mixingPaletteElementsArr[i].isHovered||(a=mixingPaletteElementsArr[i].isHovered=!0):mixingPaletteElementsArr[i].isHovered&&(mixingPaletteElementsArr[i].isHovered=!1,a&&(a=!1));for(i=0;i<helperElementsArr.length;i++)helperElementsArr[i].hitTest(mouseX,mouseY)?helperElementsArr[i].isHovered||(a=helperElementsArr[i].isHovered=!0):helperElementsArr[i].isHovered&&
(helperElementsArr[i].isHovered=!1,a&&(a=!1))}}}