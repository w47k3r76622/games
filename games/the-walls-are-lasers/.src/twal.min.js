var h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={vb:!0},ea={};try{ea.__proto__=da;ca=ea.vb;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function k(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.zb=b.prototype}var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function ia(a,b){if(b){var c=h;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ha(c,a,{configurable:!0,writable:!0,value:b})}}ia("Array.prototype.findIndex",function(a){return a?a:function(a,c){a:{var b=this;b instanceof String&&(b=String(b));for(var e=b.length,f=0;f<e;f++)if(a.call(c,b[f],f,b)){a=f;break a}a=-1}return a}});
ia("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
function m(a,b,c,d){var e=this;this.canvas=document.createElement("canvas");this.canvas.width=c*a;this.canvas.height=d*b;this.H=this.canvas.getContext("2d");this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto";this.canvas.style.display="block";this.tb=a;this.xa=b;document.body.appendChild(this.canvas);this.j=this.canvas.getContext("2d");this.g=c;this.i=d;this.children=[];this.J=[];this.a=null;this.f=0;this.b=[];this.I={da:null,Ka:null};this.Ma=new n(0,0);this.canvas.onmousemove=
function(a){e.Ma=ja(e,a)};this.canvas.onmouseup=function(a){ka(e,a)};this.canvas.onmouseout=function(a){ka(e,a)};this.canvas.onmousedown=function(a){var b=ja(e,a);e.b.some(function(a){if(a.I.da&&a.na&&b.x>a.P.x-a.width/2*a.scale.x&&b.x<a.P.x+a.width/2*a.scale.x&&b.y>a.P.y-a.height/2*a.scale.y&&b.y<a.P.y+a.height/2*a.scale.y)return a.I.da(b,a),!0});e.b.forEach(function(a){a.I.ob&&a.na&&a.I.ob(b)});e.I.da&&e.I.da(b)}}
function ka(a,b){var c=ja(a,b);a.b.some(function(a){if(a.I.Ka&&a.na&&c.x>a.ja.x&&c.x<a.ja.x+a.width&&c.y>a.ja.y&&c.y<a.ja.y+a.height)return a.I.Ka(c,a),!0});a.b.forEach(function(a){a.I.cb&&a.na&&a.I.cb(c)});a.I.Ka&&a.I.Ka(c)}function ja(a,b){a=a.canvas.getBoundingClientRect();return new n(b.clientX-a.left,b.clientY-a.top)}m.prototype.start=function(){setInterval(this.u.bind(this),16.666);this.f=Date.now()};m.prototype.clear=function(){this.j.clearRect(0,0,this.canvas.width,this.canvas.height)};
m.prototype.u=function(){var a=this;this.clear();var b=Date.now(),c=(b-this.f)/1E3;this.f=b;for(b=0;b<this.J.length;b++)if(this.J[b].J)for(var d=0;d<this.J[b].J.length;d++){if(this.J[b].J[d].active){this.J[b].J[d].update(c);break}}else this.J[b].update(c);this.b.forEach(function(b){for(var d=b.position.x,e=b.position.y,l=b.parent;l!==a;)d+=l.position.x,e+=l.position.y,l=l.parent;b.ja.x=d;b.ja.y=e;b.fixed||(b.position.x+=b.speed.x*c,b.position.y+=b.speed.y*c);a.H.save();a.H.translate(b.ja.x+.5*b.width,
b.ja.y+.5*b.height);a.H.rotate(b.angle);a.H.scale(b.scale.x,b.scale.y);a.H.globalAlpha=b.alpha;b.type===q.b?a.H.drawImage(a.a.hb.Ia,b.fa.position.x,b.fa.position.y,b.fa.width,b.fa.height,-.5*b.width,-.5*b.height,b.fa.width,b.fa.height):b.type===q.j?la(a.H,-.5*b.width,-.5*b.height,b.frame.ta,b.frame.fillStyle,null,null):b.type===q.f&&(a.H.font=b.frame.font,a.H.fillStyle=b.frame.fillStyle,a.H.fillText(b.frame.text,-.5*b.width,.5*b.height));a.H.restore()});this.a.update(c);this.b.forEach(function(a){a.update(c)})};
m.prototype.m=function(a){this.children.push(a);a.parent=this;r(this);return a};m.prototype.A=function(a){this.J.push(a);return a};function r(a){a.b.length=0;for(var b=[],c=null,d=0;d<a.children.length;d++){if(a.children[d].visible){c=a.children[d];b.push(c);var e=!1}else e=!0;for(;!e;){for(var f=!0,g=c.fb;g<c.children.length;g++)if(c.children[g].visible){c.fb=g+1;c=c.children[g];b.push(c);f=!1;break}c.fb=0;f&&(c.parent!==a?c=c.parent:(e=!0,a.b=a.b.concat(b),b.length=0))}}}
function v(a,b,c,d){this.c=new m(a,b,c,d);this.canvas=this.c.canvas;this.H=this.c.H;this.hb=null;this.b=[];this.Ia=document.createElement("img")}
function ma(a){var b=a.canvas.width,c=a.canvas.height,d=[];a.canvas.width=10*a.c.g;a.canvas.height=Math.ceil(a.b.length/10)*a.c.i;var e=0,f=-1;a.b.forEach(function(b,c){c/10===e+1?(e++,f=0):f++;b.forEach(function(b){a.H.save();la(a.H,f*a.c.g,e*a.c.i,b.ta,b.fillStyle,b.strokeStyle,b.lineWidth);a.H.restore();b.name&&d.push(new na(new n(f*a.c.g,e*a.c.i),a.c.g,a.c.i,b.name))})});a.Ia.src=a.canvas.toDataURL("image/png");a.canvas.width=b;a.canvas.height=c;return new oa(a.Ia,d)}
v.prototype.u=function(){var a=this;this.Ia.onload=function(){a.create()}};v.prototype.create=function(){this.c.a=this};v.prototype.update=function(){};function pa(a,b){a=Math.ceil(a);b=Math.floor(b);return Math.floor(Math.random()*(b-a))+a}function x(a){var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b+1))+b}function qa(a,b){return Math.random()*(b-a)+a}
function ra(a,b,c){for(var d=[],e,f,g=0;g<a.length;g++)e=Math.atan2(a[g].y-b.y,a[g].x-b.x),f=Math.sqrt(Math.pow(a[g].x-b.x,2)+Math.pow(a[g].y-b.y,2)),d.push(new n(Math.cos(c+e)*f+b.x,-Math.sin(c+e)*f+b.y));return d}function sa(a,b){for(var c=0,d=-1,e,f=0;f<a.length;f++)b?(e=b(a[f],f),e>c&&(c=e,d=f)):a[f]<c&&(c=a[f],d=f);return d}function y(a,b,c){var d=-1,e=!1;return d=c?a.findIndex(function(a){c(a)===b&&(e=!0);return e}):a.findIndex(function(a){a===b&&(e=!0);return e})}
function ta(a,b,c){b=y(a,b,c);return a[b]}function n(a,b){this.x=a;this.y=b}n.prototype.compare=function(a){return a?a.x===this.x&&a.y===this.y?!0:!1:!1};n.prototype.R=function(a){this.x=a.x;this.y=a.y};function ua(a,b){b&&(a.x+=b.x,a.y+=b.y)}function va(a,b){return new n(a.x+b.x,a.y+b.y)}function na(a,b,c,d){this.position=a;this.width=b;this.height=c;this.name=d}function z(){this.b=[]}function A(a,b){b.reset();a.b.push(b)}function wa(a,b){for(var c=0;c<b.length;c++)A(a,b[c])}
function B(a,b){if(0<a.b.length){var c=a.b[a.b.length-1];c.set(b);a.b.splice(a.b.length-1,1)}else c=a.f(b);return c}z.prototype.f=function(){return{}};function oa(a,b){this.Ia=a;this.xb=b}
function q(a,b,c,d,e,f,g){this.a=a;this.type=b;this.u=[];this.frame=this.frames=null;this.ma=0;this.width=a.c.g;this.height=a.c.i;this.fa=null;xa(this,b,c);f?this.fixed=f:this.fixed=!1;this.na=!1;this.position=new n(d,e);this.speed=new n(0,0);this.P=new n(0,0);this.ja=new n(0,0);ya(this);this.children=[];this.parent=null;this.visible=!0;this.I={da:null,Ka:null,ob:null,cb:null};this.angle=0;this.scale=new n(1,1);this.fb=0;g?this.Wa=g:this.Wa=!1;this.G=0;this.alpha=1}
function xa(a,b,c){Array.isArray(c)?a.frames=c:a.frames=[c];a.frame=a.frames[0];a.fa=null;b===q.b?za(a):b===q.f&&(b=a.a.c.H.font,a.a.c.H.font=a.frame.font,a.width=a.a.c.H.measureText(a.frame.text).width,a.a.c.H.font=b)}function za(a){for(var b=0;b<a.frames.length;b++)a.u.push(ta(a.a.hb.xb,a.frames[b],function(a){return a.name}));a.fa=a.u[0]}function Aa(a,b){a.ma=b;a.frame=a.frames[a.ma];a.fa=a.u[a.ma]}
q.prototype.update=function(a){ya(this);this.Wa&&(this.G+=a,.05<this.G&&(this.G=0,this.ma<this.frames.length-1?this.ma++:this.ma=0,this.frame=this.frames[this.ma],this.fa=this.u[this.ma]))};function C(a,b){a.visible=b;r(a.a.c)}function ya(a){a.P.x=a.ja.x+.5*a.width;a.P.y=a.ja.y+.5*a.width}q.prototype.m=function(a){this.children.push(a);a.parent=this;r(this.a.c);return a};
function D(a,b){var c=-1;c=a.children.findIndex(function(a){return a===b?!0:!1});0<c&&(a.children.splice(c,1),b.parent=null);r(a.a.c)}function Ba(a){a.children.forEach(function(a){a.parent=null});a.children.length=0;r(a.a.c)}q.prototype.reset=function(){this.position.x=0;this.position.y=0;this.speed.x=0;this.speed.y=0;this.fixed=this.na=!1;this.angle=0};
q.prototype.set=function(a){a.x?this.position.x=a.x:this.position.x=0;a.y?this.position.y=a.y:this.position.y=0;a.frames&&(this.u.length=0,xa(this,a.type,a.frames));a.fixed?this.fixed=a.fixed:this.fixed=!1;ya(this)};h.Object.defineProperties(q,{b:{configurable:!0,enumerable:!0,get:function(){return 1}},j:{configurable:!0,enumerable:!0,get:function(){return 2}},f:{configurable:!0,enumerable:!0,get:function(){return 3}}});
function E(a,b,c,d,e,f,g,l,p,u){q.call(this,a,null,null,b,c,d,null);this.b=[];for(b=0;b<f;b++)this.b.push(new F(a,e.type,e.frames,e.position.x,e.position.y,e.Wa,e.kb)),this.b[b].angle=qa(0,Math.PI),this.m(this.b[b]);this.C=g;this.L=l;this.V=p;this.pa=u;this.K=!1;this.f=[];this.j=this.C;this.ab=null}k(E,q);function Ca(a,b){a.K=b;a.j=a.C}
E.prototype.update=function(a){var b=this;q.prototype.update.call(this,a);if(this.K&&(this.j+=a,this.j>=this.C))if(this.f.length===this.b.length)this.ab&&this.ab(),Ca(this,!1);else{this.j=0;a=this.pa;for(var c={za:0};c.za<this.b.length;c={za:c.za},c.za++){var d=-1;d=this.f.findIndex(function(a){return function(c){return c===b.b[a.za]?!0:!1}}(c));if(0>d){d=this.b[c.za];var e=qa(this.L,this.V),f=qa(0,2*Math.PI);C(d,!0);d.speed.x=Math.cos(f)*e;d.speed.y=-Math.sin(f)*e;this.f.push(d);a--}if(0===a)break}}};
function F(a,b,c,d,e,f,g){q.call(this,a,b,c,d,e,!1,f);C(this,!1);this.kb=g;this.b=0}k(F,q);F.prototype.update=function(a){q.prototype.update.call(this,a);this.visible&&(this.b+=a,this.b>this.kb&&(this.b=0,C(this,!1),this.position.x=0,this.position.y=0,a=this.parent,a.f.splice(y(a.f,this,null),1)))};function G(){this.J=[]}G.prototype.A=function(a){this.J.push(a);return a};
function H(a,b,c,d){this.M=a;this.G=b;d?this.type=d:this.type=H.f;this.sa=null;this.pa=this.Ua=c;this.b=0;this.active=!1;this.u=0;this.Oa=null;this.V=!0;this.C=this.j=this.K=0}H.prototype.ha=function(){};H.prototype.f=function(a){a&&(this.G=a)};function Da(a){a.C=2*a.j/Math.pow(a.G,2);a.Oa=a.C*a.G;a.C*=-1}function Ea(a){a.active=!1;a.pa=a.Ua;a.V=!0;a.b=0;a.u=0}
H.prototype.update=function(a){if(this.active&&(this.u+=a,this.type===H.f?this.b=this.u*this.K/this.j:this.type===H.b&&(this.b=(this.Oa*this.u+.5*this.C*Math.pow(this.u,2))/this.j),this.V||(this.b=1-this.b),this.u>this.G)){this.u=0;a:{if(0<=this.Ua&&(this.pa--,0>this.pa)){Ea(this);this.sa&&this.sa(this);a=!0;break a}a=!1}a||(this.V=this.V?!1:!0)}};h.Object.defineProperties(H,{f:{configurable:!0,enumerable:!0,get:function(){return 1}},b:{configurable:!0,enumerable:!0,get:function(){return 2}}});
function I(a,b,c,d,e,f){H.call(this,a,b,c,d);this.ia=this.L=0;this.qa=new n(0,0);this.Ga=new n(0,0);this.ha(e,f)}k(I,H);I.prototype.ha=function(a,b){this.qa.R(a);this.Ga.R(b);this.L=this.Ga.x-this.qa.x;this.ia=this.Ga.y-this.qa.y;a=this.qa;b=this.Ga;this.j=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));this.f(null);Da(this)};I.prototype.f=function(a){H.prototype.f.call(this,a);this.K=this.j/this.G};function J(a,b,c,d,e,f){I.call(this,a,b,c,d,e,f)}k(J,I);
J.prototype.update=function(a){I.prototype.update.call(this,a);this.active&&(this.M.position.x=this.qa.x+this.b*this.L,this.M.position.y=this.qa.y+this.b*this.ia)};function K(a,b,c,d,e,f){I.call(this,a,b,c,d,e,f)}k(K,I);K.prototype.update=function(a){I.prototype.update.call(this,a);this.active&&(this.M.scale.x=this.qa.x+this.b*this.L,this.M.scale.y=this.qa.y+this.b*this.ia)};function L(a,b,c,d,e){H.call(this,a,b,c,d);this.L=this.ia=0;this.ha(a.angle,e)}k(L,H);
L.prototype.update=function(a){H.prototype.update.call(this,a);this.active&&(this.M.angle=this.ia+this.b*this.L)};L.prototype.ha=function(a,b){this.ia=a;this.j=this.L=b;this.f(null);Da(this)};L.prototype.f=function(a){H.prototype.f.call(this,a);this.K=this.L/this.G};function M(a,b,c,d,e,f){H.call(this,a,b,c,d);this.L=0;this.ha(e,f)}k(M,H);M.prototype.ha=function(a,b){this.L=a;this.j=b-a;this.f(null);Da(this)};M.prototype.f=function(a){H.prototype.f.call(this,a);this.K=this.j/this.G};
M.prototype.update=function(a){H.prototype.update.call(this,a);this.active&&(this.M.alpha=this.L+this.b*this.j)};function la(a,b,c,d,e,f,g){b||(b=0);c||(c=0);e&&(a.fillStyle=e);f&&(a.strokeStyle=f);g&&(a.lineWidth=g);a.beginPath();a.moveTo(d[0].x+b,d[0].y+c);for(f=1;f<d.length;f++)a.lineTo(d[f].x+b,d[f].y+c),e||a.stroke();a.closePath();e&&a.fill()}function N(a,b,c,d,e){this.ta=a;this.name=b;this.fillStyle=c;this.strokeStyle=d;this.lineWidth=e}
function Fa(a,b,c,d,e){c=[new n(0,d/4),new n(c/2,d/4),new n(c/2,0),new n(c,d/2),new n(c/2,d),new n(c/2,.75*d),new n(0,.75*d),new n(0,d/4)];c.forEach(function(c){c.x+=a;c.y+=b});return new N(c,"rightArrow",e,null,null)}function Ga(a,b,c,d){var e=Fa(a,b,c,d,null);a=ra(e.ta,new n(c/2+a,d/2+b),Math.PI/2);return new N(a,"upArrow","LightSeaGreen",null,null)}function Ha(a,b,c,d){var e=Fa(a,b,c,d,null);a=ra(e.ta,new n(c/2+a,d/2+b),Math.PI);return new N(a,"leftArrow","LightSeaGreen",null,null)}
function Ia(a,b,c,d){var e=Fa(a,b,c,d,null);a=ra(e.ta,new n(c/2+a,d/2+b),1.5*Math.PI);return new N(a,"downArrow","LightSeaGreen",null,null)}function O(a,b,c,d,e,f,g,l,p,u){g||(g="circle");d||(d=0);e||(e=2*Math.PI);f||(f=100);var t=[];e=(e-d)/f;for(var w=0;w<f;w++)t[w]=new n(Math.cos(w*e+d)*c+c+a,-Math.sin(w*e+d)*c+c+b);return new N(t,g,l,p,u)}function P(a,b,c,d,e,f){return new N([new n(a,b),new n(a+c,b),new n(a+c,b+d),new n(a,b+d),new n(a,b)],e,f,null,null)}
function Ja(a,b,c,d,e,f){a=[new n(0+b-d,a+d),new n(0+d,a+d),new n(0+d,a+c-d),new n(0+b-d,a+c-d)];b=0;for(var g=[],l=0;l<a.length;l++)c=O(a[l].x-d,a[l].y-d,d,b,b+Math.PI/2,null,null,null,null,null).ta,g=g.concat(c),b+=Math.PI/2;return new N(g,e,f,null,null)}
function Ka(a,b,c,d){c=[new n(0,d),new n(0,d/4),new n(c/2,0),new n(c,d/4),new n(c,d),new n(c/2+c/5,d),new n(c/2+c/5,d-d/3),new n(c/2-c/5,d-d/3),new n(c/2-c/5,d),new n(c/5,d)];c.forEach(function(c){c.x+=a;c.y+=b});return new N(c,"greenHome","SeaGreen",null,null)}
function La(a,b,c,d,e){d||(d="laserBeam");var f=1,g=Math.floor(c/5);0<g%2&&(f=-1);c-=5*g;g=[];for(g.push(new n(0,a+2*f+.4*c*f*-1));c<b;)g.push(new n(0+c,a+2*f)),c+=5,f*=-1;g.push(new n(0+b,a+.4*(0+b-(c-2.5))*f));return new N(g,d,null,e,null)}function Ma(a,b,c,d){var e=O(a,b,c,null,null,5,null,null,null,null),f=.2*Math.PI,g=O(0,0,d,f,f+2*Math.PI,5,null,null,null,null),l=[];e.ta.forEach(function(a,b){l.push(a);l.push(g.ta[b])});l=ra(l,new n(a+c,b+c),f/-2);return new N(l,"star","Gold",null,null)};function Na(a,b){var c=new Oa(a,b),d=new Q,e=new Pa,f=new Qa,g=new n(x(a-1),x(b-1)),l=new n(g.x,g.y),p=B(f,{U:c,start:g,end:l,l:null,$:null,B:d,ba:e});p.va();var u=null,t=null,w=0;t=[];do{u=c.b[pa(0,c.b.length)];t=Ra();t.some(function(a){if(u.ka[a])return w=a,!0});g.R(va(c.Y.T[w].W,new n(u.x,u.y)));l.x=x(a-1);l.y=x(b-1);l=t=Sa(l,c,null);A(f,p);p=B(f,{U:c,start:g,end:l,l:null,$:u,B:d,ba:e});for(var ib=[];p.l[0].end&&!p.va();){(t=Sa(l,c,ib))&&ib.push(t);if(!t)break;l=t;A(f,p);B(f,{U:c,start:g,end:l,
l:null,$:u,B:d,ba:e})}}while(!c.filled());Ta(c);return c}
function Ua(a,b){var c=[],d=[],e=[];b.forEach(function(f){f!==a&&f.h.some(function(g,l){if(g.direction!==a.h[l].direction&&g.direction!==R.f){var p=f.h[l+1],u=!1;d.some(function(a){if(a.position.compare(p.position))return u=!0});if(!u){d.push(p);var t=[];b.forEach(function(a){a.h.some(function(b){if(b.position.compare(p.position))return t.push(a),!0})});c.push(t[sa(t,function(a){return a.h.length})]);e.push({aa:c[c.length-1],jb:l})}return!0}})});e.sort(function(a,b){return a.jb-b.jb});return e}
function Sa(a,b,c){var d=new n(a.x,a.y),e=new n(a.x,a.y),f=[d,e],g=[!1,!1],l=!1,p=null;do f.some(function(d,e){if(!g[e]&&(l=!1,c&&0<=c.findIndex(a.compare,d)&&(l=!0),!l&&b.s[d.x][d.y].filled&&(l=!0),!l))return p=new n(d.x,d.y),!0}),l&&(g[1]||(e.x<b.O-1?e.x++:0<e.y?(e.x=0,e.y--):g[1]=!0),g[0]||(0<d.x?d.x--:d.y<b.w-1?(d.x=b.O-1,d.y++):g[0]=!0),g[0]&&g[1]&&(l=!1));while(l);return p}function Ra(){for(var a=[0,1,2,3],b=[],c;0<a.length;)c=pa(0,a.length),b.push(a[c]),a.splice(c,1);return b}
function Va(a,b){for(var c={lb:new Wa,mb:new Xa,B:new Q},d=[],e=0;e<a.O;e++)for(var f=0;f<a.w;f++)d.push(Ya(a,b,new n(e,f),c));return d}function Ya(a,b,c,d){d||(d={lb:new Wa,mb:new Xa,B:new Q});a=B(d.lb,{U:a,start:b,end:c,l:null,B:d.B,ba:d.mb});b=a.va();a.reset();return b}function Q(){this.b=[]}k(Q,z);Q.prototype.f=function(a){return new Za(a.position,a.direction)};function Pa(){this.b=[]}k(Pa,z);Pa.prototype.f=function(a){return new $a(a.ga,a.start,a.end,a.h,a.B)};function Xa(){this.b=[]}k(Xa,z);
Xa.prototype.f=function(a){return new ab(a.ga,a.start,a.end,a.h,a.B)};function Qa(){this.b=[]}k(Qa,z);Qa.prototype.f=function(a){return new bb(a.U,a.start,a.end,a.l,a.$,a.B,a.ba)};function Wa(){this.b=[]}k(Wa,z);Wa.prototype.f=function(a){return new cb(a.U,a.start,a.end,a.l,a.B,a.ba)};function Za(a,b){this.position=a?new n(a.x,a.y):new n(0,0);b?this.direction=b:this.direction=R.f}Za.prototype.reset=function(){this.direction=R.f;this.position.x=0;this.position.y=0};
Za.prototype.set=function(a){this.position.R(a.position);this.direction=a.direction};function S(a,b,c,d,e){this.ga=a;this.start=b?new n(b.x,b.y):new n(0,0);this.end=c?new n(c.x,c.y):new n(0,0);this.B=e;if(d)for(this.h=[],a=0;a<d.length-1;a++)this.h.push(B(this.B,{position:d[a].position,direction:d[a].direction}));else this.h=[],this.h.push(B(this.B,{position:b,direction:R.f}));this.f=R.b;this.Pa=this.eb=!1}S.prototype.reset=function(){wa(this.B,this.h);this.h.length=0;this.Pa=this.eb=!1;this.f=R.b};
S.prototype.set=function(a){this.start.R(a.start);this.end.R(a.end);if(a.h)for(var b=0;b<a.h.length-1;b++)this.h.push(B(this.B,{position:a.h[b].position,direction:a.h[b].direction}));else this.h.push(B(this.B,{position:a.start,direction:R.f}))};S.prototype.b=function(){return!0};S.prototype.j=function(){return!0};
h.Object.defineProperties(S,{j:{configurable:!0,enumerable:!0,get:function(){return 1}},f:{configurable:!0,enumerable:!0,get:function(){return 2}},b:{configurable:!0,enumerable:!0,get:function(){return 3}},u:{configurable:!0,enumerable:!0,get:function(){return 4}}});function ab(a,b,c,d,e){S.call(this,a,b,c,d,e)}k(ab,S);ab.prototype.b=function(a,b,c){a=!1;this.ga.s[b.position.x][b.position.y].Ja[R.b.indexOf(c.id)]&&(a=!0);return a};
ab.prototype.j=function(a,b,c){var d=!1;!this.b(a,b,c)&&a.compare(this.end)&&(d=!0);return d};function $a(a,b,c,d,e){S.call(this,a,b,c,d,e)}k($a,S);$a.prototype.b=function(a){var b=!1;this.ga.s[a.x][a.y].filled&&(b=!0);return b};$a.prototype.j=function(a){var b=!1;a.compare(this.end)&&(b=!0);return b};function T(a,b,c,d,e,f){this.U=a;this.B=e;this.ba=f;b||(b=new n(0,0));c||(c=new n(0,0));this.f=new db(a.O,a.w);d?this.l=d:(this.l=[],this.l.push(B(this.ba,{ga:a,start:b,end:c,h:null,B:this.B})))}
T.prototype.va=function(){var a=0,b=0,c=!1,d=!1;if(this.l[0].start.compare(this.l[0].end))d=!0;else{do if(this.l[a].eb||this.l[a].Pa)a<this.l.length-1?a++:d?(a=0,d=!1):c=!0;else{a:{var e=this.l[a];var f=this.f,g=e.h[e.h.length-1],l=0,p=new n(0,0);for(g.direction!==R.f&&(l=e.f.indexOf(g.direction)+1);l<e.f.length;l++){var u=e.ga.Y.T[l];p.R(va(g.position,u.W));if(p.x<e.ga.O&&0<=p.x&&p.y<e.ga.w&&0<=p.y){if(e.j(p,g,u)){g.direction=u.id;e.eb=!0;e.h.push(B(e.B,{position:p,direction:R.f}));e=S.f;break a}var t;
if(t=!e.b(p,g,u)){t=!1;for(var w=0;w<e.h.length;w++)if(e.h[w].position.x===p.x&&e.h[w].position.y===p.y){t=!0;break}t=!t}if(t){f.s[p.x][p.y].filled?e.Pa=!0:f.Qa(p.x,p.y);g.direction=u.id;e.h.push(B(e.B,{position:p,direction:R.f}));e=S.b;break a}}}e.Pa=!0;e=S.j}e===S.b?(this.l.push(B(this.ba,{ga:this.U,start:this.l[a].start,end:this.l[a].end,h:this.l[a].h,B:this.B})),a++,d||(d=!0)):e===S.u?d||(d=!0):e===S.f&&(b=a,c=!0,d||(d=!0))}while(!c)}return{wb:d,pb:b}};
T.prototype.set=function(a){this.l.push(B(this.ba,{ga:this.U,start:a.start,end:a.end,h:null,B:this.B}));this.f.clear()};T.prototype.reset=function(){wa(this.ba,this.l);this.l.length=0};function bb(a,b,c,d,e,f,g){T.call(this,a,b,c,d,f,g);this.$=e}k(bb,T);
bb.prototype.va=function(){var a=T.prototype.va.call(this),b=a.pb;if(a.wb){this.$&&(eb(this.U,this.$.x,this.$.y,this.l[b].h[0].position.x,this.l[b].h[0].position.y),eb(this.U,this.l[b].h[0].position.x,this.l[b].h[0].position.y,this.$.x,this.$.y));for(a=0;a<this.l[b].h.length;a++)this.U.Qa(this.l[b].h[a].position.x,this.l[b].h[a].position.y),0<a&&eb(this.U,this.l[b].h[a].position.x,this.l[b].h[a].position.y,this.l[b].h[a-1].position.x,this.l[b].h[a-1].position.y),a<this.l[b].h.length-1&&eb(this.U,
this.l[b].h[a].position.x,this.l[b].h[a].position.y,this.l[b].h[a+1].position.x,this.l[b].h[a+1].position.y);return this.l[b]}return null};bb.prototype.set=function(a){T.prototype.set.call(this,a);this.$=a.$};function cb(a,b,c,d,e,f){T.call(this,a,b,c,d,e,f);this.b=null}k(cb,T);cb.prototype.va=function(){var a=T.prototype.va.call(this).pb;return this.b=this.l[a]};cb.prototype.reset=function(){for(var a=0;a<this.l.length;a++)this.l[a]!==this.b&&A(this.ba,this.l[a]);this.l.length=0;this.b=null};
function R(){this.T=[];this.T.push({id:R.j,W:new n(1,0)},{id:R.u,W:new n(0,1)},{id:R.C,W:new n(-1,0)},{id:R.G,W:new n(0,-1)})}
h.Object.defineProperties(R,{K:{configurable:!0,enumerable:!0,get:function(){return new R}},u:{configurable:!0,enumerable:!0,get:function(){return 1}},G:{configurable:!0,enumerable:!0,get:function(){return 2}},C:{configurable:!0,enumerable:!0,get:function(){return 3}},j:{configurable:!0,enumerable:!0,get:function(){return 4}},f:{configurable:!0,enumerable:!0,get:function(){return 5}},b:{configurable:!0,enumerable:!0,get:function(){return[R.j,R.u,R.C,R.G]}}});
function U(a,b){this.s=[];this.O=a;this.w=b}U.prototype.Qa=function(a,b){this.s[a][b].filled=!0};U.prototype.filled=function(){for(var a=!0,b=0;b<this.O;b++)for(var c=0;c<this.w;c++)if(!this.s[b][c].filled){a=!1;break}return a};U.prototype.clear=function(){for(var a=0;a<this.O;a++)for(var b=0;b<this.w;b++)this.s[a][b].clear()};function db(a,b){U.call(this,a,b);for(var c=0;c<a;c++){this.s.push([]);for(var d=0;d<b;d++)this.s[c][d]=new V(c,d,!1)}}k(db,U);
function Oa(a,b){U.call(this,a,b);for(var c=0;c<a;c++){this.s.push([]);for(var d=0;d<b;d++)this.s[c][d]=new fb(c,d,!1,a,b)}this.b=[];this.Y=R.K}k(Oa,U);Oa.prototype.Qa=function(a,b){U.prototype.Qa.call(this,a,b);gb(this,this.s[a][b],!1,!0);hb(this.s[a][b])&&this.b.push(this.s[a][b])};
function gb(a,b,c,d){for(var e=new n(0,0),f=0;f<a.Y.T.length;f++)e.x=b.x,e.y=b.y,ua(e,a.Y.T[f].W),b.x<a.O-a.Y.T[f].W.x&&b.x>-1-a.Y.T[f].W.x&&b.y<a.w-a.Y.T[f].W.y&&b.y>-1-a.Y.T[f].W.y&&a.s[e.x][e.y].filled&&(b.ka[f]=!1,d&&gb(a,a.s[e.x][e.y],!0,!1));c&&!hb(b)&&(b=a.b.findIndex(function(a){return a===this?!0:!1},b),0<=b&&a.b.splice(b,1))}function eb(a,b,c,d,e){a.s[b][c].ib.push(a.s[d][e])}
function Ta(a){for(var b,c=0;c<a.O;c++)for(var d=0;d<a.w;d++){b=a.s[c][d].ib;for(var e=0;e<b.length;e++)for(var f=0;f<a.Y.T.length;f++)if(c+a.Y.T[f].W.x===b[e].x&&d+a.Y.T[f].W.y===b[e].y){a.s[c][d].Ja[f]=!1;break}}}function V(a,b,c){this.x=a;this.y=b;this.filled=c}V.prototype.clear=function(){this.filled=!1};function fb(a,b,c,d,e){V.call(this,a,b,c);this.ib=[];this.O=d;this.w=e;this.ka=[];jb(this);this.Ha=this.ya=null;this.Ja=[!0,!0,!0,!0]}k(fb,V);
fb.prototype.clear=function(){V.prototype.clear.call(this);jb(this);this.Ja=[!0,!0,!0,!0]};function jb(a){a.ka=[!0,!0,!0,!0];a.x===a.O-1&&(a.ka[R.b.indexOf(R.j)]=!1);a.y===a.w-1&&(a.ka[R.b.indexOf(R.u)]=!1);0===a.x&&(a.ka[R.b.indexOf(R.C)]=!1);0===a.y&&(a.ka[R.b.indexOf(R.G)]=!1)}function hb(a){for(var b=!1,c=0;c<a.ka.length;c++)if(a.ka[c]){b=!0;break}return b};function kb(a,b,c,d){v.call(this,a,b,c,d);this.o=this.f=this.j=this.D=null;this.G=[];this.la=this.ua=null}k(kb,v);
kb.prototype.u=function(){v.prototype.u.call(this);this.b.push(Array(Fa(.05*this.c.g,.05*this.c.i,.9*this.c.g,.9*this.c.i,"LightSeaGreen")));this.b.push(Array(Ga(.05*this.c.g,.05*this.c.i,.9*this.c.g,.9*this.c.i)));this.b.push(Array(Ha(.05*this.c.g,.05*this.c.i,.9*this.c.g,.9*this.c.i)));this.b.push(Array(Ia(.05*this.c.g,.05*this.c.i,.9*this.c.g,.9*this.c.i)));this.b.push(Array(Ka(.05*this.c.g,.05*this.c.i,.9*this.c.g,.9*this.c.i)));this.b.push(Array(O(.025*this.c.g,.075*this.c.i,.45*this.c.g,null,
null,null,"greenCircle","SeaGreen",null,null)));this.b.push(Array(O(1/3*this.c.g,1/3*this.c.i,this.c.g/6,null,null,null,"greenCircleExplosion","SeaGreen",null,null)));this.b.push(Array(Ja(0,this.c.g,this.c.i,10,"buttonImage","Khaki")));this.b.push([P(this.c.g-8,4,5,this.c.i-4,"flag","Sienna"),P(4,4,this.c.g-12,this.c.i/2,null,"SeaGreen")]);this.b.push(Array(P(0,0,this.c.g,this.c.i,"background1","Khaki")));this.b.push(Array(P(0,0,this.c.g,this.c.i,"background2","Lavender")));this.b.push(Array(O(0,
0,this.c.g/2,null,null,3,"playShape","LightSeaGreen",null,null)));this.b.push(Array(Ma(.25*this.c.g,.25*this.c.i,this.c.g/4,this.c.g/2)));this.b.push([O(this.c.g/2-.3*this.c.g,this.c.i-.7*this.c.i,.3*this.c.g,Math.PI/2,0,null,"redo",null,"LightSeaGreen",5),O(24,6,this.c.g/5,null,null,3,null,"LightSeaGreen",null,null)]);this.b.push([O(this.c.g/6,5,this.c.g/3,null,null,null,"lock",null,"Silver",5),Ja(this.c.i/3,this.c.g,2/3*this.c.i,5,null,"GoldenRod"),O(.4*this.c.g,2/3*this.c.i,this.c.g/10,null,null,
null,null,"Black",null,null),P(.4375*this.c.g,.8*this.c.i,this.c.g/8,10,null,"black")]);this.b.push(Array(O(this.c.g/4,this.c.g/4,this.c.g/4,null,null,3,"normalSpeed","LightSeaGreen",null,null)));this.b.push([O(.0625*this.c.g,this.c.i/4,this.c.g/4,null,null,3,"fastSpeed","LightSeaGreen",null,null),O(.4375*this.c.g,this.c.i/4,this.c.g/4,null,null,3,null,"LightSeaGreen",null,null)]);for(var a=215,b=120,c=4,d=6,e=W.b,f=0;20>f;f++)this.b.push(Array(La(this.c.i/2,this.c.g,.5*f,e[f],"rgb("+a+","+b+", 0)"))),
10===f&&(c*=-1,d*=-1),a+=c,b-=d;this.hb=ma(this)};kb.prototype.create=function(){var a=this;v.prototype.create.call(this);this.G=lb(this);this.ua=[];this.G.forEach(function(b){var c=new mb;c.R(b);a.ua.push(c)});this.ua[0].locked=!1;this.j=this.c.m(new nb(this));this.D=this.c.m(new ob(this));this.f=this.c.m(new pb(this));C(this.D,!1);C(this.f,!1);this.j.X=this.f;this.f.X=this.D;this.D.X=this.f;this.j.ready();this.c.start()};kb.prototype.update=function(){};
function lb(a){var b=[];b.push(new qb(10,0));for(var c=0;c<=a.c.tb-10;c+=2)b.push(new qb(10+c,2+c));return b}function X(a){q.call(this,a,null,null,0,0,!0,!1);var b=this;this.Na=this.a.c.A(new J(this,.5,0,H.f,new n(this.position.x,this.position.y),new n(-1*this.a.c.canvas.width,this.position.y)));this.X=null;this.Ua=this.m(new q(a,null,null,0,0,!0,!1));this.Na.sa=function(){C(b,!1);b.X.ready();b.X.sb(b.Na);b.position.x=0;b.position.y=0}}k(X,q);
function rb(a){for(var b=0;b<a.a.c.tb;b++)for(var c=0;c<a.a.c.xa;c++)a.Ua.m(new q(a.a,q.b,"background2",b*a.a.c.g,c*a.a.c.i,null,null))}X.prototype.sb=function(){};X.prototype.Fa=function(a){a.Na.active=!0;C(a.X,!0)};X.prototype.ready=function(){if(this.X){var a=this.a.c,b=a.children,c=this.X,d=y(b,c,null);b.splice(d,1);b.splice(0,0,c);r(a)}a=this.a.c;b=a.children;c=y(b,this,null);b.splice(c,1);b.splice(1,0,this);r(a)};
function nb(a){X.call(this,a);var b=this;rb(this);a=new G;var c=this.m(new q(this.a,q.f,{font:"60px serif",text:"The Walls",fillStyle:"LightSlateGray "},0,this.a.c.canvas.height,!1,null));c.position.x=this.a.c.canvas.width/2-c.width/2;a.A(new J(c,2,0,H.b,c.position,new n(c.position.x,0))).active=!0;c=this.m(new q(this.a,q.f,{font:"60px serif",text:"Are",fillStyle:"LightSlateGray "},0,this.a.c.canvas.height,!1,null));c.position.x=this.a.c.canvas.width/2-c.width/2;a.A(new J(c,2,0,H.b,c.position,new n(c.position.x,
this.a.c.i))).active=!0;c=this.m(new q(this.a,q.f,{font:"60px serif",text:"LASERS",fillStyle:"CRIMSON"},0,this.a.c.canvas.height,!1,null));c.position.x=this.a.c.canvas.width/2-c.width/2;a.A(new J(c,2,0,H.b,c.position,new n(c.position.x,3*this.a.c.i))).active=!0;c=a.A(new K(c,2,0,H.b,c.scale,new n(2,2)));c.active=!0;a.A(c);c=this.m(new q(this.a,q.f,{font:"60px serif",text:"By neilbgames",fillStyle:"LightSlateGray "},0,this.a.c.canvas.height-1.5*this.a.c.i,!1,null));c.position.x=this.a.c.canvas.width-
c.width;c.scale.x=0;c.scale.y=0;c=a.A(new K(c,2,0,H.f,c.scale,new n(1,1)));c.active=!0;a.A(c);this.a.c.A(a);Ca(this.m(new E(this.a,this.a.c.canvas.width/2,this.a.c.canvas.height/2,!0,new F(this.a,q.b,W.b,0,0,!0,2),500,.5,100,200,10)),!0);a=this.m(new sb(this.a,0,0));a.position.x=this.a.c.canvas.width/2-a.width/2;a.position.y=.625*this.a.c.canvas.height-a.height/2;a.I.da=function(){b.X.Fa(b)}}k(nb,X);
function pb(a){X.call(this,a);var b=this;rb(this);this.b=[];var c=6.5*a.c.g,d=2*a.c.g,e=a.c.canvas.height/2,f=-1,g=0,l=[];a.ua.forEach(function(p,u){0<u&&0===u%3?(g++,f=0):f++;u=new tb(a,-1*b.a.c.g,2*b.a.c.g);for(var t=0;3>t;t++){var w=new ub(a,t*b.a.c.g,0);C(w,!1);u.wa.push(u.m(w))}t=b.m(new vb(a,d+f*c,d+e*g));w=t.m(new wb(a,0,0,p));l.push(w);t.yb=t.m(u);p.locked||(w.children[0].frame=Aa(w.children[0],1));p.Xa&&xb(u,p.wa);w.I.da=function(a,c){c.La.locked||(b.a.la=c.La,b.X.Fa(b))};b.b.push(w)})}
k(pb,X);pb.prototype.Fa=function(a){this.b.forEach(function(a){a.La.locked||(a.children[0].frame=Aa(a.children[0],1));a.La.Xa&&xb(a.parent.yb,a.La.wa)});a.Na.active=!0;C(a.X,!0)};function xb(a,b){for(var c=0;c<b;c++)C(a.wa[c],!0)}
function ob(a){X.call(this,a);var b=this;rb(this);this.oa=new yb;this.Oa=new zb;this.Z=0;this.pa=this.m(new q(this.a,null,null,0,0,!0,null));this.Ca=this.m(new Ab(this.a,0,0));this.V=this.m(new Bb(this.a,0,0,this.Ca));Cb(this.V.m(new Db(this.a,null,null)));this.ub=[];this.L=this.a.c.A(new G);var c=["3","2","1","Go!"];this.C=[];this.j=[];c.forEach(function(a,e){a=new q(b.a,q.f,{font:"240px serif",text:a,fillStyle:"CRIMSON"},0,0,null,null);a.height=240;a.position.x=b.a.c.canvas.width/2-a.width/2;a.position.y=
0-a.height-b.a.c.i;b.C.push(new J(a,.2,0,H.f,a.position,new n(a.position.x,b.a.c.canvas.height/2-a.height/2)));b.j.push(new K(a,.8,0,H.f,a.scale,new n(0,0)));b.j[b.j.length-1].sa=function(a){C(a.M,!1);e===c.length-1&&b.V.children.forEach(function(a){Eb(a.S,a.N[0].h[0].direction)})};b.L.A(b.C[b.C.length-1]);b.L.A(b.j[b.j.length-1]);b.ub.push(a);b.m(a)});this.b=this.m(new Fb(a,0,0));this.b.position.x=this.a.c.canvas.width+this.b.width/2;this.b.position.y=.625*this.a.c.canvas.height-this.b.height/2;
this.K=this.a.c.A(new J(this.b,2,0,H.b,this.b.position,new n(this.a.c.canvas.width/2-this.b.width/2,.625*this.a.c.canvas.height-this.b.height/2)));C(this.b,!1);this.f=this.m(new sb(a,0,0));this.b.I.da=function(){Ea(b.K);Ea(b.ia);Gb(b,b.a.la.Va,b.a.la.Ra);Hb(b)};this.f.I.da=function(){b.X.Fa(b)};this.ia=this.a.c.A(new J(this.f,2,0,H.b,new n(0,0),new n(0,0)));C(this.f,!1)}k(ob,X);ob.prototype.Fa=function(a){Gb(this,this.a.la.Va,this.a.la.Ra);a.Na.active=!0;C(a.X,!0)};
function Gb(a,b,c){a.Z=a.a.c.canvas.width/2-b*a.a.c.g/2;C(a.b,!1);C(a.f,!1);a.a.o=Na(b,a.a.c.xa-1);b=a.Ca;C(b,!0);b.v=null;D(b,b.Aa);wa(b.ea,b.children);Ba(b);var d=b.a.o.O/2*b.a.c.g-2*b.a.c.g+b.a.D.Z;b.m(B(b.ea,{a:b.a,type:q.b,frames:"rightArrow",y:(b.a.c.xa-1)*b.a.c.i,x:b.a.c.g+d,direction:R.j,ca:!0}));b.m(B(b.ea,{a:b.a,type:q.b,frames:"upArrow",y:(b.a.c.xa-1)*b.a.c.i,x:2*b.a.c.g+d,direction:R.u,ca:!0}));b.m(B(b.ea,{a:b.a,type:q.b,frames:"leftArrow",y:(b.a.c.xa-1)*b.a.c.i,x:d,direction:R.C,ca:!0}));
b.m(B(b.ea,{a:b.a,type:q.b,frames:"downArrow",y:(b.a.c.xa-1)*b.a.c.i,x:3*b.a.c.g+d,direction:R.G,ca:!0}));b.m(b.Aa);b.Aa.position.x=6*b.a.c.g+d;b.Aa.position.y=(b.a.c.xa-1)*b.a.c.i;Aa(b.Aa.children[0],0);wa(a.Oa,a.pa.children);Ba(a.pa);b=[];for(var e,f,g=0;g<a.a.o.O;g++)for(var l=0;l<a.a.o.w;l++)e=B(a.Oa,{a:a.a,x:g*a.a.c.g+a.Z,y:a.a.c.canvas.height-a.a.c.i*(l+2),oa:a.oa}),b.push(e),d=a.a.o.s[g][l].Ja,d[R.b.indexOf(R.j)]&&(f=B(a.oa,{a:a.a,x:a.a.c.g/2-2,y:0,angle:Math.PI/2}),e.m(f)),d[R.b.indexOf(R.u)]&&
(f=B(a.oa,{a:a.a,x:0,y:a.a.c.i/-2+2,angle:Math.PI}),e.m(f)),0===g&&(f=B(a.oa,{a:a.a,x:a.a.c.g/-2+2,y:0,angle:Math.PI/2}),e.m(f)),0===l&&(f=B(a.oa,{a:a.a,x:0,y:a.a.c.i/2-2,angle:2*Math.PI}),e.m(f));for(d=0;d<b.length;d++)a.pa.m(b[d]);Ib(a.V.children[0],x(a.a.o.O-1)*a.a.c.g,x(a.a.o.w-1)*a.a.c.i,c)}
function Jb(a){a.K.ha(new n(a.a.c.canvas.width+a.b.width/2,.625*a.a.c.canvas.height-a.b.height/2),new n(a.a.c.canvas.width/4-a.b.width/2,.625*a.a.c.canvas.height-a.b.height/2));C(a.b,!0);a.ia.ha(new n(a.a.c.canvas.width+a.b.width/2,.625*a.a.c.canvas.height-a.f.height/2),new n(.75*a.a.c.canvas.width-a.f.width/2,.625*a.a.c.canvas.height-a.f.height/2));C(a.b,!0);a.K.sa=function(){a.ia.active=!0;C(a.f,!0)};a.K.active=!0}ob.prototype.sb=function(){Hb(this)};
function Hb(a){a.L.J.forEach(function(a){a.active=!0;C(a.M,!0)});a.j.forEach(function(a){a.M.scale.x=1;a.M.scale.y=1});a.C.forEach(function(a){a.M.position.R(a.qa)})}function Kb(a,b){var c=a.a.c;a=new n(b.x-a.Z,b.y);return new n(Math.floor(a.x/c.g),Math.floor(a.y/c.i))}function qb(a,b){this.Va=a;this.Ra=b}function mb(){qb.call(this,null,null);this.locked=!0;this.Xa=!1;this.wa=0}k(mb,qb);mb.prototype.R=function(a){this.Va=a.Va;this.Ra=a.Ra};
function Y(a,b,c,d){q.call(this,a,q.b,"buttonImage",b,c,!1,!1);this.m(new q(a,q.b,d,0,0,!0,!1));this.na=!0;this.scale.x=2;this.scale.y=2}k(Y,q);function sb(a,b,c){Y.call(this,a,b,c,"playShape")}k(sb,Y);function Fb(a,b,c){Y.call(this,a,b,c,"redo")}k(Fb,Y);function vb(a,b,c){q.call(this,a,null,null,b,c,!0,null)}k(vb,q);function wb(a,b,c,d){Y.call(this,a,b,c,["lock","playShape"]);this.La=d}k(wb,Y);
function Lb(a,b,c){Y.call(this,a,b,c,["fastSpeed","normalSpeed"]);var d=this;this.scale.x=1;this.scale.y=1;this.I.da=function(){var a=d.children[0].ma;1===a?(a=0,d.bb(Lb.f)):(a=1,d.bb(Lb.b));Aa(d.children[0],a)};this.bb=null}k(Lb,Y);h.Object.defineProperties(Lb,{f:{configurable:!0,enumerable:!0,get:function(){return 1}},b:{configurable:!0,enumerable:!0,get:function(){return 2}}});function Mb(){this.b=[]}k(Mb,z);Mb.prototype.f=function(a){return new Nb(a.a,a.frames,a.x,a.y,a.direction,a.ca)};
function Nb(a,b,c,d,e,f){q.call(this,a,q.b,b,c,d,null,null);var g=this;this.fixed=!0;this.direction=e;f?this.ca=f:this.ca=!1;this.na=!0;this.I.da=function(){if(g.ca)g.parent.v=g.parent.m(B(g.parent.ea,{a:g.a,type:q.b,frames:g.frame,x:g.a.c.Ma.x,y:g.a.c.Ma.y,direction:g.direction}));else{g.parent.v=g;var a=Kb(g.a.D,g.parent.v.P);g.a.o.s[a.x][g.a.o.w-1-a.y].ya=null;g.parent.nb(g,a)}};this.qb=this.a.c.A(new L(this,.2,1,H.b,Math.PI/8));this.rb=this.a.c.A(new K(this,.2,1,H.b,this.scale,new n(.5,.5)))}
k(Nb,q);Nb.prototype.reset=function(){q.prototype.reset.call(this);this.na=!0};Nb.prototype.set=function(a){q.prototype.set.call(this,a);this.direction=a.direction;a.ca?this.ca=a.ca:this.ca=!1};
function Ab(a,b,c){q.call(this,a,null,null,b,c,null,null);var d=this;this.na=!0;this.ea=new Mb;this.v=null;this.Aa=new Lb(this.a,0,0);this.I.cb=function(){if(d.v){var a=Kb(d.a.D,d.v.P);if(a.y<d.a.o.w&&0<=a.y&&a.x<d.a.o.O&&0<=a.x){var b=d.a.o.s[a.x][d.a.o.w-1-a.y].ya;b?b.direction!==d.v.direction?(d.a.o.s[a.x][d.a.o.w-1-a.y].ya=d.v,d.v.position.x=a.x*d.a.c.g+d.a.D.Z,d.v.position.y=a.y*d.a.c.i,D(d,b),A(d.ea,b),d.v.qb.active=!0,d.v.rb.active=!0,d.Ta(d.v,a),d.Ta(d.v,a)):(D(d,d.v),A(d.ea,d.v)):(d.a.o.s[a.x][d.a.o.w-
1-a.y].ya=d.v,d.v.position.x=a.x*d.a.c.g+d.a.D.Z,d.v.position.y=a.y*d.a.c.i,d.v.qb.active=!0,d.v.rb.active=!0,d.Ta(d.v,a))}else a=d.v,D(d,a),A(d.ea,a);d.v=null}};this.nb=this.Ta=null}k(Ab,q);Ab.prototype.update=function(){this.v&&(this.v.position.x=this.a.c.Ma.x,this.v.position.y=this.a.c.Ma.y)};function Ob(){this.b=[]}k(Ob,z);Ob.prototype.f=function(a){return new Pb(a.a,a.x,a.y)};
function Pb(a,b,c){q.call(this,a,q.b,Pb.b,b,c,!0,!1);var d=this;this.ra=this.a.c.A(new J(this,1,0,H.b,this.position,Qb(this)));this.ra.sa=function(){var a=d.parent;A(a.parent.Ya,d);D(a,d);a.b.splice(y(a.b,d,null),1);0===a.b.length&&a.Ea&&(a.Ea=!1,a.K.active=!0)}}k(Pb,q);Pb.prototype.set=function(a){q.prototype.set.call(this,a);this.ra.ha(this.position,this.ra.Ga);this.alpha=1};
function Qb(a){var b=qa(0,2*Math.PI),c=Math.sqrt(Math.pow(Math.abs(a.a.c.canvas.width-a.position.x)+a.width,2)+Math.pow(Math.abs(a.a.c.canvas.height-a.position.y)+a.height,2));return new n(a.position.x+Math.cos(b)*c,a.position.y+Math.sin(b)*c)}h.Object.defineProperties(Pb,{b:{configurable:!0,enumerable:!0,get:function(){return"flag"}}});function zb(){this.b=[]}k(zb,z);zb.prototype.f=function(a){return new Rb(a.a,a.x,a.y,a.oa)};function Rb(a,b,c,d){q.call(this,a,null,null,b,c,!0,null);this.oa=d}
k(Rb,q);Rb.prototype.reset=function(){var a=this;q.prototype.reset.call(this);this.fixed=!0;this.children.forEach(function(b){A(a.oa,b)});Ba(this)};function yb(){this.b=[]}k(yb,z);yb.prototype.f=function(a){return new W(a.a,a.x,a.y,a.angle)};function W(a,b,c,d){q.call(this,a,q.b,W.b,b,c,!0,!0);this.angle=d}k(W,q);W.prototype.reset=function(){q.prototype.reset.call(this);this.fixed=!0};W.prototype.set=function(a){q.prototype.set.call(this,a);this.angle=a.angle};
h.Object.defineProperties(W,{b:{configurable:!0,enumerable:!0,get:function(){for(var a=[],b=0;20>b;b++){var c="0"+b;a.push("laserBeam"+c.substr(c.length-2))}return a}}});function Sb(a,b,c,d){q.call(this,a,q.b,b,c,d,null,null);this.Sa=this.$a=this.width/2;this.direction=R.f;this.f=new n(0,0);this.b=new n(0,0);this.j=1}k(Sb,q);
Sb.prototype.update=function(a){q.prototype.update.call(this,a);a=Kb(this.a.D,this.P);a.compare(this.b)||this.b.R(a);a=!1;0<this.speed.x?Math.floor((this.P.x-this.a.D.Z+this.width/2)/this.a.c.g)>this.b.x&&this.f.x<=this.b.x&&(this.f.x=this.b.x+1,a=!0):0>this.speed.y&&Math.floor((this.P.y-this.width/2)/this.a.c.i)<this.b.y&&this.f.y>=this.b.y&&(this.f.y=this.b.y-1,a=!0);0>this.speed.x?Math.floor((this.P.x-this.a.D.Z-this.width/2)/this.a.c.g)<this.b.x&&this.f.x>=this.b.x&&(this.f.x=this.b.x-1,a=!0):
0<this.speed.y&&Math.floor((this.P.y+this.width/2)/this.a.c.i)>this.b.y&&this.f.y<=this.b.y&&(this.f.y=this.b.y+1,a=!0);if(a){Kb(this.a.D,this.parent.F.P).compare(this.b)&&!this.parent.Ea&&(this.parent.Za.active=!0,this.parent.gb.active=!0,this.speed.x=0,this.speed.y=0,C(this,!1),this.direction=R.f,C(this.a.D.Ca,!1));if(a=this.a.o.s[this.b.x][this.a.o.w-1-this.b.y].ya){a.direction!==this.direction&&(Eb(this,a.direction),this.j++);var b=this.a.D.Ca;D(b,a);A(b.ea,a);this.a.o.s[this.b.x][this.a.o.w-
1-this.b.y].ya=null;this.position.x=this.b.x*this.a.c.g+this.a.D.Z;this.position.y=this.b.y*this.a.c.i}if(a=this.a.o.s[this.b.x][this.a.o.w-1-this.b.y].Ha)this.a.o.s[this.b.x][this.a.o.w-1-this.b.y].Ha=null,a.ra.active=!0;a=this.a.o.s[this.b.x][this.a.o.w-1-this.b.y].Ja;0<this.speed.x?a[R.b.indexOf(R.j)]&&Tb(this):0>this.speed.y?a[R.b.indexOf(R.u)]&&Tb(this):0>this.speed.x?a[R.b.indexOf(R.C)]&&Tb(this):0<this.speed.y&&a[R.b.indexOf(R.G)]&&Tb(this)}};
Sb.prototype.reset=function(){q.prototype.reset.call(this);this.direction=R.f;C(this,!0);this.j=1;this.Sa=this.$a};Sb.prototype.set=function(a){q.prototype.set.call(this,a);this.b.R(Kb(this.a.D,this.position));this.f.R(this.b)};function Tb(a){a.speed.x=0;a.speed.y=0;C(a,!1);a.parent.Da.position.x=a.position.x;a.parent.Da.position.y=a.position.y;Ca(a.parent.Da,!0);C(a.a.D.Ca,!1);a.parent.Da.ab=function(){Jb(a.a.D)}}
function Eb(a,b){b&&(a.direction=b);b=a.a.o.Y.T[R.b.indexOf(a.direction)].W;a.speed.x=b.x*a.Sa;a.speed.y=b.y*-a.Sa}function ub(a,b,c){q.call(this,a,q.b,ub.b,b,c,!0,!1);this.ra=null}k(ub,q);h.Object.defineProperties(ub,{b:{configurable:!0,enumerable:!0,get:function(){return"star"}}});function tb(a,b,c){q.call(this,a,null,null,b,c,!0,!1);this.wa=[]}k(tb,q);
function Z(a,b,c){tb.call(this,a,b,c);var d=this;this.Ba=new G;b=.75*Math.PI;c=Math.PI/-4;for(var e=3*this.a.c.g,f=0;3>f;f++){var g=this.m(new ub(a,0,0));g.ra=this.Ba.A(new J(g,1,0,H.b,new n(0,0),new n(Math.cos(b+f*c)*e,-Math.sin(b+f*c)*e)));C(g,!1);g.ra.sa=function(a){var b=y(a.M.parent.Ba.J,a,null);b<a.M.parent.Ba.J.length-1?a.M.parent.Ba.J[b+1].active?C(a.M.parent.Ba.J[b+1].M,!0):Jb(d.a.D):Jb(d.a.D)}}this.a.c.A(this.Ba)}k(Z,tb);
Z.prototype.reset=function(){this.children.forEach(function(a){C(a,!1)});C(this,!0)};h.Object.defineProperties(Z,{b:{configurable:!0,enumerable:!0,get:function(){return 1}},f:{configurable:!0,enumerable:!0,get:function(){return.95}}});
function Bb(a,b,c,d){q.call(this,a,null,null,b,c,null,null);var e=this;this.Ya=new Ob;d.Ta=function(a,b){if(a=e.a.o.s[b.x][e.a.o.w-1-b.y].Ha)a.alpha=.8};d.nb=function(a,b){if(a=e.a.o.s[b.x][e.a.o.w-1-b.y].Ha)a.alpha=1};d.Aa.bb=function(a){e.children.forEach(function(b){b.S.Sa=b.S.$a*a;Eb(b.S,null)})}}k(Bb,q);
function Db(a,b,c){q.call(this,a,null,null,b,c,!0,null);this.F=this.S=null;this.Da=this.m(new E(this.a,0,0,!0,new F(this.a,q.b,"greenCircleExplosion",0,0,!1,3),25,.05,75,200,5));this.f=this.Za=this.gb=this.C=this.V=null;this.j=0;this.N=[];this.b=[];this.Ea=!1;this.K=null}k(Db,q);
function Cb(a){a.S=new Sb(a.a,"greenCircle",0,0);a.F=new q(a.a,q.b,"greenHome",0,0,!0,null);a.F.alpha=.2;a.K=a.a.c.A(new M(a.F,2,0,H.b,a.F.alpha,1));a.F.m(new Z(a.a,0,0));a.m(a.F);a.Da=a.m(new E(a.a,0,0,!0,new F(a.a,q.b,"greenCircleExplosion",0,0,!1,3),25,.05,75,200,5));a.V=a.a.c.A(new K(a.S,.5,-1,H.b,a.S.scale,new n(.9,.9)));a.V.active=!0;a.m(a.S);a.C=a.a.c.A(new G);a.Za=a.C.A(new J(a.F,3,0,H.b,a.F.position,new n(0,0)));a.gb=a.C.A(new K(a.F,3,0,H.b,a.F.scale,new n(3,3)));a.gb.sa=function(b){b=b.M.children[0];
var c=a.j/a.S.j,d=1;c===Z.b?d=3:c>Z.f&&(d=2);c=b.a;c.la.wa<d&&(c.la.wa=d);c.la.Xa=!0;var e=y(c.ua,c.la,null);e<c.ua.length-1&&(c.ua[e+1].locked=!1);C(b.children[0],!0);for(c=0;c<d;c++)b.children[c].ra.active=!0}}
function Ib(a,b,c,d){a.S.reset();a.S.set({x:b+a.a.D.Z,y:c});b=new n(a.S.b.x,a.a.o.w-1-a.S.b.y);c=Va(a.a.o,new n(b.x,b.y));b=sa(c,function(a){return a.h.length});a.f=c[b];b=a.f.h[a.f.h.length-1];0===d?(a.F.alpha=1,a.Ea=!1):(a.F.alpha=.2,a.Ea=!0);a.F.scale.x=1;a.F.scale.y=1;a.F.position.x=b.position.x*a.a.c.g+a.a.D.Z;a.F.position.y=(a.a.o.w-1-b.position.y)*a.a.c.i;a.F.children[0].reset();a.Za.ha(a.F.position,new n(a.a.c.canvas.width/2-a.F.width/2,a.a.c.canvas.height/2-a.F.height/2));a.b.forEach(function(b){A(a.parent.Ya,
b);D(a,b)});a.b.length=0;a.N.length=0;a.j=0;c=Ua(a.f,c);var e=-1,f=new n(0,0);c.length<d&&(d=c.length);for(var g=0;g<d;g++){var l=pa(e+1,c.length-(d-g));e=a.m(B(a.parent.Ya,{a:a.a,x:c[l].aa.h[c[l].aa.h.length-1].position.x*a.a.c.g+a.a.D.Z,y:(a.a.o.w-1-c[l].aa.h[c[l].aa.h.length-1].position.y)*a.a.c.i}));a.a.o.s[c[l].aa.h[c[l].aa.h.length-1].position.x][c[l].aa.h[c[l].aa.h.length-1].position.y].Ha=e;a.b.push(e);e=l;0===a.N.length?f.R(c[l].aa.h[0].position):f=a.N[a.N.length-1].h[a.N[a.N.length-1].h.length-
1].position;a.N.push(Ya(a.a.o,f,c[l].aa.h[c[l].aa.h.length-1].position,null))}0===a.N.length?a.N.push(a.f):a.N.push(Ya(a.a.o,a.N[a.N.length-1].h[a.N[a.N.length-1].h.length-1].position,b.position,null));var p=R.f;a.j=0;a.N.forEach(function(b){b.h.forEach(function(b){b.direction!==p&&(a.j++,p=b.direction)});a.j--})}(new kb(18,10,64,64)).u();
