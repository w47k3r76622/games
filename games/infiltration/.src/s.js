function aa(t){var a=0;return function(){return a<t.length?{done:!1,value:t[a++]}:{done:!0}}}function h(t){var a="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return a?a.call(t):{next:aa(t)}}function q(t){if(!(t instanceof Array)){t=h(t);for(var a,s=[];!(a=t.next()).done;)s.push(a.value);t=s}return t}function D(){this.B=new F,H(this),I(this),this.Fa=window.innerWidth>>1,this.Ga=window.innerHeight>>1}function H(t){t.sa=!1,t.ta=!1,t.ua=!1,t.qa=!1}function I(t){t.P=!1,t.da=!1,t.ra=!1}function J(t,a){var s=controls,e=!0,h=window.event?window.event.keyCode:t.which;switch("Shift"!=t.key&&"Alt"!=t.key&&"Control"!=t.key&&"Meta"!=t.key||(1==t.location&&(s.P=a),2==t.location&&(s.da=a)),h){case 37:case 65:case 74:case 81:s.sa=a;break;case 38:case 73:case 87:case 90:s.ua=a;break;case 39:case 68:case 76:s.ta=a;break;case 40:case 75:case 83:s.qa=a;break;case 32:case 13:s.P=a;break;case 45:case 96:s.da=a;break;case 27:case 80:s.ra=a;break;default:e=!1}return e}function K(){var t=controls;this.va=this.ca=0,this.controls=t,this.D=new N(this.B=t.B),this.C=new O(1,5,t,this.D,-1),this.C.actions[0][2]=this.C.ha,this.C.actions[0][3]=this.C.Za,this.I=new O(3,1,t,this.D,0),this.I.actions[0][0]=this.I.ba,this.I.actions[2][0]=this.I.ba,this.$=new O(1,2,t,this.D,1),this.M=new O(1,4,t,this.D,3),this.v=0,this.l=new P(this.controls),this.Ea="All systems ready and fully functional.;Navigation route plotted.;Starting engines.;Autopilot engaged.;Green corridors are safe and harbor no hazard.;Sorry Luke, I'm giving up.;Try to keep the last one until the end.;It will be a bumpy ride, but I can handle this.;No problem, the fourth one was a spare.;Ouch. I'm getting dizzy. Please don't do that again;Wow. What happened ?;Aaaa! Kernel panic. Emergency routine activated.;Whoops. Time discontinuity recorded. Realigning.;Right on commander !".split(";")}function Q(t,a){t.Ha=t.state,t.state=a,t.ca=20,t.C.K(),t.I.K(),t.M.K(),t.$.K(),-3!=a&&5!=a||(t.v=0),1==a&&(t.M.s=t.va),2==a&&4!=t.Ha&&(t.va=t.M.s,t.l.K(t.va),t.xa.reset(),R(t,4,0,!0)),-1!=a&&-2!=a||(t.I.L=1)}function S(){var t=game;if(t.m.clear(),-2!=t.state&&2!=t.state&&4!=t.state||(t.l.O&&ba(t.m,t.l.O),ca(t.m),da(t.m,t.l.c,t.l.Ka,t.l.ea,t.l.fa)),5==t.state&&ea(t.m,t.v),0<t.ca){switch(T(t.m,1-t.ca/20),t.Ha){case 0:U(t.m,t.C,!1,t.v);break;case 4:U(t.m,t.C,!0,t.v);break;case-1:case-2:fa(t.m,t.I,t.controls,t.v);break;case 1:ha(t.m,t.M,t.v);break;case 3:ia(t.m,t.$,t.v);break;case-3:ja(t.m,t.v)}t.m.endOffset()}switch(T(t.m,-t.ca/20),t.state){case 0:U(t.m,t.C,!1,t.v);break;case 4:U(t.m,t.C,!0,t.v);break;case-1:case-2:fa(t.m,t.I,t.controls,t.v);break;case 1:ha(t.m,t.M,t.v);break;case 3:ia(t.m,t.$,t.v);break;case-3:ja(t.m,t.v)}t.m.endOffset(),ka(t.xa,[2,0,2,2,2,0,0,0,1][t.state+3],t.v),t.l.N=[],3==t.state&&t.l.N.push(0),t.ca&&--t.ca,requestAnimationFrame(function(){S()})}function la(){Q(game,-3),setInterval(function(){ma()},20),requestAnimationFrame(function(){S()})}function R(t,a,s,e){e&&((e=t.m).message=t.Ea[a],e.ia=200),t.D.speak(.5,s,t.Ea[a])}function ma(){var t=game;if(-3==t.state&&(650==t.v&&R(t,0,0,!1),1600==t.v&&R(t,1,0,!1),2950==t.v&&R(t,2,0,!1),3450==t.v&&R(t,3,0,!1),t.controls.P&&Q(t,0)),0==t.state&&(V(t.C),t.C.done)){var a=[1,-1][t.C.s];Q(t,a)}if(-1==t.state&&(V(t.I),t.I.done&&Q(t,0)),-2==t.state&&(V(t.I),t.I.done&&Q(t,4)),1==t.state&&(V(t.M),t.M.done&&Q(t,a=t.M.s==t.M.aa-1?0:2)),3==t.state&&(V(t.$),t.$.done&&Q(t,a=[2,0][t.$.s])),4==t.state&&(V(t.C),t.C.done&&Q(t,a=[2,-2,0,0,0][t.C.s])),2==t.state){na(t.l),oa(t.l),t.controls.ra&&Q(t,4),199==t.l.O&&(pa(t.D),R(t,9+Math.floor(4*Math.random()),.8,!1)),t.l.N.length&&qa(t.D);for(var s=(a=h(t.l.N)).next();!s.done;s=a.next()){var e=!1;(s=s.value)?e=e||8>s:Q(t,3),e&&(s=t.l.c.j.slice(1).reduce(function(t,a){return t+a},0),R(t,5+s,(3-s)/3,!0))}ra(t.l)&&(Q(t,5),R(t,13,0,!0))}++t.v}function sa(t,a){var s=game;s.xa=t,s.m=a}function O(t,a,s,e,h){for(this.controls=s,this.D=e,this.Ba=t,this.aa=a,this.Ca=h,this.actions=[],s=0;s<t;++s)for(this.actions.push([]),e=0;e<a;++e)this.actions[s].push(this.Sa);this.K()}function V(t){if(t.L+=(t.controls.sa&&0<t.L?-1:0)+(t.controls.ta&&t.L<t.Ba-1?1:0),t.s+=(t.controls.ua&&0<t.s?-1:0)+(t.controls.qa&&t.s<t.aa-1?1:0),t.controls.Aa){var a=t.controls.Aa-1;t.s=a%t.aa,t.L=(a-t.s)/t.aa}t.controls.ra&&-1<t.Ca&&(t.L=Math.min(1,t.Ba),t.s=t.Ca,t.done=!0),(t.controls.Aa||t.controls.P)&&(t.done=t.actions[t.L][t.s].call(t,t.L,t.s)),H(t=t.controls),I(t)}function ta(){var t=document.getElementById("g");this.canvas=t,this.context=t.getContext("2d"),this.U(),this.Ta=["PLAY","CONTROLS : ","SOUND FX : ","VOICE : "],this.Ua=["RESUME GAME","CONTROLS : ","SOUND FX : ","VOICE : ","QUIT TO MENU"],this.Ma=[["","MOUSE","Move","Left Button","Right Button"],["BACK TO MAIN","","MOVE","ACCELERATE","FLYBACK"],["","KEYBOARD","WASD/ZQSD/IJKL/Arrows","Enter/Left Ctrl/Alt","Keypad 0/Right Ctrl/Alt Gr"]],this.Oa=["PLAY AGAIN","BACK TO MAIN MENU"],this.Na=["EASY","MEDIUM","HARD","BACK TO MAIN"],this.message="",this.ia=0}function ba(t,a){t.context.fillStyle="hsla(240,100%,"+(a>>1)+"%,"+Math.min(1,(200-a)/20,(a-100)/70)+")",t.context.fillRect(-t.context.width>>1,-t.context.height>>1,t.context.width,t.context.height)}function ca(t){if(t.ia){var a=t.context.width;t.context.textAlign="left";var s=-.5*t.context.width,e=-.5*t.context.height,h=Math.min(.8,t.ia/50);t.context.strokeStyle="rgba(255,255,255,"+h+")",t.context.fillStyle="rgba(0,0,0,"+h+")",t.context.fillRect(s+a/6,e+t.scale,2*a/3,.8*t.scale),t.context.strokeRect(s+a/6,e+t.scale,2*a/3,.8*t.scale),t.context.font=Math.ceil(.3*t.scale)+"px Verdana",t.context.fillStyle="rgba(255,255,255,"+h+")",t.context.fillText(t.message,s+a/6+20,e+1.5*t.scale),--t.ia,t.context.textAlign="center"}}function da(t,a,s,e,h){t.context.save(),t.context.translate(0,-t.context.height>>1),t.context.fillStyle="rgba(0,0,0,.5)",t.context.fillRect(-t.context.width>>1,0,t.context.width,.5*t.scale);var i=t.context.width;t.context.textAlign="center";var n=-.5*t.context.width;t.context.fillStyle="#c00",t.context.strokeStyle="#fff",t.context.fillRect(n+i/32,t.scale/15,a.speed*i/2,t.scale/3),t.context.strokeRect(n+i/32,t.scale/15,i/4,t.scale/3),t.context.strokeStyle="#000",t.context.fillStyle="#fff",W(t,"speed",n+19*i/120,t.scale/3-1,.25),t.context.fillStyle="rgb(0,0,"+(h>>1)+")",t.context.strokeStyle="#fff",t.context.fillRect(n+5*i/16,t.scale/15,h*i/4e3,t.scale/3),t.context.strokeRect(n+5*i/16,t.scale/15,i/4,t.scale/3),t.context.strokeStyle="#000",t.context.fillStyle="#fff",W(t,"flyback  :",n+13*i/32,t.scale/3-1,.25),t.context.fillStyle="hsl(0,0%,"+Math.floor(65+35*Math.sin(h/13))+"%)",W(t,999<h?"ready":"charging",n+15*i/32,t.scale/3-1,.25),a=a.step/656,t.context.fillStyle="#c00",t.context.strokeStyle="#fff",t.context.fillRect(n+19*i/32,t.scale/15,(1-e/s)*i/4,t.scale/3),t.context.strokeRect(n+19*i/32,t.scale/15,i/4,t.scale/3),t.context.strokeStyle="#000",t.context.fillStyle="#fff",W(t,">",n+19*i/32+a*i/4,t.scale/3-1,.25),t.context.fillStyle=0<e?"#fff":"#f00",t.context.textAlign="right",0==(a=e)?s="--:--":s=(0<(a=((a*=2)-(s=a%100)-100*(e=(a-s)/100%60))/6e3)?a+":":"")+(0<a&10>e?"0":"")+e+":"+(10>s?"0":"")+s,W(t,s,n+.95*i,t.scale/3-1,.25),t.context.restore()}function ea(t,a){var s=Math.min(1,(100-a)/10);t.context.fillStyle="hsla(0,0%,100%,"+s+")",t.context.beginPath(),t.context.arc(0,0,t.scale*a*.5,0,7,!1),t.context.fill(),s=Math.min(1,(100-a)/10,(a-50)/70),t.context.fillStyle="hsla(0,100%,"+Math.min(100,a)+"%,"+s+")",t.context.fillRect(-t.context.width>>1,-t.context.height>>1,t.context.width,t.context.height),t.context.fillStyle="#fff",t.context.strokeStyle="#000",150<a&&W(t,"The Death Cube is destroyed",0,2*t.scale,.8),200<a&&W(t,"A new era begins for the Alliance",0,3.2*t.scale,.8),250<a&&W(t,"Congratulations, you won !",0,4.4*t.scale,.8)}function T(t,a){t.context.save(),t.context.translate(0,t.canvas.height*a)}function U(t,a,s,e){t.context.save();var h="#fff";0==e%3&&0==(1&Math.floor(e/50))&&(h="#f77"),e=Math.round(50+50*Math.cos(e/20));for(var i=0;i<(s?5:4);++i){t.context.fillStyle=a.s==i?h:"#aaa",t.context.strokeStyle="hsl(0,0%,"+(a.s==i?e:0)+"%)";var n=s?t.Ua[i]:t.Ta[i];n+=1==i?a.controls.B.data.ja?"MOUSE":"KEYBOARD":"",n+=2==i?a.D.Z?a.D.B.data.ka?"ON":"OFF":"not supported":"",W(t,n+=3==i?a.D.na?a.D.B.data.W?"ON":"OFF":"not supported":"",0,1.5*(i-2)*t.scale,.8)}t.context.restore()}function fa(t,a,s,e){t.context.save();var h="#fff";0==e%3&&0==(1&Math.floor(e/50))&&(h="#f77"),e=Math.round(50+50*Math.cos(e/20));for(var i=0;3>i;++i)for(var n=0;5>n;++n){var l=window.innerWidth*(i-1)*.3,p=i==(s.B.data.ja?0:2),o=i==a.L&&(1!=i||0==n);t.context.strokeStyle="hsl(0,0%,"+(o?e:0)+"%)",t.context.fillStyle=o?h:p?"#fff":"#aaa",W(t,t.Ma[i][n],l,(n-3)*t.scale,.6)}t.context.restore()}function ha(t,a,s){t.context.save();var e="#fff";0==s%3&&0==(1&Math.floor(s/50))&&(e="#f77"),s=Math.round(50+50*Math.cos(s/20));for(var h=0;h<a.aa;++h)t.context.fillStyle=a.s==h?e:"#aaa",t.context.strokeStyle="hsl(0,0%,"+(a.s==h?s:0)+"%)",t.context.textAlign="center",W(t,t.Na[h],0,9*(h+1)*t.scale/a.aa-(t.context.height>>1),.75);t.context.restore()}function ia(t,a,s){t.context.save();var e="#fff";0==s%3&&0==(1&Math.floor(s/50))&&(e="#f77"),s=Math.round(50+50*Math.cos(s/20));for(var h=0;2>h;++h)t.context.strokeStyle="hsl(0,0%,"+(a.s==h?s:0)+"%)",t.context.fillStyle=a.s==h?e:"#aaa",W(t,t.Oa[h],0,(1.4+2*h)*t.scale,.8);t.context.restore()}function ja(t,a){t.context.fillStyle="#fff",t.context.strokeStyle="#000",t.context.textAlign="left",470>a?W(t,"Somewhere in the galaxy".substr(0,Math.floor(a/10)),-t.context.width/2,-t.context.height/2+t.scale,.6):1e3>a&&W(t,"Somewhere in the galaxy, our last hope".substr(0,Math.floor((a-240)/10)),-t.context.width/2,-t.context.height/2+t.scale,.6),2e3<a&&W(t,"INFILTRATION".substr(0,Math.floor((a-2e3)/10)),-t.context.width/2,t.context.height/4,1.5),2200<a&&3500>a&&W(t,"a game released for js13kgames 2019".substr(0,Math.floor((a-2200)/10)),-t.context.width/2,t.context.height/4+t.scale,.6),3500<a&&W(t,"press Enter or LMB to start".substr(0,Math.floor((a-3500)/10)),-t.context.width/2,t.context.height/4+t.scale,.6),t.context.textAlign="center"}function W(t,a,s,e,h){t.context.font=Math.ceil(h*t.scale)+"px Verdana",t.context.strokeText(a,s,e),t.context.fillText(a,s,e)}function F(){this.data={W:!0,ka:!0,ja:!1};var t=localStorage.getItem("InfiltrationData");t&&(this.data=JSON.parse(t))}function X(t){localStorage.setItem("InfiltrationData",JSON.stringify(t.data))}function N(t){this.B=t}function pa(t){t.Z&&t.B.data.W&&(t.pa.currentTime=0,t.pa.play())}function qa(t){t.Z&&t.B.data.W&&(t.oa.currentTime=0,t.oa.play())}function ua(){var t=document.getElementById("c"),a=game;gl=t.getContext("webgl"),this.canvas=t,this.S=a,this.U()}function ka(t,a,s){gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.viewport(0,0,t.Ja,t.Ia),gl.useProgram(t.i),gl.activeTexture(gl.TEXTURE0);var e=1500*Math.sin(.5),i=0,n=1500*Math.cos(.5),l=25,p=-10,o=1,r=1800,c=0,u=-.5;switch(a){case 0:e=(u=h(va(t,t.S.l.c,!0))).next().value,i=u.next().value,n=u.next().value,c=u.next().value,u=u.next().value,r=250;break;case 1:l=60;break;case 2:e=1500*Math.sin(.5)+2*(1-Math.sin(Math.max(0,Math.min(1.57,(s-400)/200)))),n=1500*Math.cos(.5)-2*Math.cos(Math.max(0,Math.min(1.57,(s-400)/200))),u=-1.8*Math.sin(Math.max(0,Math.min(7.85,(s-400)/400)))-.5*Math.cos(Math.max(0,Math.min(3.14,(s-3e3)/127))),c=.5*Math.cos(Math.max(0,Math.min(6.28,(s-1e3)/200)))-.2-.3*Math.cos(Math.max(0,Math.min(6.28,(s-2400)/150))),l=50-30*Math.cos(Math.max(0,Math.min(620,s-186))/200),p=-1.6-.4*Math.cos(Math.max(0,Math.min(157,s-750))/50),o=.3}var f=-e,g=-i,b=-n,y=t.Ja/t.Ia,M=-u,v=o*Math.tan(l*Math.PI/360);l=Math.cos(M),M=Math.sin(M);var d=Math.cos(c),A=Math.sin(c),x=-(r+o)/(r-o);if(p=[(y=2*o/(v*y- -v*y))*l,(v=2*o/(v- -v))*A*M,x*d*M,-d*M,0,v*d,-x*A,A,-y*M,v*A*l,x*d*l,-d*l,(f*l-b*M)*y,v*(f*A*M+g*d+b*A*l),x*(f*d*M-g*A+b*d*l+p)+-2*r*o/(r-o),-f*d*M+g*A-b*d*l-p],gl.uniformMatrix4fv(gl.getUniformLocation(t.i,"mP"),!1,new Float32Array(p)),2==a&&(e=(n=1500-(3500>s?0:(s-3500)*(s-3500)/1e3))*Math.sin(.5),n*=Math.cos(.5),u=-.5,c=0,3e3<s&&wa(t,[!0,!0,!0,!0,!0],Y(0,-.5,e,i,n),e,i,n)),1!=a&&xa(t,e,i,n,c,u,t.S.l.c,!0),t.S.l.O&&xa(t,e=(u=h(va(t,o=t.S.l.ga[(t.S.l.T+30)%250],!1))).next().value,i=u.next().value,n=u.next().value,c=u.next().value,u=u.next().value,o,!1),1!=a||80>s){for(s=(a=h(t.La)).next();!s.done;s=a.next())if(500>(s=s.value)[0]){for(++s[0],s[1]+=.001*s[0]*s[8],s[2]+=.001*s[0]*s[9],s[3]+=.001*s[0]*s[10],s[4]+=s[6],s[5]+=s[7],e=Math.cos(0),i=Math.sin(0),u=s[4],c=s[5],n=Math.cos(u),u=Math.sin(u),o=Math.cos(c),c=Math.sin(c),gl.uniformMatrix4fv(gl.getUniformLocation(t.i,"mX"),!1,new Float32Array([e*o-i*u*c,-i*n,e*c+i*u*o,0,i*o+e*u*c,e*n,i*c-e*u*o,0,-n*c,u,n*o,0,s[1],s[2],s[3],1])),n=268;308>n;++n)gl.drawArrays(gl.TRIANGLE_STRIP,42*n,42);if(e=Z(n=Y(-s[4],s[5],s[1],s[2],s[3]),[0,0,-.4,1]),i=Z(n,[1,0,0,0]),c=Z(n,[0,1,0,0]),20>s[0])for(n=0;4>n;++n)t.R.unshift([0,e[0]+.6*Math.random()-.3,e[1]+.6*Math.random()-.3,e[2]+.6*Math.random()-.3,.1,i[0],i[1],i[2],c[0],c[1],c[2],0]);else t.R.unshift([150,e[0]+.2*Math.random()-.1,e[1]+.2*Math.random()-.1,e[2]+.2*Math.random()-.1,.1,i[0],i[1],i[2],c[0],c[1],c[2],0])}gl.uniformMatrix4fv(gl.getUniformLocation(t.i,"mX"),!1,new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),gl.bindBuffer(gl.ARRAY_BUFFER,t.$a),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"a"),3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t.ab),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"n"),3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t.bb),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"t"),2,gl.FLOAT,!1,0,0),gl.uniform4f(gl.getUniformLocation(t.i,"uC"),.1,.2,.2,.3),gl.drawArrays(gl.TRIANGLES,0,t.a.length/3),gl.bindBuffer(gl.ARRAY_BUFFER,t.Ya),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"a"),3,gl.FLOAT,!1,0,0),gl.uniform4f(gl.getUniformLocation(t.i,"uC"),1,1,1,.7),gl.drawArrays(gl.POINTS,0,t.ya.length/3)}for(gl.useProgram(t.H),gl.uniformMatrix4fv(gl.getUniformLocation(t.H,"mP"),!1,new Float32Array(p)),gl.useProgram(t.H),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),s=a=0,i=(e=h(t.R)).next();!i.done;i=e.next())200>(i=i.value)[0]&&(i[0]+=i[11]?30:1,++s,7200>a&&(n=i[4]*(0<i[11]?(500-i[0])/500:1),t.A[a]=i[1]+n*(-i[5]+i[8]),t.A[a+1]=i[2]+n*(-i[6]+i[9]),t.A[a+2]=i[3]+n*(-i[7]+i[10]),t.A[a+3]=i[1]+n*(-i[5]-i[8]),t.A[a+4]=i[2]+n*(-i[6]-i[9]),t.A[a+5]=i[3]+n*(-i[7]-i[10]),t.A[a+6]=i[1]+n*(i[5]-i[8]),t.A[a+7]=i[2]+n*(i[6]-i[9]),t.A[a+8]=i[3]+n*(i[7]-i[10]),t.A[a+9]=i[1]+n*(-i[5]+i[8]),t.A[a+10]=i[2]+n*(-i[6]+i[9]),t.A[a+11]=i[3]+n*(-i[7]+i[10]),t.A[a+12]=i[1]+n*(i[5]-i[8]),t.A[a+13]=i[2]+n*(i[6]-i[9]),t.A[a+14]=i[3]+n*(i[7]-i[10]),t.A[a+15]=i[1]+n*(i[5]+i[8]),t.A[a+16]=i[2]+n*(i[6]+i[9]),t.A[a+17]=i[3]+n*(i[7]+i[10]),n=i[11]?0:Math.min(1,6/Math.sqrt(i[0])),c=i[11]?i[11]:Math.min(.9,4/Math.sqrt(i[0])),i=i[11],t.w[a++]=n,t.w[a++]=c,t.w[a++]=i,t.w[a++]=n,t.w[a++]=c,t.w[a++]=i,t.w[a++]=n,t.w[a++]=c,t.w[a++]=i,t.w[a++]=n,t.w[a++]=c,t.w[a++]=i,t.w[a++]=n,t.w[a++]=c,t.w[a++]=i,t.w[a++]=n,t.w[a++]=c,t.w[a++]=i));a&&(gl.bindBuffer(gl.ARRAY_BUFFER,t.Qa),gl.bufferData(gl.ARRAY_BUFFER,t.A,gl.DYNAMIC_DRAW),gl.vertexAttribPointer(gl.getAttribLocation(t.H,"a"),3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t.Pa),gl.bufferData(gl.ARRAY_BUFFER,t.w,gl.DYNAMIC_DRAW),gl.vertexAttribPointer(gl.getAttribLocation(t.H,"c"),3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t.Ra),gl.bufferData(gl.ARRAY_BUFFER,t.Da,gl.DYNAMIC_DRAW),gl.vertexAttribPointer(gl.getAttribLocation(t.H,"t"),2,gl.FLOAT,!1,0,0),gl.uniformMatrix4fv(gl.getUniformLocation(t.H,"mX"),!1,new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),gl.drawArrays(gl.TRIANGLES,0,a/3)),gl.disable(gl.BLEND),t.R.splice(s+1,t.R.length-s)}function Y(t,a,s,e,h){var i=Math.cos(t);t=Math.sin(t);var n=Math.cos(a);return[n,-t*(a=Math.sin(a)),-a*i,s,0,i,-t,e,a,t*n,i*n,h]}function Z(t,a){return[t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3],t[4]*a[0]+t[5]*a[1]+t[6]*a[2]+t[7]*a[3],t[8]*a[0]+t[9]*a[1]+t[10]*a[2]+t[11]*a[3]]}function ya(t,a,s,e,h,i,n,l,p){s=Z(a=Y(h,i,a,s,e),[-3,-3,0,1]),e=Z(a,[3,-3,0,1]),h=Z(a,[-3,-3,-8,1]),i=Z(a,[3,-3,-8,1]);var o=Z(a,[0,1,0,0]);t.a.push.apply(t.a,q(s)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(i)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.f.push(n,0),t.f.push(n+.25,0),t.f.push(n,.25),t.f.push(n,.25),t.f.push(n+.25,0),t.f.push(n+.25,.25),s=Z(a,[-3,3,0,1]),e=Z(a,[-3,-3,0,1]),h=Z(a,[-3,3,-8,1]),i=Z(a,[-3,-3,-8,1]),o=Z(a,[1,0,0,0]),t.a.push.apply(t.a,q(s)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(i)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.f.push(l,.25),t.f.push(l+.25,.25),t.f.push(l,.5),t.f.push(l,.5),t.f.push(l+.25,.25),t.f.push(l+.25,.5),s=Z(a,[3,3,0,1]),e=Z(a,[-3,3,0,1]),h=Z(a,[3,3,-8,1]),i=Z(a,[-3,3,-8,1]),o=Z(a,[0,-1,0,0]),t.a.push.apply(t.a,q(s)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(i)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.f.push(p,0),t.f.push(p+.25,0),t.f.push(p,.25),t.f.push(p,.25),t.f.push(p+.25,0),t.f.push(p+.25,.25),s=Z(a,[3,-3,0,1]),e=Z(a,[3,3,0,1]),h=Z(a,[3,-3,-8,1]),i=Z(a,[3,3,-8,1]),o=Z(a,[-1,0,0,0]),t.a.push.apply(t.a,q(s)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(h)),t.a.push.apply(t.a,q(e)),t.a.push.apply(t.a,q(i)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.b.push.apply(t.b,q(o)),t.f.push(l+.25,.5),t.f.push(l,.5),t.f.push(l+.25,.25),t.f.push(l+.25,.25),t.f.push(l,.5),t.f.push(l,.25)}function za(t){var a=game.l.track;t.la=[],t.ya=[];for(var s=0;8e3>s;++s){var e=6.28*Math.random(),i=6.28*Math.random(),n=850+100*Math.random();t.ya.push(350+n*Math.sin(e)*Math.cos(i),n*Math.sin(i),650+n*Math.cos(e)*Math.cos(i))}gl.bindBuffer(gl.ARRAY_BUFFER,t.Ya=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t.ya),gl.STATIC_DRAW),t.a=[],t.f=[],t.b=[],t.a.push(-250,250,3,-250,3,3,250,3,3,-250,250,3,250,3,3,250,250,3),t.b.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1),t.f.push(0,.5,0,.62,.25,.62,0,.5,.25,.62,.25,.5),t.a.push(-250,-3,0,-250,-250,0,250,-250,0,-250,-3,0,250,-250,0,250,-3,0),t.b.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1),t.f.push(0,.63,0,.75,.25,.75,0,.63,.25,.75,.25,.63),t.a.push(-250,3,3,-247,3,0,247,3,0,-250,3,3,247,3,0,250,3,3),t.b.push(0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0),t.f.push(0,.62,0,.63,.25,.63,0,.62,.25,.63,.25,.63),t.a.push(-247,-3,0,-250,-3,3,250,-3,3,-247,-3,0,250,-3,3,247,-3,0),t.b.push(0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0),t.f.push(0,.62,0,.63,.25,.63,0,.62,.25,.63,.25,.63),t.a.push(-247,3,0,-247,-3,0,-3,-3,0,-247,3,0,-3,-3,0,-3,3,0),t.b.push(0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0),t.f.push(0,.62,0,.63,.12,.63,0,.62,.12,.63,.12,.62),t.a.push(3,3,0,3,-3,0,247,-3,0,3,3,0,247,-3,0,247,3,0),t.b.push(0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0),t.f.push(.13,.62,.13,.63,.25,.63,.13,.62,.25,.63,.25,.62),t.a.push(247,3,0,247,-3,0,247,-3,-500,247,3,0,247,-3,-500,247,3,-500),t.b.push(1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0),t.f.push(0,.62,0,.63,.25,.63,0,.62,.25,.63,.25,.62),t.a.push(250,250,3,250,3,3,250,3,-500,250,250,3,250,3,-500,250,250,-500),t.b.push(1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0),t.f.push(0,.5,0,.625,.25,.625,0,.5,.25,.625,.25,.5),t.a.push(250,-3,0,250,-250,0,250,-250,-500,250,-3,0,250,-250,-500,250,-3,-500),t.b.push(1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0),t.f.push(0,.625,0,.75,.25,.75,0,.625,.25,.75,.25,.625);var l=0,p=n=0;for(i=e=s=0;i<a.length;++i){var o=a[i];s+=o[0],e+=o[1],t.la.push([l,n,p,s,e]);for(var r=Y(s,e,l,n,p),c=0;12>c;++c)ya(t,l,n,p,s,e,3&i?5&c?0:.75:.25,.25*o[2],c+i&7?0:.5),l=(p=h(Z(r,[0,0,-8*c-8,1]))).next().value,n=p.next().value,p=p.next().value;for(c=3;c<o.length;++c){var u=o[c];switch(u[0]){case 0:var f=t,g=u[1],b=u[2],y=-8*u[3],M=u[4],v=u[5],d=u[6];u=.25*u[7];var A=Z(r,[g,b,y,1]),x=Z(r,[g+M,b,y,1]),m=Z(r,[g+M,b+v,y,1]),R=Z(r,[g,b+v,y,1]),w=Z(r,[g,b,y-d,1]),S=Z(r,[g+M,b,y-d,1]);M=Z(r,[g+M,b+v,y-d,1]),g=Z(r,[g,b+v,y-d,1]),b=Z(r,[0,0,1,0]),y=Z(r,[1,0,0,0]),v=Z(r,[0,0,-1,0]),d=Z(r,[-1,0,0,0]);var F=Z(r,[0,1,1,0]),E=Z(r,[0,-1,0,0]);f.a.push.apply(f.a,q(A)),f.a.push.apply(f.a,q(x)),f.a.push.apply(f.a,q(R)),f.a.push.apply(f.a,q(R)),f.a.push.apply(f.a,q(x)),f.a.push.apply(f.a,q(m)),f.b.push.apply(f.b,q(b)),f.b.push.apply(f.b,q(b)),f.b.push.apply(f.b,q(b)),f.b.push.apply(f.b,q(b)),f.b.push.apply(f.b,q(b)),f.b.push.apply(f.b,q(b)),f.f.push(u,.75),f.f.push(u+.25,.75),f.f.push(u,1),f.f.push(u,1),f.f.push(u+.25,.75),f.f.push(u+.25,1),f.a.push.apply(f.a,q(x)),f.a.push.apply(f.a,q(S)),f.a.push.apply(f.a,q(m)),f.a.push.apply(f.a,q(m)),f.a.push.apply(f.a,q(S)),f.a.push.apply(f.a,q(M)),f.b.push.apply(f.b,q(y)),f.b.push.apply(f.b,q(y)),f.b.push.apply(f.b,q(y)),f.b.push.apply(f.b,q(y)),f.b.push.apply(f.b,q(y)),f.b.push.apply(f.b,q(y)),f.f.push(u,.75),f.f.push(u+.25,.75),f.f.push(u,1),f.f.push(u,1),f.f.push(u+.25,.75),f.f.push(u+.25,1),f.a.push.apply(f.a,q(S)),f.a.push.apply(f.a,q(w)),f.a.push.apply(f.a,q(M)),f.a.push.apply(f.a,q(M)),f.a.push.apply(f.a,q(w)),f.a.push.apply(f.a,q(g)),f.b.push.apply(f.b,q(v)),f.b.push.apply(f.b,q(v)),f.b.push.apply(f.b,q(v)),f.b.push.apply(f.b,q(v)),f.b.push.apply(f.b,q(v)),f.b.push.apply(f.b,q(v)),f.f.push(u,.75),f.f.push(u+.25,.75),f.f.push(u,1),f.f.push(u,1),f.f.push(u+.25,.75),f.f.push(u+.25,1),f.a.push.apply(f.a,q(w)),f.a.push.apply(f.a,q(A)),f.a.push.apply(f.a,q(g)),f.a.push.apply(f.a,q(g)),f.a.push.apply(f.a,q(A)),f.a.push.apply(f.a,q(R)),f.b.push.apply(f.b,q(d)),f.b.push.apply(f.b,q(d)),f.b.push.apply(f.b,q(d)),f.b.push.apply(f.b,q(d)),f.b.push.apply(f.b,q(d)),f.b.push.apply(f.b,q(d)),f.f.push(u,.75),f.f.push(u+.25,.75),f.f.push(u,1),f.f.push(u,1),f.f.push(u+.25,.75),f.f.push(u+.25,1),f.a.push.apply(f.a,q(A)),f.a.push.apply(f.a,q(w)),f.a.push.apply(f.a,q(x)),f.a.push.apply(f.a,q(x)),f.a.push.apply(f.a,q(w)),f.a.push.apply(f.a,q(S)),f.b.push.apply(f.b,q(F)),f.b.push.apply(f.b,q(F)),f.b.push.apply(f.b,q(F)),f.b.push.apply(f.b,q(F)),f.b.push.apply(f.b,q(F)),f.b.push.apply(f.b,q(F)),f.f.push(u,.75),f.f.push(u+.25,.75),f.f.push(u,1),f.f.push(u,1),f.f.push(u+.25,.75),f.f.push(u+.25,1),f.a.push.apply(f.a,q(R)),f.a.push.apply(f.a,q(m)),f.a.push.apply(f.a,q(g)),f.a.push.apply(f.a,q(g)),f.a.push.apply(f.a,q(m)),f.a.push.apply(f.a,q(M)),f.b.push.apply(f.b,q(E)),f.b.push.apply(f.b,q(E)),f.b.push.apply(f.b,q(E)),f.b.push.apply(f.b,q(E)),f.b.push.apply(f.b,q(E)),f.b.push.apply(f.b,q(E)),f.f.push(u,.75),f.f.push(u+.25,.75),f.f.push(u,1),f.f.push(u,1),f.f.push(u+.25,.75),f.f.push(u+.25,1)}}if(i<a.length-1){if(o=t,r=i,A=l,x=n,R=p,n=s,l=e,f=0!=(p=a[i+1][0])?32/p:0,u=0!=(c=a[i+1][1])?32/c:0,p/=8,c/=8,m=Y(n,l,A,x,R),.01>Math.abs(u)&&.01>Math.abs(f)){for(p=0;4>p;++p)ya(o,A,x,R,n,l,0,.25,.5),A=(r=h(Z(m,[0,0,-8*p-8,1]))).next().value,x=r.next().value,R=r.next().value;n=[A,x,R]}else{for(x=(m=h(Z(m,[u,f,0,1]))).next().value,A=m.next().value,m=m.next().value,o.la[r].push(x,A,m,-u,-f),R=Y(n,l,x,A,m),r=0;8>r;++r)w=Y(n+=p,l+=c,x,A,m),S=Z(R,[-u-3,-f-3,0,1]),M=Z(R,[3-u,-f-3,0,1]),g=Z(w,[-u-3,-f-3,0,1]),b=Z(w,[3-u,-f-3,0,1]),y=Z(R,[0,1,0,0]),v=Z(w,[0,1,0,0]),o.a.push.apply(o.a,q(S)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(b)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.f.push(0,.2),o.f.push(.25,.25),o.f.push(0,.25),o.f.push(0,.25),o.f.push(.25,.2),o.f.push(.25,.25),S=Z(R,[-u-3,3-f,0,1]),M=Z(R,[-u-3,-f-3,0,1]),g=Z(w,[-u-3,3-f,0,1]),b=Z(w,[-u-3,-f-3,0,1]),y=Z(R,[1,0,0,0]),v=Z(w,[1,0,0,0]),o.a.push.apply(o.a,q(S)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(b)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.f.push(.25,.25),o.f.push(.5,.25),o.f.push(.25,.5),o.f.push(.25,.5),o.f.push(.5,.25),o.f.push(.5,.5),S=Z(R,[3-u,3-f,0,1]),M=Z(R,[-u-3,3-f,0,1]),g=Z(w,[3-u,3-f,0,1]),b=Z(w,[-u-3,3-f,0,1]),y=Z(R,[0,-1,0,0]),v=Z(w,[0,-1,0,0]),o.a.push.apply(o.a,q(S)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(b)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.f.push(.75,0),o.f.push(1,0),o.f.push(.75,.25),o.f.push(.75,.25),o.f.push(1,0),o.f.push(1,.25),S=Z(R,[3-u,-f-3,0,1]),M=Z(R,[3-u,3-f,0,1]),g=Z(w,[3-u,-f-3,0,1]),b=Z(w,[3-u,3-f,0,1]),y=Z(R,[-1,0,0,0]),v=Z(w,[-1,0,0,0]),o.a.push.apply(o.a,q(S)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(g)),o.a.push.apply(o.a,q(M)),o.a.push.apply(o.a,q(b)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(v)),o.b.push.apply(o.b,q(y)),o.b.push.apply(o.b,q(v)),o.f.push(.5,.5),o.f.push(.25,.5),o.f.push(.5,.25),o.f.push(.5,.25),o.f.push(.25,.5),o.f.push(.25,.25),R=w;n=Z(R,[-u,-f,0,1])}l=(p=h(n)).next().value,n=p.next().value,p=p.next().value}}gl.bindBuffer(gl.ARRAY_BUFFER,t.$a=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t.a),gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,t.bb=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t.f),gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,t.ab=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t.b),gl.STATIC_DRAW)}function va(t,a,s){var e=Math.floor(a.step/16),i=a.step-16*e,n=t.la[e],l=t.la[e+1];if(e=.01>Math.abs(l[3]-n[3])&&.01>Math.abs(l[4]-n[4]),12>i||e){var p=Y(e=n[3],l=n[4],n[0],n[1],n[2]),o=h(Z(p,[a.x,a.y,8*-i,1]));i=o.next().value,n=o.next().value,o=o.next().value}else i=(o=h(Z(p=Y(e=n[3]+(l[3]-n[3])*(i-12)/4,l=n[4]+(l[4]-n[4])*(i-12)/4,n[5],n[6],n[7]),[a.x+n[8],a.y+n[9],0,1]))).next().value,n=o.next().value,o=o.next().value;if(s){for(var r=(s=h(t.S.l.N)).next();!r.done;r=s.next())if(r=r.value)8>r&&(centerInShipCoordinates=[[0,0,-.8,0],[-.6,-.4,0,0],[.6,-.4,0,0],[-.6,.4,0,0],[.6,.4,0,0]],r=Z(p,centerInShipCoordinates[7&r]),c=Z(p,[0,-1,0,0]),t.La.push([0,i+r[0],n+r[1],o+r[2],-e-a.u[1],l+a.u[0],a.J+.1*Math.random()-.05,a.F,c[0],c[1],c[2]]));else{r=Z(p,[0,0,-.8,0]);for(var c=0;1>c;++c){var u=Z(p,[1,0,0,0]),f=Z(p,[0,1,0,0]);t.R.unshift([0,i+r[0]+.6*Math.random()-.3,n+r[1]+.6*Math.random()-.3,o+r[2]+.6*Math.random()-.3,.1,u[0],u[1],u[2],f[0],f[1],f[2],0])}}wa(t,a.j,p,i,n,o)}return[i,n,o,e,l]}function wa(t,a,s,e,h,i){for(var n=[[0,0,-.8,0],[-.6,-.4,.2,0],[.6,-.4,.2,0],[-.6,.4,.2,0],[.6,.4,.2,0]],l=1;5>l;++l)if(a[l]){var p=Z(s,n[l]),o=Z(s,[1,0,0,0]),r=Z(s,[0,1,0,0]);t.R.unshift([0,e+p[0],h+p[1],i+p[2],.1,o[0],o[1],o[2],r[0],r[1],r[2],.5])}}function xa(t,a,s,e,h,i,n,l){var p=-i;l&&(gl.uniform3f(gl.getUniformLocation(t.i,"uL"),a,s,e),gl.uniform1i(gl.getUniformLocation(t.i,"uZ"),0),gl.uniform4f(gl.getUniformLocation(t.i,"uE"),a+-20*Math.sin(h)*Math.sin(p),s+-20*Math.sin(h)*Math.cos(p),e- -20*Math.cos(h),0)),gl.bindBuffer(gl.ARRAY_BUFFER,t.Va),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"a"),3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t.Xa),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"t"),2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t.Wa),gl.vertexAttribPointer(gl.getAttribLocation(t.i,"n"),3,gl.FLOAT,!1,0,0),l?gl.uniform4f(gl.getUniformLocation(t.i,"uC"),.2,.2,.2,.8):gl.uniform4f(gl.getUniformLocation(t.i,"uC"),.8,.8,.8,.6),p=Math.cos(0);var o=Math.sin(0),r=-h-n.F-n.u[1];h=i+n.J+n.u[0],i=Math.cos(r),r=Math.sin(r);var c=Math.cos(h);for(h=Math.sin(h),gl.uniformMatrix4fv(gl.getUniformLocation(t.i,"mX"),!1,new Float32Array([p*c-o*r*h,-o*i,p*h+o*r*c,0,o*c+p*r*h,p*i,o*h-p*r*c,0,-i*h,r,i*c,0,a,s,e,1])),t=l?gl.TRIANGLE_STRIP:gl.LINE_STRIP,a=0;108>a;++a)gl.drawArrays(t,42*a,42);if(n.j[1])for(a=108;148>a;++a)gl.drawArrays(t,42*a,42);if(n.j[2])for(a=148;188>a;++a)gl.drawArrays(t,42*a,42);if(n.j[3])for(a=188;228>a;++a)gl.drawArrays(t,42*a,42);if(n.j[4])for(a=228;268>a;++a)gl.drawArrays(t,42*a,42)}function P(t){this.controls=t,this.track=[[0,0,0],[0,.4,2,[0,-3,-3,6,.5,6,.2,2],[0,2.5,-3,6,.5,6,.2,2],[0,-3,-3,8,.5,6,.2,2],[0,2.5,-3,8,.5,6,.2,2]],[0,-.4,2,[0,-3,-3,6,.5,6,.2,2],[0,2.5,-3,6,.5,6,.2,2],[0,-3,-3,10,.5,6,.2,2],[0,2.5,-3,10,.5,6,.2,2]],[.3,0,0],[-.3,0,1,[0,-3,-3,6,.5,6,.2,2],[0,2.5,-3,6,.5,6,.2,2],[0,-3,-3,10,.5,6,.2,2],[0,2.5,-3,10,.5,6,.2,2]],[0,-.4,2,[0,-3,-3,2,.5,6,.2,2],[0,2.5,-3,2,.5,6,.2,2],[0,0,-3,6,.5,6,.2,2],[0,-3,-3,10,.5,6,.2,2],[0,2.5,-3,10,.5,6,.2,2]],[0,-.4,2,[0,-3,-3,2,.5,6,.2,2],[0,-1.4,-3,4,.5,6,.2,2],[0,-.2,-3,6,.5,6,.2,2],[0,1.2,-3,8,.5,6,.2,2],[0,2.5,-3,10,.5,6,.2,2]],[0,-.4,2,[0,-3,-3,2,.5,6,.2,2],[0,-1.4,-3,4,.5,6,.2,2],[0,-.2,-3,6,.5,6,.2,2],[0,1.2,-3,8,.5,6,.2,2],[0,2.5,-3,10,.5,6,.2,2]],[0,-.4,2,[0,-2.2,-3,4,.4,2,.2,1],[0,-.2,-3,4,.4,2,.2,1],[0,1.8,-3,4,.4,2,.2,1]],[.3,0,0],[0,0,1,[0,-2.2,-3,4,.4,2,.2,1],[0,-.2,-3,4,.4,2,.2,1],[0,1.8,-3,4,.4,2,.2,1]],[-.3,0,0],[0,-.4,3,[0,-2.2,-3,4,.4,4,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,4,.2,1],[0,-2.2,-1,7,.4,4,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,1.8,-1,7,.4,4,.2,1],[0,-2.2,-3,10,.4,4,.2,1],[0,-.2,-3,10,.4,4,.2,1],[0,1.8,-3,10,.4,4,.2,1]],[0,-.4,3,[0,-3,-3,2,.5,6,.2,2],[0,-1.4,-3,4,.5,6,.2,2],[0,-.2,-3,6,.5,6,.2,2],[0,1.2,-3,8,.5,6,.2,2],[0,2.5,-3,10,.5,6,.2,2]],[0,-.4,3,[0,-2.2,-3,4,.4,5,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,3,.2,1],[0,-2.2,0,7,.4,3,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,1.8,-2,7,.4,5,.2,1]],[0,-.4,3,[0,-2.2,-3,4,.4,4,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,4,.2,1],[0,-2.2,-1,7,.4,4,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,1.8,-1,7,.4,4,.2,1],[0,-2.2,-3,10,.4,4,.2,1],[0,-.2,-3,10,.4,4,.2,1],[0,1.8,-3,10,.4,4,.2,1]],[.3,0,1,[0,-3,-3,6,.5,6,.2,2],[0,2.5,-3,6,.5,6,.2,2],[0,-3,-3,8,.5,6,.2,2],[0,2.5,-3,8,.5,6,.2,2]],[-.3,0,0],[0,-.4,0],[0,-.4,1,[0,-3,-1.1,1,6,.2,4,0],[0,-3,.9,1,6,.2,4,0],[0,-1.1,-2.5,1,.2,5,4,0],[0,.9,-2.5,1,.2,5,4,0]],[0,-.4,2,[0,-3,-1.1,1,6,.2,20,0],[0,-3,.9,1,6,.2,20,0],[0,-1.1,-2.5,1,.2,5,20,0],[0,.9,-2.5,1,.2,5,20,0]],[0,-.4,2,[0,-2.6,-3,2,.2,.6,.2,2],[0,-.6,-3,4,.2,2.6,.2,2],[0,1.4,-3,6,.2,4.6,.2,2],[0,-.6,.4,8,.2,2.6,.2,2]],[0,-.4,2,[0,-3,-3,4,3.9,6,.2,0],[0,.9,-3,4,.2,6,10,0]],[0,-.4,1,[0,-3,-3,4,3.9,6,.2,0],[0,.9,-3,4,.2,6,10,0],[0,-1.1,-3,8,.2,6,10,0],[0,-.9,-3,8,3.9,6,.2,0]],[0,-.4,3,[0,-2.2,-3,4,.4,5,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,3,.2,1],[0,-2.2,0,7,.4,3,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,1.8,-2,7,.4,5,.2,1]],[0,-.4,3,[0,1.8,-3,4,.4,5,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,-2.2,-3,4,.4,3,.2,1],[0,1.8,0,7,.4,3,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,-2.2,-2,7,.4,5,.2,1]],[.3,0,3,[0,-2.2,-3,4,.4,5,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,3,.2,1],[0,-2.2,0,7,.4,3,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,1.8,-2,7,.4,5,.2,1]],[-.3,0,3,[0,1.8,-3,4,.4,5,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,-2.2,-3,4,.4,3,.2,1],[0,1.8,0,7,.4,3,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,-2.2,-2,7,.4,5,.2,1]],[0,.31,3,[0,-2.2,-3,4,.4,2,.2,1],[0,-.2,-3,4,.4,2,.2,1],[0,1.8,-3,4,.4,2,.2,1],[0,-2.2,1,5,.4,2,.2,1],[0,-.2,1,5,.4,2,.2,1],[0,1.8,1,5,.4,2,.2,1]],[0,.31,0],[0,.31,3,[0,-2.2,-3,4,.4,4,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,4,.2,1],[0,-2.2,-1,6,.4,4,.2,1],[0,-.2,-1,6,.4,4,.2,1],[0,1.8,-1,6,.4,4,.2,1],[0,-2.2,-3,8,.4,4,.2,1],[0,-.2,-3,8,.4,4,.2,1],[0,1.8,-3,8,.4,4,.2,1]],[0,.31,3,[0,-3,-2.2,2,6,.4,.2,1],[0,-3,-.2,4,6,.4,.2,1],[0,-3,1.8,6,6,.4,.2,1],[0,-3,-.2,8,6,.4,.2,1],[0,-3,-2.2,10,6,.4,.2,1],[0,-3,1.8,12,6,.4,.2,1]],[0,.31,3,[0,-3,-.2,2,6,.4,.2,1],[0,-3,-2.2,4,6,.4,.2,1],[0,-3,1.8,6,6,.4,.2,1],[0,-3,-2.2,8,6,.4,.2,1],[0,-3,1.8,10,6,.4,.2,1],[0,-3,-.2,12,6,.4,.2,1]],[0,-.31,1,[0,-3,-3,8,4,6,.2,0],[0,1,-1,8,2,4,.2,2],[0,1.1,-1.1,4,1.9,.2,32,0],[0,.9,-3,4,.2,2.1,32,0]],[0,-.31,3,[0,-3,-2.2,2,6,.4,.2,1],[0,-3,-.2,4,6,.4,.2,1],[0,-3,1.8,6,6,.4,.2,1],[0,-3,-.2,8,6,.4,.2,1],[0,-3,-2.2,10,6,.4,.2,1],[0,-3,1.8,12,6,.4,.2,1]],[0,-.31,3,[0,-3,-.2,2,6,.4,.2,1],[0,-3,-2.2,4,6,.4,.2,1],[0,-3,1.8,6,6,.4,.2,1],[0,-3,-2.2,8,6,.4,.2,1],[0,-3,1.8,10,6,.4,.2,1],[0,-3,-.2,12,6,.4,.2,1]],[0,-.31,3,[0,-3,-2.2,2,6,.4,.2,1],[0,-3,-.2,4,6,.4,.2,1],[0,-3,1.8,6,6,.4,.2,1],[0,-3,-.2,8,6,.4,.2,1],[0,-3,-2.2,10,6,.4,.2,1],[0,-3,1.8,12,6,.4,.2,1]],[0,-.31,1,[0,-3,-3,6,4,6,.2,0],[0,1,-1,6,2,4,.2,2],[0,1.1,-1.1,0,1.9,.2,64,0],[0,.9,-3,0,.2,2.1,64,0]],[.3,0,3,[0,-3,-2.2,2,6,.4,.2,1],[0,-3,-.2,4,6,.4,.2,1],[0,-3,1.8,6,6,.4,.2,1],[0,-3,-.2,8,6,.4,.2,1],[0,-3,-2.2,10,6,.4,.2,1],[0,-3,1.8,12,6,.4,.2,1]],[-.3,0,3],[0,-.31,3,[0,-2.2,-3,4,.4,5,.2,1],[0,-.2,-3,4,.4,4,.2,1],[0,1.8,-3,4,.4,3,.2,1],[0,-2.2,0,7,.4,3,.2,1],[0,-.2,-1,7,.4,4,.2,1],[0,1.8,-2,7,.4,5,.2,1]],[0,0,0,[0,-3,-3,0,6,6,.1,3]]],this.V=[],this.ma=[],this.K(0)}function na(t){if(0<t.ea&&--t.ea,t.fa=Math.min(t.fa+1,1e3),t.c.wa=Math.min(.5,Math.max(0,t.c.wa+(t.controls.P?.2:-.1))),t.c.speed=Math.max(.05,.9*(t.c.speed+.1*t.c.wa)),t.controls.da&&999<t.fa&&(t.O=200,t.fa=0,t.ea+=200),180==t.O&&(t.c=Object.assign({},t.ga[t.T]),t.c.j=t.c.j.slice(),t.c.u=t.c.u.slice()),t.controls.B.data.ja?(t.c.X=4*t.controls.Fa/window.innerWidth-2,t.c.Y=-4*t.controls.Ga/window.innerHeight+2):(t.c.X=Math.min(2,Math.max(-2,t.c.X+(t.controls.sa?-2:0)+(t.controls.ta?2:0))),t.c.Y=Math.min(2,Math.max(-2,t.c.Y+(t.controls.qa?-2:0)+(t.controls.ua?2:0))),H(t.controls)),t.c.j[1]+t.c.j[2]+t.c.j[3]+t.c.j[4]){var a=[.02,.06,.1][t.c.j[1]+t.c.j[3]],s=-[.02,.06,.1][t.c.j[2]+t.c.j[4]],e=[.02,.06,.1][t.c.j[1]+t.c.j[2]],h=-[.02,.06,.1][t.c.j[3]+t.c.j[4]],i=Math.abs(t.c.X-t.c.x);if(.05>i)t.c.J=t.c.X-t.c.x;else{var n=0<t.c.X-t.c.x?a:s;a=0<t.c.X-t.c.x?s:a,s=Math.abs(t.c.J/a);var l=(Math.abs(t.c.J)+Math.abs(n))/Math.abs(a);(l+1)*l*Math.abs(a)/2+.03<i?t.c.J+=n:(s+1)*s*Math.abs(a)/2-.03>i&&(t.c.J+=a)}.05>(i=Math.abs(t.c.Y-t.c.y))?t.c.F=t.c.Y-t.c.y:(n=0<t.c.Y-t.c.y?e:h,a=0<t.c.Y-t.c.y?h:e,s=Math.abs(t.c.F/a),((l=(Math.abs(t.c.F)+Math.abs(n))/Math.abs(a))+1)*l*Math.abs(a)/2+.03<i?t.c.F+=n:(s+1)*s*Math.abs(a)/2-.03>i&&(t.c.F+=a))}else t.c.F-=.001;t.c.step+=t.c.speed,t.c.x+=t.c.J,t.c.y+=t.c.F,t.c.u[0]*=.85,t.c.u[1]*=.85,t.ga[t.T]=Object.assign({},t.c),t.ga[t.T].j=t.c.j.slice(),t.ga[t.T].u=t.c.u.slice(),t.T=(t.T+1)%250,t.O=Math.max(0,t.O-1)}function oa(t){var a=[[-.5,.5,-.2,.2,-.16,1],[-.75,-.45,-.55,-.25,-.4,.3],[.45,.75,-.55,-.25,-.4,.3],[-.75,-.45,.25,.55,-.4,.3],[.45,.75,.25,.55,-.4,.3]],s=t.c.step>>4,e=t.c.step-16*s;s=t.track[s];for(var h=0;5>h;++h)if(t.c.j[h]){var i=a[h];i=[t.c.x+i[0],t.c.x+i[1],t.c.y+i[2],t.c.y+i[3],8*e+i[4],8*e+i[5]];for(var n=0,l=[0,0,0],p=2;p<s.length;++p){var o=s[p];if(i[0]<o[1]+o[4]&&i[1]>o[1]&&i[2]<o[2]+o[5]&&i[3]>o[2]&&i[4]<8*o[3]+o[6]&&i[5]>8*o[3])for(var r=[0,4536,6216,7896,9576],c=[420,840,840,840,840],u=r[h];u<r[h]+c[h];++u)t.c.x+t.V[3*u]>o[1]&&t.c.x+t.V[3*u]<o[1]+o[4]&&t.c.y+t.V[3*u+1]>o[2]&&t.c.y+t.V[3*u+1]<o[2]+o[5]&&8*e-t.V[3*u+2]>8*o[3]&&8*e-t.V[3*u+2]<8*o[3]+o[6]&&(++n,l[0]+=t.ma[3*u],l[1]+=t.ma[3*u+1],l[2]+=t.ma[3*u+2])}0<n&&(l=t.o(l),50<n||-.5>l[2]?(t.N.push(h),t.c.j[h]=0,t.c.u[0]+=.5*[0,-1,1,-1,1][h],t.c.u[1]+=.5*[0,-1,-1,1,1][h]):(t.N.push(h+8),t.c.J-=.01*l[0],t.c.F-=.01*l[1],t.c.u[0]+=.05*[0,-1,1,-1,1][h],t.c.u[1]+=.05*[0,-1,-1,1,1][h]))}(2.7<Math.abs(t.c.x)||2.8<Math.abs(t.c.y))&&(t.N.push(0),t.c.y=Math.max(t.c.y,-2.95))}function ra(t){return t.c.step>16*(t.track.length-1)}D.prototype={ba:function(t){this.B.ba(t)}},K.prototype={U:function(){this.xa.U(),this.m.U()}},O.prototype={K:function(){this.done=!1,this.s=this.L=0;var t=this.controls;H(t),I(t)},Sa:function(){return!0},ha:function(){return this.D.ha(),!1},Za:function(){return this.D.za(),!1},ba:function(t){return this.controls.ba(0==t),!0}},ta.prototype={U:function(){var t=window.innerWidth,a=window.innerHeight;this.canvas.height=this.context.height=a,this.canvas.width=this.context.width=t,this.context.translate(t>>1,a>>1),this.scale=.1*Math.min(.5*t,a),this.context.lineJoin="bevel",this.context.lineWidth=4,this.context.textAlign="center"},clear:function(){this.context.clearRect(-this.context.width>>1,-this.context.height>>1,this.context.width,this.context.height)},endOffset:function(){this.context.restore()}},F.prototype={za:function(){this.data.W=!this.data.W,X(this)},ha:function(){this.data.ka=!this.data.ka,X(this)},ba:function(t){this.data.ja=t,X(this)}},N.prototype={K:function(){try{var t=new Audio("").canPlayType("audio/wav");this.Z="probably"==t||"maybe"==t}catch(t){this.Z=!1}try{this.na=!1,"undefined"!=typeof SpeechSynthesisUtterance&&void 0!==window.speechSynthesis&&(this.na=!0)}catch(t){this.na=!1}if(this.Z){t="RIFF_oO_WAVEfmt "+atob("EAAAAAEAAQAcRwAAHEcAAAEACABkYXRh");for(var a="",s=[],e=0;252>e;++e)s[e]=Math.pow(e,2.2)/11%1,a+=String.fromCharCode(127*s[e]+127);for(e=252;3e4>e;++e){var h=.9*s[e%252]+.1*s[(e+1)%252];s[e%252]=h,a+=String.fromCharCode(Math.min(255,Math.max(0,127*h+127)))}for(this.pa=new Audio("data:audio/wav;base64,"+btoa(t+a)),a="",e=0;24576>e;++e)s=150>e?25:200>e?25+2*(e-150):320>e?125:125*Math.exp((320-e)/500),a+=String.fromCharCode(Math.floor(128+.5*s*((0<Math.sin(e*s*Math.PI/5e3)?1:-1)+(56.32*e&255)/255)));this.oa=new Audio("data:audio/wav;base64,"+btoa(t+a))}},za:function(){this.eb&&(this.B.za(),this.B.data.W||window.speechSynthesis.cancel())},ha:function(){this.Z&&(this.B.ha(),this.B.data.ka||(this.pa.pause(),this.oa.pause()))},speak:function(t,a,s){this.na&&this.B.data.W&&(window.speechSynthesis.cancel(),(s=new SpeechSynthesisUtterance(s)).pitch=t,s.rate=.9+a/2,s.lang="en",window.speechSynthesis.speak(s))}},ua.prototype={K:function(){var t,a,s,e;for(gl.clearColor(0,0,0,1),gl.clearDepth(1),gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL),gl.shaderSource(t=gl.createShader(gl.VERTEX_SHADER),"attribute vec3 a;attribute vec2 t;attribute vec3 n;uniform mat4 mX,mP;varying vec2 vT;varying vec4 vP;varying vec3 vN;void main(){vN=(mX*vec4(n,0.)).rgb,vP=mX*vec4(a,1.),gl_Position=mP*vP,vT=t,gl_PointSize=1.;}"),gl.compileShader(t),gl.shaderSource(a=gl.createShader(gl.FRAGMENT_SHADER),"\n\t\t\t#ifdef GL_ES\n\t\t\tprecision lowp float;\n\t\t\t#endif\n\n\t\t\tvarying lowp vec2 vT;\n\t\t\tvarying lowp vec3 vN;\n\t\t\tvarying lowp vec4 vP;\n\t\t\tuniform sampler2D uS;\n\t\t\tuniform vec4 uE;\n\t\t\tuniform vec4 uC;\n\t\t\tuniform vec3 uL;\n\t\t\tvoid main(void) {\n\t\t\t\tlowp vec3 n = normalize(vN);\n\t\t\t\tlowp vec4 tC = texture2D(uS, vec2(vT.s, vT.t));\n\t\t\t\ttC = mix(vec4(uC.rgb, 1.0), tC, tC.a);\n\t\t\t\tif (uC.a==.6) {\n\t\t\t\t\ttC = vec4(uC.rgb, 1.0);\n\t\t\t\t}\n\t\t\t\tlowp vec3 lightDir = normalize(uL-vP.xyz);\n\t\t\t\tlowp vec3 halfDir = normalize(lightDir+normalize(uE.xyz-vP.xyz));\n\t\t\t\tfloat diffuse = 0.2+dot(n, lightDir)+2./distance(vec3(718.0, 1.0, 1315.0), vP.xyz);\n\t\t\t\tfloat specular = pow(max(0.0, dot(halfDir, n)), 2.0);\n\t\t\t\tif (uC.a==.7) {\n\t\t\t\t\tdiffuse = 1.;\n\t\t\t\t}\n\t\t\t\tgl_FragColor = vec4 (uC.a*specular+diffuse*tC.rgb, tC.a);\n\t\t\t}"),gl.compileShader(a),gl.shaderSource(s=gl.createShader(gl.VERTEX_SHADER),"attribute vec3 a;attribute vec2 t;attribute vec3 c;uniform mat4 mX,mP;varying vec2 vT;varying vec4 vP;varying vec3 vC;void main(){vC=c,vP=mX*vec4(a,1.),gl_Position=mP*vP,vT=t;}"),gl.compileShader(s),gl.shaderSource(e=gl.createShader(gl.FRAGMENT_SHADER),"\n\t\t\t#ifdef GL_ES\n\t\t\tprecision lowp float;\n\t\t\t#endif\n\n\t\t\tvarying lowp vec2 vT;\n\t\t\tvarying lowp vec4 vP;\n\t\t\tvarying lowp vec3 vC;\n\t\t\tvoid main(void) {\n\t\t\t\tfloat tI = 1.0-vT.s*vT.s-vT.t*vT.t;\n\t\t\t\tgl_FragColor = vec4 (vC.rgb, 0.8*tI);\n\t\t\t}"),gl.compileShader(e),gl.attachShader(this.i=gl.createProgram(),t),gl.attachShader(this.i,a),gl.linkProgram(this.i),gl.useProgram(this.i),gl.enableVertexAttribArray(gl.getAttribLocation(this.i,"a")),gl.enableVertexAttribArray(gl.getAttribLocation(this.i,"t")),gl.enableVertexAttribArray(gl.getAttribLocation(this.i,"n")),gl.attachShader(this.H=gl.createProgram(),s),gl.attachShader(this.H,e),gl.linkProgram(this.H),gl.useProgram(this.H),gl.enableVertexAttribArray(gl.getAttribLocation(this.H,"a")),gl.enableVertexAttribArray(gl.getAttribLocation(this.H,"t")),gl.enableVertexAttribArray(gl.getAttribLocation(this.H,"c")),gl.useProgram(this.i),this.h=[],this.G=[],this.g=[],t=0;.95>t;t+=.1){var h=t+.1;for(this.h.push(.5*t,0,t*t-1),this.h.push(.5*h,0,h*h-1),this.g.push.apply(this.g,q(this.o([.4*t,0,-.1]))),this.g.push.apply(this.g,q(this.o([.4*h,0,-.1]))),this.G.push(.75,.5+.25*t,.75,.5+.25*h),a=1;21>a;++a){var i=a*Math.PI/10;this.h.push(.5*t*Math.cos(i),.2*t*Math.sin(i),t*t-1),this.h.push(.5*h*Math.cos(i),.2*h*Math.sin(i),h*h-1),this.g.push.apply(this.g,q(this.o([.4*t*Math.cos(i),1*t*Math.sin(i),-.1]))),this.g.push.apply(this.g,q(this.o([.4*h*Math.cos(i),1*h*Math.sin(i),-.1]))),this.G.push(.75+.25*a/20,.5+.25*t,.75+.25*a/20,.5+.25*h)}}for(t=0;.95>t;t+=.1)for(h=t+.1,this.h.push(.5*t,0,.16*(1-t*t)),this.h.push(.5*h,0,.16*(1-h*h)),this.g.push.apply(this.g,q(this.o([.4*t,0,.2*.2]))),this.g.push.apply(this.g,q(this.o([.4*h,0,.2*.2]))),this.G.push(.75,.7+.05*t,.75,.7+.05*h),a=1;21>a;++a)i=a*Math.PI/10,this.h.push(.5*t*Math.cos(i),.2*t*Math.sin(i),.16*(1-t*t)),this.h.push(.5*h*Math.cos(i),.2*h*Math.sin(i),.16*(1-h*h)),this.g.push.apply(this.g,q(this.o([.4*t*Math.cos(i),1*t*Math.sin(i),.2*.2]))),this.g.push.apply(this.g,q(this.o([.4*h*Math.cos(i),1*h*Math.sin(i),.2*.2]))),this.G.push(.75+.25*a/20,.7+.05*t,.75+.25*a/20,.7+.05*h);for(s=0;4>s;++s){var n=[-.08,-.08,.08,.08][s],l=1.5*(e=[-.2,.2,-.2,.2][s]),p=2.7*n;for(t=0;1.05>t;t+=.1){var o=.5*t,r=.5*(h=t+.1);for(a=0;20>a;++a)i=1.78*a/19,this.h.push(e+t*l,n+t*p+.04*Math.sin(i),-.5+o-.04*Math.cos(i)),this.h.push(e+h*l,n+h*p+.04*Math.sin(i),-.5+r-.04*Math.cos(i)),this.g.push.apply(this.g,q(this.o([-p,l+.04*Math.sin(i),.04*Math.cos(i)]))),this.g.push.apply(this.g,q(this.o([-p,l+.04*Math.sin(i),.04*Math.cos(i)]))),this.G.push(.5+.2*t,.5+.25*a/20,.5+.2*h,.5+.25*a/20);for(this.h.push(e+t*l,n+t*p,-.5+o+.188),this.h.push(e+h*l,n+h*p,-.5+r+.188),this.g.push.apply(this.g,q(this.o([-p,l+.04*Math.sin(i),.04*Math.cos(i)]))),this.g.push.apply(this.g,q(this.o([-p,l+.04*Math.sin(i),.04*Math.cos(i)]))),this.G.push(.5+.2*t,.5,.5+.2*h,.5),a=0;20>a;++a)i=1.78*a/19,this.h.push(e+t*l,n+t*p-.04*Math.sin(i),-.5+o-.04*Math.cos(i)),this.h.push(e+h*l,n+h*p-.04*Math.sin(i),-.5+r-.04*Math.cos(i)),this.g.push.apply(this.g,q(this.o([-p,l-.04*Math.sin(i),.04*Math.cos(i)]))),this.g.push.apply(this.g,q(this.o([-p,l-.04*Math.sin(i),.04*Math.cos(i)]))),this.G.push(.5+.2*t,.5+.05*a/20,.5+.2*h,.5+.05*a/20);this.h.push(e+t*l,n+t*p,-.5+o+.188),this.h.push(e+h*l,n+h*p,-.5+r+.188),this.g.push.apply(this.g,q(this.o([-p,l-.04*Math.sin(i),.04*Math.cos(i)]))),this.g.push.apply(this.g,q(this.o([-p,l-.04*Math.sin(i),.04*Math.cos(i)]))),this.G.push(.5+.2*t,.5,.5+.2*h,.5)}}for(s=0;5>s;++s)for(e=[-.6,.6,-.6,.6,0][s],n=[-.4,-.4,.4,.4,0][s],a=0;20>a;++a){for(i=a*Math.PI/10,l=(a+1)*Math.PI/10,this.h.push(e+.1*Math.cos(i),n+.1*Math.sin(i),-.4),this.h.push(e+.1*Math.cos(l),n+.1*Math.sin(l),-.4),this.g.push(0,0,-1),this.g.push(0,0,-1),this.G.push(.5,.5+.25*a/20,.5,.5+.25*(a+1)/20),t=.05;1.02>t;t+=.05)p=.32>t?.05*Math.sin(t*Math.PI/.6):.05*Math.sin((1-t)*Math.PI/1.4),this.h.push(e+(.1+p)*Math.cos(i),n+(.1+p)*Math.sin(i),.7*t-.4),this.h.push(e+(.1+p)*Math.cos(l),n+(.1+p)*Math.sin(l),.7*t-.4),this.g.push.apply(this.g,q(this.o([Math.cos(i),Math.sin(i),.45>t?Math.cos(t*Math.PI/.8):Math.sin((1-t)*Math.PI/1.2)]))),this.g.push.apply(this.g,q(this.o([Math.cos(l),Math.sin(l),.45>t?Math.cos(t*Math.PI/.8):Math.sin((1-t)*Math.PI/1.2)]))),this.G.push(.5+.25*a/20,.5+.25*t,.5+.25*a/20,.5+.25*h);for(this.h.push(e+.1*Math.cos(i),n+.1*Math.sin(i),-.4),this.h.push(e+.1*Math.cos(l),n+.1*Math.sin(l),-.4),this.g.push(0,0,-1),this.g.push(0,0,-1),this.G.push(.5,.5+.25*a/20,.5,.5+.25*(a+1)/20),t=.05;1.02>t;t+=.05)p=.32>t?.05*Math.sin(t*Math.PI/.6):.05*Math.sin((1-t)*Math.PI/1.4),this.h.push(e+(.1-p)*Math.cos(i),n+(.1-p)*Math.sin(i),.7*t-.4),this.h.push(e+(.1-p)*Math.cos(l),n+(.1-p)*Math.sin(l),.7*t-.4),this.g.push.apply(this.g,q(this.o([-Math.cos(i),-Math.sin(i),.45>t?Math.cos(t*Math.PI/.8):Math.sin((1-t)*Math.PI/1.2)]))),this.g.push.apply(this.g,q(this.o([-Math.cos(l),-Math.sin(l),.45>t?Math.cos(t*Math.PI/.8):Math.sin((1-t)*Math.PI/1.2)]))),this.G.push(.5+.25*a/20,.5+.25*t,.5+.25*a/20,.5+.25*h)}for(gl.bindBuffer(gl.ARRAY_BUFFER,this.Va=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.h),gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,this.Xa=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.G),gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,this.Wa=gl.createBuffer()),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.g),gl.STATIC_DRAW),h=this.S.l,i=this.G,h.V=this.h,h.ma=i,this.A=new Float32Array(7200),this.Da=new Float32Array(4800),h=0;4800>h;++h)this.Da[h]=[-1,1,-1,-1,1,-1,-1,1,1,-1,1,1][h%12];this.w=new Float32Array(7200),this.Qa=gl.createBuffer(),this.Ra=gl.createBuffer(),this.Pa=gl.createBuffer(),this.reset()},reset:function(){this.R=[],this.La=[]},U:function(){var t=window.innerWidth,a=window.innerHeight;this.canvas.height=gl.height=a,this.Ja=this.canvas.width=gl.width=t,this.Ia=a},o:function(t){var a=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/a,t[1]/a,t[2]/a]}},P.prototype={K:function(t){this.c={x:0,y:0,speed:.05,X:0,Y:0,J:0,F:0,wa:0,step:0,cb:5,j:[1,1,1,1,1],u:[0,0]},this.ga=Array(250),this.T=0,this.ea=this.Ka=50*[300,240,180,150][t],this.fa=this.O=0,this.N=[]},o:function(t){var a=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/a,t[1]/a,t[2]/a]}},window.onload=function(){controls=new D,game=new K,game.D.K();var t=new ua,a=new ta;t.K(),gl.bindTexture(gl.TEXTURE_2D,gl.createTexture()),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,document.getElementById("m")),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),za(t),window.addEventListener("resize",function(){game.U()}),window.addEventListener("keydown",function(t){return!J(t,!0)}),window.addEventListener("keyup",function(t){return!J(t,!1)}),window.addEventListener("mousedown",function(t){var a=controls;return 2==t.button?a.da=!0:a.P=!0,!0}),window.addEventListener("mouseup",function(t){var a=controls;return 2==t.button?a.da=!1:a.P=!1,!0}),window.addEventListener("mousemove",function(t){var a=controls;return a.Fa=t.clientX,a.Ga=t.clientY,!0}),sa(t,a),la()};