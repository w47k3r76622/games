<!DOCTYPE html><html><head><title>Lost Beacons</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.01"><style>#t,body,canvas{width:100%}#t,body,canvas,html{height:100%}*{margin:0}body{background-color:#000}#t{display:table}#c{display:table-cell;vertical-align:middle}#cc{margin:auto;outline:#fff solid 1px}canvas{display:block}</style></head><body><div id="t"><div id="c"><div id="cc"><canvas></canvas></div></div></div><script>function b_(t,e=1){return round(t/e)*e}function cD(t,e=1){return~~(t/e)*e}function A(t,e){return bK(t.x,t.y,e.x,e.y)}function bK(t,e,i,s){return sqrt(pow(t-i,2)+pow(e-s,2))}function _l(t,e,i){return t<=e&&e<=i||t>=e&&e>=i}function bI(t,e,i){return e<t?t:e>i?i:e}function ff(t){for(;t<-PI;)t+=2*PI;for(;t>PI;)t-=2*PI;return t}function dR(t,e,i,s){return t/s*i+e}function bG(t,e,i,s){return-i*(t/=s)*(t-2)+e}function dP(t,e,i,s){return i*(t/=s)*t*t*t*t+e}function dF(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e}function S(t,e,i,s,h,l,r,n){var a={o:t,p:e,a:i,b:s,d:h,l:l||0,f:r||dR,e:n,t:0,__:function(t){a.l>0?(a.l-=t,a.o[a.p]=a.a):(a.t=min(a.d,a.t+t),a.o[a.p]=a.f(a.t,a.a,a.b-a.a,a.d),a.t==a.d&&(a.e&&a.e(),W._d(a)))}};W.add(a,1)}function T(t,e){return random()*((t||1)-~~e)+~~e}function aE(t){return t[~~(random()*t.length)]}function aB(t,e){return atan2(e.y-t.y,e.x-t.x)}function eO(){let t=[];for(let e=0;e<256;e++)t.push(~~(256*random()));t.forEach((t,e)=>{ad[e]=ad[e+256]=t,a_[e]=a_[e+256]=eP[t%12]})}function cz(t){return t*t*t*(t*(6*t-15)+10)}function bD(t,e,i){return(1-i)*t+i*e}function eN(t,e){let i=floor(t),s=floor(e);t-=i,e-=s,i&=255,s&=255;let h=cz(t);return bD(bD(a_[i+ad[s]].aD(t,e),a_[i+1+ad[s]].aD(t-1,e),h),bD(a_[i+ad[s+1]].aD(t,e-1),a_[i+1+ad[s+1]].aD(t-1,e-1),h),cz(e))}function dp(t){for(t=""+t;t.length<2;)t="0"+t;return t}function dl(t){return t=~~t,dp(~~(t/60))+":"+dp(t%60)}function aA(t,e,i,s){let h;return W.add(h={s:t,c:e},6),h[s?"_c":"_a"]=(()=>{V.eK(h.x,h.y,h.s)&&(R.fillStyle=h.c,fr(h.x-h.s/2,h.y-h.s/2,h.s,h.s))}),i.forEach((t,e)=>{let i=[h].concat(t);e||(i[7]=(()=>W._d(h))),S.apply(0,i)}),h}function by(t,e,i){var s=D.createElement("canvas");return s.width=t,s.height=e,i(s.getContext("2d"),s)||s}function aO(t,e,i,s,h,l){l&&aO(t,e,i+s,s,"#000");for(var r=0;r<t.length;r++){let l=eD(t.charAt(r),s,h);R.drawImage(l,e,i),e+=l.width+s}}function _o(t,e,i,s,h,l){return aO(t,e-s*bo(t)/2,i,s,h,l)}function bo(t){t=t||"";let e=0;for(var i=0;i<t.length;i++)e+=bv[t.charAt(i)][0].length+1;return e-1}function eD(t,e,i){let s=t+e+i,h=bv[t];return bn[s]=bn[s]||by(h[0].length*e,h.length*e,function(t){t.fillStyle=i,h.forEach((i,s)=>{i.forEach((i,h)=>{i&&t.fr(h*e,s*e,e,e)})})}),bn[s]}function cC(t,e,i){O(()=>{translate(t,e),R.fillStyle="#000",fr(-1,0,2,-40),R.fillStyle="#fff",R.strokeStyle="#000",beginPath(),rect(-15,-20,30,40),rect(-15,-20,15,15),rect(0,-20,15,15),fill(),stroke(),G.t%.8>.4&&(R.fillStyle="#f00",beginPath(),1==i?rect(-15,-20,15,15):rect(0,-20,15,15),fill(),stroke())})}function dS(t){return t.map(t=>t.slice())}function fk(t,e){return t.reduce((t,i)=>t+i[e],0)/t.length}function aZ(t,e,i,s){return new cG([{x:t[0].x,y:t[0].y,z:e},{x:t[1].x,y:t[1].y,z:e},{x:t[1].x,y:t[1].y,z:e+50},{x:t[0].x,y:t[0].y,z:e+50}],i,s)}function dU(t,e,i,s,h,l){return[new cG([{x:t,y:e,z:h+50},{x:t,y:e+s,z:h+50},{x:t+i,y:e+s,z:h+50},{x:t+i,y:e,z:h+50}],"#146",function(){return 1}),aZ([{x:t,y:e},{x:t+i,y:e}],h,l,function(t){return t.y<e}),aZ([{x:t,y:e+s},{x:t+i,y:e+s}],h,l,function(t){return t.y>e+s}),aZ([{x:t,y:e},{x:t,y:e+s}],h,l,function(e){return e.x<t}),aZ([{x:t+i,y:e},{x:t+i,y:e+s}],h,l,function(e){return e.x>t+i})]}function cS(t,e,i){for(let s=0;s<e;s++){let e=[],s=[];for(let h=0;h<t[0].length;h++)e.push(i),s.push(i);t.unshift(e),t.push(s)}return t.forEach(t=>{for(let s=0;s<e;s++)t.push(i),t.unshift(i)}),t}function ep(t,e){eO();let i=[];for(let s=0;s<t;s++){i.push([]);for(let t=0;t<e;t++){let e=pow(abs(eN(s/5,t/5)),2);i[s][t]=~~(e/.2)}}return cS(cS(i,3,0),5,1)}function cq(t){let e=C.getBoundingClientRect();return{x:1e3*(t.pageX-e.left)/e.width,y:1e3*(t.pageY-e.top)/e.height}}function cR(){let t=(U.x-(1e3-G.ag-20))/G.ag,e=(U.y-(1e3-G.ah-20))/G.ah;_l(0,t,1)&&_l(0,e,1)&&(V.x=t*W.width-500,V.y=e*W.height-500)}window.F=function(t){return t.split(",").map(t=>t.split("").map(t=>parseInt(t)))};var D=document,w=window,ch=setTimeout,C,R,G,V,W,eX=navigator.userAgent.match(/andro|ipho|ipa|ipo|windows ph/i);onresize=(()=>{var t,e,i=innerWidth,s=innerHeight,h=i/s,l=D.querySelector("#cc").style;h<=1?e=(t=i)/1:t=1*(e=s),l.width=t+"px",l.height=e+"px"}),Array.prototype._d=function(t){let e=this.indexOf(t);if(e>=0)return this.splice(e,1),1};class _n{constructor(t,e,i){this.x=t,this.y=e,this.z=i}aD(t,e){return this.x*t+this.y*e}}let eP=[new _n(1,1,0),new _n(-1,1,0),new _n(1,-1,0),new _n(-1,-1,0),new _n(1,0,1),new _n(-1,0,1),new _n(1,0,-1),new _n(-1,0,-1),new _n(0,1,1),new _n(0,-1,1),new _n(0,1,-1),new _n(0,-1,-1)],ad=new Array(512),a_=new Array(512),bC=(t,e)=>{let i=4;for(;i--;)O((i=>()=>{translate(cos(i)*t,sin(i)*t),rotate(i+3*PI/4),fr(0,0,1,e),fr(0,0,e,1)})(i/4*PI*2+PI/4))};var bv={a:F("111,101,111,101,101"),b:F("111,101,110,101,111"),c:F("111,100,100,100,111"),d:F("110,101,101,101,111"),e:F("111,100,110,100,111"),f:F("111,100,110,100,100"),g:F("111,100,100,101,111"),h:F("101,101,111,101,101"),i:F("111,010,010,010,111"),j:[[0,0,1],[0,0,1],[0,0,1],[1,0,1],[1,1,1]],k:F("101,101,110,101,101"),l:F("100,100,100,100,111"),m:F("101,111,101,101,101"),n:F("111,101,101,101,101"),o:F("111,101,101,101,111"),p:F("111,101,111,100,100"),q:F("111,101,101,111,001"),r:F("111,101,110,101,101"),s:F("111,100,111,001,111"),t:F("111,010,010,010,010"),u:F("101,101,101,101,111"),v:F("101,101,101,101,010"),w:F("10101,10101,10101,10101,01010"),x:F("101,101,010,101,101"),y:F("101,101,111,010,010"),".":F("0,0,0,0,1")," ":F("00,00,00,00,00"),"-":[[0,0],[0,0],[1,1],[0,0],[0,0]],":":F("0,1,,1,"),"?":F("111,111,111,111,111"),"!":F("01010,11111,11111,01110,00100"),"/":F("001,001,010,100,100"),1:F("110,010,010,010,111"),2:F("111,001,111,100,111"),3:F("111,001,011,001,111"),4:F("100,100,101,111,001"),5:F("111,100,110,001,110"),6:F("111,100,111,101,111"),7:F("111,001,010,010,010"),8:F("111,101,111,101,111"),9:F("111,101,111,001,111"),0:F("111,101,101,101,111"),"(":F("01,1,1,1,01"),")":F("10,01,01,01,1"),"#":F("01010,11111,01010,11111,01010")};let bn={};class dn{constructor(t){this.j=t,this.bg=0}_X(t,e,i=4){t!=this.label&&(this.ey=G.t),this.label=t,this.N=e,this.bg=i}clear(){this.bg=0}_c(){let t=G.t-(this.ey||-99),e=400;if(t>this.bg||A(this.j,V.B)<e)return;let i=aB(V.B,this.j),s=2*bo(this.label),h=min(V.B.x-s/2,V.B.x-abs(cos(i)*e)),l=max(V.B.x+s/2,V.B.x+abs(cos(i)*e)),r=min(V.B.x-s/2,V.B.y-abs(sin(i)*e)),n=max(V.B.y+s/2,V.B.y+abs(sin(i)*e)),a=bI(h,V.B.x+cos(i)*e,l-s),f=bI(r,V.B.y+sin(i)*e,n-10),_=this.label.substr(0,~~(30*t));t%.5>.25&&(_+="?"),aO(_,a,f,2,this.N,1),translate(V.B.x+420*cos(i),V.B.y+420*sin(i)),rotate(i),R.fillStyle=this.N,beginPath(),moveTo(0,0),lineTo(-10,-10),lineTo(-10,10),fill()}}class cN{constructor(e,i){this._H=[0].concat(e),this._G=i,S(this,"eo",0,100,.25,t,null,()=>this.cI())}cI(){this._H.shift(),this._H.length?(S(this,"textXOffset",0,1e3,.5,2.5,dP,()=>this.cI()),S(this,"textXOffset",-1e3,0,.5,0,dF)):S(this,"eo",100,0,.25,0,null,this._G)}_c(){O(()=>{translate(V.x,V.y),R.fillStyle="#fff",fr(0,(1e3-this.eo)/2,1e3,this.eo),_o(this._H[0]||"",500+this.textXOffset,480,8,"#000")})}}class em{_c(){translate(this.x,this.y);let t=PI/2-PI/4;R.fillStyle="#fff",R.strokeStyle="#000",beginPath(),moveTo(0,0),lineTo(0,20),lineTo(20*cos(t),20*sin(t)),closePath(),fill(),stroke()}}class el{constructor(t){this.Z=new em,this.ej=1,this._V=0,S(this,"_V",0,1,.2,0,null,()=>{S(this.Z,"x",0,180,1,1),S(this.Z,"y",0,180,1,1,null,()=>{S(this,"ej",1,0,.1,.2,null,()=>{S(this,"_V",1,0,.2,.5,null,()=>{ch(t,2e3)})})})})}_c(){R.globalAlpha=this._V,translate(this.x,this.y),O(()=>this.Z._c()),R.globalAlpha*=this.ej,R.strokeStyle="#0f0",R.fillStyle="rgba(0,255,0,0.1)",R.lineWidth=1,fr(0,0,this.Z.x,this.Z.y),strokeRect(0,0,this.Z.x,this.Z.y)}}class cu{constructor(){this.E=0,this.ap=0,this._q=1,this.a$(new aJ),this.cm=T(.2,1),this._p=new dn(this)}get _K(){return!this._q}eh(t){(this._q-=t)<.1&&(this._q=0),this.g==L&&this._p._X("unit under attack",P.q);let e=1;if(this._K){W._d(this),e=20;let t=20;for(;t--;){let t=T(3,4),e=aA(0,this.g._u,[["s",T(4,8),0,.1,t]]);e.x=this.x+T(-15,15),e.y=this.y+T(-15,15)}}let i=T(3,4),s=aA(0,this.g._u,[["s",T(4,8),0,.1,i]]);for(s.x=this.x+T(-15,15),s.y=this.y+T(-15,15);e--;){let t=T(.6,1);aA(0,this.g._u,[["s",10,0,t],["x",this.x+T(-10,10),this.x+T(-50,50),t],["y",this.y+T(-10,10),this.y+T(-50,50),t]])}}ed(t){this._K||(this._q=min(1,this._q+t))}ec(){return W.M.filter(t=>t.g!=this.g).filter(t=>A(t,this)<200).filter(t=>!W.bt(this,t)).sort((t,e)=>A(this,t)-A(this,e))[0]}__(t){this.ap=0,this._A.__(t),this.ap||!this.j||this.j._K||(this.E=aB(this,this.j));let e=this.j&&this.j.g==this.g;if(!this.ap&&(this.cm-=t)<=0){this.cm=1;let t=!this.j||this.j._K||A(this,this.j)>(e?100:200)||W.bt(this,this.j);if(e){if(1==this.j._q||this.j==this)this.j=null;else if(!t){let t=this.j,e={e$:0,_c:()=>{translate(this.x+e.e$*(t.x-this.x),this.y+e.e$*(t.y-this.y)),R.fillStyle=this.g.q,fr(-2,-6,4,12),fr(-6,-2,12,4)}};W.add(e,2),S(e,"e$",0,1,A(this,this.j)/100,0,null,()=>{t.ed(.02),W._d(e)})}}else if(t&&(this.j=this.ec()),this.j){let t={_V:1,_a:()=>{R.globalAlpha=this._V,R.strokeStyle="#ff0",R.lineWidth=.5,beginPath(),moveTo(this.x,this.y),lineTo(this.j.x,this.j.y),stroke()}};W.add(t,2),S(t,"_V",.5,0,.1,0,null,()=>W._d(t)),this.j.eh(.1)}}}_a(){O(()=>this._A._a()),O(()=>{translate(cD(this.x,50),cD(this.y,50)),R.globalAlpha=.1,R.fillStyle=this.g._u,fr(0,0,50,50)}),translate(this.x,this.y),rotate(this.E);let t=this.ap?sin(G.t*PI*4):0,e=2.5*t;translate(-7.5,-12.5),O(()=>{translate(5,0),scale(t,1),R.fillStyle=this.g.dd,fr(0,5,15,5),fr(0,15,-15,5)}),O(()=>{translate(e,0),R.fillStyle=this.g._u,fr(5,0,10,5),R.fillStyle=this.g.dd,fr(10,5,10,5)}),O(()=>{translate(-e,0),R.fillStyle=this.g._u,fr(5,20,10,5),R.fillStyle=this.g.dd,fr(10,15,10,5)}),R.fillStyle=this.g._u,fr(0,5,10,15),R.fillStyle="#000",fr(15,10,15,5),R.fillStyle=this.g.f$,fr(5,5,10,15)}_c(){this._p._c(),translate(this.x,this.y),R.fillStyle="#000",fr(-16,-21,32,6),R.fillStyle=this._q>.3?"#0f0":"#f00",fr(-15,-20,30*this._q,4),this.dX()&&(R.fillStyle="#fff",bC(40,5))}dW(t){this.a$(new aj(t))}a$(t){this._A=t,t._x(this)}dX(){return G._f.M.indexOf(this)>=0}}class aF{_x(t){this.cW=1,this.$=t}__(t){this.cW-=t,this.cW<0&&this.$._A===this&&this.$.a$(this.aH())}aH(){return this}_a(){}_N(){return{x:this.$.x,y:this.$.y}}}class aJ extends aF{}class bH extends aF{constructor(t,e=200){super(),this.j=t,this.J=e}_x(t){super._x(t),this._R=0,this.ay()}ay(){A(this.$,this.j)<this.J&&!W.bt(this.$,this.j)?(this._k=new aJ,this.$.j=this.j,this.$.bu=this.j.g==this.$.g):this._k=new aj(this.j),this._k._x(this.$)}__(t){super.__(t),this._R-=t,this._R<=0&&(this._R=1,this.ay()),this._k&&this._k.__(t)}aH(){return this.j._K?new aJ:this}_a(){this._k._a()}_N(){return this._k._N()}}class aj extends aF{constructor(t){super(),this.j=t}_x(t){super._x(t),this._i||(this.j=W.cZ(this.j,W._w.filter(t=>t.g&&t!==this.$).map(t=>t._A?t._A._N():t),45).sort((t,e)=>{let i=W.bL(t,atan2(this.j.y-t.y,this.j.x-t.x),500)>=A(t,this.j);return i!=W.bL(t,atan2(this.j.y-e.y,this.j.x-e.x),500)>=A(e,this.j)?i?-1:1:A(t,this.j)-A(e,this.j)})[0],this._i=W.dM(this.$,this.j,t=>A(t,this.j)<=50)||[])}__(t){super.__(t);let e=this._i[0];if(e){let i=A(this.$,e);if(this.$.ap=1,i>0){this.$.E=atan2(e.y-this.$.y,e.x-this.$.x);let s=min(i,100*t);this.$.x+=s*cos(this.$.E),this.$.y+=s*sin(this.$.E)}else this._i.shift()}}aH(){return this._i.length?this:new aJ}_a(){this.$.g==L&&(R.globalAlpha=.3,beginPath(),R.strokeStyle=this.$.g._u,R.lineWidth=2,moveTo(this.$.x,this.$.y),this._i.forEach(t=>lineTo(t.x,t.y)),stroke())}_N(){let t=this._i[this._i.length-1]||this.j;return{x:t.x,y:t.y}}}class dJ extends aF{constructor(){super(),this._R=0,this._Q=null}_x(t){super._x(t),this.ay()}_b(t,e,i){return W.M.filter(t=>t.g==e).filter(e=>A(e,t)<i).reduce((t,e)=>t+e._q,0)}ba(){let t=[];for(let e=0;e<10;e++){let i=e/10*PI*2;t.push({x:this.$.x+800*cos(i),y:this.$.y+800*sin(i)})}return aE(t.filter(t=>!W.bR(t)).filter(t=>this._b(t,this.$.g._$,400)<=0))}dD(){return W.M.filter(t=>t.g==this.$.g._$).filter(t=>this._b(t,t.g,400)<=this.ct()).sort((t,e)=>A(t,this.$)-A(e,this.$))[0]}dC(){return W.M.filter(t=>t!=this.$&&t.g==this.$.g).filter(t=>this._b(t,t.g._$,400)<=0).sort((t,e)=>A(t,this.$)-A(e,this.$))[0]}_J(){return W._j.filter(t=>t.g!=this.$.g).filter(t=>this._b(t,this.$.g._$,400)<=0).sort((t,e)=>A(t,this.$)-A(e,this.$))[0]}_M(){return W._j.filter(t=>t.g!=this.$.g._$).filter(t=>this._b(t,this.$.g._$,300)>0).sort((t,e)=>A(t,this.$)-A(e,this.$))[0]}ct(){return this._b(this.$,this.$.g,400)}ay(){if(this._Q&&!this._Q.done()&&!this._Q.dB())return;let t=[],e=this.ba();if(e){let i=new aj(e),s={_A:i,done:()=>A(i.j,this.$)<=200&&0==this._b(this.$,this.$.g._$,200),dB:()=>this._b(i.j,this.$.g._$,800)>0};t.push(s)}let i=this.dD();if(i){let e={_A:new bH(i),done:()=>i._K,dB:()=>this._b(i,i.g,200)>this.ct()+2};t.push(e)}let s=this.dC();if(s){let e={_A:new bH(s),done:()=>A(s,this.$)<200,dB:()=>this._b(s,s.g._$,200)>this._b(s,s.g,200)+2};t.push(e)}let h=this._J();if(h){let e={_A:new aj(h),done:()=>h.g==this.$.g,dB:()=>this._b(h,this.$.g._$,200)>this._b(h,this.$.g,200)+2};t.push(e)}let l=this._M();if(l){let e={_A:new aj(l),done:()=>0==this._b(l,this.$.g._$,150),dB:()=>this._b(l,this.$.g._$,200)>this._b(l,this.$.g,200)+2};t.push(e)}let r=aE(t.filter(t=>!t.done()&&!t.dB()));r&&(this._Q=r,this._k=this._Q._A,this._k._x(this.$))}__(t){super.__(t),this._R-=t,this._R<=0&&(this._R=5,this.ay()),this._k&&this._k.__(t)}aH(){return this}_a(){this._k&&this._k._a()}_N(){return this._k?this._k._N():this.$}}class bd{constructor(){}_c(){}get N(){}_h(t){this.Q=t}bZ(){}move(t){this.x=t.x,this.y=t.y,this.Q&&(G.Z=G._f,G.Z._h(this.Q),G.Z.move(this),this.Q=null)}dt(){this.Q=null}bX(t){function e(t){return t>0?1:t<0?-1:0}let i=V.B,s=-PI/3;s=i.x<this.x?-PI/2-PI/6:-PI/3,i.y>this.y&&(s*=-1);let h=cos(s);R.lineWidth=2,R.strokeStyle=R.fillStyle=this.N,R.font="bold 10pt Courier New",R.textAlign=h>0?"left":"right",R.textBaseline="middle",R.shadowColor="#000",R.shadowOffsetY=1,beginPath(),moveTo(30*h,30*sin(s)),lineTo(60*h,60*sin(s)),lineTo(60*h+30*e(h),60*sin(s)),stroke(),fillText(t,60*h+40*e(h),60*sin(s))}}class cb extends bd{get N(){return"#0f0"}_c(){let t=1-G.t%.4/.4;translate(this.j.x,this.j.y);let e=t=>()=>{translate(40*cos(t),40*sin(t)),rotate(t),beginPath(),moveTo(-8,0),lineTo(0,8),lineTo(0,-8),fill()};R.fillStyle=this.N,O(()=>{R.globalAlpha=t,scale(t,t);let i=4;for(;i--;)O(e(i/4*PI*2+PI/4))}),this.bX(this.label)}track(t){this.j=t,this.x=t.x,this.y=t.y}bZ(){this.j&&G._f.M.forEach(t=>{t.a$(new bH(this.j,this.cn))})}}class dA extends cb{get N(){return"#900"}get label(){return"ATTACK()"}get cn(){return 200}}class dE extends cb{get N(){return"#0f0"}get label(){return"HEAL()"}get cn(){return 100}}class dG extends bd{get N(){return"#0f0"}_c(){function t(t,i,s){O(()=>{R.globalAlpha=s,translate(t,i),beginPath(),moveTo(0,0),lineTo(e,-e),lineTo(-e,-e),fill()})}let e=10,i=W._j.filter(t=>A(t,this)<150||W instanceof bO)[0];if(i){let s=1*G.t%1*e;R.fillStyle=L.q,t(i.x,s+i.y-50,1-s/e),t(i.x,s+i.y-e-50,1),t(i.x,s+i.y-2*e-50,s/e)}translate(this.x,this.y);let s=G.t%.4/.4;R.fillStyle=this.N,R.globalAlpha=1-s,bC(20,4),R.globalAlpha=1;let h=min(1,max(0,10*(G.t-this.dL-.5)));scale(h,h),this.bX(i&&A(i,this)<150?i.g==L?"DEFEND()":"CAPTURE()":"REACH()")}move(t){this&&t.x==this.x&&t.y==this.y||(this.dL=G.t),super.move(t)}bZ(){G._f.M.forEach(t=>{t.dW(this);let e,i=t._A._N();W.add(e={_a:()=>{R.translate(i.x,i.y),R.scale(e.a,e.a),R.globalAlpha=e.a,R.strokeStyle="#0f0",R.lineWidth=1,R.beginPath(),R.arc(0,0,5,0,2*PI,1),R.stroke()}},2),S(e,"a",1,0,.3,0,0,()=>W._d(e)),this.cL=1})}}class dQ extends bd{constructor(){super(),this.aP=[]}_c(){this.Q&&A(this,this.Q)&&(R.strokeStyle="#0f0",R.fillStyle="rgba(0,255,0,0.1)",R.lineWidth=1,fr(this.Q.x,this.Q.y,this.x-this.Q.x,this.y-this.Q.y),strokeRect(this.Q.x,this.Q.y,this.x-this.Q.x,this.y-this.Q.y))}move(t){this.x=t.x,this.y=t.y,this.Q&&(this.aP=W.M.filter(t=>A(this,this.Q)<5?A(t,this.Q)<20:t.g===L&&_l(this.Q.x,t.x,this.x)&&_l(this.Q.y,t.y,this.y)))}get M(){return this.aP.filter(t=>!t._K)}}class cT{constructor(){(W=this).t=0,W._w=[V],W.M=[],W._j=[],W.aK=[],W.cV(),W.bE=[];let t=()=>random()<.1?"#147":"#158";W._z.forEach((e,i)=>{e.forEach((e,s)=>{for(let h=0;h<e;h++)W.bE.push(dU(50*s,50*i,50,50,50*h,t()))})}),W.az=[],W.bE.forEach(t=>t.forEach(t=>W.az.push(t)));let e={};W.az.forEach(t=>{let i=t.hash();e[i]=(e[i]||0)+1}),W.az=W.az.filter(t=>1==e[t.hash()]),W.bx(0,1),this.d$=1,S(W,"d$",1,0,1)}aM(t,e,i,s){if(!s)return;let h=aE(W.cZ({x:t,y:e},W.M,45)),l=new cu;l.x=h.x,l.y=h.y,l.g=i,l.a$(i._A(l)),W.add(l,11),this.aM(t,e,i,s-1)}e_(){let t=new dk;for(;;){do{t.x=b_(random()*W.width,50),t.y=b_(random()*W.height,50)}while(W.bs(t.x,t.y,2));if(!W._w.filter(e=>e.g&&A(e,t)<500).length)break}W.add(t,23)}_a(){O(()=>{translate(-~~V.x,-~~V.y),R.fillStyle=G.eb,fr(V.x,V.y,1e3,1e3),W.aK.forEach(t=>t._a&&O(()=>t._a())),W.az.filter(function(t){return abs(t.B.x-V.B.x)>525||abs(t.B.y-V.B.y)>525?0:t.ax(V.B)}).sort((t,e)=>A(e.B,V.B)-A(t.B,V.B)).forEach(t=>t._a()),W.aK.forEach(t=>t._c&&O(()=>t._c()))}),W.d$&&O(()=>{R.globalAlpha=W.d$,R.fillStyle="#fff",fr(0,0,1e3,1e3)}),W.dq&&W.dq(),R.fillStyle="rgba(255,255,255,.15)",fr(0,~~(100*G.t)%1e3*1.5,1e3,.5),R.fillStyle="rgba(255,255,255,.02)",fr(0,~~(50*G.t)%1e3*1.5-100,1e3,100),R.fillStyle=G.ef,fr(0,0,1e3,1e3),W.bY&&W.bY()}get width(){return 50*W._z[0].length}get height(){return 50*W._z.length}add(t,e){let i=4&e?"unshift":"push";1&e&&W._w[i](t),2&e&&W.aK[i](t),8&e&&W.M[i](t),16&e&&W._j[i](t)}_d(t){W._w._d(t),W.aK._d(t),W.M._d(t),W._j._d(t)}__(t){W.t+=t,W._w.slice().forEach(e=>e.__(t))}c_(t,e){return t<0||t>W.width||e<0||e>W.height}bs(t,e,i=0){return i?[{x:t-i,y:e-i},{x:t-i,y:e+i},{x:t+i,y:e-i},{x:t+i,y:e+i}].filter(t=>W.bR(t)).length:W.bR({x:t,y:e})}bR(t){return W.c_(t.x,t.y)||W._z[~~(t.y/50)][~~(t.x/50)]}aT(t){return W._z[t.I]&&W._z[t.I][t.H]}dM(t,e,i){let s=W.eg({I:~~(t.y/50),H:~~(t.x/50)},{I:~~(e.y/50),H:~~(e.x/50)},t=>i({x:50*(t.H+.5),y:50*(t.I+.5)}));if(s){let t=[];for(;s;)t.unshift({x:50*(s.H+.5),y:50*(s.I+.5)}),s=s.parent;return t[t.length-1]={x:e.x,y:e.y},t.length>1&&t.shift(),t}}eg(t,e,i){let s=W._z,h=[t],l=dS(s);for(t._s=0;h.length;){let t,r=Number.MAX_VALUE;h.forEach((i,s)=>{let h=i._s+bK(i.I,i.H,e.I,e.H);h<r&&(r=h,t=s)});let n=h[t];if(h.splice(t,1),i(n))return n;l[n.I][n.H]=1;let a={I:n.I-1,H:n.H},f={I:n.I+1,H:n.H},_={I:n.I,H:n.H-1},o={I:n.I,H:n.H+1},c=W.aT(a),y=W.aT(f),d=W.aT(_),u=W.aT(o),x=[a,f,_,o];c||d||x.unshift({I:a.I,H:_.H}),c||u||x.unshift({I:a.I,H:o.H}),y||d||x.unshift({I:f.I,H:_.H}),y||u||x.unshift({I:f.I,H:o.H}),x.forEach(t=>{if(t.I<0||t.H<0||t.I>=s.length||t.H>=s[0].length||l[t.I][t.H])return;t.parent=n,t._s=n._s+bK(t.I,t.H,n.I,n.H);let e=l[t.I][t.H];isNaN(e)?e._s>t._s&&(e._s=t._s,e.parent=t.parent):(l[t.I][t.H]=n,h.push(t))})}}bL(t,e,i){let s,h=W.ew(t.x,t.y,e),l=W.eA(t.x,t.y,e);return s=h?l?A(t,h)<A(t,l)?h:l:h:l,i&&(!s||A(t,s))>i?{x:t.x+cos(e)*i,y:t.y+sin(e)*i}:s}ew(t,e,i){let s=sin(i)>0,h=50*~~(e/50)+(s?50:-1e-4),l=t+(h-e)/tan(i),r=s?50:-50,n=r/tan(i);return W.cf(l,h,n,r)}eA(t,e,i){let s=cos(i)>0,h=50*~~(t/50)+(s?50:-1e-4),l=e+(h-t)*tan(i),r=s?50:-50,n=r*tan(i);return W.cf(h,l,r,n)}cf(t,e,i,s){let h=t,l=e;for(var r=0;r<100;r++){if(W.c_(h,l))return null;if(W.bs(h,l))return{x:h,y:l};h+=i,l+=s}}eE(t,e,i){if(!e)return[t];let s=~~(2*PI*e/i),h=[];for(let i=0;i<s;i++){let l=i/s*2*PI;h.push({x:t.x+cos(l)*e,y:t.y+sin(l)*e})}return h}cZ(t,e,i=50){for(let s=0;s<500;s+=i){let h=W.eE(t,s,i).filter(t=>!W.bs(t.x,t.y,i/2)).filter(t=>!e.filter(e=>A(e,t)<i).length);if(h.length)return h}return[]}bt(t,e){let i=A(t,e);return A(t,W.bL(t,aB(t,e),i))<i}bx(t,e){W.bE.forEach(i=>{let s=.5*random()+.5;i.forEach(i=>{S(i,"aG",i.aG*(t?1:10),i.aG*(e?1:10),s),S(i,"_V",t,e,s)})})}}class bO extends cT{cV(){W._z=F("111111111111111111111,100000000000000000001,100000000000000000001,100000000000000000001,100000000000000000001,100111111111111111001,100111111111111111001,100111111111111111001,100000000000000000001,100000000011000000001,100000000110000000001,100000000110000000001,100000110011100010001,100000000011100110001,100000000000000000001,100000000000000000001,100001111111111100001,100001111111111100001,100000000000000000001,100000000000000000001,111111111111111111111"),W.aM(V.B.x-300,V.B.y,L,5);let t=new dk;t.x=V.B.x+300,t.y=V.B.y,t._p._c=(()=>0),W.add(t,23);let e={__:()=>{t.g==L&&(this.av(),W._d(e))}};W.add(e,1),S(W,"fd",0,1,.5,.8),W.add({__:()=>{V.x=(W.width-1e3)/2,V.y=(W.width-1e3)/2}},1),G._r=0,W.add({__:()=>{G._f.aP.length||G._f.Q?W._d(W._S):W._S||(W._S=new el(()=>{W._d(W._S),W._S=null}),W._S.x=W.M[0].x-90,W._S.y=W.M[0].y-90,W.add(W._S,2))}},1)}_a(){super._a(),O(()=>{R.globalAlpha=W.fd,_o("lost beacons",500,200,16,"#a51",1),_o("tactical territory control",500,312,5,"#fff",1);let t;G._f.aP.length?G.bF.cL?t="capture the beacon to start":(t="click right     to send units",cC(485,862.5,2)):(t="click left     to select units",G.bF.cL=0,cC(455,862.5,1)),_o(t,500,850,5,"#fff",1);let e=["--- best times ---"],i=0;for(;;){let t=cY.ds(++i);if(!t)break;e.unshift("sector #"+dp(i)+" - "+dl(t))}i>1&&e.forEach((t,e)=>{aO(t,10,1e3-7*(e+1)*2,2,"#fff",1)})})}av(){S(W,"fd",1,0,.5,0,0,()=>{ch(()=>W.bx(1,0),500),S(W,"d$",0,1,1,.5,0,()=>G.av(bJ))})}}class bJ extends cT{cV(){G._r++;let t=20+10*G._r,e=20+10*G._r;W._z=ep(t,e),W.bN(425,425,2),W.bN(575,425,2),W.bN(725,425,2);for(let i=0;i<t*e*.004;i++)W.e_();let i={__:()=>{let t=W.M.filter(t=>t.g==L).length,e=W.M.filter(t=>t.g==P).length,s=W._j.filter(t=>t.g==L).length,h=W._j.filter(t=>t.g==P).length;t&&max(h,s)!=W._j.length&&(h||e)||(W._d(i),this.eS(!h))}};W.add(i,1),W.eQ(["sector #"+G._r,"capture all the beacons to win"])}eQ(t,e){let i=W._w.slice(0);W._w=[],W.add(new cN(t,()=>{W._w=i,e&&e()}),2)}bN(t,e,i){W.aM(t,e,L,i),W.aM(W.width-t,W.height-e,P,i)}bY(){O(()=>{translate(1e3-.05*W.width-20,1e3-.05*W.height-20),R.globalAlpha=.5,R.strokeStyle="#fff",R.lineWidth=2,R.fillStyle="#000",fr(4,4,~~(.05*W.width),~~(.05*W.height)),R.fillStyle="#444",fr(0,0,~~(.05*W.width),~~(.05*W.height)),R.fillStyle="#6cf",R.globalAlpha=1,W._z.forEach((t,e)=>{t.forEach((t,i)=>{t&&fr(round(50*i*.05),round(50*e*.05),round(2.5),round(2.5))})}),R.lineWidth=1,R.fillStyle="#fff",R.strokeStyle="#000",R.globalAlpha=.2,fr(~~(.05*V.x),~~(.05*V.y),50,50),R.globalAlpha=1,strokeRect(.5+~~(.05*V.x),.5+~~(.05*V.y),50,50),R.globalAlpha=1,W.M.forEach(t=>{R.fillStyle=t.g._u,fr(.05*t.x-2,.05*t.y-2,4,4)}),W._j.forEach(t=>{R.fillStyle=t.g.q,O(()=>{translate(.05*t.x,.05*t.y),bC(8,4)})}),R.lineWidth=1,R.strokeStyle="#000",strokeRect(.5,.5,~~(.05*W.width),~~(.05*W.height))})}dq(){O(()=>{function t(t,e,i,s,h,l){let r=(5+s)*h;R.fillStyle="#000",fr(t+2,e+2,r,10),R.fillStyle=l,fr(t,e,r,10),_o(""+i,t+r+15*h,e,2,l,1)}translate(500,930),R.fillStyle=G.bf,fr(-500,0,1e3,70),R.fillStyle=G.bl,R.strokeStyle="#000",beginPath(),moveTo(-220,70),lineTo(-170,.5),lineTo(170,.5),lineTo(220,70),fill(),stroke(),_o("beacons",0,20,2,"#fff",1),_o("units",0,40,2,"#fff",1),t(-35,20,G.aI(L),G.aI(L)/W._j.length*100,-1,"#0f0"),t(35,20,G.aI(P),G.aI(P)/W._j.length*100,1,"#f00");let e=G._Y(L),i=G._Y(P),s=max(e,i);t(-35,40,G._Y(L),G._Y(L)/s*100,-1,"#0f0"),t(35,40,G._Y(P),G._Y(P)/s*100,1,"#f00")}),_o("wasd/arrows: move the camera  -  left click: select units  -  right click: send units",500,10,2,"#888")}eS(t){t&&cY.du(G._r,W.t),W.add(new cN(t?["sector secured"]:["sector lost","you secured "+(G._r-1)+" sectors"],()=>{W.bx(1,0),S(W,"d$",0,1,1,.5,0,()=>G.av(t?bJ:bO))}),2)}}class dy{constructor(){V=this,this.x=0,this.y=0}__(t){let e={x:0,y:0};(w._h[37]||w._h[65]||w._h[81])&&(e.x=-1),(w._h[39]||w._h[68])&&(e.x=1),(w._h[38]||w._h[87]||w._h[90])&&(e.y=-1),(w._h[40]||w._h[83])&&(e.y=1);let i=(U.x-(1e3-G.ag-20))/G.ag,s=(U.y-(1e3-G.ah-20))/G.ah;if(!_l(0,i,1)||!_l(0,s,1)){let t=_l(100,U.x,900),i=_l(100,U.y,900);t&&i||(t||(e.x=U.x>500?1:-1),i||(e.y=U.y>500?1:-1))}if(e.x||e.y){let i=atan2(e.y,e.x);this.x+=800*cos(i)*t,this.y+=800*sin(i)*t}this.x=max(0,min(this.x,W.width-1e3)),this.y=max(0,min(this.y,W.height-1e3))}get B(){return{x:V.x+500,y:V.y+500}}eK(t,e,i){return _l(this.x-i,t,this.x+1e3+i)&&_l(this.y-i,e,this.y+1e3+i)}}class cG{constructor(t,e,i){this.bM=t,this.N=e,this.ax=i,this._V=1,this.B={x:fk(t,"x"),y:fk(t,"y"),z:fk(t,"z")},this.aG=400}dO(t){return{x:t.x+(t.x-V.B.x)/this.aG*t.z,y:t.y+(t.y-V.B.y)/this.aG*t.z}}hash(){return this.B.x+","+this.B.y+","+this.B.z}_a(){O(()=>{R.globalAlpha=this._V,R.fillStyle=this.N,R.strokeStyle="#479",R.lineWidth=1,R.lineJoin="round",beginPath(),this.bM.map(t=>this.dO(t)).forEach((t,e)=>{e?lineTo(t.x,t.y):moveTo(t.x,t.y)}),closePath(),fill(),stroke()})}}class cY{static du(t,e){try{localStorage["_"+t]=min(e,this.ds(t)||Number.MAX_VALUE)}catch(t){}}static ds(t){return localStorage["_"+t]||0}}let bB="reinforcements";class dk{constructor(){this.x=0,this.y=0,this.g=bw,this.eZ=0,this.f_=null,this.fa=0,this._v=0,this._t=0,this.bq=0,this.aQ=0,this._W=0,this._p=new dn(this)}__(t){let e,i,s=W.M.filter(t=>A(t,this)<150),h=s.filter(t=>t.g==L),l=s.filter(t=>t.g==P);if(l.length>h.length?(e=P,i=this._v<1):l.length<h.length&&(e=L,i=this._t<1),this.bq-=t,this.bq<0&&i){this.bq=.2;let t=aE(e==P?l:h),i=T(.5,1.5);aA(5,e._u,[["x",t.x,this.x,i,0],["y",t.y,this.y,i,0],["s",0,T(5,10),i]],1)}let r=0,n=0;e==P?(r=-1,n=this._t>0?0:1):e==L?(n=-1,r=this._v>0?0:1):0==s.length&&(r=this.g==L?1:-1,n=this.g==P?1:-1);let a=.1*bI(1,abs(h.length-l.length),3);this._t=max(0,min(1,this._t+r*a*t)),this._v=max(0,min(1,this._v+n*a*t));let f;1==this._t?f=L:1==this._v?f=P:this._t||this._v||(f=bw),f&&f!=this.g&&(this.g=f,this.ei(),this.aQ=this.g.ek,this._W=0,f==L?this._p._X("beacon captured",this.g.q):f==P?this._p._X("enemy captured beacon",this.g.q):e==P&&this._p._X("beacon lost",this.g.q)),(this.aQ-=t)<0&&(this._W++,this.g==P?this.cJ():this.g==L&&this._p._X("reinforcements ready",L.q,9999),this.aQ=this.g.ek)}cJ(){for(let t=0;t<this._W;t++){let t=new cu;t.x=this.x,t.y=this.y,t.g=this.g,W.add(t,11),t.a$(this.g._A(this)),this.g==P&&this._p._X("enemy reinforcements",this.g.q)}this._W=0}_a(){O(()=>{let t=~~(this.y/50),e=~~(this.x/50);R.fillStyle=this.g.q,R.globalAlpha=.05;for(let i=t-3;i<t+3;i++)for(let t=e-3;t<e+3;t++){let e={x:50*(t+.5),y:50*(i+.5)},s=aB(this,e);A(this,e)<A(this,{x:this.x+150*cos(s),y:this.y+150*sin(s)})&&fr(e.x-25,e.y-25,50,50)}}),translate(this.x,this.y),R.fillStyle="#000",fr(-20,-7.5,40,15),fr(-7.5,-20,15,40);let t=G.t%.4/.4;R.fillStyle=R.strokeStyle=this.g.q,beginPath(),arc(0,0,18*t,0,2*PI,1),fill(),R.globalAlpha=1-t,beginPath(),arc(0,0,18,0,2*PI,1),fill(),R.globalAlpha=.5,[-G.t*PI*2,-G.t*PI*2+PI].forEach(t=>this.dc(t,25)),[G.t*PI*3,G.t*PI*3+PI].forEach(t=>this.dc(t,27))}ex(t){let e=this.dg();return this._W>0&&this.g==L&&_l(e.x,t.x,e.x+e.width)&&_l(e.y,t.y,e.y+e.height)}dg(){let t=2*bo(bB)+12;return{x:this.x-t/2,y:this.y+50,width:t,height:22}}ez(t){if(this.ex(t))return this.cJ(),this._p.clear(),1}_c(){if(O(()=>this._p._c()),this.g!=bw&&W instanceof bJ){let t=this.dg();0==this._W?(_o(bB,this.x,t.y,2,this.g.q,1),_o(dl(this.aQ),this.x,t.y+14,2,this.g.q,1)):(R.fillStyle=L.q,fr(t.x,t.y,t.width,t.height),R.fillStyle="#444",fr(t.x+1,t.y+1,t.width-2,t.height-2),R.fillStyle="#000",fr(t.x+1,t.y+1,t.width-2,t.height/2),_o(bB,this.x,t.y+(t.height-10)/2,2,L.q,1))}translate(this.x,this.y);let t=G.t%1/1;R.strokeStyle=this.g.q,R.lineWidth=2,R.globalAlpha=t,beginPath(),arc(0,0,80*(1-t),0,2*PI,1),stroke();let e=max(this._v,this._t);e&&e<1&&(R.globalAlpha=1,R.fillStyle="#000",fr(-26,-31,52,6),R.fillStyle="#0f0",fr(-25*this._t,-30,50*this._t,4),R.fillStyle="#f00",fr(-25*this._v,-30,50*this._v,4))}dc(t,e){O(()=>{rotate(t),beginPath(),arc(0,0,e,0,PI/3,0),stroke()})}get index(){return W._j.indexOf(this)+1}ei(){for(let t=0;t<100;t++){let t=T(0,2*PI),e=T(100,200),i=T(.5,1.5);aA(5,this.g._u,[["x",this.x,this.x+cos(t)*e,i,0,bG],["y",this.y,this.y+sin(t)*e,i,0,bG],["s",T(5,10),0,i]],1)}let t={J:0,_a:()=>{let e=~~(this.y/50),i=~~(this.x/50),s=ceil(t.J/50);R.fillStyle=this.g.q,R.globalAlpha=.2;for(let h=e-s;h<e+s;h++)for(let e=i-s;e<i+s;e++){let i={x:50*(e+.5),y:50*(h+.5)},s=aB(this,i);_l(i.x-25,this.x+cos(s)*t.J,i.x+25)&&_l(i.y-25,this.y+sin(s)*t.J,i.y+25)&&fr(i.x-25,i.y-25,50,50)}}};W.add(t,2),S(t,"J",0,500,1,0,bG,()=>W._d(t))}}let bw={_u:"#fff",dd:"#fff",f$:"#fff",q:"#fff"},L={_u:"#4c2",dd:"#381",f$:"#2f7",q:"#0f0",_A:t=>new aj(t),ek:30},P={f$:"#850000",_u:"#ef0404",dd:"#5d0505",q:"#f00",_A:()=>new dJ,ek:50};L._$=P,P._$=L,w._h={},onkeydown=(t=>{w._h[t.keyCode]=1}),onkeyup=(t=>{w._h[t.keyCode]=0});let U={x:0,y:0},bj=0;onmousedown=(t=>{let e=((U=cq(t)).x-(1e3-G.ag-20))/G.ag,i=(U.y-(1e3-G.ah-20))/G.ah;if(e>0&&e<1&&i>0&&i<1)return bj=1,void cR();let s={x:U.x+V.x,y:U.y+V.y};W._j.filter(t=>t.ez(s)).length||G.Z[3==t.which?"bZ":"_h"](s)}),onmousemove=(t=>{U=cq(t),bj?cR():G.Z.move({x:U.x+V.x,y:U.y+V.y})}),onmouseup=(()=>{bj=0,G.Z.Q&&G.Z.dt({x:U.x+V.x,y:U.y+V.y})}),oncontextmenu=(t=>{t.preventDefault()});class eR{constructor(){(G=this).t=0,G.av(bO),G.ef=by(1,4,(t,e)=>(t.fillStyle="rgba(0,0,0,.2)",t.fr(0,0,1,1),t.createPattern(e,"repeat"))),G.bf=R.createLinearGradient(0,0,0,70),G.bf.addColorStop(0,"rgba(0,0,0,0)"),G.bf.addColorStop(1,"rgba(0,0,0,0.5)"),G.bl=R.createLinearGradient(0,0,0,70),G.bl.addColorStop(0,"#035"),G.bl.addColorStop(1,"#146"),G.eb=by(250,250,(t,e)=>{t.fillStyle="#0e3b54",t.fr(0,0,e.width,e.height),t.globalAlpha=.05,t.fillStyle="#fff";for(let i=0;i<e.width;i+=25)t.fr(0,i,e.width,1),t.fr(i,0,1,e.height);t.globalAlpha=.5,t.fillStyle="#479",t.shadowColor="rgba(255,255,255, 0.2)",t.shadowBlur=3;for(let i=0;i<e.width;i+=50)t.fr(0,i,e.width,1),t.fr(i,0,1,e.height);return t.shadowBlur=0,t.globalAlpha=.5,t.fillStyle="#fff",t.fr(50,43,1,14),t.fr(43,50,14,1),t.globalAlpha=.02,t.fr(150,200,50,50),t.fr(200,100,50,50),t.fr(50,150,50,50),t.createPattern(e,"repeat")});let t=Date.now(),e=()=>{let i=Date.now(),s=(i-t)/1e3;t=i,G.__(s),requestAnimationFrame(e)};e()}av(t){new dy,new t,G.Z=G._f=new dQ,G.dY=new dA,G.bF=new dG,G.ea=new dE,W.add({_c:()=>"default"==C.style.cursor&&G.Z._c()},2)}__(t){G.t+=t,W.__(t),G.eF(),W._a()}aI(t){return W._j.filter(e=>e.g==t).length}_Y(t){return W.M.filter(e=>e.g==t).length}get ag(){return.05*W.width}get ah(){return.05*W.height}eF(){let t,e={x:U.x+V.x,y:U.y+V.y},i=W.M.filter(t=>A(e,t)<45).sort((t,i)=>A(e,t)-A(e,i))[0];G.Z===G._f&&G._f.Q||!G._f.M.length?t=G._f:i&&(G._f.M.length>1||G._f.M[0]!=i)?(t=i.g===P?G.dY:G.ea).track(i):t=G._f.M.length?G.bF:G._f,G.Z=t,G.Z.move(e),C.style.cursor=W._j.filter(t=>t.ex(G.Z)).length?"pointer":"default"}}let m=Math;Object.getOwnPropertyNames(m).forEach(t=>w[t]=w[t]||m[t]),onload=(()=>{(C=D.querySelector("canvas")).width=1e3,C.height=1e3,R=C.getContext("2d");let t=CanvasRenderingContext2D.prototype;t.O=function(t){this.save(),t(),this.restore()},t.fr=t.fillRect,Object.getOwnPropertyNames(t).forEach(e=>{R[e]&&R[e].call&&(w[e]=t[e].bind(R))}),onresize(),new eR});</script></body></html>