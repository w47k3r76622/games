function J(){this.B=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;.01>this.c&&(this.c=.01),t=this.b+this.c+this.e,.18>t&&(t=.18/t,this.b*=t,this.c*=t,this.e*=t)}}var W=new function(){this.A=new J;var t,e,r,n,$,s,i,o,x,f,a,c;this.reset=function(){var t=this.A;n=100/(t.f*t.f+.001),$=100/(t.g*t.g+.001),s=1-.01*t.h*t.h*t.h,i=1e-6*-t.i*t.i*t.i,t.a||(a=.5-t.n/2,c=5e-5*-t.o),o=0<t.l?1-.9*t.l*t.l:1+10*t.l*t.l,x=0,f=1==t.m?0:2e4*(1-t.m)*(1-t.m)+32},this.D=function(){this.reset();var n=this.A;return t=1e5*n.b*n.b,e=1e5*n.c*n.c,r=1e5*n.e*n.e+10,t+e+r|0},this.C=function(l,u){var h=this.A,w=1!=h.s||h.v,d=.1*h.v*h.v,y=1+3e-4*h.w,b=.1*h.s*h.s*h.s,p=1+1e-4*h.t,v=1!=h.s,g=h.x*h.x,m=h.g,S=h.q||h.r,P=.2*h.r*h.r*h.r,E=h.q*h.q*(0>h.q?-1020:1020),k=h.p?(2e4*(1-h.p)*(1-h.p)|0)+32:0,B=h.d,W=h.j/2,F=.01*h.k*h.k,T=h.a,R=t,A=1/t,I=1/e,L=1/r,h=5/(1+20*h.u*h.u)*(.01+b);h>.8&&(h=.8);for(var M,j,C,D,U,h=1-h,q=!1,G=0,O=0,z=0,H=0,N=0,Y=0,J=0,K=0,Q=0,V=0,X=Array(1024),Z=Array(32),_=X.length;_--;)X[_]=0;for(_=Z.length;_--;)Z[_]=2*Math.random()-1;for(_=0;u>_;_++){if(q)return _;if(k&&++Q>=k&&(Q=0,this.reset()),f&&++x>=f&&(f=0,n*=o),s+=i,n*=s,n>$&&(n=$,m>0&&(q=!0)),j=n,W>0&&(V+=F,j*=1+sin(V)*W),j|=0,8>j&&(j=8),T||(a+=c,0>a?a=0:a>.5&&(a=.5)),++O>R)switch(O=0,++G){case 1:R=e;break;case 2:R=r}switch(G){case 0:z=O*A;break;case 1:z=1+2*(1-O*I)*B;break;case 2:z=1-O*L;break;case 3:z=0,q=!0}S&&(E+=P,C=0|E,0>C?C=-C:C>1023&&(C=1023)),w&&y&&(d*=y,1e-5>d?d=1e-5:d>.1&&(d=.1)),U=0;for(var tt=8;tt--;){if(J++,J>=j&&(J%=j,3==T))for(M=Z.length;M--;)Z[M]=2*Math.random()-1;switch(T){case 0:D=a>J/j?.5:-.5;break;case 1:D=1-2*(J/j);break;case 2:D=J/j,D=D>.5?6.28318531*(D-1):6.28318531*D,D=0>D?1.27323954*D+.405284735*D*D:1.27323954*D-.405284735*D*D,D=0>D?.225*(D*-D-D)+D:.225*(D*D-D)+D;break;case 3:D=Z[abs(32*J/j|0)]}w&&(M=Y,b*=p,0>b?b=0:b>.1&&(b=.1),v?(N+=(D-Y)*b,N*=h):(Y=D,N=0),Y+=N,H+=Y-M,D=H*=1-d),S&&(X[K%1024]=D,D+=X[(K-C+1024)%1024],K++),U+=D}U=.125*U*z*g,l[_]=U>=1?32767:-1>=U?-32768:32767*U|0}return u}};window.jsfxr=function(t){W.A.B(t);var e=W.D();t=new Uint8Array(4*((e+1)/2|0)+44);var e=2*W.C(new Uint16Array(t.buffer,44),e),r=new Uint32Array(t.buffer,0,44);r[0]=1179011410,r[1]=e+36,r[2]=1163280727,r[3]=544501094,r[4]=16,r[5]=65537,r[6]=44100,r[7]=88200,r[8]=1048578,r[9]=1635017060,r[10]=e;for(var e=e+44,r=0,n="data:audio/wav;base64,";e>r;r+=3)var $=t[r]<<16|t[r+1]<<8|t[r+2],n=n+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[$>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[$>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[$>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&$]);return r-=e,n.slice(0,n.length-r)+"==".slice(0,r)};var Input=function(){var t=this,e={},r={};document.body.addEventListener("keydown",function(t){t.keyCode in e&&(t.preventDefault(),r[t.keyCode]=-1,e[t.keyCode]=1)}),document.body.addEventListener("keyup",function(t){t.keyCode in e&&(t.preventDefault(),r[t.keyCode]=1,e[t.keyCode]=0)}),t.p=function(t){return!!e[t]},t.r=function(t){return 1===r[t]},t.d=function(t){return-1===r[t]},t.u=function(){Object.keys(e).forEach(function(t){r[t]=0})},t.b=function(t){t.forEach(function(t){e[t]=0,r[t]=0})},t.c=function(){Object.keys(e).forEach(function(t){r[t]=0,e[t]=0})}},Group=function(){var t=this;t.e=[],t.a=function(e){t.e.push(e)},t.c=function(e,r){var n,s;for(n=t.e.length;n--;)s=t.e[n],$.c.iv(s)&&$.o.rect(e,s)&&r(e,s)},t.u=function(){var e,r,n=[];for(e=t.e.length;e--;)r=t.e[e],r.hasOwnProperty("u")&&r.u(),r.a||n.push(e);n.length>0&&(t.e=t.e.filter(function(t,e){return n.indexOf(e)<0}))},t.r=function(){$.c.r(t.e)}},Player=function(t,e,r){var n=this;n.x=t,n.y=e,n.w=16,n.h=32,n.dx=0,n.dy=0,n.f=1,n.hu=0,n.it=80,n.ic=0,n.blc=0,n.buc=0,n.elc=0,n.shc=0,n.rbc=0,n.bk=0,n.bkc=0,n.a=1,n.s=.53,n.mxs=5,n.mys=10,n.hl=r,n.mhl=n.hl,n.jt=.9,n.j=0,n.dia=new Dialog,n.fo={x:0,y:0,d:0},n.e=new Emitter,n.frw=0,n.ftw=0,n.fsw=0,n.u=function(){if(n.a>0){n.ic=duz(n.ic,$.e),n.rbc=duz(n.rbc,$.e,function(){$.rbe=0,n.hu-=$.RB.v}),n.blc=n.cdr(n.blc,0,$.BL.v),n.buc=n.cdr(n.buc,$.e*$.BU.ds/1e3,$.BU.v,function(){$.s.p("bu"),n.e.e(n.x,n.y,6,2)}),n.elc=n.cdr(n.elc,$.e*$.EL.ds/1e3,$.EL.v,function(){$.s.p("sp"),n.e.e(n.x,n.y+n.h/2,2,3)}),n.shc=n.cdr(n.shc,$.e*$.SH.ds/1e3,$.SH.v,function(){$.s.p("el"),n.e.e(n.x,n.y+n.h/2,15,3)}),n.hu>0?(n.bkc+=$.e,n.bkc>150&&(n.bkc=0,n.bk=!n.bk)):n.bk=0;var t=n.mxs,e=n.mys;n.hu&$.BL.v&&(t=n.mxs/1.4),n.hu&$.BU.v&&(t=1.12*n.mxs),n.hu&$.WA.v&&(t=n.mxs/1.5),n.hu&$.SH.v&&(t=.8,e=.8),$.i.p(37)?(n.dx-=n.s,n.f=-1):$.i.p(39)&&(n.dx+=n.s,n.f=1),n.dx=iir(n.dx,-t,t),$.i.p(37)||$.i.p(39)||(n.dx=0),n.dy<=n.jt&&$.i.p(38)&&!n.j&&($.s.p("j"),n.dy=-8,n.j=1),(0!==n.fo.x||0!==n.fo.y)&&(n.fo.d>0?(n.dx+=n.fo.x,n.dy+=n.fo.y,n.fo.d-=$.e):n.fo.x=n.fo.y=n.fo.d=0),n.dy+=19.8*($.e/1e3),n.dy=iir(n.dy,-e,e),n.x+=n.dx,n.y+=n.dy,n.x+n.w>$.c.ww&&(n.x=$.c.ww-n.w),n.x<0&&(n.x=0),n.y<0&&(n.y=0),n.dia.u()}n.rb();var r,s=[];$.g.b.c(n,function(t,e){r=0,abs(n.dx)>abs(n.dy)?($.o.top(t,e)||$.o.bottom(t,e))&&(r=abs(n.dx)):($.o.left(t,e)||$.o.right(t,e))&&(r=abs(n.dy)),s.push({w:e,v:r})}),s.sort(function(t,e){return t.v-e.v>0?0:t.v-e.v<0?1:0}),s.forEach(function(t){var e=t.w;$.o.right(n,e)?n.x=e.b.l-n.w:$.o.left(n,e)&&(n.x=e.b.r),$.o.top(n,e)?n.dy=.1:$.o.bottom(n,e)&&(n.y=e.b.t-n.h,n.dy=n.j=0),n.rb()}),n.rb(),0!==n.ic||n.hu&$.RB.v||($.g.t.c(n,function(t,e){t.ic=t.it,e.t===$.BL.v&&e.to<=0?(t.hl-=$.BL.d,t.e.e(t.x,t.y,5,1),$.s.p("bl"),e.o(),t.hu&$.BL.v||(t.hu+=$.BL.v),t.blc=$.BL.t):e.t===$.BU.v?(t.hu&$.BU.v||(t.hu+=$.BU.v),t.buc+=$.BU.t,e.a=0):e.t===$.EL.v&&(t.hu&$.EL.v||(t.hu+=$.EL.v),t.elc+=$.EL.t,e.a=0)}),$.g.z.c(n,function(t,e){if(e.t===$.WA.v){if(t.hu&$.BU.v&&(t.hu-=$.BU.v),!(t.hu&$.EL.v))return;t.hu-=$.EL.v,t.hu+=$.SH.v,t.shc=$.SH.t,n.elc=0,n.fsw||5!==$.lvl||(n.fsw=1,n.say(["Ta-ta-ta-ta-taaa-ta"],2500,2200),n.say(["Smoke in the water"],2500))}else e.t===$.TN.v&&t.hu&$.BU.v&&(e.a=0,t.hl-=$.TN.d,n.fo.x=-8*n.f,n.fo.y=-4,n.fo.d=25,$.g.x.a(new Explosion(n.x,n.y)),$.s.p("xp"),n.ftw||4!==$.lvl||(n.ftw=1,n.say(["Ouch"],2500,2e3)))})),$.rbe&&$.g.p.c(n,function(t,e){e.a=0,t.rbc-=500,$.s.p("pl")}),0!==n.ic||$.rbe||$.g.r.c(n,function(t,e){$.rbe=1,t.hu&$.RB.v||(t.hu+=$.RB.v),t.rbc=$.RB.t,n.frw||2!==$.lvl||(n.frw=1,n.say(["But beware of rainbows"],2e3),n.say(["Rainbows make","people happy"],2300),n.say(["And happy people","don't want to die"],4e3))}),$.g.e.c(n,function(t,e){e.a&&e.f(t)}),(n.hl<=0||n.y>$.c.wh)&&n.a&&n.d(),n.e.u()},n.d=function(){n.a=0,n.y+=24,$.c.st(null),$.s.p("d"),n.e.e(n.x,n.y,5,5)},n.k=function(){n.a=-1},n.r=function(t){n.a&&($.x.s(),$.x.fs(n.bk?"red":"white"),$.x.fr(t.x,t.y,n.w,n.h),n.dia.r(t),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,n.w,n.h)),$.x.r()),n.e.r()},n.rb=function(){n.b={b:n.y+n.h,t:n.y,l:n.x,r:n.x+n.w}},n.po=function(){$.g.p.e.forEach(function(t){t.p()})},n.cdr=function(t,e,r,s){return 0!==t&&(t-=$.e,n.hl-=e,void 0!==s&&s(),0>=t&&(t=0,n.hu-=r)),t},n.say=function(t,e,r){n.dia.s(t,e,r)}},Dialog=function(){var t=this;t.q=[],t.dt=5e3,t.wt=1e3,t.c=0,t.d=0,t.w=0,t.p=0,t.s=function(e,r,n){r=r||t.dt,n=n||t.wt,e instanceof Array||(e=[e]),0!==t.q.length||t.d?t.q.push({t:e,d:r,w:n}):(t.d=e,t.c=r,t.wt=n)},t.u=function(){if(t.c>0)t.c-=$.e;else if(t.d=0,t.p){if(t.p=0,t.c=0,t.q.length>0){var e=t.q.splice(0,1)[0];t.c=e.d,t.d=e.t,t.wt=e.w}}else t.c=t.wt,t.p=1},t.r=function(e){if(t.d){$.x.fs("#fff"),$.x.ss("#fff"),$.x.font="11pt arial";var r,n,s,i=$.c.ww,o=0;for(s=0;s<t.d.length;s++)r=$.x.mt(t.d[s]),n=e.x-r.width/2+8,n+r.width>$.c.w-8&&(n=$.c.w-r.width-8),0>n&&(n=0),i=n,o=r.width,$.x.ft(t.d[s],n+4,e.y-20*(t.d.length-s));$.x.bp(),$.x.mv(i,e.y-15),$.x.lt(i+o+8,e.y-15),$.x.k(),$.x.bp(),$.x.mv(e.x+8,e.y-5),$.x.lt(e.x+16,e.y-15),$.x.k()}}},Block=function(t,e){var r=this;r.x=t,r.y=e,r.w=32,r.h=32,r.a=1,r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.s={t:{},b:{},l:{},r:{}},r.t=function(t,e,n,$){var s;e=floor(e),n=floor(n),"t"===t||"b"===t?s=e:("l"===t||"r"===t)&&(s=n),s in r.s[t]||(r.s[t][s]={s:$,d:rndr(2,2*$)})},r.r=function(t){$.x.s(),$.x.fs($.rbe?"white":"black"),$.x.fr(t.x,t.y,r.w,r.h),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h));var e,n,s;$.x.fs("red");for(e in r.s.t)s=r.s.t[e],n=t.x+(e-r.x),$.x.fr(n,t.y,s.s,s.d);for(e in r.s.b)s=r.s.b[e],n=t.x+(e-r.x),$.x.fr(n,t.y+r.h-s.s,s.s,s.d);for(e in r.s.l)s=r.s.l[e],n=t.y+(e-r.y),$.x.fr(t.x,n,s.d,s.s);for(e in r.s.r)s=r.s.r[e],n=t.y+(e-r.y),$.x.fr(t.x+r.w-s.d,n,s.d,s.s);$.x.r()}},Pill=function(t,e){var r=this;r.x=t,r.y=e,r.w=8,r.h=16,r.a=1,r.hl=rndr(10,20),r.po=0,r.pc=0,r.c="green",r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.u=function(){r.po&&(r.pc-=$.e,r.pc<=0&&(r.pc=0,r.po=0))},r.r=function(t){$.rbe&&($.x.s(),$.x.fs(r.po?r.c:"red"),$.x.bp(),$.x.arc(t.x+4,t.y+4,4,PI,0,0),$.x.f(),$.x.fr(t.x,t.y+4,r.w,4),$.x.fs(r.po?r.c:"white"),$.x.fr(t.x,t.y+8,r.w,4),$.x.bp(),$.x.arc(t.x+r.w-4,t.y+r.h-4,4,0,PI,0),$.x.f(),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h)),$.x.r())},r.p=function(){r.po=1,r.pc=$.POT}},Rainbow=function(t,e,r){var n=this;n.x=t,n.y=e+16,n.w=2*r,n.h=r,n.ra=r,n.b={b:n.y+n.h,t:n.y+.25*r,l:n.x+4,r:n.x+n.w-4},n.r=function(t){var e=n.ra;$.x.s(),$.RB.c.forEach(function(r){$.x.ga(.8),$.x.ss(r),$.x.lineWidth=5,$.x.bp(),$.x.arc(t.x+n.w/2,t.y+n.h,e,PI,0,0),$.x.stroke(),e-=5,$.x.lineWidth=1}),dbg&&($.x.ss("red"),$.x.sr(t.x+4,t.y+.25*n.h,n.w-8,n.h)),$.x.r()}},RainbowBlock=function(t,e){var r=this;r.x=t,r.y=e,r.w=32,r.h=32,r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.r=function(t){var e=t.y+2;$.x.s(),$.RB.c.forEach(function(n){$.x.ga(.8),$.x.fs(n),$.x.fr(t.x,e,r.w,5),e+=5}),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h)),$.x.r()}},Collisions=function(){var t=this;t.rect=function(t,e){return 0===Object.keys(t.b).length||0===Object.keys(e.b).length?!1:!(t.b.b<e.b.t||t.b.t>e.b.b||t.b.l>e.b.r||t.b.r<e.b.l)},t.faces=function(t,e){return{t:abs(t.b.b-e.b.t),b:abs(t.b.t-e.b.b),l:abs(t.b.r-e.b.l),r:abs(t.b.l-e.b.r)}},t.bottom=function(e,r){var n=t.faces(e,r);return n.t<n.b&&n.t<n.l&&n.t<n.r},t.top=function(e,r){var n=t.faces(e,r);return n.b<n.t&&n.b<n.l&&n.b<n.r},t.right=function(e,r){var n=t.faces(e,r);return n.l<n.b&&n.l<n.t&&n.l<n.r},t.left=function(e,r){var n=t.faces(e,r);return n.r<n.b&&n.r<n.l&&n.r<n.t}},Explosion=function(t,e,r){var n=this;n.x=t,n.y=e,n.rd=r||22,n.pt=55,n.pc=0,n.p=0,n.a=1,n.b={b:n.y+n.h,t:n.y,l:n.x,r:n.x+n.w},n.u=function(){n.pc+=$.e,n.pc>n.pt&&(n.p+=1,n.pc=0),n.p>5&&(n.a=0)},n.r=function(t){$.x.s(),n.p<3?($.x.fs("white"),$.x.bp(),$.x.arc(t.x,t.y,n.rd/(3-n.p),0,2*PI),$.x.f()):3===n.p?($.x.fs("orange"),$.x.bp(),$.x.arc(t.x,t.y,1.5*n.rd,0,2*PI),$.x.f()):4===n.p?($.x.fs("red"),$.x.bp(),$.x.arc(t.x,t.y,2*n.rd,0,2*PI),$.x.f()):n.p>4&&($.x.fs("white"),$.x.bp(),$.x.arc(t.x,t.y,n.rd,0,2*PI),$.x.f()),$.x.r()}},Camera=function(t,e,r,n){var $=this;$.w=t,$.h=e,$.ww=r,$.wh=n,$.ofx=0,$.ofy=0,$.tg=0,$.sw=function(t,e){$.ww=t,$.wh=e},$.st=function(t){$.tg=t},$.xc=function(t){return{x:t.x-$.ofx,y:t.y-$.ofy,r:t.b.r-$.ofx,b:t.b.b-$.ofy}},$.iv=function(t){var e=$.xc(t);return(e.r>=0&&e.r<=$.w||e.x>=0&&e.x<=$.w)&&(e.b>=0&&e.b<=$.h||e.y>=0&&e.y<=$.h)},$.u=function(){if($.tg){var t,e=0,r=$.w/2,n=$.h/2;$.ww<=$.w?t=$.tg.x:$.tg.x<=r?t=$.tg.x:$.tg.x>r&&$.tg.x+r<=$.ww?t=r:$.tg.x>r&&$.tg.x+r>$.ww&&(t=$.w-($.ww-$.tg.x)),$.wh<=$.h?e=$.tg.y:$.tg.y<=n?e=$.tg.y:$.tg.y>n&&$.tg.y+n<=$.wh?e=n:$.tg.y>n&&$.tg.y+n>$.wh&&(e=$.h-($.wh-$.tg.y)),$.ofx=$.tg.x-t,$.ofy=$.tg.y-e}},$.r=function(t){t&&(t instanceof Array||(t=[t]),t.forEach(function(t){if($.iv(t)){var e=$.xc(t);t.r(e)}}))}},Emitter=function(){var t=this;t.p=new Group,t.ff=110,t.fc=0,t.sf=80,t.sc=0,t.af=50,t.ac=0,t.e=function(e,r,n,$){var n=n||5,s=n;if(1===$)for(s;s--;)t.p.a(new Particle(e,r,rndr(-5,5),-rndr(4,8),"red",2e3,1,0,0,1));else if(2===$&&t.fc<=0)for(t.fc=t.ff,s;s--;)t.p.a(new Particle(e+rndr(-8,8),r,rndr(3,5),-rndr(1,4),"orange",rndr(600,1200),0,1,1,0));else if(3===$&&t.sc<=0)for(t.sc=t.sf,s;s--;)t.p.a(new Particle(e+4,r+rndr(-8,8),rndr(-8,8),rndr(-8,8),"lightblue",rndr(100,300),1,0,0,0));else if(4===$&&t.ac<=0)for(t.ac=t.af,s;s--;)t.p.a(new Particle(e+rndr(-5,5),r+rndr(-16,16),0,0,"green",rndr(800,1200),0,1,0,0));else if(5===$){var i=10,$=5e3,o="white";t.p.e.push(new Particle(e,r,0,-4,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,-2,-2,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,-4,0,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,-2,2,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,0,4,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,2,2,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,4,0,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,2,-2,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,0,-2,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,-1,-1,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,-2,0,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,-1,1,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,0,2,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,1,1,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,2,0,o,$,0,0,0,0,i)),t.p.e.push(new Particle(e,r,1,-1,o,$,0,0,0,0,i))}},t.u=function(){t.fc>0&&(t.fc-=$.e),t.sc>0&&(t.sc-=$.e),t.ac>0&&(t.ac-=$.e),0!==t.l()&&t.p.u()},t.r=function(){0!==t.l()&&t.p.r()},t.l=function(){return t.p.e.length}},Particle=function(t,e,r,n,s,i,o,x,f,a,c){var l=this;l.x=t,l.y=e,l.w=c||rndr(3,7),l.h=l.w,l.dx=r,l.dy=n,l.mxs=5,l.mys=15,l.a=1,l.c=s||"red",l.l=i||2e3,l.g=o||0,l.d=x||0,l.sx=f||0,l.t=a||0,l.b={b:l.y+l.h,t:l.y,l:l.x,r:l.x+l.w},l.u=function(){l.sx&&(l.dx=l.dx*cos(l.l/180*PI)),l.dx=iir(l.dx,-l.mxs,l.mxs),l.g&&(l.dy+=19.8*($.e/1e3)),l.dy=iir(l.dy,-l.mys,l.mys),l.x+=l.dx,l.y+=l.dy,l.rb(),l.t&&$.g.b.c(l,function(t,e){t.a=0,$.o.bottom(e,t)?e.t("b",l.x,l.y,l.w):$.o.top(e,t)?e.t("t",l.x,l.y,l.w):$.o.right(e,t)?e.t("r",l.x,l.y,l.w):$.o.left(e,t)&&e.t("l",l.x,l.y,l.w)}),(l.x<0||l.x>$.c.ww||l.y<0||l.y>$.c.wh)&&(l.a=0),l.l-=$.e,l.l<=0&&(l.a=0)},l.r=function(t){$.x.s(),$.x.fs(l.c),$.x.fr(t.x,t.y,l.w,l.h),$.x.r()},l.rb=function(){l.b={b:l.y+l.h,t:l.y,l:l.x,r:l.x+l.w}}},Fire=function(t,e){var r=this;r.x=t+4,r.y=e,r.w=24,r.h=32,r.t=$.BU.v,r.f=0,r.fc=0,r.a=1,r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.u=function(){r.fc+=$.e,r.fc>=$.FD&&(r.fc=0,r.f=!r.f)},r.r=function(t){$.x.s(),$.rbe?drwf(t,r):r.f?($.x.fs("orange"),$.x.fr(t.x+11,t.y+1,6,2),$.x.fr(t.x+6,t.y+3,11,3),$.x.fr(t.x+2,t.y+6,18,8),$.x.fr(t.x,t.y+14,23,18),$.x.fs("yellow"),$.x.fr(t.x+4,t.y+19,12,13),$.x.fs("white"),$.x.fr(t.x+8,t.y+24,6,8)):($.x.fs("orange"),$.x.fr(t.x+4,t.y+7,3,8),$.x.fr(t.x+2,t.y+9,16,7),$.x.fr(t.x+1,t.y+16,19,16),$.x.fr(t.x,t.y+30,23,2),$.x.fs("yellow"),$.x.fr(t.x+4,t.y+20,13,12),$.x.fs("white"),$.x.fr(t.x+8,t.y+24,6,8)),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h)),$.x.r()}},Saw=function(t,e,r){var n=this;n.x=t,n.y=e+16,n.yd=n.y+16,n.w=28,n.h=28,n.t=$.BL.v,n.ng=0,n.as=920,n.ts=1200,n.to=0,n.a=1,n.b={b:n.y+n.h,t:n.y,l:n.x,r:n.x+n.w},n.o=function(){n.to=-1},n.u=function(){n.ng+=$.e/1e3*n.as,n.ng>360&&(n.ng=n.ng-360),n.to<0&&(n.y+=16*$.e/n.ts,n.y>=n.yd&&(n.to=1))},n.r=function(t){$.x.s(),$.rbe?drwf({x:t.x+n.w/2,y:t.y},n):($.x.tn(t.x+n.w/2,t.y+n.h/2),$.x.ro(n.ng/180*PI),$.x.fs("gray"),$.x.fr(n.w/-2,n.h/-2,n.w,n.h)),dbg&&($.x.ss("red"),$.x.sr(n.w/-2,n.h/-2,n.w,n.h)),$.x.setTransform(1,0,0,1,0,0),$.x.r()}},Electricity=function(t,e){var r=this;r.x=t+4,r.y=e,r.w=24,r.h=24,r.t=$.EL.v,r.a=1,r.st=650,r.sc=0,r.fs=-.04,r.f=1,r.e=new Emitter,r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.d=function(){r.dc=r.dt},r.u=function(){r.e.u(),r.sc=drst(r.sc,$.e,r.st,function(){r.e.e(r.x,r.y+r.h/2,3,3)}),r.f+=r.fs,r.f<=.6?(r.f=.6,r.fs=-1*r.fs):r.f>=1&&(r.f=1,r.fs=-1*r.fs)},r.r=function(t){$.x.s(),$.rbe?drwf(t,r):($.x.ga(r.f),$.x.bp(),$.x.fs("skyblue"),$.x.arc(t.x+r.w/2,t.y+r.h/2,12,0,2*PI),$.x.f()),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h)),$.x.r(),r.e.r()}},Map=function(t,e){var r=this;r.l=function(t){var e,n,$;for(r.m=[],r.w=t[0].length,r.h=t.length,e=0;e<r.w;e++)for(r.m.push([]),n=0;n<r.h;n++)$=t[n],r.m[e].push($.split("")[e]);dbg&&r.pp(r.m)},r.pp=function(t){var e,n,$;for(n=0;n<r.h;n++){for($="",e=0;e<r.w;e++)$+=t[e][n]+" ";console.log(n,$)}}},Levels=function(){var t=this;t.bgc=rnde(["#3c4763","#543c63","#633c47","#3c633e","#63523c"]),t.l={1:{m:[".......................................................................","","","","","","...................................................####................","..................................######...##......####................","........................################...###############....#########","...@....................################...###############....#########","########################################...############################","########################################...############################","########################################...############################","########################################...############################","########################################...############################"],s:[{t:["Hi there!"],d:1400},{t:["Things here work","slighly different"],d:2200},{t:["Still ARROWS to move","and UP to jump"],d:2300,w:2e3},{t:["But your purpose..."],d:2200,w:2600},{t:["Your purpose is to die"],d:4e3}],e:[],l:100,t:6e4},2:{m:["##############################################################################","###..........................................................................#","###..........................................................................#","###............E.................................................F...........#","###....##..###################....................E.P............##..........#","###........###################...................#####.......................#","###...............############...............................#...............#","#####...............##########...............................................#","#####...............############...........R.............P.................E.#","#######.............############........................####...............###","#######.F...........############...E....................####...........F...###","#########....###....#########################################.P..#############","#########...........##########################################################","###########.......############################################################","###########.......############################################################","................##############################################################","..@.............##############################################################","##############################################################################"],s:[{t:["Death is not","always so easy"],d:2500}],e:[{x:13,y:10,w:3,h:1,t:["But there is fire"],d:2e3},{x:11,y:2,w:3,h:3,t:["Also electricity"],d:2e3}],l:100,t:6e4},3:{m:[".............................................####",".............................................####",".............................................####",".............................................####",".............................................####","..........P.....P............................####",".......E.....F.....F............P......F.....####",".......#.....#.....#...........###====###....####","...............................##########....####","........................#..................######",".................P..............................#","................................................#","...............r..............r...........##....#","..@..P....................................##..P.#","########SSSSS#######SSSSS##########SSSSS#########","#################################################"],s:[{t:["Let's sharpen the edges"],d:2400}],e:[],l:100,t:6e4},4:{m:["..............................................##","..............................................##","..............................................##","..............................................##","..............................................##","....FP....==....@....==.....F.......P.........##","..######.....#######.....######....####...#...##","..######.....#######.....######....####.......##","..######.......###.......######..............###","...............###..........................####",".............T.###.T................T.......####","..............................................##","....R...................R...........P....##...##",".E.........P........P..........E.........##.F.##","####.....######SSS######.....######SSSS#########","################################################"],s:[{t:["Kaboom!"],d:2400}],e:[],l:120,t:6e4},5:{m:["#..............................................#","#..............................................#","#..............................................#","#..............................................#","#..............................................#","#..............................................#","#...............E..............E...............#","#......................@.......................#","#........E..........P.####.P.........E.........#","#................r..########r..................#","#...................########...................#","#...........P....##############....P...........#","###WWWWWWWW###SSS##############SSS###WWWWWWWW###","################################################","################################################"],s:[{t:["A little of water","can't hurt anybody"],d:2500}],e:[],l:120,t:6e4},6:{m:["#########################################################################..............","#########################################################################","#########################################################################","#########################################################################","#########################################################################","#########################################################################","#########################################################################","#########################################################################","#########################################################################","#########################################################################","",".........................................................................R.............","............................................r........r.....r....r......................",".@.F.====.SSSSSSS..F.====.SSSSSSF====.SSSSF.....SSSS.....E.....E....SSS.E..............","##############################################################################........,"],s:[{t:["Butchery"],d:2400}],e:[],l:300,t:2e4},7:{m:["########################",".......................#",".......................#",".............r.........#",".@.....................#","#######SSSS#######..P..#","##################.....#","##################.P...#","##################.....#","##################.....#","#...................P..#","#......................#","#...P.......P..........#","#.......P.=====.P..F...#","#......#################","#..T...#################","#......#################","#......#################","#..P...................#","#.r....................#","#......P....P..........#","#######SSS######.....F.#","################.......#","################.......#","################.E.....#","################.......#","################.......#","################...=...#","################.......#","################.......#","################.....F.#","################.......#","################.......#","################.E.....#","################.......#","################.......#","################....F..#","################.......#","################.......#","################..E....#","################.......#","################.......#","################...E...#","################.......#","################.......#","################...T...#","################.......#","#......................#","#......................#","#..r...................#","#.......P....P....P....#","#......##WWWW##==##SS###","#......#################","#......#################","#..F...#################","#......#################","#......................#","#............P.........#","#..................T...#","#.P..E..P..E...........#","################.......#","################.......#","################.......#","################...F...#","################.......#","################.......#","#......................#","#........P...P.........#","#......................#","#.F...P.....E..P....P..#","#....##==##....##==#####","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#..F.######..E.#########","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#.F..######.E..#########","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#..F.######..E.#########","#....######....#########","#....######....#########","#....######....#########","#....######....#########","#......................#","#......................#","#...................T..#","#..T...................#","#......................#","#................E..F..#","##SSS######WWWW###SSS###","########################","########################","########################"],s:[{t:["Going down"],d:2400}],e:[{x:11,y:19,w:3,h:3,t:["Mind the gap!"],d:2400}],l:400,t:9e4}}},Water=function(t,e){var r=this;r.x=t,r.y=e+8,r.w=32,r.h=24,r.a=1,r.t=$.WA.v,r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.r=function(t){$.x.s(),$.x.ga(.8),$.x.fs("lightskyblue"),$.x.fr(t.x,t.y,r.w,r.h),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h)),$.x.r()}},TNT=function(t,e){var r=this;r.x=t+4,r.y=e+4,r.w=24,r.h=24,r.a=1,r.t=$.TN.v,r.b={b:r.y+r.h,t:r.y,l:r.x,r:r.x+r.w},r.r=function(t){$.x.s(),$.rbe?drwf(t,r):($.x.fs("red"),$.x.fr(t.x,t.y,r.w,r.h),$.x.ss("#000"),$.x.bp(),$.x.mv(t.x+8,t.y),$.x.lt(t.x+8,t.y+r.h),$.x.k(),$.x.bp(),$.x.mv(t.x+16,t.y),$.x.lt(t.x+16,t.y+r.h),$.x.k(),$.x.fs("#fff"),$.x.font="10px sans",$.x.ft("TNT",t.x+2,t.y+13)),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,r.w,r.h)),$.x.r()}},MessageSensor=function(t,e,r,n,s,i,o){var x=this;x.x=t,x.y=e,x.w=r,x.h=n,x.t=s,x.d=i,x.i=o,x.a=1,x.b={b:x.y+x.h,t:x.y,l:x.x,r:x.x+x.w},x.f=function(t){x.i||(x.a=0),t.say(x.t,x.d)},x.r=function(t){$.x.s(),dbg&&($.x.ss("red"),$.x.sr(t.x,t.y,x.w,x.h)),$.x.r()}},Sounds=function(){var t=this;t.s={},t.a=function(e,r){var n=new Audio;n.src=jsfxr(r),t.s[e]=n},t.p=function(e){t.s[e].play()}},HUD=function(t,e){var r=this;r.p=t,r.g=e,r.i=0,r.c=0,r.d=80,r.u=function(){$.rbe&&(r.c+=$.e,r.c>r.d&&(r.c=0,r.i+=1,r.i>$.RB.c.length-1&&(r.i=0)))},r.r=function(){$.x.s(),$.x.fs("#fff"),$.x.font="20px serif",$.x.ft("HEALTH: ",100,22),$.x.ft("TIME: "+String(floor(r.g.t.l/1e3)),400,22),$.x.ss("#fff"),$.x.lineWidth=2,$.x.sr(190,6,180,18),$.x.fs("gray"),$.x.fr(191,7,178,16),$.x.fs("red"),$.x.fr(191,7,floor(178*r.p.hl/r.p.mhl),16),$.rbe&&($.x.fs("#fff"),$.x.ft("RAINBOW: ",80,50),$.x.sr(190,36,300,18),$.x.fs("gray"),$.x.fr(191,37,298,16),$.x.fs($.RB.c[r.i]),$.x.fr(191,37,floor(298*r.p.rbc/$.RB.t),16)),$.x.r()}};window.raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.caf=window.cancelAnimationFrame||window.mozCancelAnimationFrame;var $={},dbg=!1,abs=Math.abs,cos=Math.cos,sin=Math.sin,ceil=Math.ceil,floor=Math.floor,max=Math.max,pow=Math.pow,sqrt=Math.sqrt,round=Math.round,rnd=Math.random,now=Date.now,PI=Math.PI,iir=function(t,e,r){return e>t?e:t>r?r:t},rndr=function(t,e){return floor(rnd()*(e-t))+t},rnde=function(t){return t[rndr(0,t.length)]};$.init=function(t,e,r){$.e=0,t=$.byId(t),$.x=t.getContext("2d"),$.x.s=$.x.save,$.x.r=$.x.restore,$.x.f=$.x.fill,$.x.k=$.x.stroke,$.x.tn=$.x.translate,$.x.ro=$.x.rotate,$.x.ft=$.x.fillText,$.x.sr=$.x.strokeRect,$.x.cr=$.x.clearRect,$.x.mt=$.x.measureText,$.x.di=$.x.drawImage,$.x.sc=$.x.scale,$.x.bp=$.x.beginPath,$.x.mv=$.x.moveTo,$.x.lt=$.x.lineTo,$.x.fr=function(t,e,r,n){$.x.fillRect(floor(t),floor(e),r,n)},$.x.fs=function(t){$.x.fillStyle=t},$.x.ss=function(t){$.x.strokeStyle=t},$.x.clr=function(t){$.x.cr(0,0,$.vw,$.vh),$.x.fs(t||"black"),$.x.fr(0,0,$.vw,$.vh)},$.x.ga=function(t){$.x.globalAlpha=t},$.x.ct=function(t,e,r,n,s,i){s=s||"serif",i=i||"",$.x.fs(n||"#000"),$.x.font=i+" "+String(e)+"px "+s;var o=$.x.mt(t);$.x.ft(t,($.vw-o.width)/2,r)},$.vw=t.width=e,$.vh=t.height=r,$.g={},$.i=new Input,$.o=new Collisions,$.c=new Camera(e,r),$.s=new Sounds},$.byId=function(t){return document.getElementById(t)},$.show=function(t){$.byId(t).style.opacity=1},$.hide=function(t){$.byId(t).style.opacity=0},$.BL={v:1,t:300,d:.8,ds:.3},$.BU={v:2,t:3e3,d:15,ds:6},$.EL={v:4,t:4800,d:3,ds:5},$.PO={v:8,t:3e3,d:2.5},$.SH={v:16,t:2600,ds:30},$.RB={v:32,t:5e3,c:["red","orange","yellow","limegreen","blue","blueviolet"],bg:"#ff9bd3"},$.WA={v:256},$.TN={v:512,t:0,d:30},$.POT=2e3,$.FD=110;var duz=function(t,e,r){return 0!==t&&(t-=e,0>=t&&(t=0,void 0!==r&&r())),t},drst=function(t,e,r,n){return t-=e,0>=t&&(t=r,void 0!==n&&n()),t},drwf=function(t,e){$.x.fs("red"),$.x.bp(),$.x.arc(t.x-10,t.y-10,e.w/3,0,2*PI),$.x.f(),$.x.bp(),$.x.arc(t.x-10,t.y+10,e.w/3,0,2*PI),$.x.f(),$.x.bp(),$.x.arc(t.x+10,t.y-10,e.w/3,0,2*PI),$.x.f(),$.x.bp(),$.x.arc(t.x+10,t.y+10,e.w/3,0,2*PI),$.x.f(),$.x.bp(),$.x.fs("yellow"),$.x.arc(t.x,t.y,e.w/3,0,2*PI),$.x.f()};window.addEventListener("load",function(){$.start()}),$.start=function(){$.init("c",640,480),$.i.b([13,65,37,38,39,40,49,50,51,52]),$.s.a("s",[0,,.0989,.3295,.2402,.4314,,,,,,.4986,.5758,,,,,,1,,,,,.5]),$.s.a("bl",[0,,.1622,.2831,.0177,.7183,.0176,-.6492,,,,,,.4253,.0418,,,,1,,,,,.5]),$.s.a("el",[0,,.116,.0087,.0639,.5799,.2,-.2526,,,,,,.7269,-.239,,,,1,,,,,.5]),$.s.a("bu",[3,,.143,.6199,.3681,.0101,,.0635,,,,.6529,.8676,,,,,,1,,,,,.5]),$.s.a("j",[0,,.1294,,.2786,.3422,,.2308,,,,,,.1903,,,,,1,,,,,.5]),$.s.a("d",[1,.0178,.5066,.022,.8284,.2873,,-.0044,-.4035,-.049,.3671,-.4245,.5258,.544,.0047,.2887,,-.2925,.959,.0046,,.0715,-.0178,.5]),$.s.a("k",[0,.0173,.3085,,.931,.544,,-.2297,-.096,.0762,.647,.9264,-.981,,.002,,.0321,.2727,.9998,-.0649,.4995,.0222,-.2578,.5]),$.s.a("ad",[0,,.3789,,.3857,.4568,,.1294,,.4663,.4357,,,.0749,,,,,1,,,,,.5]),$.s.a("pl",[0,,.062,,.2621,.7185,,-.5637,,,,,,.0385,,,,,1,,,.1982,,.5]),$.s.a("toa",[1,,.657,.0013,.5775,.2682,,.2757,-.2594,,,-.1283,.179,,.1387,.8701,-.4883,-.0501,.8942,.0035,.506,1e-4,-1e-4,.5]),$.s.a("tot",[1,,.0515,,.1604,.4166,,.1333,,,,,,,,.7266,,,1,,,,,.5]),$.s.a("xp",[3,,.28,.47,.3694,.26,,-.3587,,,,,,,,,,-.157,1,,,,,.5]),$.s.a("sp",[1,,.1795,,4e-4,.7687,.0614,-.6142,,,,,,.3246,.0199,,,,1,,,.2508,,.33]),$.s.a("b1",[1,.2235,.01,.0178,.7708,.278,,-.3022,.8384,,.9594,-.3439,.5078,.3697,,.8606,-6e-4,-.6092,.9437,.3918,,.0087,.0603,.23]),$.s.a("b2",[2,.467,.3716,.1497,.4058,.5584,,-.0246,-.0415,.079,.9803,-.9292,,,.713,,-.0277,-.3878,.9875,,.1455,.0099,,.29]),$.s.a("b3",[2,.0034,.0882,.36,.7488,.13,,,-.0409,,,.909,.8699,.1297,,.0077,-.0222,.0108,.9316,.7784,.4954,.002,-.1106,.21]),$.s.a("b4",[0,.0897,.9729,.1514,.7771,.6074,,.3006,.9111,,,.232,,.8576,-.193,.6595,.0443,-.2262,.3791,-.0462,,.0012,-.0822,.28]),$.s.a("b5",[2,.5118,.5396,.2344,.0218,.4481,,3e-4,.8822,,,-.7807,.1024,,.3144,.8573,-.0234,-.3532,.3484,-.0216,.2002,.7388,3e-4,.33]),$.s.a("b6",[2,.6502,.0578,.1576,.8114,.6487,,.0119,.0109,.2188,.9252,-.4009,,,.4876,,-.4963,.0723,.9595,.1278,,.4881,.0167,.3]),$.s.a("b7",[0,.5891,.445,.002,.7999,.24,,6e-4,-.0051,-.9503,.0566,.3562,,.1992,,.3551,.2477,.0299,.8817,,,.0074,.1778,.16]),$.s.a("rb",[2,.1327,.22,.19,.3846,.78,,.28,-.12,,,.4599,,.8248,-.0232,.4414,-4e-4,.5222,.9392,-.0046,.9288,.1549,.0534,.5]),$.ingame=0,$.menu=new MenuScene,$.game=new GameScene,$.menu.loop()};var MenuScene=function(){var t=this;t.d=100,t.c=0,t.t={s:0,e:0},t.loop=function(){return $.e=0!==t.t.s?new Date-t.t.s:0,t.c<t.d&&(t.c+=$.e),$.x.clr("ivory"),$.x.s(),$.x.ct("Please, Die",75,200,0,0,"small-caps bold"),$.x.ct("Press Enter to play",20,420,"firebrick"),$.x.ct("Created by @satanas82 for the js13k compo 2015",14,470,"gray"),$.x.r(),$.i.p(13)&&t.c>=t.d?($.s.p("s"),$.ingame=1,$.game.start()):(t.t.s=new Date,
void raf(t.loop.bind(t)))}},GameScene=function(){var t=this;t.t={l:0,s:0,e:0,w:0,bf:0},t.ssp=0,t.wn=0,t.vmsg=rnde(["The aim of all live, is death–S. Freud","Nothing in life is certain but death and taxes–B. Franklin","Immortality: a fate worse than death–E. Shoaff","You only die once–"]),$.rbe=0,$.lvl=1,t.init=function(){$.rbe=0,$.ingame=1,t.dd=1e3,t.t.s=0,t.t.e=0,t.t.w=0,t.lv=new Levels,t.m=new Map(30,24),t.m.l(t.lv.l[$.lvl].m),t.t.l=t.lv.l[$.lvl].t,$.c.sw(32*t.m.w,32*t.m.h),$.g.b=new Group,$.g.t=new Group,$.g.z=new Group,$.g.p=new Group,$.g.r=new Group,$.g.e=new Group,$.g.x=new Group;var e,r,n,s;for(r=0;r<t.m.h;r++)for(e=0;e<t.m.w;e++)n=32*e,s=32*r,"#"===t.m.m[e][r]&&$.g.b.a(new Block(n,s)),"@"===t.m.m[e][r]&&(t.p=new Player(n,s,t.lv.l[$.lvl].l)),"T"===t.m.m[e][r]&&$.g.z.a(new TNT(n,s)),"F"===t.m.m[e][r]&&$.g.t.a(new Fire(n,s)),"S"===t.m.m[e][r]&&$.g.t.a(new Saw(n,s)),"E"===t.m.m[e][r]&&$.g.t.a(new Electricity(n,s)),"R"===t.m.m[e][r]&&$.g.r.a(new Rainbow(n,s,80)),"r"===t.m.m[e][r]&&$.g.r.a(new Rainbow(n,s,48)),"="===t.m.m[e][r]&&$.g.r.a(new RainbowBlock(n,s)),"P"===t.m.m[e][r]&&$.g.p.a(new Pill(n,s)),"W"===t.m.m[e][r]&&$.g.z.a(new Water(n,s));t.h=new HUD(t.p,t),t.lv.l[$.lvl].s.forEach(function(e){t.p.say(e.t,e.d,e.w)}),t.lv.l[$.lvl].e.forEach(function(t){$.g.e.a(new MessageSensor(32*t.x,32*t.y,32*t.w,32*t.h,t.t,t.d))}),$.c.st(t.p)},t.loop=function(){$.e=0!==t.t.s?new Date-t.t.s:0,t.t.l-=$.e,$.e<160&&($.x.clr($.rbe?$.RB.bg:t.lv.bgc),t.p.u(),$.g.t.u(),$.g.z.u(),$.g.p.u(),$.g.e.u(),$.g.x.u(),t.h.u(),$.c.u(),$.g.b.r(),$.g.p.r(),$.g.t.r(),$.g.z.r(),$.c.r(t.p),$.g.r.r(),$.g.e.r(),$.g.x.r(),t.cw(),t.bgfx(),t.p.a>0?(t.t.l<20&&(t.dd=300,t.p.k()),t.h.r()):t.dd>0?t.dd-=$.e:(0===t.p.a&&$.lvl>=7&&t.end(),0===t.p.a&&$.lvl<7&&t.next(),0!==t.p.a&&t.game_over()),$.i.u()),t.t.s=new Date,$.ingame&&raf(t.loop.bind(t))},t.start=function(){t.init(),t.loop()},t.game_over=function(){t.ssp||(t.ssp=1,$.s.p("k"));var e="hotpink";return $.x.s(),t.mo(),$.x.ct("You're Still Alive",60,130,e,0,"small-caps"),$.x.ct("And here that is a tragedy!",35,200,e,0,"italic"),$.x.ct("Press Enter to try again",20,440,e),$.x.r(),$.i.p(13)?($.s.p("s"),t.init()):void 0},t.next=function(){t.ssp||(t.ssp=1,$.s.p("ad"));var e,r,n="#fff";return $.x.s(),t.mo(),$.x.ct("Rest In Peace",70,130,n,0,"small-caps"),$.x.ct(t.vmsg.split("–")[0],25,200,"firebrick",0,"italic"),e=t.vmsg.split("–")[1],e&&(r=500-$.x.mt(t.vmsg.split("–")[1]).width,$.x.ft(e,r,250)),$.x.ct("Press Enter to play next level",20,440,n),$.x.r(),$.i.p(13)?($.s.p("s"),$.lvl+=1,t.init()):void 0},t.end=function(){t.ssp||(t.ssp=1,$.s.p("ad"));var e="#fff";$.x.s(),t.mo(),$.x.ct("The End",90,130,"firebrick",0,"small-caps"),$.x.ct("Thanks for playing!",30,200,e),$.x.ct("Press Enter to exit",20,440,e),$.x.ct("Created by @satanas82 for the js13k compo 2015",18,470,"gray"),$.x.r(),$.i.p(13)&&($.lvl=1,$.ingame=0,$.i.c(),$.s.p("s"),$.menu.loop())},t.mo=function(){$.x.fs("rgba(0,0,0,0.75)"),$.x.fr(0,0,$.vw,$.vh)},t.cw=function(){t.t.l<=3e4&&0===t.wn?(t.p.say(["Come on!","You only have to die"],3200),t.wn=1):t.t.l<=2e4&&1===t.wn?(t.p.say(["I'm not joking"],3e3),t.wn=2,$.s.p("toa")):t.t.l<=15e3&&2===t.wn?(t.p.say(["Time is running out!"],3500),t.wn=3):t.t.l<=1e4&&3===t.wn?(t.p.say(["Tic, tac, tic, tac","Die, die, die"],3500),t.wn=4):t.t.l<=6e3&&4===t.wn&&(t.p.say(["Seriously... DIE!!!"],4e3),t.wn=5),t.t.l<=15e3&&t.t.l>0&&t.p.a&&(t.t.w+=$.e,t.t.w>=500&&(t.t.w=0,$.s.p("tot")))},t.bgfx=function(){t.p.a&&(t.t.bf+=$.e,$.rbe?t.t.bf>=50&&(t.t.bf=0,$.s.p("rb")):t.t.bf>=2500&&(t.t.bf=0,$.s.p(rnde(["b1","b2","b3","b4","b5","b6","b7"]))))}};