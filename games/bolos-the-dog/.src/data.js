let SNDFIU = [[24,58,73,64,50,53,56,68,75,83,115,143,156,159,173,181,171,195,205,189,141,97,97,91,87,78,64,61,62,66],[40,83,104,105,91,82,79,77,70,77,79,89,89,82,89,97,100,123,148,178,198,195,165,117,106,87,78,80,81,78],[26,66,90,89,74,70,73,80,87,121,173,198,200,193,196,201,194,169,125,117,126,123,104,85,90,85,74,66,70,71],[26,54,74,78,83,87,78,76,120,172,206,212,195,151,123,128,120,99,78,75,79,94,101,93,70,57,43,43,42,36],[53,83,95,97,96,93,95,149,181,187,175,154,136,110,87,82,75,87,94,85,65,68,73,65,63,54,37,30,32,33],[19,55,72,66,50,43,41,67,94,102,97,99,93,76,91,99,119,158,184,191,175,129,91,85,85,88,80,68,65,57],[35,71,99,105,105,98,115,162,187,197,189,157,113,91,87,85,79,89,108,115,100,64,65,70,65,52,45,32,27,21],[23,48,65,80,99,107,99,102,126,156,173,189,197,201,198,178,128,92,98,90,82,85,94,94,86,81,70,70,70,63],[18,47,65,64,56,64,54,48,58,79,105,132,156,172,179,182,185,191,183,151,86,71,77,82,72,71,70,63,64,73],[24,59,74,77,75,74,67,67,78,139,183,207,210,190,143,103,97,104,101,81,67,77,81,89,107,105,81,52,46,47],[70,91,103,110,112,112,151,175,171,139,93,98,93,70,82,94,80,42,26,18,8,23,38,36,19,0,0,0,0,0],[48,81,98,91,77,62,36,47,60,68,73,79,76,73,106,128,136,145,144,155,174,182,188,189,172,137,98,112,141,159],[25,66,86,83,93,106,95,74,77,71,96,135,161,173,182,183,190,199,194,162,110,102,100,103,95,82,73,75,74,68],[45,83,113,120,110,102,80,59,70,80,79,80,116,140,153,157,153,156,162,171,174,179,180,180,167,135,102,96,91,97],[60,105,130,132,110,99,88,79,95,133,160,179,186,187,190,186,161,106,96,98,98,96,99,102,87,80,89,85,85,81],[33,52,66,66,72,78,71,72,123,167,198,217,218,192,127,84,74,71,83,85,84,91,105,115,107,84,59,56,55,55]]
let SNDNOISE = [[47,74,89,83,64,63,61,72,87,87,68,44,35,30,29,60,87,101,97,82,74,71,62,65,70,62,58,63,73,78],[62,88,100,90,67,46,47,64,80,86,66,36,26,22,42,58,75,95,99,87,70,69,56,56,61,55,47,46,52,54],[57,83,95,87,61,43,36,75,93,91,74,54,33,24,34,48,62,73,74,68,65,66,57,42,39,38,32,27,32,38],[62,79,84,77,58,43,34,71,91,89,67,41,40,36,35,54,71,71,64,65,59,60,52,47,66,64,55,49,46,54],[71,92,99,89,68,55,53,65,80,79,56,40,43,46,50,55,60,59,66,60,52,52,42,59,64,57,51,52,61,63],[55,76,86,78,68,60,45,73,85,80,58,43,46,50,51,45,54,69,79,71,66,67,54,51,54,53,55,57,60,69],[67,93,109,106,101,106,90,62,85,87,68,45,49,46,42,45,45,60,67,64,47,42,36,33,42,43,33,21,26,30],[150,171,178,173,162,142,121,118,116,126,127,119,124,131,138,137,127,126,128,124,123,120,125,126,120,109,111,114,117,112],[147,165,170,162,141,109,95,98,102,110,115,113,112,115,125,127,118,123,128,130,127,125,124,124,112,112,119,116,111,114],[134,158,166,157,132,102,90,87,96,109,108,103,108,111,120,119,117,122,125,124,126,127,128,128,120,111,109,114,115,118],[139,159,161,142,113,89,84,92,98,106,108,102,100,106,112,110,112,115,116,117,115,115,125,120,116,109,105,110,115,117],[114,144,151,136,98,63,59,66,84,96,92,76,85,100,108,106,114,116,110,113,120,121,113,102,97,95,95,102,100,110],[113,143,149,136,101,65,61,64,77,89,87,76,83,98,110,111,116,116,111,112,118,117,112,103,97,93,98,102,103,113],[103,135,143,129,94,62,61,61,71,84,87,81,86,102,115,114,110,107,110,110,113,111,105,101,94,90,94,97,101,107],[119,135,138,123,91,61,62,60,65,78,84,82,86,101,113,111,108,104,109,111,117,112,104,102,95,86,93,98,98,113],[95,122,130,115,82,72,77,71,88,97,91,85,95,112,119,122,123,119,111,107,118,121,113,102,93,87,99,105,111,118]]
let SNDTAC = [[42,67,85,79,56,49,43,64,87,99,100,100,95,83,78,82,85,90,97,104,117,131,135,129,119,120,118,115,109,106],[51,69,83,76,61,56,41,34,49,60,72,77,67,51,59,66,65,73,97,110,115,125,120,109,101,108,115,125,126,122],[40,89,110,105,78,68,68,74,90,93,89,89,82,71,65,63,67,68,64,71,73,86,91,101,102,114,120,118,114,106],[81,116,130,120,93,98,100,108,122,129,129,119,102,85,81,79,80,83,91,106,117,127,137,144,140,141,141,140,134,124],[46,75,93,94,89,84,86,84,83,93,83,67,58,51,49,73,92,102,101,90,93,87,80,81,86,94,94,91,88,86],[69,87,104,99,73,44,36,27,27,19,15,14,11,3,0,0,1,0,0,1,15,21,25,18,5,9,10,10,14,13],[44,64,78,76,63,57,66,79,94,95,88,78,67,62,56,55,60,58,39,53,68,84,109,128,132,126,128,129,126,114],[58,95,108,100,85,87,72,47,50,52,46,37,24,21,17,18,25,25,8,7,16,30,53,70,74,69,72,72,67,58],[73,112,132,128,109,104,92,84,79,80,84,78,83,86,90,83,81,71,69,76,83,88,89,86,75,74,75,83,87,86],[32,61,83,87,71,53,59,78,81,88,97,101,97,93,107,126,133,131,132,145,162,167,167,161,143,152,163,160,156,148],[43,74,86,77,62,56,59,71,78,89,94,99,105,102,94,100,114,126,128,134,146,148,148,154,160,160,148,148,149,148],[70,95,109,97,74,80,90,90,78,71,58,61,58,59,67,76,78,70,70,72,69,72,81,80,78,74,75,73,68,68],[60,91,114,113,88,69,73,69,58,51,39,47,44,35,37,49,52,45,46,47,43,46,52,51,48,44,47,47,44,44],[81,109,120,108,82,56,41,29,25,15,14,12,0,0,7,17,24,19,5,0,0,0,0,0,0,0,0,0,0,0],[49,80,96,93,79,77,94,118,125,119,109,104,106,104,102,105,106,113,129,143,151,151,156,155,155,152,145,145,135,129],[57,97,111,97,78,83,70,55,60,52,40,35,32,30,27,30,36,45,58,69,74,73,77,76,76,74,69,69,60,54]]

const sndProc = (snd) => {
  const sliceN = 30
  var dataArrayAlt2 = Array.from(snd).slice(0, sliceN)
  var lags = dataArrayAlt2.reduce((a, c, i, l) => {
    for (var j = 0; j < 50; j++) {
      if (i > j) a.push(Math.sqrt(Math.pow(c - l[i - j], 2)))
    }        
    return a
  }, dataArrayAlt2)

  // normalize
  const lagMax = Math.max.apply(0, lags)
  lags = lags.map(item => item/lagMax)
  return lags
}

window.MODEL = fitBayes([
  SNDFIU.map(s => sndProc(s)),
  SNDNOISE.map(s => sndProc(s)),
  SNDTAC.map(s => sndProc(s))
])
