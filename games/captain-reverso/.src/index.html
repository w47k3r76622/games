<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><title>Captain Reverso</title><style>#wrap,canvas{position:absolute}body{background:#000;overflow:hidden}#wrap{top:50%;left:50%}</style></head><body><div id=wrap><canvas id=cm></canvas><canvas id=cfg></canvas></div><script>'use strict';(function(ua,aa,N){function u(a,b,d,e,h){this.A=new v(a,b);this.C=d||10;this.F=e||10;this.r=h||0;this.N=[];this.ba=[];this.va=new v;this.wa=new v;this.Oa();this.e=!0}function D(a,b){a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}function O(a,b){for(var d=Object.keys(b),e=d.length;e--;)a[d[e]]=b[d[e]]}function U(){return ua.createElement("canvas")}function E(a,b,d){(d||aa).addEventListener(a,b)}function va(a){function b(a){return parseInt(a+
		""+a,16)}return{r:b(a[0]),Da:b(a[1]),R:b(a[2])}}function V(a,b,d){return 0<(b.x-a.x)*(d.y-a.y)-(b.y-a.y)*(d.x-a.x)}function ka(a){["mozI","webkitI","msI","i"].forEach(function(b){a[b+"mageSmoothingEnabled"]=!1});return a}function H(a,b,d){a.shadowBlur=200;a.shadowColor="#000";a.lineWidth=50;a.strokeRect(-25,-25,b+75,d+75);a.shadowBlur=0;a.lineWidth=2}function I(a,b,d,e){var h=b.x-a.x;b=b.y-a.y;var x=e.x-d.x,c=e.y-d.y,k=-x*b+h*c;e=(-b*(a.x-d.x)+h*(a.y-d.y))/k;d=(x*(a.y-d.y)-c*(a.x-d.x))/k;return 0<=
		e&&1>=e&&0<=d&&1>=d?{x:a.x+d*h,y:a.y+d*b}:null}function wa(a,b){this.C=a-20;this.F=b-20;this.Ha=this.Ga=this.Ba=this.ka=this.ab=this.$a=this.y=this.x=0;this.H=[{},{},{},{}]}function Ma(){this.na=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;.01>this.A&&(this.A=.01);a=this.R+this.A+this.e;.18>a&&(a=.18/a,this.R*=a,this.A*=a,this.e*=a)}}function xa(a,b,d,e,h,x){h-=2;a.save();a.translate(b,d);a.rotate(e);a.beginPath();a.moveTo(-29,h/2);a.lineTo(-29,-h/2);a.lineTo(29,-h/2);
		a.lineTo(29,h/2);a.lineWidth=2;a.strokeStyle=x||"#357";a.stroke();a.restore()}function ya(a){this.H=this.t=a;this.C()}function v(a,b){this.x=a||0;this.y=b||0}function P(a,b,d,e){u.call(this,a,b,e,100,d)}function za(a,b,d){u.call(this,a,b,100,100,d)}function Aa(a,b,d){u.call(this,a,b,200,100,d)}function Ba(a,b){this.A=U();this.A.width=a;this.A.height=b;this.Y=this.A.getContext("2d");this.Y.fillStyle="#024";this.Y.fillRect(0,0,a,b);var d=this.Y.getImageData(0,0,a,b),e=d.data,h,x;x=0;for(h=e.length;x<
		h;x+=4){var c=.5>Math.random()?-5:5;e[x]+=c;e[x+1]+=c;e[x+2]+=c}this.Y.putImageData(d,0,0);H(this.Y,a,b);this.Ab=[new J(-10,b/2,0,20,b+40),new J(a/2,-10,0,a,20),new J(a/2,b+10,0,a,20),new J(a+10,b/2,0,20,b+40)]}function la(a,b,d,e){this.t=e;e.P=this;this.D=this.H=!1;u.call(this,a,b,60,200,d)}function ma(a,b,d){this.xa=this.Ca=this.O=this.$=0;this.M=this.ha=null;this.B=w.B.tr;this.L=new na(a,b,this.B.C,this.L);u.call(this,a,b,this.B.C,this.B.F,d);this.V=new u(a,b+this.da/2,this.B.C,this.B.C,0);this.ea=
		new u(a,b+this.da/2);this.Z=new u(a,b-this.da/2);d&&(a=(new v(-Math.sin(d),Math.cos(d))).J(this.da/2),this.V.J(this.A.A().D(a),d),this.ea.J(this.A.A().D(a),d),this.Z.J(this.A.A().B(a),d))}function K(a,b,d){this.t=this.P=null;var e=w.B.tl;this.B=U();this.B.width=e.C;this.B.height=e.F;var h=this.B.getContext("2d");h.drawImage(e.fa,0,0);var x=h.getImageData(0,0,e.C,e.F),c=x.data,k=Ca.shift();Ca.push(k);for(var k=va(k),f=0,g=c.length;f<g;f+=4)c[f]===c[f+1]&&c[f]===c[f+2]&&(c[f]+=k.r,c[f+1]+=k.Da,c[f+
		2]+=k.R);h.putImageData(x,0,0);u.call(this,a,b,e.C,e.F,d);this.L=new na(a,b,this.C,this.L);this.da=this.F-40;this.ga=new u(a,b-this.da/2,this.C,this.C,0);this.pa=new v(a,b+this.da/2);d&&(a=(new v(-Math.sin(d),Math.cos(d))).J(this.da/2),this.ga.J(this.A.A().B(a),d),this.pa=this.A.A().D(a))}function J(a,b,d,e,h){u.call(this,a,b,e||20,h||200,d)}function A(a,b,d,e,h,c,f,k){this.x=a;this.y=b;this.Ua=e;this.C=h||250;this.F=c||50;this.D=0;this.Xa=1;this.ca=!1;this.e=f===N?1:f;this.X=new l(a,b,d,k||4,this.e?
		0:"999")}function na(a,b,d,e,h){this.x=a;this.y=b;this.B=d/e;this.C=d;this.F=5;this.H=e;this.A="#"+(h||"0f0")}function Da(a,b){this.A=a.A;this.t=b;this.y=this.x=this.D=this.Ka=this.ia=0}function l(a,b,d,e,h){this.x=a;this.y=b;this.B=e||2;this.ta=w.B.f;this.mb=h;this.A=U();this.aa(d)}function oa(a,b,d){this.R=[];this.x=a;this.y=b;this.D=0;b=Object.keys(d);for(var e=b.length,h=this.y-(70*e-20)/2+25,c=0;c<e;c++)this.R.push(new A(a,h+70*c,b[c],d[b[c]]))}function pa(a,b,d){this.x=a;this.y=b;this.B=d;this.C=
		20}function Ea(a,b){this.x=a;this.y=b;this.r=70;this.t=null;this.ia=this.Wa=new v(0,-this.r);this.Za=!1;this.X=new l(this.x,this.y-5,"trailer",2)}function q(a,b,d){L=a;B[L].ra(b,d);f.jb()}function Fa(){var a=qa();W+=Math.min(1,(a-ra)/1E3);for(ra=a;W>t;)W-=t,B[L].K();r.clearRect(0,0,800,600);c.save();c.translate(Math.round(g.x)+g.Ga,Math.round(g.y)+g.Ha);B[L].G();c.restore();requestAnimationFrame(Fa)}var t=1/60,y=0,L=null,Ga=localStorage.getItem("tc"),Q=Ga?+Ga:1,X=[{w:800,h:600,o:[],p:[200,50,0],t:[0,
		0,0],tr:[200,500,180],tt:[700,230,90]},{w:800,h:800,o:[2,310,600,0,2,490,600,0,6,400,750,0],p:[750,320,90],t:[60,40,20],tr:[400,100,0],tt:[400,600,180]},{w:800,h:600,o:[2,170,500,0],p:[490,550,180],t:[90,60,30],tr:[690,100,0],tt:[80,500,180]},{w:1E3,h:600,o:[2,110,500,0,2,630,500,0,5,630,350,0,2,390,100,0,5,390,250,0],p:[460,40,270],t:[90,70,40],tr:[50,500,180],tt:[910,500,180]},{w:1040,h:600,o:[2,930,100,0,2,470,100,0,5,470,550,0,2,110,500,0,6,470,300,90],p:[170,550,180],t:[90,60,30],tr:[50,500,
		180],tt:[990,100,0]},{w:800,h:1100,o:[2,210,900,0,2,100,350,90,5,250,350,0,2,250,100,0,6,700,450,0,6,280,750,0,6,280,1050,0],p:[50,50,0],t:[150,100,60],tr:[740,100,0,320,960,270],tt:[320,850,270,90,1E3,180]},{w:800,h:1160,o:[2,250,100,0,2,250,500,0,2,100,350,90,2,250,860,0,6,700,350,0,6,700,1110,0,5,250,350,0,6,250,1060,90],p:[750,730,90],t:[150,90,60],tr:[30,100,0,70,1060,180],tt:[130,1060,180,700,50,90]},{w:1060,h:600,o:[2,170,100,0,2,170,300,0,2,350,300,0,2,350,500,0,2,530,100,0,2,530,300,0,2,
		710,300,0,2,710,500,0,2,890,100,0,2,890,300,0],p:[980,50,0],t:[150,90,60],tr:[80,100,0],tt:[980,500,180]},{w:800,h:600,o:[2,170,500,0,2,280,190,90,6,130,100,90,5,210,350,0,6,360,350,0,6,750,300,90],p:[40,50,0],t:[120,90,60],tr:[40,500,180,280,510,270],tt:[280,450,270,280,130,270]},{w:800,h:980,o:[2,500,290,90,2,700,290,90,2,200,490,90,2,400,490,90,2,500,690,90,2,700,690,90,2,100,190,90,5,350,310,0,5,50,490,0,5,550,490,0,5,350,670,0,2,100,790,90,6,100,930,0,6,100,50,0],p:[750,490,90],t:[150,120,90],
		tr:[700,40,90,700,940,90],tt:[100,840,270,100,140,270]},{w:860,h:960,o:[2,660,470,90,2,490,200,0,2,460,610,90,2,570,580,0,2,150,200,0,5,150,50,0,5,530,50,0,6,810,560,90,5,310,630,0,5,50,630,0,6,400,350,0,5,150,350,0],p:[40,50,0],t:[180,150,100],tr:[380,30,90,760,30,90,380,90,90],tt:[730,580,0,610,580,0,670,580,0]},{w:860,h:640,o:[2,380,190,90,2,560,430,90,2,110,340,0,2,110,540,0,6,180,190,0,6,580,190,0,5,410,430,0,6,760,430,0],p:[50,590,180],t:[150,120,70],tr:[380,110,90],tt:[760,530,90]}],Ha={c:{A:5,
		B:[0,,.0135,.32,.16,.33,,,,,,,.5,,,,,,1,,,,,.4]},h:{A:10,B:[3,,.2,.5,.05,.04,,,,,,-.25,.67,,,,,,1,,,,,.5]},w:{A:1,B:[0,,.34,,.49,.49,,,,,,.52,.5,,-1,,-1,,1,-1,,,-1,.5]},f:{A:1,B:[0,,.44,,.2,.37,,-.12,,,,,,.01,,,,,.74,,,.24,,.5]},r:{A:5,B:[0,.06,.4,,.06,.56,,,,,,,,,,,,,.5,,,,-1,.3]},a:{A:5,B:[3,,.18,.17,.64,1,,,,,,,,-1,-1,,,,1,,,,,.4]}},B={},Na="tl t w c p bs bb".split(" "),C,ra,g,F,R,M,sa;u.prototype={oa:function(a){if(a.e){var b,d,e,h,c,f,k,g,m=Infinity,l;for(b=0;4>b;b++){e=2>b?this.ba[b]:a.ba[b-
		2];c=f=h=this.N[0].za(e);for(d=1;4>d;d++)h=this.N[d].za(e),h<c?c=h:h>f&&(f=h);k=g=h=a.N[0].za(e);for(d=1;4>d;d++)h=a.N[d].za(e),h<k?k=h:h>g&&(g=h);d=c<k?k-f:c-g;if(0<d)return null;d=Math.abs(d);d<m&&(m=d,l=e.A(),0>this.A.A().B(a.A).za(l)&&l.J(-1))}return l.J(m)}},pb:function(a){for(var b=0;b<a.N.length;b++){var d=a.N[b];if(!(V(this.N[0],this.N[1],d)&&V(this.N[1],this.N[2],d)&&V(this.N[2],this.N[3],d)&&V(this.N[3],this.N[0],d)))return!1}return!0},Oa:function(){this.va.aa(Math.cos(this.r),Math.sin(this.r)).J(this.C/
		2);this.wa.aa(-Math.sin(this.r),Math.cos(this.r)).J(this.F/2);this.N[0]=this.A.A().B(this.va).B(this.wa);this.N[1]=this.A.A().D(this.va).B(this.wa);this.N[2]=this.A.A().D(this.va).D(this.wa);this.N[3]=this.A.A().B(this.va).D(this.wa);this.ba[0]=this.N[1].A().B(this.N[0]);this.ba[0]=this.ba[0].ya(this.ba[0].length());this.ba[1]=this.N[3].A().B(this.N[0]);this.ba[1]=this.ba[1].ya(this.ba[1].length())},Ea:function(){this.ua||(this.ua=Math.sqrt(this.C*this.C+this.F*this.F)/2);return this.A.x+this.ua<
		-g.x||this.A.x-this.ua>800-g.x||this.A.y+this.ua<-g.y||this.A.y-this.ua>600-g.y?!1:!0},J:function(a,b){this.A.qb(a);b!==N&&(this.r=b);this.Oa()},S:function(a){this.A.D(a);this.Oa()}};var Ia={f:[72,0,156,5],l:[40,0,32,32],r:[0,0,40,46],tl:[0,46,20,90],tr:[40,32,20,46],tv:[72,5,26,30]},Y=90*Math.PI/180,ba=2*Math.PI,qa=aa.performance&&aa.performance.now?function(){return aa.performance.now()}:function(){return+new Date},Ca=["055","050","005","000"];wa.prototype={save:function(){this.$a=this.x;this.ab=
		this.y;this.Ha=this.Ga=this.y=this.x=0},restore:function(){this.x=this.$a;this.y=this.ab},kb:function(a,b){this.x=this.C/2-a;this.y=this.F/2-b;this.ka=this.Ha=this.Ga=0},sa:function(){this.ka=3;this.Ba=360*Math.random()},K:function(a,b,d){b=a.x<this.C/2?a.x/this.C:a.x>b-this.C/2?1-(b-a.x)/this.C:.5;d=a.y<this.F/2?a.y/this.F:a.y>d-this.F/2?1-(d-a.y)/this.F:.5;this.x+=(this.C*b+10-a.x-this.x)*t;this.y+=(this.F*d+10-a.y-this.y)*t;this.ib();0<this.ka&&(this.Ba+=45,this.Ga=Math.sin(this.Ba)*this.ka,this.Ha=
		Math.cos(this.Ba)*this.ka,this.ka-=10*t)},ib:function(){this.H[0].x=-this.x;this.H[0].y=-this.y;this.H[1].x=-this.x+this.C;this.H[1].y=-this.y;this.H[2].x=-this.x+this.C;this.H[2].y=-this.y+this.F;this.H[3].x=-this.x;this.H[3].y=-this.y+this.F}};var m={u:0,d:0,l:0,r:0,a:0,p:0},Ja={37:"l",38:"u",39:"r",40:"d",65:"l",68:"r",83:"d",87:"u",32:"a",27:"p",13:"a"},Ka=0,La=0,ia=0;E("keydown",function(a){(a=Ja[a.keyCode])&&(m[a]=1)});E("keyup",function(a){(a=Ja[a.keyCode])&&(m[a]=0)});E("mousemove",function(a){Ka=
		a.offsetX===N?a.layerX:a.offsetX;La=a.offsetY===N?a.layerY:a.offsetY},cfg);E("mousedown",function(){ia=1});E("mouseup",function(){ia=0});E("blur",function(){for(var a in m)m[a]=0;"p"===L&&q("z")});var ta=new function(){this.na=new Ma;var a,b,d,e,h,c,f,k,g,m,l,q;this.Sa=function(){var a=this.na;e=100/(a.f*a.f+.001);h=100/(a.g*a.g+.001);c=1-a.h*a.h*a.h*.01;f=-a.i*a.i*a.i*1E-6;a.a||(l=.5-a.n/2,q=5E-5*-a.o);k=1+a.l*a.l*(0<a.l?-.9:10);g=0;m=1==a.m?0:(1-a.m)*(1-a.m)*2E4+32};this.gb=function(){this.Sa();
		var e=this.na;a=e.b*e.b*1E5;b=e.c*e.c*1E5;d=e.e*e.e*1E5+12;return 3*((a+b+d)/3|0)};this.fb=function(t,r){var n=this.na,u=1!=n.s||n.v,v=n.v*n.v*.1,y=1+3E-4*n.w,w=n.s*n.s*n.s*.1,A=1+1E-4*n.t,B=1!=n.s,C=n.x*n.x,F=n.g,D=n.q||n.r,J=n.r*n.r*n.r*.2,E=n.q*n.q*(0>n.q?-1020:1020),H=n.p?((1-n.p)*(1-n.p)*2E4|0)+32:0,Q=n.d,O=n.j/2,U=n.k*n.k*.01,K=n.a,L=a,W=1/a,Y=1/b,aa=1/d,n=5/(1+n.u*n.u*20)*(.01+w);.8<n&&(n=.8);for(var n=1-n,N=!1,V=0,ea=0,fa=0,I=0,ca=0,ga,da=0,z,S=0,Z,P=0,p,X=0,T,R=0,M=Array(1024),ha=Array(32),
		G=M.length;G--;)M[G]=0;for(G=ha.length;G--;)ha[G]=2*Math.random()-1;for(G=0;G<r;G++){if(N)return G;H&&++X>=H&&(X=0,this.Sa());m&&++g>=m&&(m=0,e*=k);c+=f;e*=c;e>h&&(e=h,0<F&&(N=!0));z=e;0<O&&(R+=U,z*=1+Math.sin(R)*O);z|=0;8>z&&(z=8);K||(l+=q,0>l?l=0:.5<l&&(l=.5));if(++ea>L)switch(ea=0,++V){case 1:L=b;break;case 2:L=d}switch(V){case 0:fa=ea*W;break;case 1:fa=1+2*(1-ea*Y)*Q;break;case 2:fa=1-ea*aa;break;case 3:fa=0,N=!0}D&&(E+=J,Z=E|0,0>Z?Z=-Z:1023<Z&&(Z=1023));u&&y&&(v*=y,1E-5>v?v=1E-5:.1<v&&(v=.1));
		T=0;for(var ba=8;ba--;){S++;if(S>=z&&(S%=z,3==K))for(ga=ha.length;ga--;)ha[ga]=2*Math.random()-1;switch(K){case 0:p=S/z<l?.5:-.5;break;case 1:p=1-S/z*2;break;case 2:p=S/z;p=6.28318531*(.5<p?p-1:p);p=1.27323954*p+.405284735*p*p*(0>p?1:-1);p=.225*((0>p?-1:1)*p*p-p)+p;break;case 3:p=ha[Math.abs(32*S/z|0)]}u&&(ga=da,w*=A,0>w?w=0:.1<w&&(w=.1),B?(ca+=(p-da)*w,ca*=n):(da=p,ca=0),da+=ca,I+=da-ga,p=I*=1-v);D&&(M[P%1024]=p,p+=M[(P-Z+1024)%1024],P++);T+=p}T=.125*T*fa*C;t[G]=1<=T?32767:-1>=T?-32768:32767*T|0}return r}},
		w={B:{p:{G:function(a,b,d,e){xa(a,b,d,e,100)}},t:{G:function(a,b,d,e,h){xa(a,b,d,e,200,h)}}},T:function(a){function b(a,b,d,e,c,f,g){c=c||1;f=(f||this.C)*c;g=(g||this.F)*c;a.save();a.translate(b,d);e&&a.rotate(e);a.drawImage(this.fa,0,0,this.C,this.F,-f/2,-g/2,f,g);a.restore()}var d=this,e;e=new Image;e.onload=function(){for(var h in Ia){var c=h,f=Ia[h],k=d.B[c]={fa:U(),G:b},g=2;"f"===c&&(g=1);k.fa.width=k.C=f[2]*g;k.fa.height=k.F=f[3]*g;k.Y=ka(k.fa.getContext("2d"));k.Y.drawImage(e,f[0],f[1],f[2],
		f[3],0,0,f[2]*g,f[3]*g)}a()};e.src="sprites.png"}},f={B:{},J:0,Ya:function(a){this.J=a;localStorage.setItem("tm",a)},T:{},t:{},Ta:function(a){a=f.B[a];a.B=a.B+1<a.A?a.B+1:0;a.t[a.B].play()},A:function(a){if(!this.J){var b=f.B[a];b.t[b.B].pause();b.t[b.B].currentTime=0;clearTimeout(f.t[a])}},jb:function(){this.J||Object.keys(f.t).forEach(function(a){clearTimeout(f.t[a])})},p:function(a,b){if(!this.J){b=b||100;var d=qa();f.T[a]&&d<f.T[a]+b?(clearTimeout(f.t[a]),f.t[a]=setTimeout(function(){f.T[a]=d;
		f.Ta(a)},b)):(f.T[a]=d,f.Ta(a))}}};f.J=+localStorage.getItem("tm")||0;ua.documentMode&&f.Ya(1);Object.keys(Ha).forEach(function(a){var b=Ha[a],d,e;f.B[a]={B:0,A:b.A,t:[]};for(e=0;e<b.A;e++){var h=d=new Audio;ta.na.na(b.B);var c=ta.gb(),g=new Uint8Array(4*((c+1)/2|0)+44),c=2*ta.fb(new Uint16Array(g.buffer,44),c),k=new Uint32Array(g.buffer,0,44);k[0]=1179011410;k[1]=c+36;k[2]=1163280727;k[3]=544501094;k[4]=16;k[5]=65537;k[6]=44100;k[7]=88200;k[8]=1048578;k[9]=1635017060;k[10]=c;for(var c=c+44,k=0,l=
		"data:audio/wav;base64,";k<c;k+=3)var m=g[k]<<16|g[k+1]<<8|g[k+2],l=l+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m&63]);h.src=l;f.B[a].t.push(d)}});ya.prototype={C:function(){var a=~~(this.H/60),b=Math.abs(this.H-60*a),b=(10>b?"0":"")+b,b=3<b.length?
		b.substr(0,4):b+".0";this.X=a+":"+b},K:function(){this.H-=t;0>this.H&&(this.H=0);this.C()}};v.prototype={D:function(a){this.x+=a.x;this.y+=a.y;return this},B:function(a){this.x-=a.x;this.y-=a.y;return this},J:function(a){this.x*=a;this.y*=a;return this},ya:function(a){this.x/=a;this.y/=a;return this},Ma:function(a){var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},qb:function(a){this.x=a.x;this.y=a.y;return this},A:function(){return new v(this.x,this.y)},length:function(){return Math.sqrt(this.x*
		this.x+this.y*this.y)},za:function(a){return this.x*a.x+this.y*a.y},r:function(a){var b=this.x;this.x=b*Math.cos(a)+this.y*Math.sin(a);this.y=-b*Math.sin(a)+this.y*Math.cos(a);return this},aa:function(a,b){this.x=a;this.y=b;return this}};D(P,u);O(P.prototype,{B:function(){function a(){c.beginPath();c.moveTo(0,0);c.lineTo(-d/2,-e/2);c.lineTo(-d/2,e/2);c.lineTo(0,0);c.fill()}var b=U(),d,e;b.width=b.height=d=e=100;var c=b.getContext("2d"),f=c.createLinearGradient(-d/2,0,-5,5);f.addColorStop(0,"#333");
		f.addColorStop(1,"#777");c.fillStyle=f;c.translate(d/2,e/2);c.save();a();c.scale(-1,1);a();c.rotate(Math.PI/2);a();c.rotate(Math.PI);a();c.restore();return b}(),Na:function(a){a.save();a.translate(this.A.x,this.A.y);a.rotate(this.r);a.shadowColor="rgba(0,0,0,.5)";a.shadowOffsetX=a.shadowOffsetY=4;a.fillRect(-this.C/2,-this.F/2,this.C,this.F);a.shadowOffsetX=a.shadowOffsetY=0;a.shadowBlur=100;a.drawImage(this.B,-this.C/2,-this.F/2,this.C,this.F);a.restore()}});D(za,P);D(Aa,P);Ba.prototype={D:function(a){a.G(this.Y)},
		G:function(){c.drawImage(this.A,0,0)}};D(la,u);O(la.prototype,{G:function(a){a=a||c;this.Ea()&&(this.D=!(!this.t||!this.t.t),w.B.t.G(a,this.A.x,this.A.y,this.r,this.H?"#0d0":this.D?"#d00":0))},K:function(){if(this.D){var a=this.r-this.t.r;this.H=Math.abs(a-ba*Math.floor((a+Math.PI)/ba))<Y&&this.pb(this.t)}}});D(ma,u);O(ma.prototype,{ma:45*Math.PI/180,D:6,xb:4,Fa:1.3,da:50,Bb:140,ca:.95,L:100,K:function(){this.xa=this.Ca=0;m.l&&this.Ca--;m.r&&this.Ca++;m.u&&this.xa++;m.d&&this.xa--;m.a&&(m.a=0,this.M?
		(f.p("a"),this.M.P&&this.M.P.H&&(this.M.P.e=!1),this.M.t=this.M=null):this.ha&&this.ha.e&&(f.p("a"),this.M=this.ha,this.M.t=this));0<this.Ca?this.O+=t*this.Fa:0>this.Ca?this.O-=t*this.Fa:Q&&(this.O<-t?this.O+=t*this.Fa:this.O>t&&(this.O-=t*this.Fa),Math.abs(this.O)<t&&(this.O=0));this.O=this.O>this.ma?this.ma:this.O<-this.ma?-this.ma:this.O;0<this.xa?this.$+=t*this.D:0>this.xa?this.$-=t*this.xb:Math.abs(this.$)<t&&(this.$=0);this.$*=this.ca+(this.ma-Math.abs(this.O))/this.ma/100;var a=new v(-Math.sin(this.r),
		Math.cos(this.r)),b=a.A().J(this.da/2);this.Z.A=this.A.A().B(b).D(a.A().J(this.$));this.Z.r=this.r;this.ea.A=this.A.A().D(b).D((new v(-Math.sin(this.ea.r),Math.cos(this.ea.r))).J(this.$));this.ea.r=this.O+this.r;this.J(this.ea.A.A().D(this.Z.A).ya(2),Math.atan2(this.Z.A.y-this.ea.A.y,this.Z.A.x-this.ea.A.x)+Y);this.L.x=this.A.x;this.L.y=this.A.y;this.V.J(this.ea.A,this.r)},G:function(){this.B.G(c,this.A.x,this.A.y,this.r);0>this.$?f.p("r",1E3):f.A("r")},nb:function(a){this.M&&(b=this.V.oa(this.M))&&
		(.5<b.length()&&(this.L.H--,this.M.L.H--,f.p("h"),g.sa()),this.V.S(b),this.J(this.V.A.A().D(this.Z.A).ya(2),Math.atan2(this.Z.A.y-this.V.A.y,this.Z.A.x-this.V.A.x)+Y));for(var b,d=0,e=a.length;d<e;d++)if(a[d].Ea()){if(b=this.oa(a[d])).5<b.length()&&(this.L.H--,f.p("h"),g.sa()),this.S(b),this.V.S(b);this.M&&(b=this.M.oa(a[d]))&&(.5<b.length()&&(this.M.L.H--,f.p("h"),g.sa()),this.S(b),this.V.S(b),this.M.S(b),this.M.ga.S(b))}},ob:function(a){for(var b=0,d=a.length;b<d;b++){var e=a[b],c;if(e.Ea()&&e!==
		this.M){if(c=this.V.oa(e)).5<c.length()&&(this.L.H--,e.L&&e.L.H--,f.p("h"),g.sa()),this.S(c),this.V.S(c);if(c=this.oa(e.ga)).5<c.length()&&(this.L.H--,e.L&&e.L.H--,f.p("h"),g.sa()),this.S(c),this.V.S(c);this.M&&(c=this.M.oa(e))&&(.5<c.length()&&(this.M.L.H--,f.p("h"),g.sa()),this.S(c),this.V.S(c),this.M.S(c),this.M.ga.S(c))}}},lb:function(a){if(!this.M){this.ha=null;for(var b=0,d=a.length;b<d;b++)if(this.Z.A.Ma(a[b].pa)<a[b].rb)return this.ha=a[b],!0}}});D(K,u);O(K.prototype,{rb:15,L:50,K:function(){this.t&&
		(this.pa=this.t.Z.A.A(),this.ga.J(this.A.A().B((new v(-Math.sin(this.r),Math.cos(this.r))).A().J(this.da/2)),this.r),this.J(this.pa.A().D(this.ga.A).ya(2),Math.atan2(this.ga.A.y-this.pa.y,this.ga.A.x-this.pa.x)+Y),this.L.x=this.A.x,this.L.y=this.A.y);this.P&&this.P.K();this.qa&&(this.qa.t=this.t?this.P:this,this.qa.K())},G:function(){this.Ea()&&(c.save(),c.translate(this.A.x,this.A.y),c.rotate(this.r),c.drawImage(this.B,-this.C/2,-this.F/2),c.restore(),this.P&&this.L&&this.L.G(c));this.qa&&this.qa.G()}});
		D(J,u);O(J.prototype,{Na:function(a){a.save();a.translate(this.A.x,this.A.y);a.rotate(this.r);a.fillStyle="#644";a.strokeStyle="#755";a.shadowColor="#000";a.shadowOffsetX=a.shadowOffsetY=4;a.fillRect(-this.C/2,-this.F/2,this.C,this.F);a.shadowOffsetX=a.shadowOffsetY=0;a.strokeRect(-this.C/2+3,-this.F/2+3,this.C-6,this.F-6);a.restore()},G:function(){this.sb||this.Na(c)}});A.prototype={K:function(){if(this.e){this.D=this.Ua&&this.hb(Ka,La);!this.D&&!this.ca||this.Xa||f.p("c");if(this.D&&ia||this.ca&&
		m.a)ia=0,m.a=0,this.Ua();this.Xa=this.D||this.ca}},hb:function(a,b){return!(a<this.x-this.C/2||a>this.x+this.C/2||b<this.y-this.F/2||b>this.y+this.F/2)},G:function(){r.beginPath();r.fillStyle="rgba(0,0,0, "+(this.e?this.D||this.ca?.6:.3:.1)+")";r.fillRect(this.x-this.C/2,this.y-this.F/2,this.C,this.F);this.X.G()}};na.prototype.G=function(a){a.fillStyle="#333";a.fillRect(this.x-this.C/2,this.y-this.F/2,this.C+2,this.F+2);0<this.H&&(a.fillStyle=this.A,a.fillRect(this.x-this.C/2,this.y-this.F/2,this.B*
		this.H,this.F))};Da.prototype={K:function(){this.ia+=10*t;this.Ka=5*Math.sin(this.ia)-5;this.D=Math.atan2(this.t.A.y-this.A.y,this.t.A.x-this.A.x);var a;(a=I(this.A,this.t.A,g.H[0],g.H[1]))||(a=I(this.A,this.t.A,g.H[1],g.H[2]))||(a=I(this.A,this.t.A,g.H[2],g.H[3]))||(a=I(this.A,this.t.A,g.H[3],g.H[0]))?(this.x=a.x,this.y=a.y):(this.x=this.t.A.x,this.y=this.t.A.y);this.x+=this.Ka*Math.cos(this.D);this.y+=this.Ka*Math.sin(this.D)},G:function(){c.save();c.translate(this.x,this.y);c.rotate(this.D);c.beginPath();
		c.moveTo(0,0);c.lineTo(-20,-8);c.lineTo(-20,8);c.lineTo(0,0);c.fillStyle="#f00";c.strokeStyle="#333";c.fill();c.stroke();c.restore()}};l.prototype={aa:function(a,b){b=b||this.mb;this.X=String(a).toLowerCase().split("");this.La=va(b||"fff");this.A.width=4*this.X.length-1;this.A.height=this.ta.F;var d=this.A.getContext("2d"),c,f;d.clearRect(0,0,this.A.width,this.A.height);c=0;for(f=this.X.length;c<f;c++){var g="abcdefghijklmnopqrstuvwxyz1234567890!?\".,'$()-:;=[]/".indexOf(this.X[c]);-1<g&&d.drawImage(this.ta.fa,
		3*g,0,3,this.ta.F,4*c,0,3,this.ta.F)}var g=d.getImageData(0,0,this.A.width,this.ta.F),l=g.data;c=0;for(f=l.length;c<f;c+=4)l[c]=this.La.r,l[c+1]=this.La.Da,l[c+2]=this.La.R;d.putImageData(g,0,0);this.C=this.A.width*this.B;this.F=this.ta.F*this.B},G:function(){r.drawImage(this.A,this.x-this.C/2,this.y-this.F/2,this.C,this.F)}};oa.prototype={K:function(){var a=this.R.length;m.u&&(m.u=0,this.D--);m.d&&(m.d=0,this.D++);this.D=0>this.D?a-1:this.D>a-1?0:this.D;for(var b=0;b<a;b++)this.R[b].ca=b===this.D,
		this.R[b].K()},G:function(){for(var a=0,b=this.R.length;a<b;this.R[a++].G());}};pa.prototype={C:20,G:function(){for(var a=-1;2>a;a++)r.fillStyle=this.B-1>a?"#ff0":"rgba(0,0,0,.1)",r.fillRect(this.x-this.C/2+(this.C+5)*a,this.y-this.C/2,this.C,this.C)}};Ea.prototype={K:function(){var a=this.t.O/this.t.ma*Y;this.ia=this.Wa.A().r(-a)},G:function(){r.beginPath();r.arc(this.x,this.y,this.r,Math.PI,0);r.lineWidth=8;r.strokeStyle="#333";r.stroke();r.beginPath();r.arc(this.x+this.ia.x,this.y+this.ia.y,12,
		0,ba);r.fillStyle="#f60";r.fill();r.beginPath();r.arc(this.x,this.y-30,12,0,ba);r.fillStyle=this.Za?"#0c0":"#333";r.fill();this.X.G()}};B.c={ra:function(){g.save();this.I=[new A(400,555,"close",function(){q("m")},110),new l(400,50,"captain reverso",10),new l(400,100,"and the missing truckers",4,"0cd"),new l(400,132,"js13kGames 2015 entry",3),new l(400,240,"created by",4),new l(400,280,"Greg Pabian",6),new l(400,320,"pixelchinchilla.com",4),new l(400,350,"twitter: gregpabian",4),new l(400,380,"github: gregpabian",
		4)];this.I[0].ca=!0},K:function(){for(var a=0;a<this.I.length;a++)this.I[a].K&&this.I[a].K()},G:function(){c.fillStyle=F;c.fillRect(0,0,800,600);H(c,800,600);for(var a=0;a<this.I.length;a++)this.I[a].G()}};var ja=!1;B.m={ra:function(){g.save();ja||(this.T=w.B.l,this.ub=new l(400,390,"pixel chinchilla",4),this.vb=new l(400,414,"presents",2),this.Aa=0);this.I=[new l(400,50,"captain reverso",10),new l(400,100,"and the missing truckers",4,"0cd"),new oa(400,300,{start:function(){q("st")},credits:function(){q("c")}}),
		R,M,new l(160,570,"controls: wasd/arrows - space - esc",2)]},K:function(){if(ja)for(var a=0;a<this.I.length;a++)this.I[a].K&&this.I[a].K();else this.Aa+=t,1<this.Aa&&!this.B&&(f.p("w"),this.B=1),3<this.Aa&&(ja=1)},G:function(){if(ja){c.fillStyle=F;c.fillRect(0,0,800,600);H(c,800,600);for(var a=0;a<this.I.length;a++)this.I[a].G()}else c.fillStyle="#000",c.fillRect(0,0,800,600),this.T.G(c,400,300,0,2),this.ub.G(c),1<this.Aa&&this.vb.G(c)}};B.z={ra:function(a,b){g.save();var d={},c,h=0;this.I=[];!0===
		a?(h=30,d["continue"]=function(){y++;y===X.length?q("st",!0):q("p")},c="level complete",this.I.push(new l(400,120,"your score:",4),new pa(400,160,b))):!1===a?(f.p("f"),c="level failed",this.I.push(new l(400,120,b,4))):(c="paused",d.resume=function(){q("p",!0)});d.restart=function(){q("p")};d["change level"]=function(){q("s")};d["main menu"]=function(){q("m")};this.J=new oa(400,300+h,d);this.I.push(new l(400,50,c,10),this.J,R,M)},K:function(){for(var a=0;a<this.I.length;a++)this.I[a].K&&this.I[a].K()},
		G:function(){c.fillStyle=F;c.fillRect(0,0,800,600);H(c,800,600);for(var a=0;a<this.I.length;a++)this.I[a].G()}};B.p={yb:[["welcome to the tutorial!",3,200,130],["your goal is to park each trailer in its place...",4],["...without destroying it!",3],["drive your truck and reverse it to attach the trailer",4,230,370,1],["notice the trailer indicator turns green...",4,400,480],["...once your truck is properly positioned",4,0,0,2],["press [space] to attach the trailer",3,0,0,3],["reverse the trailer to the highlighted parking spot",
		4,580,180,4],["notice the parking spot turns green...",4],["...once the trailer is properly parked",4,0,0,5],["now press the [space] to detach the trailer",4,0,0,6]],ra:function(a){if(a)g.restore();else{y||(this.Qa=4,this.zb=[].concat(this.yb),this.Ia=new l(0,0," "),this.U=null,this.la=0);this.Pa=new Ea(400,580);this.I=[this.Pa];a=X[y];this.n=a.n;this.C=a.w;this.F=a.h;this.R=a.t[0];this.B=a.t[1];this.Da=a.t[2];this.p=new ma(a.p[0],a.p[1],a.p[2]*Math.PI/180);this.Pa.t=this.p;this.J=new Ba(this.C,this.F);
		w.B.p.G(this.J.Y,this.p.A.x,this.p.A.y,this.p.r);this.ja=[];this.W=[];this.P=[];(this.Ra=(this.t=this.R?new ya(this.R):null)?new l(400,30,this.t.X,4):null)&&this.I.push(this.Ra);var b,d,c=[];b=0;for(d=a.o.length;b<d;b+=4){var f=Oa[Na[a.o[b]]];if(f){var m=new f(a.o[b+1],a.o[b+2],a.o[b+3]*Math.PI/180);f===K?c.push(m):(this.ja.push(m),m.Na(this.J.Y),m.sb=!0)}}b=0;for(d=a.tr.length;b<d;b+=3)f=new K(a.tr[b],a.tr[b+1],a.tr[b+2]*Math.PI/180),w.B.t.G(this.J.Y,f.A.x,f.A.y,f.r),f.qa=new Da(this.p,f),this.P.push(new la(a.tt[b],
		a.tt[b+1],a.tt[b+2]*Math.PI/180,f)),this.W.push(f);this.W=this.W.concat(c);this.ja=this.ja.concat(this.J.Ab);g.kb(this.C/2,this.F/2)}},K:function(){if(m.p)return m.p=0,q("z");!y&&(this.la&&0<this.la&&(this.la-=t),!this.U||0>this.la&&(!this.U[4]||1===this.U[4]&&180>this.p.A.Ma(this.W[0].A)||2===this.U[4]&&this.p.ha||3===this.U[4]&&this.p.M||4===this.U[4]&&this.p.M&&100>this.p.M.A.Ma(this.P[0].A)||5===this.U[4]&&this.P[0].H))&&(this.Qa&&this.Qa--,this.U=this.zb.shift(),this.Ia.aa(this.U[0]),this.U[1]?
		this.la=this.U[1]:this.la=null,this.U[2]&&(this.Ia.x=this.U[2],this.Ia.y=this.U[3]));g.K(this.p.A,this.C,this.F);this.t&&(this.t.K(),this.Ra.aa(this.t.X));!y&&this.Qa||this.p.K();this.p.nb(this.ja);this.p.ob(this.W);this.p.lb(this.W);this.Pa.Za=this.p.ha;var a,b;a=0;for(b=this.W.length;a<b;a++)this.W[a].K();a=0;for(b=this.P.length;a<b;a++){var d=this.P[a];d.e||(f.p("w"),this.P.splice(a,1),d.H=!1,d.D=!1,d.t.qa=!1,d.t.L=!1,this.J.D(d),b--,a--)}if(!this.P.length){a=this.t?this.R-this.t.H<=this.Da?3:
		this.R-this.t.H<=this.B?2:1:3;if(!C[y]||C[y]<a)C[y]=a,localStorage.setItem("ts",C.join(""));return q("z",!0,a)}if(this.t&&0>=this.t.H)return q("z",!1,"you run out of time :(");if(0>=this.p.L.H)return q("z",!1,"you destroyed your truck :(");a=0;for(b=this.W.length;a<b;a++)if(0>=this.W[a].L.H)return q("z",!1,"you destroyed the load :(");for(a=0;a<this.I.length;a++)this.I[a].K&&this.I[a].K()},G:function(){var a,b;this.J.G();a=0;for(b=this.P.length;a<b;a++)this.P[a].G();this.p.G();a=0;for(b=this.W.length;a<
		b;a++)this.W[a].G();this.p.L.G(c);a=0;for(b=this.ja.length;a<b;a++)this.ja[a].G&&this.ja[a].G();y||this.Ia.G();a=0;for(b=this.I.length;a<b;a++)this.I[a].G()}};B.s={ra:function(){function a(a){return function(){y=a;q("p")}}g.save();this.A=[];this.D=y;this.n=new l(400,500," ",4);this.I=[this.n,sa];for(var b=0;b<X.length;b++){var d=160+160*(b-4*~~(b/4)),c=120+120*~~(b/4);this.A.push(new A(d,c,b?b:"t",a(b),70,70,0<b?!!C[b-1]:1,6));this.I.push(new pa(d,c+60,C[b]))}this.A.push(new A(400,555,"back",function(){q("m")},
		100));this.I=this.I.concat(this.A)},K:function(){for(var a=this.A.length,b=0,c=0;c<a;c++)this.A[c].ca=this.D===c,this.A[c].K&&this.A[c].K();m.d&&(m.d=0,b=4);m.u&&(m.u=0,b=-4);m.l&&(m.l=0,b=-1);m.r&&(m.r=0,b=1);this.D+=b;for(this.D=0>this.D?0:this.D>a-1?a-1:this.D;!this.A[this.D].e;)this.D+=0<b?1:-1;this.n.aa(this.D===this.A.length-1?" ":this.D?"level "+this.D:"tutorial");sa.K()},G:function(){c.fillStyle=F;c.fillRect(0,0,800,600);H(c,800,600);for(var a=0;a<this.I.length;a++)this.I[a].G()}};B.st={tb:[[0,
		"breaking news!!!"],[2,"a mysterious disappearence of all truckers..."],[5,"...paralyzed the transport!"],[7,"total chaos reigned over the city!"],[10,"will someone stop this madness???"],[13,"that's something for captain reverso!",1],[16,"time to move, i've got a city to save!",1],[19," ",1]],wb:[[0,"...in other news:"],[2,"missing truckers we're all found..."],[5,"...locked down in an abandoned trailer"],[8,"the transport situation is now back to normal"],[11,"thanks to a mysterious hero..."],[14,
		"...we can all sleep peacefully again!"],[17,"damn right you can!",1],[21," ",1]],Va:function(){q(this.d?"c":"s")},ra:function(a){g.save();this.d=a;this.cb=new l(220,90," ",2);this.eb=new l(600,190," ",2);this.I=[new A(400,555,"skip",this.Va.bind(this),100),this.cb,this.eb];this.T=this.d?this.wb:this.tb;this.t=0;this.A=w.B.r;this.Ja=w.B.tv;this.I[0].ca=!0},K:function(){this.t+=t;var a,b;for(a=0;a<this.T.length;a++)this.t>=this.T[a][0]&&(b=this.T[a]);b&&(this.cb.aa(b[2]?b[1]:" "),this.eb.aa(b[2]?" ":
		b[1]));if(this.t>this.T[this.T.length-1][0]||m.p)return m.p=0,this.Va();for(a=0;a<this.I.length;a++)this.I[a].K&&this.I[a].K()},G:function(){c.fillStyle=F;c.fillRect(0,0,800,600);c.fillStyle="#543";c.fillRect(0,300,800,300);c.fillStyle="#987";c.fillRect(0,300,800,20);c.drawImage(this.A.fa,50,300-2*this.A.F,3*this.A.C,3*this.A.F);c.drawImage(this.Ja.fa,600,300-1.5*this.Ja.F,3*this.Ja.C,3*this.Ja.F);H(c,800,600);for(var a=0;a<this.I.length;a++)this.I[a].G()}};cm.width=cfg.width=800;cm.height=cfg.height=
		600;var c=ka(cm.getContext("2d")),r=ka(cfg.getContext("2d")),W=0;wrap.style.cssText="width:800px;height:600px;margin:-300px 0 0 -400px;";var Oa={bs:za,bb:Aa,tl:K,w:J};w.T(function(){ra=qa();g=new wa(800,600);var a=localStorage.getItem("ts"),b=Array.apply(null,Array(X.length)).map(Number.prototype.valueOf,0);C=a?a.split("").map(Number):[].concat(b);F=c.createLinearGradient(0,0,0,600);F.addColorStop(0,"#024");F.addColorStop(1,"#078");R=new A(730,560,"sound:"+(f.J?"off":"on"),function(){f.Ya(f.J?0:1);
		R.X.aa("sound:"+(f.J?"off":"on"))},100,40,1,2);sa=new A(730,560,"reset",function(){C=[].concat(b);localStorage.setItem("ts",C.join(""));q("s")},100,40,1,2);M=new A(600,560,"auto center:"+(Q?"on":"off"),function(){Q=Q?0:1;localStorage.setItem("tc",Q);M.X.aa("auto center:"+(Q?"on":"off"))},140,40,1,2);q("m");Fa()})})(document,this);</script></body></html>