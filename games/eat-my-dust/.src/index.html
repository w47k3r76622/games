<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Eat My Dust!</title><style type="text/css">body,html{margin:0;padding:0;font-family:monospace}canvas{background:#5ebfff}#g-bg{top:270px;height:270px;background:#936c3e}#g,#g-bg{position:absolute;width:960px;left:0}#g{height:54px;top:0;background:url(images/g.png) repeat-x}#d-d{left:30px;text-shadow:1px 1px 1px #936c3e}#d-d,#d-e{display:none;position:absolute;color:#fff;top:24px;font-size:18px}#d-e{left:720px}#d-e span{text-shadow:1px 1px 1px #936c3e}#d-e span,#ef{display:inline-block;height:20px;vertical-align:middle}#ef{border:1px solid #fff;width:120px;background:rgba(0,0,0,.3)}.eb{position:absolute;height:20px;background:linear-gradient(90deg,rgba(151,226,30,.8),#e3ca29 47%,#ff8600)}.eb.e{transition:all 1s ease-in}.eb.e.d{height:20px;animation:drop 1s ease-in}#d-t{display:none;position:absolute;margin:10px 30px;padding:15px 30px;top:340px;left:0;width:900px;height:130px;box-sizing:border-box;background:rgba(0,0,0,.6);border-radius:10px}#t{color:#fff}#st,#t{font-size:32px}#st{color:#888c90;margin-top:10px}.correct{color:#90ee90}.cursor{color:#ff0;text-decoration:underline;white-space:pre}.cursor.w{animation:blink-once .5s}#d-l{top:0;left:0;width:960px;height:270px}#d-l,div.name{display:none;position:absolute}div.name{color:#fff;text-shadow:1px 1px 1px #936c3e;z-index:1;font-size:22px;top:112px}div.name.bot{text-indent:-10px;font-size:18px}div.arrow{width:15px;height:9px;background:url(images/a.png);background-size:cover;transform-origin:50% -20px;top:144px}#d-tt,div.arrow{display:none;position:absolute}#d-tt{top:150px;left:470px}.title{width:400px}#d-c{display:none;top:420px;left:50px;width:860px;color:#fff}#d-c,.dev{position:absolute}.dev{left:0}.art{position:absolute;right:0}.art div,.dev div{font-size:24px;font-weight:700}.art li,.dev li{list-style:none;font-size:20px;text-align:right}#d-m{top:340px;font-size:30px;text-align:center}#d-m,#d-sp{display:none;position:absolute;left:50px;width:860px;color:#fff}#d-sp{top:50px;height:440px;background:grey;border-radius:14px;padding:15px 20px;box-sizing:border-box}#d-sp div{font-size:24px}#d-sp div.desc{text-align:center}#sl{background:#525252;height:330px;overflow-y:auto;margin:10px 0;padding:0;border-radius:14px}#sl li{white-space:nowrap;word-break:break-all;text-overflow:ellipsis;font-size:24px;list-style:none;padding:13px 20px 8px;margin:0;box-sizing:border-box;border-bottom:1px solid #656565}#sl li.s{background:#04b440}#d-pm{display:none;top:130px;left:270px;font-size:20px}#d-pm,.e.p{position:absolute;color:#fff}.e.p{font-size:16px;top:3px;letter-spacing:-1px;animation:fadeUp 1s ease-in}#d-r{top:150px;left:470px;font-size:40px}#d-gm,#d-r{display:none;position:absolute;color:#fff}#d-gm{top:500px;left:690px;font-size:22px}.wind{position:absolute;width:500px;height:6px;background:#fff;top:-100px;transition:1s ease-in}.wind.m{transform:translateX(-1500px)}.blink{animation:blinker 1s step-start infinite}@keyframes blinker{50%{opacity:0}}@keyframes blink-once{0%{background-color:transparent}10%{background-color:#cd5c5c}to{background-color:transparent}}@keyframes drop{0%{transform:translateY(0) rotate(0);opacity:1}5%{transform:translateY(2px) rotate(0);opacity:1}10%{transform:translateY(1px) rotate(0);opacity:1}to{transform:translateY(20px) rotate(10deg);opacity:0}}@keyframes fadeUp{to{transform:translateY(-10px);opacity:0}}</style></head><body><canvas width="960" height="540"></canvas><div id="g-bg"><div id="g"></div></div><div id="d-d"><span>Distance</span> <span id="d">0</span></div><div id="d-e"><span>Energy</span>&nbsp;<div id="ef"><div class="eb"></div></div></div><div id="d-t"><div id="t"></div><div id="st"></div></div><div id="d-l"></div><div id="d-tt"><img class="title" src="images/t.png"></div><div id="d-c"><div class="dev"><div>Developed by</div><ul><li>Junsik Shim</li><li>Juhyun Choi</li></ul></div><div class="art"><div>Artworks by</div><ul><li>wabie</li></ul></div></div><div id="d-m" class="blink">Press Space to start!</div><div id="d-sp"><div>Select a story</div><ul id="sl"></ul><div class="desc">Up/Down arrows to choose, Enter to select</div></div><div id="d-pm">Type to start!</div><div id="d-r"></div><div id="d-gm">ESC - Title screen</div><div class="wind"></div><script type="text/javascript">!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(){},function(t,e,i){"use strict";i.r(e);let s=/^\//,n=/\/$/,r=new WeakMap,a="";function o(t,e){return new URL(t,e).href}function h(t,e){return[t.replace(n,""),t?e.replace(s,""):e].filter(t=>t).join("/")}function l(t){return t.split(".").pop()}function d(t){let e=t.replace("."+l(t),"");return 2==e.split("/").length?e.replace(s,""):e}let c,u,m={};function p(){window.__k||(window.__k={dm:r,u:o,i:m})}function f(t){a=t}function g(t){return p(),new Promise((e,i)=>{let s,n,r;if(s=h(a,t),m[s])return e(m[s]);(n=new Image).onload=function(){r=o(s,window.location.href),m[d(t)]=m[s]=m[r]=this,e(this)},n.onerror=function(){i("Unable to load image "+s)},n.src=s})}function y(){return c}function x(){return u}function w(t){return c=document.getElementById(t)||t||document.querySelector("canvas"),(u=c.getContext("2d")).imageSmoothingEnabled=!1,{canvas:c,context:u}}const b=()=>{};function v(){let t=y();x().clearRect(0,0,t.width,t.height)}function _({fps:t=60,clearCanvas:e=!0,update:i,render:s}={}){let n,r,a,o,h,l=0,d=1e3/t,c=1/t,u=e?v:b;function m(){if(r=requestAnimationFrame(m),a=performance.now(),o=a-n,n=a,!(o>1e3)){for(l+=o;l>=d;)h.update(c),l-=d;u(),h.render()}}return h={update:i,render:s,isStopped:!0,start(){n=performance.now(),this.isStopped=!1,requestAnimationFrame(m)},stop(){this.isStopped=!0,cancelAnimationFrame(r)},_frame:m,set _last(t){n=t}}}class S{constructor({create:t,maxSize:e=1024}={}){let i;if(!t||!(i=t())||!(i.update&&i.init&&i.isAlive))throw Error("Must provide create() function which returns an object with init(), update(), and isAlive() functions");this._c=t,this._i=0,this.objects=[t()],this.size=1,this.maxSize=e}get(t={}){if(this.objects.length==this._i){if(this.size===this.maxSize)return;for(let t=0;t<this.size&&this.objects.length<this.maxSize;t++)this.objects.unshift(this._c());this.size=this.objects.length}let e=this.objects.shift();return e.init(t),this.objects.push(e),this._i++,e}getAliveObjects(){return this.objects.slice(this.objects.length-this._i)}update(t){let e,i=this.size-1,s=Math.max(this.objects.length-this._i,0);for(;i>=s;)(e=this.objects[i]).update(t),e.isAlive()?i--:(this.objects=this.objects.splice(i,1).concat(this.objects),this._i--,s++)}render(){let t=Math.max(this.objects.length-this._i,0);for(let e=this.size-1;e>=t;e--)this.objects[e].render()}}function T(t){return new S(t)}T.prototype=S.prototype,T.class=S;class L{constructor(t=0,e=0){this._x=t,this._y=e}add(t,e=1){return k(this.x+(t.x||0)*e,this.y+(t.y||0)*e,this)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}function k(t,e,i={}){let s=new L(t,e);return i._c&&(s.clamp(i._a,i._b,i._d,i._e),s.x=t,s.y=e),s}k.prototype=L.prototype,k.class=L;class E{constructor(t){this.init(t)}init(t={}){let{x:e,y:i,dx:s,dy:n,ddx:r,ddy:a,width:o,height:h,image:l}=t;this.position=k(e,i),this.velocity=k(s,n),this.acceleration=k(r,a),this.width=this.height=this.rotation=0,this.ttl=1/0,this.anchor={x:0,y:0},this.context=x();for(let e in t)this[e]=t[e];l&&(this.width=void 0!==o?o:l.width,this.height=void 0!==h?h:l.height)}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get animations(){return this._a}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}isAlive(){return this.ttl>0}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){this.velocity=this.velocity.add(this.acceleration,t),this.position=this.position.add(this.velocity,t),this.ttl--,this.currentAnimation&&this.currentAnimation.update(t)}draw(){let t=-this.width*this.anchor.x,e=-this.height*this.anchor.y;this.context.save(),this.context.translate(this.x,this.y),this.rotation&&this.context.rotate(this.rotation),this.image?this.context.drawImage(this.image,0,0,this.image.width,this.image.height,t,e,this.width,this.height):this.currentAnimation?this.currentAnimation.render({x:t,y:e,width:this.width,height:this.height,context:this.context}):(this.context.fillStyle=this.color,this.context.fillRect(t,e,this.width,this.height)),this.context.restore()}}function P(t){return new E(t)}P.prototype=E.prototype,P.class=E;class A{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0}={}){this.spriteSheet=t,this.frames=e,this.frameRate=i,this.loop=s;let{width:n,height:r,margin:a=0}=t.frame;this.width=n,this.height=r,this.margin=a,this._f=0,this._a=0}clone(){return C(this)}reset(){this._f=0,this._a=0}update(t=1/60){if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render({x:t,y:e,width:i=this.width,height:s=this.height,context:n=x()}={}){let r=this.frames[this._f]/this.spriteSheet._f|0,a=this.frames[this._f]%this.spriteSheet._f|0;n.drawImage(this.spriteSheet.image,a*this.width+(2*a+1)*this.margin,r*this.height+(2*r+1)*this.margin,this.width,this.height,t,e,i,s)}}function C(t){return new A(t)}function M(t){if(+t===t)return t;let e=[],i=t.split(".."),s=+i[0],n=+i[1],r=s;if(s<n)for(;r<=n;r++)e.push(r);else for(;r>=n;r--)e.push(r);return e}C.prototype=A.prototype,C.class=A;class j{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:s,animations:n}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:s},this._f=t.width/e|0,this.createAnimations(n)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:n,loop:r}=t[i];if(e=[],void 0===s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map(t=>{e=e.concat(M(t))}),this.animations[i]=C({spriteSheet:this,frames:e,frameRate:n,loop:r})}}}function O(t){return new j(t)}O.prototype=j.prototype,O.class=j;class I{constructor(t,e){this.name=t,this.O=e}mount(){}unmount(){}}let H=null,D={},R=(t,e)=>{H&&H.unmount(),(H=D[t])&&H.mount(e)},z=(t,e)=>D[t]=e;var F=I;const N=window,W=document;let B=t=>t.style.display="inline",$=t=>t.style.display="none",q=W.querySelector.bind(W),U=W.createElement.bind(W),J=requestAnimationFrame.bind(N),Y=setTimeout.bind(N),X=clearTimeout.bind(N),G=setInterval.bind(N),K=clearInterval.bind(N),Q=addEventListener.bind(N),V=removeEventListener.bind(N),Z=Math.random.bind(Math),tt=Math.max.bind(Math),et=Math.min.bind(Math),it=(t,...e)=>t.classList.add(...e),st=(t,e)=>t.classList.remove(e),nt=t=>t.replace(/^\s+/,""),rt="keypress",at="keydown",ot="w",ht=t=>{t.cP=T({create:P,maxSize:100})},lt=t=>{t.createClouds=()=>{dt(t),t.cT=Y(()=>{t.createClouds(t)},1e3*Z()+2e3)},t.createClouds()},dt=t=>{t.cP.get({x:1e3,y:100*Z()+20,dx:-2*Z()-.3,dy:0,width:52,height:32,image:m.c,ttl:3e3,type:"cloud"})},ct=(t,e)=>{t.cP.update(e)},ut=t=>{let e=t.O.context;t.cP.getAliveObjects().forEach(t=>{let i=t.dx/-2;e.save(),e.globalAlpha=i,t.render(),e.restore()})},mt=t=>{K(t.cT)},pt=t=>{t.dP=T({create:P,maxSize:100})},ft=t=>(e,i)=>{let s=5*Z();t.dP.get({x:e+50-20,y:i+100-2,dx:-1*Z()-1,dy:-.5*Z(),width:s,height:s,image:m.d,ttl:100,type:"dust"})},gt=t=>{t.dP.update()},yt=t=>{let e=t.O.context;t.dP.getAliveObjects().forEach(t=>{let i=t.ttl/80;e.save(),e.globalAlpha=i,t.render(),e.restore()})},xt=300,wt=100,bt=100;class vt extends F{constructor(t){super("title",t)}mount(){let t=this;B(q("#d-tt")),B(q("#d-m")),B(q("#d-c"));let e=O({image:m.m,frameWidth:32,frameHeight:32,animations:{run:{frames:"0..9",frameRate:20}}}),i=P({x:xt,y:270-bt,width:wt,height:bt,animations:e.animations});i.playAnimation("run"),pt(t),Q(rt,St);let s=ft(t);t.dT=G(()=>{s(i.x,i.y)},50),ht(t),lt(t);let n=q("#g"),r=0;t.L=_({update:function(){i.update(),gt(t),ct(t,1),_t(n,r-=4)},render:function(){i.render(),yt(t),ut(t)}}),t.L.start()}unmount(){let t=this;t.L&&(t.L.stop(),t.L=null),V(rt,St),t.dT&&K(t.dT),mt(t),$(q("#d-tt")),$(q("#d-m")),$(q("#d-c"))}}let _t=(t,e)=>{t.style.backgroundPositionX=e%960+"px"},St=t=>{" "===t.key&&R("story")};var Tt=vt;let Lt=0,kt=1,Et=2,Pt=3,At=3,Ct=.2,Mt=2,jt=3500;class Ot{constructor(t){let e=this;e.O=t,e.image=t.image,e.x=t.x,e.dx=t.dx||0,e.E=0,e.mode=Lt,e.play("stand")}update(){let t=this;switch(t.x+=t.dx,t.mode){case Lt:t.dx<.2?t.play("stand"):t.play("run");break;case Et:t.dx<.2?(t.play("stand"),t.mode=Pt,t.onFinish()):t.play("run")}t.image.update()}render(){this.image.render()}acc(){let t=this;switch(t.mode){case Lt:t.dx=et(t.dx+At,t.O.maxDx),t.image.animations.run.frameRate=et(t.dx,10)}}dec(){let t=this;switch(t.mode){case Lt:case Et:t.dx=tt(t.dx-Ct,0),t.image.animations.run.frameRate=tt(t.dx,0)}}finish(t){this.mode=Et,this.onFinish=t}useSkill(){let t=this;t.mode=kt,t.dx=20,t.play("skill"),t.O.scene&&t.O.scene.showSkillEffect(),Y(()=>{t.mode=Lt,t.rE(),t.O.onSkillEnd&&t.O.onSkillEnd()},jt)}isInSkill(){return this.mode===kt}play(t){this.image.playAnimation(t)}incE(){let t=this;switch(t.mode){case Lt:t.E+=Mt,t.E>=100&&t.useSkill()}}rE(){switch(this.mode){case Lt:this.E=0}}}var It=Ot;let Ht=t=>{let e=[0,1];for(let i=0;i<t-1;i++){let t=Math.floor(200*Z())+100,i=100*Z()<1?Kt:Gt;e.push(t,i)}return e.push(0,Qt),{d:-1,l:e,isBot:!0}};var Dt=[{id:"the-hare-and-the-tortoise",title:"The Hare and the Tortoise",text:'Once, a hare saw a tortoise walking slowly with a heavy shell on his back. The hare was very proud of himself and he asked the tortoise. "Shall we have a race?" The tortoise agreed. They started the running race. The hare ran very fast. But the tortoise walked very slowly. The proud hare rested under a tree and soon slept off. But the tortoise walked very fast, slowly and steadily and reached the goal. At last, the tortoise won the race.'}];let Rt="EAT_MY_DUST_",zt=localStorage,Ft=t=>e=>{let i=zt.getItem(Rt+t);return i?JSON.parse(i).slice(0,e):[Ht(441)]},Nt=t=>e=>{let i=zt.getItem(Rt+t),s=i?JSON.parse(i):[];s.push(e),s.sort((t,e)=>e.d-t.d);let n=s.slice(0,10),r=JSON.stringify(n);zt.setItem(Rt+t,r)},Wt=60;class Bt extends It{constructor(t){super(t);let e=this;e.logs=t.logs,e.player=t.player;let i=e.label=$t(t.name);t.lP.appendChild(i),e.logs.isBot&&it(i,"bot");let s=e.arrow=qt();t.lP.appendChild(s)}render(){let t=this;t.image.x=t.x-t.player.x+t.O.offset,t.image.render();let e=t.image.x+50,i=Ut(e);t.label.style.left=i+"px";let s=t.arrow.style;s.left=Jt(e)+"px",s.transform=`rotate(${Yt(i,120,e,250)}rad)`}showLabel(){B(this.label),B(this.arrow)}}let $t=t=>{let e=U("div");return it(e,"name"),e.innerHTML=t,e},qt=()=>{let t=U("div");return it(t,"arrow"),t},Ut=t=>t<Wt?Wt:t>960-Wt?960-Wt:t,Jt=t=>t>=Wt&&t<=960-Wt?t:t<Wt?Wt:t>960-Wt?960-Wt:void 0,Yt=(t,e,i,s)=>{let n=Math.atan2(s-e,i-t)-Math.PI/2;return n<-1.4?-1.4:n>1.4?1.4:n};var Xt=Bt;let Gt=1,Kt=2,Qt=3,Vt=300,Zt=100,te=100,ee=40,ie={ground:q("#g"),D:q("#d"),tC:q("#d-t"),text:q("#t"),subText:q("#st"),frame:q("#ef"),bar:q(".eb"),lP:q("#d-l")};class se extends F{constructor(t){super("game",t)}mount(t){let e=this;B(q("#d-t")),B(q("#d-d")),B(q("#d-e")),B(q("#d-l")),B(q("#d-pm")),B(q("#d-gm")),q("#d-l").innerHTML="";let i=O({image:m.m,frameWidth:32,frameHeight:32,animations:{run:{frames:"0..9",frameRate:10},stand:{frames:[3,8],frameRate:3},skill:{frames:"10..19",frameRate:15}}}),s=P({x:Vt,y:270-te,width:Zt,height:te,animations:i.animations}),n=new It({scene:e,image:s,x:0,maxDx:10,onSkillEnd:()=>{ce(n.E)}});ce(n.E);let r={C:0,L:{sCI:0,P:""},iS:!1,iF:!1,lT:null,sT:null},a=Ft(t.story.id)(3);a.sort((t,e)=>e.d-t.d);let o=a.map((t,e)=>{let s=P({x:0,y:270-te,width:Zt,height:te,animations:i.animations});return new Xt({image:s,x:0,maxDx:10,logs:t,player:n,offset:Vt,name:t.isBot?"Bot":e+1,lP:ie.lP})});pt(e),ht(e),lt(e);let h={d:0,l:[]},l=re(t.story.text);r.L=ae(r,l,r.C),r.C=de(r.L,r.C);let d=ft(this);this.keyPressHandler=e=>{e.preventDefault();let{L:i,C:c}=r,{P:u,sCI:m}=i,p=e.key;if("Enter"===p)return;if(r.iF)return;let f=Date.now();if(u.charAt(c-m)===p){r.iS||(r.iS=!0,r.sT=f,r.lT=r.sT,me(o),$(q("#d-pm")));let e=c+1;r.C=de(i,e),r.C>=i.sCI+i.P.length&&(r.L=ae(r,l,i.lWI+1),r.C=de(r.L,r.C)),n.isInSkill()?(r.D+=1,fe(q(".cursor"))):(n.incE(),ce(n.E),n.acc()),h.l.push(f-r.lT),h.l.push(Gt),d(s.x,s.y),r.L.P||(r.iF=!0,Y(()=>{let e=a.map(t=>+t.d);e.sort((t,e)=>e-t);let i=e[0],s=q("#d-r");r.D>i?s.innerHTML=`New Record!<br />${r.D}m`:s.innerHTML=`You ran<br />${r.D}m`,B(s),h.d=r.d,n.finish(()=>{h.l.push(f-r.lT),h.l.push(Qt),h.n=new Date(r.sT).toLocaleDateString(),h.d=r.D,Nt(t.story.id)(h)})},n.isInSkill()?jt+1e3:1e3))}else n.rE(),ce(n.E,!0),pe(q(".cursor"),r),h.l.push(f-r.lT),h.l.push(Kt);r.lT=f},Q(rt,e.keyPressHandler),e.keyDownHandler=t=>"Escape"===t.key&&R("title"),Q(at,e.keyDownHandler);let c=e.O.context;e.L=_({update:function(){n.dec(),n.update(),r.iS&&o.forEach(t=>{t.dec(),t.update()}),r.D=(n.x/200).toFixed(2),ne(r.D),ue(n.x),ct(e,n.isInSkill()?3:1),gt(e)},render:function(){c.save(),c.globalAlpha=.4,o.forEach(t=>t.render(n)),c.restore(),n.render(),ut(e),yt(e)}}),e.L.start()}unmount(){let t=this;t.L&&(t.L.stop(),t.L=null),V(rt,t.keyPressHandler),V(at,t.keyDownHandler),mt(t),$(q("#d-t")),$(q("#d-d")),$(q("#d-e")),$(q("#d-l")),$(q("#d-pm")),$(q("#d-r")),$(q("#d-gm"))}showSkillEffect(){let t=q(".wind"),e=t.parentNode;for(let i=0;i<15;i++)(()=>{Y(()=>{let i=t.cloneNode(),s=960*Z(),n=300*Z()+30,r=.4*Z()+.2;e.appendChild(i),i.style.left=s+"px",i.style.top=n+"px",i.style.opacity=r,(t=>{Y(()=>{it(t,"m")},100),Y(()=>{e.removeChild(i)},1e3)})(i)},200*i)})()}}function ne(t){ie.D.innerHTML=t+"m"}let re=t=>t.replace(/(\r\n|\n|\r)/gm," ").replace(/\s+/g," ").split(" ");function ae(t,e,i){let s=oe(t.L.sCI+t.L.P.length-1,e,i);he(s.P);let n=oe(-1,e,s.lWI+1);return le(n.P),s}function oe(t,e,i){let s=i,n="";for(let r=i;r<e.length;r++){let i=0===r?e[r]:n+" "+e[r];if(i.length>ee)return{P:nt(n+" "),sCI:t+1,lWI:s};n=i,s=r}return{P:nt(n),sCI:t+1,lWI:s}}let he=t=>ie.text.innerHTML=t,le=t=>ie.subText.innerHTML=t;function de(t,e){let{P:i,sCI:s}=t,n=e-s,r=i.slice(0,n),a=i.slice(n+1),o=i.charAt(n);return he('<span class="correct">'+r+'</span><span class="cursor">'+o+"</span>"+a),e}function ce(t,e=!1){let i=ie.bar;if(e){let t=i.cloneNode(),e=i.parentNode;t.removeAttribute("id"),e.appendChild(t),it(t,"e"),J(()=>{it(t,"d")}),Y(()=>{e.removeChild(t)},1e3)}let s=ie.frame.offsetWidth-2,n=et(t*(s/100),s);i.style.width=n+"px"}function ue(t){ie.ground.style.backgroundPositionX=-t%960+"px"}function me(t){t.forEach(t=>{let e=t.O.logs.l,i=0;for(let s=0;s<e.length;s+=2)i+=e[s],((e,s)=>{Y(()=>{switch(s){case Gt:t.incE(),t.acc();break;case Kt:t.rE()}},i)})(0,e[s+1]);t.showLabel()})}function pe(t,e){e.cT&&(X(e.cT),st(t,ot)),J(()=>{J(()=>{it(t,ot),e.cT=Y(()=>{st(t,ot)},500)})})}function fe(t){let e=t.offsetLeft,i=U("span");it(i,"e","p"),i.innerHTML="+1",i.style.left=e-23+"px",ie.tC.appendChild(i),Y(()=>{ie.tC.removeChild(i)},1e3)}var ge=se;let ye=0;class xe extends F{constructor(t){super("story",t)}mount(){let t=this;B(q("#d-sp")),B(q("#d-gm"));let e=q("#sl");e.innerHTML="",Dt.forEach((t,i)=>{let s=we(t,i);e.appendChild(s)}),t.keyHandler=be({ArrowUp:()=>{--ye<0&&(ye=Dt.length-1),t.updateStoryList()},ArrowDown:()=>{++ye>=Dt.length&&(ye=0),t.updateStoryList()},Enter:()=>t.selectStory(),Escape:()=>R("title")}),Q(at,t.keyHandler)}updateStoryList(){q("#sl").childNodes.forEach((t,e)=>{e===ye?it(t,"s"):st(t,"s")})}selectStory(){R("game",{story:Dt[ye]})}unmount(){$(q("#d-sp")),$(q("#d-gm")),V(at,this.keyHandler)}}let we=(t,e)=>{let i=U("li");return it(i,"story"),i.innerHTML=`${e+1}. ${t.title}`,0===e&&it(i,"s"),i},be=t=>e=>{t[e.key]&&t[e.key]()};var ve=xe;i(0),Q("DOMContentLoaded",()=>{let{context:t}=w();f("images"),Promise.all([g("m.png"),g("c.png"),g("d.png")]).then(()=>{z("title",new Tt({context:t})),z("story",new ve),z("game",new ge({context:t})),R("title")})})}]);</script></body></html>