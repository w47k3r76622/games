<!DOCTYPE html><head><title>Little JS Starter Project</title></head><body><script>const aa=Math.PI;function f(t,i=0,s=1){return t<i?i:s<t?s:t}function ba(t,i,s){return s-i?f((t-i)/(s-i)):0}function ca(t,i,s,e=m()){return 2*Math.abs(t.x-s.x)<i.x+e.x&&2*Math.abs(t.y-s.y)<i.y+e.y}function p(t=1,i=0){return i+Math.random()*(t-i)}function da(t,i=0){return Math.floor(p(t,i))}function ea(t=1){return fa(new q,p(2*aa),t)}function ha(t=1){return 0<t?ea(t*p(0/t,1)**.5):new q}function ia(t=new u,i=new u(0,0,0,1),s=!1){return s?t.Ca(i,p()):new u(p(t.r,i.r),p(t.m,i.m),p(t.b,i.b),p(t.a,i.a))}function v(t,i=1,s=0){return t.seed^=t.seed<<13,t.seed^=t.seed>>>17,t.seed^=t.seed<<5,s+(i-s)*Math.abs(t.seed%1e9)/1e9}class ja{constructor(t){this.seed=t}sign(){return 2*Math.floor(v(this,2,0))-1}}function m(t=0,i){return"number"==typeof t?new q(t,null==i?t:i):new q(t.x,t.y)}function fa(t,i=0,s=1){return t.x=s*Math.sin(i),t.y=s*Math.cos(i),t}function ka(t){var i=t.length();return 1<i?t.scale(1/i):t}class q{constructor(t=0,i=0){this.x=t,this.y=i}$(){return new q(this.x,this.y)}add(t){return new q(this.x+t.x,this.y+t.y)}R(t){return new q(this.x-t.x,this.y-t.y)}multiply(t){return new q(this.x*t.x,this.y*t.y)}wa(t){return new q(this.x/t.x,this.y/t.y)}scale(t){return new q(this.x*t,this.y*t)}length(){return(this.x**2+this.y**2)**.5}normalize(t=1){var i=this.length();return i?this.scale(t/i):new q(0,t)}angle(){return Math.atan2(this.x,this.y)}rotate(t){var i=Math.cos(t);return t=Math.sin(t),new q(this.x*i-this.y*t,this.x*t+this.y*i)}setDirection(t,i=1){return m(t%2?t-1?-i:i:0,t%2?0:t?-i:i)}direction(){return Math.abs(this.x)>Math.abs(this.y)?this.x<0?3:1:this.y<0?2:0}floor(){return new q(Math.floor(this.x),Math.floor(this.y))}Ca(t,i){return this.add(t.R(this).scale(f(i)))}toString(){}}function ma(t=0,i=0,s=1,e=1){var a=new u,h=(t,i,s)=>(s=(s%1+1)%1)<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+(i-t)*(2/3-s)*6:t;return a.r=h(s=2*s-(i=s<.5?s*(1+i):s+i-s*i),i,t+1/3),a.m=h(s,i,t),a.b=h(s,i,t-1/3),a.a=e,a}function na(t){return(255*f(t.r)|0)+(255*f(t.m)<<8)+(255*f(t.b)<<16)+(255*f(t.a)<<24)}class u{constructor(t=1,i=1,s=1,e=1){this.r=t,this.m=i,this.b=s,this.a=e}$(){return new u(this.r,this.m,this.b,this.a)}add(t){return new u(this.r+t.r,this.m+t.m,this.b+t.b,this.a+t.a)}R(t){return new u(this.r-t.r,this.m-t.m,this.b-t.b,this.a-t.a)}multiply(t){return new u(this.r*t.r,this.m*t.m,this.b*t.b,this.a*t.a)}wa(t){return new u(this.r/t.r,this.m/t.m,this.b/t.b,this.a/t.a)}scale(t,i=t){return new u(this.r*t,this.m*t,this.b*t,this.a*i)}Ca(t,i){return this.add(t.R(this).scale(f(i)))}toString(t=!0){var i=t=>((t=255*t|0)<16?"0":"")+t.toString(16);return"#"+i(this.r)+i(this.m)+i(this.b)+(t?i(this.a):"")}}class oa{constructor(){var t=p(1e3);this.time=null==t?void 0:w+t,this.setTime=t}set(t=0){this.time=w+t,this.setTime=t}active(){return w<=this.time}get(){return null!=this.time?w-this.time:0}toString(){}valueOf(){return this.get()}}let sa=m(),ta=32,ua=m(1920,1200),va=m(),wa=m(16),xa=0;function x(t){if(!t.T){t.T=1,t.parent&&t.parent.removeChild(t);for(const i of t.children)x(i,i.parent=0)}}function ya(t,i,s=m()){i.parent||t.children.includes(i),t.children.push(i),i.parent=t,i.Qa=s.$(),i.Pa=0}class Ba{constructor(t=m(),i=m(1),s,e=0,a,h=0){this.g=t.$(),this.size=i,this.ib=void 0,this.v=s,this.angle=e,this.color=a,this.Za=void 0,this.l=!1,this.ja=this.I=this.i=1,this.L=0,this.za=.8,this.C=1,this.fa=h,this.h=m(),this.pa=0,this.Fa=w,this.children=[],this.parent=void 0,this.Qa=m(),this.Pa=0,this.Aa=this.ra=this.Z=!1,Ca.push(this)}update(){var t=this.parent;if(t)this.g=this.Qa.multiply(m(t.l?-1:1,1)).rotate(-t.angle).add(t.g),this.angle=(t.l?-1:1)*this.Pa+t.angle;else if(this.h.x=f(this.h.x,-1,1),this.h.y=f(this.h.y,-1,1),t=this.g.$(),this.h.y+=xa*this.C,this.g.x+=this.h.x*=this.I,this.g.y+=this.h.y*=this.I,this.angle+=this.pa*=this.ja,this.i){var i,s,e,a,h,n,o=this.h.y<0;if(this.V&&(n=this.V.h?this.V.h.x:0,this.h.x=n+(this.h.x-n)*this.za,this.V=0),this.ra)for(var r of Da)!this.Aa&&!r.Aa||r.T||r.parent||r==this||ca(this.g,this.size,r.g,r.size)&&(n=this.K(r),i=r.K(this),n)&&i&&(ca(t,this.size,r.g,r.size)?(n=(i=(n=t.R(r.g)).length())<.01?ea(.001):n.scale(.001/i),this.h=this.h.add(n),r.i&&(r.h=r.h.R(n))):(i=this.size.add(r.size),s=2*(t.y-r.g.y)>i.y+xa,e=2*Math.abs(t.y-r.g.y)<i.y,a=2*Math.abs(t.x-r.g.x)<i.x,n=Math.max(this.L,r.L),!s&&!a&&e||(this.g.y=r.g.y+(i.y/2+.001)*Math.sign(t.y-r.g.y),r.V&&o||!r.i?(o&&(this.V=r),this.h.y*=-n):r.i&&(a=(this.i*this.h.y+r.i*r.h.y)/(this.i+r.i),h=r.h.y*(r.i-this.i)/(this.i+r.i)+2*this.h.y*this.i/(this.i+r.i),this.h.y=a+f(n)*(this.h.y*(this.i-r.i)/(this.i+r.i)+2*r.h.y*r.i/(this.i+r.i)-a),r.h.y=a+f(n)*(h-a))),!s&&e&&(this.g.x=r.g.x+(i.x/2+.001)*Math.sign(t.x-r.g.x),r.i?(i=(this.i*this.h.x+r.i*r.h.x)/(this.i+r.i),s=r.h.x*(r.i-this.i)/(this.i+r.i)+2*this.h.x*this.i/(this.i+r.i),this.h.x=i+f(n)*(this.h.x*(this.i-r.i)/(this.i+r.i)+2*r.h.x*r.i/(this.i+r.i)-i),r.h.x=i+f(n)*(s-i)):this.h.x*=-n)));this.Z&&Ea(this.g,this.size,this)&&!Ea(t,this.size,this)&&(n=Ea(m(t.x,this.g.y),this.size,this),r=Ea(m(this.g.x,t.y),this.size,this),!n&&r||(this.V=o,this.h.y*=-this.L,(o=(t.y-this.size.y/2|0)-(t.y-this.size.y/2))<0&&o>this.I*this.h.y+xa*this.C&&(this.h.y=this.I?(o-xa*this.C)/this.I:0),this.g.y=t.y),r)&&(this.g.x=t.x,this.h.x*=-this.L)}}F(){Fa(this.g,this.ib||this.size,this.v,this.color,this.angle,this.l,this.Za)}sa(t){return 0<t}K(){return!0}removeChild(t){t.parent==this&&this.children.includes(t),this.children.splice(this.children.indexOf(t),1),t.parent=0}toString(){}}let y,B,C,D,E=m(),Ga=[];function F(t=m()){var i,s=wa;return"number"==typeof s&&(s=m(s)),"number"==typeof t&&(t=m(t%(i=Ga[0].size.x/s.x|0)*s.x,(t/i|0)*s.y)),new Ha(t,s,0)}class Ha{constructor(t=m(),i=wa,s=0){this.g=t,this.size=i,this.Wa=s}offset(t){return new Ha(this.g.add(t),this.size,this.Wa)}frame(t){return this.offset(m(t*this.size.x,0))}}class Ma{constructor(t){this.image=t,this.size=m(t.width,t.height);var i=G.createTexture();G.bindTexture(3553,i),t&&G.texImage2D(3553,0,6408,6408,5121,t),G.texParameteri(3553,10241,9728),G.texParameteri(3553,10240,9728),this.Ma=i,this.lb=m(.1).wa(this.size)}}function Fa(t,i=m(1),s,e=new u,a=0,h,n=new u(0,0,0,0)){var o,r,c,l,d=s&&Ga[s.Wa];d?(o=s.g.x/d.size.x,r=s.g.y/d.size.y,c=s.size.x/d.size.x,s=s.size.y/d.size.y,l=d.lb,(d=d.Ma)!=Na&&(Oa(),G.bindTexture(3553,Na=d)),Pa(t.x,t.y,h?-i.x:i.x,i.y,a,o+l.x,r+l.y,o-l.x+c,r-l.y+s,na(e),na(n))):Pa(t.x,t.y,i.x,i.y,a,0,0,0,0,0,na(e))}function H(t,i,s=1,e=new u){var a=new u(0,0,0),h=D;h.fillStyle=e.toString(),h.lineWidth=0,h.strokeStyle=a.toString(),h.textAlign="center",h.font=s+"px arial",h.textBaseline="middle",h.lineJoin="round",i=i.$(),(t+"").split("\n").forEach(t=>{h.fillText(t,i.x,i.y),i.y+=s})}function I(t,i=0){return K[i]&&!!(1&K[i][t])}let Qa=!1;function Ra(t,i=0){return I(t,i+1)}let K=[[]];function Sa(){for(const t of K)for(const i in t)t[i]&=1}function Ta(t){return"KeyW"==t?"ArrowUp":"KeyS"==t?"ArrowDown":"KeyA"==t?"ArrowLeft":"KeyD"==t?"ArrowRight":t}function Ua(t){var i;return y?(i=y.getBoundingClientRect(),m(y.width,y.height).multiply(m(ba(t.x,i.left,i.right),ba(t.y,i.top,i.bottom)))):m()}onkeydown=t=>{t.repeat||(Qa=!1,K[0][t.code]=3,K[0][Ta(t.code)]=3)},onkeyup=t=>{K[0][t.code]=4,K[0][Ta(t.code)]=4},onmousedown=t=>{Qa=!1,K[0][t.button]=3,Ua(t),t.button&&t.preventDefault()},onmouseup=t=>K[0][t.button]=2&K[0][t.button]|4,onmousemove=t=>Ua(t),onwheel=t=>t.ctrlKey?0:Math.sign(t.deltaY),oncontextmenu=()=>!1;const Va=[];function Wa(){var i,s;if(navigator&&navigator.getGamepads&&document.hasFocus()){var e=navigator.getGamepads();for(let t=e.length;t--;){var a=e[t],h=K[t+1]||(K[t+1]=[]),n=Va[t]||(Va[t]=[]);if(a){for(var o=0;o<a.axes.length-1;o+=2)n[o>>1]=(i=m(a.axes[o],a.axes[o+1]),void 0,ka(m((s=t=>.3<t?ba(t,.3,.8):t<-.3?-ba(-t,.3,.8):0)(i.x),s(-i.y))));for(o=a.buttons.length;o--;){var r=a.buttons[o],c=Ra(o,t);h[o]=r.pressed?c?1:3:c?4:0,Qa||=!t&&r.pressed}(a=m((Ra(15,t)&&1)-(Ra(14,t)&&1),(Ra(12,t)&&1)-(Ra(13,t)&&1))).x**2+a.y**2&&(n[0]=ka(a))}}}}const Xa=void 0!==window.ontouchstart;if(Xa){let s;onmousedown=onmouseup=()=>0,ontouchstart=ontouchmove=ontouchend=t=>{M&&"running"!=M.state&&N(0);var i=t.touches.length;return i?(Ua(m(t.touches[0].clientX,t.touches[0].clientY)),s?Qa=!1:K[0][0]=3):s&&(K[0][0]=2&K[0][0]|4),s=i,document.hasFocus()&&t.preventDefault(),!0}}let M=new AudioContext,Ya=!1;function Za(t){var i=Ya;if(!(Ya="running"!=M.state)||(M.resume(),!i)){const s=M.createBuffer(t.length,t[0].length,44100);i=M.createBufferSource(),t.forEach((t,i)=>s.getChannelData(i).set(t)),i.buffer=s,i.playbackRate.value=1,i.loop=!1,(t=M.createGain()).gain.value=.5,t.connect(M.destination),i.connect(new StereoPannerNode(M,{pan:f(0,-1,1)})).connect(t),i.start()}}function N(...t){Za([$a(...t)])}function $a(t=1,i=.05,s=220,e=0,a=0,h=.1,n=0,o=1,r=0,c=0,u=0,l=0,d=0,b=0,g=0,v=0,m=0,y=1,x=0,w=0,M=0){var E=2*aa,k=r*=500*E/44100/44100;i=s*=p(1+i,1-i)*E/44100;let U=[],z=0,K=0,G=0,A=1,Y=0,I=0,C=0;var j=E*Math.abs(M)*2/44100,F=Math.cos(j),S=1+(B=Math.sin(j)/2/2),j=-2*F/S,B=(1-B)/S;let P=(1+Math.sign(M)*F)/2/S,N=-(Math.sign(M)+F)/S,D=0,T=0,O=0,X=0;for(c*=500*E/44100**3,g*=E/44100,u*=E/44100,l*=44100,d=44100*d|0,t*=.5,S=(e=44100*e+9)+(x*=44100)+(a*=44100)+(h*=44100)+(m*=44100)|0;G<S;U[G++]=C*t)++I%(100*v|0)||(C=n?1<n?2<n?3<n?Math.sin(z**3):f(Math.tan(z),1,-1):1-(2*z/E%2+2)%2:1-4*Math.abs(Math.round(z/E)-z/E):Math.sin(z),C=(d?1-w+w*Math.sin(E*G/d):1)*Math.sign(C)*Math.abs(C)**o*(G<e?G/e:G<e+x?1-(G-e)/x*(1-y):G<e+x+a?y:G<S-m?(S-G-m)/h*y:0),C=m?C/2+(m>G?0:(G<S-m?1:(S-G)/m)*U[G-m|0]/2/t):C,M&&(C=X=P*D+N*(D=T)+P*(T=C)-B*O-j*(O=X))),F=(s+=r+=c)*Math.cos(g*K++),z+=F+F*b*Math.sin(G**5),A&&++A>l&&(s+=u,i+=u,A=0),!d||++Y%d||(s=i,r=k,A=A||1);return U}let ab=[],bb=m();function Ea(t,i=m(),s){var e=Math.max(t.x-i.x/2|0,0),a=Math.max(t.y-i.y/2|0,0),h=Math.min(t.x+i.x/2,bb.x);for(t=Math.min(t.y+i.y/2,bb.y);a<t;++a)for(i=e;i<h;++i){var n=ab[a*bb.x+i];if(n&&(!s||s.sa(n)))return!0}}function gb(t){var i="number"==typeof t.xa?ha(t.xa/2):m(p(-.5,.5),p(-.5,.5)).multiply(t.xa).rotate(t.angle);let s=p(t.Ra,-t.Ra);t.Da||(i=t.g.add(i),s+=t.angle);const e=t.qb;var a=(r=t=>t+t*p(e,-e))(t.pb),h=r(t.Ea),n=r(t.sb),o=r(t.speed),r=r(t.$a)*(2*da(2)-1),c=p(t.Ia,-t.Ia),u=ia(t.fb,t.gb,t.Ta),l=ia(t.cb,t.eb,t.Ta),c=t.Da?c:t.angle+c;(i=new hb(i,t.v,s,u,l,a,h,n,t.ba,t.ha,t.oa,t.Da&&t,t.ob)).h=fa(m(),c,o),i.pa=r,i.ba=t.ba,i.I=t.I,i.ja=t.ja,i.L=t.L,i.za=t.za,i.C=t.C,i.Z=t.Z,i.fa=t.fa,i.l=!!da(2),t.Sa&&t.Sa(i)}class ib extends Ba{constructor(t,i,s=0,e=0,a=100,h=aa,n,o=new u,r=new u,c=new u(1,1,1,0),l=new u(1,1,1,0),d=.5,b=.1,g=1,v=.1,f=.05,y=1,x=1,p=0,w=aa,M=.1,E=.2,U=!1,z=!1,G=!0,A=z?1e9:0,C=!1){super(t,m(),n,i,void 0,A),this.xa=s,this.Ka=e,this.Ja=a,this.Ia=h,this.fb=o,this.gb=r,this.cb=c,this.eb=l,this.Ta=G,this.pb=d,this.Ea=b,this.sb=g,this.speed=v,this.$a=f,this.I=y,this.ja=x,this.C=p,this.Ra=w,this.ba=M,this.qb=E,this.Z=U,this.ha=z,this.Da=C,this.oa=0,this.Sa=this.ob=void 0,this.aa=0}update(){if(this.parent&&super.update(),!this.Ka||w-this.Fa<=this.Ka){if(+this.Ja){var t=1/this.Ja;for(this.aa+=jb;0<this.aa;this.aa-=t)gb(this)}}else x(this)}F(){}}class hb extends Ba{constructor(t,i,s,e,a,h,n,o,r,c,u,l,d){super(t,m(),i,s),this.ma=e,this.la=a.R(e),this.nb=h,this.Ea=n,this.tb=o-n,this.ba=r,this.ha=c,this.oa=u,this.W=l,this.Ha=d}F(){var t=Math.min((w-this.Fa)/this.nb,1),i=m(this.Ea+t*this.tb),s=this.ba/2,s=new u(this.ma.r+t*this.la.r,this.ma.m+t*this.la.m,this.ma.b+t*this.la.b,(this.ma.a+t*this.la.a)*(t<s?t/s:1-s<t?(1-t)/s:1));this.ha&&(kb=!0);let e=this.g;var a,h,n=this.angle;this.W&&(e=this.W.g.add(e.rotate(-this.W.angle)),n+=this.W.angle),this.oa?(a=this.h,(n=(a=this.W?a.rotate(-this.W.angle):a).length())&&(a=a.scale(1/n),h=n*this.oa,i.y=Math.max(i.x,h),n=a.angle(),Fa(e.add(a.multiply(m(0,-h/2))),i,this.v,s,n,this.l))):Fa(e,i,this.v,s,n,this.l),this.ha&&(kb=void 0),1==t&&(this.color=s,this.size=i,this.Ha&&this.Ha(this),this.T=1)}}let lb=[],mb;function nb(){var t,i;lb.length&&(t=lb[0],i=ob-mb,mb?5<i?(mb=0,lb.shift()):t.F():mb=ob)}let pb,G,qb,Na,rb,sb,O,tb,ub,kb,vb;function wb(){pb=document.createElement("canvas"),G=pb.getContext("webgl2"),document.body.appendChild(pb);var t=G.createProgram();G.attachShader(t,xb("#version 300 es\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}",35633)),G.attachShader(t,xb("#version 300 es\nprecision highp float;in vec2 v;in vec4 d,e;uniform sampler2D s;out vec4 c;void main(){c=texture(s,v)*d+e;}",35632)),G.linkProgram(t),qb=t,t=new ArrayBuffer(44e4),O=new Float32Array(t),tb=new Uint32Array(t),rb=G.createBuffer(),sb=G.createBuffer(),t=new Float32Array([ub=0,0,1,0,0,1,1,1]),G.bindBuffer(34962,sb),G.bufferData(34962,t,35044)}function yb(){G.viewport(0,0,pb.width=y.width,pb.height=y.height),G.clear(16384),G.useProgram(qb),G.activeTexture(33984),G.bindTexture(3553,Na=Ga[0].Ma);let o=kb=vb=0;var t=(t,i,s,e)=>{t=G.getAttribLocation(qb,t);var a=s&&44,h=s&&1,n=1==s;G.enableVertexAttribArray(t),G.vertexAttribPointer(t,e,i,n,a,o),G.vertexAttribDivisor(t,h),o+=e*s},i=(G.bindBuffer(34962,sb),t("g",5126,0,2),G.bindBuffer(34962,rb),G.bufferData(34962,44e4,35048),t("p",5126,4,4),t("u",5126,4,4),t("c",5121,1,4),t("a",5121,1,4),t("r",5126,4,1),t=m(2*ta).wa(E),m(-1).R(sa.multiply(t)));G.uniformMatrix4fv(G.getUniformLocation(qb,"m"),!1,new Float32Array([t.x,0,0,0,0,t.y,0,0,1,1,1,1,i.x,i.y,0,0]))}function xb(t,i){return i=G.createShader(i),G.shaderSource(i,t),G.compileShader(i),i}function Oa(){var t;ub&&(t=vb?1:771,G.blendFuncSeparate(770,t,1,t),G.enable(3042),G.bufferSubData(34962,0,O),G.drawArraysInstanced(5,0,4,ub),ub=0,vb=kb)}function Pa(t,i,s,e,a,h,n,o,r,c,u=0){(1e4<=ub||vb!=kb)&&Oa();var l=11*ub;O[l++]=t,O[l++]=i,O[l++]=s,O[l++]=e,O[l++]=h,O[l++]=n,O[l++]=o,O[l++]=r,tb[l++]=c,tb[l++]=u,O[+l]=a,ub++}const jb=1/60;let Ca=[],Da=[],zb=0,w=0,ob=0,Ab=0,P=0;function Bb(){Da=Ca.filter(t=>t.ra);for(const t of Ca)t.parent||function t(i){if(!i.T){i.update();for(const s of i.children)t(s)}}(t);Ca=Ca.filter(t=>!t.T)}class Cb extends Ba{constructor(t,i){super(t,i),this.tag="",this.B={u:F(0),va:F(4),s:F(14),vb:F(3),ka:F(1),va:F(4),qa:F(5),Ua:F(6),Va:F(7),ca:F(8),na:F(9),points:F(10),ub:F(2),ab:F(12),kb:F(13),bb:F(11)}}}class Db extends Cb{constructor(t,i){super(t,i),this.C=0,this.Z=this.Aa=this.ra=!0}}function Eb(t,i){!t.D.A.ea.qa||t.j&&"bolt"===t.j.tag||(t.j&&x(t.j),t.j=new Kb(t.g,t,"bolt",i)),!t.D.A.ea.Ua||t.j&&"rifle"===t.j.tag||(t.j&&x(t.j),t.j=new Kb(t.g,t,"rifle",i)),!t.D.A.ea.Va||t.j&&"shotgun"===t.j.tag||(t.j&&x(t.j),t.j=new Kb(t.g,t,"shotgun",i))}class Lb extends Db{constructor(t){super(t,m(.9,.9)),this.j,this.l=!1,this.ua=10,this.O=!1,this.H=!0,this.ta=this.ga=0,this.o=!1}update(){super.update(),this.C=1,this.ga++,this.ta++,this.g.y<-15&&Mb&&(this.o=!0)}}function Nb(t){0<Q.length&&(Q.forEach(t=>{x(t)}),Q=[]),Ob=!1,Pb--,t.g=m(125,125),x(t.s),t.s=void 0,t.o=!1}function Qb(t){return t.o=!0,N(.9,void 0,436,.03,.21,void 0,1,1.9,4,void 0,void 0,void 0,.06,void 0,-18,void 0,void 0,.3,.1,void 0,-800),t.h.y=.3,t.o?0:1}function Rb(t,i){T=void 0,Ob=!1,t.points+=1300,t.g=m(125,125),0<Q.length&&(Q.forEach(t=>{x(t)}),Q=[]),N(.6,0,864,.02,.1,.7,1,.9,void 0,void 0,160,.06,.01,void 0,void 0,void 0,void 0,.2,.1,void 0,500),x(i)}class Sb extends Lb{constructor(t){super(t),this.tag="player",this.D=new Tb(this.tag,this),this.Y=new oa,this.D.A.ea.qa=!0,this.j=new Kb(this.g,this,"bolt",!1),this.ca=3,this.points=0,this.o=!1,this.U=60,this.s}update(){super.update(),I("ArrowUp")&&!this.O&&this.H&&(this.h.y=.15,this.h.y+=.06,this.Ba++,N(2,void 0,216,.02,.04,void 0,1,1.9,50,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.56,.04,void 0,-300),this.O=!0),I("ArrowUp")||(this.O=!1),this.H=!(2<=this.Ba),I("ArrowRight")&&(this.h.x=.15,this.l=!1,this.j)&&(this.j.l=!1),I("ArrowLeft")&&(this.h.x=-.15,this.l=!0,this.j)&&(this.j.l=!0),I("Space")&&30<=this.ga&&(Ub(this.j),this.ga=0),this.D.A.rb.na&&I("KeyQ")&&60<=this.ta&&(this.na(),this.ta=0),T&&!this.s&&(this.s=new Ba(m(this.g.x,this.g.y+1),this.size),this.s.C=0),T&&this.s&&(this.s.g=m(this.g.x,this.g.y+1),this.s.angle=Math.PI+Math.atan2(-T.g.x+this.s.g.x,-T.g.y+this.s.g.y)),Eb(this,!1),this.o&&(this.U--,this.U<=0)&&(new ib(this.g,0,.2,.1,80,aa,0,new u(1,1,1),new u(1,1,1),new u(1,1,1).scale(1,0),new u(1,1,1).scale(1,0),10,.2,1,.09,0,1,1,2,0,0,.06,0,0,1),this.ca--,(1<=this.ca?Nb:(x(this.s),x))(this),this.U=60)}na(){0<this.ua?(this.j.isActive=!0,this.h.x=this.l?-.4:.4,this.ua--):(this.ua=10,this.j.isActive=!1)}F(){var t=ma(0,0,0,0),i=6*this.Y,i=m(1-.1*Math.sin(i),1+.1*Math.sin(i));let s=this.g;s=s.add(m(0,(i.y-this.size.y)/2)),T&&this.s&&(this.s.v=this.B.s.frame(0)),this.v=(this.o?this.B.va:this.B.u).frame(0),Fa(s,i,this.v,this.color,this.angle,this.l,t)}K(t){if(t&&"powerup"===t.tag)return"points"===t.selected?(Vb(this.D,t.selected),N(void 0,0,2589.07,void 0,.1,.3,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.1,.24),x(t)):I("KeyE")&&t.G<=0&&(N(.6,0,432,.04,.1,1.19,void 0,void 0,5,void 0,100,void 0,void 0,void 0,-4,void 0,void 0,.2,.1,void 0,20),Vb(this.D,t.selected),x(t)),0;if(!(!t||"enemy"!==t.tag||this.o||t.o||this.g.y>t.g.y+.1||t.o))return Qb(this);if(t&&"bullet"===t.tag)return t.N?Qb(this):0;if("tile"===t.tag){if(t.J)return Qb(this);if(t.da)return Rb(this,t),0;if(t.g.y>this.g.y)return 1;this.Ba=0,this.H=!0}return this.o?0:1}sa(){return this.Ba=0,this.H=!0,1}}function Wb(i){if(i.o||(N(.9,void 0,436,.03,.21,void 0,1,1.9,4,void 0,void 0,void 0,.06,void 0,-18,void 0,void 0,.3,.1,void 0,-800),i.o=!0),!i.Na){var s=new Xb(i.g,i.size,"points");if(s.h.y=.1,s.h.y+=.06,s.h.x+=i.l?.01:-.01,(s=p())<=.2&&(s<=.03?new Xb(i.g,i.size,"dash"):new Xb(i.g,i.size,"health")),i.j){new Xb(i.g,i.size,i.j.tag),s="bolt"===i.j.tag?1:"rifle"===i.j.tag?2:3;for(let t=0;t<s.length;t++)new Xb(i.g,i.size,"points")}i.Na=!0}return i.h.y=.3,i.o?0:1}class Yb extends Lb{constructor(t){var i=U;super(t),this.tag="enemy",this.D=new Tb(this.tag,this),this.u=i,this.Ga=!1,this.Y=new oa,this.U=60,this.Na=!1,this.H=60}update(){super.update(),this.o&&(this.U--,this.U<=0)&&(new ib(this.g,0,.2,.1,80,aa,0,new u(1,0,0),new u(1,0,0),new u(1,0,0).scale(1,0),new u(1,0,0).scale(1,0),10,.2,1,.09,0,1,1,2,0,0,.06,0,0,1),x(this)),Eb(this,!0),this.Ga?(this.o||(this.g.x<this.u.g.x&&(this.h.x=.1,this.l=!1,this.j)&&(this.j.l=!1),this.g.x>this.u.g.x+this.u.size.x&&(this.h.x=-.1,this.l=!0,this.j)&&(this.j.l=!0),this.g.y<this.u.g.y&&Math.abs(this.g.x-this.u.g.x)<=5&&!this.O&&this.H<=0&&(this.h.y=.25,this.h.y+=.06,this.O=!0,N(.9,void 0,432,.04,.08,void 0,1,1.9,50,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.56,.1,void 0,-555))),this.j&&!this.o&&60<=this.ga&&(Ub(this.j),this.ga=0)):Math.abs(this.g.x-this.u.g.x)<=8&&Math.abs(this.g.y-this.u.g.y)<=6&&(this.Ga=!0),this.H--}F(){if(this.D){var i=ma(0,0,0,0),s=6*this.Y,s=m(1-.1*Math.sin(s),1+.1*Math.sin(s));let t=this.g;t=t.add(m(0,(s.y-this.size.y)/2)),this.v=(this.o?this.B.va:this.D.ka?this.B.ka:this.B.vb).frame(0),Fa(t,s,this.v,this.color,this.angle,this.l,i)}}K(t){return t&&"enemy"===t.tag?0:t&&"player"===t.tag&&!this.u.o&&this.u.g.y>this.g.y&&this.u.g.x<this.g.x+this.size.x-.1&&this.u.g.x+this.u.size.x>this.g.x+.1?(this.u.h.y=.1,this.u.h.y+=.06,Wb(this)):t&&"bullet"===t.tag?t.N?0:Wb(this):("tile"!==t.tag||t.g.y>this.g.y||!this.O||(this.O=!1,this.H=p(30,60)),this.o?0:1)}}function Vb(t,i){if("points"===i&&(t.parent.points+=10),"health"===i)t.parent.ca++;else for(const e in t.A)if(void 0!==t.A[e][i]&&!t.A[e][i]){for(const a in t.A[e]){var s;t.A[e][a]&&((s=new Xb(t.parent.g,t.parent.size,a)).h.y=.1,s.h.y+=.06,s.h.x+=t.parent.l?.01:-.01),t.A[e][a]=!1}t.A[e][i]=!0}}class Tb{constructor(t,i){this.parent=i,this.tag="modularSlot",this.A={rb:{na:!1},ea:{qa:!1,Va:!1,Ua:!1}},this.ka=!1,"player"!==t&&(t=(t=p())<=.35&&.15<t?Pb<=2?null:"bolt":t<=.15&&.01<t?Pb<=5?null:"rifle":!(t<=.01)||Pb<=8?null:"shotgun",this.ka=null!==(t=null!==t&&"bolt"!==t&&"rifle"!==t&&"shotgun"!==t?"bolt":t),null!==t)&&(this.A.ea[t]=!0)}}class Xb extends Db{constructor(t,i,s){super(t,i),this.G=120,this.L=.8,this.tag="powerup",this.ia="dash bolt shotgun rifle health points".split(" "),this.selected="",this.selected=s?this.ia[this.ia.indexOf(s)]:this.ia[da(0,this.ia.length)]}update(){super.update(),this.C=1,0<this.G&&this.G--}F(){var t;""!==this.selected&&(t=ma(0,0,0,0),this.B[this.selected])&&(this.v=this.B[this.selected].frame(0),this.G<=0||100<this.G||this.G<=80&&60<this.G||this.G<=40&&20<this.G||"points"===this.selected)&&Fa(this.g,this.size,this.v,this.color,this.angle,this.l,t)}K(t){return"tile"===t.tag?1:0}}function Ub(t){"shotgun"!==t.tag?("bolt"===t.tag?N(.2,void 0,900,.03,.05,.03,3,0,void 0,8.2,-110,void 0,void 0,2.9,void 0,void 0,void 0,.2,.01,.18,146):N(1.5,0,900,void 0,.06,void 0,2,6,4,-15,15,void 0,void 0,void 0,4,.3,void 0,.1,.07,void 0,2810),new Zb(t.g,t,t.N)):(N(2,0,0,void 0,.06,.16,4,1.9,30,void 0,void 0,-.16,.11,void 0,void 0,.5,void 0,.1,.1),new Zb(t.g,t,t.N,.15),new Zb(t.g,t,t.N,0),new Zb(t.g,t,t.N,-.15))}class Kb extends Cb{constructor(t,i,s,e){super(t,m(.6)),this.color=new u(0,0,0,0),this.tag=s,this.N=e,ya(i,this,m(.6,0))}}class Zb extends Db{constructor(t,i,s,e){super(t,m(.38,.38)),this.tag="bullet",this.j=i,this.N=s,"bolt"===i.tag&&(this.h.x=i.l?-.25:.25,this.h.y=.1),"rifle"===i.tag&&(this.h.x=i.l?-.25:.25),"shotgun"===i.tag&&(this.h.x=i.l?-.25:.25,this.h.y=e),this.Oa=120}update(){super.update(),this.Oa--,"bolt"===this.j.tag&&(this.C=1),this.Oa<=0&&x(this)}F(){var t=ma(0,0,0,0);this.v=this.B.bb.frame(0),Fa(this.g,m(1,1),this.v,this.color,this.angle,this.l,t)}K(t){return!t||"player"!==t.tag&&"powerup"!==t.tag&&"bullet"!==t.tag?(x(this),1):0}sa(){return x(this),1}}class $b extends Db{constructor(t,i,s,e,a){super(t,i),this.tag="tile",this.i=0,this.mb=s,this.color=new u(1,1,1),this.da=e,this.J=a,this.Y=new oa}K(t){return"enemy"!==t.tag||this.da||this.J||t.o||Math.max(0,Math.min(t.g.x+t.size.x,this.g.x+this.size.x)-Math.max(t.g.x,this.g.x))*Math.max(0,Math.min(t.g.y+t.size.y,this.g.y+this.size.y)-Math.max(t.g.y,this.g.y))>=t.size.x*t.size.y/3&&x(this),"bullet"!==t.tag||this.da||this.J?this.da||this.J?0:1:(new ib(this.g,0,.2,.1,50,aa,0,new u(1,1,1),new u(1,1,1),new u(1,1,1).scale(1,0),new u(1,1,1).scale(1,0),10,.2,1,.09,0,1,1,2,0,0,.06,0,0,1),N(.6,.4,475,.01,.02,.01,2,void 0,void 0,void 0,void 0,void 0,.05,1.6,8.3,void 0,.17,.44,.03,.48),x(this),1)}F(){var t=ma(0,0,0,0),i=6*this.Y,i=m(1-.1*Math.sin(i),1+.1*Math.sin(i));let s=this.g;s=s.add(m(0,(i.y-this.size.y)/2)),this.v=(this.J?this.B.kb:this.da?this.B.ab:this.B.ub).frame(0),0<this.color.m&&0<this.color.b&&this.mb&&(this.color=new u(this.color.r,this.color.m-1/780,this.color.b-1/780)),Fa(this.J?s:this.g,this.J?i:this.size,this.v,this.J?void 0:this.color,this.angle,this.l,t)}}function ac(){var t=bc;t.P=t.X,t.M=t.S}class cc extends Ba{constructor(){super(),this.fa=-1e4,this.seed=da(1e9),this.X=new u(.66,.44,.83,1),this.S=new u(.21,.25,.45,1),this.ya=new u(.6731,.5,.75,1),this.La=new u(.87,.61,.42,1),this.P=new u(.67,.44,.83,1),this.M=new u(.21,.25,.45,1)}F(){var i=B.createLinearGradient(0,0,0,y.height);i.addColorStop(0,this.P),i.addColorStop(1,this.M),B.save(),B.fillStyle=i,B.fillRect(0,0,y.width,y.height),B.globalCompositeOperation="lighter",i=new ja(this.seed);for(let t=50;t--;){var s=v(i,.5,2)**2,e=v(i,9,99),a=ma(v(i,-.3,.2),v(i),v(i)),h=y.width+100,n=y.height+100,e=m((v(i,h)+w*e)%h-50,(v(i,n)+w*e*v(i))%n-50);B.fillStyle=a,B.fillRect(e.x,e.y,s,s)}B.restore()}}const dc=[[0,0,0,1,1,1,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,0],[0,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0],[0,0,1,0,0,0,1,0,1,1,1,1,1,0,1,0,0,0,1,0,1,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,1,1,1,0,0,1,0,0,0,1,0,0,1,1,1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,0,0,0,0]],ec=[[0,0,0,0,1,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0],[0,0,0,1,1,0,0,0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,1,1,1,1,0,1,0,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0]],V=[];let Q=[],T,U,bc,fc=3,jc=0,kc=0,W=0,lc=0,X=0,mc,Y=30,Pb=0,Mb=!1,Ob=!1,nc=!0,oc=!1,pc=!1,qc=(1-.93)/13,rc=.82/13,sc=.007/13,tc=1/300,uc=50,vc=500;function wc(){va=m(1280,720),ta=26.4,sa=m(0,0),xa=-.01,bc=new cc;for(var t=0;t<dc.length;t++)for(var i=0;i<dc[t].length;i++)1===dc[t][i]&&V.push(new $b(m(i-25,dc.length-t-7),m(1.01,1.01),!1));for(t=0;t<ec.length;t++)for(i=0;i<ec[t].length;i++)1===ec[t][i]&&V.push(new $b(m(i-25,ec.length-t),m(1.01,1.01),!1));U&&(xc(),yc()),U=new Sb(m(-3,20))}function yc(){x(U),U=void 0}function xc(){x(U.s),U.s=void 0}function zc(){Q=Q.filter(t=>!t.o)}function Ac(){V.forEach(t=>{x(t)}),X=W=0,xa=-.01,vc=500,Pb++,nc=!0,Y=20,bc.P=bc.X,bc.M=bc.S}function Bc(){var s;mc=Cc(),U||=new Sb(m(125,125)),mc.hb(125,125,20),T||(s=mc.Ya(),T=new $b(m(s.x,240<s.y?240:s.y),m(1.01,1.01),!1,!0)),s=mc.Xa(125,125,Y);for(let i=0;i<s.length;i++)for(let t=0;t<s[0].length;t++)1===s[i][t]&&V.push(new $b(m(U.g.x-Y+t,U.g.y-Y+i),m(1.01,1.01),!1)),9===s[i][t]&&V.push(new $b(m(U.g.x-Y+t,U.g.y-Y+i),m(1.01,1.01),!0))}function Dc(){if(U&&Ob)return U.g.add(m(0,3*ba(E.y,300,600)))}function Ec(){X=0,vc=500,uc=50,ac(),V.forEach(t=>{x(t)})}function Fc(){0<Q.length&&(Q.forEach(t=>{x(t)}),Q=[]),T&&x(T),T=void 0,U&&yc()}!function(e,a,h,n,t){function o(t=0){var i=t-Ab;for(Ab=t,ob+=i/1e3,P+=i,P=Math.min(P,50),r(),t=0,P<0&&-9<P&&(t=P,P=0);0<=P;P-=1e3/60)w=zb++/60,Xa||document.hasFocus()||(K=[[]]),Wa(),e(),Bb(),a(),Sa();P+=t,E=m(y.width,y.height),B.imageSmoothingEnabled=!1,yb(),h(),Ca.sort((t,i)=>t.fa-i.fa);for(const s of Ca)s.T||s.F();n(),nb(),ub&&Oa(),requestAnimationFrame(o)}function r(){var t,i;va.x?(y.width=va.x,y.height=va.y,t=innerWidth/innerHeight,i=y.width/y.height,(pb||y).style.width=y.style.width=C.style.width=t<i?"100%":"",(pb||y).style.height=y.style.height=C.style.height=t<i?"":"100%"):(y.width=Math.min(innerWidth,ua.x),y.height=Math.min(innerHeight,ua.y)),C.width=y.width,C.height=y.height,E=m(y.width,y.height)}document.body.style.cssText="margin:0;overflow:hidden;background:#000;touch-action:none;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none",document.body.appendChild(y=document.createElement("canvas")),B=y.getContext("2d"),wb(),document.body.appendChild(C=document.createElement("canvas")),D=C.getContext("2d"),(pb||y).style.cssText=y.style.cssText=C.style.cssText="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",r(),t=t.map((s,e)=>new Promise(t=>{const i=new Image;i.onerror=i.onload=()=>{Ga[e]=new Ma(i),t()},i.src=s})),Promise.all(t).then(()=>{wc(),o()})}(function(){0==W%60&&lc++,oc?V.forEach(t=>{x(t)}):(zc(),!Mb&&I("Enter")&&2<=lc&&(yc(),Mb=!0),Mb&&!Ob&&(N(void 0,0,216,void 0,.01,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.5,void 0,void 0,.01),Ac(),Bc(),U&&U.s&&xc(),Ob=!0),U&&Ob&&(fc=U.ca,jc=U.points,ta=55,sa=(sa=Dc()).Ca(Dc(),f((w-U.Fa)/2)),oc=0===fc))},function(){},function(){if(W++,oc)Fc();else if(Ob){var i,s,e,a;if(0==W%60&&(7<=X&&(vc+=50),X<12&&N(15,void 0,26,.02,.01,.03,4,.3,void 0,void 0,void 0,.2,void 0,void 0,vc,void 0,void 0,.67,.03),X++,uc=8<=X?70:50),2<=X&&(i=bc,s=new u(i.M.r+Math.abs(i.S.r-i.La.r)/660,i.M.m+Math.abs(i.S.m-i.La.m)/660,i.M.b-Math.abs(i.S.b-i.S.b)/660),i.P=new u(i.P.r+Math.abs(i.X.r-i.ya.r)/660,i.P.m+Math.abs(i.X.m-i.ya.m)/660,i.P.b-Math.abs(i.X.b-i.ya.b)/660),i.M=s),780<W){for(13===X&&(N(15,void 0,26,.02,.01,.03,4,.3,void 0,void 0,void 0,.2,void 0,void 0,1800,void 0,void 0,.67,.03),Y=30,U.points+=5,mc.jb(parseInt(U.g.y),parseInt(U.g.x),!0,Q)),Ec(),i=mc.Xa(parseInt(U.g.x),parseInt(U.g.y),Y),s=0;s<i.length;s++)for(let t=0;t<i[0].length;t++)1===i[s][t]&&V.push(new $b(m(U.g.x-Y+t,U.g.y-Y+s),m(1.02,1.02),!1)),3===i[s][t]&&V.push(new $b(m(U.g.x-Y+t,U.g.y-Y+s-.1),m(.8,.8),!1,!1,!0)),9===i[s][t]&&V.push(new $b(m(U.g.x-Y+t,U.g.y-Y+s),m(1.02,1.02),!0)),2===i[s][t]&&(e=U.g.x-(U.g.x-Y+t),a=U.g.y-(U.g.y-Y+s),7<Math.sqrt(e*e+a*a)?(e=new Yb(m(U.g.x-Y+t,U.g.y-Y+s)),Q.push(e)):i[s][t]=0);xc(),W=0}}},function(){var t;oc?(U=void 0,0==W%1&&kc<jc&&(kc=(kc+=13)>jc?jc:kc),H("GAME OVER",m(E.scale(.5).x,E.scale(.2).y),60,new u(1,1,1)),H(kc,m(E.scale(.5).x,E.scale(.4).y),60,new u(1,1,1)),kc===jc&&((null===localStorage.getItem("score")||localStorage.getItem("score")<jc)&&(pc=!0,localStorage.setItem("score",jc)),pc&&H("NEW BEST SCORE!",m(E.scale(.5).x,E.scale(.6).y),60,new u(1,1,1)),0==W%60&&X++,0==X%2&&H("Press ENTER to restart",m(E.scale(.5).x,E.scale(.9).y),60,new u(1,1,1)),oc)&&I("Enter")&&(kc=Pb=lc=0,Ob=Mb=!1,wc(),oc=!1)):Ob?(8<=X&&(uc-=20/60),H(X,m(E.scale(.5).x,E.scale(.1).y),uc,new u(.93+qc*X,.82-rc*X,.007-sc*X)),t=(t,i,s,e=40)=>{D.textAlign="center",D.textBaseline="top",D.font=e+"px monospace",D.fillStyle="#fff",D.lineWidth=3,D.strokeText(t,i,s),D.fillText(t,i,s)},tc*W<1?nc&&H("Stage "+Pb,m(E.scale(.5).x,E.scale(.5).y),60,new u(1,1,1,1-tc*W)):nc=!1,t("LIFE: "+fc,+C.width/4,20),t("SCORE: "+jc,3*C.width/4,20)):(H("Help Juicy, the algae from Antarctica, escaping his dissolving endless iceberg",m(E.scale(.72).x,E.scale(.23).y),12,new u(1,1,1)),H("as hostile organisms and flamable gasses are freed from their frozen tomb. ",m(E.scale(.72).x,E.scale(.26).y),12,new u(1,1,1)),H("WASD/Arrows to move - SPACE to attack - E to pickup power-ups - Q to use the dash power-up (lightning)",m(E.scale(.72).x,E.scale(.29).y),12,new u(1,1,1)),H("Push Juicy against an ice block to latch him onto it. When Juicy is latched onto an ice block, press Space to slide upwards!",m(E.scale(.72).x,E.scale(.32).y),12,new u(1,1,1)),H("Red ice blocks will dissapear after 13 seconds. An enemy or a new ice block MAY appear in its place.",m(E.scale(.72).x,E.scale(.35).y),12,new u(1,1,1)),H("Reach the golden wind rose to escape the stage. If there is no way to reach it, wait for the ",m(E.scale(.72).x,E.scale(.38).y),12,new u(1,1,1)),H("map to change, but who knows what else might appear.",m(E.scale(.72).x,E.scale(.41).y),12,new u(1,1,1)),0==W%60&&X++,0==X%2&&2<=lc&&H("Press ENTER",m(E.scale(.5).x,E.scale(.9).y),60,new u(1,1,1)))},["13C_tileset.png"]);const Cc=()=>{var a=[3,4],c=[3,4];let u=new Int8Array(62500).map(()=>.8<Math.random()?1:0);const h=(t,i)=>{var s=250*(i-1)+t,e=250*(i-1)+t+1,a=250*i+t+1,h=250*(i+1)+t+1,n=250*(i+1)+t,o=250*(i+1)+t-1,r=250*i+t-1;return t=250*(i-1)+t-1,c.includes((!u[s]||1!==u[s]&&9!==u[s]?0:1)+(!u[e]||1!==u[e]&&9!==u[e]?0:1)+(!u[a]||1!==u[a]&&9!==u[a]?0:1)+(!u[h]||1!==u[h]&&9!==u[h]?0:1)+(!u[n]||1!==u[n]&&9!==u[n]?0:1)+(!u[o]||1!==u[o]&&9!==u[o]?0:1)+(!u[r]||1!==u[r]&&9!==u[r]?0:1)+(!u[t]||1!==u[t]&&9!==u[t]?0:1))?1:9};return{jb:(t,i,e,s)=>{u[250*i+t]=0,s&&s.forEach(t=>{u[250*t.g.y+t.g.x]=0}),u=(u=u.map((t,i)=>{var s=i%250;return i=Math.floor(i/250),s=(u[250*(i-1)+s]?1:0)+(u[250*(i-1)+s+1]?1:0)+(u[250*i+s+1]?1:0)+(u[250*(i+1)+s+1]?1:0)+(u[250*(i+1)+s]?1:0)+(u[250*(i+1)+s-1]?1:0)+(u[250*i+s-1]?1:0)+(u[250*(i-1)+s-1]?1:0),1===t?c.includes(s)?1:0:a.includes(s)?e?p()<.01?2:13<=Pb&&p()<.1?3:1:1:0})).map((t,i)=>1===t||9===t?h(i%250,Math.floor(i/250)):t)},Xa:(t,i,s,e)=>{for(u[250*i+t]=0,e&&e.forEach(t=>{u[250*t.g.y+t.g.x]=0}),e=[],startingX=t-s,startingY=i-s,endingX=t+s,endingY=i+s,t=-1,i=startingY;i<endingY;i++)for(e.push([]),t++,s=startingX;s<endingX;s++)e[t].push(!(s<0||249<s)&&u[250*i+s]||0);return e},hb:(s,e,a)=>{for(let i=e-a;i<e+a+1;i++)for(let t=s-a;t<s+a+1;t++)i===e&&t===s||0!=t%2&&0!=i%2||(u[250*i+t]=1);u=u.map((t,i)=>{if(1===t||9===t)return h(i%250,Math.floor(i/250))})},Ya:()=>{var t,i;return p()<.5?(t=Math.floor(250*Math.random()),i=Math.random()<.5?0:249,u[250*i+t]=4):(t=Math.random()<.5?0:249,i=Math.floor(250*Math.random()),u[250*i+t]=4),{x:t,y:i}},wb:u,width:250}};
</script>