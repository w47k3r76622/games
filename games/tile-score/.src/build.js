!function t(e,i,s){function r(n,a){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!a&&h)return h(n,!0);if(o)return o(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return r(i?i:t)},c,c.exports,t,e,i,s)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<s.length;n++)r(s[n]);return r}({1:[function(t){function e(){i&&i.remove(),i=new a(g,h,l),s=null,r=null,p.className="Game"}var i,s,r,o=t(7),n=t(8),a=t(5),h=720,l=6,c=180,d=180,u=h,f=h+c+d,p=document.querySelector(".Game"),g=document.querySelector(".Game-grid"),m=document.querySelector(".Game-score"),v=document.querySelector(".Game-moves"),y=document.querySelector(".Game-playAgain"),w=document.querySelector(".Game-replay");n.start(function(){i&&(i.updateAppearance(),i.score!==s&&(m.innerHTML=i.score,m.className="Game-score "+(i.score<0?"is-negative":""),s=i.score),i.moves!==r&&(v.innerHTML=i.moves,v.className="Game-moves "+(i.moves<0?"is-negative":"")+(i.moves<6?"is-low":""),r=i.moves),i.moves<=0&&(p.className="Game Game--over"))}),o(".Game",u,f),e(),y.onclick=e,w.onclick=e},{}],2:[function(t,e){var i=t(3);e.exports=function(t,e,s){function r(){var c=i()-h;e>c&&c>0?o=setTimeout(r,e-c):(o=null,s||(l=t.apply(a,n),o||(a=n=null)))}var o,n,a,h,l;return null==e&&(e=100),function(){a=this,n=arguments,h=i();var c=s&&!o;return o||(o=setTimeout(r,e)),c&&(l=t.apply(a,n),a=n=null),l}}},{}],3:[function(t,e){function i(){return(new Date).getTime()}e.exports=Date.now||i},{}],4:[function(t,e){function i(){this._elements=[]}function s(){var t=window.scrollX,e=window.scrollY;return void 0===t&&(t=T.body.scrollLeft,e=T.body.scrollTop),T.elementFromPoint(this.pageX-window.scrollX,this.pageY-window.scrollY)}function r(t,e,i,s){var r=Math.abs(t-i),o=Math.abs(e-s);return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}function o(t){for(var e=0;e<m.length;e++)m[e].identifier===t.identifier&&m.splice(e,1)}function n(t){for(var e=0;e<m.length;e++)if(m[e].identifier===t)return m[e]}function a(t,e){for(var i=0;i<w.length;i++)t[w[i]]=e[w[i]]}function h(t){return 180*Math.atan2(t.x,-t.y)/Math.PI}function l(t,e){t||(t={}),e||(e=t);var i=n(e.identifier);i&&i.destroy(),this.identifier=e.identifier,this.moves=[],m.push(this)}function c(t){for(var e,i=0;i<t.changedTouches.length;i++)e=t.changedTouches[i],new l(t,t.changedTouches[i]).start(t,e)}function d(t){for(var e,i=0;i<t.changedTouches.length;i++)e=t.changedTouches[i],n(e.identifier).drag(t,e)}function u(t){for(var e,i=0;i<t.changedTouches.length;i++)e=t.changedTouches[i],n(e.identifier).end(t,e).destroy()}function f(t){for(var e,i=0;i<t.changedTouches.length;i++)e=t.changedTouches[i],n(e.identifier).cancel(t,e).destroy()}function p(t,e,i){null!=t&&(t.addEventListener?t.addEventListener(e,i):T.attachEvent&&t.attachEvent("on"+e,i))}var g,m=[],v=5,y=1e3,w="target,pageX,pageY,clientX,clientY,offsetX,offsetY,screenX,screenY,shiftKey,x,y".split(","),T="undefined"!=typeof document?document:null;i.prototype.on=function(t,e,i){return e?(e._interactEvents=e._interactEvents||{},e._interactEvents[t]=e._interactEvents[t]||[],e._interactEvents[t].push({callback:i,interact:this}),this):void 0},i.prototype.emit=function(t,e,i,s){if(e){var r=this,o=e;for(s.originalEvent=i,s.preventDefault=function(){i.preventDefault()},s.stopPropagation=function(){i.stopPropagation()};o;)o._interactEvents&&o._interactEvents[t]&&o._interactEvents[t].forEach(function(t){t.interact===r&&t.callback.call(s,s)}),o=o.parentNode;return this}},i.prototype.off=i.prototype.removeListener=function(t,e,i){if(e&&e._interactEvents&&e._interactEvents[t]){for(var s,r=e._interactEvents[t],o=0;o<r.length;o++)s=r[o],s.interact===g&&s.callback===i&&(r.splice(o,1),o--);return this}},g=new i,l.prototype={constructor:l,getActualTarget:s,destroy:function(){g.on("destroy",this.target,this,this),o(this)},start:function(t,e){e||(e=t);var i={time:new Date,phase:"start"};return a(i,e),this.lastStart=i,a(this,e),this.phase="start",g.emit("start",t.target,t,this),this},move:function(t,e){e||(e=t);var i={time:new Date,phase:"move"};a(i,e),a(this,e),this.moves.push(i),this.moves=this.moves.slice(-y);var s=this.getMoveDelta(),r=0;return s&&(r=h(s)),this.angle=i.angle=r,this.phase="move",g.emit("move",t.target,t,this),this},drag:function(t,e){e||(e=t);var i={time:new Date,phase:"drag"};a(i,e),a(this,e),this.moves||(this.moves=[]),this.moves.push(i),this.moves=this.moves.slice(-y),!this.dragStarted&&r(this.lastStart.pageX,this.lastStart.pageY,i.pageX,i.pageY)>v&&(this.dragStarted=!0);var s=this.getMoveDelta(),o=0;return s&&(o=h(s)),this.angle=i.angle=o,this.dragStarted&&(this.phase="drag",g.emit("drag",t.target,t,this)),this},end:function(t,e){return e||(e=t),a(this,e),this.moves||(this.moves=[]),a(this,e),this.phase="end",g.emit("end",t.target,t,this),this},cancel:function(t,e){return e||(e=t),a(this,e),this.phase="cancel",g.emit("cancel",t.target,t,this),this},getMoveDistance:function(){if(this.moves.length>1){var t=this.moves[this.moves.length-1],e=this.moves[this.moves.length-2];return r(t.pageX,t.pageY,e.pageX,e.pageY)}},getMoveDelta:function(){var t=this.moves[this.moves.length-1],e=this.moves[this.moves.length-2]||this.lastStart;if(t&&e)return{x:t.pageX-e.pageX,y:t.pageY-e.pageY}},getSpeed:function(){if(this.moves.length>1){var t=this.moves[this.moves.length-1],e=this.moves[this.moves.length-2];return this.getMoveDistance()/(t.time-e.time)}return 0},getCurrentAngle:function(t){var e,i,s,r,o=this.phase,n=this.moves.length-1,a=20/(2*this.getSpeed()+1),h=1;if(this.moves&&this.moves.length&&(e=this.moves[n],s=r=e.angle,t&&this.moves.length>1)){for(;--n>0&&this.moves.length-n<a&&this.moves[n].phase===o;)i=this.moves[n].angle,Math.abs(i-r)>180?s-=i:s+=i,h++;s/=h}return 1/0===s?r:s},getAllInteractions:function(){return m.slice()}},p(T,"touchstart",c),p(T,"touchmove",d),p(T,"touchend",u),p(T,"touchcancel",f);var b=!1;p(T,"mousedown",function(t){b=!0,m.length||new l(t);var e=n();e&&n().start(t)}),p(T,"mousemove",function(t){m.length||new l(t);var e=n();e&&(b?e.drag(t):e.move(t))}),p(T,"mouseup",function(t){b=!1;var e=n();e&&(e.end(t,null),e.destroy())}),e.exports=g},{}],5:[function(t,e){function i(t,e,o){var n,a=this,l=-1,c=o*o;for(this.$el=t,this.fieldSize=e,this.fieldTiles=o,this.tileSize=e/o,this.tiles=[],this.moves=Math.floor(this.fieldTiles*this.fieldTiles);++l<c;)n=a.tiles[l]=new r(a,Math.floor(Math.random()*h)),n.$el.style["-webkit-transform"]="translate("+a.colOf(n)*this.tileSize+"px,"+a.rowOf(n)*this.tileSize+"px)",n.$el.style["-moz-transform"]="translate("+a.colOf(n)*this.tileSize+"px,"+a.rowOf(n)*this.tileSize+"px)",n.$el.style.transform="translate("+a.colOf(n)*this.tileSize+"px,"+a.rowOf(n)*this.tileSize+"px)",a.$el.appendChild(n.$el);this.dragHandler=i.prototype.onDrag.bind(a),s.on("drag",this.$el,this.dragHandler),this.updateScore()}var s=t(4),r=t(6),o={LEFT:0,RIGHT:1,UP:2,DOWN:3},n={left:"right",right:"left",up:"down",down:"up"},a={EARTH:0,WATER:1,AIR:2,FIRE:3},h=Object.keys(a).length;i.prototype.remove=function(){var t=this;this.tiles.forEach(function(e){t.$el.removeChild(e.$el)}),this.tiles.length=0,s.off("drag",this.$el,this.dragHandler)},i.prototype.rowOf=function(t){var e=this.tiles.indexOf(t);if(0>e)throw new Error("Tile is not on this grid");return Math.floor(e/this.fieldTiles)},i.prototype.colOf=function(t){var e=this.tiles.indexOf(t);if(0>e)throw new Error("Tile is not on this grid");return e%this.fieldTiles},i.prototype.updateScore=function(){this.score=this.tiles.reduce(function(t,e){return e.updateScore(),t+e.score},0)},i.prototype.updateAppearance=function(){var t=this.tiles.reduce(function(t,e){return t+e.type},""),e=this.tiles.reduce(function(t,e){return t||e.direction&&e.direction.length},!1);(!this.lastTileTypes||t!==this.lastTileTypes||e)&&(this.lastTileTypes=t,this.tiles.forEach(function(t){t.updateAppearance()}))},i.prototype.swap=function(t,e,i){var s;s=this.tiles[t].type,this.tiles[t].type=this.tiles[e].type,this.tiles[e].type=s,this.tiles[e].direction=i,this.tiles[t].direction=n[i],this.tiles[e].isDragSource=!0,this.updateScore(),--this.moves},i.prototype.onDrag=function(t){var e,i,s,r,n=this,a=t.getMoveDelta();if(!(t.isResolved||this.moves<=0||(null==t.sourceIndex&&(t.sourceIndex=n.tiles.map(function(t){return t.$el}).indexOf(t.target)),t.totals||(t.totals={x:0,y:0,d:0}),t.totals.x+=a.x,t.totals.y+=a.y,t.totals.d=Math.max(Math.abs(t.totals.x),Math.abs(t.totals.y)),t.totals.d<n.tileSize/8)))switch(r=Math.abs(t.totals.x)>Math.abs(t.totals.y)?o[t.totals.x<0?"LEFT":"RIGHT"]:o[t.totals.y<0?"UP":"DOWN"],t.isResolved=!0,e=t.sourceIndex,i=n.rowOf(n.tiles[e]),s=n.colOf(n.tiles[e]),r){case o.UP:i>0&&n.swap(e,e-this.fieldTiles,"up");break;case o.DOWN:i<n.fieldTiles-1&&n.swap(e,e+this.fieldTiles,"down");break;case o.LEFT:s>0&&n.swap(e,e-1,"left");break;case o.RIGHT:s<n.fieldTiles-1&&n.swap(e,e+1,"right")}},e.exports=i},{}],6:[function(t,e){function i(t,e){var i=this;this.grid=t,this.type=e,this.scoring={topLeft:0,top:0,topRight:0,right:0,bottomRight:0,bottom:0,bottomLeft:0,left:0},this.score=0,this.$el=document.createElement("div"),s(this.$el,"AnimationEnd",function(){i.$el.className=i.$el.className.replace(/\sGame-tile--move\w+/,""),i.$el.className=i.$el.className.replace(/\sGame-tile--top/,"")})}function s(t,e,i){for(var s=0;s<r.length;s++)r[s]||(e=e.toLowerCase()),t.addEventListener(r[s]+e,i,!1)}i.prototype.updateScore=function(){var t=this,e=this.grid.tiles.indexOf(this),i=this.grid.rowOf(this),s=this.grid.colOf(this),r=this.grid.fieldTiles-1,o=this.type;this.scoring.top=0===i?0:o===this.grid.tiles[e-this.grid.fieldTiles].type?2:-1,this.scoring.topRight=0===i||s===r?0:o===this.grid.tiles[e-(this.grid.fieldTiles-1)].type?1:0,this.scoring.right=s===r?0:o===this.grid.tiles[e+1].type?2:-1,this.scoring.bottomRight=i===r||s===r?0:o===this.grid.tiles[e+(this.grid.fieldTiles+1)].type?1:0,this.scoring.bottom=i===r?0:o===this.grid.tiles[e+this.grid.fieldTiles].type?2:-1,this.scoring.bottomLeft=i===r||0===s?0:o===this.grid.tiles[e+(this.grid.fieldTiles-1)].type?1:0,this.scoring.left=0===s?0:o===this.grid.tiles[e-1].type?2:-1,this.scoring.topLeft=0===i||0===s?0:o===this.grid.tiles[e-(this.grid.fieldTiles+1)].type?1:0,this.score=Object.keys(this.scoring).reduce(function(e,i){return e+t.scoring[i]},0)},i.prototype.updateAppearance=function(){var t=this.grid.tileSize,e=Math.ceil(t/45),i=e+"px",s=this.grid.tiles.indexOf(this),r=this.grid.rowOf(this),o=this.grid.colOf(this),n=this.grid.fieldTiles-1;this.$el.className=["Game-tile","Game-tile--type"+this.type,this.direction?"Game-tile--move"+this.direction:"",this.isDragSource?"Game-tile--top":""].join(" "),this.direction="",this.isDragSource=null,this.$el.setAttribute("data-score",this.score),this.$el.style.borderTopWidth=0===r||this.scoring.top<0?i:0,this.$el.style.borderRightWidth=o===n||this.scoring.right<0?i:0,this.$el.style.borderBottomWidth=r===n||this.scoring.bottom<0?i:0,this.$el.style.borderLeftWidth=0===o||this.scoring.left<0?i:0,this.$el.style.borderTopRightRadius="inherit",this.$el.style.borderBottomRightRadius="inherit",this.$el.style.borderBottomLeftRadius="inherit",this.$el.style.borderTopLeftRadius="inherit",0!==r&&this.type===this.grid.tiles[s-this.grid.fieldTiles].type&&(this.$el.style.borderTopLeftRadius=0,this.$el.style.borderTopRightRadius=0),0!==o&&this.type===this.grid.tiles[s-1].type&&(this.$el.style.borderBottomLeftRadius=0,this.$el.style.borderTopLeftRadius=0),o!==n&&this.type===this.grid.tiles[s+1].type&&(this.$el.style.borderTopRightRadius=0,this.$el.style.borderBottomRightRadius=0),r!==n&&this.type===this.grid.tiles[s+this.grid.fieldTiles].type&&(this.$el.style.borderBottomRightRadius=0,this.$el.style.borderBottomLeftRadius=0)};var r=["webkit","moz","MS","o",""];e.exports=i},{}],7:[function(t,e){var i=t(2);e.exports=function(t,e,s,r){function o(){var i=Math.min(1,window.innerWidth/e,window.innerHeight/s),r=("transform:scale("+i+");").replace(/(.*)/,"-webkit-$1-ms-$1$1");a.cssRules.length>0&&a.deleteRule(0),"addRule"in a?a.addRule(t,r):a.insertRule(t+"{"+r+"}",0)}var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n);var a=n.sheet;r=r||250,window.onload=o,window.onresize=i(o,r)}},{}],8:[function(t,e){function i(t){return window.requestAnimationFrame(function(){var e=Date.now(),i=e-s;i>999?i=1/60:i/=1e3,s=e,t(i)})}var s=0;e.exports={start:function(t){return i(function e(s){t(s),i(e)})},stop:function(t){window.cancelAnimationFrame(t)}}},{}]},{},[1]);