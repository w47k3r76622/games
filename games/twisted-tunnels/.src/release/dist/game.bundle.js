!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=19)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(7);i.d(e,"AssetLoader",function(){return r.a});var s=i(10);i.d(e,"Controller",function(){return s.a});var n=i(11);i.d(e,"Math",function(){return n});var o=i(8);i.d(e,"Timer",function(){return o.a});var a=i(2);i.d(e,"Actor",function(){return a});var h=i(12);i.d(e,"CircleActor",function(){return h.a});var c=i(13);i.d(e,"RectActor",function(){return c.a});var u=i(14);i.d(e,"Sprite",function(){return u.a});var p=i(9);i.d(e,"Stage",function(){return p.a});var l=i(15);i.d(e,"PreloaderStage",function(){return l.a});var f=i(16);i.d(e,"Engine",function(){return f.a});var y=i(17);i.d(e,"TileMapUtils",function(){return y})},function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"b",function(){return n}),i.d(e,"a",function(){return h});var r,s=i(0);!function(t){t[t.W=0]="W",t[t.P=1]="P",t[t.R=2]="R",t[t.O=3]="O",t[t.E=9]="E"}(r||(r={}));var n,o={CORNER:[r.W,r.P,r.P,r.W,r.W,r.P,r.P,r.P,r.W,r.P,r.P,r.P,r.W,r.W,r.W,r.W],CROSS:[r.W,r.P,r.P,r.W,r.P,r.P,r.P,r.P,r.P,r.P,r.P,r.P,r.W,r.P,r.P,r.W],DEAD_END:[r.W,r.P,r.P,r.W,r.W,r.P,r.P,r.W,r.W,r.P,r.P,r.W,r.W,r.W,r.W,r.W],DOUBLE_CORNER:[r.W,r.P,r.P,r.W,r.P,r.O,r.O,r.R,r.P,r.O,r.O,r.R,r.W,r.R,r.R,r.W],EXIT:[r.W,r.P,r.P,r.W,r.W,r.E,r.E,r.W,r.W,r.E,r.E,r.W,r.W,r.W,r.W,r.W],OVERPASS:[r.W,r.P,r.P,r.W,r.R,r.O,r.O,r.R,r.R,r.O,r.O,r.R,r.W,r.P,r.P,r.W],STRAIGHT:[r.W,r.P,r.P,r.W,r.W,r.P,r.P,r.W,r.W,r.P,r.P,r.W,r.W,r.P,r.P,r.W],T_BONE:[r.W,r.P,r.P,r.W,r.P,r.P,r.P,r.P,r.P,r.P,r.P,r.P,r.W,r.W,r.W,r.W]},a=function(){function t(t){this.lg=128,this.di=4,this.dr=0,this.ly=new s.TileMapUtils.TileMap(this.di,this.di,this.lg/this.di,this.populateFromTileLayouts(t)),this.actionable=!1,this.hovered=!1,this.rotates=!0,this.standing=!1;var e=new s.AssetLoader;this.s=new s.Sprite(e.getImage("mazetilemap"),32,32),this.s.setScale(4)}return t.prototype.rotateRight=function(){if(this.rotates){this.dr=(this.dr+90)%360;for(var t=[],e=0;e<this.di;e++)for(var i=0;i<this.di;i++)t[e*this.di+i]=this.ly.getTile(this.di-i-1,e);this.s.angle=this.dr,this.ly.tiles=t}},t.prototype.rotateLeft=function(){if(this.rotates){this.dr=(this.dr-90)%360;for(var t=[],e=0;e<this.di;e++)for(var i=0;i<this.di;i++)t[e*this.di+i]=this.ly.getTile(i,this.di-e-1);this.s.angle=this.dr,this.ly.tiles=t}},t.prototype.drawMazeParts=function(t,e,i){i.save(),i.translate(t,e),this.s.draw({x:0,y:0},i),i.restore()},t.prototype.drawPostEffects=function(t,e,i){i.save(),i.translate(t,e),i.lineWidth=3,this.rotates&&(this.actionable&&(i.strokeStyle="green",this.hovered&&(i.strokeStyle="blue"),i.strokeRect(0,0,this.lg,this.lg)),this.standing&&(i.strokeStyle="red",i.strokeRect(0,0,this.lg,this.lg))),i.restore()},t.prototype.populateFromTileLayouts=function(t){for(var e=[],i=0,r=t;i<r.length;i++){var s=r[i];e.push({type:s,seen:!1})}return e},t}();!function(t){t[t.CO=0]="CO",t[t.CR=1]="CR",t[t.DE=2]="DE",t[t.DC=3]="DC",t[t.EX=4]="EX",t[t.ST=5]="ST",t[t.TB=6]="TB",t[t.O=7]="O"}(n||(n={}));var h={create:function(t,e,i){var r;switch(t){case n.CO:r=new a(o.CORNER),r.s.setCycle([[0,0]],0);break;case n.CR:r=new a(o.CROSS),r.s.setCycle([[1,0]],0);break;case n.DE:r=new a(o.DEAD_END),r.s.setCycle([[2,0]],0);break;case n.EX:r=new a(o.EXIT),r.s.setCycle([[3,0]],0);break;case n.ST:r=new a(o.STRAIGHT),r.s.setCycle([[4,0]],0);break;case n.TB:r=new a(o.T_BONE),r.s.setCycle([[5,0]],0);break;case n.O:r=new a(o.OVERPASS);break;case n.DC:r=new a(o.DOUBLE_CORNER);break;default:throw Error("No matching type for: "+t)}for(var s=0;s<e;s++)r.rotateRight();return r.rotates=i,r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"Actor",function(){return r});var r=function(){function t(t,e){this.p=t,this.l=e.layer?e.layer:0,this.st=e.stage?e.stage:null,this.debugColour=e.debugColour?e.debugColour:"black",this.sp=null,this.spriteOffset={x:0,y:0},this.opacity=1,this.remove=!1}return t.prototype.setSprite=function(t){this.sp=t.sp,this.spriteOffset=t.spriteOffset?t.spriteOffset:{x:0,y:0},this.opacity=t.opacity?t.opacity:1},t.prototype.update=function(t){this.sp&&this.sp.updateFrame(t)},t.prototype.render=function(){if(this.sp){var t={x:this.p.x+this.spriteOffset.x,y:this.p.y+this.spriteOffset.y};this.sp.draw(t,this.st.ctx,this.opacity)}this.drawDebug()},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(0),s=i(1),n=i(22),o=i(18),a=(i.n(o),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),h=function(t){function e(e,i,r){var s=t.call(this,e,i)||this;return s.camera={x:0,y:0},s.cameraClamp=!1,s.playTime=0,s.numTreasures=0,s.treasures=[],s.ac=r,s.initPlayWinSound(),s.initPlayTreasureSound(),s.initPlayMazePartRotate(),s}return a(e,t),e.prototype.update=function(e){this.m.resetState();var i="no-drop",r=this.getMousePosition();if(this.p1.p)for(var s=this.m.getAdjacentMazeParts(this.p1.p),n=0;n<s.length;n++)s[n]&&(s[n].actionable=!0);if(r&&!this.p1.mapMode){var o=this.m.getMazePartAtPosition(r),a=this.m.getMazePartAtPosition({x:this.p1.p.x+this.p1.w/2,y:this.p1.p.y+this.p1.h/2}),h=Math.floor(r.x/this.m.mpS),c=Math.floor(r.y/this.m.mpS),u=Math.floor(this.p1.p.x/this.m.mpS),p=Math.floor(this.p1.p.y/this.m.mpS),l=Math.abs(h-u),f=Math.abs(c-p),s=0===l&&1===f||1===l&&0===f,y=Math.floor((this.p1.p.x+this.p1.w)/this.m.mpS),d=Math.floor((this.p1.p.y+this.p1.h)/this.m.mpS),v=Math.abs(h-y),g=Math.abs(c-d),b=0===v&&1===g||1===v&&0===g;if(o&&a&&s&&b){if(a.actionable=!0,o.rotates&&(i="pointer",this.p1.ms)){if(this.p1.ms.l){this.m.needsUpdate=!0,o.rotateLeft();var m=this.ac.currentTime;this.turnSequence.play(m)}if(this.p1.ms.r){this.m.needsUpdate=!0,o.rotateRight();var m=this.ac.currentTime;this.turnSequence.play(m)}}o.hovered=!0}a.rotates&&a===o&&(i="not-allowed"),a.standing=!0}this.ctx.canvas.style.cursor=i;for(var x=0,S=this.treasures;x<S.length;x++){var w=S[x];if(!w.remove&&w.isColliding(this.p1)){w.remove=!0,this.numTreasures++;var m=this.ac.currentTime;this.treasureSequence.play(m)}}this.playTime+=e,t.prototype.update.call(this,e)},e.prototype.render=function(){var t=this.ctx;if(t.save(),t.fillStyle="black",t.fillRect(0,0,this.w,this.h),this.p1.mapMode)this.ctx.canvas.style.cursor="no-drop",this.drawMap(),t.restore();else{this.drawGame(),t.restore(),t.font="30px Blippo, fantasy",t.fillStyle="white",t.fillText("Treasure Found "+this.numTreasures+"/"+this.treasures.length,30,this.h-30);var e=this.getTimeString();t.fillStyle="white",t.fillText(e,this.w-t.measureText(e).width-30,this.h-30)}},e.prototype.getTimeString=function(){var t=1e3*Math.round(this.playTime/1e3),e=new Date(t);return e.getUTCMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+e.getUTCSeconds().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},e.prototype.playWinSound=function(){var t=this.ac.currentTime;this.winSequence.play(t)},e.prototype.getScore=function(){return{treasure:this.treasures.length,foundTreasure:this.numTreasures,timeString:this.getTimeString(),time:1e3*Math.round(this.playTime/1e3)}},e.prototype.createTreasure=function(e){var i=new n.a(e);this.treasures.push(i),t.prototype.addActor.call(this,i)},e.prototype.setMapParts=function(t){for(var e=[],i=0,r=0,n=t;r<n.length;r++){var o=n[r];e[i]=[];for(var a=0;a<o.length;a++){var h=o[a];e[i][a]=s.a.create(h[0],h[1],h[2])}i++}this.m.setMazeParts(e)},e.prototype.drawGame=function(){var e=this.ctx,i=-this.p1.p.x+this.w/2,r=-this.p1.p.y+this.h/2;this.cameraClamp&&(i=Math.min(0,i),r=Math.min(0,r),i=Math.max(i,-this.m.w+this.w),r=Math.max(r,-this.m.h+this.h)),e.translate(i,r),this.camera={x:i,y:r},t.prototype.render.call(this),this.m.drawShadows(this.p1.lantern.p,this.p1.lantern.r+64),this.m.drawMazePostEffects()},e.prototype.drawMap=function(){var t=this.ctx;t.font="30px Chalkduster, fantasy",t.strokeStyle="black",t.fillStyle="white";var e=this.ctx.measureText("Map").width/2;this.ctx.fillText("Map",this.w/2-e,30),t.font="20px Chalkduster, fantasy",t.fillStyle="yellow";var i=this.ctx.measureText("Treasure").width/2;this.ctx.fillText("Treasure",this.w/2-i,60),t.fillStyle="green";var r=this.ctx.measureText("Exit").width;this.ctx.fillText("Exit",this.w/2+i+r,60);t.fillStyle="orange";var s=this.ctx.measureText("Player").width;this.ctx.fillText("Player",this.w/2-i-s-r,60);var n=Math.min(this.w/this.m.w,(this.h-60)/this.m.h),o=(this.w-this.m.w*n)/2;t.translate(o,60),t.scale(n,n),this.m.drawAsMap(),this.p1.render();for(var a=0,h=this.treasures;a<h.length;a++){var c=h[a];c.remove||c.render()}},e.prototype.getMousePosition=function(){return this.p1.ms.p?{x:this.p1.ms.p.x-this.camera.x,y:this.p1.ms.p.y-this.camera.y}:null},e.prototype.initPlayMazePartRotate=function(){var t=["A2  s","Bb2 s"],e=new o.Sequence(this.ac,264,t);e.staccato=.2,e.gain.gain.value=.25,e.mid.frequency.value=800,e.mid.gain.value=3,e.loop=!1,this.turnSequence=e},e.prototype.initPlayTreasureSound=function(){var t=["Bb4 s","Ab4 s","Bb4 s","C5  eq"],e=new o.Sequence(this.ac,132,t);e.staccato=.2,e.gain.gain.value=.25,e.mid.frequency.value=800,e.mid.gain.value=3,e.loop=!1,this.treasureSequence=e},e.prototype.initPlayWinSound=function(){var t=["Ab4 s","A4  s","- s","Ab4 s","A4  s","C5  q"],e=new o.Sequence(this.ac,132,t);e.staccato=.2,e.gain.gain.value=.25,e.mid.frequency.value=800,e.mid.gain.value=3,e.loop=!1,this.winSequence=e},e}(r.Stage)},function(t,e,i){"use strict";var r=i(0),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function e(e,i){var r=t.call(this,{x:e.p.x+e.w/2,y:e.p.y+e.h/2},i,{layer:e.l-1})||this;return r.pl=e,r.pl.lantern=r,r}return s(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updatePosition=function(){this.p={x:this.pl.p.x+this.pl.w/2,y:this.pl.p.y+this.pl.h/2},this.l=this.pl.l-1},e.prototype.render=function(){var t=this.st.ctx;t.save();var e=t.createRadialGradient(this.p.x,this.p.y,2.5*(this.r+24),this.p.x,this.p.y,this.r+24);e.addColorStop(0,"rgba(0, 0, 0, 1.0)"),e.addColorStop(.6,"rgba(0, 0, 0, 0.8)"),e.addColorStop(1,"rgba(0, 0, 0, 0.0)"),t.fillStyle=e,t.fillRect(this.p.x-t.canvas.width,this.p.y-t.canvas.height,2*t.canvas.width,2*t.canvas.height),t.restore()},e}(r.CircleActor);e.a=n},function(t,e,i){"use strict";var r=i(0),s=i(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=function(t){function e(e,i,s){var n=t.call(this,r.Math.ORIGIN,e,i,{layer:0})||this;return n.mpS=s,n.rows=i/s,n.cols=e/s,n.ptMp=[],n.needsUpdate=!0,n}return n(e,t),e.prototype.setMazeParts=function(t){this.ptMp=t},e.prototype.init=function(){for(var t=this.w/32,e=this.h/32,i=new Array(e*t),s=0;s<e;s++)for(var n=0;n<t;n++)i[s*t+n]=0;this.tileMap=new r.TileMapUtils.TileMap(e,t,32,i)},e.prototype.update=function(e){t.prototype.update.call(this,e),this.needsUpdate&&(this.updateTileMapWithMazeParts(),this.needsUpdate=!1)},e.prototype.iterateMazeParts=function(t){for(var e=0;e<this.ptMp.length;e++)for(var i=0;i<this.ptMp[e].length;i++)t(this.ptMp[e][i],e,i)},e.prototype.resetState=function(){this.iterateMazeParts(function(t,e,i){t.actionable=!1,t.hovered=!1,t.standing=!1})},e.prototype.render=function(){var t=this;this.iterateMazeParts(function(e,i,r){var s=e.lg;e.drawMazeParts(r*s,i*s,t.st.ctx)})},e.prototype.drawShadows=function(t,e){for(var i=this.translatePointToTile(t),r=Math.ceil(e/this.tileMap.tSz)+1,n=r*this.tileMap.tSz,o=i.col-r<0?0:i.col-r,a=i.row-r<0?0:i.row-r,h=i.col+r>this.tileMap.cl?this.tileMap.cl:i.col+r,c=i.row+r>this.tileMap.rw?this.tileMap.rw:i.row+r,u=o;u<h;u++)for(var p=a;p<c;p++){var l=this.tileMap.getTile(p,u);if(l.type===s.c.W){var f=this.tileMap.tSz,y=f*u,d=f*p;this.drawWallShadow(t,y,d,n)}}},e.prototype.drawAsMap=function(){for(var t=this.st.ctx,e=0;e<this.tileMap.rw;e++)for(var i=0;i<this.tileMap.cl;i++){var r=this.tileMap.getTile(e,i);if(r.type!==s.c.W&&r.seen){r.type===s.c.E?(t.fillStyle="green",t.strokeStyle="green"):(t.fillStyle="grey",t.strokeStyle="grey");var n=this.tileMap.tSz,o=n*i,a=n*e;t.lineWidth=1,t.fillRect(o,a,n,n),t.strokeRect(o,a,n,n)}}},e.prototype.drawMazePostEffects=function(){var t=this;this.iterateMazeParts(function(e,i,r){var s=e.lg;e.drawPostEffects(r*s,i*s,t.st.ctx)})},e.prototype.getAdjacentMazeParts=function(t){if(t.x<0||t.x>this.w||t.y<0||t.y>this.h)return[];var e=Math.floor(t.y/this.mpS),i=Math.floor(t.x/this.mpS);if(!this.ptMp[e])return[];var r=[];return e-1>=0&&r.push(this.ptMp[e-1][i]),e+1<this.rows&&r.push(this.ptMp[e+1][i]),i-1>=0&&r.push(this.ptMp[e][i-1]),i+1<this.cols&&r.push(this.ptMp[e][i+1]),r},e.prototype.getMazePartAtPosition=function(t){if(t.x<0||t.x>this.w||t.y<0||t.y>this.h)return null;var e=Math.floor(t.y/this.mpS),i=Math.floor(t.x/this.mpS);return this.ptMp[e]?this.ptMp[e][i]:null},e.prototype.getTileAtPosition=function(t){var e=this.translatePointToTile(t);return this.tileMap.getTile(e.row,e.col)},e.prototype.setAdjacentTilesSeen=function(t){var e=Math.floor((t.p.y-t.r)/this.mpS),i=Math.floor((t.p.y+t.r)/this.mpS),s=Math.floor((t.p.x-t.r)/this.mpS),n=Math.floor((t.p.x+t.r)/this.mpS);e<0&&(e=0),i>this.rows-1&&(i=this.rows-1),s<0&&(s=0),n>this.cols-1&&(n=this.cols-1);for(var o=s;o<=n;o++)for(var a=e;a<=i;a++)for(var h=new r.CircleActor({x:t.p.x-o*this.mpS,y:t.p.y-a*this.mpS},t.r),c=this.ptMp[a][o].ly.getTilesAdjacentToCircleActor(h),u=0,p=c;u<p.length;u++){var l=p[u];l.value.seen=!0}},e.prototype.isRectActorColliding=function(t){if(t.p.x<0||t.p.x+t.w>this.w||t.p.y<0||t.p.y+t.h>this.h)return!0;var e=this.tileMap.getTilesAdjacentToRectActor(t);if(0===e.length)return!1;for(var i=0,r=e;i<r.length;i++){if(r[i].value.type===s.c.W)return!0}return!1},e.prototype.drawWallShadow=function(t,e,i,s){for(var n=this.tileMap.tSz,o=[{x:e,y:i},{x:e+n,y:i},{x:e+n,y:i+n},{x:e,y:i+n}],a=[],h=[],c=0;c<o.length;c++){var u=c<o.length-1?c+1:0,p=o[c].x-t.x,l=o[c].y-t.y,f=-(o[u].y-o[c].y),y=o[u].x-o[c].x,d=r.Math.dotproduct([p,l],[f,y]);h.push(d)}for(var c=0;c<h.length;c++){var u=c<h.length-1?c+1:0;if(1==r.Math.sign(h[c])&&1==r.Math.sign(h[u]))a.push(o[u]);else if(1==r.Math.sign(h[c])&&1!=r.Math.sign(h[u])){a.push(o[u]);var v=o[u].x+(o[u].x-t.x)*s,g=o[u].y+(o[u].y-t.y)*s;a.push({x:v,y:g})}else if(1!=r.Math.sign(h[c])&&1==r.Math.sign(h[u])){var v=o[u].x+(o[u].x-t.x)*s,g=o[u].y+(o[u].y-t.y)*s;a.push({x:v,y:g}),a.push(o[u])}}var b=this.st.ctx;if(0!=a.length){b.beginPath(),b.moveTo(a[0].x,a[0].y);for(var c=1;c<a.length;c++)b.lineTo(a[c].x,a[c].y);b.closePath(),b.fillStyle="black",b.strokeStyle="black",b.lineWidth=2,b.fill(),b.stroke()}},e.prototype.translatePointToTile=function(t){return t.x<0||t.x>this.w||t.y<0||t.y>this.h?null:{row:Math.floor(t.y/this.tileMap.tSz),col:Math.floor(t.x/this.tileMap.tSz)}},e.prototype.updateTileMapWithMazeParts=function(){var t=this;this.iterateMazeParts(function(e,i,r){for(var s=0;s<e.di;s++)for(var n=0;n<e.di;n++){var o=e.ly.getTile(s,n);t.tileMap.setTile(i*e.di+s,r*e.di+n,o)}})},e}(r.RectActor);e.a=o},function(t,e,i){"use strict";var r,s=i(0),n=i(1),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();!function(t){t[t.E=0]="E",t[t.SE=45]="SE",t[t.S=90]="S",t[t.SW=135]="SW",t[t.W=180]="W",t[t.NW=225]="NW",t[t.N=270]="N",t[t.NE=315]="NE"}(r||(r={}));var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;this.complete=!1,this.debugColour="orange",this.mapMode=!1;var e=this.st.ctx.canvas;e.addEventListener("mousemove",function(e){var i=t.st.ctx.canvas.getBoundingClientRect();t.ms.p={x:e.clientX-i.left,y:e.clientY-i.top}},!0),this.ms={l:!1,r:!1,p:null},e.addEventListener("mousedown",function(e){e.preventDefault();var i=t.st.ctx.canvas.getBoundingClientRect();t.ms.p={x:e.clientX-i.left,y:e.clientY-i.top},t.ms.l=0===e.button,t.ms.r=2===e.button},!0),e.oncontextmenu=function(t){t.preventDefault()}},e.prototype.update=function(e){t.prototype.update.call(this,e),this.doMove(e),this.maze.setAdjacentTilesSeen(this.lantern),this.lantern.updatePosition(),this.ms.l=!1,this.ms.r=!1},e.prototype.drawDebug=function(){var t=this.st.ctx;t.save(),t.fillStyle=this.debugColour,t.fillRect(this.p.x,this.p.y,this.w,this.h),t.restore()},e.prototype.doMove=function(t){var e=new s.Controller;if(e.isPressed(s.Controller.keys.SHIFT))return void(this.mapMode=!0);this.mapMode=!1;var i,o=t/100,a=24*o;if((e.isPressed(s.Controller.keys.W)||e.isPressed(s.Controller.keys.UP))&&(i=r.N),(e.isPressed(s.Controller.keys.S)||e.isPressed(s.Controller.keys.DOWN))&&(i=r.S),(e.isPressed(s.Controller.keys.A)||e.isPressed(s.Controller.keys.LEFT))&&(i=i===r.N?r.NW:i===r.S?r.SW:r.W),(e.isPressed(s.Controller.keys.D)||e.isPressed(s.Controller.keys.RIGHT))&&(i=i===r.N?r.NE:i===r.S?r.SE:r.E),void 0!==i){this.oldP=this.p;var h=this.p.x+a*Math.cos(i*(Math.PI/180));this.p={x:h,y:this.p.y},this.maze.isRectActorColliding(this)&&(this.p=this.oldP),this.oldP=this.p;var c=this.p.y+a*Math.sin(i*(Math.PI/180));this.p={x:this.p.x,y:c},this.maze.isRectActorColliding(this)&&(this.p=this.oldP);if(this.maze.getTileAtPosition({x:this.p.x+this.w/2,y:this.p.y+this.h/2}).type===n.c.E&&!this.complete){this.complete=!0,this.st.playWinSound();var u=this.st;setTimeout(function(){u.finished=!0},500)}}},e}(s.RectActor);e.a=a},function(t,e,i){"use strict";var r=function(){function t(){if(t.instance)return t.instance;this.numOfImages=0,this.numComplete=0,this.images={},t.instance=this}return t.prototype.loadImage=function(e,i){this.numOfImages++;var r=new Image;r.onload=function(){t.instance.images[e]=r,t.instance.numComplete++},r.src=i},t.prototype.getImage=function(t){var e=this.images[t];if(e instanceof Image)return e;throw new Error(t+" is not a valid key")},t.prototype.getProgress=function(){return this.numComplete/this.numOfImages},t.prototype.loadingIsCompleted=function(){return 0===this.numOfImages||1===this.getProgress()},t}();e.a=r},function(t,e,i){"use strict";var r=function(){function t(t){this.timeout=t,this.elapsed=0}return t.prototype.reset=function(){this.elapsed=0},t.prototype.tick=function(t){this.elapsed+=t},t.prototype.hasEnded=function(){return this.elapsed>=this.timeout},t}();e.a=r},function(t,e,i){"use strict";var r=function(){function t(t,e){this.w=t,this.h=e,this.actors=[],this.finished=!1,this.ctx=null}return t.prototype.addActor=function(t){t.st=this,t.init(),this.actors.push(t)},t.prototype.init=function(){this.finished=!1},t.prototype.update=function(t){this.sortActorsByLayer();for(var e=[],i=0,r=this.actors;i<r.length;i++){var s=r[i];s.update(t),s.remove||e.push(s)}this.actors=e},t.prototype.render=function(){for(var t=0,e=this.actors;t<e.length;t++){e[t].render()}},t.prototype.sortActorsByLayer=function(){this.actors.sort(function(t,e){return t.l-e.l})},t}();e.a=r},function(t,e,i){"use strict";var r=function(){function t(){if(t.instance)return t.instance;this.pressed={},document.addEventListener("keyup",function(e){t.instance.pressed[e.keyCode]=!1},!0),document.addEventListener("keydown",function(e){t.instance.pressed[e.keyCode]=!0},!0),t.keys={A:65,D:68,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,S:83,UP:38,W:87,SPACE:32,SHIFT:16,M:77,ESC:27,R:82,T:84},t.instance=this}return t.prototype.isPressed=function(t){var e=this.pressed[t];return"boolean"==typeof e&&e},t}();e.a=r},function(t,e,i){"use strict";function r(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function s(t,e){for(var i=0,r=Math.min(t.length,e.length),s=0;s<r;s++)i+=t[s]*e[s];return i}function n(t,e,i){var r=e*Math.PI/180;return{x:t.x+(Math.cos(r)*(i.x-t.x)+Math.sin(r)*(i.y-t.y)),y:t.y+(-Math.sin(r)*(i.x-t.x)+Math.cos(r)*(i.y-t.y))}}function o(t){return t?t<0?-1:1:0}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ORIGIN",function(){return a}),e.dist=r,e.dotproduct=s,e.rotatePoint=n,e.sign=o;var a={x:0,y:0}},function(t,e,i){"use strict";var r=i(2),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function e(e,i,r){void 0===r&&(r={});var s=t.call(this,e,r)||this;return s.r=i,s}return s(e,t),e.prototype.init=function(){},e.prototype.drawDebug=function(){var t=this.st.ctx;t.beginPath(),t.fillStyle=this.debugColour,t.arc(this.p.x,this.p.y,this.r,0,2*Math.PI),t.fill()},e}(r.Actor);e.a=n},function(t,e,i){"use strict";var r=i(2),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function e(e,i,r,s){void 0===s&&(s={});var n=t.call(this,e,s)||this;return n.w=i,n.h=r,n}return s(e,t),e.prototype.init=function(){},e.rectOverlap=function(t,e){var i=this.valueInRange(t.p.x,e.p.x,e.p.x+e.w)||this.valueInRange(e.p.x,t.p.x,t.p.x+t.w),r=this.valueInRange(t.p.y,e.p.y,e.p.y+e.h)||this.valueInRange(e.p.y,t.p.y,t.p.y+t.h);return i&&r},e.prototype.drawDebug=function(){var t=this.st.ctx;t.strokeStyle=this.debugColour,t.strokeRect(this.p.x,this.p.y,this.w,this.h)},e.valueInRange=function(t,e,i){return t>=e&&t<=i},e}(r.Actor);e.a=n},function(t,e,i){"use strict";var r=i(8),s=function(){function t(t,e,i){this.img=t,this.w=e,this.h=i||e,this.angle=0,this.scale={x:1,y:1},this.frame=0}return t.prototype.setCycle=function(t,e){this.cycle=t,this.interval=e,this.frame=0,this.timer=new r.a(e)},t.prototype.setScale=function(t,e){this.scale={x:t,y:e||t}},t.prototype.updateFrame=function(t){this.timer.tick(t),this.timer.hasEnded()&&(this.frame=(this.frame+1)%this.cycle.length,this.timer.reset())},t.prototype.draw=function(t,e,i){var r=this.cycle[this.frame],s=r[0]*this.w,n=r[1]*this.h,o=this.w/2,a=this.h/2;e.save(),e.translate(t.x,t.y),e.imageSmoothingEnabled=!1,e.globalAlpha=i||1,e.scale(this.scale.x,this.scale.y),e.translate(o,a),e.rotate(this.angle*Math.PI/180),e.drawImage(this.img,s,n,this.w,this.h,-o,-a,this.w,this.h),e.restore()},t}();e.a=s},function(t,e,i){"use strict";var r=i(9),s=i(7),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.assetLoader=new s.a,r.progress=r.assetLoader.getProgress(),r}return n(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e),this.progress=this.assetLoader.getProgress(),this.assetLoader.loadingIsCompleted()&&(this.finished=!0)},e.prototype.render=function(){t.prototype.render.call(this),this.ctx.save(),this.drawProgress(),this.ctx.restore()},e.prototype.drawProgress=function(){var t=this.w-40,e=t*this.progress;this.ctx.strokeRect(20,this.h/2-25,t,50),this.ctx.fillRect(20,this.h/2-25,e,50)},e}(r.a);e.a=o},function(t,e,i){"use strict";var r=function(){function t(t,e,i){this.w=t,this.h=e,this.running=!1,this.currentTime=0,this.accumulator=0,this.canvas=i,this.canvas.width=t,this.canvas.height=e,this.ctx=i.getContext("2d")}return t.prototype.setStage=function(t){this.currentStage=t,this.currentStage.ctx=this.ctx,this.currentStage.init()},t.prototype.setStageTransition=function(t){this.transitionFunction=t},t.prototype.update=function(t){this.currentStage.finished&&void 0!==this.transitionFunction&&this.transitionFunction(),void 0!==this.currentStage&&this.currentStage.update(t)},t.prototype.render=function(){this.ctx.save(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore(),void 0!==this.currentStage&&this.currentStage.render()},t.prototype.start=function(){function t(){e.render(),window.requestAnimationFrame(t)}this.running=!0,this.currentTime=Date.now(),this.loop();var e=this;window.requestAnimationFrame(t)},t.prototype.stop=function(){this.running=!1},t.prototype.loop=function(){if(this.running){var e=this;setTimeout(function(){e.loop()},t.FRAME_DUR);var i=Date.now();for(this.accumulator+=i-this.currentTime,this.currentTime=i;this.accumulator>=t.FRAME_DUR;)this.update(t.FRAME_DUR),this.accumulator-=t.FRAME_DUR}},t.TARGET_FPS=60,t.FRAME_DUR=1e3/t.TARGET_FPS,t}();e.a=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TileMap",function(){return r});var r=function(){function t(t,e,i,r){if(r.length!==t*e)throw Error("tiles supplied not expected size.");this.rw=t,this.cl=e,this.tSz=i,this.tiles=r}return t.prototype.getTile=function(t,e){return this.tiles[t*this.cl+e]},t.prototype.setTile=function(t,e,i){this.tiles[t*this.cl+e]=i},t.prototype.getTilePosition=function(t,e){return{x:t*this.tSz,y:e*this.tSz}},t.prototype.getTilesAdjacentToCircleActor=function(t){var e=[],i=this.tSz,r=Math.floor((t.p.x-t.r)/i),s=Math.floor((t.p.x+t.r)/i),n=Math.floor((t.p.y-t.r)/i),o=Math.floor((t.p.y+t.r)/i);r<0&&(r=0),s>this.cl-1&&(s=this.cl-1),n<0&&(n=0),o>this.rw-1&&(o=this.rw-1);for(var a=r;a<=s;a++)for(var h=n;h<=o;h++){var c=this.getTile(h,a);e.push({value:c,row:h,col:a})}return e},t.prototype.getTilesAdjacentToRectActor=function(t){var e=[],i=this.tSz,r=Math.floor(t.p.x/i),s=Math.floor((t.p.x+t.w)/i),n=Math.floor(t.p.y/i),o=Math.floor((t.p.y+t.h)/i);r<0&&(r=0),s>this.cl-1&&(s=this.cl-1),n<0&&(n=0),o>this.rw-1&&(o=this.rw-1);for(var a=r;a<=s;a++)for(var h=n;h<=o;h++){var c=this.getTile(h,a);e.push({value:c,row:h,col:a})}return e},t.prototype.drawDebug=function(t){t.save();for(var e=0;e<this.rw;e++)for(var i=0;i<this.cl;i++){var r=i*this.tSz,s=e*this.tSz,n=this.getTile(e,i);0===n?t.strokeStyle="white":1===n?t.strokeStyle="blue":n>=2&&(t.strokeStyle="black"),t.strokeRect(r,s,this.tSz,this.tSz)}t.restore()},t}()},function(t,e,i){var r,s,n;!function(i,o){s=[e],r=o,void 0!==(n="function"==typeof r?r.apply(e,s):r)&&(t.exports=n)}(0,function(t){function e(t){var i=t.split(n);this.frequency=e.getFrequency(i[0])||0,this.duration=e.getDuration(i[1])||0}function i(t,e,i){this.ac=t||new AudioContext,this.createFxNodes(),this.tempo=e||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,i||[])}var r=440*Math.pow(Math.pow(2,1/12),-9),s=/^[0-9.]+$/,n=/\s+/,o=/(\d+)/,a={};"B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb".split("|").forEach(function(t,e){t.split("-").forEach(function(t){a[t]=e})}),e.getFrequency=function(t){var e=t.split(o),i=a[e[0]],s=(e[1]||4)-4;return r*Math.pow(Math.pow(2,1/12),i)*Math.pow(2,s)},e.getDuration=function(t){return s.test(t)?parseFloat(t):t.toLowerCase().split("").reduce(function(t,e){return t+("w"===e?4:"h"===e?2:"q"===e?1:"e"===e?.5:"s"===e?.25:0)},0)},i.prototype.createFxNodes=function(){var t=[["bass",100],["mid",1e3],["treble",2500]],e=this.gain=this.ac.createGain();return t.forEach(function(t,i){i=this[t[0]]=this.ac.createBiquadFilter(),i.type="peaking",i.frequency.value=t[1],e.connect(e=i)}.bind(this)),e.connect(this.ac.destination),this},i.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(t){this.notes.push(t instanceof e?t:new e(t))}.bind(this)),this},i.prototype.createCustomWave=function(t,e){e||(e=t),this.waveType="custom",this.customWave=[new Float32Array(t),new Float32Array(e)]},i.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},i.prototype.scheduleNote=function(t,e){var i=60/this.tempo*this.notes[t].duration,r=i*(1-(this.staccato||0));return this.setFrequency(this.notes[t].frequency,e),this.smoothing&&this.notes[t].frequency&&this.slide(t,e,r),this.setFrequency(0,e+r),e+i},i.prototype.getNextNote=function(t){return this.notes[t<this.notes.length-1?t+1:0]},i.prototype.getSlideStartDelay=function(t){return t-Math.min(t,60/this.tempo*this.smoothing)},i.prototype.slide=function(t,e,i){var r=this.getNextNote(t),s=this.getSlideStartDelay(i);return this.setFrequency(this.notes[t].frequency,e+s),this.rampFrequency(r.frequency,e+i),this},i.prototype.setFrequency=function(t,e){return this.osc.frequency.setValueAtTime(t,e),this},i.prototype.rampFrequency=function(t,e){return this.osc.frequency.linearRampToValueAtTime(t,e),this},i.prototype.play=function(t){return t="number"==typeof t?t:this.ac.currentTime,this.createOscillator(),this.osc.start(t),this.notes.forEach(function(e,i){t=this.scheduleNote(i,t)}.bind(this)),this.osc.stop(t),this.osc.onended=this.loop?this.play.bind(this,t):null,this},i.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this},t.Note=e,t.Sequence=i})},function(t,e,i){"use strict";function r(){var t=new d.a(x,S);t.ac=T,O.setStage(t),P=[]}function s(){var t=new f.a(x,S,T);t.playWinSound(),O.setStage(t)}function n(){O.setStage(new y.a(x,S,T))}function o(){O.setStage(new v.a(x,S,T))}function a(){O.setStage(new g.a(x,S,T))}function h(){O.setStage(new b.a(x,S,T))}function c(){O.setStage(new m.a(x,S,T))}function u(){var t=new l.a(x,S);t.scores=P,O.setStage(t)}Object.defineProperty(e,"__esModule",{value:!0});var p=i(0),l=i(20),f=i(21),y=i(23),d=i(24),v=i(25),g=i(26),b=i(27),m=i(28),x=640,S=480,w=new p.AssetLoader,T=new AudioContext,P=[],O=function(t,e,i){var x=new p.Engine(t,e,document.getElementById(i));w.loadImage("mazetilemap","assets/images/mazetiles.png");var S=new p.PreloaderStage(t,e);return x.setStage(S),x.setStageTransition(function(){x.currentStage instanceof p.PreloaderStage?r():x.currentStage instanceof d.a?s():x.currentStage instanceof f.a?(P.push(x.currentStage.getScore()),n()):x.currentStage instanceof y.a?(P.push(x.currentStage.getScore()),o()):x.currentStage instanceof v.a?(P.push(x.currentStage.getScore()),a()):x.currentStage instanceof g.a?(P.push(x.currentStage.getScore()),h()):x.currentStage instanceof b.a?(P.push(x.currentStage.getScore()),c()):x.currentStage instanceof m.a?(P.push(x.currentStage.getScore()),u()):x.currentStage instanceof l.a&&r()}),x}(x,S,"game");O.start()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i(0),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameOver="YOU ESCAPED!",e.totalTreasures=0,e.totalTreasureFound=0,e.time=0,e}return s(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e);for(var i=new r.Controller,s=0,n=0,o=0,a=0,h=this.scores;a<h.length;a++){var c=h[a];n+=c.foundTreasure,s+=c.treasure,o+=c.time}this.totalTreasures=s,this.totalTreasureFound=n,this.time=o;var u=new Date(1e3*Math.round(this.time/1e3)),p=u.getUTCMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+u.getUTCSeconds().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),l="https://twitter.com/intent/tweet?text=";l+="I found "+this.totalTreasureFound+" of "+this.totalTreasures+"treasures in "+p+"! #TwistedTunnels #js13kgames",i.isPressed(r.Controller.keys.R)&&(this.finished=!0)},e.prototype.render=function(){t.prototype.render.call(this),this.ctx.save(),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.w,this.h),this.ctx.font="40px Blippo, fantasy",this.ctx.fillStyle="white";var e=50,i=this.ctx.measureText(this.gameOver).width/2;this.ctx.fillText(this.gameOver,this.w/2-i,e),e+=50;for(var r=1,s=0,n=this.scores;s<n.length;s++){var o=n[s];this.ctx.font="20px Blippo, fantasy";var a="Level "+r+":  "+o.foundTreasure+"/"+o.treasure+" treasures   Time:  "+o.timeString,h=this.ctx.measureText(a).width/2;this.ctx.fillText(a,this.w/2-h,e),e+=30,r++}var c=new Date(1e3*Math.round(this.time/1e3)),u=c.getUTCMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+c.getUTCSeconds().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});e+=30,this.ctx.font="30px Blippo, fantasy";var p="Final Score:  "+this.totalTreasureFound+"/"+this.totalTreasures+" treasures   ",l=this.ctx.measureText(p).width/2;this.ctx.fillText(p,this.w/2-l,e),e+=40;var f="Total Time:  "+u,y=this.ctx.measureText(f).width/2;this.ctx.fillText(f,this.w/2-y,e),e+=60;var d=this.ctx.measureText("R to Restart").width/2;this.ctx.fillText("R to Restart",this.w/2-d,e),this.ctx.restore()},e}(r.Stage)},function(t,e,i){"use strict";var r=i(3),s=i(4),n=i(5),o=i(6),a=i(1),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=[[[a.b.CO,1,!1],[a.b.DE,3,!1],[a.b.DE,2,!1],[a.b.EX,2,!1]],[[a.b.TB,0,!0],[a.b.ST,1,!1],[a.b.CO,3,!1],[a.b.ST,1,!0]],[[a.b.ST,0,!1],[a.b.DE,2,!1],[a.b.CO,1,!1],[a.b.TB,3,!1]],[[a.b.CO,0,!1],[a.b.TB,3,!0],[a.b.CO,3,!1],[a.b.DE,0,!1]]],u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.m=new n.a(512,512,128),this.setMapParts(c),t.prototype.addActor.call(this,this.m);this.p1=new o.a({x:184,y:312},16,16,{layer:1}),t.prototype.addActor.call(this,this.p1),this.p1.maze=this.m,this.createTreasure({x:304,y:48}),this.createTreasure({x:432,y:432});var e=new s.a(this.p1,36);t.prototype.addActor.call(this,e),this.playTime=0},e}(r.a);e.a=u},function(t,e,i){"use strict";var r=i(0),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function e(e){var i=t.call(this,e,32,32)||this;return i.debugColour="yellow",i}return s(e,t),e.prototype.isColliding=function(t){return r.RectActor.rectOverlap(this,t)},e.prototype.render=function(){var t=this.st.ctx;t.save(),t.fillStyle=this.debugColour,t.fillRect(this.p.x,this.p.y,this.w,this.h),t.restore()},e}(r.RectActor);e.a=n},function(t,e,i){"use strict";var r=i(4),s=i(3),n=i(5),o=i(6),a=i(1),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=[[[a.b.CO,1,!1],[a.b.CO,2,!1],[a.b.CO,1,!1],[a.b.ST,1,!1],[a.b.CO,2,!1]],[[a.b.DE,0,!1],[a.b.TB,0,!0],[a.b.TB,0,!1],[a.b.CO,2,!1],[a.b.DE,0,!1]],[[a.b.CO,1,!1],[a.b.CR,0,!1],[a.b.ST,1,!1],[a.b.TB,0,!0],[a.b.EX,2,!1]],[[a.b.CO,0,!1],[a.b.TB,3,!0],[a.b.DE,3,!1],[a.b.CO,0,!1],[a.b.CO,3,!1]]],u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.m=new n.a(640,512,128),this.setMapParts(c),t.prototype.addActor.call(this,this.m);this.p1=new o.a({x:56,y:440},16,16,{layer:1}),t.prototype.addActor.call(this,this.p1),this.p1.maze=this.m,this.createTreasure({x:560,y:176}),this.createTreasure({x:304,y:432}),this.createTreasure({x:48,y:176});var e=new r.a(this.p1,36);t.prototype.addActor.call(this,e),this.playTime=0},e}(s.a);e.a=u},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var r=i(0),s=i(18),n=(i.n(s),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameName="TWISTED\nTUNNELS",e.pressStart="Press SPACE to Start Game",e}return n(e,t),e.prototype.init=function(){t.prototype.init.call(this);var e=["C3  e","C3  e","Db3 e","C3  e","Db3 e","C3  e","Eb3 e","D3  e","C3  e","C3  e","B2  e","Bb2 e","A2  h","C3  e","C3  e","Db3 e","C3  e","Db3 e","C3  e","Eb3 e","D3  e","C3  e","Db3 e","D3  e","Db3 e","C3  h","D3  e","F3  q","D3  e","G3  q","D3  e","F3  q","D3  e","G3  q","D3  q","F3  q"];this.leadSequence=new s.Sequence(this.ac,132,e),this.leadSequence.staccato=.3,this.leadSequence.gain.gain.value=.1,this.leadSequence.mid.frequency.value=800,this.leadSequence.mid.gain.value=3;var i=this.ac.currentTime;this.leadSequence.play(i)},e.prototype.update=function(e){t.prototype.update.call(this,e);var i=new r.Controller;(i.isPressed(r.Controller.keys.SPACE)||i.isPressed(r.Controller.keys.ENTER))&&(this.finished=!0,this.leadSequence.stop())},e.prototype.render=function(){t.prototype.render.call(this),this.ctx.save(),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.w,this.h),this.ctx.font="60px Blippo, fantasy",this.ctx.fillStyle="white";var e=this.ctx.measureText(this.gameName).width/2;this.ctx.fillText(this.gameName,this.w/2-e,this.h/2),this.ctx.font="30px Blippo, fantasy";var i=this.ctx.measureText(this.pressStart).width/2;this.ctx.fillText(this.pressStart,this.w/2-i,this.h/2+90),this.ctx.restore()},e}(r.Stage)},function(t,e,i){"use strict";var r=i(4),s=i(3),n=i(5),o=i(6),a=i(1),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=[[[a.b.DE,2,!1],[a.b.CO,1,!1],[a.b.EX,3,!1],[a.b.CO,1,!1],[a.b.CO,2,!1]],[[a.b.ST,0,!1],[a.b.TB,2,!0],[a.b.CO,2,!1],[a.b.DE,0,!1],[a.b.ST,1,!0]],[[a.b.CO,0,!1],[a.b.CO,3,!1],[a.b.TB,0,!0],[a.b.ST,1,!1],[a.b.CO,3,!1]],[[a.b.DE,2,!1],[a.b.DE,1,!1],[a.b.TB,3,!1],[a.b.CO,1,!1],[a.b.CO,2,!1]],[[a.b.CO,0,!1],[a.b.ST,1,!1],[a.b.TB,1,!0],[a.b.CO,3,!1],[a.b.DE,0,!1]]],u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.m=new n.a(640,640,128),this.setMapParts(c),t.prototype.addActor.call(this,this.m);this.p1=new o.a({x:184,y:440},16,16,{layer:1}),t.prototype.addActor.call(this,this.p1),this.p1.maze=this.m,this.createTreasure({x:48,y:48}),this.createTreasure({x:432,y:176}),this.createTreasure({x:48,y:440}),this.createTreasure({x:560,y:560});var e=new r.a(this.p1,36);t.prototype.addActor.call(this,e),this.playTime=0},e}(s.a);e.a=u},function(t,e,i){"use strict";var r=i(4),s=i(3),n=i(5),o=i(6),a=i(1),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=[[[a.b.CO,1,!1],[a.b.ST,1,!1],[a.b.ST,0,!0],[a.b.CO,2,!1],[a.b.CO,1,!1],[a.b.DE,3,!1]],[[a.b.TB,1,!1],[a.b.CO,1,!0],[a.b.DE,2,!1],[a.b.CO,0,!1],[a.b.TB,2,!0],[a.b.DE,2,!1]],[[a.b.DE,0,!1],[a.b.CO,0,!1],[a.b.CR,0,!1],[a.b.ST,1,!1],[a.b.CR,0,!1],[a.b.CO,3,!1]],[[a.b.CO,1,!1],[a.b.ST,1,!1],[a.b.TB,3,!1],[a.b.CO,1,!1],[a.b.ST,1,!0],[a.b.CO,2,!1]],[[a.b.DE,2,!0],[a.b.EX,1,!1],[a.b.CO,3,!1],[a.b.CO,0,!1],[a.b.CO,3,!1],[a.b.DE,0,!1]]],u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.m=new n.a(768,640,128),this.setMapParts(c),t.prototype.addActor.call(this,this.m);this.p1=new o.a({x:312,y:312},16,16,{layer:1}),t.prototype.addActor.call(this,this.p1),this.p1.maze=this.m,this.createTreasure({x:688,y:48}),this.createTreasure({x:688,y:176}),this.createTreasure({x:48,y:304}),this.createTreasure({x:688,y:560}),this.createTreasure({x:48,y:560});var e=new r.a(this.p1,36);t.prototype.addActor.call(this,e),this.playTime=0},e}(s.a);e.a=u},function(t,e,i){"use strict";var r=i(4),s=i(3),n=i(5),o=i(6),a=i(1),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=[[[a.b.CO,1,!1],[a.b.TB,2,!1],[a.b.DE,3,!1],[a.b.DE,1,!1],[a.b.CO,1,!0],[a.b.DE,3,!1]],[[a.b.ST,0,!1],[a.b.ST,0,!1],[a.b.CO,1,!1],[a.b.TB,2,!1],[a.b.TB,3,!1],[a.b.DE,2,!1]],[[a.b.DE,0,!1],[a.b.CO,0,!1],[a.b.ST,0,!0],[a.b.CO,3,!1],[a.b.ST,0,!1],[a.b.ST,0,!1]],[[a.b.DE,2,!1],[a.b.EX,1,!1],[a.b.CO,3,!1],[a.b.CO,1,!1],[a.b.CO,3,!0],[a.b.CO,3,!1]],[[a.b.CO,1,!0],[a.b.ST,1,!1],[a.b.ST,3,!1],[a.b.TB,3,!1],[a.b.CO,1,!1],[a.b.CO,2,!1]],[[a.b.CO,0,!1],[a.b.ST,1,!1],[a.b.ST,1,!1],[a.b.CO,3,!0],[a.b.CO,3,!1],[a.b.DE,0,!1]]],u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.m=new n.a(768,768,128),this.setMapParts(c),t.prototype.addActor.call(this,this.m);this.p1=new o.a({x:312,y:56},16,16,{layer:1}),t.prototype.addActor.call(this,this.p1),this.p1.maze=this.m,this.createTreasure({x:688,y:48}),this.createTreasure({x:432,y:48}),this.createTreasure({x:688,y:176}),this.createTreasure({x:48,y:304}),this.createTreasure({x:48,y:432}),this.createTreasure({x:688,y:688});var e=new r.a(this.p1,36);t.prototype.addActor.call(this,e),this.playTime=0},e}(s.a);e.a=u},function(t,e,i){"use strict";var r=i(4),s=i(3),n=i(5),o=i(6),a=i(1),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=[[[a.b.DE,2,!1],[a.b.DE,1,!1],[a.b.ST,1,!1],[a.b.ST,1,!1],[a.b.TB,3,!0],[a.b.ST,1,!1],[a.b.CO,2,!1]],[[a.b.TB,1,!1],[a.b.ST,1,!1],[a.b.ST,1,!1],[a.b.CO,2,!1],[a.b.ST,0,!1],[a.b.DE,1,!1],[a.b.CO,3,!1]],[[a.b.ST,0,!1],[a.b.DE,2,!1],[a.b.CO,1,!1],[a.b.CO,3,!1],[a.b.CO,0,!1],[a.b.CO,2,!1],[a.b.EX,2,!1]],[[a.b.CO,0,!1],[a.b.TB,2,!0],[a.b.ST,1,!0],[a.b.ST,1,!1],[a.b.ST,1,!1],[a.b.CO,3,!0],[a.b.ST,0,!1]],[[a.b.DE,1,!1],[a.b.CO,3,!1],[a.b.ST,0,!1],[a.b.DE,1,!1],[a.b.CO,2,!1],[a.b.ST,0,!1],[a.b.ST,0,!1]],[[a.b.DE,1,!1],[a.b.ST,1,!1],[a.b.CO,3,!0],[a.b.ST,1,!1],[a.b.CO,3,!1],[a.b.CO,0,!1],[a.b.CO,3,!1]]],u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.m=new n.a(896,768,128),this.setMapParts(c),t.prototype.addActor.call(this,this.m);this.p1=new o.a({x:184,y:56},16,16,{layer:1}),t.prototype.addActor.call(this,this.p1),this.p1.maze=this.m,this.createTreasure({x:48,y:48}),this.createTreasure({x:688,y:176}),this.createTreasure({x:48,y:560}),this.createTreasure({x:48,y:688}),this.createTreasure({x:176,y:304}),this.createTreasure({x:432,y:560});var e=new r.a(this.p1,36);t.prototype.addActor.call(this,e),this.playTime=0},e}(s.a);e.a=u}]);