<!doctype html>
<meta charset="utf-8">
<title>TheRedSquareHatesToBeOnline</title>
<body>
<script src="ga.js"></script>
<script src="plugins.js"></script>
<script>
var distanceBH=200,distanceBW=100,gameSpeed=.7,horBarSpeed=.5,enemySpeed=1,enemyGrav=.05,airSpeed=2.5,endPos=0,g=ga(512,720,setup,["images/horizontelBar.png","images/background.png","images/buttfly.png","images/tortle.png"]);g.start();g.scaleToWindow();var player,canvas,sky,horBar,horBars,scoreDisplay,score,enemy,multiplier,air;
function setup(){horBars=[];enemy=[];multiplier=0;air=!1;g.canvas.style.border="1px black";g.backgroundColor="blue";sky=g.tilingSprite(g.canvas.width,g.canvas.height,"images/background.png");horBar=g.sprite("images/horizontelBar.png");horBar.y=g.canvas.height/2;gameScene=g.group(sky,horBar,horBars);player=g.sprite("images/buttfly.png");player.y=horBar.y-horBar.height-30;endPos=player.y;enemy[0]=g.sprite("images/tortle.png");enemy[0].x=g.randomInt(0,512-enemy.width);enemy[0].y=-100;var d=0,b=0;for(i=
0;6>i;i++){var c=g.sprite("images/horizontelBar.png"),a=g.sprite("images/horizontelBar.png"),e=b;b=g.randomInt(distanceBW,512);e>b-distanceBW&&e<b+distanceBW&&(e>b-distanceBW?(b+=distanceBW,b>512-distanceBW&&(b=512)):(b-=distanceBW,b<distanceBW+distanceBW&&(b=distanceBW)));c.x=b;c.y=g.canvas.height/2-distanceBH;c.y-=d;horBars.push(c);gameScene.addChild(c);a.x=b-c.width-distanceBW;a.y=g.canvas.height/2-distanceBH;a.y-=d;horBars.push(a);gameScene.addChild(a);d+=distanceBH}scoreDisplay=g.text("0","40px emulogic",
"#00FF00",471,10);score=0;message=g.text("Game Over!","64px Futura","black",20,20);message.x=120;message.y=g.canvas.height/2-64;gameOverScene=g.group(message);gameOverScene.visible=!1;g.fourKeyController(player,7,32,0,0,0);g.state=play}var del=!1;
function play(){--sky.tileY;0>=player.x?(player.x=5,player.vx=0):player.x>=g.canvas.width-player.width&&(player.x=g.canvas.width-player.width-5,player.vx=0);for(q=0;q<enemy.length;q++)g.hitTestRectangle(player,enemy[q])&&(g.state=end,message.content="You lost!");675<player.y&&(player.x=0,player.y=endPos,enemy[0].x=0,enemy[0].y=endPos,g.state=end,message.content="You lost!");710<=horBar.y&&0==del?(g.remove(horBar),score+=1,multiplier+=1,del=!0):("bottom"===g.rectangleCollision(player,horBar)&&(player.vy=
-4,air=!1),horBar.y+=horBarSpeed);player.vy+=gameSpeed;for(q=0;q<enemy.length;q++)enemy[q].vy+=enemyGrav;for(r=0;r<horBars.length;r++){horBars[r].y+=horBarSpeed;var d=g.rectangleCollision(player,horBars[r]);if("left"===d||"right"===d)player.vy=-6;"bottom"===d&&(player.vy=-4,air=!1);"top"===d&&(player.vy=4);if(710<=horBars[0].y){g.remove(horBars[0]);g.remove(horBars[1]);horBars.shift();horBars.shift();d=horBars.length-1;var b=g.sprite("images/horizontelBar.png"),c=g.sprite("images/horizontelBar.png"),
a=g.randomInt(distanceBW,512),e=a;a=g.randomInt(distanceBW,512);e>a-distanceBW&&e<a+distanceBW&&(e>a-distanceBW?(a+=distanceBW,a>512-distanceBW&&(a=512)):(a-=distanceBW,a<distanceBW+distanceBW&&(a=distanceBW)));b.x=a;b.y=horBars[d].y-distanceBH;horBars.push(b);gameScene.addChild(b);c.x=a-b.width-distanceBW;c.y=horBars[d].y-distanceBH;horBars.push(c);gameScene.addChild(c);score+=1;multiplier+=1}}air||1!=player.vx||(player.vx=5);air||-1!=player.vx||(player.vx=-5);playerMove();g.move(player);enemyMovment();
for(l=0;l<enemy.length;l++)g.move(enemy[l]);spawnEnemy();destroyEnemy();scoreDisplay.content=score;gameMultiplyer()}function end(){gameScene.visible=!1;gameOverScene.visible=!0}var oneDir=g.randomInt(0,1);function enemyMovment(){for(q=0;q<enemy.length;q++)0>=enemy[q].x?(enemy[q].x=0,oneDiq=!0):enemy[q].x>=g.canvas.width-enemy[q].width&&(enemy[q].x=g.canvas.width-enemy[q].width,oneDiq=!1),oneDir?(enemy[q].vx=enemySpeed,oneDir=!0):oneDir||(enemy[q].vx=-enemySpeed,oneDir=!1)}var spawner=!1,enemys=1;
function spawnEnemy(){5<=score&&(enemys=g.randomInt(1,2));for(l=0;l<enemys;l++)spawner&&(oneDir=g.randomInt(0,1),enemy[l]=g.sprite("images/tortle.png"),enemy[l].x=g.randomInt(0,512-enemy[l].width),enemy[l].y=-100);spawner=!1}function destroyEnemy(){if(!spawner)for(l=0;l<enemy.length;l++)720<enemy[l].y&&(g.remove(enemy[l]),spawner=!0)}function gameMultiplyer(){2==multiplier&&17>=score&&(horBarSpeed+=.2,multiplier=0)}
function playerMove(){g.key.leftArrow.press=function(){player.vx=air?-6:-5};g.key.leftArrow.release=function(){};g.key.rightArrow.press=function(){player.vx=air?airSpeed:5};g.key.leftArrow.release=function(){};g.key.downArrow.press=function(){player.vy=0;player.vx=0};g.key.downArrow.release=function(){g.key.rightArrow.isDown||0!==player.vy||(player.vx=0)}};
</script>
</body>
