(function(b,a,d){function c(a){a&&!a.setTargetAtTime&&(a.setTargetAtTime=a.setTargetValueAtTime)}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var a=this.internal_createGain();c(a.gain);return a},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(a){a=a?this.internal_createDelay(a):this.internal_createDelay();c(a.delayTime);return a},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var a=this.internal_createBufferSource();a.start||(a.start=function(a,b,e){b||e?this.noteGrainOn(a,b,e):this.noteOn(a)});a.stop||(a.stop=a.noteOff);c(a.playbackRate);return a},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var a=this.internal_createDynamicsCompressor();c(a.threshold);c(a.knee);c(a.ratio);c(a.reduction);c(a.attack);c(a.release);return a},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var a=this.internal_createBiquadFilter();c(a.frequency);c(a.detune);c(a.Q);c(a.gain);return a},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var a=this.internal_createOscillator();a.start||(a.start=a.noteOn);a.stop||(a.stop=a.noteOff);c(a.frequency);c(a.detune);return a}))})(window);(function(b){function a(a,d){var c=b.createEvent("Event");c.initEvent(a,!0,!1);d.dispatchEvent(c)}function d(d){b[f.enabled]=b[g.enabled];b[f.element]=b[g.element];a(f.events.change,d.target)}function c(b){a(f.events.error,b.target)}var e,k={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},f=k.w3;for(e in k)if(k[e].enabled in b){var g=k[e];break}f.enabled in b||!g||(b.addEventListener(g.events.change,d,!1),b.addEventListener(g.events.error,c,!1),b[f.enabled]=b[g.enabled],b[f.element]=b[g.element],b[f.exit]=b[g.exit],Element.prototype[f.request]=function(){return this[g.request].apply(this,arguments)});return g})(document);GA=GA||{};GA.plugins=function(b){b.move=function(a){if(!1===a instanceof Array)a.x+=a.vx|0,a.y+=a.vy|0;else for(var b=0;b<a.length;b++){var c=a[b];c.x+=c.vx|0;c.y+=c.vy|0}};b.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};b.scaleToWindow=function(a){var d=Math.min(window.innerWidth/b.canvas.width,window.innerHeight/b.canvas.height);b.canvas.style.transformOrigin="0 0";b.canvas.style.transform="scale("+d+")";var c=b.canvas.width>b.canvas.height?b.canvas.width*d<window.innerWidth?"horizontally":"vertically":b.canvas.height*d<window.innerHeight?"vertically":"horizontally";if("horizontally"===c){var e=(window.innerWidth-b.canvas.width*d)/2;b.canvas.style.marginLeft=e+"px";b.canvas.style.marginRight=e+"px"}"vertically"===c&&(e=(window.innerHeight-b.canvas.height*d)/2,b.canvas.style.marginTop=e+"px",b.canvas.style.marginBottom=e+"px");b.canvas.style.paddingLeft=0;b.canvas.style.paddingRight=0;b.canvas.style.paddingTop=0;b.canvas.style.paddingBottom=0;b.canvas.style.display="block";document.body.style.backgroundColor=a||"#2C3539";b.pointer.scale=d;b.scale=d;b.canvas.scaled=!0;a=navigator.userAgent.toLowerCase();-1==a.indexOf("safari")||-1<a.indexOf("chrome")||(b.canvas.style.maxHeight="100%",b.canvas.style.minHeight="100%")};b.fourKeyController=function(a,d,c,e,k,f){a.direction="";leftArrow=b.keyboard(f);upArrow=b.keyboard(c);rightArrow=b.keyboard(e);downArrow=b.keyboard(k);leftArrow.press=function(){a.vx=-d;a.vy=0;a.direction="left"};leftArrow.release=function(){rightArrow.isDown||0!==a.vy||(a.vx=0)};upArrow.press=function(){a.vy=-d;a.direction="up";air=!0};upArrow.release=function(){downArrow.isDown||0!==a.vx||(a.vy=0)};rightArrow.press=function(){a.vx=d;a.vy=0;a.direction="right"};rightArrow.release=function(){leftArrow.isDown||0!==a.vy||(a.vx=0)};downArrow.press=function(){a.vy=d;a.vx=0;a.direction="down"};downArrow.release=function(){upArrow.isDown||0!==a.vx||(a.vy=0)}};b.rectangleCollision=function(a,b,c,e){void 0===c&&(c=!1);void 0===e&&(e=!1);if(e){e=a.gx+a.halfWidth-(b.gx+b.halfWidth);var d=a.gy+a.halfHeight-(b.gy+b.halfHeight)}else e=a.centerX-b.centerX,d=a.centerY-b.centerY;var f=a.halfWidth+b.halfWidth;b=a.halfHeight+b.halfHeight;if(Math.abs(e)<f&&Math.abs(d)<b)if(f-=Math.abs(e),b-=Math.abs(d),f>=b){if(0<d){var g="top";a.y+=b}else g="bottom",a.y-=b;c&&(a.vy*=-1)}else 0<e?(g="left",a.x+=f):(g="right",a.x-=f),c&&(a.vx*=-1);return g};b.hitTestRectangle=function(a,b,c){void 0===c&&(c=!1);if(c){var e=a.gx+a.halfWidth-(b.gx+b.halfWidth);var d=a.gy+a.halfHeight-(b.gy+b.halfHeight)}else e=a.centerX-b.centerX,d=a.centerY-b.centerY;c=a.halfWidth+b.halfWidth;a=a.halfHeight+b.halfHeight;return Math.abs(e)<c?Math.abs(d)<a?!0:!1:!1};b.tilingSprite=function(a,d,c,e,k){void 0===e&&(e=0);void 0===k&&(k=0);if(b.assets[c].frame){var f=b.assets[c].frame.w;var g=b.assets[c].frame.h}else f=b.assets[c].width,g=b.assets[c].height;var n=a>=f?Math.round(a/f)+1:2;var m=d>=g?Math.round(d/g)+1:2;var h=b.grid(n,m,f,g,!1,0,0,function(){return b.sprite(c)});h._tileX=0;h._tileY=0;a=b.rectangle(a,d,"none","none");a.x=e;a.y=k;a.mask=!0;a.addChild(h);Object.defineProperties(a,{tileX:{get:function(){return h._tileX},set:function(a){h.children.forEach(function(b){var c=a-h._tileX;b.x+=c;b.x>(n-1)*f&&(b.x=0-f+c);b.x<0-f-c&&(b.x=(n-1)*f)});h._tileX=a},enumerable:!0,configurable:!0},tileY:{get:function(){return h._tileY},set:function(a){h.children.forEach(function(b){var c=a-h._tileY;b.y+=c;b.y>(m-1)*g&&(b.y=0-g+c);b.y<0-g-c&&(b.y=(m-1)*g)});h._tileY=a},enumerable:!0,configurable:!0}});return a};b.grid=function(a,d,c,e,k,f,g,n,m){void 0===a&&(a=0);void 0===d&&(d=0);void 0===c&&(c=32);void 0===e&&(e=32);void 0===f&&(f=0);void 0===g&&(g=0);void 0===k&&(k=!1);var h=b.group();h.createGrid=function(){for(var b=a*d,p=0;p<b;p++){var q=p%a*c,r=Math.floor(p/a)*e,l=n();h.addChild(l);k?(l.x=q+c/2-l.halfWidth+f,l.y=r+e/2-l.halfHeight+g):(l.x=q+f,l.y=r+g);m&&m(l)}};h.createGrid();b.stage.addChild(h);return h}};
