(function(){function c(a,b,d){this.a=d||new (window.AudioContext||webkitAudioContext);this.u=a;this.v=b;this.b=[]}var f=/^([A-Z]{3})/,h=/([A-GX]#?)([1-8])([1-9]{1,2})/g,k=new Map([["C",16.35],["C#",17.32],["D",18.35],["D#",19.45],["E",20.6],["F",21.83],["F#",23.12],["G",24.5],["G#",25.96],["A",27.5],["A#",29.14],["B",30.87],["X",0]]);c.prototype.play=function(a){this.stop();a=this.v[a];for(var b=Array(a.parts.length),d=0;d<a.parts.length;d++){var l=this.u[this.o(a.parts[d])],c=this.m(a.parts[d],a.bpm);
b[d]=this.j(l);this.f(b[d],c,a.isLooping)}this.b=b};c.prototype.stop=function(){for(var a=0;a<this.b.length;a++)this.b[a].stop()};c.prototype.o=function(a){return a.match(f)[1]};c.prototype.m=function(a,b){for(var d=[],c;c=h.exec(a);)d.push({length:this.l(c[3],b),s:this.i(c[1],c[2])});return d};c.prototype.l=function(a,b){return parseInt(a)/(b/60)/4};c.prototype.i=function(a,b){return k.get(a)*Math.pow(1.059463094359,12*b)};c.prototype.j=function(a){var b=this.a.createOscillator();b.type=a.wave;b.frequency.value=
0;var d=this.g(b,a.gain),d=this.h(d,a.pan);d.connect(this.a.destination);b.start();return b};c.prototype.f=function(a,b,d){for(var c=this,g=0,e=0;e<b.length;e++){var f=b[e];a.frequency.setValueAtTime(b[e].s,this.a.currentTime+g);g+=f.length}setTimeout(function(){d?c.f(a,b,d):(c.stop(),c.onStop&&c.onStop())},1E3*Math.round(g))};c.prototype.g=function(a,b){return this.c(a,b,"createGain","gain")};c.prototype.h=function(a,b){return this.c(a,b,"createStereoPanner","pan")};c.prototype.c=function(a,b,d,
c){if(!b||!this.a[d])return a;d=this.a[d]();d[c].value=b;a.connect(d);return d};this.NT=c})(this);
