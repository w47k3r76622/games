(function(){function F(){m.call(this);this.aa=5;this.f=20;this.s=5;this.Aa=10;this.J=0;this.value=5}function G(){m.call(this);this.s=3;this.f=20;this.value=4}function H(){m.call(this);this.aa=5;this.f=20;this.value=this.s=3}function m(){q.call(this);this.s=-1}function I(){q.call(this);this.aa=2;this.f=30;this.value=2}function v(a,b,c){null==c&&(c=!1);null==b&&(b=8);l.call(this);this.N=a;this.g=b;this.rotate=c;this.Na=!1}function q(){l.call(this);this.aa=2;this.g=16;this.value=1}function z(){}function A(a,
b,c,d,k,g,r){l.call(this);this.Sa=new x;this.Ta=new x;this.width=a;this.Jb=b;this.Gb=k;this.length=b+2*k*g;this.qb=r;k=Math.floor(this.length/d);this.w=.4*d;this.Pa=a/2-c/2-this.w/2;this.Va=a/2+c/2-this.w/2;this.yb=d;c=a=null;b=0;for(k+=1;b<k;){g=b++;r=new z;r.x=this.Pa+Math.random()*this.w;r.y=-d+d*g+Math.random()*this.w;r.parent=a;this.Sa.add(r);var e=new z;e.x=this.Va+Math.random()*this.w;e.y=-d+d*g+Math.random()*this.w;e.parent=c;this.Ta.add(e);a=r;c=e}}function B(a,b){f.call(this);this.x=a;this.y=
b;this.Ma=.5*Math.PI;this.va=4;this.C(18,1.25*Math.PI+.5*Math.random()*Math.PI)}function C(){f.call(this);this.g=7}function h(){f.call(this);this.S=this.H=this.ea=0;this.o=1;this.M=0;this.L=!0}function t(a,b){this.ja=new x;w.call(this,a,b-24);this.Ka=new A(a,b,a/4,128,12,10,"#131313");this.Ra=new A(a,b,a/1.5,128,15,10,"#212121");this.ca=u.Fa();this.$=0}function p(){this.T=window.document.getElementById("lcann_reversed");this.context=this.T.getContext("2d",null);this.b=new t(this.T.width,this.T.height);
window.setInterval(D(this,this.Bb),null,16.666666666666668)}function K(){this.ga=[];window.addEventListener("keydown",D(this,this.zb));window.addEventListener("keyup",D(this,this.Ab))}function w(a,b){this.G=new J;this.width=a;this.height=b;this.ka()}function E(a,b,c,d){null==d&&(d=0);null==c&&(c=0);l.call(this);0!=c?(this.x=a-c+2*Math.random()*c,this.y=b-c+2*Math.random()*c):(this.x=a,this.y=b);this.f=d;this.C(5+5*Math.random(),2*Math.random()*Math.PI);this.alpha=1}function l(){f.call(this);this.U=
this.xa=0;this.L=this.forward=!0;this.la=0;this.h=1}function f(){this.Ma=this.va=this.f=this.B=this.y=this.x=0}function O(){}function e(){}function g(){}function y(a){this.na=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,y)}function J(){this.j={}}function L(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length}function Q(){}function u(){}function M(a){this.head=a;this.na=null}function x(){this.length=0}function N(){}function n(a,b){function c(){}c.prototype=
a;var d=new c,k;for(k in b)d[k]=b[k];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function D(a,b){if(null==b)return null;null==b.qa&&(b.qa=U++);var c;null==a.wa?a.wa={}:c=a.wa[b.qa];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.wa[b.qa]=c);return c}N.a=!0;N.Da=function(a){a=a.charCodeAt(1);return a!=a?void 0:a};x.a=!0;x.prototype={add:function(a){a=[a];null==this.j?this.j=a:this.q[1]=a;this.q=a;this.length++},clear:function(){this.q=
this.j=null;this.length=0},remove:function(a){for(var b=null,c=this.j;null!=c;){if(c[0]==a)return null==b?this.j=c[1]:b[1]=c[1],this.q==c&&(this.q=b),this.length--,!0;b=c;c=c[1]}return!1},c:x};M.a=!0;M.prototype={v:function(){return null!=this.head},next:function(){this.na=this.head[0];this.head=this.head[1];return this.na},c:M};Math.a=!0;u.a=!0;u.Ba=function(a){return g.W(a,"")};u["int"]=function(a){return a|0};u.Fa=function(){var a=window.localStorage.getItem("lcr_score"),b=parseInt(a,10);0!=b||
120!=N.Da(a)&&88!=N.Da(a)||(b=parseInt(a));return isNaN(b)?null:b};Q.a=!0;L.a=!0;L.prototype={v:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},c:L};J.a=!0;J.ra=[Q];J.prototype={set:function(a,b){null!=R[a]?this.Hb(a,b):this.j[a]=b},get:function(a){return null!=R[a]?this.ub(a):this.j[a]},Hb:function(a,b){null==this.O&&(this.O={});this.O["$"+a]=b},ub:function(a){return null==this.O?null:this.O["$"+a]},pb:function(){var a=[],b;for(b in this.j)this.j.hasOwnProperty(b)&&
a.push(b);if(null!=this.O)for(b in this.O)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new L(this,this.pb())},c:J};y.a=!0;y.i=Error;y.prototype=n(Error.prototype,{c:y});g.a=!0;g.Z=function(a){if(a instanceof Array&&null==a.pa)return Array;var b=a.c;if(null!=b)return b;a=g.Xa(a);return null!=a?g.$a(a):null};g.W=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.a||a.Ga)&&(c="object");switch(c){case "object":if(a instanceof
Array){if(a.pa){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,k=a.length;d<k;){var e=d++;2!=e?c+=","+g.W(a[e],b):c+=g.W(a[e],b)}return c+")"}c=a.length;d="[";b+="\t";for(k=0;k<c;)e=k++,d+=(0<e?",":"")+g.W(a[e],b);return d+"]"}try{d=a.toString}catch(r){return r instanceof y&&(r=r.na),"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";k=null!=a.hasOwnProperty;for(c in a)k&&!a.hasOwnProperty(c)||"prototype"==c||
"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+g.W(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};g.za=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.ra;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||g.za(f,b))return!0}return g.za(a.i,b)};g.fa=function(a,b){if(null==b)return!1;switch(b){case V:return(a|0)===a;case S:return"number"==
typeof a;case T:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.pa;case W:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||g.za(g.Z(a),b))return!0}else{if("object"==typeof b&&g.Za(b)&&a instanceof b)return!0}else return!1;return b==X&&null!=a.a||b==Y&&null!=a.Ga?!0:a.pa==b}};g.ya=function(a,b){if(g.fa(a,b))return a;throw new y("Cannot cast "+u.Ba(a)+" to "+u.Ba(b));};g.Xa=function(a){a=g.ab.call(a).slice(8,-1);return"Object"==
a||"Function"==a||"Math"==a||"JSON"==a?null:a};g.Za=function(a){return null!=g.Xa(a)};g.$a=function(a){return Function("return typeof "+a+' != "undefined" ? '+a+" : null")()};e.a=!0;e.l=function(a){var b=new Image;b.src=a;return b};O.a=!0;f.a=!0;f.ra=[O];f.ha=function(a,b){return Math.cos(b)*a};f.ia=function(a,b){return Math.sin(b)*a};f.prototype={update:function(a,b){this.x+=this.B*b;this.y+=this.f*b;0!=this.va&&this.C(this.va*b,this.Ma)},La:function(){return Math.atan2(this.f,this.B)},vb:function(){return Math.sqrt(Math.pow(this.B,
2)+Math.pow(this.f,2))},Ib:function(a){var b=this.La();this.B=f.ha(a,b);this.f=f.ia(a,b);return a},da:function(a){return this.Ja(a.x,a.y)},Ja:function(a,b){return Math.sqrt(Math.pow(this.x-a,2)+Math.pow(this.y-b,2))},ua:function(a){return Math.atan2(a.y-this.y,a.x-this.x)},P:function(a){return this.b=a},C:function(a,b){this.B+=f.ha(a,b);this.f+=f.ia(a,b)},sb:function(a,b,c,d,e){a.save();a.translate(this.x,this.y);a.rotate(e);a.drawImage(b,c,d);a.restore()},c:f};l.a=!0;l.i=f;l.prototype=n(f.prototype,
{update:function(a,b){this.forward?1>this.h&&(this.h+=l.Ea*b,1<this.h&&(this.h=1)):(-1<this.h&&(this.h-=l.Ea*b,-1>this.h&&(this.h=-1)),this.la-=b,0>=this.la&&(this.forward=!0));this.L?(this.xa+=b*this.h,0<this.xa&&(f.prototype.update.call(this,a,b*this.h),this.A(a,b*this.h))):(f.prototype.update.call(this,a,b*this.h),this.U+=b*this.h,0>=this.U&&(this.L=!0),this.U>l.nb&&this.b.remove(this))},A:function(){},ma:function(a){this.forward=!1;this.la=a;this.h=0},ta:function(){this.L=!1;this.U=0},c:l});E.a=
!0;E.i=l;E.prototype=n(l.prototype,{A:function(a,b){l.prototype.A.call(this,a,b);this.alpha-=.4*b;0>=this.alpha&&0<b&&this.ta();1<this.alpha&&(this.alpha=1);0>this.alpha?a.globalAlpha=0:a.globalAlpha=this.alpha;a.drawImage(e.ib,this.x-8,this.y-8);a.globalAlpha=1},c:E});w.a=!0;w.ra=[O];w.prototype={update:function(a,b){for(var c=this.G.iterator();c.v();)for(var d=c.next().j,e=null;null!=d;)e=d[0],d=d[1],e.update(a,b)},add:function(a,b){null==b&&(b="default");var c=this.G.get(b);null==c&&(c=new x,this.G.set(b,
c));c.add(a);a.P(this);a.Ua=b},remove:function(a,b){this.G.get(null==b?a.Ua:b).remove(a);a.P(null);a.Ua=null},Y:function(a){null==a&&(a="default");var b=this.G.get(a);null==b&&(b=new x,this.G.set(a,b));return new M(b.j)},ka:function(){for(var a=this.G.iterator();a.v();)a.next().clear()},c:w};K.a=!0;K.prototype={zb:function(a){a.preventDefault();this.ga[a.keyCode]=!0},Ab:function(a){a.preventDefault();this.ga[a.keyCode]=!1},F:function(a){return this.ga.length<a?!1:1==this.ga[a]?!0:!1},c:K};p.a=!0;
p.mb=function(){p.D=new K;new p};p.prototype={Bb:function(){this.context.fillStyle="#000";this.context.fillRect(0,0,this.T.width,this.T.height);this.b.update(this.context,.016666666666666666)},c:p};t.a=!0;t.i=w;t.prototype=n(w.prototype,{ka:function(){this.ca=u.Fa();null!=this.u&&(this.$=this.u.H,this.$>this.ca&&(window.localStorage.setItem("lcr_score",u.Ba(this.u.H)),this.ca=this.$));w.prototype.ka.call(this);this.u=new h;this.add(this.u,"player");this.oa=this.K=this.R=0;window.addEventListener("keydown",
D(this,this.Ha));this.Qa=!0},Ha:function(a){90==a.keyCode&&(window.removeEventListener("keydown",D(this,this.Ha)),this.start())},start:function(){this.R=.34;this.oa=this.K=0;this.Ia();this.Qa=!1},Ia:function(){this.ja.clear();this.ba=0;for(var a=this.R*t.m,a=Math.floor(a+Math.random()*(this.R*t.l-a)),b=Math.ceil(3*Math.random()),c=0;c<b;){var d=c++;this.ba+=this.Cb(a-this.ba,b-d)}this.R+=.002},Cb:function(a,b){var c=a-4*(b-1),c=u["int"](Math.max(Math.floor(Math.random()*Math.min(a,4))+1,c)),d;switch(c){case 1:d=
new I;break;case 2:d=new H;break;case 3:d=new G;break;case 4:d=new F;break;default:return 0}for(var e=0,g=0;10>g;){g++;for(var e=this.width/4+this.width/2*Math.random(),f=this.ja.j,h=null;null!=f&&!(h=f[0],f=f[1],32<h.Ja(e,-16)););}d.x=e;d.y=-16;this.ja.add(d);return c},update:function(a,b){this.Ka.update(a,b);this.Ra.update(a,b);w.prototype.update.call(this,a,b);this.K+=b;if(0<this.K&&(this.oa+this.ba)/this.K<this.R){for(var c=this.ja.j,d=null;null!=c;)d=c[0],c=c[1],this.add(d,"enemy");this.oa+=
this.ba;this.Ia()}a.font="bold 12px Arial";a.fillStyle="#696969";a.fillRect(0,this.height,this.width,24);a.fillStyle="#0000FF";c=.5*this.width-24;a.fillRect(4,this.height+4,this.u.o/3*c,16);a.strokeStyle="#000000";for(d=1;4>d;){var e=d++,g=4+e/3*c;a.beginPath();a.moveTo(g,this.height+4);a.lineTo(g,this.height+20);a.stroke();a.fillStyle=this.u.o>=e?"#FFFFFF":"#000000";a.fillText(null==e?"null":""+e,g-12,this.height+16)}a.strokeRect(4,this.height+4,c,16);a.font="bold 20px Arial";a.fillText("Score: "+
this.u.H,.5*this.width+4,this.height+20);this.Qa&&(a.fillStyle="#000000",a.globalAlpha=.5,a.fillRect(0,0,this.width,this.height),a.globalAlpha=1,a.fillStyle="#FFFFFF",a.fillText("Press 'Z' to Start",this.width/2-a.measureText("Press 'Z' to Start").width/2,.33*this.height),c="Best Score: "+this.ca,a.fillText(c,this.width/2-a.measureText(c).width/2,.66*this.height),0<this.$&&(c="Last Score: "+this.$,a.fillText(c,this.width/2-a.measureText(c).width/2,.66*this.height+24)),a.font="bold 15px Arial",a.fillText("Move = Arrow Keys",
20,.83*this.height),a.fillText("Shoot = Z",20,.83*this.height+24),a.fillText("Chrono Bomb = X",20,.83*this.height+48),a.fillText("Focus = L Shift",20,.83*this.height+72))},reverse:function(a){this.K-=2*a;this.Ka.ma(a);this.Ra.ma(a)},c:t});h.a=!0;h.i=f;h.prototype=n(f.prototype,{P:function(a){this.x=.5*a.width;this.y=.8*a.height;return f.prototype.P.call(this,a)},update:function(a,b){this.rb();f.prototype.update.call(this,a,b);if(this.L){this.ea+=b;if(p.D.F(90)&&this.ea>=h.jb){this.ea=0;var c=new C;
c.x=this.x;c.y=this.y;c.f=-400;this.b.add(c,"playerBullet")}0<this.S&&(this.S-=b);0<this.M&&(this.M-=b);c=!1;p.D.F(88)&&0>=this.S&&1<=this.o&&(this.S=4*h.X,c=!0,g.ya(this.b,t).reverse(h.X),--this.o,this.M=1.5*h.X);for(var d=this.b.Y("bullet");d.v();){var k=d.next();(null==k?null:g.Z(k))==v&&this.sa(k);c&&g.fa(k,l)&&g.ya(k,l).ma(h.X)}for(d=this.b.Y("enemy");d.v();)k=d.next(),g.fa(k,q)&&this.tb(k),c&&g.fa(k,l)&&g.ya(k,l).ma(h.X);for(c=this.b.Y("score");c.v();)d=c.next(),(null==d?null:g.Z(d))==B&&this.Fb(d);
a.drawImage(e.u,this.x-h.m,this.y-h.m);0<this.M&&(a.strokeStyle="#0000FF",a.beginPath(),a.arc(this.x,this.y,2*h.m,0,2*Math.PI),a.stroke())}},rb:function(){var a=0,b=0;p.D.F(38)&&this.y>h.m&&--b;p.D.F(39)&&this.x<this.b.width-h.m&&(a+=1);p.D.F(40)&&this.y<this.b.height-h.m&&(b+=1);p.D.F(37)&&this.x>h.m&&--a;0!=a||0!=b?(a=Math.atan2(b,a),b=p.D.F(16)?h.kb:h.bb,this.B=Math.cos(a)*b,this.f=Math.sin(a)*b):this.f=this.B=0},sa:function(a){this.da(a)<h.m+a.g&&!a.Na&&(a.Na=!0,this.H+=3,this.o+=1/(20*(Math.floor(this.o)+
1)+20*Math.floor(this.o)),3<this.o&&(this.o=3));this.Oa(a,a.g)},tb:function(a){this.Oa(a,a.g)},Oa:function(a,b){var c=this.da(a);0<this.M&&c<2*h.m&&this.b.remove(a);if(c<h.lb+b){for(c=0;20>c;)c++,this.b.add(new E(this.x,this.y,16));this.L=!1;window.setTimeout((P=this.b,D(P,P.ka)),3E3)}},Fb:function(a){this.da(a)<h.m+4&&(this.H+=Math.ceil(this.o),this.b.remove(a))},c:h});C.a=!0;C.i=f;C.prototype=n(f.prototype,{update:function(a,b){f.prototype.update.call(this,a,b);0>this.y?this.b.remove(this):a.drawImage(e.cb,
this.x-7,this.y-11)},c:C});B.a=!0;B.i=f;B.prototype=n(f.prototype,{update:function(a,b){f.prototype.update.call(this,a,b);18<this.vb()&&this.Ib(18);a.drawImage(e.ob,this.x-4,this.y-4);(this.x>this.b.width+4||-4>this.x||this.y>this.b.height+4)&&this.b.remove(this)},c:B});A.a=!0;A.i=l;A.prototype=n(l.prototype,{A:function(a,b){var c=this.Gb*b;a.fillStyle=this.qb;this.Wa(a,c,this.Sa,this.Pa,0);this.Wa(a,c,this.Ta,this.Va,this.width)},Wa:function(a,b,c,d,e){for(var g=c.j,f=null;null!=g;){f=g[0];g=g[1];
if(0>=f.y&&0<f.y+b&&0<b&&null==f.parent){var h=new z;h.x=d+Math.random()*this.w;h.y=f.y-this.yb+Math.random()*this.w;c.add(h);f.parent=h}f.y+=b;f.y>this.length?c.remove(f):0<f.y&&null!=f.parent&&f.parent.y<this.Jb&&(a.beginPath(),a.moveTo(e,f.y+1),a.lineTo(f.x,f.y+1),a.lineTo(f.parent.x,f.parent.y-1),a.lineTo(e,f.parent.y-1),a.closePath(),a.fill())}},c:A});z.a=!0;z.prototype={c:z};q.a=!0;q.i=l;q.prototype=n(l.prototype,{P:function(a){if(null!=a)for(var b=a.Y("player");b.v();){var c=b.next();if((null==
c?null:g.Z(c))==h){this.target=c;break}}return l.prototype.P.call(this,a)},A:function(a){for(var b=this.b.Y("playerBullet");b.v();){var c=b.next();if((null==c?null:g.Z(c))==C&&this.sa(c))return}this.V(a);this.y>this.b.height+this.g&&this.ta()},V:function(a){a.fillStyle="#00FF00";a.fillRect(this.x-this.g,this.y-this.g,2*this.g,2*this.g)},sa:function(a){if(this.da(a)<this.g+a.g&&(this.b.remove(a),--this.aa,0>=this.aa)){a=0;for(var b=this.value;a<b;)a++,this.b.add(new B(this.x,this.y),"score");for(a=
0;5>a;)a++,this.b.add(new E(this.x,this.y,16,this.f),"particle");this.b.remove(this);return!0}return!1},c:q});v.a=!0;v.i=l;v.prototype=n(l.prototype,{A:function(a){this.rotate?this.sb(a,this.N,-this.N.width/2,-this.N.height/2,this.La()):a.drawImage(this.N,this.x-this.N.width/2,this.y-this.N.height/2);(this.x<-this.g||this.x>this.b.width+this.g||this.y<-this.g||this.y>this.b.height+this.g)&&this.ta()},c:v});I.a=!0;I.i=q;I.prototype=n(q.prototype,{V:function(a){a.drawImage(e.eb,this.x-16,this.y-16)},
c:I});m.a=!0;m.i=q;m.prototype=n(q.prototype,{A:function(a,b){q.prototype.A.call(this,a,b);null!=this.b&&0<this.s&&this.y<.75*this.b.height&&(this.s-=b,0>=this.s&&this.I())},I:function(){},c:m});H.a=!0;H.i=m;H.prototype=n(m.prototype,{I:function(){m.prototype.I.call(this);var a=new v(e.Ya);a.x=this.x;a.y=this.y;a.C(40,this.ua(this.target));this.b.add(a,"bullet");this.s=5},V:function(a){a.drawImage(e.fb,this.x-16,this.y-16)},c:H});G.a=!0;G.i=m;G.prototype=n(m.prototype,{I:function(){m.prototype.I.call(this);
for(var a=this.ua(this.target)-.5,b=0;3>b;){var c=b++,d=new v(e.Ya);d.x=this.x;d.y=this.y;d.C(30,a+.5*c);this.b.add(d,"bullet")}this.s=7},V:function(a){a.drawImage(e.gb,this.x-16,this.y-16)},c:G});F.a=!0;F.i=m;F.prototype=n(m.prototype,{V:function(a){a.drawImage(e.hb,this.x-16,this.y-16)},I:function(){m.prototype.I.call(this);0<this.f&&(this.f=0,this.J=this.ua(this.target),this.wb=f.ha(16,this.J+Math.PI/2),this.xb=f.ia(16,this.J+Math.PI/2),this.Db=f.ha(16,this.J-Math.PI/2),this.Eb=f.ia(16,this.J-
Math.PI/2));var a=new v(e.Ca,4,!0);a.x=this.x+this.wb;a.y=this.y+this.xb;a.C(30,this.J);this.b.add(a,"bullet");a=new v(e.Ca,4,!0);a.x=this.x+this.Db;a.y=this.y+this.Eb;a.C(30,this.J);this.b.add(a,"bullet");--this.Aa;0>=this.Aa?(this.s=5,this.Aa=10,this.f=20):this.s=.4},c:F});var P,U=0;String.prototype.c=String;String.a=!0;Array.a=!0;var V={a:["Int"]},W={a:["Dynamic"]},S=Number;S.a=["Float"];var T=Boolean;T.Ga=["Bool"];var X={a:["Class"]},Y={},R={};g.ab={}.toString;e.u=e.l("res/pla.png");e.cb=e.l("res/bpl.png");
e.ob=e.l("res/scr.png");e.ib=e.l("res/exp.png");e.Ya=e.l("res/bno.png");e.Ca=e.l("res/bsm.png");e.eb=e.l("res/ebl.png");e.fb=e.l("res/ess.png");e.gb=e.l("res/ets.png");e.hb=e.l("res/etl.png");l.nb=10;l.Ea=.5;t.l=10;t.m=3;h.bb=80;h.kb=50;h.m=16;h.lb=2;h.jb=.5;h.X=5;p.mb()})("undefined"!=typeof console?console:{log:function(){}});
