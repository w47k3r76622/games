parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function C(a){return a&&a.__esModule?{d:a.default}:{d:a}}var m={};function Aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ba(t,e,i){return e&&X(t.prototype,e),i&&X(t,i),t}function H(t){t.play()}function Ca(t){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ea(t,e,r){return e&&Y(t.prototype,e),r&&Y(t,r),t}function Fa(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ga(t,e)}function Ga(t,e){return(Ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ha(t){var e=Ka();return function(){var r,o=Z(t);if(e){var n=Z(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Ia(this,r)}}function Ia(t,e){return!e||"object"!==Ca(e)&&"function"!=typeof e?Ja(t):e}function Ja(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ma(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),e}function Na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oa=2,Pa=12,d=function(){function e(t,r,i,n,a,s){var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:16,l=arguments.length>8?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;La(this,e),this.srcX=t,this.srcY=r,this.srcW=i,this.srcH=n,this.x=a,this.y=s,this.w=h,this.h=c,this.tick=0,this.type=l,this.currentAnim=u,this.currentFrame=0,this.fps=12,e.all.push(this)}return Ma(e,[{key:"advanceFrame",value:function(){this.currentFrame<Oa-1?this.currentFrame++:this.currentFrame=0,this.srcX=16*this.currentFrame+this.currentAnim.srcX}},{key:"animate",value:function(){this.tick++,this.tick===Pa&&(this.advanceFrame(),this.tick=0)}},{key:"isCollidedAtCenter",value:function(e){return Math.abs(this.centerX-e.centerX)<this.w/2+e.w/2&&Math.abs(this.centerY-e.centerY)<this.h/2+e.h/2}},{key:"handleRectangleCollision",value:function(e){var t,r,i=!1,n=this.centerX-e.centerX,a=this.centerY-e.centerY,s=this.w/2-1+e.w/2,h=this.h/2-1+e.h/2;return Math.abs(n)<s&&Math.abs(a)<h&&(i=!0,(t=s-Math.abs(n))>=(r=h-Math.abs(a))?a>0?this.y+=r:this.y-=r:n>0?this.x+=t:this.x-=t),i}},{key:"draw",value:function(e,t){e.drawImage(t,this.srcX,this.srcY,this.srcW,this.srcH,this.x,this.y,this.w,this.h)}},{key:"frameRate",get:function(){return 1e3/this.fps}},{key:"centerX",get:function(){return this.x+this.w/2}},{key:"centerY",get:function(){return this.y+this.w/2}}],[{key:"remove",value:function(t){e.all=e.all.filter(function(e){return JSON.stringify(e)!==JSON.stringify(t)})}},{key:"clearAllExceptPlayer",value:function(){e.all=[e.all.find(function(e){return"player"===e.type})],console.log(e.all)}}]),e}();Na(d,"all",[]);var Qa=function(t){Fa(r,d);var e=Ha(r);function r(t,o,n,i,a,s,$,c,u,f){var h;return Da(this,r),(h=e.call(this,t,0,n,i,a,s,$,c,u,f)).vx=0,h.vy=0,h.acceleration=2,h.itemHeld,h.movement={up:!1,down:!1,left:!1,right:!1},h.isHolding=!1,h}return Ea(r,[{key:"isCollidedWithFood",value:function(t){return t.x-10<=this.x&&t.x+t.w+10>=this.x+this.w&&this.y>t.y&&this.y+this.h<=t.y+t.h+17}},{key:"update",value:function(t,e){this.movement.right&&!this.movement.left&&(this.vx=this.acceleration),this.movement.left&&!this.movement.right&&(this.vx=-this.acceleration),this.movement.down&&!this.movement.up&&(this.vy=this.acceleration),this.movement.up&&!this.movement.down&&(this.vy=-this.acceleration),this.movement.up||this.movement.down||(this.vy=0),this.movement.left||this.movement.right||(this.vx=0),this.x=Math.max(0,Math.min(this.x+this.vx,e-this.w)),this.y=Math.max(0,Math.min(this.y+this.vy,t-this.h)),this.animate()}}]),r}();function Ra(e){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ta(e,t,r){return t&&aa(e.prototype,t),r&&aa(e,r),e}function Ua(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){var t=Ya();return function(){var r,n=ca(e);if(t){var o=ca(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Xa(this,r)}}function Xa(e,t){return!t||"object"!==Ra(t)&&"function"!=typeof t?ba(e):t}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function da(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){Ua(r,d);var t=Wa(r);function r(e,n,o,c,l,a,$,i,u){var f,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;return Sa(this,r),(f=t.call(this,e,n,o,c,l,a,$,i,u,s)).isCarried=!1,r.all.push(ba(f)),f}return Ta(r,null,[{key:"spawn",value:function(){r.createTaco(),r.createDonut()}},{key:"createDonut",value:function(){return new r(259,6,10,10,115,134,10,10,"donut")}},{key:"createTaco",value:function(){return new r(275,8,10,8,67,136,10,8,"taco")}},{key:"destroy",value:function(){var e=r.all.findIndex(function(e){return!0===e.isCarried}),t=r.all[e];return r.all.splice(e,1),d.remove(t),t}}]),r}();da(g,"all",[]),da(g,"types",[g.createDonut,g.createTaco]);function Za(t){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ab(t,e)}function ab(t,e){return(ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bb(t){var e=db();return function(){var r,o=fa(t);if(e){var i=fa(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return cb(this,r)}}function cb(t,e){return!e||"object"!==Za(e)&&"function"!=typeof e?ea(t):e}function ea(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function db(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var D=function(t){_a(r,d);var e=bb(r);function r(t,o){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,l=arguments.length>4?arguments[4]:void 0,$=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;return $a(this,r),i=e.call(this,t,o,n,f,l,$,a,c,u),r.all.push(ea(i)),i}return r}();eb(D,"all",[]);function fb(t){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hb(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ib(t,e)}function ib(t,e){return(ib=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jb(t){var e=lb();return function(){var r,o=ha(t);if(e){var n=ha(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return kb(this,r)}}function kb(t,e){return!e||"object"!==fb(e)&&"function"!=typeof e?ga(t):e}function ga(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function ha(t){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var I=function(t){hb(r,d);var e=jb(r);function r(t,o,n,$){var p,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"wall";return gb(this,r),p=e.call(this,t,o,n,$,a),r.all.push(ga(p)),p}return r}();mb(I,"all",[]);function nb(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ia(e,r){for(var $=0;$<r.length;$++){var a=r[$];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ob(e,r,$){return r&&ia(e.prototype,r),$&&ia(e,$),e}var j=[[2,9,2,2,2,2,2,2,2,2,9,2],[1,1,1,1,1,1,1,1,1,1,1,1],[1,2,1,2,1,2,2,1,2,1,2,1],[1,1,1,1,1,2,1,1,1,1,1,1],[1,2,1,2,1,1,1,2,2,1,2,1],[1,2,1,2,2,2,1,2,2,1,2,1],[1,2,1,1,1,1,1,1,1,1,2,1],[1,1,1,2,2,2,2,2,2,1,1,1],[1,2,1,2,7,2,2,8,2,1,2,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,2,1,2,1,2,1,2,2,1,2,1],[1,2,1,2,1,1,1,2,2,1,2,1],[1,1,1,1,1,2,1,1,1,1,1,1],[2,1,2,2,1,2,2,1,2,2,1,2],[1,1,1,1,1,1,1,1,1,1,1,1],[1,9,2,1,2,2,1,2,1,2,9,1],[1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2]];var ja=j.length,ka=j[0].length;var q={EMPTY:0,FLOOR:1,WALL:2,PLAYER:3,ENEMY_TYPE_1:4,ENEMY_TYPE_2:10,TACO:5,DONUT:6,TACO_COURT:7,DONUT_COURT:8,ENEMY_SPAWN:9};function pb(t){return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rb(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sb(t,e)}function sb(t,e){return(sb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tb(t){var e=vb();return function(){var r,o=ma(t);if(e){var i=ma(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return ub(this,r)}}function ub(t,e){return!e||"object"!==pb(e)&&"function"!=typeof e?la(t):e}function la(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function ma(t){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var z=function(t){rb(r,d);var e=tb(r);function r(t,o){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,l=arguments.length>4?arguments[4]:void 0,$=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:16,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"enemySpawn";return qb(this,r),(i=e.call(this,t,o,n,c,l,$,a,u,f)).isOccupied=!1,r.all.push(la(i)),i}return r}();wb(z,"all",[]);function xb(t){return(xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zb(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ab(t,e)}function Ab(t,e){return(Ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bb(t){var e=Db();return function(){var r,o=oa(t);if(e){var n=oa(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Cb(this,r)}}function Cb(t,e){return!e||"object"!==xb(e)&&"function"!=typeof e?na(t):e}function na(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Db(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pa=function(t){zb(r,d);var e=Bb(r);function r(t,o,n,$,a,i,c,u){var f,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"floor";return yb(this,r),f=e.call(this,t,o,n,$,a,i,c,u,s),r.all.push(na(f)),f}return r}();Eb(pa,"all",[]);var Fb=function(){function e(r){nb(this,e),this.tileSize=r,this.cells=[],this.build()}return ob(e,[{key:"build",value:function(){for(var e,r=q.FLOOR,$=q.WALL,a=q.TACO_COURT,t=q.DONUT_COURT,o=q.ENEMY_SPAWN,u=this.tileSize,i=0;i<j[0].length;i++)for(var s=0;s<j.length;s++){switch(j[s][i]){case r:(e=new pa).srcX=304,e.srcY=16;break;case $:e=new I;break;case a:(e=new D).srcX=304,e.srcY=0,e.type="taco";break;case t:(e=new D).srcX=288,e.srcY=0,e.type="donut";break;case o:(e=new z).srcX=256,e.srcY=16;}e.x=i*u,e.y=s*u,this.cells.push(e)}}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(e,r){var $=this.tileSize;this.cells.forEach(function(a){"wall"!==a.type&&(e.globalAlpha=1,e.drawImage(r,a.srcX,a.srcY,$,$,a.x,a.y,$,$))})}}]),e}();function Gb(t){return(Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hb(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function qa(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ib(t,r,e){return r&&qa(t.prototype,r),e&&qa(t,e),t}function Jb(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Kb(t,r)}function Kb(t,r){return(Kb=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function Lb(t){var r=Nb();return function(){var e,i=sa(t);if(r){var $=sa(this).constructor;e=Reflect.construct(i,arguments,$)}else e=i.apply(this,arguments);return Mb(this,e)}}function Mb(t,r){return!r||"object"!==Gb(r)&&"function"!=typeof r?ra(t):r}function ra(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function sa(t){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ob(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var k={DOWN:{srcX:0},DOWN_CARRY:{srcX:32},UP:{srcX:64},UP_CARRY:{srcX:96},RIGHT_SIDE:{srcX:128},RIGHT_SIDE_CARRY:{srcX:160},LEFT_SIDE:{srcX:192},LEFT_SIDE_CARRY:{srcX:224}};var Pb={DOWN:{srcX:0,srcY:16},UP:{srcX:32,srcY:16},RIGHT_SIDE:{srcX:64,srcY:16},LEFT_SIDE:{srcX:96,srcY:16}};var Qb={DOWN:{srcX:128,srcY:16},UP:{srcX:160,srcY:16},RIGHT_SIDE:{srcX:192,srcY:16},LEFT_SIDE:{srcX:224,srcY:16}};var E=q.FLOOR,J=1,K=2,L=3,M=4,N=0,ta=[[0,-1],[0,1],[-1,0],[1,0]],w=function(t){Jb(e,d);var r=Lb(e);function e(t,i,$,n,a,o,s,c){var l,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"enemy",v=arguments.length>9?arguments[9]:void 0;return Hb(this,e),(l=r.call(this,t,i,$,n,a,o,s,c,u,v)).speed=1,l.vx=0,l.vy=l.speed,l.validDirections=[],l.direction=N,l.hunt=Math.random()>=.45,l.want,e.all.push(ra(l)),l}return Ib(e,[{key:"findClosestDirection",value:function(t){var r,e=t.centerX-this.centerX,i=t.centerY-this.centerY;r=Math.abs(e)>=Math.abs(i)?e<=0?L:M:i<=0?J:K,this.validDirections.includes(r)&&(this.direction=r)}},{key:"changeDirection",value:function(t){this.validDirections=[],this.direction=N;var r=Math.floor(this.x/16),e=Math.floor(this.y/16);e>0&&j[e-1][r]===E&&this.validDirections.push(J);e<ja-2&&j[e+1][r]===E&&this.validDirections.push(K);r>0&&j[e][r-1]===E&&this.validDirections.push(L);r<ka-1&&j[e][r+1]===E&&this.validDirections.push(M);if(0!==this.validDirections.length){var i=this.validDirections.includes(J)||this.validDirections.includes(K),$=this.validDirections.includes(L)||this.validDirections.includes(M);if(i||$||1===this.validDirections.length){if(t&&this.hunt&&this.findClosestDirection(t),this.direction===N){var n=Math.floor(Math.random()*this.validDirections.length);this.direction=this.validDirections[n]}this.vx=this.speed*ta[this.direction-1][0],this.vy=this.speed*ta[this.direction-1][1]}}}},{key:"kill",value:function(t){e.all.splice(t,1),d.remove(this)}},{key:"isAtTileCorner",value:function(){return Math.floor(this.x)%16==0&&Math.floor(this.y)%16==0}},{key:"update",value:function(t){this.x+=this.vx,this.y+=this.vy,this.isAtTileCorner()&&this.changeDirection(t),this.animate()}}],[{key:"spawn",value:function(){var t;arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=Math.random()>=.5?{want:"taco",anims:Pb}:{want:"donut",anims:Qb};var r=Math.floor(Math.random()*z.all.length),i=z.all[r],$=new e(t.anims.DOWN.srcX,t.anims.DOWN.srcY,16,16,i.x,i.y,16,16,"enemy");$.want=t.want,$.anims=t.anims,$.currentAnim=t.anims.DOWN}}]),e}();Ob(w,"all",[]);var O=1,F=2,x=3,P=4,ua=5;var Rb=function(){function t(e,i){Aa(this,t),this.isMobile=i,this.player,this.points,this.state=F,this.gameMap=new Fb(16),this.maxEnemies=4,this.width=16*ka,this.height=16*ja,this.maxWidth=3*this.width,this.maxHeight=3*this.height,this.canvas=e,this.ctx=e.getContext("2d"),this.canvas.height=this.height,this.canvas.width=this.width,this.tick=0,this.intervalId=null}return Ba(t,[{key:"init",value:function(){var t=this;g.spawn(),this.player=new Qa(0,0,16,16,80,176,16,16,"player",k.DOWN),this.points=0,this.intervalId=setInterval(function(){w.all.length<t.maxEnemies&&w.spawn()},2e3),this.isMobile&&document.querySelector(".mobile-controls").classList.remove("hide"),this.state=x}},{key:"reset",value:function(){d.all=[],g.all=[],w.all=[],clearInterval(this.intervalId),this.state=O}},{key:"resize",value:function(){var t=window.innerWidth,e=window.innerHeight,i=this.width/this.height;t/e>i?((e=16*Math.floor(.9*e*16))>this.maxWidth&&(e=this.maxHeight),t=Math.floor(e*i)):((t=16*Math.floor(.9*t/16))>this.maxWidth&&(t=this.maxWidth),e=Math.floor(t/i)),this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(e,"px"),this.ctx.imageSmoothingEnabled=!1}},{key:"update",value:function(){this.state===x?this.handleCollisions():this.state===O?this.init():this.state===ua&&this.reset()}},{key:"handleCollisions",value:function(){var t,e=this;this.player.update(this.canvasHeight,this.canvasWidth),I.all.forEach(function(t){e.player.handleRectangleCollision(t),w.all.forEach(function(e){return e.handleRectangleCollision(t)})}),z.all.forEach(function(t){return e.player.handleRectangleCollision(t)}),this.player.x>=48&&this.player.x<=128&&this.player.y>=128&&this.player.y<=144&&D.all.forEach(function(t){e.player.isHolding&&e.player.itemHeld.type===t.type&&e.player.handleRectangleCollision(t)}),g.all.forEach(function(i){e.player.isCollidedWithFood(i)&&(i.isCarried||H(R),e.player.isHolding?e.player.itemHeld.type!==i.type&&(t=g.destroy(),i.isCarried=!0,e.player.itemHeld=i):(i.isCarried=!0,e.player.isHolding=!0,e.player.itemHeld=i)),i.isCarried&&(i.x=e.player.x+e.player.w/2-i.w/2,i.y=e.player.y-i.h+2)}),w.all.forEach(function(i,a){i.update(e.player),i.isCollidedAtCenter(e.player)&&(e.player.isHolding&&e.player.itemHeld.type===i.want?(H(Q),i.kill(a),t=g.destroy(),e.player.isHolding=!1,e.player.itemHeld=null,e.points++):(H(S),e.state=P))}),g.all.length<2&&t&&("donut"===t.type?g.createDonut():g.createTaco())}},{key:"draw",value:function(t){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.fillStyle="white",this.drawUI(t),this.state===x&&this.drawPlay(t)}},{key:"drawUI",value:function(t){this.ctx.strokeStyle="white",this.ctx.drawImage(t,0,16,16,16,this.width/2+4,this.height-16,16,16),this.ctx.drawImage(t,275,19,9,9,this.width/2+20,this.height-11,9,9),this.ctx.drawImage(t,275,8,10,7,this.width/2+32,this.height-10,10,7),this.ctx.drawImage(t,128,16,16,16,this.width-44,this.height-16,16,16),this.ctx.drawImage(t,275,19,9,9,this.width-28,this.height-11,9,9),this.ctx.drawImage(t,259,6,10,10,this.width-16,this.height-12,10,10),this.displayScore()}},{key:"drawPlay",value:function(t){var e=this;this.gameMap.draw(this.ctx,t),d.all.forEach(function(i){return i.draw(e.ctx,t)}),this.ctx.font="12px Monospace"}},{key:"displayScore",value:function(){this.ctx.textBaseline="bottom",this.ctx.fillText("Score:".concat(this.points),0,this.height-2)}},{key:"canvasHeight",get:function(){return this.canvas.height}},{key:"canvasWidth",get:function(){return this.canvas.width}},{key:"tileSize",get:function(){return 16}}]),t}();var Sb={};Sb="404_spritesheet_compressed.c38760c1.png";var Tb={};Tb="die.fa24943d.wav";var Ub={};Ub="pickup.d4922ed1.wav";var Vb={};Vb="success.1c795845.wav";var Wb=C(Vb);var Q=new Audio(Wb.d);m.success=Q;var Xb=C(Ub);var R=new Audio(Xb.d);m.pickup=R;var Yb=C(Tb);var S=new Audio(Yb.d);m.die=S;var Zb,y,G=!!(navigator.userAgent.toLowerCase().match(/mobile/i)||navigator.userAgent.toLowerCase().match(/tablet/i)||navigator.userAgent.toLowerCase().match(/android/i)||navigator.userAgent.toLowerCase().match(/iphone/i)||navigator.userAgent.toLowerCase().match(/ipad/i)),b=new Rb(document.getElementById("canvas"),G),va=document.querySelector("body"),A=document.getElementById("bg").getContext("2d"),$b=k.UP,_b=k.UP_CARRY,ac=k.DOWN,bc=k.DOWN_CARRY,cc=k.LEFT_SIDE,dc=k.LEFT_SIDE_CARRY,ec=k.RIGHT_SIDE,fc=k.RIGHT_SIDE_CARRY,gc=document.querySelectorAll("button"),T=new Image;function U(){b.state===F||b.state===P?(cancelAnimationFrame(Zb),window.addEventListener("touchstart",W,{passive:!1}),window.addEventListener("touchend",V,{passive:!1}),document.querySelector(".mobile-controls").classList.add("hide"),b.state===F?xa("kill.exe not found","".concat(G?"Tap":"Press [SPACEBAR]"," to Start"),jc(G)):xa("Oops! You've Been Eaten!","".concat(G?"Tap":"Press [SPACEBAR]"," to Try Again"),"Final Score: ".concat(b.points))):(window.removeEventListener("touchstart",W,{passive:!1}),window.removeEventListener("touchend",V,{passive:!1}),b.update(),b.draw(T),Zb=requestAnimationFrame(U))}function hc(){for(var e=0;e<window.innerWidth;e+=32)for(var $=0;$<window.innerHeight;$+=32){var a=Math.floor(Math.random()*window.innerWidth)+1,r=Math.floor(Math.random()*window.innerHeight)+1;A.fillStyle="white",A.fillRect(a,r,1,1)}}function wa(){A.canvas.style.width="100%",A.canvas.style.height="100%",A.imageSmoothingEnabled=!1}function ic(e,$){e.removeChild($)}function jc(e){return"\n    You are a defense robot tasked with stopping an alien invasion, but your kill.exe file is missing. In order to get the aliens to leave you have to give them what they want: food!\n\n    Make sure to bring the right food to each alien or the food will be you!\n\n    Controls: ".concat(e?"Arrow Buttons":"WASD | ZQSD | Arrow Keys","\n  ")}function xa(e,$,a){b.canvas.style.display="none";var r=document.createDocumentFragment();y=document.createElement("div"),r.appendChild(y),y.classList.add("text-screen");var t=document.createElement("h1");t.innerText=e;var n=document.createElement("h3");if(n.innerText=$,y.appendChild(t),a){var o=document.createElement("p");o.innerText=a,y.appendChild(o)}y.appendChild(n),va.appendChild(r)}function ya(){ic(va,y),b.canvas.style.display="block",Zb=requestAnimationFrame(U),b.state===F?b.state=O:b.state===P&&(b.state=ua)}function B(e,$){b.state===x&&(b.player.movement[$]=!1)}function kc(e){return 32===e?"spacebar":38===e||90===e||87===e?"up":39===e||68===e?"right":40===e||83===e?"down":37===e||65===e||81===e?"left":void 0}function lc(e){return e||"spacebar"}function za(e){"up"===e&&(b.player.movement.up=!0,b.player.currentAnim=b.player.isHolding?_b:$b),"right"===e&&(b.player.movement.right=!0,b.player.currentAnim=b.player.isHolding?fc:ec),"down"===e&&(b.player.movement.down=!0,b.player.currentAnim=b.player.isHolding?bc:ac),"left"===e&&(b.player.movement.left=!0,b.player.currentAnim=b.player.isHolding?dc:cc)}function V(e,$){e.cancelable&&e.preventDefault(),$&&B(e,$)}function W(e,$){e.cancelable&&e.preventDefault();var a=lc($);b.state===x?za(a):"spacebar"===a&&ya()}var mc=C(Sb);T.src=mc.d,gc.forEach(function(e){var $=e.id.split("-")[0];e.addEventListener("touchstart",function(e){return W(e,$)},{passive:!1}),e.addEventListener("touchend",function(e){return V(e,$)},{passive:!1})}),window.addEventListener("keydown",function(e){var $=kc(e.keyCode);b.state===x?za($):"spacebar"===$&&ya()}),window.addEventListener("keyup",function(e){38!=e.keyCode&&90!=e.keyCode&&87!=e.keyCode||B(e,"up"),39!=e.keyCode&&68!=e.keyCode||B(e,"right"),40!=e.keyCode&&83!=e.keyCode||B(e,"down"),37!=e.keyCode&&65!=e.keyCode&&81!=e.keyCode||B(e,"left")}),window.addEventListener("load",function(){hc(),b.resize(),wa(),Q.load(),R.load(),S.load(),window.addEventListener("resize",function(){b.resize(),wa()},!1)},!1),T.addEventListener("load",function(){Zb=requestAnimationFrame(U)},!1);if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=m}else if(typeof define==="function"&&define.amd){define(function(){return m})}m.__esModule=true;return{"HJDO":m};});