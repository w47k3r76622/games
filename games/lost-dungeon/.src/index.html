<meta name="viewport" content="width=device-width,initial-scale=1"><style>body{margin:0}.h{display:none}.t,#i,#c,#s{display:inline-block}a,#s{color:#ff8;text-shadow:#fff 0 0 8px}.r1{color:#f66}.r2{color:#66f}.r3{color:#6f6}#h,.t{text-align:center}h1{padding:5%}h2{margin:1%}#i{overflow:auto;width:33%;white-space:normal}#i,#c{height:100%}#p,#h{width:100%;min-height:100%;white-space:nowrap}#s{width:100%}#c{width:66%;margin-right:1%}.t{border:.5vw solid #fd0;margin:.5vw;overflow:hidden;width:9vw;height:9vw}</style><body bgcolor="#333"><div id="h"><a id="n" href="#"><h1>New Game</h1></a><div id="e"></div></div><div id="p" class="h"><canvas id="c"></canvas><div id="i"><div id="s"></div></div></div><script>var _;function aa(a,b,c){a.jb=ba.getElementById(a.kb);a.jb.removeAttribute("class");a.lb=b;z(c,(b,a)=>{ca.addEventListener(b,a,{passive:!1})});a.yb=c}function da(){this.jb.setAttribute("class","h");z(this.yb,(a,b)=>{ca.removeEventListener(a,b,{passive:!1})})}var B=Math.PI,ea=2*B,G=B/2,I=Math.max,fa=Math.min,ca=window,ba=document,ha=Math.abs,ia=Math.floor,ja=Math.ceil,ka=Math.sin,la=Math.cos,ma=Math.random,oa=Math.sqrt,pa=ca.localStorage;function qa(a,b){a.push(b)}function ra(a,b,c,e){return void 0!=e?a.splice(b,c,e):a.splice(b,c)}var ua;ua=(a)=>{return (b)=>{return b/a}};function va(a,b){var c=a;return (a,d)=>{var e=c(a,d);e&&b&&(c=b(a),b=_,c&&(d?c(0,d):e=0));return e}}function wa(a){return (b,c)=>{return xa(a,(a)=>{return a(b,c)})}}function ya(a,b,c,e){return (d,g)=>{d-=a;if(g||d>=b)d=b;g=d>=b;var h=c(d);J(e,(b)=>{b(h)});return g}}var za;za=(a)=>{return (b)=>{b/=a;return b*b}};function Ba(a){return (b)=>{b=1-b/a;return 1-b*b}}function L(a,b){return (c)=>{c=b(c,a);Ca(c,a)}}function Da(a,b){return (c,e)=>{e||(e=Ea());J(a,(a,g)=>{e[g]=a+(b[g]-a)*c});return e}}function Fa(a,b,c,e,d){return (g,h)=>{h||(h=Ea());Ca(Ga(a,b,c,e+(d-e)*g),h);return h}}function Ha(a){return (b,c)=>{return a[b](b,c)}}function Ia(a,b,c,e){return{Sa:a,Ta:b,Ua:c,hb:e,cb:Ga(a,b,c,e)}}var Ja=[Ia(1,0,0,-G),Ia(1,0,0,G),Ia(0,1,0,0),Ia(0,1,0,B),Ia(0,0,1,G),Ia(0,0,1,G)],Oa="\u2020\u25cf\u25cf\u25cf\u2665\u25cb\u25cb\u25cb".split(""),Pa="#000 #800 #008 #080 #000 #800 #008 #080".split(" "),Qa=[0,-G,-G,-G,G,-G,-G,-G],Ra=[1,.1,.1,.1,1,.1,.1,.1],Sa=[0,1,1,1,0,.2,.2,.2],Ta=[5,-1,-1,-1,-5,1,1,1],Ua={1:{1:1,5:-1},2:{2:1,6:-1},3:{3:1,7:-1}},Wa="pick up to play  dice".split(" ");M(Wa)[4]="big";M(Wa)[4]="red";M(Wa)[4]="blue";M(Wa)[4]="green";var Xa={0:[[_,.7,.7,.7],[_,.8],[_,_,.8],[_,_,_,.8],[_,_,_,_,1],[1]],1:[[.75,0,_,_,_,_,_,.1],[_,.5,_,_,_,_,_,-.1]],2:[[1,_,_,_,_,.3],[_,_,.5,_,.7,-.1],[_,_,.6]],3:[[.8,_,_,_,_,_,.1],[_,_,_,.6,.8,_,-.1],[_,_,_,.6,_,_,-.1]]},ab=["#fff","#faa","#aaf","#afa"],bb=["#f6b","#f00","#000"],cb=[0,1,2],db=[_,"!","\u2665"],eb=[_,{upper:"#0f0",lower:"#afa"},{upper:"#f6c",lower:"#f00"}],fb=[_,["carry","more"],["health","up"]],gb=[0,1,2,3],hb=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}],ib=M(hb);jb(ib,[{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}]);var lb=[0,-G,B,G],mb=[1,2,3];function nb(){return{1:0,2:0,3:0}}var ob={},pb={},qb={},rb=B/6;sb(5,(a)=>{sb(5,(b)=>{var c;a&&b&&4>a&&4>b?c=pb:c=ob;var e=a+5*b;b={sa:a/5+-.4,ta:b/5+-.4,Ma:ma()*rb+rb};c[e]=b;qb[e]=b})});function tb(a,b){var c=ba.createElement(a);z(b,(b,a)=>{c.setAttribute(b,a)});return c}function ub(a){return ()=>{var b={kb:"h",bb:(c)=>{aa(b,c,{});var e=a.$a(),d=ba.getElementById("n");d.onclick=()=>{var b=a.sb(),d={u:0,gc:1,id:b.Ia++,B:1,O:{},a:[],G:1,K:3,Ea:0};c(vb,{Ya:b,M:{g:d,ua:{la:b.Ja,A:"10"}}})};d.setAttribute("href","#_"+e.eb);ba.getElementById("e").innerHTML=""},Wa:da};return b}}function Ca(a,b){for(var c=0;16>c;c++)b[c]=a[c]}function Ea(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function wb(a){var b=a[0],c=a[1],e=a[2],d=a[3],g=a[4],h=a[5],n=a[6],r=a[7],w=a[8],C=a[9],D=a[10],x=a[11],u=a[12],y=a[13],l=a[14];a=a[15];var m=b*h-c*g,f=b*n-e*g,k=b*r-d*g,t=c*n-e*h,A=c*r-d*h,v=e*r-d*n,p=w*y-C*u,F=w*l-D*u,W=w*a-x*u,O=C*l-D*y,H=C*a-x*y,P=D*a-x*l,E=m*P-f*H+k*O+t*W-A*F+v*p;if(E)return E=1/E,[(h*P-n*H+r*O)*E,(e*H-c*P-d*O)*E,(y*v-l*A+a*t)*E,(D*A-C*v-x*t)*E,(n*W-g*P-r*F)*E,(b*P-e*W+d*F)*E,(l*k-u*v-a*f)*E,(w*v-D*k+x*f)*E,(g*H-h*W+r*p)*E,(c*W-b*H-d*p)*E,(u*A-y*k+a*m)*E,(C*k-w*A-x*m)*E,(h*F-g*O-n*p)*E,(b*O-c*F+e*p)*E,(y*f-u*t-l*m)*E,(w*t-C*f+D*m)*E]}function xb(a,b){var c;c||(c=Ea());sb(16,(e)=>{var d=e>>2,g=e%4,h=0;sb(4,(c)=>{h+=a[d+4*c]*b[c+4*g]});c[d+4*g]=h});return c}function Db(a){var b=Ea();J(a,(a)=>{b=xb(b,a)});return b}function Ga(a,b,c,e){var d=ka(e);e=la(e);var g=1-e;return[a*a*g+e,b*a*g-c*d,c*a*g-b*d,0,a*b*g+c*d,b*b*g+e,c*b*g-a*d,0,a*c*g+b*d,b*c*g+a*d,c*c*g+e,0,0,0,0,1]}function Eb(a){return Ga(1,0,0,a)}function N(a){return Ga(0,1,0,a)}function Fb(a){return Ga(0,0,1,a)}function Gb(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]}function Q(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function Hb(a){var b=0*a[3]+0*a[7]+0*a[11]+a[15];b=b||1;return[(0*a[0]+0*a[4]+0*a[8]+a[12])/b,(0*a[1]+0*a[5]+0*a[9]+a[13])/b,(0*a[2]+0*a[6]+0*a[10]+a[14])/b]}function Ib(a,b){for(var c=a.H*a.V,e=0;e<c;e++){var d=e%a.H,g=ia(e/a.H),h=a.o[d][g];if(b(h,d,g))return h}}function Jb(a,b){var c;Ib(a,(a,d,g)=>{if(a.g==b)return c={x:d,y:g},!0});return c}function Kb(a,b,c,e,d,g){var h=0;J(hb,(n)=>{var r=e+n.x;n=d+n.y;0<=r&&r<b&&0<=n&&n<c&&(r=g(a[r][n],r,n))&&(h+=r)});return h}function Lb(a,b,c,e){var d,g;z(a,(a,n)=>{if(!b.a[a]){var h=!d;if(!h){h=c-n.sa;var w=e-n.ta,C=c-d.sa,D=e-d.ta;h=h*h+w*w<C*C+D*D}h&&(d=n,g=a)}});return g}function Mb(a,b){function c(a,b,c,d){var f=m.ja(a);a=[b];b||(a=mb);J(a,(a)=>{var b=I(0,fa(f[a],c));d[a]-=b;c-=b});return 0<c}function e(a,b){var f=a.u;a.u=b;return{D:[{m:3,i:{g:a,Ab:f,Tb:b}}]}}function d(f){var c=f.u,d=hb[c],e=Jb(b,f),v=e.x+d.x;d=e.y+d.y;var p=0<=v&&0<=d&&v<b.H&&d<b.V;c={Jb:c,Bb:e.x,Cb:e.y,g:f};if(p){var F=b.o[v][d];if(p=0!=F.h&&!F.g){var l=b.o[e.x][e.y];var n=g(f,e.x,e.y);l.g=_;F.g=f;l=f.O;f.O=nb();l={g:f,oa:l,Ha:m.ja(f)};2==F.h?(n=[{m:8,i:{g:f}}],1==f.B&&n.push({m:7,i:{Pb:vb,Ob:{Ya:a,M:{g:f,ua:{la:a.Ja,A:F.A}}}}}),e=[{m:6,i:{g:f,I:e.x,J:e.y},F:n}]):e=h(f,n);if(F.C){n=void 0;switch(F.C){case 1:f.K++;n=[{m:15,i:{$b:1,K:f.K}}];break;case 2:f.G++,n=[{m:13,i:{Z:1,Aa:f.G,g:f}}]}F.C=0;jb(n,e);e=[{m:14,i:{g:f,ac:F,T:v,U:d},F:n}]}l=[{m:1,i:c,F:e},{m:12,i:l}]}}p||(l=[{m:2,i:c}]);return{Ga:p,D:l}}function g(a,c,d){if(a){var f=a.G;z(b.o[c][d].a,(a,b)=>{b&&J(b.a.da[b.X],(a)=>{0==a?f--:4==a&&f++})});return I(0,fa(f,a.G))}}function h(a,c){var f=[];if(!a.Y){var d=Jb(b,a),e=g(a,d.x,d.y);if((c=e-c)||!e){var k=void 0;a.Y=!e;a.Y&&(d=b.o[d.x][d.y],k=[{m:8,i:{g:a}}],J(a.a,(b)=>{b&&(b=C(a,b.j,1,1),b.R||(b=D(a,b))&&b.D&&jb(f,b.D))}),d.g=_);qa(f,{m:13,i:{g:a,Z:c,Aa:e},F:k})}}return f}function n(a,b){if(a.ma!=b){a.ma=b;var f=[{m:b?4:5,i:{g:a}}]}return{D:f}}function r(a,d){var f=Jb(b,a),e;if(f){f=ha(f.x-d.I)+ha(f.y-d.J);var k=b.o[d.I][d.J],p=k.a[d.ia];if(1>=f)if(p&&p.a.j==d.j){var g=a;k.g&&p.a.na!=a.id&&(g=k.g,Ib(b,(a,b,f)=>{a.g&&a.g.id==p.a.na&&1>=ha(b-d.I)+ha(f-d.J)&&(g=a.g)}));for(;g.a.length<g.K;)g.a.push(_);var h;J(g.a,(a,b)=>{_!=h||a||(h=b)});if(_!=h){var l=nb();f||J(p.a.da[p.X],(a)=>{z(Ua[a],(a,b)=>{0<b&&(l[a]+=b)})});g!=a&&(f?e=4:c(a,p.a.$,p.a.P+1,l)&&(e=5));var H={a:p.a,Fa:p.X,ba:d.ia,T:d.I,U:d.J,oa:l,za:a,Na:g,ea:h}}else e=2}else e=1;else e=4}else e=6;H||(H={});H.R=e;return H}function w(a){if(!a.R){var c=b.o[a.T][a.U];var f=g(c.g,a.T,a.U);c.a[a.ba]=_;a.Na.a[a.ea]=a.a;a.a.na=a.Na.id;z(a.oa,(b,c)=>{a.za.O[b]+=c});var d=void 0;c.g&&(d=h(c.g,f));c=[{m:10,i:{g:a.Na,a:a.a,ea:a.ea,T:a.T,U:a.U,ba:a.ba,Fa:a.Fa},F:[{m:12,i:{g:a.za,oa:a.oa,Ha:m.ja(a.za)},F:d}]}]}return{D:c}}function C(a,d,e,g){var f=Jb(b,a);if(e){e=f.x;var k=f.y;var h=a.u;f=pb}else h=hb[a.u],e=f.x+h.x,k=f.y+h.y,h=(a.u+2)%4,f=ob;var l={fa:e,ga:k},m;if(0<=e&&0<=k&&e<b.H&&k<b.V){e=b.o[e][k];if(g||!e.g)f=qb;0!=e.h?(h=hb[h],f=Lb(f,e,h.x,h.y),_!=f?(l.pa=f,xa(a.a,(a,b)=>{a&&a.j==d&&(l.a=a,l.aa=b)}),l.a?e.g&&!g&&(g=nb(),c(a,l.a.$,l.a.P,g)&&(m=4),l.ib=g):m=2):m=3):m=1}l.R=m;return l}function D(a,c){var f=!c.R;if(f){var d=ia(6*ma());var e=b.o[c.fa][c.ga],k=g(e.g,c.fa,c.ga);e.a[c.pa]={a:c.a,X:d};a.a[c.aa]=_;var l=void 0;(e=e.g)&&(l=h(e,k));d={m:11,i:{g:a,a:c.a,aa:c.aa,Sb:d,fa:c.fa,ga:c.ga,pa:c.pa},F:l};c.ib?(c=c.ib,z(c,(b,c)=>{a.O[b]+=c}),d=[{m:12,i:{g:a,Ha:m.ja(a),oa:c},F:[d]}]):d=[d]}return{Ga:f,D:d}}var x=[],u=0,y=[],l;Ib(b,(a)=>{a.g&&x.push(a.g)});var m={Wb:()=>{if(x.length){var a=x[u];if(a.Y)ra(x,u,1),u%=x.length;else{var c=void 0;if(1==a.B){if(l=0==y.length,!l){var g=ra(y,0,1)[0];switch(g.ka){case 3:var h=n(a,1);break;case 1:h=a.ma?n(a):d(a);break;case 2:var m=a.u;g=g.ca;_!=g.va&&(m=g.va);for(m+=g.La;0>m;)m+=4;h=e(a,m%4);break;case 4:h=w(r(a,g.ca));break;case 5:h=D(a,C(a,g.ca.j,a.ma))}}}else{var p=Jb(b,a);c=1;var F=0;J(a.a,(a)=>{a&&F++});J(hb,(c,d)=>{var f=p.x+c.x,g=p.y+c.y;if(0<=f&&0<=g&&f<b.H&&g<b.V){var k=b.o[f][g];if(k.g||F==a.K){if(!k.g||1==k.g.B)if(k.g&&d!=a.u)h=e(a,d);else{var l=[];J(a.a,(b)=>{if(b){var c=0,d=0;J(b.da,(b)=>{J(b,(b)=>{var e=a.xa.fb[b];e&&(c+=e);d+=Ta[b]})});qa(l,{a:b,qa:c,Ka:0<d})}});var m=[],H={};z(b.o[p.x][p.y].a,(a,b)=>{b&&(m.push(b),H[b.a.j]={j:b.a.j,I:p.x,J:p.y,ia:a})});z(k.a,(a,b)=>{b&&(m.push(b),H[b.a.j]={j:b.a.j,I:f,J:g,ia:a})});J(m,(b)=>{var c=0,d=0,e=b.a,f=0,g=0,k=1;J(e.da,(e,h)=>{J(e,(e)=>{var l=a.xa.fb[e];k=k&&Ua[e];h==b.X?(c+=l,g+=a.xa.qb[e]):d+=l;f+=Ta[e]})});d/=5;var h=k?0:d-c;var m=H[e.j];p.x==m.I&&p.y==m.J&&(h+=g);e.na!=a.id&&(h=-h);qa(l,{a:e,qa:h,Ka:0<f,pb:1})});l.sort((a,b)=>{return b.qa-a.qa});Nb(R,l,a.xa.Mb);J(l,(b)=>{var c=b.a;if(!h&&0<=b.qa)if(b.pb)b=r(a,H[c.j]),h||b.R||(h=w(b));else if(!b.Ka||k.g)b=C(a,c.j,!b.Ka),b.R||(h=D(a,b))})}}else z(k.a,(b,c)=>{!h&&c&&(b=r(a,{j:c.a.j,I:f,J:g,ia:b}),b.R||(h=w(b),h.Ga=!0))})}})}if(h&&h.D){c=h.Ga;var W=h.D}c&&(u=(u+1)%x.length)}}else l=1;return{mb:l,D:W}},Lb:(a)=>{var b=l;l=0;y.push(a);return b},ja:(a)=>{var c=nb(),d=Jb(b,a);if(d){var e=b.o[d.x][d.y];z(a.O,(a,b)=>{c[a]+=b;z(e.a,(b,d)=>{d&&J(d.a.da[d.X],(b)=>{var d=Ua[a];d&&(b=d[b],0>b&&(c[a]+=b))})})})}return c},Fb:(a)=>{var c=Jb(b,a);return g(a,c.x,c.y)}};return m}function Ob(){return (a,b,c,e,d,g,h)=>{function n(){var a=b(e/3)+2,f=b(d/3)+2,g=b(e-a-3),h=b(d-f-3);if(!Ib(y,(b,c,d)=>{return 1==b.h&&c>=g-3&&d>=h-3&&c<g+a+3&&d<h+f+3})){var k=""+u,l=b(1*(a+f))+1;x[k]=l;for(l=g;l<g+a;l++)for(var m=h;m<h+f;m++){var p=c[l][m];p.h=1;p.A=k}}u--}function r(a,b,f){return Kb(c,e,d,a,b,(a)=>{var b=x[a.A];f&&b&&x[a.A]--;return 1!=a.h||b?0:1})}function w(a,c,d,e,f){var g=Xa[d];c=g[c%g.length];var h=[];J(c,(a,b)=>{_!=a&&h.push(b)});for(var k;e;){g=b(h.length);g=h[g];var l=c[g];l<=a&&(!k||k.Va<l)&&(!d&&f&&Ua[g]&&g!=f&&(g=0),k={symbol:g,Va:l});e--}return k}function C(a){return I(0,ia((a-.4)/2-.1*g))}function D(c,d,e,f,g){if(!C(c)){var h=f;f=0}var k=[],l=1,m=0;sb(3,(a)=>{var g=[];a=2==a?c:b(c);a=fa(d,a);c-=a;for(m+=a;4>g.length&&0<a;){var p=w(a,e,f,ja(2*a),h);l=l&&!p;if(p)a-=p.Va,g.push(p.symbol);else break}jb(k,[g,g])});var p=C(m);if(!l)return{j:a.Ia++,P:p,na:g,da:k,$:f}}for(var x={},u=b(.1*e*d),y={o:c,H:e,V:d};0<u;)n();for(var l=[{x:e-1,y:d-1,ra:M(gb)}];l.length;){var m=l[0];c[m.x][m.y].h=1;var f=void 0;.4<b()&&(f=m.gb);m.gb=_;_==f&&(f=b(m.ra.length));var k=ra(m.ra,f,1)[0];m.ra.length||ra(l,0,1);var t=hb[k];k=m.x+t.x;m=m.y+t.y;0<=k&&k<e&&0<=m&&m<d&&2>r(k,m)&&(r(k,m,1),ra(l,0,0,{x:k,y:m,ra:M(gb),gb:f}))}var A=[],v=[];Ib(y,(a,b,c)=>{var d={x:b,y:c};1==r(b,c)&&A.push(d);1==a.h&&v.push(d)});Nb(b,A);Nb(b,v);J(h,(a)=>{switch(a.h){case 2:do{var f=b(e);var g=b(d);var h=c[f][g]}while(0!=h.h||!r(f,g));break;default:A.length?(g=ra(A,0,1)[0],f=g.x,g=g.y):(f=b(e),g=b(d)),h=c[f][g]}h.h=a.h;h.A=a.A;h.C=a.C});xa(A,(a)=>{var f;1==r(a.x,a.y)&&.5<b()&&J(hb,(b)=>{var g=a.x+b.x,h=a.y+b.y,k=a.x-b.x;b=a.y-b.y;0<=g&&g<e&&0<=k&&k<e&&0<=h&&h<d&&0<=b&&b<d&&(k=c[k][b],g=c[g][h],0==k.h&&1==g.h&&(f=k.h=1))});return f});b(4);b(4);var p=I(0,g-1);p+=b(oa(p));xa(v,(d)=>{if(p&&(d=c[d.x][d.y],!d.g)){var e=b(g-1)+1,f=ia(oa(e));e=e-b(e>>1)+1;var h=e-b(e>>1),k=[],l=[];J(Ra,(a,c)=>{a+=a*b();l.push(a);c=Sa[c]+b()/2;k.push(c)});var m=[],n=a.Ia++,u=void 0,r=void 0;2>=g?(h=3,u=r=0):(3<h?r=b(h):r=4,u=b(4));for(var v=void 0;h;){h--;var t=r+h,w=b(1.7*h)+2,A=I(1,C(w)+ia(oa(g)-1));t=D(w,A,t,u,n);v=v||t.P;t.P&&t.$&&(k[t.$]+=.4*t.P);t&&m.push(t)}v&&(e++,h=D(2.4,2,u,0,n),m.push(h));f={B:2,a:m,K:e+1,O:nb(),u:b(4),G:f,id:n,xa:{qb:k,fb:l,Mb:b()/g},Ea:1};d.g=f;p--}return p});var F=fa(b(2),A.length),W=b(oa(g))+3,O=3+g;jb(A,v);J(A,(a)=>{a=c[a.x][a.y];for(var d=fa(W,I(b(oa(g)),1));0<d&&1==a.h&&!a.g&&!a.C;){if(3>g){var e=0;var f=2.4;var h=1;F=0}else O=b(99),e=b(4),h=oa(b(g))+1,f=1+b(2*h),h=1+h;F&&(F--,a.h=4,f+=2,h++);e=D(f,h,O,e);O++;e&&(f=Lb(qb,a,0,0),a.a[f]={a:e,X:b(6)});d--}W--})}}function Pb(a,b,c){return (e,d)=>{function g(a){na&&(na(0,1),na=_);X.Y?La.lb(Qb):Ya.Lb(a)}function h(a,b){var c=ta.clientHeight;f(ta.clientWidth,c,()=>{x(1);var d=new Uint8Array(4);K.readPixels(a,c-b,1,1,K.RGBA,K.UNSIGNED_BYTE,d);var e=0;sb(3,(a)=>{e=e<<8|d[a]});Ib(p,(a,b,c)=>{var d,f;for(f in a.a)if(d=a.a[f])if(d=d.a.j==e)return g({ka:4,ca:{j:e,I:b,J:c,ia:f}}),d;b=a.g;if(b==X)for(a=0,b=b.a;a<b.length;a++)if(c=(c=b[a])&&c.j==e)return c;g({ka:0})})})}function n(a,b){if(b){var c=[];J(b,(b)=>{var d=[];z(S,(c,e)=>{(c=e.rb(a,b))&&d.push(c)});switch(b.m){case 8:delete S[b.i.g.id];break;case 7:Za=b.i}var e=wa(d);b.F&&(e=va(e,(a)=>{return n(a,b.F)}));c.push(e)});var d=wa(c)}return d}function r(a){na?na(a)&&(na=_):w(a);z(S,(b,c)=>{c.update(a)});x();Za&&La.lb(Za.Pb,Za.Ob)}function w(a){var b=Ya.Wb();X.Y&&(A.Eb=1);(na=n(a,b.D))||b.mb||X.Y||w(a)}function C(){var a=ta.clientWidth,b=ta.clientHeight;ta.width=a;ta.height=b;K.viewport(0,0,a,b);var c=a/b;a=.1*Math.tan(B/3/2);b=-a;var d=b*c;c=a*c;yb=[.2/(c-d),0,0,0,0,.2/(a-b),0,0,(c+d)/(c-d),(a+b)/(a-b),-100.1/99.9,-1,0,0,-20/99.9,0]}function D(){var a=K,b=R(3)+1;R(6);var c=Rb(),d=2*(R(2)+2),e=2*(R(3)+2),f=R(4)+1,g=R(4)+1;d>=e&&(d=e-1);var h=Sb(a,Tb(0));Ma.push(h);na=_;S={};Ub(p.H,p.V,(k,m,T)=>{Ka=T;T=p.o[k][m];var n={};if(0!=T.h){var t=void 0,r=void 0,v=0,Y=c.Pa;switch(T.h){case 2:t=["\u25b2"];r=["\u25bc"];break;case 4:var w=[Oa[R(Oa.length)]];sb(d*e/2,()=>{w.push(" ")});Nb(R,w);r=t=w;v=B;Y=c.Oa}t=Sb(a,Vb(R,256,256,d,e,.5,0,Y,c.Oa,b,c.wa,t));r=Sb(a,Vb(R,256,256,d,e,.5,.5,Y,c.Oa,b,c.wa,r));if((Y=0==k||0==p.o[k-1][m].h)||v)n.w=Z([Q(-.5,.5,0),Fb(G+(Y?0:v)),N(G)],V,t,h);if((Y=k==p.H-1||0==p.o[k+1][m].h)||v)n.e=Z([Q(.5,.5,0),Fb(-G+(Y?0:v)),N(-G)],V,t,h);if((Y=0==m||0==p.o[k][m-1].h)||v)n.n=Z([Q(0,.5,-.5),Eb(-G+(Y?0:v))],V,r,h);if((Y=m==p.V-1||0==p.o[k][m+1].h)||v)n.s=Z([Q(0,.5,.5),Eb(G+(Y?0:v)),N(B)],V,r,h);v=Sb(a,Vb(R,256,256,1,1,0,0,c.floor,c.floor,3*b,c.wa,3==T.h?[p.la]:_));2==T.h?(n.W=Z([Q(.5,-.5,0),Fb(-G),N(G)],V,r),n.E=Z([Q(-.5,-.5,0),Fb(G),N(-G)],V,r),n.N=Z([Q(0,-.5,.5),Eb(G)],V,t),n.S=Z([Q(0,-.5,-.5),Eb(-G),N(B)],V,t)):n.f=Z([N(B/2*R(4))],V,v);Y=Sb(a,Vb(R,256,256,f,g,1/(R(f)+1),0,c.Pa,c.Pa,b,c.wa));3==T.h?(n.W=Z([Q(.5,1.5,0),Fb(-G),N(G)],V,r),n.E=Z([Q(-.5,1.5,0),Fb(G),N(-G)],V,r),n.N=Z([Q(0,1.5,.5),Eb(G)],V,t),n.S=Z([Q(0,1.5,-.5),Eb(-G),N(B)],V,t)):n.c=Z([Q(0,1,0),Eb(B)],V,Y);var A=void 0;if(T.C){A=eb[T.C];A=Vb(R,64,256,1,2,0,0,A.upper,A.lower,10,"#fff",[db[T.C]," "]);A=Sb(a,A);var K=.14;2==T.h&&(K+=.3);K=Z([Q(0,K,0)],Cb,A);n.b=K}jb(Ma,[t,r,Y,v,A])}T.g&&(K=u(T.g,k,m),S[T.g.id]=K,1==T.g.B&&(sa=K));z(T.a,(a,b)=>{if(b){var c=qb[a];var d=b.a;var e=c.sa,f=c.ta;b=b.X;c=N(c.Ma);b=M(Ja[b].cb);d=l(d,[Q(e,q,f),c,b]);n[a]=d}});return Wb([Q(k,0,m)],n)});x()}function x(a){var b=K;b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);if(sa){var c=[yb,sa.v,wb(sa.ob),wb(sa.nb)];Ib(p,(d,e,f)=>{Ka[e][f].L(b,c,a)});z(S,(d,e)=>{e.L(b,c,a)})}}function u(a,b,c){var d=N(lb[a.u]);b=Q(b,.5,c);var e={};J(a.a,(a,b)=>{if(a){var c=l(a,[]);e[a.j]={ya:c,index:b}}});c=a.G;for(var f=[];c;){c--;var g=y(a.Ea);f.push(g)}return Xb(a,b,d,f,e,Ka,m,q,Ya.ja(a),Ya.Fb(a),t)}function y(a){a=Vb(()=>{return 0},32,64,1,1,0,0,"#aaa",bb[a],0,"#fff");a=Sb(K,a);Ma.push(a);return Z([],Bb,a)}function l(a,b){var c=Yb(kb,a);c=Sb(K,c);Ma.push(c);a=Sb(K,Tb(a.j));return Z(b,Ab,c,a)}function m(){var a=sa,b=a.g;Na.innerHTML="";$a.innerHTML="";Na.appendChild($a);for(var c=a.Da;0<c;){c--;var d=fa(Na.clientWidth,Na.clientHeight)>>2,e=a.ab[c];e||(e=y(b.Ea),a.ab[c]=e);d=k(e,d,d,q,0,0);$a.appendChild(d)}J(mb,(b)=>{var c=a.Xa[b];c||(c=0);b=tb("h2",{"class":"r"+b});for(var d="\u25ba ";c;)0<c?(d+="\u25cf",c--):(d+="\u25cb",c++);b.innerText=d;$a.appendChild(b)});sb(b.K,(c)=>{var d=b.a[c];c=tb("div",{"class":"t"});Na.appendChild(c);var e=c.clientWidth,f=c.clientHeight;d&&(e=k(a.wb[d.j].ya,e,f,q,B/5,B/4),e.onclick=()=>{g({ka:5,ca:{j:d.j,na:b}})},c.appendChild(e))})}function f(a,b,c){var d=K,e=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,e);var f=d.createTexture();d.bindTexture(d.TEXTURE_2D,f);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,a,b,0,d.RGBA,d.UNSIGNED_BYTE,_);var g=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,g);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,a,b);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,f,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,g);d.viewport(0,0,a,b);c();d.bindFramebuffer(d.FRAMEBUFFER,_);d.deleteFramebuffer(e);d.deleteTexture(f);d.deleteRenderbuffer(g);C()}function k(a,b,c,d,e,g){var h=Zb(b,c);f(b,c,()=>{var f=b/(3*d);f=[[2/b,0,0,0,0,-2/c,0,0,0,0,.005,0,-1,1,0,1],Q(b/2,c/2,-50),[f,0,0,0,0,f,0,0,0,0,f,0,0,0,0,1],Eb(e),N(g)];var k=a.l;a.l=[];a.L(K,f,0);a.l=k;f=new Uint8Array(4*b*c);K.readPixels(0,0,b,c,K.RGBA,K.UNSIGNED_BYTE,f);k=h.getContext("2d");var l=k.createImageData(b,c);l.data.set(f);k.putImageData(l,0,0)});return h}var t={Gb:$b(),xb:$b(),vb:$b(),ub:$b(),Qb:$b(),ec:$b(),zb:$b()},A=d.Ya;if(d.M){var v=d.M.ua.la;if("x"==d.M.ua.A)return A.Eb=2,c(Qb,{dc:1})}else v=A.Kb;var p=void 0;if(!p){e=7+(v>>1);var F=e*e+v;e=e+R(e/4)-R(e/4);var W=ja(F/e),O=Ub(e,W,()=>{return{h:0,a:{}}}),H=[],P=I(1,ia(oa(v/2))),E=ia(oa(1+v/2));13==v&&(E=0,qa(H,{h:2,A:"x",Yb:1}));3>v?(F=cb[v],qa(H,{C:F,h:1,Nb:fb[F]})):(F=void 0,F=d.M.g.G<ia(v/4+1)?2:1,qa(H,{C:F,h:1}));sb(I(E,P),(a)=>{a<E&&H.push({h:2,A:""+(v+1)+""+a,C:void 0});a<P&&H.push({h:3,A:""+v+""+a,Nb:1==v?["find","a","way","out"]:_})});b(A,R,O,e,W,v,H);p=a.tb(A,e,W,O)}if(d.M){var Aa=0,U=0;e=Ib(p,(a,b,c)=>{a.A==d.M.ua.A&&(Aa=b,U=c)});e=p.o[Aa][U];var X=d.M.g;e.g=X;var Va=[{m:9,i:{g:X}}]}else e=Ib(p,(a)=>{return a.g&&1==a.g.B}),X=e.g,X.ma=0;A.Kb=p.la;var Ka,S,sa,K,yb,na,zb,V,kb,Ab,q=.075,Bb,Cb,Ma=[],Za,Ya=Mb(A,p),ta=ba.getElementById("c"),Na=ba.getElementById("i"),$a=ba.getElementById("s"),La={kb:"p",bb:(a)=>{function b(a){zb=requestAnimationFrame(b);r(a)}var c,d,e,f,k;aa(La,a,{resize:()=>{C();m()},keydown:(a)=>{switch(a.keyCode){case 37:case 65:var b=2;var c={va:X.u,La:-1};break;case 38:case 87:b=1;break;case 39:case 68:b=2;c={va:X.u,La:1};break;case 40:case 83:b=3}g({ka:b,ca:c})},click:(a)=>{h(a.clientX,a.clientY)},touchstart:(a)=>{var b=a.touches[0];c=b.clientX;d=b.clientY;c<ta.width&&d<ta.height?(k=f=0,e=a.timeStamp,a.preventDefault()):e=0},touchmove:(a)=>{a=a.touches[0];f=a.clientX-c;k=a.clientY-d},touchend:(a)=>{if(e&&400>a.timeStamp-e)if(50>ha(f)+ha(k))h(c,d);else{if(ha(f)<ha(k))a=0<k?1:3;else{a=2;var b={va:X.u,La:0<f?-1:1}}g({ka:a,ca:b})}}});a=K=ta.getContext("webgl");a.clearColor(0,0,0,1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);var l=ac(a,bc,a.FRAGMENT_SHADER),p=ac(a,cc,a.VERTEX_SHADER),t=a.createProgram();a.attachShader(t,p);a.attachShader(t,l);a.linkProgram(t);a.useProgram(t);V=dc(a,t,[.5,0,.5,-.5,0,.5,.5,0,-.5,-.5,0,-.5],[0,2,1,2,3,1],[1,1,0,1,1,0,0,0]);l=[-q,-q,q,q,-q,q,q,q,q,-q,q,q,-q,-q,-q,-q,q,-q,q,q,-q,q,-q,-q,-q,q,-q,-q,q,q,q,q,q,q,q,-q,-q,-q,-q,q,-q,-q,q,-q,q,-q,-q,q,q,-q,-q,q,q,-q,q,q,q,q,-q,q,-q,-q,-q,-q,-q,q,-q,q,q,-q,q,-q];kb=[0,0,.25,0,.25,.5,0,.5,.25,.5,.25,0,.5,0,.5,.5,.5,0,.75,0,.75,.5,.5,.5,0,.5,.25,.5,.25,1,0,1,.25,1,.25,.5,.5,.5,.5,1,.5,.5,.75,.5,.75,1,.5,1];Ab=dc(a,t,l,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],kb);l=[0,.1*.8,0,.1*.2,.1,0,.06,.1,0,.1,.06,0,.1*.9,0,0,0,-.1,0,-.1*.9,0,0,-.1,.06,0,-.06,.1,0,-.1*.2,.1,0,0,.036,.02,.012,.06,.02,.036,.06,.02,.06,.036,.02,.054,0,.02,0,-.06,.02,-.054,0,.02,-.06,.036,.02,-.036,.06,.02,-.012,.06,.02,0,.036,-.02,.012,.06,-.02,.036,.06,-.02,.06,.036,-.02,.054,0,-.02,0,-.06,-.02,-.054,0,-.02,-.06,.036,-.02,-.036,.06,-.02,-.012,.06,-.02,0,0,.02,0,0,-.02];p=[];for(var v=0;v<l.length;)p.push((l[v]+.1)/.2,(l[v+1]+.1)/.2),v+=3;Bb=dc(a,t,l,[0,10,11,1,0,11,1,11,12,2,1,12,2,12,13,3,2,13,3,13,14,4,3,14,4,14,15,5,4,15,5,15,16,6,5,16,6,16,17,7,6,17,7,17,18,8,7,18,8,18,19,9,8,19,9,19,10,0,9,10,20,0,21,0,1,21,21,1,22,1,2,22,22,2,23,2,3,23,23,3,24,3,4,24,24,4,25,4,5,25,25,5,26,5,6,26,26,6,27,6,7,27,27,7,28,7,8,28,28,8,29,8,9,29,29,9,20,9,0,20,11,10,30,12,11,30,13,12,30,14,13,30,15,14,30,16,15,30,17,16,30,18,17,30,19,18,30,10,19,30,20,21,31,21,22,31,22,23,31,23,24,31,24,25,31,25,26,31,26,27,31,27,28,31,28,29,31,29,20,31],p);var u=[];sb(4,()=>{u.push(0,0,1,0,1,.5,1,1,0,1,0,.5)});Cb=dc(a,t,[-.02,.1,.02,.02,.1,.02,.02,0,.02,.08,-.14,.08,-.08,-.14,.08,-.02,0,.02,.02,.1,.02,.02,.1,-.02,.02,0,-.02,.08,-.14,-.08,.08,-.14,.08,.02,0,.02,.02,.1,-.02,-.02,.1,-.02,-.02,0,-.02,-.08,-.14,-.08,.08,-.14,-.08,.02,0,-.02,-.02,.1,-.02,-.02,.1,.02,-.02,0,.02,-.08,-.14,.08,-.08,-.14,-.08,-.02,0,-.02],[0,2,1,0,5,2,5,3,2,3,5,4,6,8,7,6,11,8,11,9,8,9,11,10,12,14,13,12,17,14,17,15,14,15,17,16,18,20,19,18,23,20,23,21,20,21,23,22,0,6,12,18,0,12,4,22,10,10,22,16],u);C();D();m();a=performance.now();w(a);b(a);na||(na=n(a,Va))},Wa:()=>{cancelAnimationFrame(zb);da.apply(La);J(Ma,(a)=>{a&&K.deleteTexture(a)});K=_}};return La}}function ec(a,b,c){jb(b,this.l);this.Ca(a,b,c);a=this.l.length;ra(b,b.length-a,a)}function Wb(a,b){var c={ha:b,L:ec,l:a,Ca:(a,b,g)=>{z(c.ha,(c,d)=>{d.L(a,b,g)})}};return c}function Xb(a,b,c,e,d,g,h,n,r,w,C){function D(a,b,c){return xb(Eb(a),Q(0,-b,-c))}function x(a){a%=ea;a>B&&(a-=ea);return a}function u(b,c,d,e){_==e&&(e=d);var f=x(2*c);return[Fb(x(c+ea*b/a.K)*d),Q(0,(.5-1.4*n)*e,0),Fb((-f+B/4)*d),Eb(B*d/4),N(B*d/4)]}var y=0,l={update:(a)=>{y=5E-4*a},rb:(m,f)=>{if(f.i&&f.i.g==a)switch(f.m){case 2:C.Qb(ma(),l.l);break;case 1:var k=f.i;f=hb[k.Jb];k=Q(k.Bb+f.x,.5,k.Cb+f.y);f=250;k=ya(m,f,za(f),[L(b,Da(M(b),k))]);break;case 3:f=f.i;k=lb[f.Ab];var t=lb[f.Tb];t=fc(t,k);f=250;k=ya(m,f,za(f),[L(c,Fa(0,1,0,k,t))]);break;case 4:f=250;k=ya(m,f,za(f),[L(l.v,Da(M(l.v),D(-B/3,.5,.3)))]);break;case 5:f=250;k=ya(m,f,za(f),[L(l.v,Da(M(l.v),D(-B/9,.3,.5)))]);break;case 6:t=600;C.zb(1,l.l);k=va(ya(m,t,za(t),[L(l.v,Da(M(l.v),D(-G,-.5,0)))]),(a)=>{return ya(a,600,Ba(600),[L(l.v,Da(M(l.v),D(-G,-1,0)))])});break;case 10:var r=f.i;k=g[r.T][r.U];var v=k.ha[r.ba];delete k.ha[r.ba];k=M(k.l);jb(k,v.l);k=Db(k);k=Hb(k);f=M(l.l);f=Db(f);f=Hb(f);t=Q(k[0]-f[0],n-f[1],k[2]-f[2]);f=qb[r.ba];var p=f.Ma,w=y;k=Db(u(r.ea,w,-1).reverse());var x=N(p);f=wb(c);var O=lb[a.u],H=Ea(),P=Ja[r.Fa],E=M(P.cb);v.l=[k,f,t,H,x,E];v.Ba=1;d[r.a.j]={ya:v,index:r.ea};var Aa=Q(0,0,0);C.ub(1,l.l);f=999;k=wa([ya(m,f,ua(f),[L(E,Fa(P.Sa,P.Ta,P.Ua,P.hb,0)),L(H,Fa(0,1,0,0,O)),L(x,Fa(0,1,0,p,0)),L(k,(a,b)=>{a=Db(u(r.ea,w,a-1).reverse());Ca(a,b);return b})]),ya(m,f,za(f),[L(t,Da(M(t),Aa))])]);k=va(k,()=>{1==a.B&&h();v.Ba=0});break;case 11:1==a.B&&h();var U=f.i;t=d[U.a.j].ya;delete d[U.a.j];var X=g[U.fa][U.ga];X.ha[U.pa]=t;f=qb[U.pa];var Va=y;k=M(l.l);jb(k,u(U.aa,Va,1));k=Db(k);k=Hb(k);p=Q(k[0]-U.fa,k[1],k[2]-U.ga);x=Q(f.sa,n,f.ta);O=Ea();H=Q(0,(a.ma?.2:.4)+ma()/7,0);k=Db(u(U.aa,1,0));P=Ea();E=Ja[U.Sb];Aa=M(c);var Ka=lb[a.u];f=f.Ma;t.l=[p,O,Aa,k,P];C.xb(ma(),l.l);t=800;k=wa([ya(m,t,Ba(t),[L(p,Da(M(p),x)),L(P,Fa(E.Sa,E.Ta,E.Ua,0,E.hb+ea)),L(Aa,Fa(0,1,0,Ka,f)),L(k,(a,b)=>{a=Db(u(U.aa,Va,1-a,0));Ca(a,b);return b})]),va(ya(m,600,Ba(300),[L(O,Da(M(O),H))]),()=>{C.vb(ma(),X.l)})]);break;case 12:t=f.i,l.Xa=t.Ha;case 15:1==t.g.B&&h();break;case 13:var S=f.i;l.Da=S.Aa;0>S.Z&&C.Gb(-S.Z/2,l.l);if(1==S.g.B)0>S.Z&&(k=ya(m,300,(a)=>{a=1-Ba(300)(a);return ma()*a},[L(l.v,Da(M(l.v),Ga(ma(),ma(),ma(),B/6)))])),h();else{var sa=[];sb(ha(S.Z),(a)=>{if(0<S.Z){var b=S.Aa-a-1;var c=Fb(B);var d=Gb();a=[c,d];d=[L(c,Fa(0,0,1,ea,0)),L(d,Da(M(d),Ea()))]}else b=S.Aa+a,c=Ea(),d=Ea(),a=[c,d],d=[L(c,Fa(1,0,0,0,ea)),L(d,Da(M(d),Gb()))];e[b].l=a;a=ya(m,999,za(999),d);sa.push(a)});k=wa(sa)}break;case 8:1==a.B&&(f=1E3,k=ya(m,f,za(f),[L(l.v,Da(M(l.v),Fb(-B/2)))]));break;case 14:f=f.i,delete g[f.T][f.U].ha.b}return k},L:ec,Ca:(b,c,g)=>{var f=1!=a.B;z(d,(a,d)=>{a=d.ya;if(a.Ba||f)d=u(d.index,y,1),jb(c,d),a.L(b,c,g),ra(c,c.length-d.length,d.length)});if(f){var h=1<a.G?.11:0;J(e,(d,e)=>{if(e<=l.Da||d.Ba)e=-y/4+ea*e/a.G,jb(c,[Fb(e),Q(0,h,0),Fb(-e),N(y)]),d.L(b,c,g),ra(c,c.length-4,4)})}},g:a,v:D(-B/9,.3,.5),nb:b,ob:c,l:[b,c],ab:e,wb:d,Xa:r,Da:w};return l}var bc="varying highp vec2 d;uniform sampler2D e;void main(){gl_FragColor=texture2D(e,d);}",cc="attribute vec3 a;attribute vec2 b;uniform mat4 c;varying highp vec2 d;void main(){gl_Position=c*vec4(a,1),d=b;}";function dc(a,b,c,e,d){var g=a.getUniformLocation(b,"c"),h=a.getUniformLocation(b,"e"),n=a.getAttribLocation(b,"a");b=a.getAttribLocation(b,"b");var r=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);c=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),a.STATIC_DRAW);var w=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,w);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);return{Hb:c,Xb:r,Ra:n,Ib:e.length,Vb:g,Qa:b,Ub:h,Rb:w}}function Z(a,b,c,e){return{l:a,L:ec,Ca:(a,g,h)=>{if(h=h?e:c)g=Db(g),a.bindBuffer(a.ARRAY_BUFFER,b.Xb),a.vertexAttribPointer(b.Ra,3,a.FLOAT,!1,0,0),a.enableVertexAttribArray(b.Ra),a.bindBuffer(a.ARRAY_BUFFER,b.Rb),a.vertexAttribPointer(b.Qa,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(b.Qa),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b.Hb),a.uniformMatrix4fv(b.Vb,!1,g),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,h),a.uniform1i(b.Ub,0),a.drawElements(a.TRIANGLES,b.Ib,a.UNSIGNED_SHORT,0)}}}function gc(){var a={$a:()=>{var a;a||(a={Db:[],eb:1});return a},bc:()=>{return[]},sb:()=>{var b=a.$a(),c=b.eb++;b.Db.push(c);pa.setItem("l",JSON.stringify(b));return{Za:c,Zb:(new Date).toString(),Ja:1,Ia:1}},tb:(a,c,e,d)=>{return{Za:a.Za,la:a.Ja++,H:c,V:e,o:d}},cc:()=>{},fc:()=>{}};return a}function $b(){return ()=>{}}var Qb=0,vb=1;function J(a,b){a.forEach(b)}function xa(a,b){for(var c=a.length;0<c;)c--,b(a[c],c)&&ra(a,c,1);return!a.length}function jb(a,b){a.push.apply(a,b)}function hc(a){var b="#";J(a,(a)=>{b+=a.toString(16)});return b}function M(a){var b=[];jb(b,a);return b}function sb(a,b){for(var c=0;c<a;c++)b(c)}function Ub(a,b,c){for(var e=[],d=0;d<a;d++){for(var g=[],h=0;h<b;h++){var n=c(d,h,e);g.push(n)}e.push(g)}return e}function Zb(a,b){var c=tb("canvas");c.width=a;c.height=b;return c}function Yb(a,b){function c(c){var e=b.da[c],h=8*c,n=512*a[h];c=256*a[h+1];var D=512*a[h+4];h=256*a[h+5];var x=fa(n,D),u=fa(c,h);n=I(n,D);c=I(c,h);var y=n-x,l=c-u;c=d.createRadialGradient(x+y/2,u+l/2,l/4,x+y/2,u+l/2,2*l);c.addColorStop(0,g);c.addColorStop(1,"#000");d.fillStyle=c;d.fillRect(x,u,y,l);if(e.length){var m=l/2,f=0,k=0;d.font=""+1.2*m+"px serif";J(e,(a,b)=>{var c=Oa[a],e=Pa[a],h=Qa[a];e||(e=g);a=f+m/2;var n=k+m/2;h=Math.atan2(n-l/2,a-y/2)+h;d.save();d.translate(x+a,u+n);d.rotate(h);d.fillStyle=e;d.fillText(c,0,0);d.strokeText(c,0,0);d.restore();f+=m;1==b%2&&(f=0,k+=m)})}b.P&&(e=.4*l,d.fillStyle="#000",d.beginPath(),d.arc(x+y/2,u+l/2,e/2,B,-B),d.fill(),d.font="bold "+e+"px serif",d.fillStyle="#fff",d.fillText(b.P,x+y/2,u+l/2))}var e=Zb(512,256),d=e.getContext("2d"),g=ab[b.$];d.strokeStyle="#000";d.textAlign="center";d.textBaseline="middle";for(var h=0;6>h;h++)c(h);return e}function Tb(a){var b=Zb(32,32),c=b.getContext("2d");for(a=a.toString(16);6>a.length;)a="0"+a;c.fillStyle="#"+a;c.fillRect(0,0,32,32);return b}function ic(a,b,c){var e=b+a(c-3*b);b+=a(c-2*b-e);c=[e,b,c-e-b];a=a(3);e=c[a];ra(c,a,1);c.push(e);return c}function Rb(){var a=R,b=ic(a,3,12),c=3-I(ha(b[1]-b[0]),ha(b[2]-b[0]),ha(b[2]-b[1]));c=ic(a,6,18+a(c));var e=[],d=[],g=a(2);a(2)&&(a=c,c=b,b=a);for(a=0;3>a;a++){var h=ja((c[a]+b[a])/2+g);e.push(h);h=I(0,fa(c[a],b[a])-3);d.push(h)}return{Oa:hc(b),Pa:hc(c),wa:hc(d),floor:hc(e)}}function Vb(a,b,c,e,d,g,h,n,r,w,C,D){e=(b-w*e)/e;d=(c-w*d)/d;g*=e;var x=h*e+w/2;h=Zb(b,c);var u=h.getContext("2d"),y=u.createLinearGradient(0,0,0,c);y.addColorStop(0,n);y.addColorStop(1,r);u.fillStyle=C;u.fillRect(0,0,b,c);u.strokeStyle=C;n=0;for(r=w/2;r<c;){for(var l=x-e-w;l<b;){u.fillStyle=y;var m=0<=l&&l<=b-e;if(m){var f=a();u.globalAlpha=1-f*f*f*f*.3}u.beginPath();u.rect(l,r,e,d);u.fill();w&&(u.globalAlpha=.3,u.lineWidth=2*w,u.stroke(),u.globalAlpha=1);D&&m&&(m=""+D[n++%D.length],u.textAlign="center",u.textBaseline="top",f=ia(fa(d,1.5*e/I(1,m.length))*(.8+.2*a())),u.font=""+f+"px serif",u.fillStyle=C,u.fillText(m,l+e/2,r));l+=e+w}x=(x+g)%e;r+=d+w}return h}function z(a,b){for(var c in a)b(c,a[c])}function R(a){var b=ma();_!=a&&(b=ia(b*a));return b}function fc(a,b){for(;a<b-B;)a+=ea;for(;a>b+B;)a-=ea;return a}function Nb(a,b,c){J(b,(e,d)=>{if(_==c||a()<c){e=a(b.length);var g=b[e];b[e]=b[d];b[d]=g}})}function Sb(a,b){var c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);a.generateMipmap(a.TEXTURE_2D);return c}function ac(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}ca.onload=()=>{function a(b,c){h&&h.Wa();(h=g(b,c))&&h.bb(a)}var b=Ob(),c=gc(),e={},d=ub(c);e[Qb]=d;e[vb]=Pb(c,b,d);var g=Ha(e),h;a(Qb)};</script>