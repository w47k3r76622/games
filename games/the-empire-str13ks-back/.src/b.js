(function(){function A(a,c,d){k=[];for(var b=0;b<a;b++)k.push([380+c*b,90+30*(Math.random()>d?1:0)])}function B(){a[1]+=a[3];a[4]=120<=a[1];a[4]?(a[1]=120,a[3]=0):(a[3]+=18*g,5<=a[3]&&(a[3]=5))}function C(b){g=(b-D)/1E3;D=b;2E3<b&&(w+=g,b=~~((w+g/2)/.03125),r+=b,(x=16<=r)&&(r=0),1<=b&&(w-=.03125*b));c.clearRect(0,0,320,240);if(0==n)console.log(t);else if(1==n){l&h[m.a]&&a[4]&&(a[3]-=5);B();c.fillStyle="#f66";for(b=0;b<k.length;b++)k[b][0]-=320*g,c.fillRect(k[b][0],k[b][1]-20,20,20),a[0]+18>k[b][0]+
2&&a[0]+2<k[b][0]+18&&a[1]+18>k[b][1]+2&&a[1]+2<k[b][1]+18&&console.log("loseee");c.fillStyle=x?"#0ff":4>r?"#0ff":"#fff";c.fillRect(a[0],a[1]-20,20,20)}else if(2==n)a[0]-=50*g,(b=l&h[m.a])&&!a[1]&&(a[0]+=10),0>=a[0]&&(a[0]=0),100<=a[0]?(console.log("win"),c.fillStyle="#f66"):c.fillStyle="#fff",a[1]=b,c.fillRect(50,200-a[0],10,a[0]);else if(3!=n)if(4==n)l&h[m.c]?(0<a[1]&&(a[2]=-2),a[1]-=g):l&h[m.b]&&(0>a[1]&&(a[2]=2),a[1]+=g),a[2]+=.4*a[1],a[0]+=a[2],c.fillStyle=120<a[0]||-120>a[0]?"#F00":"#FFF",c.fillRect(160,
100,a[0],20);else if(5!=n)if(6==n){(b=l&h[m.a])&&!a[1]&&0>=a[2]&&(a[2]=1.2,d.push([-20,120]));a[2]-=g;0>=a[2]&&(a[2]=0);a[3]+=Math.PI*g;a[4]=120*Math.sin(a[3]);c.fillStyle="#faa";for(b=0;b<d.length;b++)d[b][0]+=960*g,c.fillRect(d[b][0],d[b][1],40,4);c.fillStyle="#fff";c.fillRect(280,a[4]+120,20,20);c.fillRect(20,220,10,100*-a[2])}else if(7==n){l&h[m.c]?a[0]-=300*g:l&h[m.b]&&(a[0]+=300*g);(b=l&h[m.a])&&!a[1]&&0>a[2]&&(a[2]=.18,d.push([a[0],200]));a[2]-=g;a[1]=b;c.fillStyle="#666";for(b=e.length-1;0<=
b;b--)e[b][0]+=g*Math.PI*.8,e[b][1]=120*Math.cos(e[b][0])+160-8,e[b][3]+=20*g,e[b][2]=30*Math.sin(e[b][0])*Math.cos(-e[b][0])+e[b][3]+30,c.fillRect(e[b][1],e[b][2],16,10);c.fillStyle="#9f9";for(b=d.length-1;0<=b;b--)if(d[b][1]-=200*g,c.fillRect(d[b][0],d[b][1],1,20),0>=d[b][1])d.splice(b,1);else for(var f=e.length-1;0<=f;f--)if(d[b][0]>e[f][1]&&d[b][0]<e[f][1]+16&&d[b][1]+10>e[f][2]&&d[b][1]<e[f][2]+10){e.splice(f,1);d.splice(b,1);break}c.fillStyle="#fff";c.fillRect(a[0]-10,200,20,20)}else if(8!=
n)if(9==n){l&h[m.g]?a[0]=-1:l&h[m.f]&&(a[0]=1);c.fillStyle="#f99";for(b=k.length-1;0<=b;b--)k[b][0]-=520*g,80<k[b][0]&&100>k[b][0]&&(90==k[b][1]&&-1==a[0]||90!=k[b][1]&&1==a[0])?(console.log("destroy it"),k.splice(b,1)):(70>k[b][0]&&console.log("dead!"),c.fillRect(k[b][0],k[b][1],25,1));c.save();c.translate(80,100);c.rotate(a[0]*Math.PI/4);c.fillStyle="#9f9";c.fillRect(0,0,30,2);c.restore()}else if(10==n)a[0]-=50*g,(b=l&h[m.b])&&!a[1]&&(a[0]+=10),-50>=a[0]?console.log("loose"):0>a[0]?c.fillStyle=
"#f66":100<=a[0]?(console.log("win"),c.fillStyle="#f6f"):c.fillStyle="#fff",a[1]=b,c.fillRect(75,200,a[0],10);else if(11==n){b=u[a[1]][a[0]];l&h[m.g]&b?a[2]||(a[1]--,a[2]=!0):a[2]=!1;l&h[m.f]&b?a[3]||(a[1]++,a[3]=!0):a[3]=!1;l&h[m.c]&b?a[4]||(a[0]--,a[4]=!0):a[4]=!1;l&h[m.b]&b?a[5]||(a[0]++,a[5]=!0):a[5]=!1;c.save();c.translate(52,30);c.fillStyle="#f66";for(f=0;7>f;f++)for(b=0;9>b;b++){var p=u[f][b];p&1||c.fillRect(24*b,24*f,24,1);p&2||c.fillRect(24*b,24*f+24-1,24,1);p&4||c.fillRect(24*b,24*f,1,24);
p&8||c.fillRect(24*b+24-1,24*f,1,24)}c.fillStyle="#fff";c.fillRect(24*a[0]+5,24*a[1]+5,10,10);c.restore()}else if(12==n)E+=Math.PI*g,q=Math.sin(E)*Math.PI*.35,l&h[m.a]&&a[4]&&(a[3]=-1,a[4]=!1,a[2]=4*-q),a[4]?(a[0]=80-80*Math.sin(q),a[1]=20+80*Math.cos(q)):(B(),a[0]+=a[2]),c.save(),c.translate(-a[0]+100,0),c.save(),c.translate(80,20),c.rotate(q),c.fillStyle="#fff",c.fillRect(-1,0,2,80),c.restore(),c.save(),c.translate(240,20),c.rotate(0*q),c.fillStyle="#fff",c.fillRect(-1,0,2,80),c.restore(),c.fillStyle=
"#fff",c.fillRect(a[0]-5,a[1]-5,10,10),c.restore();else if(13==n){l&h[m.c]?a[0]=1:l&h[m.b]&&(a[0]=0);(b=l&h[m.a])&&!a[1]&&0>a[2]&&1>a[3]&&(a[2]=.1,0>a[3]&&(a[3]=0),a[3]+=.35,1<=a[3]&&(a[2]=.8,a[3]=1.5),d.push([160,2*-(a[0]-.5)]));a[2]-=g;a[1]=b;a[3]-=g;0>=a[3]?a[3]=0:1<=a[3]&&(a[3]=1);0>y&&(y=.6,b=.5<Math.random()?-10:330,e.push([b,0>b?1:-1]));y-=g;c.fillStyle="#fff";for(b=e.length-1;0<=b;b--)if(e[b][0]+=e[b][1]*g*200,c.fillRect(e[b][0]-3,100,6,40),0>(160-e[b][0])/e[b][1])e.splice(b,1);else for(f=
d.length-1;0<=f;f--)if(0>d[f][1]/e[b][1]&&0<(d[f][0]-e[b][0])/d[f][1]){e.splice(b,1);d.splice(f,1);break}c.fillStyle=.7>a[3]?"#fff":"#f66";c.fillRect(110,200,100*a[3],20);c.fillStyle="#f99";for(b=d.length-1;0<=b;b--)d[b][0]+=520*d[b][1]*g,c.fillRect(d[b][0],120,20*d[b][1],1),(-20>d[b][0]||340<d[b][0])&&d.splice(b,1);c.save();c.translate(160,120);c.rotate(Math.PI/4+Math.PI*a[0]);c.fillStyle="#fff";c.fillRect(-10,-10,20,20);c.fillStyle="#222";c.fillRect(2,-10,8,8);c.restore()}if(x&&0==--t){console.log("change screen");
b=z;t=18;z=0;if(0==b)t=3,z=F[~~(Math.random()*F.length)];else if(1==b)a=[100,120,0,0,!1],A(12,200,.2);else if(2==b)a=[0,!1,0,0,!1];else if(3==b)a=[0,120,0,0,!1];else if(4==b)a=[0,.5<Math.random()?.5:-.5,0,0,0];else if(5==b)a=[0,120,0,0,!1];else if(6==b)d=[],a=[0,0,!1,0,0];else if(7==b){e=[];for(f=0;6>f;f++)e.push([Math.PI/3*f,0,0,-20*f]);d=[];a=[160,120,0,0,0]}else 8==b?a=[0,120,0,0,!1]:9==b?(a=[1,120,0,0,!1],A(30,250,.5)):10==b?a=[0,!1,0,0,!1]:11==b?a=[0,6,!1,!1,!1,!1]:12==b?a=[0,120,0,0,!0]:13==
b&&(a=[0,120,0,0,!1],e=[],d=[]);n=b}requestAnimationFrame(C)}for(var l=0,m={g:38,f:40,c:37,b:39,a:32},h={},v=Object.keys(m),p=0;p<v.length;p++)h[m[v[p]]]=1<<p;document.onkeydown=function(a){var b=a.keyCode||a.which;h[b]&&(l|=h[b],a.preventDefault())};document.onkeyup=function(a){var b=a.keyCode?a.keyCode:a.which;l&h[b]&&(l^=h[b],a.preventDefault())};var c=document.getElementById("c").getContext("2d"),n=0,a=[100,120,0,0,!1],t=3,z=0,g=0,k=[],d=[],e=[],y=.5,F=[1,2,4,7,9,10,12,13],q=0,E=0,u=[];for(p=
0;63>p;p++)v=~~(p/9),0==p%9&&u.push([]),u[v].push(15-parseInt("53131195969c7ac6ac5a639c73a433be633949595b59cccce69c6ac6233a633"[p],16));var D=0,w=0,r=0,x=!1;C(1)})();
