!function(t){zzfx_v=.5,zzfx_x=new AudioContext,zzfx=(t,n,e,o=1,r=.1,s=0,a=0,c=0,f=0)=>{let i=44100,u=Math.PI;e*=2*u/i,e*=1+n*(2*Math.random()-1),s*=1e3*u/i**2,r*=0|(o=0<o?i*(10<o?10:o)|0:1),c*=2*u/i,f*=u,n=[];for(var l=0,h=0,_=0;_<o;++_)n[_]=.5*t*Math.cos(l*e*Math.cos(h*c+f))*(_<r?_/r:1-(_-r)/(o-r)),l+=1+a*(2*Math.random()-1),h+=1+a*(2*Math.random()-1),e+=s;return t=zzfx_x.createBuffer(1,o,i),e=zzfx_x.createBufferSource(),t.getChannelData(0).set(n),e.buffer=t,e.connect(zzfx_x.destination),e.start(),e};const[n,e,o]=[0,1,2];const r=function(t){const o=[t,()=>(o[n]=16807*o[n]%2147483647,o[n]),()=>(o[e]()-1)/2147483646];return o[n]<=0&&(o[n]+=2147483646),o}(Math.floor(Date.now()/1e3/60/5));var s;function a(t=[]){const n=Mo([[],null,[],null,-1,!1,0,h],t);return n[$t]=f.bind(null,n),We(n[Tt][z],n[$t]),n}function c(t,n){n?setTimeout(()=>{u(t)},1500):function(t){t[b]=!0}(t[Tt])}function f(t,n){let e=t[zt][t[Lt]];i(t);const o=t[Tt][T],r=o[jt],s=o[Jt],a=t[Tt],c=a[C],f=a[L],l=.8*s,h=r,_=.2*s;to(t[At],[0,l,h,_,.95,!0,!1,d[3]]);const m=Mo([],e[ke]);m[Qt]=o[Rt]+0+c[Br],m[Ut]=o[Wt]+l-f[$r],m[Xt]=.2*h,m[Zt]=_-f[Lr],m[wn]=[],lo(Se(a,e[ke][Vt])(m),n,a[T],t[At]),oo(a[I][kr],[e[Me],l,0+.3*h,h-(0+.3*h),_,[c[Br],c[Br]],e[be]]),a[q][t[Ot]][j]?t[Ct]=!0:t[Ct]&&(t[Ct]=!1,t[Lt]++,e[Ee](),t[Lt]>=t[zt].length&&u(t))}function i(t){no(t[At]),Hr[I][kr][tt].innerText=""}function u(t){i(t),t[Bt].forEach(t=>t()),je(t[Tt][z],t[$t]),function(t){t[b]=!1}(t[Tt])}function l(t){const n=(t[jt]-t[Nt][Xt])/2,e=(t[Jt]-t[Nt][Zt])/2;t[Rt]=t[Nt][Qt]-n,t[Wt]=t[Nt][Ut]-e}!function(){var t=44100;function n(t){return Math.sin(6.283184*t)}var e=[n,function(t){return n(t)<0?-1:1},function(t){return t%1-.5},function(t){var n=t%1*4;return n<2?n-1:3-n}];function o(t){return.00390625*Math.pow(1.059463094,t-128)}function r(t){return{left:new Float32Array(t),right:new Float32Array(t)}}var a=function(t,n,o){this.ctx=t,this.instr=n,this.rowLen=o||5605,this.osc_lfo=e[n.lfo_waveform],this.osc1=e[n.osc1_waveform],this.osc2=e[n.osc2_waveform],this.attack=n.env_attack,this.sustain=n.env_sustain,this.release=n.env_release,this.panFreq=Math.pow(2,n.fx_pan_freq-8)/this.rowLen,this.lfoFreq=Math.pow(2,n.lfo_freq-8)/this.rowLen};a.prototype._genSound=function(e,r,s){for(var a=0,c=0,f=o(e+12*(this.instr.osc1_oct-8)+this.instr.osc1_det)*(1+8e-4*this.instr.osc1_detune),i=o(e+12*(this.instr.osc2_oct-8)+this.instr.osc2_det)*(1+8e-4*this.instr.osc2_detune),u=this.instr.fx_resonance/255,l=0,h=0,_=r.left.length,d=this.attack+this.sustain+this.release-1;d>=0;--d){var m=d+s,p=this.osc_lfo(m*this.lfoFreq)*this.instr.lfo_amt/512+.5,g=1;d<this.attack?g=d/this.attack:d>=this.attack+this.sustain&&(g-=(d-this.attack-this.sustain)/this.release);var x=f;this.instr.lfo_osc1_freq&&(x+=p),this.instr.osc1_xenv&&(x*=g*g),a+=x;var w=this.osc1(a)*this.instr.osc1_vol;x=i,this.instr.osc2_xenv&&(x*=g*g),c+=x,w+=this.osc2(c)*this.instr.osc2_vol,this.instr.noise_fader&&(w+=(2*Math.random()-1)*this.instr.noise_fader*g),w*=g/255;var v=this.instr.fx_freq;this.instr.lfo_fx_freq&&(v*=p);var y=u*(w-h)-(l+=(v=1.5*Math.sin(3.141592*v/t))*h);switch(h+=v*y,this.instr.fx_filter){case 1:w=y;break;case 2:w=l;break;case 3:w=h;break;case 4:w=l+y}x=n(m*this.panFreq)*this.instr.fx_pan_amt/512+.5,w*=.00476*this.instr.env_master,m<_&&(r.left[m]+=w*(1-x),r.right[m]+=w*x)}};var c=function(n,e){this.ctx=n,this.song=e,this.waveSize=t*e.songLen};c.prototype._generateTrack=function(t,n,e){var o=r(this.waveSize),s=this.waveSize,c=this.song.rowLen,f=this.song.endPattern,i=new a(this.ctx,t,c),u=0,l=0,h=0,_=function(){for(var n=Date.now();;)if(32!==h){if(l===f-1)return d();var e=t.p[l];if(e){var r=t.c[e-1].n[h];r&&i._genSound(r,o,u)}if(u+=c,h+=1,Date.now()-n>33)return void setTimeout(_,0)}else h=0,l+=1},d=function(){!function(t,n,e,o){for(var r=e.fx_delay_time*o>>1,s=e.fx_delay_amt/255,a=0;a<n-r;){var c=a,f=a+r;t.left[f]+=t.right[c]*s,t.right[f]+=t.left[c]*s,a++}}(o,s,t,c);for(var r=0;r<s;r++)n.left[r]+=o.left[r];for(r=0;r<s;r++)n.right[r]+=o.right[r];e()};_()},c.prototype._createAudioBuffer=function(n){var e=this,o=r(this.waveSize),s=0,a=function(){s<e.song.songData.length?(s+=1,e._generateTrack(e.song.songData[s-1],o,a)):n(function(n,e){var o=n.createBuffer(2,e.left.length,t);return o.getChannelData(0).set(e.left),o.getChannelData(1).set(e.right),o}(e.ctx,o))};a()},s=function(t,n,e){new c(t,n)._createAudioBuffer(e)}}();const h=()=>{},_=["#F5BEBE","#E86767","#DB1111","#8C0B0B","#3C0505"],d=["#D1EDF5","#AFDFEE","#82CEE5","#538492","#24393F"],m=["#D7EBD3","#B9DCB2","#91C987","#5DB056","#283725"],p=["#DAC1AD","#B6845C","#8D501D","#553011","#2B1809"],g=["#C3C8C9","#738082","#374A4D","#1D2E32","#0D1516"],[x,w,v,y,k,M,b,E,D,I,q,z,T,B,A,O,C,L,$,G,S,F,H,Y]=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],[P,R,W,j,J,N]=[0,1,2,3,4,5],[K,V,Q,U,X,Z,tt,nt,et]=[0,1,2,3,4,5,6,7,8],[ot,rt,st]=[0,1,2],[at,ct,ft,it,ut,lt,ht,_t,dt,mt,pt,gt,xt,wt,vt,yt,kt,Mt,bt,Et,Dt,It,qt]=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],[zt,Tt,Bt,At,Ot,Ct,Lt,$t]=[0,1,2,3,4,5,6,7,8],[Gt,St,Ft,Ht,Yt]=[0,1,2,3,4],[Pt,Rt,Wt,jt,Jt,Nt,Kt]=[0,1,2,3,4,5,6],[Vt,Qt,Ut,Xt,Zt,tn,nn,en,on,rn,sn,an,cn,fn,un,ln,hn,_n,dn,mn,pn,gn,xn,wn,vn,yn,kn,Mn,bn]=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],[En,Dn,In,qn,zn,Tn,Bn,An,On,Cn,Ln]=[0,1,2,3,4,5,6,7,8,9,10,11],[$n,Gn,Sn,Fn,Hn,Yn,Pn,Rn,Wn]=[0,1,2,3,4,5,6,7,8],[jn,Jn,Nn,Kn,Vn,Qn,Un]=[0,1,2,3,4,5,6],[Xn,Zn,te,ne,ee]=[0,1,2,3,4,5],[oe,re,se,ae,ce,fe,ie,ue]=[0,1,2,3,4,5,6,7],[le,he,_e,de]=[0,1,2,3],[me,pe,ge,xe,we,ve,ye]=[0,1,2,3,4,5,6],[ke,Me,be,Ee]=[0,1,2,3],[De,Ie,qe]=[0,1,2],[ze,Te]=[0,1],[Be,Ae,Oe]=[0,1,2],[Ce,Le]=[0,1];function $e(t=[]){return Mo([-1,"",g[4],h],t)}function Ge(t,n=-1,e=h){return t[B][n]||(t[B][n]=e),e}function Se(t,n){return t[B][n]||Ge(t,n,uo)}function Fe(t,n=-1,e=[],o){t[q][n]=function(t=[],n){const e=Mo([[],null,0,!1,!1,!1],t);return document.addEventListener("keydown",t=>{if(-1===e[P].indexOf(t.keyCode))return;e[j]=!0;const o=Date.now();e[R]?e[W]=o-e[R]:(e[R]=o,n&&zzfx.apply(null,n)),t.preventDefault()}),document.addEventListener("keyup",t=>{-1!==e[P].indexOf(t.keyCode)&&(e[j]=!1,e[R]=null,e[W]=0,t.preventDefault())}),e}([e],o)}function He(t,n=-1,e){t[I][n]=e?function(t=[]){const n=document.createElement("div"),e=Mo(["",document.createElement("div"),500,500,null,null,n,0,0],t);return e[tt].style.position="absolute",e[tt].setAttribute("data-key",e[K]),e[V].appendChild(e[tt]),eo(e,0,0,e[nt],e[et]),e}([n,t[x],t[y],t[k]]):function(t=[]){const n=document.createElement("canvas"),e=Mo(["",document.createElement("div"),500,500,n,n.getContext("2d")],t);return e[X].style.position="absolute",e[X].setAttribute("data-key",e[K]),e[V].appendChild(e[X]),function(t,n=500,e=500){const o=t[X];o.offsetWidth===n&&o.offsetHeight===e||(o.style.offsetWidth=n+"px",o.style.offsetHeight=e+"px");o.width=n,o.height=e}(e,e[Q],e[U]),e}([n,t[x],t[y],t[k]])}function Ye(t,n=-1,e="",o=h,r=[],s=!1){const a=t[D][e],c=!s&&a?a:[[],o(r)];c[ot].push(Date.now()),t[D][e]=c;const f=c[rt];r[ut]&&(f[ut]=r[ut]),Wr[n](f),c[st]=c[st]||Pr[n].bind(null,f);const i=c[st],u=t[E].indexOf(i);u>=0&&t[E].splice(u,1),t[E].push(i)}function Pe(t,n=[],e=h){const o=a([n,t,[e],t[I][yr],Ir]);t[O]=o,o[Bt].push(e,()=>(function(t,n=null){t[O]=n})(t,null)),c(o,1===n.length)}function Re(t=[]){const n=Mo([60,!0,null,[],Date.now()],t);return function t(n){n[Ft]=requestAnimationFrame(t.bind(null,n));const e=Date.now();const o=n[Yt];n[Yt]=e;if(n[St])return;const r=e-o;r>=1e3/n[Gt]&&n[Ht].forEach(t=>t(r))}(n),n[Yt]=Date.now(),n}function We(t,...n){const e=t[Ht];n.forEach(t=>{-1===e.indexOf(t)&&e.push(t)})}function je(t,n){const e=t[Ht],o=e.indexOf(n);o>=0&&e.splice(o,1)}function Je(t=[]){return Mo(["",null,32,32,[],[],[],[],[],!1,!1,!1,!1,!1,!1,!1,!1,[],[],-1,-1,[],[]],t)}function Ne(t,n){const e=t[at];return!!t[mt]||(t[pt]?t[xt]?t[kt]?t[gt]?t[wt]?t[vt]?t[yt]?(Ur[e](t,n),t[Mt].forEach((n,e)=>{n&&function(t,n){no(t[On])}(t[ht][Bn][e])}),t[bt].forEach((e,o)=>{if(e){const e=t[ct][T];ao(t[ht][Bn][o],n,e),ao(t[qt],n,e)}}),!1):(ts[e](t),t[yt]=!0,!1):(Zr[e](t),t[vt]=!0,!1):(Xr[e](t),t[wt]=!0,!1):(Kr[e](t),t[gt]=!0,!1):(Qr[e](t),t[kt]=!0,!1):(Jr[e](t),Nr[e](t),t[xt]=!0,!1):(Vr[e](t),t[pt]=!0,!1))}function Ke(t){t[mt]=!0}function Ve(t){t[mt]=!1,t[wt]=!1,t[gt]=!1;const n=t[ct],e=n[$],o=t[Et]*e[pe]+t[Dt],r=n[L],s=n[T][jt],a=s/2-20,c=r[Gr];oo(n[I][kr],[`Cell ${o}`,c,a,s-a,r[Gr],[0,0],p[0]])}function Qe(t){const n=t[at];jr[n](t);const e=t[_t],o=t[ct],r=t[it]*o[w],s=t[ft]*o[v],a=ro([De,e[Xn],e[Zn],r,s,[],[],[],o[I][vr]]);t[ht]=a,e[ee].forEach(t=>{const n=ro([Ie,a[Dn],a[In],a[qn],a[zn],[],[],a,a[On],t[Gn]]),e=o[w],r=o[v],s=n[Dn];n[In];switch(t[$n]){case gr:t[Rn].forEach((t,c)=>{const f=c%s,i=Math.floor(c/s),u=[];u[Qt]=f*e,u[Ut]=i*r,u[Xt]=e,u[Zt]=r,u[fn]=f,u[un]=i,u[cn]=c,u[mn]=a,u[xn]=n,so(n,function(t,n=-1,e=[]){const o=[];return o[Vt]=n,o[dn]=ze,Se(t,n)(Mo(o,e))}(o,t,u))});break;case xr:t[Wn].forEach(t=>{const e=[];Mo(e,t[Un]||[]),e[Qt]=t[Kn],e[Ut]=t[Vn],e[Xt]=t[Jn],e[Zt]=t[Nn],e[tn]=t[Qn],e[mn]=a,e[xn]=n,so(n,function(t,n=-1,e=[]){const o=[];return o[dn]=Te,o[Vt]=n,Se(t,n)(Mo(o,e))}(o,t[jn],e))})}!function(t,n){const e=t[Bn];-1===e.indexOf(n)&&e.push(n);n[Ln]=t}(a,n)}),t[Mt]=a[Bn].map(()=>!0),t[bt]=a[Bn].map(()=>!0)}function Ue(t){const n=t[ht];t[qt]=ro([qe,n[Dn],n[In],n[qn],n[zn],[],[],[],n[On]])}function Xe(t){}function Ze(t){to(t[ct][I][wr],[,,,,,,,g[4],g[4]])}function to(t,n=[]){const[e=0,o=0,r=t[Q],s=t[U],a=1,c=!0,f=!1,i="red",u="black"]=n,l=t[Z];l.save(),l.globalAlpha=a,l.fillStyle=i,l.strokeStyle=u,l.beginPath(),l.rect(e,o,r,s),c&&l.fill(),f&&l.stroke(),l.restore()}function no(t,n=[]){const[e=0,o=0,r=t[Q],s=t[U]]=n;t[Z].clearRect(e,o,r,s)}function eo(t,n=0,e=0,o=500,r=500){const s=t[tt];s.style.top=Math.round(n)+"px",s.style.left=Math.round(e)+"px",s.style.right=Math.round(t[Q]-(e+o))+"px",s.style.bottom=Math.round(t[U]-(n+r))+"px"}function oo(t,[n="PLACE_HOLDER",e=0,o=0,r=500,s=500,a=[0,0],c=g[4],f=24,i=400,u="fantasy sans-serif serif",l="left"]){const h=t[tt];eo(t,e,o,r,s),h.innerText=n,h.style.fontSize=f+"px",h.style.fontWeight=i,h.style.fontFamily=u,h.style.color=c,h.style.padding=a.map(t=>t+"px").join(" "),h.style.textAlign=l}function ro(t=[]){return Mo(["",32,32,0,0,[],[],[],[],-1],t)}function so(t,n=[]){const e=t[Tn];-1===e.indexOf(n)&&e.push(n),n[yn]=t}function ao(t,n,e){t[Tn].forEach(o=>lo(o,n,e,t[On]))}function co(t,n){let e=[];e=t[En]===De?t[Bn]:[t];for(let t=0;t<e.length;t++){const o=e[t][Tn];for(let t=0;t<o.length;t++){let e=o[t];if(e[Vt]===n)return e}}return null}function fo(t,n){const e=[];let o=[];o=t[En]===De?t[Bn]:[t];for(let t=0;t<o.length;t++){const r=o[t][Tn];for(let t=0;t<r.length;t++){let o=r[t];o[Vt]===n&&e.push(o)}}return e}function io(t,n){const e=[];let o=[];o=t[En]===De?t[Bn]:[t];for(let t=0;t<o.length;t++){const r=o[t][Tn];for(let t=0;t<r.length;t++){let o=r[t];for(let t=0;t<n.length;t++)o[Vt]===n[t]&&e.push(o)}}return e}function uo(t=[]){return Mo([-1,0,0,32,48,"",Be,!1,!1,_[2],"",1,-1,-1,-1,0,0,0,ze,[],h,[],[],[],-1,[],null,null,-1],t)}function lo(t,n,e,o){const r=Math.floor(t[Qt]-e[Rt]),s=Math.floor(t[Ut]-e[Wt]);if(r<-t[Xt]||r>e[jt]||s<-t[Zt]||s>e[Jt])return;let a=s,c=t[Zt],f=t[an];const i=t[wn][To],u=t[wn][Bo];"number"==typeof i&&(i>0&&(c=Math.max(0,t[Zt]*i/u),to(o,[r,a=s+t[Zt]-c,t[Xt],c,t[an],!!t[rn],!!t[sn],t[rn],t[sn]])),f=.4),to(o,[r,s,t[Xt],t[Zt],f,!!t[rn],!!t[sn],t[rn],t[sn]]),t[en]&&function(t,n=[]){const[e=0,o=0,r="left",s="alphabetic",a="PLACE_HOLDER",c="16",f="black",i=1]=n,u=t[Z];u.save(),u.font=`${c}px serif`,u.fillStyle=f,u.globalAlpha=i,u.textAlign=r,u.textBaseline=s,u.fillText(a,e,o),u.restore()}(o,[r+t[Xt]/2,s,"center","bottom",t[tn],16,t[rn],t[an]])}function ho(t,n){n||t[dn]!==ze&&(t[Qt]+=t[ln],_o(t),t[Ut]+=t[hn],_o(t))}function _o(t){!function(t,n=[]){const e=[[],[],[],[]];n.forEach(po.bind(null,e,t));const o=[e[1],e[3],e[0],e[2]].sort((t,n)=>n.length-t.length)[0].sort((t,n)=>n[1]-t[1])[0];if(!o)return;const r=o[0];t[Vt]===er&&-1!==[jo,Jo,No,Ko].indexOf(r[Vt])||function(t,n){switch(n){case Ae:return go;default:return h}}(0,r[nn])(t,o);t[nn]===Oe&&xo(t);r[pn](t)}(t,function(t){const n=t[mn],e=mo(t);let o=[];return e.forEach(e=>{n[Bn].forEach(n=>{const r=n[Tn],s=r[0];if(s)if(s[dn]===Te)o=o.concat(r.filter(n=>n!==t&&(!t[kn]||n!==t[kn])&&mo(n).indexOf(e)>=0&&n[nn]!==Be));else{const t=n[Tn][e];t&&t[Vt]!==Yo&&[dr,_r].indexOf(t[xn][Cn])>=0&&o.push(n[Tn][e])}})}),o}(t))}function mo(t){if(t[dn]===ze)return[t[cn]];{const n=t[mn],e=n[Dn]/n[qn],o=n[In]/n[zn],r=Math.floor(t[Qt]*e-.001),s=Math.floor((t[Qt]+t[Xt])*e-.001),a=Math.floor(t[Ut]*o-.001),c=Math.floor((t[Ut]+t[Zt])*o-.001),f=[];for(let t=a;t<=c;t++)for(let e=r;e<=s;e++)f.push(t*n[Dn]+e);return f}}function po(t,n,e){if(n===e)return;let o=function(t,n){const e=n[Ut]<=t[Ut]&&n[Ut]+n[Zt]>=t[Ut]&&n[Ut]+n[Zt]-t[Ut],o=t[Qt]<=n[Qt]&&t[Qt]+t[Xt]>=n[Qt]&&t[Qt]+t[Xt]-n[Qt],r=t[Ut]<=n[Ut]&&t[Ut]+t[Zt]>=n[Ut]&&t[Ut]+t[Zt]-n[Ut],s=n[Qt]<=t[Qt]&&n[Qt]+n[Xt]>=t[Qt]&&n[Qt]+n[Xt]-t[Qt],a=Math.max(o,s)&&+e,c=Math.max(r,e)&&+o,f=Math.max(o,s)&&+r,i=Math.max(r,e)&&+s;return[a,c,f,i]}(n,e);o[le]&&(e[nn]===Be||n[hn]<0)&&t[le].push([e,o[le],le]),o[he]&&(e[nn]===Be||n[ln]>0)&&t[he].push([e,o[he],he]),o[_e]&&(e[nn]===Be||n[hn]>0)&&t[_e].push([e,o[_e],_e]),o[de]&&(e[nn]===Be||n[ln]<0)&&t[de].push([e,o[de],de])}function go(t,n){const[e,o,r]=n;switch(r){case le:t[Ut]+=o,t[hn]=0;break;case he:t[Qt]-=o,t[ln]=0;break;case _e:t[Ut]-=o,t[hn]=0;break;case de:t[Qt]+=o,t[ln]=0}}function xo(t){const n=t[yn][Tn];n.splice(n.indexOf(t),1)}function wo(t,n,e,s){if(t[wn][To]<=0)return;const a=e[qt],c=Se(e[ct],s)([s,t[Qt]+t[Xt]/2,t[Ut]+t[Zt]/2]),f=c[_n];let i;n?ko(c,t,n):(i=r[o]()*Math.PI*2,c[ln]=Math.cos(i)*f,c[hn]=Math.sin(i)*f),c[dn]=Te,c[mn]=e[ht],c[nn]=Oe,c[kn]=t,c[Mn]=n,so(a,c)}function vo(t,n,e,s,a=2e3){t[wn][To]<=0||t[wn][$o]||(wo(t,n,e,s),setTimeout(()=>{vo(t,n,e,s,a)},Math.max(300,Math.round(r[o]()*a))))}const yo=function(t,n){let e,o;return function(){const r=this,s=arguments;o?(clearTimeout(e),e=setTimeout((function(){Date.now()-o>=n&&(t.apply(r,s),o=Date.now())}),n-(Date.now()-o))):(t.apply(r,s),o=Date.now())}}(wo,300);function ko(t,n,e){const o=t[_n],r=e[Qt]+e[Xt]/2,s=e[Ut]+e[Zt]/2,a=n[Qt]+n[Xt]/2,c=n[Ut]+n[Zt]/2,f=Math.atan(Math.abs((c-s)/(r-a)));t[ln]=Math.cos(f)*o*(r>a?1:-1),t[hn]=Math.sin(f)*o*(s>c?1:-1)}function Mo(...t){return t.length<=1?t[0]||[]:t.reduce((t,n)=>(n.forEach((n,e)=>{void 0!==n&&(t[e]=n)}),t))}const bo={songLen:99,songData:[{osc1_oct:10,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:61,osc1_waveform:0,osc2_oct:12,osc2_det:7,osc2_detune:0,osc2_xenv:0,osc2_vol:125,osc2_waveform:0,noise_fader:0,env_attack:0,env_sustain:0,env_release:47272,env_master:86,fx_filter:2,fx_freq:2844,fx_resonance:160,fx_delay_time:8,fx_delay_amt:34,fx_pan_freq:3,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,1,1,2,1,2,3,0,4,0,1,2,1,7,5],c:[{n:[132,0,0,0,139,0,0,0,137,0,0,0,142,0,0,0,139,0,0,0,144,0,0,0,139,0,0,0,135,0,0,0]},{n:[137,0,0,0,142,0,0,0,139,0,0,0,144,0,0,0,142,0,0,0,146,0,0,0,142,0,0,0,135,0,0,0]},{n:[0,0,132,0,135,0,132,0,135,0,139,0,0,0,137,0,0,0,132,0,135,0,132,0,135,0,135,0,0,0,135,0]},{n:[0,0,132,0,135,0,132,0,135,0,139,0,0,0,137,0,0,0,132,0,135,0,132,0,135,0,135,0,0,0,132,0]},{n:[0,0,132,0,135,0,132,0,135,0,139,0,0,0,137,0,0,0,132,0,135,0,132,0,135,0,135,0,0,0,144,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[137,0,0,0,142,0,0,0,139,0,0,0,144,0,0,0,142,0,0,0,146,0,0,0,147,0,0,0,149,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:3,osc2_oct:8,osc2_det:0,osc2_detune:8,osc2_xenv:0,osc2_vol:74,osc2_waveform:3,noise_fader:0,env_attack:47272,env_sustain:40909,env_release:46363,env_master:149,fx_filter:2,fx_freq:224,fx_resonance:67,fx_delay_time:2,fx_delay_amt:25,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[0,0,1,2,1,2,3,1,3,1,1,2,1,2,3,1],c:[{n:[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[118,0,0,0,0,0,118,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,118,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:2,osc2_oct:8,osc2_det:7,osc2_detune:0,osc2_xenv:0,osc2_vol:172,osc2_waveform:2,noise_fader:0,env_attack:48181,env_sustain:80909,env_release:51818,env_master:174,fx_filter:2,fx_freq:1300,fx_resonance:43,fx_delay_time:6,fx_delay_amt:172,fx_pan_freq:1,fx_pan_amt:125,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:180,lfo_waveform:0,p:[0,0,1,2,1,2,3,0,3,0,5,6,5,6,7],c:[{n:[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[118,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[116,0,0,0,0,0,0,0,0,0,0,0,0,0,118,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[120,151,156,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[118,149,154,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[152,116,0,0,0,0,0,0,0,0,0,0,0,0,118,0,142,0,0,0,0,0,0,0,0,0,0,0,0,0,120,144]}]},{osc1_oct:6,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:193,osc1_waveform:0,osc2_oct:5,osc2_det:7,osc2_detune:0,osc2_xenv:0,osc2_vol:80,osc2_waveform:0,noise_fader:0,env_attack:50,env_sustain:0,env_release:17272,env_master:254,fx_filter:1,fx_freq:0,fx_resonance:254,fx_delay_time:0,fx_delay_amt:0,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:3,p:[0,0,0,0,0,0,1,2,2,5,3,4,7,8,6],c:[{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,0]},{n:[147,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0]},{n:[147,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0,0,0,0,0,0,0,147,147]},{n:[147,0,0,0,0,0,147,0,0,0,0,0,0,0,0,0,147,0,0,0,0,0,147,0,0,0,0,0,0,0,0,0]},{n:[147,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0,147,0,0,0,0,0,0,0]},{n:[147,0,0,0,0,0,147,0,147,0,0,0,0,0,146,0,146,0,0,0,0,0,144,0,135,0,0,0,0,0,0,0]},{n:[147,0,0,0,0,0,147,0,0,0,147,0,159,0,0,0,147,0,147,0,0,0,147,0,0,0,147,0,159,0,147,0]},{n:[147,0,0,0,0,0,147,0,0,0,0,0,159,0,147,0,147,0,0,0,0,0,147,0,147,0,0,0,0,0,147,0]}]}],rowLen:7875,endPattern:17},Eo="player",[Do,Io,qo,zo,To,Bo,Ao,Oo,Co,Lo,$o]=[0,1,2,3,4,5,6,7,8,9,10],Go=[1,.1,120,.2,.34,-.2,1,0,.93],So=[1,.1,650,.1,.94,1.1,2.7,16.7,.98],Fo=[1,.1,550,.4,.83,.5,2.9,.1,0],Ho=[1,.1,54,.9,.36,0,.3,28.1,.27],[Yo,Po,Ro,Wo,jo,Jo,No,Ko,Vo,Qo,Uo,Xo,Zo,tr,nr,er,or,rr,sr,ar]=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],[cr,fr,ir,ur]=[0,1,2,3],[lr,hr,_r,dr,mr,pr]=[0,1,2,3,4,5],[gr,xr]=[0,1],[wr,vr,yr,kr]=[0,1,2,3],[Mr,br,Er,Dr,Ir,qr]=[0,1,2,3,4,5],[zr]=[1],[Tr,Br,Ar,Or,Cr]=[0,1,2,3,4],[Lr,$r,Gr,Sr,Fr]=[0,1,2,3,4],Hr=function(t=[]){const n=Mo([document.createElement("div"),20,20,innerWidth,innerHeight,g[4],!1,[],[],[],[],Re(),[],[],[],null,[],[],null,[],!1,!1,null,null],t),e=n[w],o=n[v];return n[C]=[e/2,e,2*e,3*e,8*e],n[L]=[o/2,o,2*o,3*o,8*o],n[T]=function(t=[]){return Mo([null,0,0,640,640,null,null],t)}([n,0,0,n[y],n[k]]),n[z]=Re(),n}([document.getElementById("root")]);!function(t){!function(t){t[Y]=new(window.AudioContext||window.webkitAudioContext),s(t[Y],bo,n=>{t[H]=n,t[S]=!0})}(t)}(Hr),He(Hr,wr),He(Hr,vr),He(Hr,yr),He(Hr,kr,!0),Fe(Hr,Mr,[87,38],Go),Fe(Hr,br,[83,40],Go),Fe(Hr,Er,[65,37],Go),Fe(Hr,Dr,[68,39],Go),Fe(Hr,Ir,[13]),Fe(Hr,qr,[32],[1,.1,1450,.3,.05,0,1.1,16.8,.31]);const Yr=[Je,function(t){return Je(t)}],Pr=[Ne,Ne],Rr=[Ke,Ke],Wr=[Ve,Ve],jr=[h,function(t){const n=t[ct],e=t[ct][$];t[It]=function(t=""){const n=[cr,fr,ir,ur];return(t="0000".substring(t.length)+t).split("").map((t,e)=>"1"===t?n[e]:"")}(e[ge][t[Et]][t[Dt]]);const s=t[Et],a=t[Dt],c=n[$],f=c[xe]===s&&c[we]===a,i=c[ve]===s&&c[ye]===a;f?function(t){const n=t[ct],e=t[it]*n[w],o=t[ft]*n[v],r=n[C],s=n[L],a=[];a[nn]=Ae,t[_t]=ms([0,0,t[it],t[ft],t[It],n[w],n[v],[[Xo,r[Ar],s[Or],Math.floor((e-r[Ar])/2),Math.floor((o-s[Sr])/4),,a],[Qo,r[Ar],s[Or],Math.floor((e-r[Ar])/2),Math.floor((o-s[Sr])/2),,]]])}(t):i?function(t){t[it]=64,t[ft]=64;const n=t[ct],e=t[it]*n[w],s=t[ft]*n[v],a=n[w],c=n[v],f=n[C],i=n[L],u=(t[ut],f[Ar]),l=i[Or],h=[[Qo,f[Ar],i[Or],0,0,Eo]],_=[];_[nn]=Be,_[rn]=m[1],_[an]=0,h.push([tr,f[Ar],i[Or],Math.round((e-Ar)/3),Math.round((s-Or)/3),,_]);const d=[];d[nn]=Ae,d[wn]=[],d[wn][To]=20,d[wn][Bo]=20,d[wn][Ao]=2,d[wn][Co]=150,d[nn]=Ae,h.push([er,f[Cr],i[Cr],Math.round((e-Or)/2),Math.round((s-Cr)/2),,d]);const p=Math.floor(r[o]()*(t[it]/20*t[ft]/30));for(let t=0;t<p;t++){const t=f[Math.ceil((f.length-2)*r[o]())],n=i[Math.ceil((i.length-2)*r[o]())],_=[];_[nn]=Ae,h.push([er,t,n,Math.floor(a+Math.max(0,(e-2*a-t-u-a)*r[o]())),Math.floor(3*c+Math.max(0,(s-6*c-n-l-c)*r[o]())),,_])}t[_t]=ms([0,0,t[it],t[ft],t[It],a,c,h])}(t):function(t){const n=t[ct],e=t[it]*n[w],s=t[ft]*n[v],a=n[w],c=n[v],f=n[C],i=n[L],u=t[ut],l=f[Ar],h=i[Or],_=[[Qo,l,h,0,0,Eo]];if(u[Io])if(u[zo]){const n=r[o]()>.5?Math.floor(r[o]()*(t[it]/8*t[ft]/27)):0;for(let t=0;t<n;t++){const t=f[Math.ceil((f.length-2)*r[o]())],n=i[Math.ceil((i.length-2)*r[o]())],u=[];u[nn]=Ae,_.push([er,t,n,Math.floor(a+Math.max(0,(e-2*a-t-l-a)*r[o]())),Math.floor(3*c+Math.max(0,(s-6*c-n-h-c)*r[o]())),,u])}}else{u[zo]=!0;const t=[];t[nn]=Ae,_.push([er,f[Ar],i[Or],Math.round((e-Ar)/2),Math.round((s-Or)/2),,t])}else{u[Io]=!0;const t=[];t[nn]=Ae,t[rn]=m[1],_.push([tr,f[Ar],i[Or],Math.round((e-Ar)/3),Math.round((s-Or)/3),,t])}t[_t]=ms([0,0,t[it],t[ft],t[It],a,c,_])}(t)}],Jr=[Qe,Qe],Nr=[Ue,Ue],Kr=[h,function(t){const n=co(t[ht],Qo);Mo(n[wn],t[ut]);const e=n[wn][Do],o=t[ct],r=t[it]*o[w],s=t[ft]*o[v],a=o[w],c=o[v];if(n[wn][To]>0&&void 0!==e)switch(e){case cr:n[Qt]=(r-n[Xt])/2,n[Ut]=3*c;break;case fr:n[Qt]=r-a-n[Xt],n[Ut]=(s-n[Zt])/2;break;case ir:n[Qt]=(r-n[Xt])/2,n[Ut]=s-c-n[Zt];break;case ur:n[Qt]=a,n[Ut]=(s-n[Zt])/2}else n[Qt]=(r-n[Xt])/2,n[Ut]=(s-n[Zt])/2;const f=co(t[ht],tr);let i=fo(t[ht],er);(i=f&&"johnTheBadGuy"===f[tn]?i.concat([f]):i).forEach(e=>{e[wn][$o]=!1,vo(e,n,t,rr,e[wn][Co])}),n[wn][Oo]&&f&&"johnTheBadGuy"!==f[tn]&&(f[an]=0,f[nn]=Be)}],Vr=[Xe,Xe],Qr=[Ze,Ze],Ur=[h,function(t,n){const e=co(t[ht],Qo);(function(t,n,e){const o=t[ct],r=o[q],s=r[Mr][j],a=r[br][j],c=r[Er][j],f=r[Dr][j],i=(s||a)&&(c||f),u=n[_n],l=u/Math.sqrt(2);s&&(n[hn]=-(i?l:u));a&&(n[hn]=i?l:u);c&&(n[ln]=-(i?l:u));f&&(n[ln]=i?l:u);s||a||(n[hn]=0);c||f||(n[ln]=0);ho(n,o[b])})(t,e),function(t,n){const e=t[ct],o=e[q][qr][j],r=n[Qt]+n[Xt]/2,s=n[Ut]+n[Zt]/2,a=fo(t[ht],tr).filter(t=>"johnTheBadGuy"===t[tn]),c=fo(t[ht],er).concat(a).filter(t=>t[nn]===Ae).sort((t,n)=>{const e=t[Qt]+t[Xt]/2,o=t[Ut]+t[Zt]/2,a=n[Qt]+n[Xt]/2,c=n[Ut]+n[Zt]/2;return Math.pow(r-e,2)+Math.pow(s-o,2)-(Math.pow(r-a,2)+Math.pow(s-c,2))})[0];o&&yo(n,c,t,or,1e3);t[qt][Tn].forEach(t=>{ho(t,e[b])})}(t,e),function(t){const n=co(t[ht],Qo),e=fo(t[ht],tr).filter(t=>"johnTheBadGuy"===t[tn]);fo(t[ht],er).concat(e).forEach(e=>{ko(e,e,n),ho(e,t[ct][b])})}(t)}],Xr=[h,function(t){const n=co(t[ht],Qo);!function(t,n=[]){t[Nt]=n,t[Kt]&&je(t[Pt][z]),t[Kt]=l.bind(null,t),We(t[Pt][z],t[Kt]),l(t)}(t[ct][T],n)}],Zr=[h,h],ts=[h,function(t){const n=t[ct],e=io(t[ht],t[It].map(t=>n[G][t]));ns||e.forEach(t=>{t[rn]=_[3],t[nn]=Ae});const s=t[Et],a=t[Dt],c=n[$],f=c[xe]===s&&c[we]===a,i=c[ve]===s&&c[ye]===a;f?function(t){const n=t[ct],e=io(t[ht],t[It].map(t=>n[G][t])),o=co(t[ht],Xo);o[pn]=r=>{if(r[Vt]===Qo&&!n[O]){const s=r[wn][To]<=r[wn][Bo]?()=>{r[wn][To]=r[wn][Bo]}:()=>{e.forEach(t=>{t[rn]=m[3],t[nn]=Be})};Pe(n,function(t,n,e){if(n[wn][To]<n[wn][Bo]){const e=Math.random();let o,r="Let me help you, my friend!";return e>.7&&(n[wn][Ao]++,r="Don't worry, I will make you stronger! (Attack + 1)",o=m[4]),e<.3&&n[wn][Ao]>1&&(n[wn][Ao]--,r="Too much damange... Be careful, you are weaker now! (Attack - 1)",o=_[4]),[$e([t,r,o])]}return t[gn][0]?n[wn][Lo]?t[gn][1]?[$e([t,"Your name will be remembered in our country! (GAME OVER!)",m[3]])]:(t[gn][1]=!0,[[t,"You are back! How's your trip?"],[n,"I killed monsters and a liar!"],[t,"What happened?!"],[n,"(I told the king about the betrayal of John. His closest friend turns out to be a bad guy.)"],[n,"And here is the gems he stolen."],[t,"..."],[t,"I couldn'd believe what happened!"],[t,"Thank you, my friend, for bringing me back the best gem..."],[t,"The gem of truth!"],[t,"It worth more than all other gems combined."],[t,"Your name will be remembered in our country! (GAME OVER!)",m[4]]].map($e)):[$e([t,"Please bring back our gems!",_[3]])]:(t[gn][0]=!0,[[t,"Hello warrior, welcome to the land of real gems! (Enter key to next...)"],[t,"I am the real king. You know, I run this place."],[t,"However, that's until 5 years ago, when the monsters took our magic gems!"],[t,"The world is suffering in fear..."],[t,"Please bring back the gems!"],[n,"I guess I can lend a hand!"],[t,"Thank you for your help! Remember, you can always come back and restore your health!"],[n,"Great!"],[t,"You are welcome! Now, the doors are open for you!",,()=>{const t=e[ct];io(e[ht],e[It].map(n=>t[G][n])).forEach(t=>{t[rn]=m[3],t[nn]=Be})}],[t,"Please bring back our gems!",_[3]]].map($e))}(o,r,t),s)}}}(t):i?function(t){const n=t[ct],e=io(t[ht],t[It].map(t=>n[G][t])),o=co(t[ht],Qo);o[wn][Oo]=!0,Pe(n,function(t){return[$e([t,"Boss!",_[3]])]}(o));const r=fo(t[ht],er);let s=r.length;s<=0&&e.forEach(t=>{t[rn]=m[3],t[nn]=Be});r.forEach(n=>{vo(n,o,t,rr,n[wn][Co]),vo(n,null,t,rr,n[wn][Co])}),r.forEach(r=>{r[pn]=a=>{switch(a[Vt]){case or:r[wn][To]-=a[kn][wn][Ao]}if(r[wn][To]<=0&&(xo(r),s--),s<=0){const r=co(t[ht],tr);r[an]=1,r[nn]=Ae,r[gn][0]=!0,r[gn][1]=!0,r[pn]=s=>{if(s[Vt]===Qo&&r[gn][1]&&(n[O]||Pe(n,os(r,o,t),()=>{setTimeout(()=>{vo(r,o,t,ar,r[wn][Co]),vo(r,null,t,ar,r[wn][Co])},1e3)})),s[Vt]===or){switch(s[Vt]){case or:r[wn][To]-=s[kn][wn][Ao]}r[wn][To]<=0&&(xo(r),e.forEach(t=>{t[rn]=m[3],t[nn]=Be}),o[wn][Lo]=!0,rs(t,o))}}}}}),o[pn]=n=>{switch(n[Vt]){case er:o[wn][To]-=.1,zzfx.apply(null,So);break;case rr:o[wn][To]-=n[kn][wn][Ao],zzfx.apply(null,So);break;case ar:o[wn][To]-=n[kn][wn][Ao]}if(o[wn][To]<=0){r.forEach(t=>t[wn][$o]=!0);const n=co(t[ht],tr);n&&"johnTheBadGuy"===n[tn]&&(n[wn][$o]=!0),rs(t,o)}}}(t):function(t){const n=t[ct],e=io(t[ht],t[It].map(t=>n[G][t])),o=co(t[ht],Qo),r=t[ut],s=co(t[ht],tr);if(s&&!r[qo])r[qo]=!0,s[pn]=o=>{o[Vt]===Qo&&(n[O]||Pe(n,os(s,o,t),()=>{e.forEach(t=>{t[rn]=m[3],t[nn]=Be})}))};else{const n=fo(t[ht],er);let r=n.length;r<=0&&e.forEach(t=>{t[rn]=m[3],t[nn]=Be}),n.forEach(n=>{vo(n,o,t,rr)}),n.forEach(t=>{t[pn]=n=>{switch(n[Vt]){case or:t[wn][To]-=n[kn][wn][Ao]}t[wn][To]<=0&&(xo(t),r--),r<=0&&e.forEach(t=>{t[rn]=m[3],t[nn]=Be})}})}o[pn]=n=>{switch(n[Vt]){case er:o[wn][To]-=.1,zzfx.apply(null,So);break;case rr:o[wn][To]-=n[kn][wn][Ao],zzfx.apply(null,So)}o[wn][To]<=0&&(fo(t[ht],er).forEach(t=>t[wn][$o]=!0),rs(t,o))}}(t);e.forEach(e=>{e[pn]=s=>{if(s[Vt]!==Qo)return;if(e[nn]!==Be)return;let a,c=0,f=0;switch(e[Vt]){case jo:f=-1,a=ir;break;case Jo:c=1,a=ur;break;case No:f=1,a=cr;break;case Ko:c=-1,a=fr}s[wn][Do]=a,Rr[t[at]](t);const i=[zr,n],u=t[Et]+f,l=t[Dt]+c;i[ft]=Math.floor(32*r[o]()+20),i[it]=Math.floor(32*r[o]()+20),i[Et]=u,i[Dt]=l,i[ut]=s[wn],Ye(Hr,zr,`${zr}@${u}@${l}`,Yr[zr],i),zzfx.apply(null,Fo)}})}];!function(t){const n=[];n[cr]=jo,n[fr]=Jo,n[ir]=No,n[ur]=Ko,t[G]=n}(Hr),function(t){Ge(t,Yo,t=>{const n=[];return n[Vt]=Yo,n[an]=0,uo(Mo(n,t))}),Ge(t,Po,t=>{const n=[];return n[Vt]=Po,n[rn]=g[4],uo(Mo(n,t))}),Ge(t,Ro,t=>{const n=[];return n[Vt]=Ro,n[rn]=g[3],uo(Mo(n,t))}),Ge(t,Wo,t=>{const n=[];return n[Vt]=Wo,n[rn]=p[3],n[nn]=Ae,uo(Mo(n,t))}),Ge(t,Vo,t=>{const n=[];return n[Vt]=Vo,n[rn]=p[1],uo(Mo(n,t))}),[jo,Jo,No,Ko].forEach(n=>{Ge(t,n,t=>{const e=[];return e[Vt]=n,e[rn]=m[3],uo(Mo(e,t))})}),Ge(t,Qo,t=>{const n=[];n[Vt]=Qo,n[tn]="player",n[rn]=p[2],n[sn]=p[3],n[en]=!0,n[dn]=Te,n[nn]=Ae,n[wn]=[],n[wn][To]=10,n[wn][Bo]=10,n[wn][Ao]=1;const e=uo(Mo(n,t));return e[_n]=e[Xt]/4,e}),Ge(t,Xo,t=>{const n=[];return n[Vt]=Xo,n[tn]="realKing!",n[en]=!0,n[rn]=d[2],uo(Mo(n,t))}),Ge(t,tr,t=>{const n=[];n[Vt]=tr,n[tn]="johnTheGoodGuy",n[en]=!0,n[rn]=m[1],n[wn]=[];const e=uo(Mo(n,t));return e[_n]=e[Xt]/8,e});const n=["chupacabra","snallygaster","werewolf","hodag","dybbuk","tommy-knocker","sasquatch","nix","guytrash"];Ge(t,er,t=>{const e=[];e[Vt]=er,e[tn]=n[Math.floor(n.length*r[o]())],e[en]=!0,e[rn]=_[2],e[sn]=_[3],e[wn]=[],e[wn][To]=6,e[wn][Bo]=6,e[wn][Ao]=1;const s=uo(Mo(e,t));return s[_n]=s[Xt]/64,s}),Ge(t,or,t=>{const n=[];return n[Vt]=or,n[rn]=m[1],n[Xt]=8,n[Zt]=8,n[_n]=10,n[bn]=Ce,uo(Mo(n,t))}),Ge(t,rr,t=>{const n=[];return n[Vt]=or,n[rn]=_[1],n[Xt]=8,n[Zt]=8,n[_n]=8,n[bn]=Ce,uo(Mo(n,t))}),Ge(t,ar,t=>{const n=[];return n[Vt]=or,n[rn]=_[2],n[Xt]=10,n[Zt]=10,n[_n]=6,n[bn]=Ce,uo(Mo(n,t))}),Ge(t,sr,t=>{const n=[];return n[Vt]=or,n[rn]=d[1],n[Xt]=8,n[Zt]=8,n[_n]=10,n[bn]=Le,uo(Mo(n,t))})}(Hr),function(t,n){t[$]=n}(Hr,function([t=5,n=5,e=cr,s=ir]=[]){const a=[];for(let e=0;e<t;e++){const t=[];a.push(t);for(let e=0;e<n;e++)t.push("")}const c=[];let f,i,u,l;switch(e){case cr:i=0,f=Math.floor(r[o]()*n);break;case ir:i=t-1,f=Math.floor(r[o]()*n);break;case ur:i=Math.floor(r[o]()*t),f=0;break;case fr:i=Math.floor(r[o]()*t),f=n-1}const h=bs(f,i,n,t);Ms(h,n,t).forEach(t=>{-1!==t&&c.push(`${h}-${t}`)});for(;c.length;){const e=c.splice(Math.floor(r[o]()*c.length),1)[0],s=parseInt(e.split("-")[0]),f=parseInt(e.split("-")[1]);Ds(s,f,a)&&Ms(f,n,t).forEach(t=>{if(-1===t||t===s)return;const n=`${f}-${t}`,e=`${t}-${f}`;-1===c.indexOf(n)&&-1===c.indexOf(e)&&c.push(n)})}switch(s){case cr:l=0,u=Math.floor(r[o]()*n);break;case ir:l=t-1,u=Math.floor(r[o]()*n);break;case ur:l=Math.floor(r[o]()*t),u=0;break;case fr:l=Math.floor(r[o]()*t),u=n-1}return[t,n,a,i,f,l,u]}([8,8])),function(t){const n=[zr,t,32,32],e=t[$];n[Et]=e[xe],n[Dt]=e[we],Ye(t,zr,`${zr}@${n[Et]}@${n[Dt]}`,Yr[zr],n)}(Hr),We(Hr[z],t=>{Hr[S]&&(Hr[F]||(es||function(t){const n=t[Y],e=n.createBufferSource();e.buffer=t[H],e.loop=!0,e.connect(n.destination),e.start()}(Hr),Hr[F]=!0));const n=Hr[E];let e;for(e=0;e<n.length;e++){const o=n[e];if("boolean"==typeof o?!o:!o(t))break}return e===n.length}),Hr[z][St]=!1;let ns=!1,es=!1;function os(t,n,e){return t[gn][0]?t[gn][1]?(t[gn][1]=!1,[[t,"You KILL the dragon king! That never happened!!"],[n,"It was... easy."],[t,"That was not expected..."],[n,"You are welcome! Now, where are the gems? I was told to bring them back."],[t,"..."],[n,"John...?"],[n,"John... John, are you ok? You don't look good."],[t,"I am sorry, my friend, but you are not going to leave here.",_[3],()=>{t[tn]="johnTheBadGuy",t[rn]=_[4],t[sn]=_[4],t[wn][To]=30,t[wn][Bo]=30,t[wn][Ao]=3,t[wn][Co]=200}],[n,"What...!?"],[t,"I took the gems! I am the richest person in the world, but I must hide that from the king!"],[t,"The gems bring me everything, but I want more... I want the throne! I want to be the new king!"],[n,"That is not appropriate..."],[t,"Ha! Now that you know the truth, you are going to die with it!"]].map($e)):[$e([t,"I heard the gems are in the south! (SPACE key to attack)",_[3]])]:(t[gn][0]=!0,[[t,"Yes?"],[n,"I..."],[t,"Let me guess! You are looking for the gem of light?"],[n,"..."],[t,"Wait! Is it gem of ice?"],[n,"(What is that)..."],[t,"Oh, it must be gem of fire! I.. the king needs them!"],[n,"Who are you, may I ask?"],[t,"Well, I am a helper! I am also king's clostest friend."],[t,"The land of gems is no more. The monsters have taken all the gems!"],[t,"Bring back the gems to me... err, the king!"],[t,"Remember! You cannot pass the doors when mosters have taken the room!"],[t,"I have cleared this one for you. You are welcome! Now the doors are opened!",,()=>{const t=e[ct];io(e[ht],e[It].map(n=>t[G][n])).forEach(t=>{t[rn]=m[3],t[nn]=Be})}],[t,"Good luck, my friend! You need to find your way across the maze. I heard the gems are in the south! (SPACE key to attack)"]].map($e))}function rs(t,n){Rr[t[at]](t);const e=t[ct],o=e[$][xe],r=e[$][we],s=[zr,e,32,32];s[Et]=o,s[Dt]=r,s[ut]=n[wn],Ye(e,zr,`${zr}@${o}@${r}`,Yr[zr],s),zzfx.apply(null,Ho)}const ss=32,as=32,cs=0,fs=0,is=16,us=16,ls=12,[hs,_s,ds]=[0,1,2];function ms(t=[]){const n=Mo([cs,fs,as,ss,[ir],is,us,[]],t),e=function(t=[]){const[n,e,o,r,s,,,a]=t;return[[lr,gr],[hr,gr],[_r,gr,s],[dr,gr,s],[mr,xr],[pr,gr,s]].map(t=>{let s;switch(t[_s]){case gr:s=[t[_s],t[hs],n,e,o,r,1,ps(r,o,t),[],t[0]];break;case xr:s=[t[_s],t[hs],n,e,o,r,1,[],a,t[0]]}return s})}(n);return[n[se],n[ae],n[fe],n[ie],e]}function ps(t=ss,n=as,e=[]){const[o,,r=[ir]]=e,s=[];for(let e=0;e<t;e++)for(let a=0;a<n;a++){const c=e*n+a;switch(o){case lr:s[c]=Po;break;case hr:s[c]=e>=2?Ro:Yo;break;case _r:s[c]=xs(e,a,t,n,r)||ws(e,a,t,n,r)||vs(e,a,t,n,r)||ys(e,a,t,n,r)?Wo:Yo;break;case dr:const o=2===e&&gs(a,n),f=a===n-1&&gs(e,t),i=e===t-1&&gs(a,n),u=0===a&&gs(e,t);r.indexOf(cr)>=0&&o?s[c]=jo:r.indexOf(fr)>=0&&f?s[c]=Jo:r.indexOf(ir)>=0&&i?s[c]=No:r.indexOf(ur)>=0&&u?s[c]=Ko:s[c]=Yo;break;case pr:s[c]=xs(e,a,t,n,r,!0)||ws(e,a,t,n,r,!0)||vs(e,a,t,n,r,!0)||ys(e,a,t,n,r,!0)?Vo:Yo}}return s}function gs(t,n){return t>=(n-ls)/2&&t<(n+ls)/2}function xs(t=0,n=0,e=ss,o=as,r=[],s=!1){const a=s?0===t:1===t||2===t;return-1===r.indexOf(cr)?a:a&&!gs(n,o)}function ws(t=0,n=0,e=ss,o=as,r=[],s=!1){const a=s?t===e-3:t===e-1||t===e-2;return-1===r.indexOf(ir)?a:a&&!gs(n,o)}function vs(t=0,n=0,e=ss,o=as,r=[],s=!1){const a=s?0===n&&t>=0&&t<=e-3:0===n&&t>=1;return-1===r.indexOf(ur)?a:a&&!gs(t,e)}function ys(t=0,n=0,e=ss,o=as,r=[],s=!1){const a=s?n===o-1&&t>=0&&t<=e-3:n===o-1&&t>=1;return-1===r.indexOf(fr)?a:a&&!gs(t,e)}function ks(t="0",n="0"){return(parseInt(t,2)+parseInt(n,2)>>>0).toString(2)}function Ms(t=0,n=5,e=5){const[o,r]=Es(t,n,e),s=[];return s.push(bs(r,o-1,n,e)),s.push(bs(r+1,o,n,e)),s.push(bs(r,o+1,n,e)),s.push(bs(r-1,o,n,e)),s}function bs(t,n,e=5,o=5){return t<0||t>=e||n<0||n>=o?-1:n*e+t}function Es(t=0,n=5,e=5){return t<0||t>=n*e?null:[Math.floor(t/n),t%n]}function Ds(t=0,n=1,e=[[],[]]){const o=e.length,r=e[0].length;if(-1===Ms(t,r,o).indexOf(n))return!1;const[s,a]=Es(t,r,o),[c,f]=Es(n,r,o);return(!e[s][a]||!e[c][f])&&(a+1===f&&s===c?(e[s][a]=ks(e[s][a]||"0","0100"),e[c][f]=ks(e[c][f]||"0","0001")):f+1===a&&s===c?(e[s][a]=ks(e[s][a]||"0","0001"),e[c][f]=ks(e[c][f]||"0","0100")):c+1===s&&f===a?(e[s][a]=ks(e[s][a]||"0","1000"),e[c][f]=ks(e[c][f]||"0","0010")):s+1===c&&f===a&&(e[s][a]=ks(e[s][a]||"0","0010"),e[c][f]=ks(e[c][f]||"0","1000")),!0)}}("undefined"==typeof THREE_GEM?THREE_GEM={}:THREE_GEM);