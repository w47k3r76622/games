(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){(function(global){var storyData=__webpack_require__(1);var ejsParse=__webpack_require__(2);var preprocessor=__webpack_require__(3);var gameState={};ready(restart);function ready(fn){if(document.readyState!="loading"){fn()}else{document.addEventListener("DOMContentLoaded",fn)}}function visit(passageName){var container=document.querySelector("div.content");passageName=passageName||window.location.search.substr(1).replace(/%20/g," ")||"Start";Object.keys(gameState.countdowns).forEach(function(key){if(--gameState.countdowns[key]===0){passageName=key;delete gameState.countdowns[key]}});gameState.lastPassage=gameState.currentPassage;gameState.currentPassage=passageName;storyData.forEach(function(onePassage){if(onePassage.name===passageName){passage=onePassage}});if(!passage)return console.warn('Passage "'+passageName+'" not found!');passage=preprocessor(passage);var passageHTML=ejsParse(passage.body,gameState).replace(/\n/g,"<br>");if(gameState.location){passageHTML="<h4>"+gameState.location+"</h4>"+passageHTML}container.innerHTML=passageHTML;var links=document.querySelectorAll("a.passage");links=Array.prototype.slice.call(links);links.forEach(function(node){node.addEventListener("click",function(e){var passageName=this.getAttribute("passage");if(passageName.substr(0,3)==="js:"){eval(passageName.substr(3))}else{visit(this.getAttribute("passage"))}e.stopPropagation();e.preventDefault();return false})})}global.restart=restart;function restart(){gameState={lastPassage:"",currentPassage:"",once:{},knownWhistles:["open","close"],countdowns:{}};visit()}global.back=back;function back(){visit(gameState.lastPassage)}}).call(exports,function(){return this}())},function(module,exports){module.exports=[{name:"Start",body:"<% s.location = 'The Apartment' %>\n\nYou've got the jitters. Your answer-mod's on the fritz, so you're actually at home for a change. This time of night, you're usually out looking for trouble past curfew.\n\nThe phone is ringing.\n\n[[Answer it.|Answer curfew call]]\n[[Ignore it.|Ignore curfew call]]"},{name:"Answer curfew call",body:'You pick up the receiver. There\'s a pause, then several familiar clicks. A recorded voice begins.\n\n"The time is 8:19 PM. Please enter your Citicode after the tone."\n\nA tone sounds.\n\n[[Enter your citizen code.]]'},{name:"Ignore curfew call",body:'After a few rings, your answering machine picks up. You hear several familiar clicks, then a recorded voice.\n\n"The time is 8:19 PM. Please enter your Citicode after the tone."\n\nA tone sounds.\n\n[[Pick up the receiver and enter your citizen code.|Enter your citizen code.]]\n[[Ignore it.|Second ignore curfew call]]'},{name:"Enter your citizen code.",body:'You enter your 9-digit citizen code in touchtones.\n\n"Please enter your..."\n\n<% var qs = ["mother\'s maiden name", "best friend\'s first name", "city of birth", "elementary school\'s name"];\nvar q = qs[Math.round(Math.random() * (qs.length - 1))]; %>\n\nThe system pauses, selecting one of a number of personal questions.\n\n"...<%= q %>."\n\n[[Enter your <%= q %>.|Answer personal question]]'},{name:"Second ignore curfew call",body:"You continue to ignore the call.\n\n\"Citizen, failure to answer these prompts quickly and accurately will result in legal repercussions up to and including imprisonment. Please enter your Citicode now.\"\n\nYou've seen the news. They don't mess around.\n\n[[Pick up the handset and enter your citizen code.|Enter your citizen code.]]\n[[Terminate the call.]]"},{name:"Terminate the call.",body:"You reach over and press the red \"END\" button on the answering machine. In minutes, the portafaxes in every pantographed cruiser within five blocks will be spitting out your name, address, and photo.\n\nYou sit and wait for the authorities to converge. No use running; you wouldn't get more than two blocks anyway. The infolib group you were assigned to protect will be naked and helpless when the strike commences. You've failed them, and you've failed yourself.\n\n[[Restart.|js:restart()]]"},{name:"Answer personal question",body:"You deftly enter the answer on the keypad.\n\n\"Thank you. We value your patience during this time of heightened security.\"\n\n<em>Bullshit</em>, you think. <em>It's just a reactionary power grab.</em>\n\nYou hang up the phone, grab your gear, and [[leave the apartment.]] You won't be around to take the second call tonight."},{name:"leave the apartment.",body:"<% s.location = 'Pine St.' %>\n\nYou're standing on a sleepy street in Portland. A pair of headlights are coming around the bend half a kilometer away. Curfew means they're not friendly.\n\n[[Duck behind a dumpster.]]\n[[Head to the parking lot.]]"},{name:"Duck behind a dumpster.",body:"You try to squeeze behind a dumpster to avoid spotting by the cruiser. There isn't enough room. The cruiser's closing in.\n\n[[Get in the dumpster.]]\n"},{name:"Head to the parking lot.",body:"<% s.location = 'Parking Lot, Rear' %>\n\nYou stick to the shadows as you make your way to the gravel lot behind the apartment. Your bike's wedged between two sedans.\n\n[[Start the bike.]]\n[[Connect your handset.|Handset to bike]]"},{name:"Get in the dumpster.",body:"<% s.location = '' %>\n\nYou're regretting this decision already. The dumpster is rank. Its contents retain the heat of the day. You try to plant your feet on the walls to suspend yourself over the mess.\n\nThe cruiser rolls by. Its searchlight pans over the dumpster, but you're well-hidden inside. It keeps going 'til the end of the block, then makes a turn.\n\n[[Head to the parking lot.]] "},{name:"Start the bike.",body:'<% if (s.isBikeUnlocked) { %>\nYou push the START button and the gauges flicker to life. You straddle the seat and kick the engine over. It starts on the second try.\n\n[[Depart.]]\n<% } else { %>\nYou push the START button. The bike makes a flat tone. The dashboard remains dark, but displays "ERR: LOCK" on its status line.\n\n[[Connect your handset to the bike.|Handset to bike]] \n<% } %>'},{name:"Handset to bike",body:'<% s.isBikeUnlocked = true; %>\n\nYou remove your lineman\'s handset from your backpack and thread the cable into the jack on the side of the speedometer. You switch the handset on and whistle <span class="whistle">open</span>. The dashboard status bar reads "ONLINE".\n\n[[Start the bike.]]'},{name:"Depart.",body:"<% s.location = 'Back of the Bike' %>\n\nJanie said the strike was due to launch at 21:00. <i>\"The track'll be clear,\"</i> she said, <i>\"let it get ahead of you, then catch up and hook on.\"</i>\n\nYou kick the bike up a gear and twist the throttle.\n\n<i>\"You'll have a 40-minute work window. Don't go past Kittery. If you get over the river... Just don't cross the river, okay?\"</i>\n\n[[Turn onto Industrial Park.]]"},{name:"Test",body:"<% \nhide('hideImmediate');\nunhide('unhideImmediate');\ndelay('second', 5000);\nsetTimeout(function() { hide('second'); unhide('third'); }, 7000); %>\n\n<span id=\"unhideImmediate\" class=\"hidden\">This is the first part.</span>\n\n<%= emitHideStart('second') %>\nThis is the second part.\n<%= emitHideEnd() %>\n\n<%= emitHideStart('third') %>\nThis is the third part, replacing the second part.\n<%= emitHideEnd() %>\n\n<div id=\"hideImmediate\">THIS should not be visible ever!</div>\n\n[[Click here to restart.|js:restart()]]"},{name:"Turn onto Industrial Park.",body:"It's easy to stick to streets without a lot of residential real estate. You make it up to the rail crossing in Falmouth and park yourself and your bike in a thicket.\n\n[[Wait.]]"},{name:"Wait.",body:"<% s.location = 'Bushes' %>\n\nYou think about the infolib group in Portsmouth. You silently curse whoever tipped off WENH. The group didn't expect the CCTV system installed at the broadcast tower just days before, and it compromised their operation. You hope those 7 minutes of pirate air, instructions for building your own answer-mod, got to the right TV sets. Maybe even some VCRs. Playing the automation game back at the government, winning a small freedom, was the first step to organizing more liberation cells.\n\nYou feel the rumble before you hear the clacking white noise.\n\n[[Wait for the train to pass.]]"},{name:"Wait for the train to pass.",body:"Your heart clicks up a notch as the strike train approaches. It's a physical response; not to the metal rolling by, but to the oppression it represents. Your mouth parches.\n\nYou scan the cars as they roll by. Four, total. Engine in front, fuel car, then two tech cars. You can't make them out in the dark. One is the comm car, the brain. The other is munitions.\n\nIt's uncomfortable to stay motionless in the brush. You're ready to get going. You're itching to hit back any way you can. Still, you wait.\n\nThe train recedes down the track.\n\n[[Unpack your bike.]]"},{name:"Unpack your bike.",body:"<% s.location = '' %>\n\nYou wheel your bike up to the track in the moonlight. <i>Let's hope this works.</i> You extend the rail runner and the outrigger like the guy at the custom shop showed you. It takes some muscle, but the bike fits on the rails.\n\nYou start the bike and kill the headlight. <i>This will either fail amazingly or...</i>\n\nThrottle up; you're rolling. Nowhere to go but forward.\n\n[[Catch a train.]]\n\n"},{name:"Catch a train.",body:"<% s.location = \"Rolling on Dark Track\" %>\n\nYou push the needle a little past comfortable. A few bumpity-bumps, but the bike regains its composure after each one. You'll have to thank that torch jockey later.\n\nYou spot the strike train before long. Its stern shows a few signals lit. The rear of the train is the only blind spot in its proximity sensor grid. If you approached from the side or (god forbid) the front, about a million alarms would go off. You don't know if this rig's equipped with countermeasures.\n\nYou pull into its draft, uncomfortably close. You unclip a hook from the fork, unspool some cable, and throw it as hard as you can at the tech car's aft ladder. It clatters off the handrails, but doesn't catch. The second throw snags a rung, and you crank the winch until you're just a few feet away.\n\n[[Board the train.]]"},{name:"Board the train.",body:"With the motorcycle tethered to the train, you shift to neutral and slide a rubber band over the brake lever to add a little drag and stabilize your position. You swing over to the inside of the bike and balance on the outrigger. Standing longjump wasn't your strongest event in high school.\n\n[[Make the leap.]]"},{name:"Make the leap.",body:'<% s.location = \'\'; %>\n<% for (var i = 1; i <= 7; i++) {\n  delay(\'line\' + i, i * 2500);\n}%>\n\nIt\'s only a couple of feet.\n\n<span id="line1" class="hidden">You\'ve jumped bigger puddles to keep your boots dry.</span>\n\n<span id="line2" class="hidden">Then again, puddles don\'t move at close to 100km/h.</span>\n\n<span id="line3" class="hidden">You push off.</span>\n<span id="line4" class="hidden">.</span>\n<span id="line5" class="hidden">.</span>\n\n<span id="line6" class="hidden">The ladder\'s cold, even through your gloves.</span>\n\n<span id="line7" class="hidden">[[Assess the situation.]]</span>\n'},{name:"Assess the situation.",body:"<% delay('line2', 4000); %>\n<% s.location = 'Back of a Moving Train' %>\n\nYou could ditch the bike. If anyone's watching, it'll attract attention when you pass through a station. You might get really unlucky and pass a cruiser stopped at a crossing.\n\n<div id=\"line2\" class=\"hidden\">On the other hand, it's a lot easier to decelerate gently than to jump from a moving train.\n\n[[Ditch the bike.]]\n[[Leave it in tow.]]\n</div>"},{name:"Ditch the bike.",body:"<% s.location = '' %>\n<% s.ditchedBike = true %>\n\nThe lives of the Portsmouth group are more important than a clean getaway. If ditching the bike improves your odds of success, you have to do it.\n\nYou unhook the cable from the ladder and reel the bike in closer. You whip the cable and send the bike tumbling off the track into the ditch and the darkness of the pines.\n\n<i>If I get out of this,</i> you think, <i>maybe I can come back and salvage the thing. It can't be more than a ten mile stretch to check.</i>\n\nNo more looking back.\n\n[[Find a way inside.]]"},{name:"Leave it in tow.",body:"<% s.location = '' %>\n<% s.ditchedBike = false %>\n\nYou're going to need it later. You secure the cable to a stronger-looking shackle near the car's coupler.\n\n[[Find a way inside.]]"},{name:"Find a way inside.",body:"<% s.entryAlarm = true %>\n\nThere isn't a data port that you can see on the back of the car. You resign yourself to brute force. That wonder bar in your backpack ought to do the trick.\n\nYou wedge the bar where you expect the latch to be and begin to pull. The door screeches and groans, but remains shut.\n\nFinally, you grip the ladder with both hands and kick the bar with both feet. The door pops free and slides open. The bar goes tumbling into the night. Red flashing light spills out of the car. Looks like you tripped an alarm.\n\n[[Enter the car, quickly.]]"},{name:"Enter the car, quickly.",body:"<% s.location = \"Munitions Car\" %>\n<% s.doorsLocked = true %>\n\nYou slide the door shut behind you. It smells like metal and old smoke.\n\nIn the <%= s.entryAlarm ? 'garish, swirling red light' : 'dim glow' %>, you see cages filled with monstrous machinery. You spot several racks of missiles, a couple of artillery cannons, and several anti-aircraft turrets. There's a seam in the roof; you guess the car opens like a black pea pod to dispense violence at range.\n\nYou don't see any way into the cages. The aisle continues ahead, but it's so narrow you have to remove your backpack and carry it while you shuffle sideways.\n\n[[Exit to the back of the train.|Outside train rear]]\n[[Advance to the front of the car.|Munitions Front]]"},{name:"Outside train rear",body:"<% s.location = 'Back of Strike Train' %>\n\nYou exit the munitions car. The wind howls. It's dark, and smells like diesel.\n\n<% if (s.ditchedBike) { %>\nYou wish you hadn't ditched your bike.\n\n<% } else { %>\nYour motorcycle still trails behind the train.\n\n<% } %>\n\n<% if (s.exitAllowed) { %>\n[[Leave the train.]]\n<% } else { %>\n[[You're not finished yet.|Munitions Rear]]\n<% } %>"},{name:"Munitions Front",body:"<% s.location = 'Munitions Car' %>\n<% s.weapState = s.weapState || 'ARMED' %>\n<% once(s, 'mun_frt_init') %>\n\n<span id=\"mun_frt_init\">The next car must be the communications car. That's the one that drives the train, manages the programmed firing sequence, and relays sensor data back to base as it passes through each station's wired uplink.\n\n</span><%%>\n\n<% if (s.entryAlarm) { %>Red alarm lights are swirling over the cages. You need to get that system shut off before the next station.\n\n<% } %>\n\nThere is an [[access panel|Munitions Panel]] here with a small display that reads: <%= s.weapState %>&nbsp;\n\n[[Head to the back of the car.|Munitions Rear]]\n<% if (s.doorsLocked) { %>\n[[Move forward to the comm car.|Munitions Locked]]\n<% } else { %>\n<% s.nextPassage = 'Comm Rear' %>\n[[Move forward to the comm car.|Between Cars]]\n<% } %>"},{name:"Leave the train.",body:'<% if (s.ditchedBike) { %>\nThe train\'s not getting any slower. You\'re going to have to tuck and roll and hope for the best.\n\nYou leap from the side of the train. You hit the ground, jarring your frame. You try to tuck into a roll, but you can feel your limbs flailing outward. Searing pain across your face, your right arm. You tumble for an eternity, bleeding all the momentum of a speeding train off your body.\n\nYou finally come to rest on your back. The stars shine. You touch your face and feel hot, sticky blood on your fingers.\n\nYou\'ll live.\n\nSo will they.\n\n<% } else { %>\nYou carefully climb back onto the bike\'s outrigger, then hop back into the seat. You cut the winch loose and let the cable spool out in front of you as you slowly decelerate.\n\nYou come to a stop. The night is still. You feel good. \n\nTime to head for home.\n\n<% } %>\n\n<small><span class="whistle">Whistler\'s Motive</span> was produced for <a href="http://js13kgames.com">Javascript 13K Games</a> competition by <a href="http://twitter.com/mildmojo">@mildmojo</a>. See the source at <a href="https://github.com/mildmojo/whistler">GitHub</a>.</small>'},{name:"Munitions Rear",body:"<% s.location = 'Munitions Car' %>\n\n<% if (s.roofOpen) { %>\nThe wind swirling in through the open roof smells faintly of metal and diesel.\n\n<% } else { %>\nIt smells like metal and old smoke here.\n\n<% } %>\n\nIn the <%= s.entryAlarm ? 'garish, swirling red light' : s.roofOpen ? 'moonlight' : 'dim glow' %>, you see cages filled with monstrous machinery. There are racks of missiles, a couple of artillery cannons, and several anti-aircraft turrets. <% if (s.roofOpen) { %>The stars are visible above.\n\n<% } %>\n\nThe aisle continues ahead, but it's so narrow you have to remove your backpack and carry it while you shuffle sideways.\n\n[[Exit to the back of the train.|Outside train rear]]\n[[Advance to the front of the car.|Munitions Front]]"},{name:"Munitions Panel",body:"The display reads '<%= s.weapState %>'. The panel looks like brushed steel; smooth and featureless. Your fingers find a data port under the bottom edge of the faceplate.\n\n[[Connect your handset.|Munitions Handset]]\n[[Back|Munitions Front]]"},{name:"Between Cars",body:"<% s.location = '' %>\nThe cars roll and sway. You carefully time your step over the coupling to keep your balance, and slide the door open.\n\n[[Enter the next car.|Comm Rear]]\n"},{name:"Munitions Handset",body:"<%\nvar events = {}; \nif (!s.roofOpen) events.open = 'Munitions Open Roof';\nif (s.knownWhistles.indexOf('unlock') > 0 && s.doorsLocked) events.unlock = 'Munitions Unlock';\n%>\n\nYou connect the handset. There's an audible heartbeat on the other end, a slow beep from a cold machine.\n\n<% s.knownWhistles.forEach(function(whistle) { %>\n[[Whistle <span class=\"whistle\"><%= whistle %></span>.|<%= events[whistle] || 'Nothing happens' %>]]\n<% }); %>\n[[Back|Munitions Front]]"},{name:"Nothing happens",body:"Nothing happens.\n\n[[Back|js:back()]]"},{name:"Munitions Open Roof",body:"<% s.roofOpen = true %>\n<% s.knownWhistles.push('unlock') %>\n<% s.weapState = 'UNLOCKED' %>\n\nYou startle as the ceiling cracks open along the length of the car. Metal-on-metal scraping reverberates through the space like the world's worst garage door opener. In a few moments, the cages are exposed to the moonlight.\n\nYou hear a new system tone through the handset, and the missile racks click loose. This must be an unlocking command! You commit the tone to memory.\n\n[[Continue.|Munitions Front]]\n"},{name:"Munitions Unlock",body:"<% s.doorsLocked = false %>\nTo your left, the front door makes a <i>whirrrr-click</i> sound.\n\n[[Continue.|Munitions Front]]"},{name:"Comm Rear",body:"<% s.location = 'Comms Car' %>\n\nThere's a sea of blinking lights and display screens in front of you. This is the automated core of the train.\n\nThe walkway here is wider than the munitions car, but only just.\n\n<% if (s.entryAlarm) { %>\n<% countdown(s, 'Station Comm Alarm', 20) %>\nA red beacon above your head washes over your surroundings. The alarm is still active, and you're coming up on a station in a few minutes. Shutting it off is imperative.\n\nYou spot a small screen at waist height that's flashing a crude, blocky pixel diagram of the train. The munitions car is flashing the word \"BREACH\". There's a [[data port|Comm Alarm Port]] a few inches away on the same panel.\n\n<% } else { %>\nThe space is lit only by the glow of buttons, indicators, and cathode ray tubes.\n\n<% } %>\n\n<% s.nextPassage = 'Munitions Front' %>\n[[Exit to the munitions car.|Munitions Front]]\n[[Walk to the front.|Comm Front]]\n"},{name:"Comm Front",body:"<% s.location = 'Comms Car' %>\nNear the front of the car, you see a [[terminal|Comm Terminal]] that looks like a descendant of old teletype systems from a couple decades prior. Modern, the military ain't. The print head periodically buzzes as it writes a line to tractor-fed fanfold paper, shrill over the rumble of the track.\n\n<% if (s.entryAlarm) { %>\nThe alarm flasher at the rear of the car sprays the walls in red like a bloody lighthouse.\n\n<% } %>\n\n[[Walk back to the rear.|Comm Rear]]\n[[Move to the next car.|Fuel welded shut]]"},{name:"Munitions Locked",body:"The door won't move a millimeter. Locked up tight. You're all out of prybars. There must be another way.\n\n[[Back|js:back()]]"},{name:"Station Comm Alarm",body:'<% s.location = \'\' %>\n<% for (var i = 1; i <= 7; i++) {\n  delay(\'line\' + i, i * 3000);\n}%>\n\nThe bright lights of the station push through small apertures in the car\'s walls. \n\n<span id="line1" class="hidden">The car doors make a <i>whirrr-click</i> sound as they lock you inside.</span>\n\n<span id="line2" class="hidden">Everything goes dark. The computer was able to notify command that you compromised the train, and received orders to lock itself down against physical tampering.</span>\n\n<span id="line3" class="hidden">You try connecting your handset to a data port only to receive a shower of sparks. The handset is smoking now. Burnt crisp.</span>\n\n<span id="line4" class="hidden">The train will complete its mission.</span>\n\n<span id="line5" class="hidden">The Portsmouth infolib cell is as good as dead. Your future isn\'t much brighter.</span>\n\n<span id="line6" class="hidden">You get to sit here in the dark, knowing exactly what\'s about to happen, powerless to stop it. When the strike is over, you\'ll be delivered back to Brunswick Naval Air Station. They\'ll have a welcoming party ready for you, with bright lights, barking dogs, and men with guns.</span>\n\n<span id="line7" class="hidden">[[Restart.|js:restart()]]</span>\n\n'},{name:"Comm Alarm Port",body:'You wire your handset to the data port near the alarm display, but you\'re not sure what to do.\n\n<% s.knownWhistles.forEach(function(whistle) { %>\n[[Whistle <span class="whistle"><%= whistle %></span>.|Nothing happens]]\n<% }); %>\n[[Back|Comm Rear]]\n'},{name:"Fuel welded shut",body:"<% s.location = '' %>\n\nYou pass through the door at the front of the comm car and stand in the night air. The cars sway out of time with each other. In the moonlight, you can see that the fuel car's door is welded shut. A solid bead runs the entire perimeter of the doorway. You can only guess at the reason.\n\nThe smell of diesel is much stronger here.\n\n[[Go back.|Comm Front]]"},{name:"Comm Terminal",body:'<% s.location = \'\' %>\nYou examine the paper. It\'s recording the alarm and disappearing into a lockbox, so you won\'t be able to remove the permanent record of your presence. Maybe you can do something about the immediate danger, though.\n\nThe printout looks like a series of commands and acknowledgements. Maybe you can manually enter a command and trick the system into accepting it?\n\n[[Enter <span class="whistle">stop</span>.|bad entry]]\n[[Enter <span class="whistle">continue</span>.|bad entry]]\n[[Enter <span class="whistle">loop</span>.|good loop]]\n[[Enter <span class="whistle">ack</span>.|bad entry]]\n'},{name:"bad entry",body:'The terminal prints, "BAD COMMAND".\n\n[[Try again.|Comm Terminal]]'},{name:"good loop",body:'No response. Maybe no news is good news?\n\nYou try another command.\n\n[[Enter <span class="whistle">stop</span>.|bad entry]]\n[[Enter <span class="whistle">continue</span>.|bad entry]]\n[[Enter <span class="whistle">loop</span>.|bad entry]]\n[[Enter <span class="whistle">ack</span>.|loop accepted]]\n'},{name:"loop accepted",body:'<% s.location = \'\'; %>\n<% for (var i = 1; i <= 7; i++) {\n  delay(\'line\' + i, i * 2500);\n}%>\n<% s.exitAllowed = true %>\n<% s.entryAlarm = false %>\n<% countdown(s, \'Station Comm Alarm\', 0) %>\n\nThe printer spits out a new line: "LOOP ACCEPTED, EXECUTING..."\n\n<span id="line1" class="hidden">You didn\'t give it a finish condition.</span>\n\n<span id="line2" class="hidden">The printer spits out another line: "LOOP ACCEPTED, EXECUTING..."</span>\n\n<span id="line3" class="hidden">The printer keeps spitting out "LOOP ACCEPTED" lines over and over. You notice the display screens stop updating.</span>\n\n<span id="line4" class="hidden">You rumble through the station.</span>\n\n<span id="line5" class="hidden">No change on the displays. The core is locked up! It should be unable to process any commands, including the ones installed by the military in Brunswick.</span>\n\n<span id="line6" class="hidden">Seems like a good time to leave.</span>\n\n<span id="line7" class="hidden">[[Continue.|Comm Front]]</span>'}]},function(module,exports){module.exports=parse;function parse(str,context){var funcLines=["(function(context){","var s = context;",'var _outStr = "";'];while(str.length>0){var chunks=str.match(/([.\s\S]*?)<%([.\s\S]*?)%>\n*/);if(chunks){var match=chunks[0];var text=chunks[1];var code=chunks[2];funcLines.push(prepareText(text));funcLines.push(prepareCode(code));str=str.substr(match.length)}else{funcLines.push(prepareText(str));str=""}}funcLines.push("return _outStr; })");var ejsFunc=eval(funcLines.join("\n"));var output=ejsFunc(context);return output}function prepareText(text){var cleanText=text.replace(/"/g,'\\"').replace(/\n/g,"\\n");return'_outStr += "'+cleanText+'";'}function prepareCode(code){var cleanCode=code;if(cleanCode.match(/^=/)){cleanCode="_outStr += "+cleanCode.substr(1)+";"}return cleanCode}function delay(id,delayMS){setTimeout(function(){unhide(id)},delayMS)}function emitHideStart(id){return'<span id="'+id+'" class="hidden">'}function emitHideEnd(id){return"</span>"}function hide(id){setTimeout(function(){var el=document.querySelector("#"+id);el.classList.add("hidden")},0)}function unhide(id){setTimeout(function(){var el=document.querySelector("#"+id);el.classList.remove("hidden")},0)}function once(gameState,id){if(gameState.once[id]){hide(id)}else{gameState.once[id]=true}}function countdown(gameState,passageName,numTurns){if(numTurns===0)return delete gameState.countdowns[passageName];if(gameState.countdowns[passageName]>0)return;gameState.countdowns[passageName]=numTurns}},function(module,exports){module.exports=function preprocessor(passageObj){preprocessors.forEach(function(proc){passageObj=proc.call(null,passageObj)});return passageObj};var preprocessors=[function addLinks(passage){var links=[].concat(passage.body.match(/\[\[([^|\]]+)\|?(.*?)\]\]/g));if(links.length===0||links[0]===null)return passage;links.forEach(function(link){var parts=link.match(/\[\[([^|\]]+)\|?(.*?)\]\]/);var name=parts[1];var target=parts[2]||name;var cleanTarget=clean(target);var anchor='<a href="#" class="passage '+cleanTarget+'-link" passage="'+target+'">'+name+"</a>";passage.body=passage.body.replace(link,anchor)});return passage},function addStructure(passage){passage.body='<div class="passage '+clean(passage.name)+'">'+'<div class="passage-body">'+passage.body+"</div>"+"</div>";return passage}];function clean(str){var cleanStr=str.replace(/[^\w]/g,"-").replace(/^-*/,"").replace(/-*$/,"").toLowerCase();return cleanStr}}]);