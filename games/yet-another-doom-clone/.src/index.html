<!DOCTYPE html><html><head><title>Yet Another Doom Clone</title></head><body><style>body{margin:0px;background:#000}#qQ{position:absolute;left:35vw;top:4em;font-size:2em;font-variant:small-caps;color:#aaa;animation:z 9s;}#cQ{height:100%;width:100%}#hQ{top:0px;width:10vw;height:2vh;border:3px solid #008;border-radius:3px;display:none}#fps{display:none}#hW{height:2vh;background:#00a}@keyframes q{50%{opacity:0}}.b{animation:q 1s linear infinite}@keyframes z{from{opacity:0}to{opacity:1}}</style><canvas id=cQ></canvas><div id=qQ><div id=hE>Yet Another Doom Clone<br><br><div class=b>Loading... <span id=jQ></span></div><br><br>Move: WASD<br>Aim/Shoot: Mouse/Click<br><br><br><br>By Nicholas Carlini</div><div id=hQ><div id=hW></div></div></div></body><script>class t{constructor(){var t,i,s,h,n,r,e,o,_,a;this._={},this.A=(()=>{var t=this._;i=100/(t.f**2+.001),s=100/(t.g**2+.001),h=1-t.h**3*.01,n=1e-6*-(t.i**3),3==t.a&&(_=.5-t.n/2,a=5e-5*-t.o),r=1+t.l**2*(t.l>0?-.9:10),e=0,o=1==t.m?0:(1-t.m)**2*2e4+32}),this.M=(()=>{this.A();var i=this._;return t=[i.b**2*1e5,i.c**2*1e5,i.e**2*1e5,1],B(t)}),this.C=((l,u)=>{var c=this._,v=1!=c.s||c.v,d=c.v**2*.1,w=1+3e-4*c.w,p=c.s**3*.1,g=c.x**2,x=c.q||c.r,A=c.q**2*(c.q<0?-1020:1020),b=c.p?32+((1-c.p)**2*2e4|0):0,y=c.j/2,Q=c.a,M=t[0],C=5/(1+c.u**2*20)*(.01+p);C=1-z(C,0,.8);var j,R,T,E,D=!1,G=0,H=0,K=0,k=0,q=0,F=0,Z=0,N=0,V=0,X=0,J=0,S=new Array(1024),O=m(32).map(t=>f());S.fill(0);for(var Y=0;Y<u;Y++){if(D)return Y;b&&++V>=b&&(V=0,this.A()),o&&++e>=o&&(o=0,i*=r),(i*=h+=n)>s&&(i=s,D=c.g>0),R=i,y>0&&(J+=c.k**2*.01,R*=1+ji(J)*y),R=0|z(R,8,1e9),3==Q&&(_=z(_+a,0,.5)),++H>M&&(H=0,M=t[++G]);var W=H/t[G];K=[W,1+2*(1-W)*c.d,1-W,0][G],D|=3==G,x&&(A+=c.r**3*.2,(T=0|A)<0?T=-T:T>1023&&(T=1023)),v&&w&&(d=z(d*w,1e-5,.1)),l[Y]=B(m(8).map(t=>(++Z>=R&&(Z%=R,Q<=1&&m(O.length).map(t=>{1==Q?(O[t]=X=(X+.02*f())/1.02,O[t]*=3.5):O[t]=f()})),E=[O[Ti(32*Z/R|0)],O[Ti(32*Z/R|0)],NaN,Z/R<_?.5:-.5,E=1-Z/R*2][Q],v&&(j=F,p=z(p*(1+1e-4*c.t),0,.1),1!=c.s?(q+=(E-F)*p,q*=C):(F=E,q=0),k+=(F+=q)-j,E=k*=1-d),x&&(S[N%1024]=E,E+=S[(N-T+1024)%1024],N++),E)))*K*g*(.5+1.5*(1==Q))}return u})}}var i={};function s(s){if(i[s])return i[s];var h=new t,n=h._;m(24).map(t=>n[String.fromCharCode(97+t)]=s[t]||0),n.c=Ei(n.c,.01);var r=h.M(),e=m(0|r);return h.C(e,r),i[s]=e}var h,n={},r=new AudioContext,e=(t,i)=>{var s=r.createBuffer(1,t.length,48e3);s.copyToChannel(new Float32Array(t),0,0);var h=r.createBufferSource(),n=r.createStereoPanner();return h.buffer=s,h.connect(n),n.pan.value=i?zi(C(i,Yt.B)+Yt.R+Bi/2):0,n.connect(r.destination),h.start(),h},o=[];function _(){o.length<2&&!xi&&ni&&h.map((t,i)=>t.map(t=>o.push(setTimeout(i=>{o.shift(),e(t,b(20,-40,0)),1==o.length&&_()},200*i+400))))}var a,l=t=>w(t).map(B);function u(){var t=[null,19,17,19,15,19,14,19,12,19,11,19,12,19,14,19,15,19,7,19,9,19,11,19,12,19,11,19,12,19,14,19],i=[[0,1,1,t],[5,1,2,t,[15,16,17,10,8,7,8,10,12,4,5,7,8,7,8,4]],[0,2,1,[20,24,20,24,25,17,25,17,22,19,22,19,24,15,24,15,20,17,20,17,23,14,23,14,19,15,19,15,17,11,17,11,15,12,15,12,14,8,14,8],[5,17,5,17,12,17,12,17,10,13,10,13,10,13,10,13,10,15,10,15,10,15,10,15,8,12,8,12,8,12,8,12,8,14,8,14,8,14,8,14,7,11,7,11,7,11,7,11,3,12,3,12,3,12,3,12,2,8,2,8,2,8,2,8,0,19,0,19,0,19,0,19,2,5,2,5,2,5,2,5]],[12,1,2,t,[3,2,0,5,3,2,3,-1,0,-1,0,2,3,2,3,-1]],[12,1,4,[15,19,14,19,12,19,10,19,8,19,10,19,12,17,20,17,14,17,12,17,10,17,20,17,7,17,8,17,10,15,7,15,12,15,10,15,8,15,7,15,5,15,19,15,8,14,5,14,11,14,8,14,7,14,5,14,3,14,5,14],[7,12,12,null,10,10,10,null,9,9,9,null,7,7,7],[0,3,5,null,-2,2,3,null,-4,0,2,null,-5,-1,12]],[0,1,2,[19,24,15,24,14,26,14,26,15,24,15,24,20,23,20,23,19,24,15,24,14,26,14,26,15,24,15,24],[null,12,11,11,12,12,14,null,null,12,11,11,12,12,14],[null,3,8,8,7,7,17,null,null,7,8,8,7,7,6]]];h=m(300).map(t=>[]);var n=0,r=t=>{var[e,o,_,...a]=i.shift();a.map((t,r)=>t.map((t,a)=>((t,i,r,e)=>{if(null!=i){var o=.11*e+.13;h[r+n].push(l([i/12,i/12-1].map(i=>(i=2**(i/2)*.25,s(t?[3,.1,o,.1,.3,i,,,,,,,,.5,,,-1,,.2,,,,,.1]:[3,.1,o+.07,.3,.5,i,,,,,,,,,,,,,.15,,,,,.1])))))}})(!r&&i.length<5,null==t?null:t+e*!r,a*(r?_:o),r?_:o))),n+=o*a[0].length,jQ.innerHTML=6-i.length+"/6",setTimeout(i.length?r:_i,1)};setTimeout(r,1)}var c,v,d=(t,i)=>t.slice(0,-1).map((s,h)=>i(s,t[h+1],h)),w=t=>t[0].map((i,s)=>t.map(t=>t[s])),m=(t,i)=>Array(t).fill().map((t,s)=>s+(i||0)),p=(t,i)=>m(t.length/i).map(s=>t.slice(s*i,(s+1)*i)),f=t=>2*Ri()-1,g=t=>b(f(),f(),f());var x=(t,i,s)=>[].concat(...t.map(t=>i.map(i=>s(t,i)))),A=(t,i,s)=>t.G(i).D(s.G(i)).T(),b=(t,i,s)=>new H(t,i,s),y=t=>b(...t),Q=t=>t.reduce((t,i)=>t.H(i)),M=t=>Q(t).K(1/t.length),C=(t,i)=>Math.atan2(t.G(i).x,t.G(i).y),j=(t,i)=>(t.push(i),t),z=(t,i,s)=>Math.min(Ei(i,t),s),B=t=>t.reduce((t,i)=>t+i),R=t=>[1,0,0,0,0,zi(t),-ji(t),0,0,ji(t),zi(t),0,0,0,0,1],T=t=>[zi(t),0,-ji(t),0,0,1,0,0,ji(t),0,zi(t),0,0,0,0,1],E=t=>[zi(t),-ji(t),0,0,ji(t),zi(t),0,0,0,0,1,0,0,0,0,1],D=t=>[1,0,0,t[0],0,1,0,t[1],0,0,1,t[2],0,0,0,1],G=D([0,0,0]);class H{constructor(t,i,s){this.x=+t||0,this.y=+i||0,this.z=+s||0}H(t){return b(this.x+t.x,this.y+t.y,this.z+t.z)}G(t){return this.H(t.F())}F(){return this.K(-1)}K(t){return b(this.x*t,this.y*t,this.z*t)}Z(t){return b(this.x*t.x,this.y*t.y,this.z*t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}N(){return[this.x,this.y,this.z]}V(){return j(this.N(),0)}X(t,i){return this.K(1-i).H(t.K(i))}D(t){return b(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}J(){return y(this.N())}S(){return this.dot(this)}O(){return this.S()**.5}Y(t){return this.G(t).O()}noz(){return b(this.x,this.y,0)}T(){return this.K(1/(this.O()+1e-30))}id(){return""+this.N().map(t=>t.toFixed(4))}}function K(t,i,s,h){var n=t.G(s),r=h.G(s),e=b(-i.y,i.x,0);if(s=(r.x*n.y-r.y*n.x)/r.dot(e),h=n.dot(e)/r.dot(e),s>=0&&h>=0&&h<=1)return[s,h]}var k=new H(0,0,0),q=b(1,0,0),F=b(0,1,0),Z=b(0,0,1);function N(t){var i=[],s=[],h=[];return t.map(t=>{i.push(p(Array.from(t.W),3).map(i=>v(t.L,y(i)).H(t.B).N())),s.push(p(Array.from(t.I),3).map(i=>v(t.L,y(i)).T().N())),h.push(Array.from(t.$))}),new V([i.flat(2),s.flat(2)],k,G,!1,h.flat())}class V{constructor(t,i,s,h,n,r){this.W=new Float32Array(t[0]),this.I=new Float32Array(t[1]),this.P=new Float32Array(t[0].map(t=>Bi/2)),this.B=i,this.U=[Jt.createBuffer(),Jt.createBuffer(),Jt.createBuffer(),Jt.createBuffer()],this.L=s||G,this.tt=h,n=n||[1,1,1],this.$=new Float32Array(n.length==t[0].length?n:Array(t[0].length/3).fill(n).flat()),[this.it,this.st]=r||[0,0],this.ht()}ht(){[this.W,this.I,this.$,this.P].map((t,i)=>{Jt.ned(Jt.YEA,this.U[i]),Jt.ftf(Jt.YEA,t,35048)})}nt(){this.tt&&$t==Ut||(Jt.uniform4fv($t.g,this.B.F().V()),Jt.uniformMatrix4fv($t.h,!1,this.L),[$t.w,$t.G,$t.K,$t.P].map((t,i)=>{void 0!==t&&-1!==t&&(Jt.rab(t),Jt.ned(Jt.YEA,this.U[i]),Jt.bet(t,3,5126,!1,0,0))}),Jt.uniform1i($t.e,this.st),Jt.uniform1i($t.s,this.it-20),Jt.uniform1i($t.l,this.tt),Jt.ayw(Jt.REA,0,this.W.length/3))}}var X=()=>{var t=t=>`(a,b)=>[${p(m(16),4).map(i=>t[0].map((s,h)=>t.reduce((t,s,n)=>`${t}+b[${s[h]}]*a[${i[n]}]`,0))).flat()}]`;c=eval(t(p(m(16),4)));var i=eval(t(p(m(4),1)));v=((t,s)=>y(i(t,s.V())))};function J(t,i,s,h,n){var r=k;t=p(t,2).map(t=>r=b(0,...t).H(r));var e=m(i).map(s=>t.map(t=>v(E(2*Bi/i*s),t))).flat(),o=t.length,_=x(m(o-1),m(i),(t,i)=>[0+t+i*o,1+t+i*o,o+1+t+i*o,o+t+i*o]);return h&&(_.push(m(i).map(t=>t*o)),_.push(m(i).reverse().map(t=>t*o+o-1))),e=e.map(n||(t=>t)),S(_=_.map(t=>t.map(t=>e[t%e.length])))}function S(t){var i=[],s=[],h={};return t.map(t=>d(t,(i,s)=>[t[0],i,s]).slice(1)).flat(1).map(t=>{var n=A(...t);t.map((t,i)=>h[t.id()]=j(h[t.id()]||[],s.length+i)),i.push(...t),s.push(n,n,n)}),i.map(t=>{var i=h[t.id()],n=i.map(t=>s[t]),r=M(n);n.every(t=>r.dot(t)>.8)&&i.map(t=>s[t]=r)}),[i.map(t=>t.N()).flat(),s.map(t=>t.N()).flat()]}var O=`#version 300 es\n precision mediump float;in vec4 J,m,N,L,a[5];uniform bool l,d[5];uniform int b,s,e;uniform vec4 t,f[5];uniform float k,c[5];uniform sampler2D D[9];out vec4 C;vec4 v(int i,vec2 R){switch(i){${m(9).map(t=>"case "+t+":return texture(D["+t+"],R)").join`;`};}}`;function Y(t,i,s){var h=t.createShader(i);return t.ecd(h,s),t.lep(h),h}function W(t,i){var s=t.createProgram(),h="#version 300 es\n precision mediump float;in vec4 w,G,K,P;out vec4 J,m,N,L;out vec4 a[5];uniform vec4 g,f[5];uniform mat4 h,p[5];void main(){m=w*h-g;J=G*h;for(int i=0;i<5;i++){gl_Position=a[i]=p[i]*m;}N=K;L=P;}";t.attachShader(s,Y(t,t.XET,h)),t.attachShader(s,Y(t,t.TEG,i)),t.kak(s);var n={},r=!0;return(O+h).match(/[a-zA-Z_]+(\[[0-9]\])?/g).map(i=>{var h=[i];i.indexOf`[`>0&&(h=m(32).map(t=>i.replace(/[0-9]/,t))),"in"==i&&(r=!0),"uniform"==i&&(r=!1),h.map(i=>n[i]=n[i]||(r?t.LoA(s,i):t.LoU(s,i)))}),[s,n]}class L{constructor(t,i,s,h,n,r,e){this.B=t,this.rt=i,this.R=r||0,this.et=e||0,this.ot=0,this._t=1028,this.at=h,this.fov=s,this.lt=i[0]/i[1],this.ut=this,this.ct=n,[this.it,this.vt]=it(n,h,...i)}dt(){var t,i,s,h,n;Jt.med(Jt.MEM,this.vt),nt.map((t,i)=>{Jt.eri(Jt.E1T+i),Jt.drd(Jt.X2T,t),Jt.uniform1i($t[`D[${i+4}]`],i+19)}),j(ii.slice(0,4),this).map((r,e)=>{Jt.uniform4fv($t[`f[${e}]`],r.B.V()),Jt.uniformMatrix4fv($t[`p[${e}]`],!0,(t=r.ut.fov,i=r.ut.lt,s=[T(r.ut.ot),R(r.ut.et),E(r.ut.R)].reduce(c),h=r.ut.B,[[(n=Math.tan(Bi/2-t/2))/i,0,0,0,0,0,n,0,0,1,0,0,0,1,0,1],s,D(h.F().N())].reduce(c))),4!=e&&(this.at||(Jt.eri(33984+r.id),Jt.drd(Jt.X2T,r.filter.it),Jt.uniform1i($t[`D[${e}]`],r.id)),Jt.uniform1i($t[`d[${e}]`],r.wt),Jt.uniform1f($t[`c[${e}]`],r.pt))}),!xi||I++%200<10?(Jt.uniform1f($t.k,.05),ii[0].pt=1.2,ii[1].pt=1.2,ii[2].pt=1.5,ii[3].pt=4):(Jt.uniform1f($t.k,1e-4),ii[0].pt=7,ii[1].pt=0,ii[2].pt=8,ii[3].pt=30),Jt._aa(Jt.FIO|Jt.FIT),Jt._lb(Jt.PST),this._t&&(Jt._lb(Jt.UCL),Jt.ccl(this._t)),Jt.vrw(0,0,this.rt[0],this.rt[1]),ti.map(t=>{this.at&&t.gc||t.nt()}),Jt.med(Jt.MEM,null)}}var I=0;function $(t,i,s,h,n){var r=new V(J([5,0],4,0,1),k,null,!1),[e,o]=W(Jt,O+` vec4 M(int i,vec2 Q){return v(i,(m.xy*.5+.5)+Q/vec2(${0|i}.,${0|s}.));}vec4 M(){return M(0,vec2(0));}void main(void){${t}}`);[this.it,this.vt]=it(31,h==Jt.RG,i,s),this.ft=((t,h)=>(Jt.med(Jt.MEM,this.vt),Jt.eaP(e),Jt.uniform4fv(o.t,pi),[[t,"D[0]",30],[h,"D[1]",29]].map(t=>{t[0]&&(Jt.eri(33984+t[2]),Jt.drd(Jt.X2T,t[0]),Jt.uniform1i(o[t[1]],t[2]))}),Jt.uniform4fv(o.g,[0,0,0,0]),Jt.uniformMatrix4fv(o.h,!1,G),Jt.uniformMatrix4fv(o["p[4]"],!1,G),Jt._aa(Jt.FIO|Jt.FIT),Jt.vrw(0,0,i,s),$t=o,r.nt(),this.it))}var P=" vec4 O;for(float i=-6.;i<7.;i++){for(float j=-6.;j<7.;j++){O+=exp(-i*i/9.-j*j/9.)*M(0,vec2(j,i));}}C=O/28.17;";function U(){var t=Jt._av.width,i=Jt._av.height,s=[new $(" C=dot(M(),vec4(21,72,7,0))>100.?M():vec4(0,0,0,1);",t,i,6408),new $("C=M();",t/4,i/4,6408),new $(P,t/4,i/4,6408),new $("C=M();",t,i),new $("C=vec4(t.rgb+t.w*(M(1,vec2(0))+M()).rgb,1.);",t,i,6408),new $("C=M();",t,i,6408)];return s[5].vt=null,ci>3?(Yt.vt=null,m):t=>s.reduce((i,s)=>s.ft(i,t),t)}function tt(t,i,s,h,n){var r=Jt.era();return Jt.eri(33984+t),Jt.drd(Jt.X2T,r),Jt.x2I(Jt.X2T,0,i?33328:34836,s,h,0,i?Jt.RG:6408,5126,n),r}function it(t,i,s,h){var n=tt(t,i,s,h);Jt.texParameteri(Jt.X2T,Jt.NET,Jt.LINEAR),Jt.texParameteri(Jt.X2T,10242,Jt._GM),Jt.texParameteri(Jt.X2T,10243,Jt._GM);var r=Jt.createFramebuffer();Jt.med(Jt.MEM,r),Jt.e2m(Jt.MEM,36064,Jt.X2T,n,0);var e=Jt.createRenderbuffer();return Jt.eed(Jt.EED,e),Jt.rgd(Jt.EED,Jt.P1T,s,h),Jt.eem(Jt.MEM,36096,Jt.EED,e),[n,r]}var st=0;class ht{constructor(t,i,s,h){var n=1024>>ci;this.B=t,this.ut=new L(t,[n,n],st?2.5:1,!0,this.id=st++,i,s),this.wt=h,this.it=this.ut.it,this.pt=2,this.filter=new $(P,n/2,n/2,Jt.RG)}gt(){this.ut.B=this.B,Jt.eaP(It),$t=Ut,Jt.eri(33984+this.id),Jt.drd(Jt.X2T,this.it),Jt.uniform1i($t.b,this.id),this.ut.dt(),Jt.med(Jt.MEM,null),this.filter.ft(this.it)}}var nt=[];function rt(t){nt.push(tt(10,0,256,256,new Float32Array(t))),Jt.generateMipmap(Jt.X2T),Jt.texParameteri(Jt.X2T,Jt.NET,Jt.PAE)}class et{constructor(t,i,s,h,n){this.xt=t,this.At=!0,this.B=t.B,this.R=i,this.bt=s,this.yt=h,this.Qt=b(-ji(this.R)*this.bt,zi(this.R)*this.bt,0),this.offset=n||0}Mt(){this.B=this.xt.B.H(Z.K(this.offset)),this.Ct=this.xt.Ct}nt(){}jt(t){return this.xt.jt(t)}}class ot extends et{constructor(t,i,s,h){h<0&&(h=-h,t.z-=h),super({B:t,jt:t=>{}},i,s,h)}}class _t extends ot{constructor(t,i){super(t,i,32,30),this.uid=i,this.zt=i==Bi/2?new V(Ft(b(1,64,40)),this.B,E(i),null,[1,1,1],[21,2]):N(m(20).map(s=>new V(kt(b(1,1,40)),t.H(v(E(i),b(0,4*s-40,0))),T(Bi/2),1,Qt[8*i/Bi])))}nt(){this.zt.nt()}}class at{constructor(t,i,s,h){this.zt=t,this.B=i,this.Bt=s,this.Rt=h,this.dz=.003,this.Et=.999,this.Dt={}}Mt(t){if(this.Tt)return!0;this.Bt.z-=this.dz*t,this.Bt=this.Bt.K(this.Et**t),this.B=this.B.H(this.Bt.K(t/16));var i=St.Gt(this.B,this.Dt)+.5;this.Rt?this.B.z<i&&(this.die&&this.die(),this.Ct=!0):(this.B.z<i&&(this.Tt=this.Bt.O()<.1,this.B.z=i,this.Bt.z=-this.Bt.z,this.Bt=this.Bt.K(.8)),mt(this.B,this.B.H(this.Bt.K(2))).map(t=>{this.jt&&this.jt(t[1]),t[1].jt&&t[1].jt(this);var i=t[0].G(this.B);this.Bt.y*=Ti(i.y)>.1?-1:1,this.Bt.x*=Ti(i.x)>.1?-1:1,this.B=this.B.X(t[0],1.3)}))}nt(){this.zt.B=this.B,this.zt.nt()}}class lt extends at{constructor(t,i,s){super(t,i,s),this.Ht=g()}Mt(t){if(!super.Mt(t)){var i=t*this.Bt.O()*.005;this.zt.L=c(this.zt.L,[E(this.Ht.x*i),R(this.Ht.y*i),T(this.Ht.z*i)].reduce(c))}}}class ut extends at{constructor(t,i){t=t.H(i),super(new V(Ht,t,E(Math.atan2(i.y,i.x)),1,[5,0,0],[22,1]),t,i),this.dz=0,this.Et=1,this.start=vi}Mt(t){super.Mt(t),this.B.Y(Yt.B)<5&&(zt(this.B),this.Ct=!0),this.Ct|=vi-this.start>1e4}jt(){m(30).map(t=>ti.push(new xt(this.B,2))),this.Ct=!0}}var ct=0;class vt{constructor(t,i,s,h){this.B=t.H(Z.K(5)),this.R=i||0,this.Dt={},this.Kt=0,this.kt=0,this.yt=s,ti.push(new et(this,0,h,2*h,-s)),ti.push(new et(this,Bi/2,h,2*h,-s)),this.Ft=t,this.Zt=0,this.Nt=100*f(),this.Vt=.1,this.Xt=50,this.Jt=0}St(){ti.map(t=>{t instanceof vt&&t.B.Y(this.B)<100&&!mt(t.B,this.B,!1,!0).length&&(t.Zt=t.Kt=1)})}jt(t){t||(this.Ct=!0,ct++%(5+2*ui)==0&&ti.push(new yt(this.B.noz().H(Z.K(St.Gt(this.B,this.Dt))))),m(30).map(t=>ti.push(new xt(this.B,4))),this.St(),e(n.Ot),this.Yt.map(t=>{ti.push(new lt(t,this.B.H(t.B),v(E(-Yt.R),b(f(),3+f(),1+Ri()))))}))}Mt(t){this.qt=this.qt||[mt(this.B,this.B.H(v(E(this.R),b(1e5,0,0))),0,1)[0][0].G(v(E(this.R),b(5,0,0))),this.B];var i=-C(this.B,Yt.B);if(Ri()<1/t&&!this.Zt&&(Ti(i-this.R-Bi/2)<Bi/3||Ti(i-this.R-Bi/2)>2*Bi-Bi/3)&&!mt(Yt.B,this.B,!1,!0).length&&(this.St(),this.Zt=this.Kt=1),0==this.Kt){var s=this.B.H(b(zi(this.R)*t/this.Xt,ji(this.R)*t/this.Xt,0)),h=St.Gt(s,this.Dt),n=Yt.B.G(this.B).O()<10&&s.Y(Yt.B)<this.B.Y(Yt.B);if(n&&zt(this.B),mt(this.B,this.Ft,!1,!0).length>0||n||Ti(h-this.B.z+this.yt)>5+this.Jt)return this.Ft=this.B.H(g().K(20).noz()),this.R=Bi*f(),void(this.Kt+=Ri()<.1);for(var r=this.Ft.G(this.B).noz(),e=Math.atan2(r.y,r.x);e-this.R>Bi;)this.R+=2*Bi;for(;this.R-e>Bi;)this.R-=2*Bi;this.R+=(e-this.R)*this.Vt,this.B=s,this.B.z=h*(this.Jt<10)+this.yt,r.O()<30/this.Vt/this.Xt&&(this.Zt?this.Kt=1:this.qt.unshift(this.Ft=this.qt.pop()))}if(1==this.Kt){r=Yt.B.G(this.B).T();this.Ft=this.B.H(r.K(10)),Ri()<.1&&!this.Jt?ti.push(new ut(this.B.H(Z.K(5)),Yt.B.G(this.B.H(Z.K(8))).T().K(2+ui))):this.Kt=0}}nt(t,i,s,h){this.Wt.map((s,n)=>s.L=c(E(this.R+Bi/2),h(ji(t[n]*this.Nt)/i[n]))),this.Wt.map((t,i)=>t.B=this.B.H(Z.K(zi(2*this.Nt)/3+5*(i>s)))),this.Wt.map(t=>t.nt())}}class dt extends vt{constructor(t,i){super(t,i,5,6),this.Yt=[[[2,3,5],[1.5,0,-5]],[[2,3,5],[-1.5,0,-5]],[[1.5,2,5],[-3.25,0,-5]],[[1.5,2,5],[3.25,0,-5]],[[5,2,5],[0,-.5,0],[.8,.8,.8]],[[4,5,4],[0,0,5],[.8,0,0]],[[.5,1.25,.5],[1,-2,7],[5,0,0]],[[.5,1.25,.5],[-1,-2,7],[5,0,0]],[[5,1,5],[0,1,0],[.4,.4,.4]]].map(t=>new V(Ft(y(t[0])),y(t[1]),null,!1,t[2])),this.Wt=[N(this.Yt.slice(4)),...this.Yt.slice(0,4).map(t=>N([t]))]}Mt(t){super.Mt(t),this.Nt<100&&ui&&(this.Nt+=100,ti.push(new wt(this.B,this.R))),this.Nt+=t/160}nt(){super.nt([0,1,-1,1,-1],[1,1,1,2,2],2,R)}}class wt extends vt{constructor(t,i){super(t.J(),i,8,6),this.Yt=this.Wt=[new V(qt(t=>t.Z(b(3,3*(.7-t.x),.1)).G(q.K(1.5))),k,0,0,[.3,.3,.3]),new V(qt(t=>v(E(Bi),t.Z(b(3,3*(.7-t.x),.1)).G(q.K(1.5)))),k,0,0,[.3,.3,.3]),new V(Ft(b(.8,3,.4)),k,0,0,[.3,.3,.3]),new V(qt(t=>t.Z(b(.2,3.3,.2)).H(b(0,0,.1))),k,0,1,[8,0,0])],this.Lt=5*f(),this.Vt=.1,this.Xt=20,this.Jt=50}Mt(t){super.Mt(t),this.Dt.o&&(this.yt+=.1*((this.Dt.o.It+this.Dt.o.$t)/2+this.Lt-this.yt));var i=2*ji(this.Nt/5)+ji(this.Nt);this.Nt+=t*(2+ji(this.Nt))/200;var s=2*ji(this.Nt/5)+ji(this.Nt);this.B.z+=s-i;var h=1-1.01**-Yt.B.G(this.B).noz().S();this.B.z=this.B.z*h+(Yt.B.z-10)*(1-h)}nt(){super.nt([1,-1,0,0],[1,1,1,1],9,T)}}function mt(t,i,s,h){var n=i.G(t).noz(),r=n.O();return ti.map(e=>{if(e.At&&(!h||e instanceof ot)&&!(r+2*e.bt<((e.B.x-t.x)**2+(e.B.y-t.y)**2)**.5)){var o=K(t,n,e.B.H(e.Qt),e.B.G(e.Qt));return o&&o[0]<=1&&e.B.z<t.X(i,o[0]).z&&t.X(i,o[0]).z<e.B.z+e.yt&&(!s||!(e instanceof _t)||e.uid==Bi/2||o[1]%.05<.02)?[t.X(i,o[0]),e]:void 0}}).concat(St.Pt.map(h=>{var n;if(s)return i.z<h.$t&&(n=t.X(i,(h.It-t.z)/(i.z-t.z))),h.$t<i.z&&(n=t.X(i,(h.$t-t.z)/(i.z-t.z))),n&&St.Ut(n)==h?[n,{}]:void 0})).filter(t=>t).sort((i,s)=>i[0].Y(t)-s[0].Y(t))}class pt{constructor(t,i,s){this.zt=new V(Dt(5),t.H(b(0,0,-1.5)).H(i.K(2)),0,1,[10,10,10]),this.c=0}nt(){this.zt.nt(),this.Ct=this.c++>2}}class ft{constructor(t,i){this.c=i,ii[3].B=t.J()}nt(){this.c--||(ii[3].B.z=1e9,this.Ct=!0)}}var gt=[];class xt extends at{constructor(t,i){var s=.8*Ri();super(gt.pop()||new V(Et,t.H(g().K(i)),0,1,[10*zi(s),10*ji(s),0]),t,new H(f()/2,f()/2,1.5+f()),!0),this.dz=.01}die(){this.zt.B.z=1e5,gt.push(this.zt)}}class At extends lt{constructor(t,i){super(new V(Gt,t,c(Ot.L,T(Bi/2)),0,[.4,.4,.4]),t,b(f(),f(),3.5+f()/2).G(i).K(.2))}}class bt{constructor(t,i){this.zt=i,this.zt.B=(this.B=t.H(Z.K(2))).J(),this.Nt=0,this.ti=10}ii(){e(n.ii),setTimeout(()=>e(n.si),150)}Mt(t){this.B.noz().Y(Yt.B.noz())<this.ti*(1+xi/2)&&(this.ii(),this.Ct=!0)}nt(){this.zt.nt()}}class yt extends bt{constructor(t){var i=J([.5,-.5,.6,.5,.3,.5,.3,.8,0,.5,-.2,.3,-.3,.3,-.4,.3,-.3,.3,-.1,.3,0,.5,-.2,.8],16,0,!0);super(t,new V(i,null,G,!1,[.1,.1,1]))}ii(){super.ii(),jt(1),Rt([0,0,1,.5])}}var Qt=[[.47,.74,.6],[.12,.4,.6],[.95,.85,.35],[.95,.33,.22],[0,1,0]];class Mt extends bt{constructor(t){super(t.G(Z.K(20)),new V(Ft(b(1,40,40)),t,E(Bi/2),1,[10,10,10])),ii[2].B=t.H(b(0,-20,0)),ii[2].ut.R=0,ii[2].wt=!0,this.hi=0}Mt(t){if(super.Mt(t),(this.hi+=t)>200&&!this.w){this.w=1;var i=ti;ti=ti.filter(t=>t.q),ii[2].gt(),ti=i}}ii(){Rt([1,1,1,1]),St.ni.length>1?(hi={},setTimeout(t=>{Mi(-1),ai(),St.ni.shift(),St.ri()},200)):(hQ.style.display="none",qQ.style.top="40vh",setTimeout(t=>{ei=!0,document.nct(),pi=[1,1,1,0],cancelAnimationFrame(li),hE.innerHTML=`You got back in ${vi/6e4|0}m ${vi/1e3%60|0}s.<br><br>`,ui?(setTimeout(t=>hE.innerHTML+="Congratulations.<br><br>Developer Par:9m 00s<br><br>Reload to play again.",2e3),ui=1):(setTimeout(t=>hE.innerHTML+="Get ready for hard difficulty.",2e3),ui=1,setTimeout(t=>{pi=[0,0,0,1],ei=!1,gi=5,ai(),St.ni=[...St.ei],St.ri(),requestAnimationFrame(Qi)},5e3))},200))}}var Ct=0;function jt(t){hW.style.width=(gi=Math.min(gi+t,9))+1+"vw",hW.className="b"[gi>2|0]}function zt(t){vi-Ct>450-200*ui&&(e(n.hit),Ct=vi,ti.push(new ft(t)),m(15).map(i=>ti.push(new xt(t,4))),si++,Rt([.3,0,0,.7]),jt(-1))}var Bt=[];function Rt(t){pi=t.map(t=>t),Bt.map(clearTimeout),Bt=m(20).map(i=>(i=>setTimeout(s=>pi=[t[0]*i,t[1]*i,t[2]*i,t[3]*i+(1-i)],400*(1-i)+200))(i/20))}function Tt(t,i){return m(5*ui+5+i*Bi|0).map(i=>ti.push(new[dt,wt][i%2](t.H(g().noz().K(20)),10*f()))),{nt:m,Ct:1}}var Et,Dt,Gt,Ht,Kt,kt=t=>J([1,0,0,.001,0,1,0,.001],32,0,!0,i=>v(T(-Bi/2),i.Z(t))),qt=t=>J([.71,0,0,1],4,0,!0,i=>t(v(E(-Bi/4),i))),Ft=t=>qt(i=>i.Z(t)),Zt=[null,null,dt,wt,yt,class extends bt{constructor(t,i){var s=Qt[8*i/Bi],h=i==Bi/2?new V(J([0,0,2,2,0,.1,-1,.6],8,0,!0),t,G,!0,s):h=N([new V(J([1.3,0,.8,0,0,.8,-.8,0,0,-.8],16,0,!1),b(-3,0,0),R(Bi/2),!0,s),new V(kt(b(.6,.6,9)),b(-1,0,0),null,!1,s),new V(Ft(b(2,1,1.5)),b(6,0,-1.5),null,!1,s),new V(Ft(b(.6,1,.5)),b(5.25,0,-2),null,!1,s),new V(Ft(b(.6,1,.5)),b(6.75,0,-2),null,!1,s)]);h.L=E(i),t.z+=6*(1==St.ni.length&&!s[4]),super(t,h),this.ti=15,this.uid=i}Mt(t){super.Mt(t),this.zt.L=c(E(t/400),this.zt.L),this.zt.B.z=this.B.z+4*ji(this.Nt+=t/300)+4}ii(){var t=ti.filter(t=>t instanceof _t&&this.uid==t.uid);t[0].xt.Ct=!0,this.uid==Bi/2?(e(n.oi),Rt([1,1,1,1]),ti.push(new Mt(t[0].B.G(b(0,40,-10)))),St._i(St.ai.filter(t=>vt.isPrototypeOf(t[1])||t[1]==Tt),ti),ti.map(t=>t.Zt=1),xi=!0,o.map(clearTimeout),o=[]):(super.ii(),Rt([0,.5,0,.5]))}},_t,class extends bt{constructor(t,i){t=t.H(b(4,0,0));var s=J([.9,0,.1,.1,0,4,.5,1,0,1,-.1,0,-.4,-1],32,0,!0),h=c(E(-i),R(-1.4));super(t,[new V(s,null,h,!1,[.4,.4,.4]),new V(Dt(2),null,0,1,[5,5,5])]),this.ti=15,this.zt[1].B=(this.zt[0].B=this.B).H(v(h,Z.K(5.8))),ii[0].B=t.H(v(h,Z.K(8))),ii[0].ut.R=i}ii(){super.ii(),Rt([.4,.4,.4,1]),yi=!0}nt(){this.zt.map(t=>t.nt())}},null,Tt];class Nt{constructor(){this.ni=["rgt413aHp9UFRwdXm2S6cGajdGc0csIDhMeKwQUngnOne8qtCa19bVwnkHBQZ2LYdcSzFERiVTdZmLd7N3NWfFtGTMrYttSyYil4xasKMDBwscKcTWx9vGJ5cMQDUslqsQiEm3iHe2d4RwnLt8RGZ3YXeGfCjgNz13uQB3OHdqd+RnbPkq0DeDd2ZZ10246xA7d7Nw==","ISyRA4qoQGbRdGKrcGV7co0JrseGo4VBdwd3rAOEx4rBBSeCg4eLzAVL26uTRWYjcmQ2cGR6cMGMsgmu445716NQFAfEkQNKKJNiO37CCKSqvG45FHKzwqoC2ihlhnRpknDIjbQIGyc2Y7LEjIzEkQVUVVyquGdDdMONA7CMS2PScJEEo4mXPMEEV6PjTAWMjJNzYMcES2Vikw==","IcCVBWJhZ21sZqd0ZTRxZzpykbMVemdseVdemunnhCVUpppIyYWBcTYzZNxwzK4DB3nnYlF0Ytd8Yt1wkQMHeedmbXFjnnCRAwd555EDB3nnkbQIiIe16RsYJUPEkQcFYZJ2o56NYyV0wgM1bZdldXRkRHDBgIuqA4FHbcGnA6ehF2KJcGKWcJGwBWJAxa6ewpAEKRJT52J9cMGRsQWbKnw2cGK2cMGRA7iOJpG1BzyNq5B1l4LBlgNXeZdjfXBiKHBkTXAh7iGHA6ZUSA==","Ia2OA7S3KmIKcAMsxsBk23DCjQPCRxtm63JlbXJifXCRBdO0KCpJjQdzoZS7uigqwpEFt1RDB7tmc3TBkKwDhMeKjLIGyLleC8BUwpGqECira1tLGorks6q6pEYThIDEkA1K59bJdCUYZkGzRyrOYppwwrQFMcHZfTtpUXDCAlU3ZalxZLpwy7EGoOXcPgklwZED5ZkKwQShkkk+aUJ1wQOlEklkenDCkasF2p44UzVmpXFlx3Bm6HPCA7aKJ2WWdNuLsQatKwcywOZnWXVmp3BpPnDCmAO8OjRip3BipXBl1HPThqwFJ4KDh4vQrQdsm6eVVlaD","IQQhZ5MCkqlmfXFlWnJm2HRnV3JkPHCLqwWZbFojhMKzC325p6aUclB3B3dsYo5wwawDhMeKwQUngoOHi8yasQNamIRlenRiVnhirHBiqHBjm3CMsAVqjOdgNmLbcGXtcQ64tMyOXhwbqdPhgHBABM2SrQOOh2CMsQTZfThlwQVLN5zTocK0CgcoNidxx6WnqchiSXjCqgNHdadjZnxiLXBjTXCNA0d1p40DR3WnjQNHdafPlQYbToy3YcNmHnLCBDeb5XO0CHvL6eWQRSQXaepw"],this.ei=[...this.ni]}_i(t,i){t.map(([t,s,h,n,r,e])=>{(i||t).push(new s(h.H(b(0,0,this.Gt(h.H(b(2,2,0))))),n,r,e))})}ri(){var t;st=0,ti=[],(ii=m(4).map(t=>new ht(b(0,0,1e3),0,0)))[0].wt=ii[0].li=!0,[this.Pt,this.ai]=Xt((t=this.ni[0],atob(t).split``.map(t=>t.charCodeAt(0)))),St._i(this.ai);var i,s=m(32).map(t=>[[],[]]),h={},n=(t,h)=>{s[t][0].push(m(6*(h.length-2)).map(t=>[i,0,0])),s[t][1].push(h,[...h].reverse())};this.Pt.map(t=>{t.ui.map(i=>{i=i.map(t=>[t.x,t.y]).sort(),h[i]=j(h[i]||[],[t.It,t.$t])}),n(t.It<0?20:22,t.ci.map(i=>b(i.x,i.y,t.It))),n(21,t.ci.map(i=>b(i.x,i.y,t.$t)))}),Object.keys(h).map(t=>{var[s,r,e,o]=t.split`,`.map(Number);w(h[t]).map(t=>{var h=[b(s,r,t[0]),b(e,o,t[0]),b(e,o,t[1]||0),b(s,r,t[1]||0)],_=h[0].X(h[1],.5);i=-C(h[0],_),ti.push(new ot(_,i,h[0].Y(_),h[2].z-h[0].z)),n(21,h)})}),s.map(([t,i],s)=>{t.length&&(ti.unshift(new V(S(i),k,null,null,[1,1,1],[s,(21==s)+1])),ti[0].q=!0,ti[0].P=new Float32Array(t.flat(2)),ti[0].ht())}),ti.push(Ot),ti.push(Kt=N(new dt(b(-1e6,0,0)).Wt.map((t,i)=>(t.B=t.B.H(Z.K(5*(3==i||4==i))),t)))),ii.map(t=>t.wt&&t.gt()),o.map(clearTimeout),o=[],_()}Gt(t,i){return(i=i||{}).o&&this.vi(i.o,t)?i.o.It:(i.o=this.Ut(t),i.o?i.o.It:-100)}vi(t,i){return i=i.H(g().K(.01)),t.ui.filter(t=>K(i,q,...t)).length%2==1}Ut(t){for(var i in this.Pt)if(this.vi(this.Pt[i],t))return this.Pt[i]}}class Vt{constructor(t,i,s){this.ci=t,this.It=i,this.$t=s,this.ui=d([...t,t[0]],(t,i)=>[t,i])}}function Xt(t){for(var i=[],s=[k],h=4,n=40,r=[],e=0;e<t.length;){var o=t[e++],[_,a]=[31&o,o>>5];a<=1&&(i.push(new Vt([s[0],...m(_).map(i=>(s.unshift(s[0].H(b(8*((t[e]>>4)-7),8*(t[e++]%16-7),0))),s[0]))],h,n)),1==a&&i.pop()),3==a&&r.push([ti,Zt[_],s[0].H(b(8*((t[e]>>4)-7),8*(t[e++]%16-7),2*((t[e]>>4)-7))),t[e++]%16/8*Bi,0,!0]),h+=2*(_-15)*(4==a),n+=4*(_-15)*(5==a),s.splice(0,_*(6==a))}return[i,r]}var Jt,St,Ot=[];var Yt,Wt,Lt,It,$t,Pt,Ut,ti=[],ii=[],si=0,hi={},ni=!1,ri=!0,ei=!1;function oi(){X(),function(){Jt.xoE`EXT_color_buffer_float`,Jt.xoE`OES_texture_float_linear`,[Lt,Pt]=W(Jt,O+" float T(int r,vec2 R){vec4 o=texture(D[r],R);float y=o.x,F=max(o.y-y*y,.1),n=distance(f[r],m);return clamp(max(clamp((F/(F+(n-y)*(n-y))-.2)/.8,0.,1.),smoothstep(n-.02,n,y)),0.,1.);}void main(){if(l){C=N;return;}vec3 A=normalize(J.xyz);float E;E+=clamp(dot(vec3(0,0,-1),A),0.,1.),E+=clamp(dot(vec3(1,0,.5),A),0.,1.),E+=clamp(dot(vec3(-.5,-.86,.5),A),0.,1.),E+=clamp(dot(vec3(-.5,.86,.5),A),0.,1.),E*=k*(1.-smoothstep(0.,1.,clamp(length(f[4]-m)/150.-.3,0.,.9)));for(int i=0;i<4;i++)if(!d[i]||a[i].z>0.){vec2 S=a[i].xy/a[i].w;float u=d[i]?T(i,S*.5+.5):1.;if(u>0.){vec4 x=f[i]-m;float I=d[i]?clamp(.9-dot(S,S),0.,.095)*10./.95:1.,B=dot(A,normalize(x.xyz))+1.;vec4 z=normalize(normalize(x)+normalize(x));float H=pow(abs(dot(A,z.xyz)),100.)*.1;B+=H;float q=distance(f[i],m);B*=c[i]*I*I*u/(d[i]?1.:sqrt(q)),E+=k*pow(B,3.);}}C.rgb+=pow(E,.33),C*=N;if(e>0)C*=v(s+5,e==1?m.xy/32.:vec2(dot(m.xy,vec2(sin(L.x),-cos(L.x))),m.z)/16.);C.w=1.;}"),[It,Ut]=W(Jt,O+" void main(){C.r=distance(f[b],m);C.g=C.r*C.r;}");var t=(t,i,s)=>(s=s*s*(3-2*s),t*(1-s)+i*s),i=m(16).map(t=>m(16).map(t=>b(f(),f(),0).T())),s=x(m(256),m(256),(s,h)=>{var n=b(0|(h/=16),0|(s/=16),0),r=x(m(2),m(2),(t,r)=>i[s+t&15][h+r&15].dot(n.H(b(r-h,t-s,0))));return 2*(r=t(t(r[0],r[1],h-n.x),t(r[2],r[3],h-n.x),s-n.y))+.2});rt(s.map(t=>[t,t,t,1]).flat()),rt(s.map(t=>[t,0,0,1]).flat()),rt(x(m(256),m(256),(t,i)=>{if(t%64<=2||Ti(i-(t/64|0)%2*128)<=2)return[0,0,0,1];var h=.9-s[256*i+t]/20;return[h,h,h,1]}).flat());var h=x(m(16),m(8),(t,i)=>[32*t,64*(i+t%2/2),1+t%2]);rt(x(m(256),m(256),(t,i)=>{var s=h.map(s=>[s[2]*(Ti(s[0]-i)+Ti(s[1]-t)),s[2]]).sort((t,i)=>t[0]-i[0]);return Ti(s[0][0]-s[1][0])<4?[1,1,1,1]:[.1,.1,.1,1]}).flat()),rt(s.map(t=>[t,0,0,1]).flat())}(),Et=(Dt=(t=>J([0,-.5,.35,.15,.15,.35,-.15,.35,-.35,.15].map(i=>i*t),8,0,!1)))(1),Gt=J([.5,0,0,.05,-.1,0,0,.01,0,1.5,0,.01,-.05,0,0,-1.4],8,0,!0),Ht=J([.2,0,.2,2,.4,1,.4,.4,0,.6,-.4,.4,-.4,.2],32,0,!0,t=>v(T(-Bi/2),t)),[2,5,6].map(t=>Ot.push(new V(kt(b(1.8,1.8,.5)),b(t,0,0),null,!1,[.7,.7,.7]))),m(8).map(t=>{Ot.push(new V(kt(b(.5,.5,8.5)),v(R(t*Bi/4),F),null,!1))}),(Ot=N(Ot)).di=k,u(),a=p((a=[100,7,55,25,35,20,,15,,,4,,,,2,33,-8,-23,20,,23,4,-48,30,100,,5,100,55,20,,,-10,,,,,,,,-40,-5,15,,,,,30,,,5,100,55,20,,,-10,,,,,,,,-40,-5,15,,,,,30,300,10,25,5,20,25,10,,,50,,,,50,,,,,10,,50,50,,60,300,5,15,5,20,25,10,,,50,,,,50,,,,,10,,50,50,,60,300,45,55,,55,15,,-10,,,,,,,,,,,25,,,,,30,0,5,5,,45,5,,-10,,,,,,,,,-25,,5,,,,,300]).map(t=>t/100),24),n.Ot=l([s(a[0])]),n.gun=l([s(a[1]),s(a[2])]),n.ii=l([s(a[3])]),n.si=l([s(a[4])]),n.oi=l([s(a[5]),s(a[5]).slice(2e3)]),n.hit=l([s(a[6]),s(a[1])])}function _i(){window.onkeydown=(t=>{hi[t.key]=!0}),window.onkeyup=(t=>{delete hi[t.key]}),Jt._av.onclick=(t=>{Jt._av.ncu()}),document.onpointerlockchange=(t=>{ni=!0,_(),Jt._av.onmousemove=document.pointerLockElement==Jt.canvas&&(t=>{fi||(Yt.R+=t.movementX/200,Yt.et=z(Yt.et+t.movementY/200,-1.3,1.3))}),Jt._av.onmousedown=(t=>{hi.wi=!0}),Jt._av.onmouseup=(t=>{delete hi.wi})}),ai(),(St=new Nt).ri(),Rt([0,0,0,0]),Qi(1)}function ai(){hQ.style.display="block",qQ.style.top="5vh",qQ.style.left="45vw",hE.innerHTML="",Yt=new L(b(24,-16,10+10*(St&&3==St.ni.length)),[Jt._av.width,Jt._av.height],1.22,!1,28),pi=[0,0,0,1],fi=0,yi=0,xi=0,ii=[],ti=[],ui||(gi=5),jt(0),Wt=new U}var li,ui=0,ci=0,vi=0,di=0,wi=0,mi=0,pi=[0,0,0,1],fi=!1,gi=5,xi=!1,Ai=0,bi=0,yi=!1;function Qi(t){if(!ei){li=requestAnimationFrame(Qi);var i=Yt.B;if(fi){var s=((t-fi)**.8-(vi-fi)**.8)/400;return pi[3]-=.01*(pi[3]>0),Yt.R+=s,Yt.ot+=s,Yt.et-=s/3,Jt.eaP(Lt),$t=Pt,Yt.dt(),Wt(Yt.it),void(vi=t)}var h=Math.min(t-vi,50),r=[];for(var o in hi){var _="sawd".indexOf(o);-1!=_&&(mi+=.1*(mi<1),r.push(v(E(-Yt.R-Bi/2*_),F.K(-h/12))))}var a=c(E(-Yt.R),R(-Yt.et)),l=v(a,q.K(-3)),u=v(a,F),d=b(.2+.2*ji(di),1,-.3-Ti(di%Bi-Bi/2)/20);if(hi.wi){if(si+=.15*(si<1.5),t-wi>100){wi=t,e(n.gun);var w=mt(Yt.B,Yt.B.H(u.K(1e4)).H(g().K(320*si)),!0),p=100;w.length>0&&(p=(w=w[0])[0].Y(Ot.B),ti.push(new ft(w[0].X(Yt.B,.2),3)),m(30).map(t=>ti.push(new xt(w[0],2))),w[1].jt&&w[1].jt()),ti.push(new pt(Ot.B,u,p)),ti.push(new At(Ot.B,l)),Ot.di=b(0,-.2,0)}Yt.B=Yt.B.G(u.K(.1)),mi*=.8}r.length?(Yt.B=Yt.B.H(M(r).K(mi)),di+=h/180):(mi-=(mi>0)*h/160,mi*=mi>0,di-=(di%Bi-Bi*(di%Bi>Bi/2))*h/160),Yt.B.z<10&&St.Gt(Yt.B)<0&&vi-Ct>500&&zt(b(0,0,-1e9)),m(8).map(t=>{mt(Yt.B.G(Z.K(5)),Yt.B.H(b(6*ji(t/4*Bi),6*zi(t/4*Bi),-5))).filter(t=>t[1]instanceof ot).map(t=>{var s=v(E(t[1].R),q),h=v(E(t[1].R),F),n=t[1].B.H(h.K(h.dot(Yt.B.G(t[1].B))));Yt.B=n.H(s.K(6*(n.H(s).Y(i)<n.Y(i)?1:-1))),Yt.B.z=i.z})});var x=St.Gt(Yt.B)+10-Yt.B.z;Yt.B.z+=z(x*h/30,-2,3),si=z(si-.15*x*(x<0)-.1,0,4),yi&&(ii[0].B=ii[0].B.X(Yt.B.G(l),.2),ii[0].ut.R+=(Yt.R-ii[0].ut.R)/2,ii[0].ut.et+=(Yt.et-ii[0].ut.et)/2);var[A,y,Q,C]=[Yt.R,Yt.et,Yt.B.z,ii[0].B.z];Yt.B.z+=2*zi(2*di)+4*(mi-1),ii[0].B.z+=yi&&2*zi(2*di)+4*(mi-1),Yt.ot=ji(di)/50;var j=hi.wi?R(t/100):G;Ot.B=Yt.B.H(v(a,d.H(Ot.di)).K(8)),Ot.di=Ot.di.X(k,.1),Ot.L=c(c(a,E(-Bi/2)),j),Kt.B=Yt.B.G(v(Kt.L=E(-Yt.R),b(0,4+10*yi,5)));var B=Math.min(si,2)**2/200;if(Yt.R+=f()*B,Yt.et+=f()*B,Yt.ot+=f()*B,ii.map(t=>t.li&&t.gt()),Jt.eaP(Lt),$t=Pt,Yt.dt(),Wt(Yt.it),gi<0&&!fi)return setTimeout(t=>{Mi(-1),gi=5,ai(),ui&&(St.ni=[...St.ei]),St.ri()},3e3),void(vi=fi=t);[Yt.R,Yt.et,Yt.B.z,ii[0].B.z]=[A,y,Q,C],ti.map(t=>t.Mt&&t.Mt(h));var T=ti.filter(t=>t.Tt);if(T.length>30&&(ti=ti.filter(t=>!t.Tt||t.gc),(T=N(T.map(t=>t.zt).filter(t=>t))).Tt=T.gc=!0,ti.push(T)),bi=.99*bi+(h>30)+5*(h>100),(Ai=.9*Ai+(h>30))>8&&(ti=ti.filter(t=>!t.gc)),bi*ri>30&&ci<2){bi=0,Mi(1);var D={ut:Yt};[D,...ii].map((t,i)=>{(0==i&&Yt.rt[0]>400||i>0&&Yt.rt[0]>100)&&(t.ut=new L(t.ut.B,t.ut.rt.map(t=>t/2),t.ut.fov,t.ut.at,t.ut.ct,t.ut.R,t.ut.et),t.it=t.ut.it)}),Yt=D.ut,Wt=new U}ti=ti.filter(t=>!t.Ct),vi=t}}function Mi(t){cQ.height=(cQ.width=1600>>(ci=z(ci+t,0,2)))/window.nte*window.innerHeight}function Ci(){[Jt=cQ.getContext`webgl2`,Jt.canvas,window,document,document.body].map(t=>{for(var i in t)try{t[(i[i.length-8]||"_")+i[i.length-2]+i[3]]=t[i]}catch(t){}}),Mi(1),pi=[0,0,0,0],oi()}window.onload=(t=>setTimeout(Ci,1));var ji=Math.sin,zi=Math.cos,Bi=Math.PI,Ri=Math.random,Ti=Math.abs,Ei=Math.max</script>