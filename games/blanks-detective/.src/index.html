<!DOCTYPE html><html lang="en"><head> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>BLANKS 🕵🏾‍♂️ - Reduce the space</title> <script src="https://js13kgames.com/src/near-api-js.js"></script> <meta name="monetization" content="$ilp.uphold.com/njQnNZy68WNK"><style>@keyframes fadeOn{0%{opacity:0}to{opacity:1}}@keyframes look{0%{transform:translate(-.3em,0)}50%{transform:translate(0,0) scale(.8)}to{transform:translate(.3em,0)}}@keyframes growOn{0%{transform:scaleX(.3)}60%{transform:scaleX(1.2)}70%{transform:scaleX(.9)}to{transform:scaleX(1)}}@keyframes getBig{0%{transform:scale(.5)}30%{transform:scale(1.3)}to{transform:scale(.8)}}@keyframes ellipsis{to{width:1.5em}}@keyframes bg{0%{background-position-x:12em}to{background-position-x:0}}@keyframes sib{0%{transform:translateY(1em) scale(0)}60%{transform:translateY(0) scale(.8,1.2)}80%{transform:translateY(0) scale(1.1,.9)}to{transform:translateY(0) scale(1)}}@keyframes dash{0%{stroke-dashoffset:1800}to{stroke-dashoffset:-1800}}*{font-family:Trebuchet MS,sans-serif;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-backface-visibility:hidden;-webkit-transform:translate3d(0,0,0);scrollbar-width:none;box-sizing:border-box;margin:0;padding:0;user-select:none}body,html{height:100%;overflow:hidden;text-align:center;font-size:3vmin;text-rendering:geometricPrecision}a{color:inherit;text-decoration:none}.clue span:not(.person),td.cme span:not([data-o='0']):not(.incorrect):not(.correct){box-shadow:inset 0 -.25em .05em -.15em rgb(0 0 0/18%),0 .1em .25em -.1em rgb(0 0 0/40%);padding-bottom:.05em;text-shadow:0 .1em .1em rgb(0 0 0/30%)}.cme,.lang,.sub-game,.tutorial,button,input,span{border-radius:.25em}#hun,#matrix,#menu,#root,#wb,body,html,input{background:#fff;color:#696969}.night #hun,.night #matrix,.night #menu,.night #root,.night #wb,.night body,.night html,.night input{background:#333;color:#fff}.night #matrix{background:#282828}#matrix button.clue:active,.night #matrix button,.night button.clue,button.clue:active{box-shadow:0 0 2px #444;transform:translateY(11px)}.night .title .bl{-webkit-text-stroke:3px #999}#cont{height:100%}#cont,#menu,#root{display:flex;flex-direction:column}#matrix{background:radial-gradient(circle,#eee 70%,#c4c4c4 100%);border-top:none;bottom:0;box-shadow:0 0 114px rgba(0,0,0,.4),0 0 20px rgba(0,0,0,.4);display:flex;padding:.5em;position:fixed;width:100%}#matrix table{border-collapse:separate;border-spacing:.25em;table-layout:fixed;top:-.25em;width:100%}.end #matrix table{margin:0 auto;width:90%}.end #matrix table .cme{background:0 0;box-shadow:none}th{font-size:.9rem;pointer-events:none}th.person{animation:sib .5s ease both;font-size:3.3rem;top:.4em}.end th.person span{transform:scale(1.5);transform-origin:50% 1.1em;transition:.1s ease all}th.person span{bottom:0;font-size:6rem;margin-left:-.5em;position:absolute}col{width:7em}.mrow .label{flex-grow:0}#matrix table,.mrow td,span.person,td.cme,th{position:relative}td.cme{background:#fff;cursor:pointer}td.cme span{color:#c3c3c3;display:inline-block;font-size:3em;margin:.1em 0;min-width:1.3em}span{font-size:1.5em}span.person{top:.05em;font-size:3.2em;padding:0 .05em}#matrix span.incorrect{transition:all .2s ease}span.incorrect:before{background:red;border-radius:1em;content:'';height:.25em;position:absolute;transform:rotate(45deg) translate3d(.17em,.57em,0);transform-origin:50% 50%;width:1.6em}#matrix span.correct{animation:1s ease forwards 1 getBig;background:0 0;line-height:.5em;position:relative;font-size:9em;display:inline-block;left:50%;margin-left:-100%;width:1em}#matrix span.incorrect{border-radius:100%;box-shadow:0 0 0 .2em red;background:0 0}[data-o="0"],[data-o="0"]:after{filter:none!important;opacity:.5}[data-o="0"]:after{content:'?';position:absolute;left:.7em;font-size:.7em;top:.3em;font-weight:700}[data-o="1"]{background:#7fdbff}[data-o="2"]{background:#ff9a43}.lang.selected,[data-o="3"]{background:#81da7b}[data-o="4"]{background:#ffeb6c}[data-o="5"]{background:#ff95e8}[data-o="6"]{background:#0074d9}[data-o="7"]{background:#3d9970}[data-o="8"]{background:#b775ff}#wb{overflow-x:hidden;overflow-y:scroll;padding:5vh 0 40vh 3vw;transition:background-color .25s ease}#wbc{font-size:1.2em;padding-bottom:50vh}#cont:not(.end) #wb>*,#cont:not(.end) td.cme span,#det,.lang.selected,button{filter:drop-shadow(0 6px 3px rgba(0,0,0,.08))}.end #wb{background:#444;font-size:2.2rem;min-height:50vh;transition:all .5s ease}.end #wbc *{display:none}.end #wbc:after,.end #wbc:before{animation:fadeOn 1s 1 forwards;color:#fff}.end #wbc:before{display:none;content:attr(data-flair);line-height:1em;margin-top:.15em}.end #wbc:after{content:attr(data-msg);display:block;font-size:4rem}#li,#wb h1,.loading{animation:1s ease forwards 1 fadeOn;font-size:2.4rem}.loading{animation:3s linear alternate infinite look}.tutorial{animation:fadeOn 1s 1 forwards;background:#7fdbff;color:#267b9c;margin:0 auto;padding:.5em;width:80%}#li,h3{color:#bbb}.clue{animation:1s ease both 1 growOn;min-height:1em;line-height:3em}.clue span:not(.person){display:inline-block;line-height:1.5em;pointer-events:none;margin-left:.25em;width:1.5em}.clue h3{line-height:2em}.night table:before,.night td.cme{background:#444}button.clue{animation:1s ease forwards 1 fadeOn;background:#f7f7f736;border:0;box-shadow:0 0 2px #5d5d5d,0 .2em 0 #d6d6d6,0 .21em 3px -1px #5d5d5d,0 .3em 8px rgb(74 74 74/19%);color:#aaa;cursor:pointer;font-size:2.5rem;line-height:1.5em;min-width:auto;padding:0 .25em;width:60%;margin-bottom:.5em;position:relative}.waiting:after{animation:ellipsis steps(6) 2s infinite;content:"\2026";display:inline-block;overflow:hidden;width:0}#menu{font-size:2vw}#menu,#root{height:100%;justify-content:space-around;padding:3em 0;position:fixed;transition:background-color .2s ease;width:100vw;z-index:10}.title{font-size:8.5vw;font-weight:700;line-height:1}.title .bl{-webkit-background-clip:text;-webkit-text-stroke:.02em #444;animation:bg 60s linear infinite alternate;background-clip:text;background-image:url("data:image/svg+xml,<svg width='1200px' height='150px' xmlns='http://www.w3.org/2000/svg'><text x='0' y='130px' font-size='200px'>👨🏻‍🏭👨🏿‍🎓👩🏼‍🚒🧝🏻‍♀️👩🏾‍✈️👰🏽🧙🏼‍♂️</text></svg>");background-position-y:3em;background-size:210% 80%;color:rgba(100,100,100,.5)}#menu h2{color:#9670c7;font-size:1.6em}#menu button{font-size:3em;margin:.5em;min-width:auto;width:40%}.dec span,.lang-h,.right{font-size:1.2em}.right{margin:.4em 0 .1em 20em}#menu .right h2{color:#e59e0e}#menu .dec,.night #pause{color:#666}.dec span{display:inline-block;width:17vw}.lang-h{display:flex;justify-content:space-around;margin:0 auto;max-width:60em;padding:0 50px}#pause,.lang{cursor:pointer}.lang{margin-top:5px;padding:.7em 0;position:relative;white-space:nowrap;width:9em}.set{display:flex;justify-content:space-between;margin:0 auto;max-width:800px;padding:0 50px}#pause{color:#bbb;font-size:2rem;line-height:1em;padding:.5em;position:absolute;left:0;z-index:1}input[type=checkbox]{height:1.25em;width:1.25em;border-radius:2em;appearance:unset;border:.1em solid #9670c7}input[type=checkbox]:checked{box-shadow:inset 0 0 0 .2em #fff;background:#9670c7}.switch{display:inline-block;font-size:1rem;height:3.4em;position:relative;top:-.9em;width:8em}svg{display:none;height:50%;position:absolute;width:100%}.end svg{display:block}.path{animation:dash 3s linear forwards 1;stroke-dashoffset:400;stroke-linecap:round}#root{animation:.5s fadeOn 1 ease}#root label{display:inline-block;font-size:1.25rem;padding:.5em}#root button{color:#aaa;margin:.5em 0;text-shadow:none}#mhold,.root-col{display:flex;flex-direction:column}#mod{overflow:scroll;justify-content:end;padding-top:2em}input{font-size:1.8rem;margin-bottom:1em;padding:.1em;text-align:center;width:80%}#com-list{background:rgba(255,255,255,.5);height:17.5em;margin-top:1em;overflow-y:scroll}.root-col{background:rgba(0,0,0,.1);border:1px solid #aaa;padding:1em;position:relative;width:60vw;margin:1em auto;min-height:57vmin;justify-content:space-around;font-size:.7rem;align-items:center}.root-col:before{background:#e5e5e5;border:1px solid #aaa;border-bottom:none;border-top-left-radius:.5em;border-top-right-radius:.5em;content:'🔍';font-size:2.5rem;height:1em;left:.25em;position:absolute;top:-1em;width:3em}.night .root-col:before{background:#2e2e2e}#com-list,.sub-game,input{border:1px solid #ccc}.sub-game{background:rgba(0,0,0,.15);cursor:pointer;font-size:1rem;margin:.5em;padding:.5em}@media screen and (min-width:1000px),(orientation:landscape){#menu{font-size:2.3vmin}body,html{font-size:2.2vmin}#wb,svg{height:100%}#wb{border:0;padding-right:53vw}.mrow td.cme{font-size:1.25rem}#matrix{border:0;border-left:1px solid #aaaa;bottom:auto;box-shadow:none;height:100%;overflow-y:scroll;padding-top:11rem;right:0;top:0;width:50.5vw}#matrix table{font-size:1rem;margin:0 auto;top:0}button.clue{min-width:80%}.end #wbc:before{font-size:13.3rem;margin-top:20vh;display:block}th.person{animation:sib .5s ease both;text-shadow:0 0 4px rgba(0,0,0,.75);font-size:3rem}.end th.person{text-shadow:none;top:0}svg{width:50%}span[data-o="0"]{padding:.09em 0!important}#mhold{flex-direction:row;justify-content:space-around}.root-col{margin:1em;animation:none}}.spacer{height:3.2em}#hun{position:absolute;top:0;right:0;padding:.25em .5em;pointer-events:none;border-bottom-left-radius:.5em;line-height:1em}.cme,.cme span:not([data-o='0']),.mrow{transform-style:preserve-3d;perspective-origin:center center;perspective:2000px;transition:transform .5s ease}.dan{transform:translate3d(0,1.5em,-5em) rotateX(70deg)}span:not([data-o='0']){transition:transform 1s ease}.dan span:not([data-o='0']){transform:rotateX(-70deg) translate3d(0,-1em,0) scale(.01)}</style></head><body> <div id="menu"> <div> <br/> <h1> <div class="title"><span class="bl">BLANKS</span> <span id="det"></span></div></h1> <div class="dec right"> <p>Fill in every empty space.<br/>Reduce the space between us.</p></div></div><p>&nbsp;</p><div> <h2>Languages:</h2> <div class="lang-h"> <div class="lang selected" id="en"> English </div><div class="lang" id="fr"> Français </div><div class="lang" id="es"> Español </div><div class="lang" id="zh-CN"> 中文 </div><div class="lang" id="tp"> toki pona </div></div><br/><br/><br/> <h2 class="set">Sound: <label class="switch"> <input type="checkbox" checked="true" onchange="sound=!sound"> </label> </h2> <h2 class="set"> Night Mode: <label class="switch"> <input type="checkbox" onchange="body[cl].toggle('night')"> </label> </h2> </div><div> <button class="clue" id="mon-files" onclick="showChoose()" style="display:none;width:20%">🗂️</button> <button class="clue" onclick="makeGames()">Start 🔍</button> </div><div class="dec"> <h3 id="near"><a>Click to sign into NEAR</a></h3> <h3 id="coil"><a href="https://coil.com/" target="_BLANKS">Click to sign into COIL</a></h3> </div><div class="background"> </div></div><div id='cont'> <div id="wb"> <div id="wbc"> </div></div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 749 427"> <path class="path" fill="none" stroke-width="36" stroke-dasharray="40, 500, 40, 10000" stroke="#7fdbff" d="M-46 407c0-101 181-114 299-79s260 126 363 60 185-142 185-142"/> <path class="path" fill="none" stroke-width="39" stroke-dasharray="40, 1000, 40, 10000" stroke="#ff9a43" d="M-38-6c0 144 63 28 159 86s601 99 490 220-445-65-258-99 428-55 428-55"/> <path class="path" fill="none" stroke-width="29" stroke-dasharray="40, 1000, 40, 10000" stroke="#0fdb7f" d="M-29 28C-126 78-8 280 86 239S223-39 374 34s241 191 297 172 109-88 113-44"/> <path class="path" fill="none" stroke-width="27" stroke-dasharray="40, 300, 40, 300, 40, 300, 40, 10000" stroke="#b775ff" d="M-24 397s56-43 91-72c39-33 72 33 111 68 61 51 137-41 168-90 39-52 83-10 116 39 73 96 158-19 160-87 9-53 48 26 73 53 52 61 116-36 115-36"/> </svg> <div id="matrix"> </div><div id="pause" onclick="pauseGame()">☰</div><div id="root" style="display:none"> <h1><span>🗂️</span> <span id="cf">Case Files</span> <span>🗂️</span></h1> <div id="mod"> <div id="mhold"> <div class="root-col left-e"> <button id="nc" class="clue" onclick="root.style.display='none';sng()"></button> </div><div class="root-col"> <h2 id="com">Community</h2> <div id="com-list"> </div><br/> <h1 id="create">Create</h1> <button class="clue" onclick="subGame()">👍</button> <p><span id="com3"> </span><span> ➔ </span><span id="com2"></span></p></div><div class="root-col right-e"> <h1 id="ch">Choose</h1> <label id="peplabel">People:</label> <input type="number" id="people" min="2" max="5" value="3" onKeyDown="return false"> <label id="catlabel">cats:</label> <input type="number" id="cats" min="2" max="5" value="3" onKeyDown="return false"> <button class="clue" onclick="chooseGame()">👍</button> </div></div></div><div> </div></div><div id="hun"> 🗂️:<span id="cn">0</span> 🥇:<span id="mn">0</span> </div></div><script>let tt,ge="getElementById",gcn="getElementsByClassName",cl="classList",ac="appendChild",ih="innerHTML",fe="forEach",sa="setAttribute",d=document,menu=d[ge]("menu"),M=Math,ra="random",raf=requestAnimationFrame,pauseGame=()=>{say(""),pause=!0,games=[],clear(),menu.style.display="flex",cont[cl].remove("end"),timeouts[fe](e=>clearTimeout(e))},tutorial=!1,clear=()=>{wbc[ih]="",matrix[ih]="",menu.style.display="none"},makeGames=()=>{clear(),pause=!1,games=[],files=0,tutorial?sng():(sng(tt),tutorial=!0,files=0),to(()=>{for(let e=2;e<5;e++)for(let t=2;t<5;t++)addGame(t,e).then(e=>games.push(e))},tutorial?0:1e3)},files=0,sng=e=>{if(pause=!1,games.length<2){let e=()=>2+~~(5*M[ra]()),t=e(),a=e();for(;t+a>9;)t=e(),a=e();addGame(t,a).then(e=>games.push(e))}if(curG=e||games.shift()){if(!e&&(files+=1)>opt.files)return showChoose(),void(files=0);wbc[sa]("data-msg",`${opt[opt.lang].wellDone}`),clear(),opt.t=!0,selectNewVoice(),sfx([,,-62,.02,.03,.23,,10.8,5.8,,200,-.07,,.3,2,,,1.3,.13,.3]),createMatrix(),cont[cl].remove("end"),to(()=>{setupWorkbook(curG)},500)}else to(sng,500)};d.monetization&&d.monetization.state&&(d[ge]("mon-files").style.display="inline-block",d[ge]("coil")[ih]="You're signed into COIL.");let subGame,showChoose=()=>{clear(),timeouts[fe](e=>clearTimeout(e)),cont[cl].remove("end"),root.style.display="flex",say(opt[opt.lang].ff),fi("nc",opt[opt.lang].newCase),fi("cf",opt[opt.lang].ff),fi("ch",`${opt[opt.lang].ch} ${opt[opt.lang].newCase}`),fi("peplabel",opt[opt.lang].p),fi("catlabel",opt[opt.lang].c),fi("create",`${opt[opt.lang].cr} ${opt[opt.lang].newCase}`),fi("com",opt[opt.lang].com),fi("com2",opt[opt.lang].com),fi("com3",opt[opt.lang].newCase)},ser=e=>{delete e.sNum,delete e.catNum,delete e.attempts;let t=JSON.stringify(e);return e.cNms[fe]((e,a)=>t=t.replace(new RegExp(e,"g"),`b${a}b`)),(t=JSON.parse(t)).cNms=e.cNms,JSON.stringify(t)},deser=e=>{return JSON.parse(e).cNms[fe]((t,a)=>e=e.replace(new RegExp(`b${a}b`,"g"),t)),(e=JSON.parse(e)).sN=e.sN||e.slotNames,e.sNum=e.sN.length,e.catNum=e.cNms.length,e.attempts=0,e},config={nodeUrl:"https://rpc.testnet.near.org",deps:{keyStore:new nearApi.keyStores.BrowserLocalStorageKeyStore},networkId:"testnet"};!async function(){let{connect:e,keyStores:t,WalletConnection:a}=nearApi,s={networkId:"testnet",keyStore:new t.BrowserLocalStorageKeyStore,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};window.near=await e(s);let n=new a(near),r=await n.account(),l=d[ge]("near");n.isSignedIn()&&(l[ih]="You're signed into NEAR."),l.onclick=(()=>{1==confirm("Going to NEAR to log in.")&&n.requestSignIn("dev-1629217600951-74234604044359")});let c=new nearApi.Contract(r,"dev-1629217600951-74234604044359",{viewMethods:["getMessages"],changeMethods:["addMessage"],sender:r});messages=await c.getMessages(),subGame=(()=>{n.isSignedIn()?(clear(),wbc[ac](nnote()),root.style.display="none",addGame(4,4).then(e=>{sng(e),c.addMessage({text:ser(e),gas:1e14})})):1==confirm("Going to NEAR to log in.")&&n.requestSignIn("dev-1629217600951-74234604044359")});let o=d[ge]("com-list");sampleSize(20,messages.filter(e=>"{"===e.text[0]))[fe](e=>{let t=ce("div");t[ih]=`<div class="sub-game"><span>Play</span> - ${e.sender}: <span>👍</span></div>`,t.onclick=(()=>{clear(),root.style.display="none",sng(deser(e.text))}),o[ac](t)})}(window);let curG,det,addGame=(e=2,t=2)=>new Promise(function(a){let s,n,r,l,c,o,i,d,p,u,$,m,f=()=>{s=[...Array(e)].map(e=>({})),n=[],r=0,l=[],c=[],o=!1,i=!1,d=[],p=0,u=!1,$=[],m=[]};f();let g=opt.cats,h=opt.cNms,w=opt.sN;w=sampleSize(e,w).map(e=>rst(e)).map(e=>randGender(e));let y=sampleSize(t,[...Array(h.length).keys()]);h=h.filter((e,t)=>-1!==y.indexOf(t)),g=g.filter((e,t)=>-1!==y.indexOf(t)).map(t=>sampleSize(e+2,t));let b=t*e,N=(e,t)=>{for(let a of Object.keys(t))if(e[a]&&e[a]!==t[a])return!1;return!0},k={*ti(e,t,a){for(let t of[...Array(a.length).keys()])yield*this.tiai(e,{i:t},a)},*tiai(e,t,a){if(N(a[t.i],e)){let s=JSON.parse(JSON.stringify(a));s[t.i]=Object.assign({},a[t.i],e),yield s}},*b(e,t,a){for(let s of[...Array(a.length-1).keys()])if(N(a[s],e)&&N(a[s+1],t)){let n=JSON.parse(JSON.stringify(a));n[s]=Object.assign({},a[s],e),n[s+1]=Object.assign({},a[s+1],t),yield n}},*a(e,t,a){for(let s of[...Array(a.length-1).keys()].map(e=>e+1))if(N(a[s],e)&&N(a[s-1],t)){let n=JSON.parse(JSON.stringify(a));n[s]=Object.assign({},a[s],e),n[s-1]=Object.assign({},a[s-1],t),yield n}},*nt(e,t,a){yield*this.a(e,t,a),yield*this.b(e,t,a)}},x=e=>{let t=!1,a={};return e.reduce(function(e,s){for(var n in s)a[n]||(a[n]=[]),a[n].indexOf(s[n])>-1&&(t=!0),a[n].push(s[n]),e[n]=s[n];return e},{}),t};let v=e=>{let t=[];for(let a of function*e(t,a){if(0===(t=t.map(e=>"function"==typeof e?e:t=>k[e.type](e.d[0],e.d[1],t))).length){if(x(a))return void(yield!1);yield a}else{let[s,...n]=t;for(let t of s(a))yield*e(n,t)}}(e,s))t.push(a);return t.filter(e=>e)},G=(e=null,t,a)=>{if(t>100)return a(!1);let n,r,l={},c={},o=(e="",t=1)=>{let a=sample(h.filter(t=>t!==e)),s=g[h.indexOf(a)];return{key:a,d:1===t?sample(s):sampleSize(t,s)}};switch(e||sample([0,0,0,1,2,2,3,3,4,4])){case 0:l[(n=o()).key]=n.d,l[(n=o(n.key)).key]=n.d,r={type:opt.clueTypes[0],d:[l,{d:[]}]};break;case 1:l[(n=o()).key]=n.d,c={i:~~(M[ra]()*s.length)},r={type:opt.clueTypes[1],d:[l,c]};break;case 2:l[(n=o("",2)).key]=n.d[0],c[n.key]=n.d[1],r={type:opt.clueTypes[2],d:[l,c]};break;case 3:l[(n=o("",2)).key]=n.d[0],c[n.key]=n.d[1],r={type:opt.clueTypes[3],d:[c,l]};break;case 4:l[(n=o()).key]=n.d,c[(n=o(n.key)).key]=n.d,r={type:opt.clueTypes[4],d:[l,c]}}d.some(e=>checkToString(e)===checkToString(r.d))?raf(()=>G(e,++t,a)):(d.push(r.d),a(r))},_=e<2,C=(d=null,y=0,N=!1)=>{G(d,y,d=>{if(!d){if(N){let e=ce("div");e[cl].add("clue"),e[ih]=`<h3>${opt[opt.lang].noMore}</h3>`,wbc[ac](e)}return}n.push(d);let k=v(n);if(0==k||!k[0])return n.pop(),void C(null,++y,N);let x=k[0].reduce((e,t)=>e+Object.keys(t).length,0);if(c.push(d),(k.reduce((e,t)=>e.concat(t),[]).some(e=>[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length)||x===r)&&r<b)return n.length>8*s.length?(f(),void C()):void raf(()=>C(null,0,N));if(r=x,!o)return o=!0,p=r,void raf(()=>C(null,0,N));if(o&&r<b)return r>M.min(p+e,p+t)&&(i=!0),void raf(()=>C(null,0,N));{let s=v(n.map(e=>("nt"===e.type&&(e.d=e.d.reverse()),e)).reverse())[0];if(!s||!iareEquals(k[0],s))return void raf(()=>{C(1,0,N)});if(!_)return _=!0,void raf(()=>C(null,0,N));if(m.push({solution:k,selections:r}),u)return showClueArr([d]),void extraClueButton();l.push(c.slice(0)),u=!0,l.map(a=>(a=>{var s=[];let n;for(var r=0,l=a.length;r<l;r+=n)n=M.max(1,1+~~(M[ra]()*e),1+~~(M[ra]()*t)),s.push(a.slice(r,r+n));return s})(a))[fe]((e,t)=>{e[fe]((e,a)=>{$.push({cb:m[t].solution,rwc:e})})}),n.length<=3&&($[$.length-1].rwc=$.map(e=>e.rwc).reduce((e,t)=>e.concat(t)),$=$.slice($.length-1)),a({sNum:e,catNum:t,levels:$,extraClue:()=>{C(null,0,!0)},clues:n,cats:g,cNms:h,sN:w,attempts:0}),games=games.sort((e,t)=>e.clues.length-t.clues.length)}})};C(1)}),uB=[],createMatrix=()=>{uB=[];for(let e=0;e<curG.sNum;e++)uB.push({});let e=ce("table"),t=ce("col");t[sa]("span",1),e[ac](t);let a=ce("tr"),s=ce("td");a[ac](s),curG.sN[fe](e=>{let t=ce("th");t[cl].add("person"),t[ih]=`<span>${e}</span>`,a[ac](t)}),e[ac](a);curG.cats[fe]((t,n)=>{(a=ce("tr"))[cl].add("mrow"),(s=ce("th"))[ih]=curG.cNms[n],a[ac](s);let r=["_",...t];curG.sN[fe]((e,t)=>{let s=ce("td");s[cl].add("cme");let l=ce("span");l[sa]("data-o",0),l[ih]=r[0],uB[t][curG.cNms[n]]={d:"_",span:l},s.onclick=(e=>{((e,t,a,s)=>{let n=e.innerText;(n=t[t.indexOf(n)+1])||(n=t[0]),sfx([.7,.45,82.40689,,,.02,,3,35,,100*(t.indexOf(n)+1)-150,-.06,,,,,,.5,.03,.21]),uB[a][s]={d:n,span:e},e.innerText=n,e[cl].remove("correct","incorrect"),e[sa]("data-o",t.indexOf(n))})(l,r,t,curG.cNms[n])}),s[ac](l),a[ac](s)}),e[ac](a),(a=ce("tr"))[cl].add("mrow")}),(a=ce("tr"))[cl].add("mrow");let n=ce("td");n[sa]("id","li"),n[ih]="●●●",a[ac](n);let r=ce("button");r[cl].add("clue"),r.onclick=(()=>{if(scoreMatrix()){if(r.parentNode.parentNode.parentNode.removeChild(r.parentNode.parentNode),wbc[ih]="",wbc.parentElement.scrollTo(0,0),cont[cl].add("end"),!(curG.attempts<=3))return say(""),wbc[sa]("data-flair",rst(randGender("🙅🏽‍♂️"))),wbc[sa]("data-msg","○○○"),sfx([1.11,,260,.05,.18,.78,,1.9,,,-23,.06,.14,,,,,.8]),pause=!0,void to(()=>{addGame(curG.sNum,curG.catNum).then(e=>{newDet(),sng(e)})},3e3);say(opt[opt.lang].wellDone+(opt.t?"... 🥇":"")),sfx([1.4,,474,,.25,.63,1,1.145,-.3,,100,.09,.09,,,,.09,.4,.65]),opt.t&&(mn.innerText=parseInt(mn.innerText)+1),cn.innerText=parseInt(cn.innerText)+1,pause=!0,to(()=>{pause=!1,wbc[ih]="",timeouts[fe](e=>clearTimeout(e)),selectNewVoice(),sng()},3e3)}else curG.attempts<=3&&(sfx(bd),n[ih]="●".repeat(3-curG.attempts)+"○".repeat(curG.attempts))}),r.innerText="👍",(s=ce("td"))[sa]("colspan",curG.sNum),s[ac](r),a[ac](s),e[ac](a),matrix[ac](e)},sound=!0,pause=!1,games=[],shuffle=e=>e.sort(()=>.5-M[ra]()),timeouts=[],cont=d[ge]("cont"),wbc=d[ge]("wbc"),matrix=d[ge]("matrix"),root=d[ge]("root"),cn=d[ge]("cn"),mn=d[ge]("mn"),bd=[1.82,,1554,,.03,.23,,1.67,,,,,,,34,,.06,.62,.06],theme=(e=65)=>{[0,250,500][fe]((t,a)=>((e,t)=>to(()=>sfx([2,,t,,.08,.07,,.94,,,510,.09,.08,,,,.05,1.5,.02,.1]),e))(t,100-a*e))},gi=(e,t=3)=>parseInt(d[ge](e).value)||t,fi=(e,t)=>d[ge](e)[ih]=t,ce=e=>d.createElement(e),to=(e,t)=>{timeouts.push(setTimeout(e,t))},checkToString=e=>e.map(e=>Object.keys(e).concat(Object.values(e))).flat().sort().join(),sample=e=>{let t=null==e?0:e.length;return t?e[~~(M[ra]()*t)]:void 0},sampleSize=(e,t,a=[])=>e<1||t.length<1?a:shuffle(e>=t.length?[...a,...t]:M[ra]()<e/t.length?sampleSize(e-1,t.slice(1),[...a,t[0]]):sampleSize(e,t.slice(1),a)),iareEquals=(e,t)=>{for(let s=0;s<e.length;s++){for(var a in e[s])if(!(a in t[s])||e[s][a]!==t[s][a])return!1;for(var a in t[s])if(!(a in e[s])||e[s][a]!==t[s][a])return!1}return!0},stMod=["🏻","🏼","🏽","🏾","🏿"],gMod=["👩","👨"];gMod2=["♂️","♀️"],fsn=new RegExp("\ud83c[\udffb-\udfff]","g"),fg=new RegExp(gMod.join("|"),"g"),fg2=new RegExp(gMod2.join("|"),"g"),rst=(e=>e.replace(fsn,sample(stMod))),randGender=(e=>e.replace(fg,sample(gMod)).replace(fg2,sample(gMod2)));let newDet=()=>{det=rst(randGender("🕵🏼‍♂️")),d[ge]("det")[ih]=det,d.title=`BLANKS ${det}- Reduce the space`,wbc[sa]("data-flair",`${det}`)},su=e=>e.split(","),opt={lang:"en",files:10,clueTypes:su("ti,tiai,a,b,nt"),cats:["👓,👕,👘,🎩,👠,🧤,🧣,👒,🧢,🩳,🧦","🎷,🎸,🎺,🎻,🪕,🥁,🎹","⚽,🏀,🏈,🎾,🥏,🏓,🎳,⚾,🏸,🥌","❤️,🧡,💛,💚,💙,💜,🖤,🤎,💔,💖,💕","🍇,🍉,🍊,🍎,🥝,🥥,🍐,🍑,🍒,🍋,🍌","🐒,🐕,🐈,🦓,🐄,🐖,🐪,🐘,🐇,🐿️,🦨,🦇","🥯,🍔,🍕,🧀,🍜,🍦,🍩,🍿,🥐,🌮,🍣,🥔,🧁,🥪","🥰,😎,👿,🤔,😓,😷,🥺,🤪,😇,🥶,🥱,🧐,😉,😲"],sN:"🧟‍♂️,🦹🏽‍♂️,🦸🏽‍♂️,🧛🏽‍♂️,👷🏻‍♂️,👨🏽‍🎨,👨🏿‍💼,👨🏻‍🔧,👨🏾‍⚕️,👨🏼‍🌾,👨🏽‍⚖️,👨🏾‍🔬,👨🏼‍🎤,👨🏽‍🚀,👮🏽‍♂️,👩🏽‍🍳,🧕🏼,💂🏽‍♂️,🧙🏼‍♂️,👰🏻,👩🏼‍✈️,🧝🏽‍♂️,👨🏾‍🚒,👩🏽‍🎓,👩🏼‍🏭,🧚🏽‍♂️",en:"Well Done!_Possible 👍_No more clues._Tutorial: Use these clues. Fill in those spaces. Then 👍_New Case!_# of People_# of Categories_Choose_Create_Community_Case Files",tp:"pona!_ken 👍_pini_kama sona: o kute e toki pi wile sona. tenpo pini la o luka e 👍_utala sin_jan_kulupu ilo_o pana_o sin_kulupu_utala mute",fr:"Bien Joué!_👍 Possible_Indices terminés._Tutoriel: Utilisez les indices. Remplissez les espaces. Enfin appuyez sur 👍_Nouveau Mystère!_Nombre de Personnes_Nombre de Catégories_Choisir_Créer_Communauté_Fichiers de Mystères",es:"¡Bien Hecho!_👍 Posible_No más pistas._Tutorial: Usa las pistas. Completa la información. Finalmente toca 👍_Nuevo Misterio!_Gente_Categorías_Elegir_Crear_Comunidad_Archivos de Misterios","zh-CN":"做得好!_可以完成_没有了_教程：使用线索并完成信息。 然后单击 👍。_新谜底!_人数_类别数_选择_创建_社区_神秘档案"};opt.sN=su(opt.sN),opt.cats=opt.cats.map(su);let kk=su("wellDone,solvable,noMore,tutorial,newCase,p,c,ch,cr,com,ff");["en","tp","fr","es","zh-CN"][fe](e=>{let t={};opt[e]=opt[e].split("_")[fe]((e,a)=>t[kk[a]]=e),opt[e]=t});let voice,lang=(e,t=!0)=>{switch(pause=!1,t&&(sfx([.7,.45,82.40689,,,.02,,3,35,,-150,-.06,,,,,,.5,.03,.21]),e.target&&(e.target[cl].add("selected"),e=e?e.target.getAttribute("id"):"en")),opt.lang=e,opt.lang){case"tp":opt.cNms=su("len,kalama musi,musi utala,olin,kili,soweli,moku,pilin");break;case"fr":opt.cNms=su("le vêtement,l'instrument,le sport,le cœur,le fruit,l'animal,la bouffe,le sentiment");break;case"es":opt.cNms=su("la ropa,el instrumento,el deporte,el corazón,la fruta,el animal,la comida,el sentimiento");break;case"zh-CN":opt.cNms=su("衣服,乐器,运动,心脏,水果,动物,食物,心情");break;default:opt.cNms=su("clothes,instrument,sport,heart,fruit,animal,food,mood")}games=[],addGame(1,2).then(e=>tt=e)};lang("en",!1),[...d[gcn]("lang")][fe]((e,t,a)=>{e.addEventListener("click",e=>{a[fe](e=>e[cl].remove("selected")),lang(e)})}),newDet();let selectNewVoice=()=>{(voice=(voice=window.speechSynthesis.getVoices().filter(e=>e.lang.indexOf(opt.lang)>-1))[new Date%voice.length])||to(selectNewVoice,1e3)};selectNewVoice();let sfx=e=>{pause||sound&&zzfx(...e)},say=e=>{if("tp"===opt.lang)return;if(!sound)return;if(pause)return;selectNewVoice(),speechSynthesis.cancel();let t=new SpeechSynthesisUtterance;t.voice=voice,t.text=e.replace(new RegExp("cœur|corazón|heart","g"),""),t.lang=opt.lang,speechSynthesis.speak(t)},chooseGame=()=>{clear(),wbc[ac](nnote()),root.style.display="none",addGame(gi("people"),gi("cats")).then(e=>sng(e))};setInterval(()=>{if(cont[cl].contains("end"))return;let e=sample([...d[gcn]("cme")]);e&&!e.children[0][cl].contains("correct","incorrect")&&1!=curG.sNum&&(e[cl].add("dan"),setTimeout(()=>{for(;"0"!==e.children[0].dataset.o;){if(!e[cl].contains("dan"))return;e.click()}[...d[gcn]("dan")][fe](e=>e[cl].remove("dan"))},800))},5e4),zzfxV=.3,zzfx=((e=1,t=.05,a=220,s=0,n=0,r=.1,l=0,c=1,o=0,i=0,d=0,p=0,u=0,$=0,m=0,f=0,g=0,h=1,w=0,y=0)=>{let b,N,k=44100,x=2*M.PI,v=o*=500*x/k/k,G=a*=(1-t+2*t*M[ra](t=[]))*x/k,_=0,C=0,O=0,S=1,T=0,z=0,j=0;for(i*=500*x/k**3,m*=x/k,d*=x/k,p*=k,u=k*u|0,N=(s=k*s+9)+(w*=k)+(n*=k)+(r*=k)+(g*=k)|0;O<N;t[O++]=j)++z%(100*f|0)||(j=l?1<l?2<l?3<l?M.sin((_%x)**3):M.max(M.min(M.tan(_),1),-1):1-(2*_/x%2+2)%2:1-4*M.abs(M.round(_/x)-_/x):M.sin(_),j=(u?1-y+y*M.sin(x*O/u):1)*(0<j?1:-1)*M.abs(j)**c*e*zzfxV*(O<s?O/s:O<s+w?1-(O-s)/w*(1-h):O<s+w+n?h:O<N-g?(N-O-g)/r*h:0),j=g?j/2+(g>O?0:(O<N-g?1:(N-O)/g)*t[O-g|0]/2):j),_+=(b=(a+=o+=i)*M.cos(m*C++))-b*$*(1-1e9*(M.sin(O)+1)%2),S&&++S>p&&(a+=d,G+=d,S=0),!u||++T%u||(a=G,o=v,S=S||1);return(e=zzfxX.createBuffer(1,N,k)).getChannelData(0).set(t),(a=zzfxX.createBufferSource()).buffer=e,a.connect(zzfxX.destination),a.start(),a}),zzfxX=new(window.AudioContext||webkitAudioContext);let clueTime,levelTime,wordClues=e=>{let t,a,s,n=Object.keys(e.d[0]),r=Object.keys(e.d[1]||{});t=(curG.cats[curG.cNms.indexOf(n[0])]||[]).indexOf(e.d[0][n[0]])+1,a=(curG.cats[curG.cNms.indexOf(n[1])]||[]).indexOf(e.d[0][n[1]])+1,r.length&&(s=(curG.cats[curG.cNms.indexOf(r[0])]||[]).indexOf(e.d[1][r[0]])+1);let l="",c='<span data-o="';switch(opt.lang){case"es":switch(l="la persona con ",e.type){case"ti":return`${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>, también tiene ${n[1]}${c}${a}">${e.d[0][n[1]]}</span>`;case"tiai":return`<span class="person">${curG.sN[e.d[1].i]}</span>tiene ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"b":return`${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span> está a la derecha de ${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"a":return`${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span> está a la izquierda de ${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"nt":return`${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span> está cerca de ${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`}break;case"fr":switch(l="la personne avec ",e.type){case"ti":return`${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>, aussi tiens ${n[1]}${c}${a}">${e.d[0][n[1]]}</span>`;case"tiai":return`<span class="person">${curG.sN[e.d[1].i]}</span>tiens ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"b":return`${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span> est à droite de<br/>${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"a":return`${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span> est à gauche de<br/>${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"nt":return`${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span> est a coté de<br/>${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`}break;case"zh-CN":switch(e.type){case"ti":return`有${c}${t}">${e.d[0][n[0]]}</span> ${n[0]}的人, 也有${c}${a}">${e.d[0][n[1]]}</span> 的${n[1]}`;case"tiai":return`<span class="person">${curG.sN[e.d[1].i]}</span> 有 ${c}${t}">${e.d[0][n[0]]}</span> 的${n[0]}`;case"b":return`${r[0]}${c}${s}">${e.d[1][r[0]]}</span> 在${n[0]}${c}${t}">${e.d[0][n[0]]}</span> 的右边`;case"a":return`${r[0]}${c}${s}">${e.d[1][r[0]]}</span> 在${n[0]}${c}${t}">${e.d[0][n[0]]}</span> 的左边`;case"nt":return`${r[0]}${c}${s}">${e.d[1][r[0]]}</span> 就在${n[0]}${c}${t}">${e.d[0][n[0]]}</span> 的旁边`}case"tp":switch(e.type){case"ti":return`jan li jo e ${n[0]}${c}${t}">${e.d[0][n[0]]}</span> li jo e ${n[1]}${c}${a}">${e.d[0][n[1]]}</span> kin`;case"tiai":return`jan<span class="person">${curG.sN[e.d[1].i]}</span>li jo e ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"b":return`${r[0]}${c}${s}">${e.d[1][r[0]]}</span> li lon poka pini pi ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"a":return`${r[0]}${c}${s}">${e.d[1][r[0]]}</span> li lon poka open pi ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"nt":return`${r[0]}${c}${s}">${e.d[1][r[0]]}</span> li lon poka pi ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`}break;default:switch(l="the person with ",e.type){case"ti":return`The one with ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>, also has ${n[1]}${c}${a}">${e.d[0][n[1]]}</span>`;case"tiai":return`<span class="person">${curG.sN[e.d[1].i]}</span>has ${n[0]}${c}${t}">${e.d[0][n[0]]}</span>`;case"a":return`One left of ${n[0]}${c}${t}">${e.d[0][n[0]]}</span> is ${r[0]}${c}${s}">${e.d[1][r[0]]}</span>`;case"b":return`One right of ${n[0]}${c}${t}">${e.d[0][n[0]]}</span> is ${r[0]}${c}${s}">${e.d[1][r[0]]}</span>`;case"nt":return`Next to ${l}${n[0]}${c}${t}">${e.d[0][n[0]]}</span>,<br/> is ${l}${r[0]}${c}${s}">${e.d[1][r[0]]}</span>`}}},showClueArr=(e,t)=>{[...d[gcn]("loading")][fe](e=>e[ih]=""),e.map(wordClues)[fe]((e,t)=>{let a=ce("div");a[cl].add("waiting"),a[ih]="",wbc[ac](a),to(()=>{a[cl].remove("waiting"),a[ih]="",a.onclick=(e=>{say(e.target.innerText.replace(fsn,""))}),a[ih]=e,a[cl].add("clue"),sfx([2,0,~~(40+40*M[ra]()),.01,,.26,1,2.5,.2,,,,1,,,,,.3,.05]),say(a.innerText.replace(fsn,""))},clueTime*(t+(sound?0:1)))}),t&&to(()=>{let e=nnote();wbc[ac](e)},1e3*(e.length+1))},scoreMatrix=()=>{[...d[gcn]("dan")][fe](e=>e[cl].remove("dan")),curG.attempts+=1;let e=curG.levels[curG.levels.length-1].cb[0],t=!0;for(let a=0;a<curG.sNum;a++)for(let s=0;s<curG.cats.length;s++){let n=uB[a][curG.cNms[s]];n.span[cl].remove("correct,incorrect"),"_"!==n.d?e[a][curG.cNms[s]]===n.d?to(()=>{n.span.parentElement.style.pointerEvents="none",n.span[cl].add("correct"),n.span[cl].remove("incorrect")},100*(s+a)):(to(()=>{n.span[cl].add("incorrect"),sfx(bd)},100*(s+a)),t=opt.t=!1):t=opt.t=!1}return t},extraClueButton=()=>{if(!curG.extraClue)return;let e=ce("button");e[cl].add("clue"),e.onclick=(()=>{curG.extraClue(),e.parentNode.removeChild(e)}),e[ih]="+ 🔍";let t=ce("div");t[cl].add("spacer"),wbc[ac](t),wbc[ac](e)},nnote=()=>{let e=ce("div");return e[cl].add("clue"),e[ih]='<h3 class="loading">🔍</h3>',e},setupWorkbook=()=>{timeouts[fe](e=>clearTimeout(e)),clueTime=sound?6600:800,levelTime=sound?2e3:7e3;let e=1===curG.sNum?sound?7e3:4e3:sound?2500:1e3,t=0;curG.levels[fe]((a,s,n)=>{to(()=>{if(curG.level=s,showClueArr(a.rwc,s<n.length-1),curG.level===n.length-1){let e=nnote();wbc[ac](e),to(()=>{e[cl].add("clue"),e[cl][ih]="",e[ih]=`<br/><h3>${opt[opt.lang].solvable}</h3>`,opt.t=!1,theme(-200),to(()=>say(opt[opt.lang].solvable),600),wbc[ac](e),extraClueButton()},6600*a.rwc.length-1+500*(curG.sNum+curG.catNum))}},t*clueTime+e+s*levelTime),t+=a.rwc.length});let a=ce("div");1===curG.sNum?(a[ih]=`<div class="tutorial">${opt[opt.lang].tutorial}</div>`,say(opt[opt.lang].tutorial)):(newDet(),a[ih]=`<h1><span>${det}</span> ${opt[opt.lang].newCase}</h1>`,theme(),to(()=>say(opt[opt.lang].newCase),700)),wbc[ac](a),wbc[ac](nnote())};</script></body></html>
