<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style type="text/css">body,html{height:100%;margin:0;padding:0;width:100%}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{border-radius:6px;box-shadow:inset 0 0 5px grey}::-webkit-scrollbar-thumb{background:#06f;border-radius:6px;box-shadow:0 0 24px #06f,0 0 24px #06f,0 0 24px #06f}#divBody{align-items:center;background-color:#000;height:100vh;justify-content:center;width:100vw}#divBody,#divPauses{display:flex;position:absolute}#divPauses{left:4px;top:4px}#divPreview{background-color:#181818;border:1px solid #fff;border-radius:4px;display:none;height:80vh;left:25vw;overflow-y:scroll;position:absolute;top:10vh;width:50vw;z-index:9999}#divPlayer{background:radial-gradient(circle at 33% 33%,hsla(0,0%,100%,.25),#000);background-color:#fff;border-radius:50%;position:absolute}#divStage{background-color:#181818;border:1px solid #fff;overflow:hidden;position:relative}#svgMenu{height:100%;max-height:90vh;width:100%;z-index:1000}#svgMsg{height:10vh;left:10vw;position:absolute;top:0;width:80vw;z-index:1001}.pause-symbol{background-color:#fff;border-radius:50%;clip-path:polygon(100% 100%,100% 0,0 0,0 100%,25% 100%,25% 15%,75% 15%,75% 50%,40% 50%,40% 100%);height:2vh;margin-right:4px;width:2vh}.line{height:100%;position:absolute;top:0}.line-color-0,.line-color-8{background-color:#06f}.line-color9,.line-color-1{background-color:#fd0e38}.line-color-2,.line-color-10{background-color:#6f6}.line-color-3,.line-color-11{background-color:#f0c}.line-color-4,.line-color-12{background-color:#ff6}.line-color-5,.line-color-13{background-color:#ff6038}.line-gap{background-color:#181818;left:-30px;width:60px}.line-gap,.line-item{position:absolute}.line-item-16,.line-item-17,.line-item-18,.line-item-19,.line-item-20,.line-item-21{clip-path:polygon(0 50%,30% 20%,35% 25%,15% 45%,85% 45%,65% 25%,70% 20%,100% 50%,70% 80%,65% 75%,85% 55%,15% 55%,35% 75%,30% 80%)}.line-item-16{background:radial-gradient(circle at 50% 50%,#06f,#000)}.line-item-17{background:radial-gradient(circle at 50% 50%,#fd0e38,#000)}.line-item-18{background:radial-gradient(circle at 50% 50%,#6f6,#000)}.line-item-19{background:radial-gradient(circle at 50% 50%,#f0c,#000)}.line-item-20{background:radial-gradient(circle at 50% 50%,#ff6,#000)}.line-item-21{background:radial-gradient(circle at 50% 50%,#ff6038,#000)}.line-item-32,.line-item-33,.line-item-34,.line-item-35,.line-item-36,.line-item-37{clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%)}.line-item-32{background:radial-gradient(circle at 50% 50%,#06f,#000)}.line-item-33{background:radial-gradient(circle at 50% 50%,#fd0e38,#000)}.line-item-34{background:radial-gradient(circle at 50% 50%,#6f6,#000)}.line-item-35{background:radial-gradient(circle at 50% 50%,#f0c,#000)}.line-item-36{background:radial-gradient(circle at 50% 50%,#ff6,#000)}.line-item-37{background:radial-gradient(circle at 50% 50%,#ff6038,#000)}.line-item-96{clip-path:polygon(0 50%,100% 0,100% 100%)}.line-item-96,.line-item-98{background:radial-gradient(circle at 50% 50%,#50bfe6,#000)}.line-item-98{clip-path:polygon(0 0,100% 50%,0 100%)}.line-item-112{clip-path:polygon(0 100%,50% 0,100% 100%,80% 100%,50% 20%,46% 30%,54% 30%,58% 40%,42% 40%,38% 50%,62% 50%,65% 60%,35% 60%,31% 70%,69% 70%,73% 80%,27% 80%,23% 90%,77% 90%,80% 100%)}.line-item-112,.line-item-113{background:radial-gradient(circle at 50% 50%,#87ff2a,#000)}.line-item-113{clip-path:polygon(0 100%,50% 0,100% 100%,80% 100%,50% 20%,38% 50%,62% 50%,65% 60%,35% 60%,31% 70%,69% 70%,73% 80%,27% 80%,23% 90%,77% 90%,80% 100%)}.line-item-114{clip-path:polygon(0 100%,50% 0,100% 100%,80% 100%,50% 20%,31% 70%,69% 70%,73% 80%,27% 80%,23% 90%,77% 90%,80% 100%)}.line-item-114,.line-item-115{background:radial-gradient(circle at 50% 50%,#87ff2a,#000)}.line-item-115{clip-path:polygon(0 100%,50% 0,100% 100%,80% 100%,50% 20%,23% 90%,77% 90%,80% 100%)}.line-item-117{clip-path:polygon(0 0,50% 100%,100% 0,80% 0,50% 80%,23% 10%,77% 10%,80% 0)}.line-item-117,.line-item-118{background:radial-gradient(circle at 50% 50%,#87ff2a,#000)}.line-item-118{clip-path:polygon(0 0,50% 100%,100% 0,80% 0,50% 80%,31% 30%,69% 30%,73% 20%,27% 20%,23% 10%,77% 10%,80% 0)}.line-item-119{clip-path:polygon(0 0,50% 100%,100% 0,80% 0,50% 80%,38% 50%,62% 50%,65% 40%,35% 40%,31% 30%,69% 30%,73% 20%,27% 20%,23% 10%,77% 10%,80% 0)}.line-item-119,.line-item-120{background:radial-gradient(circle at 50% 50%,#87ff2a,#000)}.line-item-120{clip-path:polygon(0 0,50% 100%,100% 0,80% 0,50% 80%,46% 70%,54% 70%,58% 60%,42% 60%,38% 50%,62% 50%,65% 40%,35% 40%,31% 30%,69% 30%,73% 20%,27% 20%,23% 10%,77% 10%,80% 0)}.line-item-128{clip-path:polygon(0 40%,100% 40%,100% 60%,0 60%)}.line-item-128,.line-item-130{background:radial-gradient(circle at 50% 50%,#ff6eff,#000)}.line-item-130{clip-path:polygon(0 40%,40% 40%,40% 0,60% 0,60% 40%,100% 40%,100% 60%,60% 60%,60% 100%,40% 100%,40% 60%,0 60%)}.line-item-255{background:radial-gradient(circle at 50% 50%,#fc3,#000);clip-path:polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%)}</style></head><body><div id="divBody"><div id="divStage" style="display:none;"><div id="divPauses"></div></div><svg id="svgMsg" viewBox="0 0 800 200" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg"></svg> <svg id="svgMenu" viewBox="0 0 500 282" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg"></svg><div id="divPreview"></div></div><script type="text/javascript">!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){},,function(e,t,i){"use strict";i.r(t);var s={get isSmallScreen(){return window.innerWidth<=800||window.innerHeight<=600},get isTouchScreen(){return"ontouchstart"in document.documentElement},adjustSpeed:(e,t)=>Math.max(t*e.clientHeight/620,1.5),adjustWidthHeightRatio(){const e=window.innerHeight,t=.564*window.innerWidth,i=document.styleSheets[0].cssRules;for(let s=0,n=i.length;s<n;++s){const n=i[s];if("#divStage"===n.selectorText){t<=.9*e?(n.style.setProperty("height",t+"px"),n.style.setProperty("width","90vw")):(n.style.setProperty("height","90vh"),n.style.setProperty("width",.9*e*1.773+"px"));break}}}};const n=1.2,o=new AudioContext;function l(e,t,i){const s=o.createGain(),n=o.createDelay(),l=o.createBiquadFilter();n.delayTime.value=i.echo[0],s.gain.value=i.echo[1],i.echo[2]&&(l.frequency.value=i.echo[2]),n.connect(s),i.echo[2]?(s.connect(l),l.connect(n)):s.connect(n),e.connect(n),n.connect(t)}function r(e,t,i){const s=i.reverb,n=o.createConvolver();n.buffer=function(e,t,i){const s=o.sampleRate*e,n=o.createBuffer(2,s,o.sampleRate),l=n.getChannelData(0),r=n.getChannelData(1);for(let e=0;e<s;e++){let n=i?s-e:e;l[e]=(2*Math.random()-1)*Math.pow(1-n/s,t),r[e]=(2*Math.random()-1)*Math.pow(1-n/s,t)}return n}(s[0],s[1],s[2]),e.connect(n),n.connect(t)}function a(e,t){e.gain.value=0,e.gain.linearRampToValueAtTime(0,o.currentTime),e.gain.linearRampToValueAtTime(t.volumeValue,o.currentTime+t.attack)}function h(e,t){e.gain.linearRampToValueAtTime(t.volumeValue,o.currentTime+t.attack),e.gain.linearRampToValueAtTime(0,o.currentTime+t.attack+t.decay)}function p(e,t){const i=e.frequency.value;t.reverse?(e.frequency.linearRampToValueAtTime(i,o.currentTime),e.frequency.linearRampToValueAtTime(i+t.pitchBendAmount,o.currentTime+t.attack+t.decay)):(e.frequency.linearRampToValueAtTime(i,o.currentTime),e.frequency.linearRampToValueAtTime(i-t.pitchBendAmount,o.currentTime+t.attack+t.decay))}function c(e){e.start(o.currentTime),e.stop(o.currentTime+n)}const u=[165,175,185,196,208,220,233,247,262,277,294,311,330,349,370,392,415,440,466,494,523,554,587,622,659,698,740,784,831,880],m={HIT_GAP:{frequencyValue:60,attack:0,decay:.2,type:"sawtooth",volumeValue:3,panValue:0,pitchBendAmount:10,reverse:!1,randomValue:0,dissonance:30},NOTE:{frequencyValue:880,attack:0,decay:.2,type:"sine",volumeValue:.8,panValue:-1,pitchBendAmount:0,reverse:!1,randomValue:0,dissonance:0},TOGGLE_ON:{frequencyValue:280,attack:0,decay:.2,type:"triangle",volumeValue:.5,panValue:0,pitchBendAmount:20,reverse:!1,randomValue:0,dissonance:0},TOGGLE_OFF:{frequencyValue:260,attack:0,decay:.2,type:"triangle",volumeValue:.5,panValue:0,pitchBendAmount:20,reverse:!0,randomValue:0,dissonance:0}};let d={playSound(e,t=-1,i){t>=0&&(e.frequencyValue=u[5*i+t]),new class{constructor(e){e=this.sound=Object.assign({},e),this.oscillator=o.createOscillator(),this.volume=o.createGain(),this.pan=o.createStereoPanner?o.createStereoPanner():o.createPanner(),this.oscillator.connect(this.volume),this.volume.connect(this.pan),this.pan.connect(o.destination),this.volume.gain.value=e.volumeValue,o.createStereoPanner?this.pan.pan.value=e.panValue:this.pan.setPosition(e.panValue,0,1-Math.abs(e.panValue)),this.oscillator.type=e.type,this.oscillator.frequency.value=e.randomValue>0?function(e,t){return Math.floor(Math.random()*(t-e+1))+e}(e.frequencyValue-e.randomValue/2,e.frequencyValue+e.randomValue/2):e.frequencyValue}play(){let e=this.sound;e.attack>0&&a(this.volume,e),h(this.volume,e),e.pitchBendAmount>0&&p(this.oscillator,e),e.echo&&l(this.volume,this.pan,e),e.reverb&&r(this.volume,this.pan,e),e.dissonance>0&&function(e,t){const i=o.createOscillator(),s=o.createOscillator(),n=o.createGain(),u=o.createGain();n.gain.value=t.volumeValue,u.gain.value=t.volumeValue,i.connect(n),n.connect(o.destination),s.connect(u),u.connect(o.destination),i.type="sawtooth",s.type="sawtooth",i.frequency.value=t.frequencyValue+t.dissonance,s.frequency.value=t.frequencyValue-t.dissonance,t.attack>0&&(a(n,t),a(u,t)),t.decay>0&&(h(n,t),h(u,t)),t.pitchBendAmount>0&&(p(i,t),p(s,t)),t.echo&&(l(n,e,t),l(u,e,t)),t.reverb&&(r(n,e,t),r(u,e,t)),c(i),c(s)}(this.pan,e),this.oscillator.start(o.currentTime),this.oscillator.stop(o.currentTime+n)}}(e).play()}};Object.keys(m).forEach(e=>{Object.defineProperty(d,e,{value:m[e],writable:!1})});var g=d;let v,y;function f(e){let t=document.createElement("div");return t.className=e,t}function w(e,t,i,s){this.active=!1,this.top=e*i,this.height=t*i,this.type=t,this.info=15&t,this.element=s,this.disposed=!1}var q=class{_initializeItems(e,t){let i,s,n,o,l;t?(s=v.gapHeight,i=5,n="line-gap"):(s=v.itemSize,i=5,n="line-item"),o=new Array(i);for(let e=0;e<i;++e)o[e]=f(n);l=new Array(e.length/2);for(let t=0,n=e.length;t<n;t+=2){let n=t/2;l[n]=new w(e[t],e[t+1],s,o[n%i])}t?(this.gaps=l,this.firstGapIndex=0):(this.items=l,this.firstItemIndex=0)}_removeItem(e,t){e.active=!1,e.disposed=!0,t&&++this.firstItemIndex,this.element.removeChild(e.element),e.element.className="line-item"}_updateGaps(e,t){let i=!1,s=!1,n=this.firstGapIndex,o=this.gaps.length;for(;n<o;){let o=this.gaps[n++];o.top+=this.speed,s||(o.active?o.top+o.height<0?(o.active=!1,++this.firstGapIndex,this.element.removeChild(o.element)):(o.element.setAttribute("style",`top:${o.top}px;height:${o.height}px;`),e&&o.top<=t.bottom&&o.top+o.height>=t.top&&(i=!0)):o.top<=y+10?(o.active=!0,o.element.setAttribute("style",`top:${o.top}px;height:${o.height}px;`),this.element.appendChild(o.element)):s=!0)}return i}_updateItems(e,t){const i=v.itemSize,s=this.items.length;let n=0,o=!1,l=this.firstItemIndex;for(;l<s;){let s=this.items[l++];s.top+=this.speed,o||(s.active?s.top+i<0?this._removeItem(s,!0):(s.element.setAttribute("style",`${this.itemStyle};top:${s.top}px;`),e&&s.top<=t.top&&s.top+v.itemSize>=t.top&&(this._removeItem(s,!1),n=s.type)):s.disposed||(s.top<=y+10?(s.active=!0,s.element.classList.add("line-item-"+s.type),s.type<96&&s.element.classList.add("line-color-"+s.info),s.element.setAttribute("style",`${this.itemStyle};top:${s.top}px;`),this.element.appendChild(s.element)):o=!0))}return n}constructor(e,t,i,n){let o=n.linePositions[i];y=n.stageHeight,v=n,this.visible=!0,this.visibleStyle="",this.color=t.color,this.position=i,this.speed=-1*s.adjustSpeed(e,t.speed),this.hasItems=t.hasOwnProperty("items"),this.element=document.createElement("div"),this.element.className="line line-color-"+this.color,this.element.setAttribute("style",`left:${o}px;width:${n.lineWidth}px;`),this._initializeItems(t.gaps,!0),this.hasItems&&(o=Math.floor((n.lineWidth-n.itemSize)/2),this.itemStyle=`left:${o}px;width:${v.itemSize}px;height:${v.itemSize}px`,this._initializeItems(t.items,!1)),this._updateGaps(!1,null),this._updateItems(!1,null),e.appendChild(this.element)}destroy(){this.element.remove(),this.element.innerHTML="",this.element=null}toggle(){this.visible=!this.visible,this.visible?(this.element.setAttribute("style",this.visibleStyle),g.playSound(g.TOGGLE_ON)):(this.visibleStyle=this.element.getAttribute("style"),this.element.setAttribute("style","display:none;"),g.playSound(g.TOGGLE_OFF))}update(e){let t=0,i=e.line===this.position;return this.hasItems&&(t=this._updateItems(i,e)),this._updateGaps(i,e)&&(t=t||-1),t}};const b=[.5,.88,1,2.1,3.2];var S=class{_updatePosition(){let e=this.layout.linePositions[this.line]-Math.floor(this.height/2);this.top=this.positions[this.position],this.bottom=this.top+this.height,this.element.setAttribute("style",`${this.styleFragment};left:${e}px;top:${this.top}px;`),this.element.className="line-color-"+this.line,g.playSound(g.NOTE,this.line,this.position)}constructor(e,t,i){this.size=t.playerSize,this.line=t.startLine,this.position=t.startRow,this.layout=i,this.heights=function(e,t){return b.map((i,s)=>Math.floor(e*(i+t[s])))}(i.gapHeight,i.sizeAdjustments),this.positions=function(e,t){return[t,3*t,5*t,7*t,9*t]}(i.stageHeight,this.heights[2]),this.height=this.heights[this.size],this.element=document.createElement("div"),this.element.setAttribute("id","divPlayer"),this.styleFragment=`width:${this.height}px;height:${this.height}px`,this._updatePosition(),e.appendChild(this.element)}bump(e,t){let i=this.line+e;for(;i>=0&&i<t.length;){if(t[i].visible){this.line=i,this._updatePosition();break}i+=e}}changeLine(e,t){let i=this.line+e,s=i>=0&&i<t.length&&t[i].visible;return s&&(this.line=i,this._updatePosition()),s}destroy(){this.element&&(this.element.remove(),this.element=null)}changeSize(e){let t=this.size+e;t>=0&&t<b.length&&(this.size=t,this.height=this.heights[t],this.styleFragment=`width:${this.height}px;height:${this.height}px`,this._updatePosition())}changeVertical(e){this.position=Math.min(4,Math.max(0,this.position+e)),this._updatePosition()}moveToLine(e){this.line=e,this._updatePosition()}};const x=function(){};let L,P=1e3/60,T=0,E=0,A=60,I=0,O=0,V=0,k=0,$=!1,z=!1,M=!1,R=x,F=x,H=x,_=x;function B(e){if(L=requestAnimationFrame(B),!(e<E+k)){for(T+=e-E,E=e,R(e,T),e>I+1e3&&(A=.25*O+.75*A,I=e,O=0),O++,V=0;T>=P;)if(F(P),T-=P,++V>=240){M=!0;break}H(T/P),_(A,M),M=!1}}var G={getSimulationTimestep:()=>P,setSimulationTimestep(e){return P=e,this},getFPS:()=>A,getMaxAllowedFPS:()=>1e3/k,setMaxAllowedFPS(e){return void 0===e&&(e=1/0),0===e?this.stop():k=1e3/e,this},resetFrameDelta(){let e=T;return T=0,e},setBegin(e){return R=e||R,this},setUpdate(e){return F=e||F,this},setDraw(e){return H=e||H,this},setEnd(e){return _=e||_,this},start(){return z||(z=!0,L=requestAnimationFrame(function(e){H(1),$=!0,E=e,I=e,O=0,L=requestAnimationFrame(B)})),this},stop(){return $=!1,z=!1,cancelAnimationFrame(L),this},isRunning:()=>$};const C={DEBUG:!1,VERSION:"1.2.1"};let W={clearSvg(e){for(;e.lastChild;)e.removeChild(e.lastChild)},fadeIn(e,t=.1){const i=Array.isArray(e)?e:[e];return new Promise(e=>{let s=0;const n=setInterval(()=>{s+=t,i.forEach(e=>e.setAttribute("style","opacity:"+s)),s>=1&&(clearInterval(n),e())},25)})},fadeOut(e,t=.1){const i=Array.isArray(e)?e:[e];return new Promise(e=>{let s=1;const n=setInterval(()=>{s-=t,i.forEach(e=>e.setAttribute("style","opacity:"+s)),s<=0&&(clearInterval(n),i.forEach(e=>e.setAttribute("style","display:none")),e())},25)})},getLocalInt(e,t){let i=localStorage.getItem(e);return null===i?t:parseInt(i)},setLocalInt(e,t){localStorage.setItem(e,t)}};Object.keys(C).forEach(e=>{Object.defineProperty(W,e,{value:C[e],writable:!1})});var j=W;const N=[2,3,4.5,6,8,11,15,20,30],X=[{number:1,playerSize:2,startLine:1,startRow:1,title:"Just getting started",lines:[{color:0,speed:2,gaps:[0,9,11,1,18,2,27,2,33,1,40,2,48,12],items:[]},{color:1,speed:2,gaps:[0,3,9,1,15,1,22,1,24,1,30,2,36,2,41,2,50,10],items:[45,255]},{color:2,speed:2,gaps:[0,6,12,2,17,2,26,2,38,1,45,15],items:[]}]},{number:2,playerSize:2,startLine:1,startRow:1,title:"Teleporting is cool",lines:[{color:0,speed:2,gaps:[0,6,18,1,23,1,27,2,37,1,43,2,50,10],items:[10,18,36,18]},{color:1,speed:2,gaps:[8,3,14,2,21,4,32,2,40,1,44,2,50,10],items:[49,255]},{color:2,speed:2,gaps:[0,6,8,1,13,1,17,2,27,1,34,1,36,3,48,12],items:[25,16]}]},{number:3,playerSize:2,startLine:1,startRow:0,title:"Ups and Downs Too",lines:[{color:0,speed:2,gaps:[3,3,13,1,19,2,31,1,37,2,42,9],items:[24,118]},{color:1,speed:2,gaps:[8,3,16,4,23,2,27,1,34,2,42,9],items:[33,112,40,255]},{color:2,speed:2,gaps:[5,2,11,2,22,3,29,4,38,2,42,9],items:[10,120]},{color:3,speed:2,gaps:[9,2,17,3,25,2,35,1,38,1,42,9],items:[]}]},{number:4,playerSize:2,startLine:2,startRow:0,title:"It's all Good",lines:[{color:0,speed:2,gaps:[3,2,6,1,9,1,17,3,22,1,27,2,41,4,50,3,62,1,71,1,76,9],items:[21,120,32,19,61,112]},{color:1,speed:2,gaps:[9,2,12,3,24,1,30,2,36,1,38,1,42,1,47,1,51,1,57,1,65,4,73,1,76,9],items:[20,117]},{color:2,speed:2,gaps:[5,3,16,3,27,1,32,1,38,2,45,1,48,1,53,2,58,2,61,3,70,2,76,9],items:[20,16,37,114,74,255]},{color:3,speed:2,gaps:[2,1,11,2,21,2,28,3,35,2,39,4,49,1,51,1,61,1,66,2,76,9],items:[10,16,48,118,55,16,60,117]}]},{number:5,playerSize:2,startLine:0,startRow:1,title:"One pill makes you bigger",lines:[{color:0,speed:2,gaps:[8,3,13,3,21,1,25,3,37,1,41,1,51,9],items:[49,255]},{color:1,speed:2,gaps:[3,3,18,1,26,1,33,2,38,2,44,2,51,9],items:[12,130,23,128]},{color:2,speed:2,gaps:[7,2,14,1,22,2,29,3,42,1,47,1,51,9],items:[37,130]},{color:3,speed:2,gaps:[10,2,16,2,21,2,25,2,33,2,38,3,44,1,51,9],items:[30,128]}]},{number:6,playerSize:2,startLine:2,startRow:0,title:"Small and on the Side",lines:[{color:0,speed:2,gaps:[2,2,10,3,18,3,26,1,35,2,45,2,51,1,55,1,58,3,65,1,71,2,76,9],items:[7,119,17,20,22,130,33,113,34,118,54,20]},{color:1,speed:2,gaps:[6,3,14,3,22,1,26,3,32,2,37,2,41,2,47,1,57,2,62,1,68,1,73,1,76,9],items:[56,112]},{color:2,speed:2,gaps:[5,1,11,1,15,1,19,1,23,1,27,1,31,3,43,2,48,1,51,2,55,3,63,4,69,2,76,9],items:[41,128,47,16,74,255]},{color:3,speed:2,gaps:[8,2,12,1,18,3,24,2,30,1,37,3,45,2,49,1,54,3,60,1,64,2,72,2,76,9],items:[43,118,53,17,71,118]},{color:4,speed:2,gaps:[2,2,14,2,26,3,33,1,41,5,52,2,59,3,68,1,74,11],items:[7,128,13,118,21,16,25,118,36,128,40,16,49,128]}]},{number:7,playerSize:2,startLine:2,startRow:0,title:"Clap on - Clap off",lines:[{color:0,speed:2,gaps:[4,2,10,2,22,2,28,1,31,2,40,3,51,9],items:[37,35]},{color:1,speed:2,gaps:[9,1,13,2,18,1,26,3,35,3,41,1,45,3,51,9],items:[32,35,34,120]},{color:2,speed:2,gaps:[5,2,16,5,24,1,31,2,34,2,42,1,51,9],items:[9,33,37,35,44,112]},{color:3,speed:2,gaps:[8,2,11,3,19,3,27,3,34,1,37,3,44,2,51,9],items:[18,16,33,16]},{color:4,speed:2,gaps:[4,2,14,1,19,1,23,2,32,2,39,2,51,9],items:[13,16,49,255]}]},{number:8,playerSize:2,sizeAdjustments:[0,-.1,0,0,0],startLine:2,startRow:0,title:"So symmetrical",lines:[{color:0,speed:2,gaps:[0,7,13,1,21,2,26,1,33,1,39,1,45,4,53,1,56,2,62,3,68,2,76,9],items:[9,34,12,19,30,130,52,119]},{color:1,speed:2,gaps:[0,5,9,2,16,3,24,1,28,3,36,1,43,2,51,1,59,1,76,9],items:[22,128,64,118]},{color:2,speed:2,gaps:[7,1,12,3,19,22,47,2,54,3,62,2,66,3,76,9],items:[74,255]},{color:3,speed:2,gaps:[0,5,9,2,16,3,24,1,28,3,36,1,43,2,51,1,59,1,67,1,76,9],items:[22,128,41,34,64,118]},{color:4,speed:2,gaps:[0,7,13,1,21,2,26,1,33,1,39,1,45,4,53,1,56,2,62,3,68,2,76,9],items:[9,34,12,17,30,130,52,119]}]},{number:9,playerSize:2,startLine:0,startRow:0,title:"Bumps in the Road",lines:[{color:0,speed:2,gaps:[6,3,51,9],items:[5,98,39,33,43,98]},{color:1,speed:2,gaps:[2,3,10,1,15,2,19,1,51,9],items:[]},{color:2,speed:2,gaps:[6,2,12,2,51,9],items:[17,35,20,98,49,255]},{color:3,speed:2,gaps:[15,2,51,9],items:[14,96]},{color:4,speed:2,gaps:[13,1,51,9],items:[27,34,31,96,45,34,47,96]}]},{number:10,playerSize:2,startLine:2,startRow:0,title:"Three down, Two no go",lines:[{color:0,speed:2,gaps:[0,5,11,5,22,3,29,2,33,3,39,2,43,6,53,1,59,1,67,1,76,9],items:[21,118,42,113,58,20]},{color:1,speed:2,gaps:[0,4,7,2,12,2,19,5,31,2,35,2,42,5,50,1,56,2,62,3,68,4,76,9],items:[]},{color:2,speed:2,gaps:[6,4,16,1,21,1,26,2,39,1,44,1,49,6,59,2,65,1,69,1,76,9],items:[43,98,74,255]},{color:3,speed:2,gaps:[6,4,16,3,24,4,35,4,42,1,47,3,55,4,63,4,76,9],items:[]},{color:4,speed:2,gaps:[0,4,7,2,12,2,19,2,25,2,31,2,37,1,42,1,45,1,52,1,56,2,62,1,68,2,76,9],items:[39,35]},{color:5,speed:2,gaps:[0,5,11,5,22,3,30,5,42,1,52,2,59,1,65,1,71,2,76,9],items:[21,119,41,16,49,35,58,17]}]},{number:11,playerSize:2,startLine:2,startRow:0,title:"It's Tough at the Bottom",lines:[{color:0,speed:2,gaps:[0,3,8,1,12,5,20,7,32,1,37,2,44,2,49,1,57,2,62,1,66,1,72,3,78,9],items:[11,119,43,21]},{color:1,speed:2,gaps:[0,3,5,1,11,7,22,4,29,1,35,1,41,3,49,1,53,3,59,1,65,1,69,1,73,1,76,11],items:[45,35,52,112]},{color:2,speed:2,gaps:[7,3,16,4,23,2,28,1,31,2,38,1,53,1,58,3,64,1,68,1,78,9],items:[43,37,44,115,51,36,52,98]},{color:3,speed:2,gaps:[0,5,8,1,12,2,17,4,27,2,34,3,40,2,44,5,51,1,60,2,67,1,71,1,75,1,78,9],items:[22,117,52,115,59,16,76,98]},{color:4,speed:2,gaps:[0,6,12,3,18,1,23,2,28,2,36,3,42,2,47,2,55,2,59,1,65,2,70,3,75,1,78,9],items:[11,118,33,35,35,96,46,16]},{color:5,speed:2,gaps:[0,4,7,2,13,2,21,5,32,2,40,2,46,2,50,2,55,2,62,1,69,2,74,2,78,9],items:[76,255]}]},{number:12,playerSize:2,startLine:2,startRow:0,title:"Around the Trouble",lines:[{color:0,speed:2,gaps:[0,5,10,1,16,2,25,2,30,2,38,2,42,2,49,2,53,2,62,9],items:[60,255]},{color:1,speed:2,gaps:[0,4,7,1,13,4,20,3,29,1,34,2,42,1,46,1,50,1,56,4,62,9],items:[52,112]},{color:2,speed:2,gaps:[9,3,21,2,25,2,32,1,38,2,53,1,59,1,62,9],items:[7,120,45,98,49,36]},{color:3,speed:2,gaps:[0,4,7,2,14,3,22,1,28,3,34,2,42,2,47,4,58,2,62,9],items:[]},{color:4,speed:2,gaps:[0,5,9,4,18,2,25,1,32,1,36,3,43,1,56,2,62,9],items:[29,35,46,37,55,96]},{color:5,speed:2,gaps:[0,6,15,1,21,1,27,3,35,2,42,2,50,2,57,2,62,9],items:[34,18,46,36,56,16]}]},{number:13,playerSize:2,startLine:4,startRow:0,title:"Fast Fingers Only",lines:[{color:0,speed:2,gaps:[0,9,14,6,28,3,34,1,36,1,40,3,46,3,52,9],items:[11,130,24,21,33,20,35,120]},{color:1,speed:2,gaps:[0,8,11,1,15,1,22,2,26,1,29,1,32,2,38,1,41,4,47,2,52,9],items:[]},{color:2,speed:2,gaps:[0,6,9,4,18,1,21,2,25,3,31,1,35,5,42,4,48,1,52,9],items:[50,255]},{color:3,speed:2,gaps:[0,3,8,2,13,5,20,2,24,1,28,2,33,2,40,1,43,4,52,9],items:[]},{color:4,speed:2,gaps:[7,2,12,1,16,1,20,1,23,2,30,3,37,1,41,1,44,1,48,2,52,9],items:[5,128]},{color:5,speed:2,gaps:[0,3,10,1,14,1,18,1,22,1,27,1,35,4,47,2,52,9],items:[45,130]}]},{number:14,playerSize:2,startLine:2,startRow:0,title:"Just Go Around",lines:[{color:0,speed:2,gaps:[19,4,27,3,36,3,45,2,54,2,62,9],items:[7,118,15,21,41,36,42,112]},{color:1,speed:2,gaps:[21,1,28,1,32,1,37,1,41,2,48,2,55,2,59,1,62,9],items:[10,117,36,117]},{color:2,speed:2,gaps:[25,1,31,3,40,1,45,1,52,1,62,9],items:[7,120,13,117,23,35,37,98,51,20,60,255]},{color:3,speed:2,gaps:[24,3,35,4,43,1,47,2,52,3,58,2,62,9],items:[7,117,21,117]},{color:4,speed:2,gaps:[22,1,29,3,34,2,41,1,48,1,55,3,62,9],items:[5,120,20,118,37,18]},{color:5,speed:2,gaps:[19,1,25,2,34,2,45,1,52,1,62,9],items:[6,119,12,114,43,36,51,16]}]}];let D=j.getLocalInt("level-high",0),Y=j.getLocalInt("level-plus",0),J=j.getLocalInt("level-plus-high",0),U={get length(){return X.length},get levelHigh(){return D},set levelHigh(e){e>D&&(D=e,j.setLocalInt("level-high",e)),e===X.length&&Y===J&&(++U.levelPlusHigh,++U.levelPlus)},get levelPlus(){return Y},set levelPlus(e){e<=J&&(e>Y&&j.setLocalInt("level-plus",e),Y=e)},get levelPlusHigh(){return J},set levelPlusHigh(e){e>J&&(J=e,j.setLocalInt("level-plus-high",e))},getLevel(e){const t=N[Y],i=X[e%X.length];if(!i)throw new Error(`Invalid level <${e}>`);return i.lines.forEach(e=>e.speed=t),i}};var K=U;const Q={stroke:"#66FF66",strokeLineCap:"round",strokeLineJoin:"round",strokeWidth:2};let Z,ee=100,te={"'":{y:-5,p:"v 10",w:-1},",":{y:95,p:"v 5 m 1 -5 v 5 m 1 -5 v 12",w:2},":":{x:5,y:20,p:"v 5 m 0 50 v 5",w:10},"<":{x:34,y:10,p:"l -29 35 q -5 5 0 10 l 29 35",w:42},">":{x:8,y:10,p:"l 29 35 q 5 5 0 10 l -29 35",w:42},"-":{y:50,p:"h 50"},"=":{y:40,p:"h 50 m 0 20 h -50"},"+":{y:50,p:"h 50 m -25 -5 v -20 m 0 30 v 20"},"[":{x:20,p:"h -15 q -5 0 -5 5 v 90 q 0 5 5 5 h 15",w:20},"]":{p:"h 15 q 5 0 5 5 v 90 q 0 5 -5 5 h -15",w:20},0:{x:20,y:0,p:"h 10 q 20 0 20 20 v 60 q 0 20 -20 20 h -10 q -20 0 -20 -20 v -60 q 0 -20 20 -20 m -10 90 l 30 -80"},1:{x:15,y:0,p:"h 5 q 5 0 5 5 v 91 m -25 4 h 50"},2:{p:"h 45 q 5 0 5 5 v 40 q 0 5 -5 5 h -40 q -5 0 -5 5 v 40 q 0 5 5 5 h 45"},3:{p:"h 45 q 5 0 5 5 v 90 q 0 5 -5 5 h -45 m 10 -50 h 34"},4:{p:"v 45 q 0 5 5 5 h 40 m 10 -50 v 100"},5:{x:50,p:"h -45 q -5 0 -5 5 v 40 q 0 5 5 5 h 25 q 20 0 20 20 v 10 q 0 20 -20 20 h -30"},6:{p:"v 80 q 0 20 20 20 h 10 q 20 0 20 -20 v -10 q 0 -20 -20 -20 h -2 q -20 0 -20 10"},7:{p:"h 40 q 10 0 7 7 l -40 93"},8:{y:52,p:"v 38 q 0 10 10 10 h 30 q 10 0 10 -10 v -30 q 0 -10 -10 -10 h -30 q -10 0 -10 -10 v -30 q 0 -10 10 -10 h 30 q 10 0 10 10 v 38"},9:{x:50,y:100,p:"v -95 q 0 -5 -5 -5 h -40 q -5 0 -5 5 v 40 q 0 5 5 5 h 40"},A:{y:100,p:"v -80 q 0 -20 20 -20 h 10 q 20 0 20 20 v 80 m -4 -50 h -42"},B:{y:48,p:"v -43 q 0 -5 5 -5 h 25 q 20 0 20 20 v 10 q 0 20 -20 20 h -25 q -5 0 -5 5 v 40 q 0 5 5 5 h 25 q 20 0 20 -20 v -10 q 0 -20 -10 -20"},C:{x:50,y:20,p:"q 0 -20 -20 -20 h -10 q -20 0 -20 20 v 60 q 0 20 20 20 h 10 q 20 0 20 -20"},D:{x:5,p:"h 25 q 20 0 20 20 v 60 q 0 20 -20 20 h -25 q -5 0 -5 -5 v -90 q 0 -5 5 -5"},E:{x:50,p:"h -45 q -5 0 -5 5 v 90 q 0 5 5 5 h 45 m -46 -50 h 35"},F:{x:50,p:"h -45 q -5 0 -5 5 v 95 m 4 -50 h 35"},G:{x:50,p:"h -30 q -20 0 -20 20 v 60 q 0 20 20 20 h 10 q 20 0 20 -20 v -25 q 0 -5 -5 -5 h -41"},H:{p:"v 100 m 50 0 v -100 m -46 50 h 42"},I:{p:"h 50 m 0 100 h -50 m 25 -4 v -92"},J:{y:80,p:"q 0 20 20 20 h 10 q 20 0 20 -20 v -80"},K:{p:"v 100 m 50 -100 l -45 45 q -5 5 0 10 l 45 45"},L:{p:"v 95 q 0 5 5 5 h 45"},M:{y:100,p:"v -95 q 0 -5 5 -5 q 2 0 4 2 l 21 80 q 2 5 4 0 l 21 -80 m 9 98 v -95 q 0 -5 -5 -5 q -2 0 -4 2",w:64},N:{y:100,p:"v -95 q 0 -5 5 -5 q 2 0 4 2 l 32 95 m 9 -98 v 95 q 0 5 -5 5 q -2 0 -4 -2"},O:{y:20,p:"v 60 q 0 20 20 20 h 10 q 20 0 20 -20 v -60 q 0 -20 -20 -20 h -10 q -20 0 -20 20"},P:{y:100,p:"v -95 q 0 -5 5 -5 h 25 q 20 0 20 20 v 10 q 0 20 -20 20 h -26"},Q:{y:20,p:"v 60 q 0 20 20 20 h 10 q 20 0 20 -20 v -60 q 0 -20 -20 -20 h -10 q -20 0 -20 20 m 35 65 l 7 7 m 5 5 l 5 5 "},R:{y:100,p:"v -95 q 0 -5 5 -5 h 25 q 20 0 20 20 v 10 q 0 20 -20 20 h -26 m 46 50 v -30 q 0 -20 -10 -20"},S:{x:50,p:"h -25 q -25 0 -25 25 q 0 25 25 25 q 25 0 25 25 q 0 25 -25 25 h -25"},T:{p:"h 50 m -25 4 v 96"},U:{p:"v 80 q 0 20 20 20 h 10 q 20 0 20 -20 v -80"},V:{p:"l 23 95 q 2 5 4 0 l 27 -95"},W:{p:"v 95 q 0 5 5 5 q 2 0 4 -2 l 21 -80 q 2 -5 4 0 l 21 80 m 9 -98 v 95 q 0 5 -5 5 q -2 0 -4 -2",w:64},X:{p:"l 50 100 m -50 0 l 22 -46 m 6 -8 l 22 -46"},Y:{p:"l 23 45 q 2 5 4 0 l 23 -45 m -25 50 v 50"},Z:{p:"h 44 m 3 100 h -44 m 0 -4 l 44 -92 m -3 -4 q 5 0 3 4 m -41 96 q -5 0 -3 -4"}};function ie(e,t){let i=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&Object.keys(t).forEach(e=>{i.setAttribute(e,t[e])}),i}let se={default(e,t){let i=Q[e];return void 0!==t&&(Q[e]=t),i},widthOf(e,t){const i=50*t,s=20*t;return e.toUpperCase().split("").reduce((e,n)=>{let o;const l=te[n];return e+(o=l?(l.w?l.w*t:i)+s:i)},0)},write(e,t,i,s,n={}){const o=50*s,l=20*s,r=ie("g",{id:n.id||`grp${ee++}`,fill:"transparent",stroke:n.stroke||Q.stroke,"stroke-linecap":n.strokeLineCap||Q.strokeLineCap,"stroke-linejoin":n.strokeLineJoin||Q.strokeLineJoin,"stroke-width":n.strokeWidth||Q.strokeWidth,style:n.hide?"opacity:0":"opacity:1"});return Z||(Z=!0,Object.keys(te).forEach(e=>{let t=te[e];te[e].p=t.p.split(" ").map(e=>{let t=parseInt(e);return Number.isNaN(t)?e:t})})),e.toUpperCase().split("").forEach(e=>{const n=te[e];if(n){let e=function(e,t,i,s){const n=e.p;let o=`M ${t+(e.x||0)*s} ${i+(e.y||0)*s}`;for(let e=0,t=n.length;e<t;++e){const t=n[e];o+=" "+("string"==typeof t?t:t*s)}return o}(n,t,i,s);r.append(ie("path",{d:e})),t+=(n.w?n.w*s:o)+l}else t+=o}),r},writeOn(e,t,i,s,n,o={}){let l,r=100*n,a=se.widthOf(t,n);return o.centerX?i=(e.viewBox.baseVal.width-a)/2+i:i<0&&(i=e.viewBox.baseVal.width-a+i),o.centerY?s=(e.viewBox.baseVal.height-r)/2+s:s<0&&(s=e.viewBox.baseVal.height-r+s),o.bg&&e.append(ie("rect",{x:i,y:s,width:a,height:r,stroke:"black",fill:"black"})),l=se.write(t,i,s,n,o),e.append(l),l}};var ne=se;const oe="grpLevel",le=.5,re="grpTitle",ae=.25,he=.7,pe=.4,ce=.15,ue=["#66FF66","#0066FF","#FFFF66","#FD0E38","#FF6038"];let me,de,ge,ve,ye,fe,we,qe=!1;function be(){K.getLevel(ve),ne.default("stroke",ue[K.levelPlus%ue.length]),Te(!1),ge?(ne.writeOn(fe,"LEFT = PREV LEVEL",20,-40,ce,{strokeWidth:1}),ne.writeOn(fe,"NEXT LEVEL = RIGHT",-20,-40,ce,{strokeWidth:1}),ne.writeOn(fe,"MIDDLE = PLAY",0,-10,ce,{centerX:!0,strokeWidth:1})):(ne.writeOn(fe,"< = PREV LEVEL",20,-40,ce,{strokeWidth:1}),ne.writeOn(fe,"NEXT LEVEL = >",-20,-40,ce,{strokeWidth:1}),ne.writeOn(fe,"SPACE = PLAY",0,-10,ce,{centerX:!0,strokeWidth:1})),xe(),Se()}function Se(){if(!ge){let e;if(K.levelPlusHigh){e="F1 = Normal";for(let t=0;t<K.levelPlusHigh;++t)e+=`, F${t+2} = X${t+2}`}else e=`Esc = ${qe?"Remove neon":"Restore neon"}`;ne.writeOn(fe,e,0,-70,ce,{id:"grpOther",centerX:!0,strokeWidth:1})}}function xe(){Pe(`${ge?"Top":"P"} = Toggle Preview`,"")}function Le(e){let t="LEVEL "+e.number;return K.levelPlus?`${t}+${K.levelPlus}`:t}function Pe(e,t){j.clearSvg(we),s.isSmallScreen?(ne.writeOn(we,e,0,-84,he+.15,{bg:!0,centerX:!0,strokeWidth:4}),ne.writeOn(we,t,0,-4,pe+.1,{bg:!0,centerX:!0,strokeWidth:4})):(ne.writeOn(we,e,0,-80,he,{bg:!0,centerX:!0}),ne.writeOn(we,t,0,-4,pe,{bg:!0,centerX:!0}))}function Te(e){const t=K.getLevel(ve);return[ne.writeOn(fe,Le(t),0,-80,le,{id:oe,centerX:!0,centerY:!0,hide:e}),ne.writeOn(fe,t.title,0,0,ae,{id:re,centerX:!0,centerY:!0,hide:e})]}var Ee={get isTouch(){return ge},set isTouch(e){ge!=e&&(ge=e,j.clearSvg(fe),be())},changeLevel(e){let t=(ve+e)%K.length;!me&&t>=0&&t<=K.levelHigh&&(me=!0,ve=t,function(e){const t=e.map(e=>"string"==typeof e?document.getElementById(e):e);return j.fadeOut(t).then(()=>{t.forEach(e=>e.remove())})}([oe,re]).then(()=>{const e=Te(!0);xe(),j.fadeIn(e).then(()=>me=!1)}))},getLevel:()=>K.getLevel(ve),hide:()=>de?Promise.resolve():(de=!0,j.fadeOut(fe,.1)),init(e,t){const i=K.levelHigh;ge=s.isTouchScreen,ve=i,we=t,fe=e,be()},nextLevel:()=>new Promise(e=>{let t,i=ve+1;i===K.length&&K.levelPlus===K.levelPlusHigh?(ve=K.levelHigh=i,ne.default("stroke",ue[K.levelPlus%ue.length]),Pe("All levels completed","Time to go faster"),setTimeout(()=>{ye=!0,Pe(Le(t=K.getLevel(i)),t.title),e(t)},3e3)):(ve=K.levelHigh=i,Pe(Le(t=K.getLevel(i)),t.title),e(t))}),setLevelPlus(e){const t=K.levelPlus;K.levelPlus=e,K.levelPlus!==t&&(j.clearSvg(fe),be())},show(){let e;de=!1,j.clearSvg(we),ye?(j.clearSvg(fe),ye=!1,be()):(document.getElementById(oe).remove(),document.getElementById(re).remove()),fe.setAttribute("style","display:initial"),e=Te(!0),j.fadeIn(e).then(()=>{me=!1,xe()})},showGameOverMessage(){Pe("- game over -",ge?"[touch middle to continue]":"[press space to continue]")},showPauseMessage(e){e?Pe("- paused -","[press space to continue]"):j.clearSvg(we)},toggleNeonLines(){const e=document.styleSheets[0].cssRules,t=document.getElementById("grpOther");qe=!qe,t&&t.remove(),Se();for(let t=0,i=e.length;t<i;++t){const i=e[t];if(i.selectorText.indexOf(".line-color-")>=0)if(qe){const e=i.style.getPropertyValue("background-color");i.style.setProperty("box-shadow",`0px 0px 24px ${e}, 0px 0px 24px ${e}, 0px 0px 24px ${e}`)}else i.style.removeProperty("box-shadow")}}};function Ae(e,t){let i=document.createElement(e);return t&&Object.keys(t).forEach(e=>{i.setAttribute(e,t[e])}),i}function Ie(e,t,i,s){const n=i.linePositions[t]*(s?1:2)+25,o=Ae("div",{class:`line line-color-${t}`,style:`height:${e.gaps[e.gaps.length-2]*i.gapHeight+e.gaps[e.gaps.length-1]*i.gapHeight}px;left:${n}px;width:${i.lineWidth}px;`});return function(e,t,i){for(let s=0,n=t.length;s<n;s+=2){const n=Ae("div",{class:"line-gap",style:`top:${t[s]*i.gapHeight}px;height:${t[s+1]*i.gapHeight}px;`});e.appendChild(n)}}(o,e.gaps,i),function(e,t,i,s){for(let n=0,o=t.length;n<o;n+=2){const o=Math.floor((s.lineWidth-s.itemSize)/2),l=t[n]*s.itemSize,r=(s.itemSize,Ae("div",{class:`line-item line-item-${t[n+1]} line-color-${i}`,style:`left:${o}px;width:${s.itemSize}px;height:${s.itemSize}px;top:${l}px;`}));e.appendChild(r)}}(o,e.items,t,i),o}var Oe={hide(){const e=document.getElementById("divPreview");j.fadeOut(e)},show(e,t,i){const s=document.getElementById("divPreview");e.lines.forEach((e,n)=>{s.appendChild(Ie(e,n,t,i))}),s.setAttribute("style","display:block;opacity:1")}};const Ve=1,ke=2,$e=3,ze=4,Me=11,Re=27,Fe=112,He=117,_e=37,Be=80,Ge=39,Ce=32,We={16:e=>Qe.moveToLine(e),32:e=>De[e].toggle(),96:e=>Qe.bump(e-1,De),112:e=>Qe.changeVertical(e-4),128:e=>Qe.changeSize(e-1),240:e=>(ut(),j.fadeOut(it).then(()=>{Ee.nextLevel().then(e=>ct(e,ke))}),!0)};let je,Ne,Xe,De,Ye,Je,Ue,Ke,Qe,Ze,et,tt,it,st,nt,ot=0;function lt(e,t,i){const s=e.lines.length,n=Math.min(Math.floor(t/(s+1)),150),o=ze,l=Math.floor((t-(n+o)*(s+1))/2),r=[];for(let e=1;e<=s;++e)r.push(n*e-Math.floor(o/2)+l);this.gapHeight=Math.floor(i/Me),this.itemSize=Math.floor(i/Me),this.lineWidth=ze,this.linePositions=r,this.sizeAdjustments=e.sizeAdjustments||[0,0,0,0,0],this.stageHeight=i,this.stageWidth=t}function rt(e){let t="";const i=document.getElementById("divPauses");Ke=e<0?Ke+=e:e;for(let e=0;e<Ke;++e)t+='<div class="pause-symbol"></div>';i.innerHTML=t}function at(e){const t=Date.now(),i=e.keyCode;if(e.preventDefault&&(e.preventDefault(),Ee.isTouch=!1),Ze)i===Be&&(Ze=!1,Oe.hide());else if(st)Ue?i===Ce&&pt(!1):nt>99999&&(i===_e?Qe.changeLine(-1,De):i===Ge?Qe.changeLine(1,De):i===Ce&&Ke>0&&(pt(!0,$e),rt(-1)));else if(t-ot>400)if(ot=t,i===_e||i===Ge)Je||Ee.changeLevel(i-38);else if(i===Ce)Je?(ut(),it.setAttribute("style","display:none"),Je=!1,Ee.show()):ct(Ee.getLevel(),$e);else if(i===Re)Ee.toggleNeonLines();else if(i>=Fe&&i<=He)Ee.setLevelPlus(i-Fe);else if(i===Be){const e=Ee.getLevel();Ze=!0,Oe.show(e,new lt(e,300,500),Ee.isTouch)}}function ht(e){const t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY;Ee.isTouch=!0,at({keyCode:i<=30?Be:t<et?_e:t>tt?Ge:Ce})}function pt(e,t){Ue=e,e?(G.stop(),t===$e?Ee.showPauseMessage(!0):t===Ve&&(Ee.showGameOverMessage(),st=!1,Je=!0)):(Ee.showPauseMessage(!1),G.start())}function ct(e,t){Ee.hide().then(()=>{je=0,rt(3),it.setAttribute("style","opacity:0"),j.fadeIn(it).then(()=>{nt=Number.MAX_SAFE_INTEGER,Ne=new lt(Xe=e,it.clientWidth,it.clientHeight),De=Xe.lines.map((e,t)=>new q(it,e,t,Ne)),Ye=De.length,Qe=new S(it,Xe,Ne),st=!0,pt(!0,t)})})}function ut(){G.stop(),st=!1,Qe.destroy(),De.forEach(e=>e.destroy())}function mt(e){for(let e=0,t=Ye;e<t;++e){let t=De[e].update(Qe);if(--nt<=0){let e=15&je;if(We[je-e](e))break;je=0,nt=Number.MAX_SAFE_INTEGER}else t>0?(je=t,nt=2):t<0&&(pt(!0,Ve),g.playSound(g.HIT_GAP))}}var dt={init(e,t,i){it=e,et=Math.floor(window.innerWidth/3),tt=2*et,Ee.init(t,i),G.setDraw(mt),document.addEventListener("keydown",at),document.addEventListener("touchend",ht)}};let gt;function vt(){s.adjustWidthHeightRatio(),dt.init(document.getElementById("divStage"),document.getElementById("svgMenu"),document.getElementById("svgMsg"))}window.innerHeight>window.innerWidth?(gt=document.getElementById("svgMenu"),ne.writeOn(gt,"rotate",0,-40,.5,{centerX:!0,centerY:!0}),ne.writeOn(gt,"screen",0,40,.5,{centerX:!0,centerY:!0}),window.addEventListener("resize",function e(t){window.removeEventListener("resize",e),j.clearSvg(gt),gt=null,vt()})):vt();i(0)}]);</script></body></html>