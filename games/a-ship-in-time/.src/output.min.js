var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var d=ba;a=a.split(".");for(var e=0;e<a.length-1;e++){var l=a[e];l in d||(d[l]={});d=d[l]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&aa(d,a,{configurable:!0,writable:!0,value:b})}}
ca("Array.prototype.fill",function(a){return a?a:function(b,d,e){var l=this.length||0;0>d&&(d=Math.max(0,l+d));if(null==e||e>l)e=l;e=Number(e);0>e&&(e=Math.max(0,l+e));for(d=Number(d||0);d<e;d++)this[d]=b;return this}});var c=0,f=0;function da(){}
da.prototype.j=function(a){g("Level "+(a+1),800,58,40,"center");g("life",20,38,35,"start");g("shield",20,78,35,"start");g("energy",20,118,35,"start");h.strokeStyle="black";h.fillStyle="green";k(150,12,350,30,m.h/m.u);h.fillStyle="#25F";k(150,52,350,30,m.m/m.F);h.fillStyle="orange";k(150,92,350,30,m.a/1E4);1E4<=m.a&&g("Press F to release your ultimate !",540,120,35,"start")};function n(){this.a=0}n.prototype.frame=function(){this.a%=20};
n.prototype.j=function(){h.clearRect(0,0,q.width,q.height);h.strokeStyle="blue";h.lineWidth=.1;h.beginPath();for(var a=0;900>a;a+=20)h.moveTo(0,a*r),h.lineTo(1600*r,a*r);for(a=-this.a;1600>a;a+=20)h.moveTo(a*r,0),h.lineTo(a*r,900*r);h.closePath();h.stroke()};
function t(){var a=u;h.clearRect(0,0,q.width,140*r);h.strokeStyle="blue";h.lineWidth=.1;h.beginPath();for(var b=0;140>b;b+=20)h.moveTo(0,b*r),h.lineTo(1600*r,b*r);for(a=-a.a;1600>a;a+=20)h.moveTo(a*r,0),h.lineTo(a*r,140*r);h.closePath();h.stroke();h.beginPath();h.strokeStyle="red";h.lineWidth=r;h.moveTo(0,140*r);h.lineTo(1600*r,140*r);h.closePath();h.stroke();h.fillStyle="#888";h.strokeStyle="transparent";h.lineWidth=0;w(562,36,12,!0);w(1046,36,12,!0)}
function x(a,b,d,e,l){this.x=a;this.y=b;this.type=d;this.angle=e;this.i=!1;this.speed=1;this.L=l;this.c=this.height=this.width=this.b=0;this.target=null;this.a=new z;switch(d){case 0:this.speed=1;break;case 1:this.speed=1.5;break;case 2:this.speed=1;break;case 3:this.speed=0;break;case 4:this.speed=0;break;case 5:this.speed=.5;break;case 6:this.speed=.3;break;case 7:this.speed=.1,this.c=.01,this.type=0;case 8:this.speed=.3,this.c=.001,this.width=20}this.speed=!0===l?3*this.speed:this.speed/1.5}
x.prototype.frame=function(){this.b++;switch(this.type){case 0:A(this.x,this.y,50)&&(this.i=!0);break;case 1:case 6:this.width=30-this.b*(6==this.type?1.3:1)/10;this.height=this.b/3+20;this.b>300-20*(this.type-1)&&(this.i=!0);break;case 2:A(this.x,this.y,50)&&(this.i=!0);break;case 3:this.c+=.001;A(this.x,this.y,50)&&(this.i=!0);break;case 5:if(null===this.target||0==this.b%10)for(var a=99999999,b=0;b<D.length;b++){var d=D[b],e=(d.x-this.x)*(d.x-this.x)+(d.y-this.y)*(d.y-this.y);e<a&&(this.target=
d,a=e)}null!=this.target&&(a=Math.atan2(-this.y+this.target.y,-this.x+this.target.x),b=a-this.angle,b+=3*Math.PI,b%=2*Math.PI,b-=Math.PI,.05>Math.abs(a-this.angle)?this.angle=a:this.angle=0>b?this.angle-.02:this.angle+.02);this.angle+=Math.PI;this.angle=this.angle%(2*Math.PI);this.angle-=Math.PI;2E3<this.b&&(this.i=!0);break;case 8:this.angle+=.02/this.speed,2E4<this.b&&(this.i=!0),A(this.x,this.y,2E3)&&(this.i=!0)}this.speed+=this.c;a=1;0==this.L&&(a=m.w);this.y+=Math.sin(this.angle)*this.speed/
a;this.x+=Math.cos(this.angle)*this.speed/a};x.prototype.j=function(){switch(this.type){case 0:w(this.x,this.y,5,!1);break;case 1:case 6:E(this.x,this.y,this.width,this.height,this.angle,!1);break;case 2:F(this.x,this.y,10,10,this.b);F(this.x,this.y,10,10,-this.b);break;case 3:w(this.x,this.y,10,!1);E(this.x,this.y,30,30,this.angle,!1);break;case 4:w(this.x,this.y,this.width,!1);break;case 5:w(this.x,this.y,3,!1);E(this.x,this.y,15,15,this.angle,!1);break;case 8:w(this.x,this.y,this.width,!1)}};
function ea(a){switch(a.type){case 0:return 100;case 1:return 5;case 2:return 200;case 3:return 500;case 5:return 50;case 6:return 5;case 8:return 500}return 1}
x.prototype.l=function(a){switch(this.type){case 0:G(this.a,this.x,this.y,5);break;case 1:this.a.rect(this.x-this.width/2,this.y,this.width,this.height,this.angle);break;case 2:G(this.a,this.x,this.y,8);break;case 3:G(this.a,this.x,this.y,10);break;case 5:G(this.a,this.x,this.y,7);break;case 6:this.a.rect(this.x-this.width/2*Math.cos(this.angle),this.y-this.width/2*Math.sin(this.angle),this.width,this.height,this.angle);break;case 8:G(this.a,this.x,this.y,this.width)}switch(this.type){case 0:if(this.a.l(a)){this.i=
!0;break}return!1;case 1:return this.a.l(a);case 2:if(!this.a.l(a))return!1;this.y+=100*Math.random()-50;this.x-=800*Math.cos(this.angle);0>this.x&&(this.x=0);break;case 3:if(!this.a.l(a))return!1;f=c=20;this.i=!0;for(a=0;15>a;a++)K(new x(this.x,this.y,6,2*Math.PI*a/15,!0));break;case 4:console.log("legacy");break;case 5:if(!this.a.l(a))return!1;this.i=!0;break;case 6:return this.a.l(a);case 8:if(this.a.l(a))this.i=!0;else return!1}return!0};
function z(){this.type="n";this.angle=this.J=this.v=this.y=this.x=0;this.a=null}function G(a,b,d,e){a.type="c";a.x=b;a.y=d;a.v=e}z.prototype.rect=function(a,b,d,e,l){this.type="r";this.x=a;this.y=b;this.v=d;this.J=e;this.angle=l};
z.prototype.l=function(a){if("n"==this.type||"n"==a.type)return!1;if("m"==this.type){for(var b=0;b<this.a.length;b++)if(this.a[b].l(a))return!0;return!1}if("m"==a.type)return a.l(this);if("c"==this.type&&"c"==a.type)return(this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y)<=(this.v+a.v)*(this.v+a.v);if("r"==this.type&&"r"==a.type){a:{b=fa(this);a=fa(a);var d=[b,a],e,l,p,H;for(e=0;e<d.length;e++){var y=d[e];for(l=0;l<y.length;l++){var B=y[l];var C=y[(l+1)%y.length];var I=C.y-B.y,ha=B.x-C.x;B=C=void 0;
for(p=0;p<b.length;p++){var v=I*b[p].x+ha*b[p].y;if(void 0===B||v<B)B=v;if(void 0===C||v>C)C=v}var J=H=void 0;for(p=0;p<a.length;p++){v=I*a[p].x+ha*a[p].y;if(void 0===J||v<J)J=v;if(void 0===H||v>H)H=v}if(C<J||H<B){b=!1;break a}}}b=!0}return b}if("r"==this.type&&"c"==a.type)for(d=fa(this),b=0;4>b;b++)if(p=d[b].x,B=d[b].y,J=d[(b+1)%4].x,C=d[(b+1)%4].y,v=J-p,I=C-B,l=a.x-p,e=a.y-B,y=(l*v+e*I)/(I*I+v*v),0<=y&&1>=y?(v=v*y+p-a.x,y=I*y+B-a.y,e=Math.sqrt(y*y+v*v)):(v=a.x-J,y=a.y-C,e=Math.min(Math.sqrt(e*e+
l*l),Math.sqrt(y*y+v*v))),e<a.v)return!0;if("c"==this.type&&"r"==a.type)return a.l(this)};z.prototype.debug=function(){if("m"==this.type)for(var a=0;a<this.a.length;a++)this.a[a].debug();"c"==this.type&&w(this.x,this.y,this.v,!0);"r"==this.type&&(h.beginPath(),F(this.x,this.y,this.v,this.J,this.angle),h.stroke())};
function fa(a){for(var b=[],d=[[1,1],[-1,1],[1,-1],[-1,-1]],e=0;4>e;e++){var l=a.x-a.v*d[e][0]/2,p=a.y-a.J*d[e][1]/2;l-=a.x;var H=p-a.y;p=l*Math.sin(a.angle)+H*Math.cos(a.angle);l=l*Math.cos(a.angle)-H*Math.sin(a.angle)+a.x;p+=a.y;b.push({x:l,y:p})}return b}function w(a,b,d,e){e&&h.beginPath();h.moveTo((a+d)*r,b*r);h.arc(a*r,b*r,d*r,0,2*Math.PI);e&&(h.stroke(),h.fill())}
function E(a,b,d,e,l,p){e/=2;h.save();h.translate(a*r,b*r);h.rotate(l);p&&h.beginPath();h.moveTo(-d*r,-e*r);h.quadraticCurveTo(0,-e*r,0,0);h.quadraticCurveTo(0,e*r,-d*r,e*r);h.quadraticCurveTo(-d*r/2,e*r,-d*r/2,0);h.quadraticCurveTo(-d*r/2,-e*r,-d*r,-e*r);p&&(h.closePath(),h.stroke(),h.fill());h.restore()}function ia(a,b,d){h.fillText(a,b*r,d*r);h.strokeText(a,b*r,d*r)}function g(a,b,d,e,l){h.fillStyle="black";ja(a,b,d,e,l)}
function ja(a,b,d,e,l){h.textAlign=l;e=Math.round(e*r);h.font="normal 100 "+e+'px "Comic Sans MS", cursive, sans-serif';h.lineWidth=e/20;h.strokeStyle="white";ia(a,b,d)}function ka(a,b,d,e){h.textAlign=e;e=Math.round(40*r);h.font="normal 100 "+e+'px "Comic Sans MS", cursive, sans-serif';h.lineWidth=e/20;h.fillStyle="black";h.strokeStyle="white";a=a.split(" ");e=a[0];var l=300;d*=r;for(var p=1;p<a.length;p++)h.measureText(e+" "+a[p]).width>=d?(ia(e,b,l),l+=40,e=a[p]):e+=" "+a[p];ia(e,b,l)}
function L(a,b,d,e,l,p){d/=2;e/=2;h.save();h.translate(a*r,b*r);h.rotate(l);p&&h.beginPath();h.moveTo(-d*r,-e*r);h.lineTo(-d*r,e*r);h.lineTo(d*r,0);h.lineTo(-d*r,-e*r);p&&(h.closePath(),h.stroke(),h.fill());h.restore()}function k(a,b,d,e,l){h.beginPath();h.rect(a*r,b*r,d*r*l,e*r);h.fill();h.beginPath();h.rect(a*r,b*r,d*r,e*r);h.stroke()}function F(a,b,d,e,l){h.save();h.translate(a*r,b*r);h.rotate(l);h.rect(-d/2*r,-e/2*r,d*r,e*r);h.restore()}
function M(a,b,d,e,l){10==a&&(a=9);this.type=a;this.A=b;this.x=e;this.y=l;this.c=1E3;this.a=this.angle=0;this.g=this.type=a;this.speed=1;this.s=!1;switch(a){case 0:this.c=99999;this.g=12;break;case 1:this.c=500;this.g=1;this.speed=.5;break;case 2:this.c=1E3;this.g=2;this.speed=1;break;case 3:this.c=100;this.g=3;this.speed=1.9;break;case 4:this.c=1E3;this.g=4;this.speed=.2;break;case 5:this.c=1500;this.g=5;this.speed=1.4;break;case 6:this.c=3E3;this.g=6;this.speed=.8;break;case 7:this.c=2500;this.g=
7;this.speed=.7;break;case 8:this.c=3E3;this.g=8;this.speed=1.5;break;case 9:this.c=3E3;this.g=9;this.speed=1.5;break;case 11:this.c=5E3;this.g=11;this.speed=1;break;case 12:this.c=15E3,this.g=12,this.speed=1}this.speed/=2;this.u=d%4*(d%4)+1;this.w=Math.floor(d/4);this.i=!1;this.o=this.m=0;this.b=new z;this.h=null}
M.prototype.j=function(){h.strokeStyle="black";h.fillStyle="white";if(0<this.m){h.setLineDash([1,this.m/(this.o/5)]);var a=256-Math.round(256*this.m/this.o);h.fillStyle="rgb("+a+","+a+","+a+")"}else h.setLineDash([]);h.save();h.translate(this.x*r,this.y*r);h.rotate(this.angle);switch(this.g){case 14:case 13:case 12:h.beginPath();E(0,0,40,100,Math.PI,!1);E(50,8,30,80,Math.PI/2,!1);E(50,-8,30,80,3*Math.PI/2,!1);w(30,50,10,!1);w(30,-50,10,!1);w(90,-12,10,!1);w(90,12,10,!1);h.stroke();h.fill();break;
case 11:h.beginPath();a=5*Math.sin(this.a/200);E(0,0,20+a,60,3*Math.PI/2,!1);E(0,0,20+a,60,0,!1);E(0,0,20+a,60,Math.PI/2,!1);w(0,0,20,!1);h.stroke();h.fill();w(0,0,10,!0);break;case 9:h.beginPath();a=5*Math.sin(this.a/200);E(0,0,25+a,60,0,!1);E(0,0,25+a,60,Math.PI,!1);E(0,0,25+a,60,Math.PI/2,!1);E(0,0,25+a,60,3*Math.PI/2,!1);h.stroke();h.fill();break;case 8:h.beginPath();h.save();a=this.a/200;h.rotate(-a);F(13,13,15,15,Math.PI/2);F(13,-13,15,-15,Math.PI/2);F(-13,13,-15,15,Math.PI/2);F(-13,-13,-15,
-15,Math.PI/2);h.restore();w(0,0,8,!1);a=this.a/100;var b=Math.cos(a),d=Math.sin(a);E(40*b,40*d,20,30,a,!1);E(-40*b,-40*d,20,30,Math.PI+a,!1);E(-40*b,40*d,20,30,-a+Math.PI,!1);E(40*b,-40*d,20,30,-a,!1);h.stroke();h.fill();break;case 7:h.beginPath();F(0,0,27,27,Math.PI/4);F(0,0,30,30,0);h.stroke();h.fill();break;case 6:h.beginPath();F(8,8,5,5,0);F(-8,8,-5,5,0);F(8,-8,5,-5,0);F(-8,-8,-5,-5,0);w(0,0,8,!1);h.stroke();h.fill();break;case 5:h.beginPath();E(0,20,15,50,Math.PI/2,!1);w(-11,0,14,!1);E(0,-20,
15,50,-Math.PI/2,!1);h.stroke();h.fill();break;case 4:w(0,0,10,!0);h.beginPath();E(20,0,15,50,0,!1);E(0,20,15,50,Math.PI/2,!1);E(-20,0,15,50,Math.PI,!1);E(0,-20,15,50,-Math.PI/2,!1);h.stroke();h.fill();break;case 3:w(0,0,20,!0);w(7,0,10,!0);w(0,0,2,!0);break;case 2:h.beginPath();L(10,0,20,15,0,!1);L(0,10,20,15,Math.PI/2,!1);L(0,-10,20,15,-Math.PI/2,!1);L(-10,0,20,15,Math.PI,!1);h.stroke();h.fill();break;case 1:h.beginPath();E(0,20,15,50,Math.PI/2,!1);w(0,0,15,!1);E(0,-20,15,50,-Math.PI/2,!1);h.stroke();
h.fill();break;case 0:w(0,0,10,!0)}h.restore()};
M.prototype.frame=function(){this.s=!1;A(this.x,this.y,1E3)&&(this.i=!0);this.m--;this.a++;var a=this.speed/m.w;switch(this.A){case 1:this.x-=a;break;case 2:this.x-=a;this.y+=a*Math.cos(this.a/100);break;case 3:500>this.a?this.x-=a:1E3<this.a&&(this.x+=a);break;case 4:this.y=500>this.y?this.y+a:this.y-a;150<this.a&&(this.x+=a*(this.a-150)/100);break;case 8:this.h={x:m.x,y:m.y};case 7:null===this.h&&(this.h={x:m.x,y:m.y});case 6:null===this.h&&(this.h={x:800*Math.random()+800,y:760*Math.random()+140});
case 5:null===this.h&&(this.h={x:1600*Math.random(),y:760*Math.random()+140});var b=Math.atan2(this.y-this.h.y,this.x-this.h.x)+Math.PI;this.x+=a*Math.cos(b);this.y+=a*Math.sin(b);b=this.x-this.h.x;var d=this.y-this.h.y;b*b+d*d<=a*a*1.2&&(this.h=null);break;case 9:500>this.a&&(this.x-=a)}if(1==this.a%(500/this.u*m.w))switch(this.w){case 3:K(new x(this.x,this.y,0,Math.PI+Math.atan2(this.y-m.y,this.x-m.x)+.2,!1)),K(new x(this.x,this.y,0,Math.PI+Math.atan2(this.y-m.y,this.x-m.x)-.2,!1));case 2:K(new x(this.x,
this.y,0,Math.PI+Math.atan2(this.y-m.y,this.x-m.x)+.1,!1)),K(new x(this.x,this.y,0,Math.PI+Math.atan2(this.y-m.y,this.x-m.x)-.1,!1));case 1:K(new x(this.x,this.y,0,Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1));break;case 5:K(new x(this.x,this.y,0,1.25*Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1)),K(new x(this.x,this.y,0,2.25*Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1)),K(new x(this.x,this.y,0,1.75*Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1)),K(new x(this.x,this.y,0,2.75*Math.PI+Math.atan2(this.y-
m.y,this.x-m.x),!1));case 4:K(new x(this.x,this.y,0,Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1));K(new x(this.x,this.y,0,2*Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1));K(new x(this.x,this.y,0,1.5*Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1));K(new x(this.x,this.y,0,2.5*Math.PI+Math.atan2(this.y-m.y,this.x-m.x),!1));break;case 10:K(new x(this.x,this.y,0,Math.PI+.5,!1)),K(new x(this.x,this.y,0,Math.PI-.5,!1));case 9:K(new x(this.x,this.y,0,Math.PI+.35,!1)),K(new x(this.x,this.y,0,Math.PI-.35,!1));
case 8:K(new x(this.x,this.y,0,Math.PI+.2,!1)),K(new x(this.x,this.y,0,Math.PI-.2,!1));case 7:K(new x(this.x,this.y,0,Math.PI+.1,!1)),K(new x(this.x,this.y,0,Math.PI-.1,!1));case 6:K(new x(this.x,this.y,0,Math.PI,!1));break;case 14:K(new x(this.x,this.y,0,Math.PI/8,!1)),K(new x(this.x,this.y,0,3*Math.PI/8,!1)),K(new x(this.x,this.y,0,5*Math.PI/8,!1)),K(new x(this.x,this.y,0,7*Math.PI/8,!1)),K(new x(this.x,this.y,0,9*Math.PI/8,!1)),K(new x(this.x,this.y,0,11*Math.PI/8,!1)),K(new x(this.x,this.y,0,
13*Math.PI/8,!1)),K(new x(this.x,this.y,0,15*Math.PI/8,!1));case 13:K(new x(this.x,this.y,0,Math.PI/4,!1)),K(new x(this.x,this.y,0,3*Math.PI/4,!1)),K(new x(this.x,this.y,0,5*Math.PI/4,!1)),K(new x(this.x,this.y,0,7*Math.PI/4,!1));case 12:K(new x(this.x,this.y,0,-Math.PI/2,!1)),K(new x(this.x,this.y,0,0,!1)),K(new x(this.x,this.y,0,Math.PI/2,!1));case 11:K(new x(this.x,this.y,0,Math.PI,!1));break;case 17:K(new x(this.x,this.y,0,-Math.PI/2+this.a/100,!1)),K(new x(this.x,this.y,0,Math.PI/2+this.a/100,
!1));case 16:K(new x(this.x,this.y,0,Math.PI+this.a/100,!1));case 15:K(new x(this.x,this.y,0,this.a/100,!1));break;case 24:K(new x(this.x,this.y,0,this.a/100+.6,!1)),K(new x(this.x,this.y,0,this.a/100-.6,!1));case 23:K(new x(this.x,this.y,0,this.a/100+.5,!1)),K(new x(this.x,this.y,0,this.a/100-.5,!1));case 22:K(new x(this.x,this.y,0,this.a/100+.4,!1)),K(new x(this.x,this.y,0,this.a/100-.4,!1));case 21:K(new x(this.x,this.y,0,this.a/100+.3,!1)),K(new x(this.x,this.y,0,this.a/100-.3,!1));case 20:K(new x(this.x,
this.y,0,this.a/100+.2,!1)),K(new x(this.x,this.y,0,this.a/100-.2,!1));case 19:K(new x(this.x,this.y,0,this.a/100+.1,!1)),K(new x(this.x,this.y,0,this.a/100-.1,!1));case 18:K(new x(this.x,this.y,0,this.a/100,!1))}};
M.prototype.C=function(){null==this.b&&(this.b=new z);switch(this.g){case 0:G(this.b,this.x,this.y,10);break;case 1:this.b.rect(this.x,this.y,50,43,0);break;case 2:var a=new z;a.rect(this.x,this.y,15,40,0);var b=new z;b.rect(this.x,this.y,40,15,0);var d=this.b;a=[a,b];d.type="m";d.a=a;break;case 3:G(this.b,this.x,this.y,20);break;case 4:this.b.rect(this.x,this.y,45,45,0);break;case 5:this.b.rect(this.x,this.y,45,40,0);break;case 6:this.b.rect(this.x,this.y,21,21,0);break;case 7:this.b.rect(this.x,
this.y,32,32,0);break;case 8:a=new z;b=new z;d=new z;var e=this.a/200;a.rect(this.x,this.y,40,40,-e);e=this.a/100;b.rect(this.x,this.y,35,80,-e+Math.PI/2);d.rect(this.x,this.y,35,80,e+Math.PI/2);e=this.b;a=[a,b,d];e.type="m";e.a=a;break;case 9:this.b.rect(this.x,this.y,60,60,0);break;case 11:G(this.b,this.x,this.y,25);break;case 12:a=new z,a.rect(this.x+60,this.y,80,40,0),b=new z,b.rect(this.x+20,this.y,40,120,0),d=this.b,a=[a,b],d.type="m",d.a=a}return this.b};
M.prototype.l=function(a){if(10>a){if(1==this.s)return;this.s=!0}a>this.m&&(this.o=this.m=a);this.c-=a;0>=this.c&&(this.i=!0)};var m,D=[],N=[],O=[],u,la;
function P(a,b){this.h=a;this.g=!1;this.c=b;la=new da;u=new n;N=[];O=[];D=[];m.h=m.u;m.i=!1;m.m=m.F;this.b=m.a=0;this.a=[];if(0==a)switch(b%10){case 0:this.a.push({time:20,f:Q(0,2,70)});this.a.push({time:2E3,f:Q(1,11,21)});this.a.push({time:4E3,f:Q(6,7,26)});this.a.push({time:4E3,f:Q(4,6,9)});this.a.push({time:6E3,f:Q(9,9,12)});this.a.push({time:8E3,f:Q(12,8,14)});break;case 1:this.a.push({time:20,f:Q(18,12,99)});this.a.push({time:2E3,f:Q(3,7,41)});this.a.push({time:4E3,f:Q(2,8,28)});this.a.push({time:4E3,
f:Q(10,9,9)});this.a.push({time:6E3,f:Q(11,5,13)});this.a.push({time:8E3,f:Q(15,12,94)});break;case 2:this.a.push({time:20,f:Q(6,3,35)});this.a.push({time:2E3,f:Q(16,5,23)});this.a.push({time:4E3,f:Q(7,1,34)});this.a.push({time:4E3,f:Q(14,2,15)});this.a.push({time:7E3,f:Q(12,4,54)});this.a.push({time:8E3,f:Q(13,5,43)});break;case 3:this.a.push({time:20,f:Q(9,2,77)});this.a.push({time:1E3,f:Q(14,7,75)});this.a.push({time:2E3,f:Q(11,6,34)});this.a.push({time:3E3,f:Q(12,1,52)});break;case 4:this.a.push({time:20,
f:Q(16,12,99)});this.a.push({time:200,f:Q(15,12,103)});this.a.push({time:400,f:Q(14,12,107)});break;case 5:this.a.push({time:20,f:Q(1,11,70)});this.a.push({time:2E3,f:Q(4,7,40)});this.a.push({time:4E3,f:Q(5,2,11)});this.a.push({time:6E3,f:Q(10,3,9)});this.a.push({time:8E3,f:Q(11,4,78)});this.a.push({time:1E4,f:Q(14,5,82)});break;case 6:this.a.push({time:20,f:Q(6,3,35)});this.a.push({time:2E3,f:Q(16,5,23)});this.a.push({time:4E3,f:Q(7,1,34)});this.a.push({time:4E3,f:Q(14,2,15)});this.a.push({time:7E3,
f:Q(12,4,54)});this.a.push({time:8E3,f:Q(13,5,43)});break;case 7:this.a.push({time:20,f:Q(15,6,79)});this.a.push({time:2E3,f:Q(3,2,75)});this.a.push({time:4E3,f:Q(8,1,15)});this.a.push({time:6E3,f:Q(15,9,23)});this.a.push({time:7E3,f:Q(11,8,55)});this.a.push({time:8E3,f:Q(15,7,61)});break;case 8:this.a.push({time:20,f:Q(5,4,43)});this.a.push({time:2E3,f:Q(13,5,76)});this.a.push({time:4E3,f:Q(12,6,17)});this.a.push({time:6E3,f:Q(5,8,27)});this.a.push({time:7E3,f:Q(1,9,58)});this.a.push({time:8E3,f:Q(5,
11,64)});break;case 9:this.a.push({time:20,f:Q(17,12,95)})}}
function Q(a,b,d){var e=[];switch(a){case 0:for(a=200;900>a;a+=150)e.push(new M(b,1,d,1700,a));break;case 1:for(a=200;900>a;a+=150)e.push(new M(b,1,d,1500+a,a));break;case 2:for(a=200;900>a;a+=150)e.push(new M(b,1,d,2400-a,a));break;case 3:for(a=200;900>a;a+=150)e.push(new M(b,1,d,1650+(0==(a-200)%300?150:0),a));break;case 4:for(a=200;900>a;a+=150)e.push(new M(b,2,d,1700,a));break;case 5:for(a=200;900>a;a+=150)e.push(new M(b,2,d,1650+(0==(a-200)%300?150:0),a));break;case 6:for(a=200;900>a;a+=150)e.push(new M(b,
3,d,1630,a));break;case 7:for(a=400;1300>a;a+=150)e.push(new M(b,4,d,a,0));break;case 8:for(a=400;1300>a;a+=150)e.push(new M(b,4,d,a,1E3));break;case 9:for(a=200;900>a;a+=150)e.push(new M(b,5,d,1700,a));break;case 10:for(a=200;900>a;a+=150)e.push(new M(b,6,d,1700,a));break;case 11:for(a=400;1300>a;a+=150)e.push(new M(b,6,d,a,0));break;case 12:for(a=400;1300>a;a+=150)e.push(new M(b,6,d,a,950));break;case 13:for(a=200;900>a;a+=150)e.push(new M(b,7,d,1700,a));break;case 14:for(a=200;900>a;a+=150)e.push(new M(b,
8,d,1700,a));break;case 15:for(a=200;900>a;a+=300)e.push(new M(b,9,d,1700,a));break;case 16:for(a=200;900>a;a+=150)e.push(new M(b,9,d,1700,a));break;case 17:for(a=200;900>a;a+=300)e.push(new M(b,6,d,1700,a));break;case 18:e.push(new M(b,6,d,1700,500))}return e}
P.prototype.frame=function(){var a=this;this.b++;this.a.forEach(function(b){b.time==a.b&&(D=D.concat(b.f))});D.forEach(function(b){return b.frame()});m.frame();N.forEach(function(b){return b.frame()});O.forEach(function(b){return b.frame()});u.frame();D.forEach(function(b){N.forEach(function(d){d.l(b.C())&&b.l(ea(d))})});O.forEach(function(b){b.l(ma())&&(b=m,b.s-=250)});O.forEach(function(b){b.l(m.C())&&m.l(b)});m.i&&(this.g=!0)};
P.prototype.j=function(){u.j();h.lineWidth=3*r;h.fillStyle="white";h.strokeStyle="blue";h.beginPath();N.forEach(function(a){return a.j()});h.stroke();h.fill();h.strokeStyle="red";h.beginPath();O.forEach(function(a){return a.j()});h.stroke();h.fill();h.strokeStyle="black";D.forEach(function(a){return a.j()});h.setLineDash([]);h.fillStyle="white";h.strokeStyle="black";m.j();t();la.j(this.c)};
P.prototype.B=function(){N=N.filter(function(a){return!0!==a.i});O=O.filter(function(a){return!0!==a.i});D=D.filter(function(a){return!0!==a.i})};P.prototype.D=function(){var a=this;if(this.g)return new R(this.c);if(0==D.length&&0==O.length){var b=!0;this.a.forEach(function(d){d.time>=a.b&&(b=!1)});if(b)return new S(this.h,this.c+1)}return null};function K(a){a.L?N.push(a):O.push(a)}function A(a,b,d){return a<-d||b<140-d||a>1600+d||b>900+d}function R(a){this.a=a}R.prototype.frame=function(){};
R.prototype.j=function(){u.j();t();g("You died..",800,320,60,"center");g("You made it to the level "+(this.a+1)+". Congratulations !",800,460,70,"center");g("Press enter to go back to the shop and retry the level",800,600,40,"center")};R.prototype.B=function(){};R.prototype.D=function(){return T[13]?new S(0,this.a):null};
function U(){this.x=800;this.y=450;this.m=this.F=3E3;this.u=this.h=1E4;this.a=this.A=0;this.b=[0,0,0,0,0,0,0,0,0,0,0,0,0];this.K=new z;this.o=this.c=0;this.w=1;this.i=!1;this.g=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]];this.I=this.H=-1;this.s=0;this.G=new z}U.prototype.j=function(){100<this.o?h.setLineDash([1,2]):0<this.o&&h.setLineDash([1,this.o/50]);L(this.x,this.y,40,30,0,!0);h.setLineDash([]);0<this.s&&E(this.H,this.I,10,100,0,!0)};
U.prototype.frame=function(){this.m<this.F&&this.m++;for(var a=0;12>a;a++)this.b[a]--;0<this.s&&this.s--;0<this.o&&this.o--;1E4>this.a&&(this.a+=1.5);0<this.c&&this.c++;var b=a=0;T[38]&&b--;T[40]&&b++;T[37]&&a--;T[39]&&a++;var d=3;1<Math.abs(a)+Math.abs(b)&&(d=2);d/=2;var e=this.x,l=this.y;this.x+=a*d;this.y+=b*d;A(this.x,this.y,0)&&(this.x=e,this.y=l);T[32]&&na(this);T[70]&&1E4<=this.a&&(this.a=0,this.c=1);(T[65]||T[81])&&this.g[3][0]&&2E3<this.a&&0>=this.b[8]&&(this.a-=2E3,this.b[8]=2E3,this.H=
this.x+30,this.I=this.y,this.s=2E3);(T[90]||T[87])&&this.g[3][1]&&4E3<this.a&&0>=this.b[9]&&(this.a-=4E3,this.h+=.05*this.u,this.h>this.u&&(this.h=this.u),this.b[9]=200);T[69]&&this.g[3][2]&&4E3<this.a&&0>=this.b[10]&&(this.a-=4E3,this.m=this.F,this.b[10]=200);T[82]&&this.g[3][3]&&4E3<this.a&&0>=this.b[11]&&(this.a-=4E3,this.o=100,this.b[11]=200);this.w=1;if(!(0>=this.c))for(a=0;4>a;a++)if(this.g[2][a])switch(a){case 0:610>this.c&&2==this.c%30&&(b=this.c/600*(this.c/600)*Math.PI/2,K(new x(this.x,
this.y,3,b,!0)),K(new x(this.x,this.y,3,-b,!0)));break;case 1:1E3>this.c?this.w=5:1500>this.c&&(this.w=5-4*(this.c-1E3)/500);break;case 2:600>this.c&&(K(new x(this.x,this.y,0,this.c/10,!0)),K(new x(this.x,this.y,0,Math.PI+this.c/10,!0)));break;case 3:3==this.c&&(this.o=1E3)}};
function na(a){for(var b=0;4>b;b++)if(a.g[0][b]&&0>=a.b[b])switch(b){case 0:K(new x(a.x,a.y,0,(Math.random()-.5)*(Math.random()-.5)/10,!0));a.b[0]=20;break;case 1:K(new x(a.x,a.y,1,(Math.random()-.5)/5,!0));a.b[1]=10;break;case 2:K(new x(a.x,a.y,2,0,!0));a.b[2]=50;break;case 3:K(new x(a.x+5,a.y,3,0,!0)),a.b[3]=150}for(b=0;4>b;b++)if(a.g[1][b]&&0>=a.b[b+4])switch(b){case 0:K(new x(a.x,a.y,5,Math.PI/2,!0));K(new x(a.x,a.y,5,-Math.PI/2,!0));a.b[4]=80;break;case 1:a.A+=Math.PI/4;K(new x(a.x,a.y,7,a.A,
!0));K(new x(a.x,a.y,7,a.A+2*Math.PI/3,!0));K(new x(a.x,a.y,7,a.A+4*Math.PI/3,!0));a.b[5]=80;break;case 2:for(b=0;15>b;b++)K(new x(a.x,a.y,6,2*Math.PI*b/15,!0));a.b[6]=250;break;case 3:K(new x(a.x-10,a.y,8,3*Math.PI/2,!0)),a.b[7]=350}}U.prototype.l=function(){this.m-=1500;0>this.m&&(this.h+=this.m,this.m=0,0>this.h&&(this.i=!0))};
U.prototype.C=function(){if(0<this.o)this.K.type="n";else{var a=new z;a.rect(this.x-10,this.y,20,26,0);var b=new z;b.rect(this.x,this.y,20,16,0);var d=new z;d.rect(this.x+15,this.y,10,6,0);var e=this.K;a=[a,b,d];e.type="m";e.a=a}return this.K};function ma(){var a=m;0>=a.s?a.G.type="n":a.G.rect(a.H-5,a.I,10,100,0);return a.G}var q=document.querySelector("canvas"),h=q.getContext("2d"),V,oa=0,W=[],X=0,T={},Y,r;window.onkeyup=function(a){T[a.keyCode]=!1};window.onkeydown=function(a){T[a.keyCode]=!0};
window.onresize=pa;function pa(){var a=16/9;window.innerHeight*a<window.innerWidth?(q.width=window.innerHeight*a,q.height=window.innerHeight):(q.width=window.innerWidth,q.height=window.innerWidth/a);r=q.width/1600}
function qa(a){if(500<a-V||T[80])V=a;else{oa+=a-V;W[X]=a-V;for(V=a;5<oa;)Y.frame(),Y.B(),f--,oa-=5;h.save();0<f&&h.translate((Math.random()-.5)*c,(Math.random()-.5)*c);Y.j();a=Y.D();null!=a&&(Y=a);h.fillStyle="black";for(var b=a=0;b<W.length;b++)a+=W[b];a/=W.length;45>Math.round(1E4/a)/10&&g("fps:"+Math.round(1E4/a)/10,1590,40,35,"end");X++;120<X&&(X=0);h.restore()}window.requestAnimationFrame(qa)}setTimeout(function(){u=new n;pa();V=window.performance.now();m=new U;Y=new Z;qa(V)},50);
function Z(){this.c=!0;this.b=!1;this.a=0}Z.prototype.frame=function(){this.c||(T[13]&&(0==this.a&&(this.b=new P(this.a,0)),2==this.a&&window.close()),T[38]&&this.a--,T[40]&&this.a++,this.a=(this.a+3)%3);this.c=T[38]||T[40]||T[37]||T[39]||T[32]||T[13]?!0:!1};
Z.prototype.j=function(){var a=this;u.j();t();g("Main menu",800,100,100,"center");["start game","help","quit"].forEach(function(b,d){h.fillStyle="white";h.strokeStyle="black";d==a.a&&L(130,380+100*d,60,30,0,!0);g(b,200,400+100*d,80,"left")});ka(["Your ship is caught in a temporal loop, and is going back in time ! Try to survive the longest, while your ship loses abilities little by little !","Press enter to validate in menu, space to shoot, the arrows to move,and a/q, z/w, e and r to use your abilities, and f to unleash your ultimate when your energy is full",
"Leave the game. Not sure it needed an explaination..."][this.a],900,600,"left")};Z.prototype.B=function(){};Z.prototype.D=function(){return this.b?this.b:null};
function S(a,b){this.u=a;this.s=b;this.a={x:0,y:0};this.h=!1;this.b=new U;this.b.x=100;this.b.y=750;this.b.g=[[1,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];this.c=0;this.g=200;this.o=[2500,2E3,1750,1500,1300,1100,900,700,500,350,200,200,200,200,200];0==b?this.g=3001:12>b&&(this.g=this.o[b-1]+1);this.m=this.error=!1;m.h=m.u;N=[];O=[];D=[];D.push(new M(0,0,0,1100,800))}function ra(a){for(var b=a.c=0;4>b;b++)for(var d=0;4>d;d++)m.g[b][d]&&(a.c+=sa()[b][d])}
S.prototype.frame=function(){this.b.g[this.a.x][this.a.y]=0;1==this.h&&(T[38]&&this.a.y--,T[40]&&this.a.y++,T[37]&&this.a.x--,T[39]&&this.a.x++,T[32]&&(m.g[this.a.x][this.a.y]=!m.g[this.a.x][this.a.y]),T[13]&&(ra(this),this.c<=this.g?this.m=!0:this.error=!0));T[38]||T[40]||T[37]||T[39]||T[32]||T[13]?(1==this.h&&(this.b.c=1),this.h=!1):this.h=!0;this.a.x=(this.a.x+4)%4;this.a.y=(this.a.y+4)%4;ra(this);this.g>=this.c&&(this.error=0);this.b.g[this.a.x][this.a.y]=1;na(this.b);this.b.frame();D.forEach(function(a){return a.frame()});
N.forEach(function(a){return a.frame()});D.forEach(function(a){N.forEach(function(b){b.l(a.C())&&a.l(ea(b))})})};
S.prototype.j=function(){u.j();h.lineWidth=3*r;h.fillStyle="white";h.strokeStyle="blue";h.beginPath();N.forEach(function(p){return p.j()});h.stroke();h.fill();h.fillStyle="white";h.strokeStyle="black";this.b.j();D.forEach(function(p){return p.j()});h.setLineDash([]);g("Primary",145,180,40,"center");g("Secondary",395,180,40,"center");g("Ultimate",645,180,40,"center");g("Abilities",895,180,40,"center");for(var a=[["Gatling gun","The shocker","Temporal rain","My little nuker"],["auto find","(rockets)^3",
"tremors","sattelite"],["Boom","Carpe diem","Fire at will","Ghosting"],["shields","pick mercy","armor boost","barrel roll"]],b=0;b<a.length;b++)for(var d=0;d<a[b].length;d++){var e=250*b+30,l=200+120*d;h.strokeStyle=m.g[b][d]?"green":"black";h.fillStyle="transparent";h.lineWidth=3*r;k(e,l,230,100,0);this.a.x==b&&this.a.y==d&&(h.strokeStyle="blue",h.lineWidth=3*r,k(e-4,l-4,238,108,0));g(a[b][d],e+5,l+40,27,"start");g(sa()[b][d]+" $",e+10,l+80,25,"start")}h.beginPath();h.strokeStyle="blue";h.lineWidth=
r;h.moveTo(1280*r,140*r);h.lineTo(1280*r,900*r);h.closePath();h.stroke();g(a[this.a.x][this.a.y],1440,220,43,"center");ka([["Fire a lot of bullet, for a lot of fun !","growing shockwaves that passes through ennemies while dealing damage","bullets that comes back in time when hitting ennemies","a portable nuclear launcher that can destruct a lot of ennemies or small japanese cities"],["small bullets that track, find and destroy ennemies. Found them on the dark web.","a rocket launcher that launches rocket in all direction; would be more effective to point a direction, but it wasn't on the budget",
"regular shockwaves damanging nearby ennemies. Yes, it works in space","Launch a small moon orbiting around its launch point. No, that's not overkill"],["Send all the nuclear warhead in store. Very satisfying to watch","Slow down the time for the ennemies, allowing you to make cool matrix tricks","Send waves of bullets. Simple, clean, effective.","Makes you invulnerable for a time, passing through bullets."],["Create a bullet-proof shield in front of you for a short time. press A/Q to use","Restore a bit of life. Press Z/W to use",
"Restore your armor to full. Press E to use","Do a magnificient dodge movement, avoiding bullet for a short time. Press R to use"]][this.a.x][this.a.y],1290,300,"start");t();g("Welcome to the store !",802,60,40,"center");h.fillStyle=this.g<this.c?"red":"green";ja("Total cost : "+this.c+" $",20,60,40,"left");g("Maximum cost : "+(this.g-1)+" $",20,120,40,"left");g("Press space to (un)equip",1580,60,40,"right");g("Press enter to finish",1580,120,40,"right");h.fillStyle="red";this.error&&ja("Your ship cost too much !",
802,120,40,"center")};S.prototype.B=function(){N=N.filter(function(a){return!0!==a.i})};S.prototype.D=function(){return this.m?new P(this.u,this.s):null};function sa(){return[[100,150,300,400],[400,100,200,150],[200,100,200,300],[100,100,100,100]]};
