!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.C_H=600,e.C_W=800,e.M_R=16,e.M_C=16,e.T_H=26,e.T_W=52,e.T_T_P=1,e.T_T_B=2,e.T_T_B_S=3,e.T_T_B_E=4,e.T_T_L=5,e.T_T_E=6,e.T_T_WN=7,e.T_T_WE=8,e.T_T_B_N=9,e.T_T_L_W=10,e.P_I="0",e.P_V="1",e.P_B="2",e.P_VI="3",e.P_E="4",e.AF=1),s=(e.AP=2,e.AB=3,e.ABN=4,e.AB_START=5,e.AB_END=6,e.A_LOBBY=7);e.A_LOBBY_WALL=8,e.A_EXIT=9,e.A_WALL_N=10,e.A_WALL_E=11,e.A_SPRITESHEET=12,e.TILES_WALK=[n,s],e.P_M_O=30,e.BELT_D=1,e.BELT_L=10,e.S_D_B=5e3,e.ONTIME="ON TIME",e.WAITING="WAITING",e.LANDED="LANDED",e.BAGS="BAGS IN LOBBY",e.COMPLETED="COMPLETED",e.HIDE="HIDE",e.S_D_P=3e3,e.HTH=30,e.HBH=20,e.TRH=18,e.BELT_MAIN_C="#403f3f",e.BELT_SIDE_C="#6f6d6e",e.BG_C="#000",e.GLASS_C="#80c3c2",e.GLASS_STROKE_C="#669595",e.FLOOR_C="#bab0ad",e.WALL_C="#939aa7",e.LOBBY_C="#4e5258"},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),r=function t(){n(this,t),this.instance=document.getElementById("canvas"),this.instance.width=s.C_W,this.instance.height=s.C_H},a=new r;e.default=a.instance},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),l=function(){function t(){n(this,t),this.items=[{name:a.AF,type:a.T_T_P,render:function(t,e,i,n,s){var r=t+.5*i,l=e+.5*n;s.beginPath(),s.moveTo(r,e),s.lineTo(t+i,l),s.lineTo(r,e+n),s.lineTo(t,l),s.lineWidth=0,s.closePath(),s.fillStyle=a.FLOOR_C,s.strokeStyle=a.FLOOR_C,s.stroke(),s.fill()}},{name:a.AP,src:i(14)},{name:a.A_SPRITESHEET,src:i(15)},{name:a.AB,type:a.T_T_B,render:function(t,e,i,n,s){var r=t,l=e,o=r+.5*i,h=l+.5*n;s.beginPath(),s.moveTo(o,l),s.lineTo(r+i,h),s.lineTo(o,l+n),s.lineTo(r,h),s.closePath(),s.lineWidth=1,s.fillStyle=a.BELT_MAIN_C,s.fill();var u=t,c=e-10,f=u+.5*i,d=c+.5*n;s.beginPath(),s.moveTo(f,c),s.lineTo(u+i,d),s.lineTo(f,c+n),s.lineTo(u,d),s.closePath(),s.fillStyle=a.BELT_MAIN_C,s.fill(),s.beginPath(),s.moveTo(r+i,h),s.lineTo(u+i,d),s.lineTo(f,c+n),s.lineTo(o,l+n),s.closePath(),s.fillStyle=a.BELT_SIDE_C,s.fill(),s.beginPath(),s.moveTo(u,d),s.lineTo(r,h),s.lineTo(o,l+n),s.lineTo(f,c+n),s.closePath(),s.fillStyle=a.BELT_SIDE_C,s.fill()}},{name:a.A_LOBBY_WALL,type:a.T_T_L_W,render:function(t,e,i,n,s){var r=t,l=e,o=r+.5*i,h=l+.5*n;s.beginPath(),s.moveTo(o,l),s.lineTo(r+i,h),s.lineTo(o,l+n),s.lineTo(r,h),s.closePath(),s.lineWidth=1,s.fillStyle=a.BELT_MAIN_C,s.fill(),s.strokeStyle=a.BELT_MAIN_C,s.stroke();var u=t,c=e-20,f=u+.5*i,d=c+.5*n;s.beginPath(),s.moveTo(f,c),s.lineTo(u+i,d),s.lineTo(f,c+n),s.lineTo(u,d),s.closePath(),s.fillStyle=a.BELT_MAIN_C,s.fill(),s.strokeStyle=a.BELT_MAIN_C,s.stroke(),s.beginPath(),s.moveTo(r+i,h),s.lineTo(u+i,d),s.lineTo(f,c+n),s.lineTo(o,l+n),s.closePath(),s.fillStyle=a.WALL_C,s.fill(),s.beginPath(),s.moveTo(u,d),s.lineTo(r,h),s.lineTo(o,l+n),s.lineTo(f,c+n),s.closePath(),s.fillStyle=a.WALL_C,s.fill()}},{name:a.AB_START,type:a.T_T_B_S,render:function(t,e,i,n,s){var r=t,a=e,l=r+.5*i,o=a+.5*n;s.beginPath(),s.moveTo(l,a),s.lineTo(r+i,o),s.lineTo(l,a+n),s.lineTo(r,o),s.closePath(),s.lineWidth=1,s.fillStyle="#b1bdc3",s.strokeStyle="#a0aaaf",s.stroke(),s.fill()}},{name:a.AB_END,type:a.T_T_B_E,render:function(t,e,i,n,s){var r=t,a=e,l=r+.5*i,o=a+.5*n;s.beginPath(),s.moveTo(l,a),s.lineTo(r+i,o),s.lineTo(l,a+n),s.lineTo(r,o),s.closePath(),s.lineWidth=1,s.fillStyle="#b1bdc3",s.strokeStyle="#a0aaaf",s.stroke(),s.fill()}},{name:a.A_LOBBY,bgColor:a.LOBBY_C,type:a.T_T_L},{name:a.A_EXIT,bgColor:"#ff0000",type:a.T_T_E,render:function(t,e,i,n,s){var r=t,a=e,l=r+.5*i,o=a+.5*n;s.beginPath(),s.moveTo(l,a),s.lineTo(r+i,o),s.lineTo(l,a+n),s.lineTo(r,o),s.closePath(),s.lineWidth=1,s.fillStyle="#b1bdc3",s.strokeStyle="#000",s.stroke(),s.fill(),s.beginPath(),s.moveTo(l,a),s.lineTo(l,a-80),s.lineTo(r+i,o-80),s.lineTo(r+i,o),s.closePath(),s.lineWidth=1,s.fillStyle="#b1bdc3",s.strokeStyle="#000",s.stroke(),s.fill(),s.beginPath(),s.moveTo(r,o),s.lineTo(r,o-80),s.lineTo(l,a-80),s.lineTo(l,a),s.closePath(),s.lineWidth=1,s.fillStyle="#b1bdc3",s.strokeStyle="#000",s.stroke(),s.fill(),s.beginPath(),s.moveTo(r+i,o),s.lineTo(r+i,o-80),s.lineTo(l,a+n-80),s.lineTo(l,a+n),s.closePath(),s.lineWidth=1,s.fillStyle="#b1bdc3",s.strokeStyle="#000",s.stroke(),s.fill(),s.beginPath(),s.moveTo(r,o-80),s.lineTo(l,a+n-80),s.lineTo(l,a+n-65),s.lineTo(r,o-65),s.closePath(),s.lineWidth=1,s.fillStyle="#fff000",s.strokeStyle="#000",s.stroke(),s.fill()}},{name:a.A_WALL_N,type:a.T_T_WN,render:function(t,e,i,n,s){var r=t,l=e,o=r+.5*i,h=l+.5*n;s.beginPath(),s.moveTo(r,h),s.lineTo(r,h-80),s.lineTo(o,l+n-80),s.lineTo(o,l+n),s.closePath(),s.lineWidth=1,s.fillStyle=a.WALL_C,s.strokeStyle=a.WALL_C,s.stroke(),s.fill()}},{name:a.A_WALL_E,type:a.T_T_WE,render:function(t,e,i,n,s){var r=t,l=e,o=r+.5*i,h=l+.5*n;s.beginPath(),s.moveTo(r+i,h),s.lineTo(r+i,h-100),s.lineTo(o,l+n-100),s.lineTo(o,l+n),s.closePath(),s.lineWidth=8,s.fillStyle=a.GLASS_C,s.strokeStyle=a.GLASS_STROKE_C,s.stroke(),s.fill()}}],this.loadedItems=[],this.loaded=!1}return r(t,[{key:"load",value:function(){for(var t=this,e=0,i=0;i<this.items.length;i++)this.items[i].src?(this.loadedItems[i]=s({},this.items[i],{img:new Image}),this.loadedItems[i].img.src=this.items[i].src,this.loadedItems[i].img.onload=function(){++e===t.loadedItems.length&&(t.loaded=!0)}):this.loadedItems[i]=s({},this.items[i])}},{key:"getByType",value:function(t){return this.loadedItems.filter(function(e){return e.type===t})[0]}},{key:"getByName",value:function(t){return this.loadedItems.filter(function(e){return e.name===t})[0]}}]),t}(),o=new l;o.load(),e.default=o},function(t,e,i){"use strict";function n(t){return t<10&&(t="0"+t),t}function s(t){var e=t.getHours(),i=t.getMinutes(),s=t.getSeconds();return i=n(i),s=n(s),e+":"+i+":"+s}Object.defineProperty(e,"__esModule",{value:!0});for(var r=["London","Warsaw","Paris","Berlin","Madrid","Moscow","Rome","Chicago","Glasgow","Dublin"],a=[],l=0;l<5;l++)a.push(function(t){var e=new Date;e.setHours(9),e.setMinutes(0),e.setSeconds(0);for(var i=1+2*t,n=[],a=0;a<i;a++)0===t?e.setMinutes(0):e.setMinutes(e.getMinutes()+10),n.push({arrival:s(e),origin:r[Math.floor(Math.random()*r.length)],passengers:0===t?1:Math.ceil(1.5*t)});return{id:t,belts:t>1?2:1,loop:2,luggage:{min:1,max:t>2?3:1,speed:t>2?1:.5},flights:n,lost:t>2?2:3}}(l));e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),l=i(13),o=n(l),h=i(2),u=n(h),c=i(1),f=n(c),d=function(){function t(){var e=this;s(this,t),this.tiles=[],this.canvas=f.default,this.ctx=f.default.getContext("2d"),this.tileGraphics=[],this.assets=u.default,this.grid=[],this.rows=a.M_R,this.cols=a.M_C,f.default.addEventListener("mousemove",function(t){var i=f.default.getBoundingClientRect(),n=t.clientX-i.left,s=t.clientY-i.top;e.tiles.forEach(function(t){t.isInside(n,s)&&a.TILES_WALK.indexOf(t.asset.name)>-1?t.hovered=!0:t.hovered=!1})})}return r(t,[{key:"load",value:function(){this.tiles=[];for(var t=this.canvas.width/2-a.T_W/2,e=(this.canvas.height-a.T_H*this.rows)/2,i=0;i<this.grid.length;i++)for(var n=0;n<this.grid[i].length;n++){var s=this.twoDToIso(i,n),r=s.x,l=s.y,h=this.grid[i][n],u=this.assets.getByType(h),c=new o.default(this.canvas,r*a.T_H+t,l*a.T_H+e,u,i,n);this.tiles.push(c)}}},{key:"render",value:function(){this.tiles.forEach(function(t){t.render()})}},{key:"getTileByCoords",value:function(t,e){return this.tiles.filter(function(i){return i.isInside(t,e)})[0]}},{key:"getTile",value:function(t,e){return this.tiles.filter(function(i){return i.gridX===t&&i.gridY===e})[0]}},{key:"twoDToIso",value:function(t,e){return{x:t-e,y:(t+e)/2}}},{key:"generate",value:function(){this.grid=[];for(var t=0;t<this.rows;t++){this.grid.push([]);for(var e=0;e<this.cols;e++)0!==e||10!==t&&11!==t?0===e?this.grid[t].push(a.T_T_WN):0===t?this.grid[t].push(a.T_T_WE):e>3&&(t===this.cols-1||t===this.cols-2)?this.grid[t].push(a.T_T_L):e>3&&t===this.cols-3?this.grid[t].push(a.T_T_L_W):this.grid[t].push(a.T_T_P):this.grid[t].push(a.T_T_E)}}}]),t}();e.default=new d},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function t(){n(this,t),this.id=0};e.default=new s},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),l=function(){function t(e,i,n,r){s(this,t),this.start=e,this.end=i,this.grid=JSON.parse(JSON.stringify(n)),this.validType=r}return r(t,[{key:"findShortestPath",value:function(){var t=this;if(this.start[0]===this.end[0]&&this.start[1]===this.end[1])return!1;for(var e=this.start[0],i=this.start[1],n={distanceFromTop:e,distanceFromLeft:i,path:[],status:"Start"},s=[n],r=[];s.length>0;)!function(){var e=s.shift();["N","E","S","W"].some(function(i){var n=t.exploreInDirection(e,i,t.grid);n.status===a.P_E?(!r.length||r.length&&n.path.length<r.length)&&(r=n.path):n.status===a.P_V&&s.push(n)})}();return!!r.length&&{directions:r,grid:this.generateForGrid(r)}}},{key:"generateForGrid",value:function(t){var e=[],i=this.start;return t.forEach(function(t){var s=void 0;switch(t){case"N":s=[i[0]-1,i[1]];break;case"E":s=[i[0],i[1]+1];break;case"S":s=[i[0]+1,i[1]];break;case"W":s=[i[0],i[1]-1]}i=[].concat(n(s)),e.push(s)}),e}},{key:"locationStatus",value:function(t,e){var i=e.length,n=t.distanceFromTop,s=t.distanceFromLeft;return t.distanceFromLeft<0||t.distanceFromLeft>=i||t.distanceFromTop<0||t.distanceFromTop>=i?a.P_I:-1===this.validType.indexOf(e[n][s])?a.P_B:n===this.end[0]&&s===this.end[1]?a.P_E:a.P_V}},{key:"exploreInDirection",value:function(t,e,i){var n=t.path.slice();n.push(e);var s=t.distanceFromTop,r=t.distanceFromLeft;"N"===e?s-=1:"E"===e?r+=1:"S"===e?s+=1:"W"===e&&(r-=1);var l={distanceFromTop:s,distanceFromLeft:r,path:n,status:"Unknown"};return l.status=this.locationStatus(l,i),l.status===a.P_V&&(i[l.distanceFromTop][l.distanceFromLeft]=a.P_VI),l}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(8),l=n(a),o=i(1),h=n(o),u=i(3),c=n(u),f=i(4),d=n(f),g=i(16),T=n(g),p=i(2),y=n(p),v=i(6),x=n(v),m=i(17),_=n(m),w=i(18),P=n(w),b=i(5),E=n(b),k=i(21),L=n(k),S=i(0);(new(function(){function t(){s(this,t),this.ctx=h.default.getContext("2d"),this.assets=y.default,this.loaded=this.assets.loaded,this.noMoreLevels=!1,this.mouseDown=!1,this.setEventHandlers(),this.map=d.default,this.loadLevel(),this.tutorial=[{id:0,text:["ClICK MOUSE TO START"]},{id:1,text:["Tutorial 1/3","Click on the passenger."]},{id:2,text:["Tutorial 2/3","Passenger info will show its  \ud83d\udcbc","Click close to the belt to collect it.","On the top left bar you can see luggage loop limit  \ud83d\udd01"]},{id:3,text:["Tutorial 3/3","Luggage will be lost if you won't make it.","On the top right you can see max of lost  \ud83d\udcbc","When all  \ud83d\udcbc  are collected, ","the passenger will leave the terminal."]}]}return r(t,[{key:"loadLevel",value:function(){this.loadingLevel=!0,this.time=new Date,this.time.setHours(9),this.time.setMinutes(0),this.time.setSeconds(0),this.flights=[],this.loadFlights(),this.lost=!1,this.map.generate(),this.belts=[],this.belts=this.generateBelts(),this.map.load(),this.hud=new L.default(this.flights),this.signs=new _.default,this.ready=!1,this.win=!1,this.lost=!1}},{key:"loadFlights",value:function(){this.flights=c.default[E.default.id].flights.map(function(t){var e=new P.default(t.code,t.origin,t.arrival);return e.loadPassengers(t.passengers),e})}},{key:"generateBelts",value:function(){for(var t=[],e=c.default[E.default.id].belts,i=0;i<e;i++){var n=S.M_R,s=[0,Math.floor(i*(n/e))],r=[0,Math.floor(n/e*(i+1))-1],a=Math.ceil(s[1]+(r[1]-s[1])/2);t.push(new T.default(r,s,a,i+1))}return t}},{key:"start",value:function(){var t=this,e=(new Date).getTime(),i=function i(){if(t.pause)t.mouseDown&&(t.pause=!1);else{var n=(new Date).getTime();n-e>=1e3&&(e=n,t.time.setSeconds(t.time.getSeconds()+60)),t.win?t.nextLevel():(t.lost?(t.render(),setTimeout(function(){return location.href="/"},4e3)):(t.update(),t.render(),t.checkLost()),t.checkWin())}(0,l.default)(i)};(0,l.default)(i)}},{key:"checkTime",value:function(t){return t<10&&(t="0"+t),t}},{key:"getTime",value:function(){var t=this.time.getHours(),e=this.time.getMinutes(),i=this.time.getSeconds();return e=this.checkTime(e),i=this.checkTime(i),t+":"+e+":"+i}},{key:"checkFlights",value:function(){var t=this;this.flights.forEach(function(e){e.hasLanded(t.getTime())&&(e.passengersLeft||e.spawnPassengers(),t.emptyBelts.length?e.assignBelt(t.emptyBelts[0]):e.status=S.WAITING),e.status!==S.COMPLETED&&e.isCompleted()})}},{key:"checkLost",value:function(){var t=0;this.passengers.forEach(function(e){e.luggages.forEach(function(e){e.lost&&t++})}),t>=c.default[E.default.id].lost&&c.default[E.default.id].lost>0&&(this.lost=!0)}},{key:"checkWin",value:function(){var t=this.flights.filter(function(t){return t.status!==S.COMPLETED}),e=!1;if(t.length||(e=!this.tutorial.length||this.passengers[0].left),e){var i=E.default.id+1;c.default[i]||(this.noMoreLevels=!0),this.pause=!0,this.renderLevelWin(),this.win=!0}else this.win=e}},{key:"nextLevel",value:function(){var t=E.default.id+1;c.default[t]?(E.default.id=t,this.loadLevel()):this.noMoreLevels=!0}},{key:"update",value:function(){!this.ready&&this.mouseDown&&(this.tutorial.length&&this.tutorial.shift(),this.ready=!0),this.passengers.forEach(function(t){t.update()}),this.belts.forEach(function(t){t.update()}),this.checkFlights(),this.hud.update(this.getTime()),0===E.default.id&&this.tutorial[0].id>1&&this.updateTutorial()}},{key:"updateTutorial",value:function(){var t=this;this.tutorial.length&&(this.tutorial[0].id<2&&this.tutorial.shift(),2===this.tutorial[0].id&&this.flights[0].passengers[0].luggages.some(function(e){if(e.collected)return t.tutorial.shift(),!0}))}},{key:"renderText",value:function(t,e,i){this.renderShadow(),this.ctx.fillText(t,e,i),this.ctx.shadowColor="transparent"}},{key:"renderShadow",value:function(){this.ctx.shadowColor="black",this.ctx.shadowOffsetX=3,this.ctx.shadowOffsetY=3,this.ctx.shadowBlur=5}},{key:"renderLevelIntro",value:function(){var t=this;this.ctx.font="64px Impact",this.ctx.fillStyle="#dab821",this.ctx.textBaseline="top";var e="LEVEL "+E.default.id+" of "+(c.default.length-1),i=h.default.width/2-this.ctx.measureText(e).width/2;this.renderText(e,i,50),setTimeout(function(){t.loadingLevel=!1,t.ready=!0},2e3)}},{key:"renderLevelWin",value:function(){this.ctx.font="64px Impact",this.ctx.fillStyle="#dab821",this.ctx.textBaseline="top";var t=this.noMoreLevels?"ALL LEVELS COMPLETED":"LEVEL COMPLETED",e=h.default.width/2-this.ctx.measureText(t).width/2,i=h.default.height/2-64;this.renderText(t,e,i),this.noMoreLevels||(t="ClICK MOUSE TO CONTINUE",this.ctx.font="18px Impact",this.ctx.fillStyle="#dab821",this.ctx.textBaseline="top",e=h.default.width/2-this.ctx.measureText(t).width/2,i=h.default.height-100,this.renderText(t,e,i))}},{key:"renderLevelLost",value:function(){this.ctx.fillStyle="rgba(255, 255, 255, 0.5)",this.ctx.fillRect(0,0,h.default.width,h.default.height),this.ctx.font="64px Impact",this.ctx.fillStyle="#dab821",this.ctx.textBaseline="top";var t=h.default.width/2-this.ctx.measureText("YOU LOST").width/2;this.renderText("YOU LOST",t,50)}},{key:"renderIntro",value:function(){this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.fillRect(0,0,h.default.width,h.default.height),this.ctx.font="74px Impact",this.ctx.fillStyle="#dab821",this.ctx.textBaseline="top";var t=h.default.width/2-this.ctx.measureText("LOST LUGGAGE").width/2,e=h.default.height/2-74;this.renderText("LOST LUGGAGE",t,e)}},{key:"renderTutorial",value:function(){var t=this;if(this.tutorial.length){var e=this.tutorial[0].text;0!==this.tutorial[0].id&&(this.ctx.fillStyle="#000",this.ctx.strokeStyle="#dab821",this.ctx.fillRect(h.default.width/2-200,50,420,23*e.length),this.ctx.strokeRect(h.default.width/2-200,50,420,23*e.length));var i=void 0,n=void 0;e.forEach(function(e,s){t.ctx.font="18px Impact",t.ctx.fillStyle="#dab821",t.ctx.textBaseline="top",i=h.default.width/2-t.ctx.measureText(e).width/2,n=h.default.height-100,0!==t.tutorial[0].id&&(n=50+20*s),t.renderText(e,i+5,n+3)})}}},{key:"render",value:function(){this.ctx.clearRect(0,0,h.default.width,h.default.height),this.ctx.fillStyle=S.BG_C,this.ctx.fillRect(0,0,h.default.width,h.default.height),this.map.render(),this.passengers.forEach(function(t){t.render()}),this.belts.forEach(function(t){t.render()}),this.signs.render(),this.ready&&this.hud.render(),this.ready||0===E.default.id&&this.renderIntro(),this.loadingLevel&&0===this.tutorial.length&&this.renderLevelIntro(),0===E.default.id&&this.renderTutorial(),this.lost&&this.renderLevelLost()}},{key:"setEventHandlers",value:function(){var t=this;h.default.addEventListener("mouseup",function(e){t.mouseDown=!1}),h.default.addEventListener("mousedown",function(e){if(t.mouseDown=!0,t.ready){var i=h.default.getBoundingClientRect(),n=e.clientX-i.left,s=e.clientY-i.top;d.default.tiles.forEach(function(e){e.isInside(n,s)&&t.passengers.forEach(function(i){if(i.insideTile(e)&&(i.selected=!i.selected,i.luggages.forEach(function(t){t.selected=i.selected}),t.tutorial.length&&1===t.tutorial[0].id&&t.updateTutorial(),i.selected&&t.passengers.forEach(function(t){t!==i&&(t.selected=!1,t.luggages.forEach(function(t){t.selected=!1}))})),i.selected&&!i.goToExit)if(i.path){if(i.nextTile){i.changePath=!0;var n=new x.default([i.nextTile[0],i.nextTile[1]],[e.gridX,e.gridY],t.map.grid,[S.T_T_P,S.T_T_L]);i.tempPath=n.findShortestPath()}}else{var s=new x.default([i.playerTile.gridX,i.playerTile.gridY],[e.gridX,e.gridY],t.map.grid,[S.T_T_P,S.T_T_L]);i.path=s.findShortestPath(),i.path&&(i.updatePath=!0)}})})}}),h.default.addEventListener("mousemove",function(e){if(t.ready){var i=h.default.getBoundingClientRect(),n=e.clientX-i.left,s=e.clientY-i.top,r=d.default.getTileByCoords(n,s),a=!1;t.passengers.forEach(function(t){r===t.playerTile&&(a=!0)}),a?h.default.className="player-selected":h.default.classList.remove("player-selected")}})}},{key:"passengers",get:function(){var t=[];return this.flights.forEach(function(e){e.passengers.forEach(function(e){t.push(e)})}),t}},{key:"emptyBelts",get:function(){return this.belts.filter(function(t){return t.free})}}]),t}())).start()},function(t,e,i){(function(e){for(var n=i(10),s="undefined"==typeof window?e:window,r=["moz","webkit"],a="AnimationFrame",l=s["request"+a],o=s["cancel"+a]||s["cancelRequest"+a],h=0;!l&&h<r.length;h++)l=s[r[h]+"Request"+a],o=s[r[h]+"Cancel"+a]||s[r[h]+"CancelRequest"+a];if(!l||!o){var u=0,c=0,f=[];l=function(t){if(0===f.length){var e=n(),i=Math.max(0,1e3/60-(e-u));u=i+e,setTimeout(function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout(function(){throw t},0)}},Math.round(i))}return f.push({handle:++c,callback:t,cancelled:!1}),c},o=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}t.exports=function(t){return l.call(s,t)},t.exports.cancel=function(){o.apply(s,arguments)},t.exports.polyfill=function(){s.requestAnimationFrame=l,s.cancelAnimationFrame=o}}).call(e,i(9))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){(function(e){(function(){var i,n,s,r,a,l;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(i()-a)/1e6},n=e.hrtime,i=function(){var t;return t=n(),1e9*t[0]+t[1]},r=i(),l=1e9*e.uptime(),a=r-l):Date.now?(t.exports=function(){return Date.now()-s},s=Date.now()):(t.exports=function(){return(new Date).getTime()-s},s=(new Date).getTime())}).call(this)}).call(e,i(11))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function a(){T&&d&&(T=!1,d.length?g=d.concat(g):p=-1,g.length&&l())}function l(){if(!T){var t=s(a);T=!0;for(var e=g.length;e;){for(d=g,g=[];++p<e;)d&&d[p].run();p=-1,e=g.length}d=null,T=!1,r(t)}}function o(t,e){this.fun=t,this.array=e}function h(){}var u,c,f=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(t){u=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var d,g=[],T=!1,p=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];g.push(new o(t,e)),1!==g.length||T||s(l)},o.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=h,f.addListener=h,f.once=h,f.off=h,f.removeListener=h,f.removeAllListeners=h,f.emit=h,f.prependListener=h,f.prependOnceListener=h,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},,function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),a=function(){function t(e,i,s,a,l,o){n(this,t),this.gridX=l,this.gridY=o,this.ctx=e.getContext("2d"),this.x=i,this.y=s,this.centerX=i+.5*r.T_W,this.centerY=s+.5*r.T_H,this.asset=a,this.hovered=!1,this.path=!1,this.playerOn=!1,this.color=null}return s(t,[{key:"renderRaw",value:function(){this.ctx.beginPath(),this.ctx.moveTo(this.centerX,this.y),this.ctx.lineTo(this.x+r.T_W,this.centerY),this.ctx.lineTo(this.centerX,this.y+r.T_H),this.ctx.lineTo(this.x,this.centerY),this.ctx.lineWidth=1,this.ctx.closePath()}},{key:"render",value:function(t){this.asset.img?(this.renderRaw(),this.ctx.fillStyle="#FFF",this.ctx.fill(),this.ctx.drawImage(this.asset.img,this.x,this.y)):(this.asset.render?this.asset.render(this.x,this.y,r.T_W,r.T_H,this.ctx,t):(this.renderRaw(),this.ctx.fillStyle=this.asset.bgColor,this.ctx.fill(),this.ctx.strokeStyle=this.asset.bgColor,this.ctx.stroke()),this.hovered&&(this.ctx.strokeStyle="#FF0000",this.ctx.stroke())),this.path&&(this.renderRaw(),this.ctx.fillStyle="rgba(255, 255, 0, 0.44)",this.ctx.fill())}},{key:"isInside",value:function(t,e){var i=Math.abs(t-this.centerX),n=Math.abs(e-this.centerY);return i/(.5*r.T_W)+n/(.5*r.T_H)<=1}}]),t}();e.default=a},function(t,e,i){t.exports=i.p+"37h.png"},function(t,e,i){t.exports=i.p+"Sws.png"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),o=n(l),h=i(4),u=n(h),c=i(6),f=n(c),d=i(0),g=function(){function t(e,i,n,s){r(this,t),this.ctx=o.default.getContext("2d"),this.start=e,this.end=i,this.pos=n,this.path=null,this.luggages=[],this.waitingLuggages=[],this.free=!0,this.number=s,this.generate()}return a(t,[{key:"generate",value:function(){var t=this;u.default.grid.forEach(function(e,i){1===i&&e.forEach(function(e,n){t.end[1]<=n&&t.start[1]>=n&&(u.default.grid[i][n]=d.T_T_B)})});for(var e=1;e<d.BELT_L;e++)u.default.grid[e][this.pos]=d.T_T_B;u.default.grid[d.BELT_L-1][this.pos-1]=d.T_T_B,u.default.grid[1][this.pos-1]=d.T_T_P;for(var i=1;i<d.BELT_L;i++)u.default.grid[i][this.pos-2]=d.T_T_B;u.default.grid[this.start[0]][this.start[1]]=d.T_T_B_S,u.default.grid[this.end[0]][this.end[1]]=d.T_T_B_E;var n=new f.default(this.start,this.end,u.default.grid,[d.T_T_B,d.T_T_B_S,d.T_T_B_E]);this.path=n.findShortestPath()}},{key:"spawn",value:function(){var t=this,e=this.waitingLuggages.shift(),i=Math.round(Math.random()*d.S_D_B)+1e3;setTimeout(function(){t.luggages.push(e),t.waitingLuggages.length&&t.spawn()},i)}},{key:"update",value:function(){var t=this;this.luggages.length&&this.luggages.forEach(function(e){if(!e.ready){var i=u.default.getTile(t.path.grid[0][0],t.path.grid[0][1]);e.x=i.centerX,e.y=i.centerY,e.path={directions:[].concat(s(t.path.directions)),grid:[].concat(s(t.path.grid))},e.ready=!0,e.updatePath=!0,e.loop--}if(e.ready&&e.update(),e.lost||e.collected){var n=t.luggages.indexOf(e);n>-1&&t.luggages.splice(n,1),t.luggages.length||(t.free=!0)}})}},{key:"render",value:function(){this.luggages.length&&this.luggages.forEach(function(t){t.ready&&t.render()})}}]),t}();e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),l=n(a),o=i(1),h=n(o),u=i(0),c=function(){function t(){s(this,t),this.ctx=h.default.getContext("2d"),this.image=l.default.getByName(u.A_SPRITESHEET).img}return r(t,[{key:"render",value:function(){this.ctx.drawImage(this.image,0,42,46,50,634,155,52,54)}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(19),a=function(t){return t&&t.__esModule?t:{default:t}}(r),l=i(0),o=function(){function t(e,i,s){n(this,t),this.code=e,this.origin=i,this.status=l.ONTIME,this.time=s,this.passengers=[],this.passengersLeft=!1,this.belt=null,this.landed=!1}return s(t,[{key:"loadPassengers",value:function(t){for(var e=0;e<t;e++){var i=new a.default(0,0);i.addLuggage(),this.passengers.push(i)}}},{key:"hasLanded",value:function(t){if(this.status===l.ONTIME||this.status===l.WAITING){var e=new Date,i=t.split(":");e.setHours(i[0],i[1],i[2],0);var n=new Date;if(i=this.time.split(":"),n.setHours(i[0],i[1],i[2],0),n.getTime()<=e.getTime())return this.status!==l.WAITING&&(this.status=l.LANDED),this.landed=!0,!0}return!1}},{key:"isCompleted",value:function(){var t=!0;this.passengers.forEach(function(e){e.luggages.forEach(function(e){e.lost||e.collected||(t=!1)})}),t&&(this.status=l.COMPLETED,this.belt=null)}},{key:"spawnPassengers",value:function(){var t=this.passengers.filter(function(t){return!t.ready});t.forEach(function(t){t.spawn()}),t.length||(this.passengersLeft=!0)}},{key:"compareTime",value:function(t,e){var i=new Date,n=t.split(":");i.setHours(n[0],n[1],n[2],0);var s=new Date;return n=e.split(":"),s.setHours(n[0],n[1],n[2],0),i.getTime()>s.getTime()?1:i.getTime()<s.getTime()?-1:0}},{key:"assignBelt",value:function(t){var e=this;t.free=!1,this.belt=t,this.belt.waitingLuggages=this.luggages,this.belt.spawn(),setTimeout(function(){e.status=l.BAGS},2e3)}},{key:"luggages",get:function(){var t=[];return this.passengers.forEach(function(e){e.luggages.forEach(function(e){t.push(e)})}),t}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(2),o=n(l),h=i(1),u=n(h),c=i(4),f=n(c),d=i(3),g=n(d),T=i(20),p=n(T),y=i(5),v=n(y),x=i(6),m=n(x),_=i(0),w=50,P=75,b=function(){function t(e,i){s(this,t),this.ctx=u.default.getContext("2d"),this.w=w/4,this.h=P/4,this.x=e,this.y=i,this.speed=1,this.map=f.default,this.direction="N",this.image=o.default.getByName(_.AP).img,this.frameIndex=0,this.tickCount=0,this.ticksPerFrame=10,this.numberOfFrames=4,this.path=null,this.currentTile=[],this.changePath=!1,this.tempPath=null,this.selected=!1,this.collision=!1,this.luggages=[],this.goToExit=!1,this.left=!1,this.ready=!1,this.directionMap={S:{w:w/4,h:P/4,x:0,y:0},N:{w:w/4,h:P/4,x:0,y:0+P/4},E:{w:w/4,h:P/4,x:0,y:0+P/4*2},W:{w:w/4,h:P/4,x:0,y:0+P/4*3}},this.nextTile=null,this.walking=!1,this.updatePath=!1}return a(t,[{key:"spawn",value:function(){var t=f.default.tiles.filter(function(t){return t.asset.name===_.A_LOBBY&&!t.playerOn});if(t.length){var e=t[Math.floor(Math.random()*t.length)];return e.playerOn=!0,this.x=e.centerX-this.w/2,this.y=e.centerY-this.h,this.ready=!0,!0}return!1}},{key:"addLuggage",value:function(){for(var t=g.default[v.default.id].luggage.min,e=g.default[v.default.id].luggage.max,i=Math.floor(Math.random()*e)+t,n=0;n<i;n++)this.luggages.push(new p.default)}},{key:"insideTile",value:function(t){return!(!this.playerTile||!t)&&(t.gridX===this.playerTile.gridX&&t.gridY===this.playerTile.gridY)}},{key:"followPath",value:function(){if(this.nextTile){var t=f.default.getTileByCoords(this.realPosition[0],this.realPosition[1]);t.gridX===this.nextTile[0]&&t.gridY===this.nextTile[1]&&t.centerX===this.realPosition[0]&&t.centerY===this.realPosition[1]?(this.updatePath=!0,this.changePath&&this.selected&&(this.path=r({},this.tempPath),this.tempPath=null,this.changePath=!1,this.map.tiles.forEach(function(t){return t.path=!1}))):this.updatePath=!1}}},{key:"checkCollisions",value:function(){var t=this;if(this.waitingLuggages.length)this.waitingLuggages.forEach(function(e){var i={x:t.x-_.P_M_O/2,y:t.y-_.P_M_O/2,w:t.w+_.P_M_O,h:t.h+_.P_M_O},n={x:e.x,y:e.y,w:e.w,h:e.h};i.x<n.x+n.w&&i.x+i.w>n.x&&i.y<n.y+n.h&&i.h+i.y>n.y&&(e.collected=!0)});else{this.goToExit=!0,this.changePath=!0,this.selected=!0;var e=f.default.getTile(10,0),i=new m.default([this.nextTile[0],this.nextTile[1]],[e.gridX,e.gridY],this.map.grid,[_.T_T_P,_.T_T_E]);this.tempPath=i.findShortestPath()}}},{key:"update",value:function(){if(this.ready){if(this.followPath(),this.updatePath){var t=this.path.directions?this.path.directions.shift():null,e=this.path.grid?this.path.grid.shift():null;t?(this.walking=!0,this.direction=t,this.nextTile=e):(this.walking=!1,this.updatePath=!1,this.goToExit&&(this.left=!0,this.ready=!1))}this.walking&&("S"===this.direction&&(this.x+=1*this.speed,this.y+=.5*this.speed),"N"===this.direction&&(this.x-=1*this.speed,this.y-=.5*this.speed),"E"===this.direction&&(this.x-=1*this.speed,this.y+=.5*this.speed),"W"===this.direction&&(this.x+=1*this.speed,this.y-=.5*this.speed)),this.tickCount+=1,this.walking&&this.tickCount>this.ticksPerFrame&&(this.tickCount=0,this.frameIndex<this.numberOfFrames-1?this.frameIndex+=1:this.frameIndex=0),this.currentTile=f.default.getTileByCoords(this.realPosition[0],this.realPosition[1]),this.luggages.length&&!this.goToExit&&this.checkCollisions()}}},{key:"render",value:function(){this.ready&&(this.directionCoords=this.directionMap[this.direction],this.selected&&(this.ctx.beginPath(),this.ctx.arc(this.realPosition[0],this.realPosition[1]-this.h-10,3,0,2*Math.PI),this.goToExit?this.ctx.fillStyle="rgba(0, 0, 0, 0.8)":this.ctx.fillStyle="rgba(244, 67, 54, 0.7)",this.ctx.fill()),this.ctx.drawImage(this.image,this.directionCoords.x+this.frameIndex*this.directionCoords.w,this.directionCoords.y,this.directionCoords.w,this.directionCoords.h,this.x,this.y,w/4,P/4))}},{key:"realPosition",get:function(){return[this.x+this.w/2,this.y+this.h]}},{key:"playerTile",get:function(){return f.default.getTileByCoords(this.realPosition[0],this.realPosition[1])}},{key:"waitingLuggages",get:function(){return this.luggages.filter(function(t){return!t.collected})}}]),t}();e.default=b},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(2),o=n(l),h=i(1),u=n(h),c=i(4),f=n(c),d=i(3),g=n(d),T=i(5),p=n(T),y=i(0),v=function(){function t(){r(this,t),this.id=1,this.ctx=u.default.getContext("2d"),this.x=null,this.y=null,this.w=10,this.h=10,this.collected=!1,this.ready=!1,this.path=null,this.newPath={directions:[],grid:[]},this.nextTile=null,this.updatePath=!1,this.moving=!1,this.speed=g.default[p.default.id].luggage.speed,this.loop=g.default[p.default.id].loop,this.image=o.default.getByName(y.A_SPRITESHEET).img,this.reset=!1,this.lost=!1,this.color="#ffffff",this.selected=!1,this.randomize()}return a(t,[{key:"randomize",value:function(){var t=Math.floor(4*Math.random());this.directionMap={S:{w:20,h:21,x:20*t,y:21},N:{w:20,h:21,x:20*t,y:21},E:{w:20,h:21,x:20*t,y:0},W:{w:20,h:21,x:20*t,y:0}}}},{key:"followPath",value:function(){if(this.nextTile){var t=f.default.getTileByCoords(this.realPosition[0],this.realPosition[1]);t.gridX===this.nextTile[0]&&t.gridY===this.nextTile[1]&&t.centerX===this.x&&t.centerY===this.y?(this.updatePath=!0,this.moving=!0):this.updatePath=!1}else if(this.loop>0&&this.reset){0!==p.default.id&&this.loop--,this.path={directions:[].concat(s(this.newPath.directions)),grid:[].concat(s(this.newPath.grid))},this.newPath={directions:[],grid:[]};var e=f.default.getTile(this.path.grid[0][0],this.path.grid[0][1]);this.x=e.centerX,this.y=e.centerY,this.updatePath=!0}else 0===this.loop&&(this.lost=!0)}},{key:"update",value:function(){if(!this.collected&&!this.lost&&this.ready){if(this.followPath(),this.updatePath){var t=this.path.directions?this.path.directions.shift():null,e=this.path.grid?this.path.grid.shift():null;this.newPath.directions.push(t),this.newPath.grid.push(e),t?(this.direction=t,this.nextTile=e):(this.moving=!1,this.updatePath=!1,this.nextTile=null,this.reset=!0)}this.moving&&("S"===this.direction&&(this.x+=1*this.speed,this.y+=.5*this.speed),"N"===this.direction&&(this.x-=1*this.speed,this.y-=.5*this.speed),"E"===this.direction&&(this.x-=1*this.speed,this.y+=.5*this.speed),"W"===this.direction&&(this.x+=1*this.speed,this.y-=.5*this.speed))}}},{key:"render",value:function(){this.collected||this.lost||(this.directionCoords=this.directionMap[this.direction],this.ctx.drawImage(this.image,this.directionCoords.x,this.directionCoords.y,this.directionCoords.w,this.directionCoords.h,this.realPosition[0]-10,this.realPosition[1]-15,20,21),this.selected&&(this.ctx.beginPath(),this.ctx.arc(this.realPosition[0],this.realPosition[1]-this.h-10,3,0,2*Math.PI),this.ctx.fillStyle="rgba(244, 67, 54, 0.7)",this.ctx.fill()))}},{key:"realPosition",get:function(){return[this.x-this.w/2,this.y-this.h/2]}}]),t}();e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(5),o=n(l),h=i(3),u=n(h),c=i(1),f=n(c),d=i(0),g=function(){function t(e){r(this,t),this.flights=e,this.ctx=f.default.getContext("2d"),this.time=null}return a(t,[{key:"countLanded",value:function(){return this.flights.filter(function(t){return t.landed}).length}},{key:"update",value:function(t){this.time=t}},{key:"render",value:function(){this.renderTop(),this.renderBottom()}},{key:"renderTop",value:function(){this.ctx.strokeStyle="#464243",this.ctx.strokeRect(0,0,f.default.width,d.HTH);var t=this.ctx.createLinearGradient(0,0,0,d.HTH/2);t.addColorStop(0,"#f9f9f9"),t.addColorStop(1,"#f0f0f9"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,f.default.width,d.HTH),this.renderTime(),this.renderGeneralInfo()}},{key:"renderBottom",value:function(){this.renderFlightTable(),this.renderSelectedPassengerInfo()}},{key:"renderTime",value:function(){var t=0;this.ctx.font="14px 'Impact'",this.ctx.fillStyle="#5c5c5c",this.ctx.textBaseline="top";var e=this.ctx.measureText(this.time);t=d.C_W-e.width-1,this.ctx.fillText(this.time,t,6)}},{key:"renderGeneralInfo",value:function(){var t=1;this.ctx.font="14px 'Impact'",this.ctx.fillStyle="#5c5c5c",this.ctx.textBaseline="top";var e="\ud83d\udeec   "+this.countLanded()+"/"+this.flights.length;this.ctx.fillText(e,t+3,6);var i="\ud83d\udc64  "+this.waitingPassengers.length;t+=this.ctx.measureText(e).width+20,this.ctx.fillText(i,t,6);var n="\ud83d\udd01   "+u.default[o.default.id].loop;t+=this.ctx.measureText(i).width+20,this.ctx.fillText(n,t,6);for(var s=u.default[o.default.id].lost-this.lostLuggages.length,r="",a=0;a<s;a++)r+=" \ud83d\udcbc  ";t=f.default.width-150,this.ctx.fillText(r,t,5)}},{key:"renderFlightTable",value:function(){var t=this,e=d.C_W-250,i=d.C_H-d.HBH;this.ctx.fillStyle="#dab821";var n=[].concat(s(this.flights));n.reverse(),n.forEach(function(n){t.ctx.font="12px Impact",i-=d.TRH,t.ctx.strokeStyle="#464243",t.ctx.strokeRect(e,i,250,d.TRH);var s=e+2,r=i+2,a=n.time;t.ctx.fillText(a,s,r),s+=t.ctx.measureText(a).width+8,a=n.origin,a=a.substring(0,7),t.ctx.fillText(a,s,r),s+=50,a=n.belt?n.belt.number:"",t.ctx.fillText(a,s,r),a=n.status,s=d.C_W-t.ctx.measureText(a).width-2,t.ctx.fillText(a,s,r)}),i-=d.TRH,this.ctx.strokeStyle="#464243",this.ctx.strokeRect(e,i,250,d.TRH),this.ctx.font="14px Impact";var r=e+125-this.ctx.measureText("ARRIVALS").width/2,a=i;this.ctx.fillText("ARRIVALS",r,a)}},{key:"renderSelectedPassengerInfo",value:function(){if(this.selectedPassenger){var t=d.C_H-150;this.ctx.fillStyle="#f9f9f9",this.ctx.fillRect(0,t,200,120),this.ctx.font="13px Impact",this.ctx.fillStyle="#5c5c5c",this.ctx.textBaseline="top";var e="PASSENGER INFO",i=100-this.ctx.measureText(e).width/2,n=t+2;this.ctx.fillText(e,i,n),e="Flight status: "+this.selectedPassenger.flight.status,i=2,n+=20,this.ctx.fillText(e,i,n),e="Flight origin: "+this.selectedPassenger.flight.origin,i=2,n+=20,this.ctx.fillText(e,i,n),e="Flight time: "+this.selectedPassenger.flight.time,i=2,n+=20,this.ctx.fillText(e,i,n),e="Belt: "+this.selectedPassenger.flight.belt,i=2,n+=20,this.ctx.fillText(e,i,n);var s=0;this.selectedPassenger.luggages.forEach(function(t){t.collected||s++}),e="";for(var r=0;r<s;r++)e+=" \ud83d\udcbc  ";i=2,n+=20,this.ctx.fillText(e,i,n)}}},{key:"passengers",get:function(){var t=[];return this.flights.forEach(function(e){e.passengers.forEach(function(i){e.landed&&t.push(i)})}),t}},{key:"luggages",get:function(){var t=[];return this.flights.forEach(function(e){e.passengers.forEach(function(e){e.luggages.forEach(function(e){t.push(e)})})}),t}},{key:"lostLuggages",get:function(){return this.luggages.filter(function(t){return t.lost})}},{key:"waitingPassengers",get:function(){return this.passengers.filter(function(t){return!t.goToExit})}},{key:"selectedPassenger",get:function(){var t={flight:null,luggages:[]},e=!1;return this.flights.forEach(function(i){i.passengers.forEach(function(n){n.selected&&(e=!0,t.flight={origin:i.origin,status:i.status,belt:i.belt?i.belt.number:"N/A",time:i.time},t.luggages=[].concat(s(n.luggages)))})}),e?t:null}}]),t}();e.default=g}]);