(function e$$0(h,l,f){function e(m,q){if(!l[m]){if(!h[m]){var n="function"==typeof require&&require;if(!q&&n)return n(m,!0);if(k)return k(m,!0);n=Error("Cannot find module '"+m+"'");throw n.code="MODULE_NOT_FOUND",n;}n=l[m]={exports:{}};h[m][0].call(n.exports,function(f){var k=h[m][1][f];return e(k?k:f)},n,n.exports,e$$0,h,l,f)}return l[m].exports}for(var k="function"==typeof require&&require,m=0;m<f.length;m++)e(f[m]);return e})({1:[function(g,h,l){!function(f,e){"function"==typeof define&&define.amd?
define(["exports"],e):e("object"==typeof l&&"string"!=typeof l.nodeName?l:f.TinyMusic={})}(this,function(f){function e(f){f=f.split(h);this.frequency=e.getFrequency(f[0])||0;this.duration=e.getDuration(f[1])||0}function k(e,f,k){this.ac=e||new AudioContext;this.createFxNodes();this.tempo=f||120;this.loop=!0;this.staccato=this.smoothing=0;this.notes=[];this.push.apply(this,k||[])}var m=440*Math.pow(Math.pow(2,1/12),-9),g=/^[0-9.]+$/,h=/\s+/,l=/(\d+)/,r={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach(function(e,
f){e.split("-").forEach(function(e){r[e]=f})});e.getFrequency=function(e){e=e.split(l);return m*Math.pow(Math.pow(2,1/12),r[e[0]])*Math.pow(2,(e[1]||4)-4)};e.getDuration=function(e){return g.test(e)?parseFloat(e):e.toLowerCase().split("").reduce(function(e,f){return e+("w"===f?4:"h"===f?2:"q"===f?1:"e"===f?.5:"s"===f?.25:0)},0)};k.prototype.createFxNodes=function(){var e=this.gain=this.ac.createGain();return[["bass",100],["mid",1E3],["treble",2500]].forEach(function(f,k){k=this[f[0]]=this.ac.createBiquadFilter();
k.type="peaking";k.frequency.value=f[1];e.connect(e=k)}.bind(this)),e.connect(this.ac.destination),this};k.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(f){this.notes.push(f instanceof e?f:new e(f))}.bind(this)),this};k.prototype.createCustomWave=function(e,f){f||(f=e);this.waveType="custom";this.customWave=[new Float32Array(e),new Float32Array(f)]};k.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,
this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this};k.prototype.scheduleNote=function(e,f){var k=60/this.tempo*this.notes[e].duration,m=k*(1-(this.staccato||0));return this.setFrequency(this.notes[e].frequency,f),this.smoothing&&this.notes[e].frequency&&this.slide(e,f,m),this.setFrequency(0,f+m),f+k};k.prototype.getNextNote=function(e){return this.notes[e<this.notes.length-1?e+1:0]};k.prototype.getSlideStartDelay=function(e){return e-Math.min(e,60/this.tempo*
this.smoothing)};k.prototype.slide=function(e,f,k){var m=this.getNextNote(e),g=this.getSlideStartDelay(k);return this.setFrequency(this.notes[e].frequency,f+g),this.rampFrequency(m.frequency,f+k),this};k.prototype.setFrequency=function(e,f){return this.osc.frequency.setValueAtTime(e,f),this};k.prototype.rampFrequency=function(e,f){return this.osc.frequency.linearRampToValueAtTime(e,f),this};k.prototype.play=function(e){return e="number"==typeof e?e:this.ac.currentTime,this.createOscillator(),this.osc.start(e),
this.notes.forEach(function(f,k){e=this.scheduleNote(k,e)}.bind(this)),this.osc.stop(e),this.osc.onended=this.loop?this.play.bind(this,e):null,this};k.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this};f.Note=e;f.Sequence=k})},{}],2:[function(g,h,l){h.exports=[]},{}],3:[function(g,h,l){var f=g("../../node_modules/tinymusic/dist/TinyMusic.min");h.exports={init:function(e){this.ac="undefined"!==typeof AudioContext?new AudioContext:new webkitAudioContext;
this.when=this.ac.currentTime;this.tempo=132;"start"==e?(this.lead=["- w","- w","- w","- w","- w"],this.harmony=["- s","- s","- s","- s","- s"],this.bass=["C2 w","C3 w","C4 w","C2 w","C3 w"]):"main"==e&&(this.harmony="E5 w;G5 w;C6 w;E6 w;E5 w;G5 w;C6 w;G6 w;Eb5 w;Ab5 w;C6 w;F6 w;E5 w;A5 w;D6 w;F6 w;E5 w;G5 w;C6 w;E6 w;E5 w;G5 w;C6 w;G6 w;Eb5 w;Ab5 w;C6 w;F6 w;Ab6 w;E5 w;A5 w;D6 w;A6 w;Bb6 w;E5 w;G5 w;C6 w;E6 w;C7 w;E5 w;G5 w;C6 w;E6 w;G6 w;Eb5 w;Ab5 w;C6 w;F6 w;E5 w;A5 w;D6 w;F6 w;E5 w;G5 w;C6 w;E6 w;E5 w;G5 w;C6 w;G6 w;Eb5 w;Ab5 w;C6 w;F6 w;Ab6 w;E5 w;A5 w;D6 w;A6 w;Bb6 w;C6 w;G6 w;C7 w".split(";"),
this.lead="C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;C5 s;D5 s;E5 s;G5 s;C6 s;G5 s;E5 s;D5 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;Ab4 s;Bb4 s;C5 s;Eb5 s;Ab5 s;E5 s;C5 s;B4 s;A4 s;B4 s;C5 s;E5 s;A5 s;E5 s;C5 s;B4 s;C5 w;C6 w;C7 w".split(";"),
this.bass="C2 w;C3 w;C4 w;C2 w;C3 w;C4 w;Ab1 w;Ab2 w;C4 w;Ab3 h;Bb3 h;A1 w;A2 w;C4 w;C2 w;C3 w;C4 w;G4 h;E4 h;C2 w;C3 w;C4 w;Ab1 w;Ab2 w;C4 w;F4 w;D4 w;A1 w;A2 w;C4 w;F4 w;C2 w;C3 w;C4 w;E4 w;C2 w;C3 w;C4 w;G4 w;Ab1 w;Ab2 w;C4 w;Ab3 h;Bb3 h;A1 w;A2 w;C4 w;C2 w;C3 w;C4 w;G4 h;E4 h;C2 w;C3 w;C4 w;Ab1 w;Ab2 w;C4 w;F4 w;D4 w;A1 w;A2 w;C4 w;F4 w;C2 w;C3 w;G3 w;C4 w".split(";"));this.sequence1=new f.Sequence(this.ac,this.tempo,this.lead);this.sequence2=new f.Sequence(this.ac,this.tempo,this.harmony);this.sequence3=
new f.Sequence(this.ac,this.tempo,this.bass);this.sequence1.staccato=.55;this.sequence2.staccato=.55;this.sequence3.staccato=.05;this.sequence3.smoothing=.4;this.sequence1.gain.gain.value=.5;this.sequence2.gain.gain.value=.4;this.sequence3.gain.gain.value=.325;this.sequence1.mid.frequency.value=800;this.sequence1.mid.gain.value=3;this.sequence2.mid.frequency.value=1200;this.sequence3.mid.gain.value=3;this.sequence3.bass.gain.value=6;this.sequence3.bass.frequency.value=80;this.sequence3.mid.gain.value=
-6;this.sequence3.mid.frequency.value=500;this.sequence3.treble.gain.value=-2;this.sequence3.treble.frequency.value=1400},play:function(e){this.init(e);this.when=this.ac.currentTime;this.sequence1.play(this.when);this.sequence2.play(this.when+60/this.tempo*16);this.sequence3.play(this.when)},pause:function(){this.sequence1.stop();this.sequence2.stop();this.sequence3.stop()}}},{"../../node_modules/tinymusic/dist/TinyMusic.min":1}],4:[function(g,h,l){l=g("./keyboard");g=g("./mouse");var f=document.getElementById("canvas"),
e=f.getContext("2d");f.tabIndex=1E3;f.style.outline="none";f.onkeydown=l.keyDown.bind(l);f.onkeyup=l.keyUp.bind(l);f.onmousemove=g.onMove.bind(g);f.onmousedown=g.onDown.bind(g);f.onmouseup=g.onUp.bind(g);f.oncontextmenu=function(){return!1};h.exports=e},{"./keyboard":8,"./mouse":11}],5:[function(g,h,l){window.onload=function(){this.ox={canvas:g("./canvas").canvas,context:g("./canvas"),images:g("./loader").images,audio:g("./loader").audio,data:g("./loader").data,keyboard:g("./keyboard"),mouse:g("./mouse"),
scenes:g("./scenesManager"),entities:g("./entitiesManager"),save:g("./localStorage"),loop:g("./gameLoop"),preloader:g("./loader"),spawn:g("./entitiesManager").spawn};ox.scenes.set("loading");ox.loop.init()}},{"./canvas":4,"./entitiesManager":6,"./gameLoop":7,"./keyboard":8,"./loader":9,"./localStorage":10,"./mouse":11,"./scenesManager":12}],6:[function(g,h,l){var f=g("../entities"),e=[],k=[],m=[],p=function(){0<m.indexOf(this.id)&&m.splice(m.indexOf(this.id),1);0<k.indexOf(this.id)&&k.splice(k.indexOf(this.id),
1)},q=function(){this.update&&k.push(this.id);this.draw&&m.push(this.id)};h.exports={current:e,list:f,toDraw:m,toUpdate:k,spawn:function(k,m){if(!f[k])throw Error("Entity ["+k+"] does not exist and cannot be spawned.");var g=m||{},h;for(h in f[k])g[h]=f[k][h];g.disable=p.bind(g);g.enable=q.bind(g);g.id=e.length;g.type=k;e.push(g);g.init&&g.init();g.enable();return g},clear:function(){e.splice(0,e.length);k.splice(0,k.length);m.splice(0,m.length)}}},{"../entities":13}],7:[function(g,h,l){var f=g("./entitiesManager"),
e=f.toDraw,k=f.toUpdate,m=g("./scenesManager"),p=g("./canvas");h.exports={speed:1,dt:0,step:1/60,lastDelta:new Date,now:new Date,calculateDelta:function(){this.lastDelta=this.now;this.now=new Date;this.dt+=Math.min(1,(this.now-this.lastDelta)/1E3)*this.speed},init:function(){m.isChanging&&(this.dt=0);for(this.calculateDelta();this.dt>this.step;)this.dt-=this.step,this.update(this.step);this.draw(this.dt);requestAnimationFrame(this.init.bind(this))},draw:function(){p.clearRect(0,0,p.canvas.width,p.canvas.height);
m.current.draw&&m.current.draw();for(var k=0,g=e.length;k<g;k++)void 0!==f.current[e[k]]&&void 0!==f.current[e[k]].draw&&f.current[e[k]].draw()},update:function(e){m.current.update&&m.current.update(e);for(var g=0,h=k.length;g<h;g++)void 0!==f.current[k[g]]&&void 0!==f.current[k[g]].update&&f.current[k[g]].update(e)}}},{"./canvas":4,"./entitiesManager":6,"./scenesManager":12}],8:[function(g,h,l){var f=g("./scenesManager");h.exports={isPressed:{},keyDown:function(e){(32===e.keyCode||37<=e.keyCode&&
40>=e.keyCode)&&e.preventDefault();f.current.keyDown&&f.current.keyDown(this.keys[e.keyCode]);this.keyPress(e)},keyPress:function(e){this.isPressed[e.keyCode]||(f.current.keyPress&&f.current.keyPress(this.keys[e.keyCode]),this.isPressed[e.keyCode]=!0)},keyUp:function(e){f.current.keyUp&&f.current.keyUp(this.keys[e.keyCode]);this.isPressed[e.keyCode]=!1},keys:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps_lock",27:"esc",32:"spacebar",33:"page_up",34:"page_down",
35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print_screen",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"num_zero",97:"num_one",98:"num_two",99:"num_three",100:"num_four",101:"num_five",102:"num_six",103:"num_seven",104:"num_eight",105:"num_nine",106:"num_multiply",
107:"num_plus",109:"num_minus",110:"num_period",111:"num_division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"plus",189:"minus",192:"grave_accent",222:"single_quote"}}},{"./scenesManager":12}],9:[function(g,h,l){h.exports={images:{},data:{},audio:{},loadImage:function(f){var e=f.slice(9,f.length);this.images[e]=new Image;this.images[e].onload=this.assetsToLoad--;this.images[e].src=f},loadData:function(f){var e=
f.slice(7,f.length-5),k=this,g=new XMLHttpRequest;g.onreadystatechange=function(){4===g.readyState&&200===g.status&&(k.data[e]=JSON.parse(g.responseText),k.assetsToLoad--)};g.open("GET",f);g.send()},loadAudio:function(f){var e=f.slice(8,f.length);this.audio[e]=new Audio(f);this.audio[e].oncanplaythrough=this.assetsToLoad--},load:function(f){this.assetsToLoad=f.length;for(var e=0;e<f.length;e++)-1<f[e].indexOf("./images")?this.loadImage(f[e]):-1<f[e].indexOf("./data")?this.loadData(f[e]):-1<f[e].indexOf("./audio")&&
this.loadAudio(f[e])}}},{}],10:[function(g,h,l){h.exports={store:function(f,e){localStorage.setItem(f,JSON.stringify(e))},load:function(f){return JSON.parse(localStorage.getItem(f))},remove:function(f){localStorage.removeItem(f)}}},{}],11:[function(g,h,l){var f=g("./scenesManager");h.exports={x:0,y:0,isDown:!1,onMove:function(e){this.offset=ox.canvas.getBoundingClientRect();ox.mouse.x=e.clientX-this.offset.left;ox.mouse.y=e.clientY-this.offset.top},onUp:function(e){f.current.mouseUp&&f.current.mouseUp(this.buttons[e.button]);
this.isDown=!1},onDown:function(e){f.current.mouseDown&&f.current.mouseDown(this.buttons[e.button]);this.isDown=!0},buttons:{0:"left",1:"middle",2:"right"}}},{"./scenesManager":12}],12:[function(g,h,l){var f=g("./entitiesManager").clear,e=g("../scenes.js");h.exports={current:null,set:function(k){if(!e[k])throw Error("Scene ["+k+"] does not exist!");f();this.current=e[k];this.current.init()}}},{"../scenes.js":22,"./entitiesManager":6}],13:[function(g,h,l){h.exports={ast:g("./entities/ast.js"),rect:g("./entities/rect.js"),
"sprite/animated":g("./entities/sprite/animated.js"),"sprite/drawSprite":g("./entities/sprite/drawSprite.js"),sprite:g("./entities/sprite.js"),text:g("./entities/text.js"),timer:g("./entities/timer.js"),tri:g("./entities/tri.js")}},{"./entities/ast.js":14,"./entities/rect.js":15,"./entities/sprite.js":16,"./entities/sprite/animated.js":17,"./entities/sprite/drawSprite.js":18,"./entities/text.js":19,"./entities/timer.js":20,"./entities/tri.js":21}],14:[function(g,h,l){h.exports={draw:function(){ox.context.save();
ox.context.translate(this.x,this.y);ox.context.rotate(this.direction);ox.context.beginPath();ox.context.arc(0,0,this.r,0,.5*Math.PI);ox.context.lineTo(this.p1[0],this.p1[1]);ox.context.lineTo(this.p2[0],this.p2[1]);ox.context.arc(0,0,this.r,1*Math.PI,-.5*Math.PI);ox.context.lineTo(this.p3[0],this.p3[1]);ox.context.arc(0,0,this.r,0,.5*Math.PI);ox.context.closePath();ox.context.strokeStyle="white";ox.context.lineWidth=1;ox.context.stroke();ox.context.fillStyle=this.fill;ox.context.fill();ox.context.restore()}}},
{}],15:[function(g,h,l){h.exports={draw:function(){ox.context.beginPath();ox.context.rect(this.x,this.y,this.width,this.height);ox.context.fillStyle=this.fill;ox.context.fill()}}},{}],16:[function(g,h,l){var f=g("./sprite/drawSprite"),e=g("./sprite/animated");h.exports={init:function(){this.sourceWidth=ox.images[this.source].width||1;this.sourceHeight=ox.images[this.source].height||1;this.width=this.width||this.sourceWidth;this.height=this.height||this.sourceHeight;this.x=this.x||0;this.y=this.y||
0;this.animation&&e.call(this)},draw:function(){f(this.source,this.x,this.y)}}},{"./sprite/animated":17,"./sprite/drawSprite":18}],17:[function(g,h,l){var f=g("./drawSprite"),e=function(){f(this.source,this.x,this.y,this.width,this.height,this.frames[this.frame])},k=function(e){if(this.isPlaying){if(this.isFinished)return this.finished();this.counter+=1E3*e;this.counter>1E3/this.frameRate&&(this.counter=0,this.animations?this.arrayCounter===this.animationArray.length-1?(this.loop||(this.isFinished=
!0),this.frame=this.animationArray[0],this.arrayCounter=0):(this.arrayCounter++,this.frame=this.animationArray[this.arrayCounter]):this.frame===this.frames.length-1?(this.loop||(this.isFinished=!0),this.frame=0):this.frame+=1)}},m=function(){this.pause();this.callback&&this.callback()},p=function(e,f){if(f)for(var k in f)this[k]=f[k];this.animations&&(e&&(this.animation=e),this.animationArray=this.animations[this.animation],this.arrayCounter=0,this.frame=this.animationArray[this.arrayCounter]);this.isFinished=
!1;this.isPlaying=!0},q=function(){this.isPlaying=!1};h.exports=function(){this.isPlaying=!0;this.isFinished=!1;"boolean"!==typeof this.loop&&(this.loop=!0);this.counter=0;this.frameRate=this.frameRate||30;this.pause=q.bind(this);this.play=p.bind(this);this.finished=m.bind(this);this.update=k.bind(this);this.draw=e.bind(this);var f=0,g=0;this.frames=[[0,0]];if(!(this.sourceHeight>this.height||this.sourceWidth>this.width))for(var h=1;h<this.sourceHeight/this.height*this.sourceWidth/this.width;h++)f<
this.sourceWidth/this.width-1?f++:g<this.sourceHeight/this.height-1&&(g++,f=0),this.frames.push([f,g]);this.animations?(this.animationArray=this.animations[this.animation],this.arrayCounter=0,this.frame=this.animationArray[this.arrayCounter]):this.frame=0}},{"./drawSprite":18}],18:[function(g,h,l){h.exports=function(f,e,k,g,h,l){"number"===typeof g?ox.context.drawImage(ox.images[f],g*l[0],h*l[1],g,h,e,k,g,h):ox.context.drawImage(ox.images[f],e,k)}},{}],19:[function(g,h,l){h.exports={draw:function(){ox.context.font=
this.px+"px Courier";ox.context.fillStyle="white";ox.context.fillText(this.text,this.x,this.y)}}},{}],20:[function(g,h,l){h.exports={init:function(){this.value=0;this.target=this.target||1E3;this.callback=this.callback||function(){}},update:function(f){this.value=Math.round(this.value+1E3*f);this.value>=this.target&&(this.context?this.callback(this.context,this.value):this.callback(this.value),this.loop?this.value=0:this.disable())},restart:function(){this.value=0;this.enable()}}},{}],21:[function(g,
h,l){h.exports={draw:function(){ox.context.save();ox.context.translate(this.x,this.y);ox.context.rotate(this.direction);ox.context.beginPath();ox.context.moveTo(.75*this.width,0);ox.context.lineTo(.25*-this.width,this.height/2);ox.context.lineTo(.25*-this.width,-this.height/2);ox.context.closePath();ox.context.strokeStyle=this.stroke;ox.context.lineWidth=2;ox.context.stroke();ox.context.fillStyle=this.fill;ox.context.fill();ox.context.strokeStyle="black";ox.context.globalCompositeOperation="destination-out";
ox.context.lineWidth=1;ox.context.stroke();ox.context.restore()}}},{}],22:[function(g,h,l){h.exports={loading:g("./scenes/loading.js"),main:g("./scenes/main.js"),start:g("./scenes/start.js")}},{"./scenes/loading.js":23,"./scenes/main.js":24,"./scenes/start.js":25}],23:[function(g,h,l){h.exports={init:function(){ox.preloader.load(g("../assets"));this.barLength=ox.preloader.assetsToLoad},draw:function(){ox.context.fillStyle="black";ox.context.fillRect(0,0,ox.canvas.width,ox.canvas.height);ox.context.fillStyle=
"grey";ox.context.fillRect(ox.canvas.width/4,ox.canvas.height/2,ox.canvas.width/2,1);ox.context.fillStyle="grey";ox.context.fillStyle="rgb(46, 238, 245)";ox.context.fillRect(ox.canvas.width/4,ox.canvas.height/2,ox.canvas.width/2-ox.canvas.width/2*ox.preloader.assetsToLoad/this.barLength,1)},update:function(){0===ox.preloader.assetsToLoad&&ox.scenes.set("start")}}},{"../assets":2}],24:[function(g,h,l){var f=g("../engine/audio.js");h.exports={randInt:function(e,f){return Math.floor(Math.random()*(f-
e+1))+e},dirTo:function(e,f,g,h){e=Math.atan2(h-f,g-e);0>e&&(e+=2*Math.PI);return e},RectCircleColliding:function(e,f){if(void 0===e)return!1;var g=Math.abs(e.x-f.x-f.width/2),h=Math.abs(e.y-f.y-f.height/2);if(g>f.width/2+e.r||h>f.height/2+e.r)return!1;if(g<=f.width/2||h<=f.height/2)return!0;g-=f.width/2;h-=f.height/2;return g*g+h*h<=e.r*e.r},getRandomColor:function(){for(var e="#",f=0;6>f;f++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},init:function(){this.ships=[];this.bullets=
[];this.asts=[];this.colorMode=this.shipRespawn=0;this.lives=4;this.lifeships=[];this.dead=!1;this.musicplaying=!0;this.outcount=0;this.nextAst=this.randInt(0,100);this.isPressed={};this.song=f.play("main");this.background=ox.spawn("rect",{x:0,y:0,width:ox.canvas.width,height:ox.canvas.height,fill:"black"});this.ship=ox.spawn("tri",{x:ox.canvas.width/2,y:ox.canvas.height/2,width:40,height:20,direction:0,move_direction:0,speed:0,top_speed:10,min_speed:3,out:!1,"new":20,last_bullet:10,fill:"black",
flash:0,stroke:"white"});this.ships.push(this.ship);this.life1=ox.spawn("tri",{x:ox.canvas.width-20,y:35,width:30,height:15,direction:1.5*Math.PI,out:!1,fill:"black"});this.life2=ox.spawn("tri",{x:ox.canvas.width-40,y:35,width:30,height:15,direction:1.5*Math.PI,out:!1,fill:"black"});this.life3=ox.spawn("tri",{x:ox.canvas.width-60,y:35,width:30,height:15,direction:1.5*Math.PI,out:!1,fill:"black"});this.lifeships.push(this.life1);this.lifeships.push(this.life2);this.lifeships.push(this.life3)},update:function(e){if(0==
this.lives)0==this.dead&&(this.dead=!0,this.die());else for(0==this.ships.length&&(0==this.shipRespawn?(this.ship=ox.spawn("tri",{x:ox.canvas.width/2,y:ox.canvas.height/2,width:40,height:20,direction:0,move_direction:0,speed:0,top_speed:10,min_speed:3,out:!1,"new":150,last_bullet:10,fill:"black",flash:10,stroke:"white"}),this.ships.push(this.ship)):--this.shipRespawn),i=0;i<this.ships.length;i++)if(this.isPressed.right&&(this.ships[i].direction+=Math.PI/128),this.isPressed.left&&(this.ships[i].direction-=
Math.PI/128),this.isPressed.up?this.ships[i].speed<this.ship.top_speed&&(this.ships[i].move_direction=this.ships[i].direction,this.ships[i].speed+=1):this.ships[i].speed>this.ships[i].min_speed&&--this.ships[i].speed,this.isPressed.spacebar&&0==this.ships[i].last_bullet&&(this.shoot(this.ships[i]),this.ships[i].last_bullet=20),0<this.ships[i].last_bullet&&--this.ships[i].last_bullet,0<this.ships[i].speed&&this.move(this.ships[i],this.ships[i].move_direction,this.ships[i].speed),0==this.ships[i]["new"])if(this.ships[i].x+
this.ships[i].width/2>ox.canvas.width&&0==this.ships[i].out)this.teleport(this.ships[i],"r");else if(0>this.ships[i].x+this.ships[i].width/2&&0==this.ships[i].out)this.teleport(this.ships[i],"l");else if(0>this.ships[i].y+this.ships[i].height/2&&0==this.ships[i].out)this.teleport(this.ships[i],"u");else if(this.ships[i].y+this.ships[i].height/2>ox.canvas.height&&0==this.ships[i].out)this.teleport(this.ships[i],"d");else{if(this.ships[i].x>ox.canvas.width+100||-50>this.ships[i].x||this.ships[i].y>
ox.canvas.height+50||-50>this.ships[i].y)this.ships[i].disable(),this.ships.splice(i,1)}else--this.ships[i]["new"];3==this.lives?this.lifeships[2].disable():2==this.lives?this.lifeships[1].disable():1==this.lives&&this.lifeships[0].disable();for(j=0;j<this.bullets.length;j++)if(this.move(this.bullets[j],this.bullets[j].direction,this.bullets[j].speed),this.bullets[j].x>ox.canvas.width+100||-50>this.bullets[j].x||this.bullets[j].y>ox.canvas.height+50||-50>this.bullets[j].y)this.bullets[j].disable(),
this.bullets.splice(j,1);if(0==this.nextAst){e=this.randInt(0,ox.canvas.width);var f=this.randInt(0,ox.canvas.height),g=this.randInt(1,4);1==g?e=-10:2==g?e=ox.canvas.width+10:f=3==g?ox.canvas.height+10:-10;var g=this.randInt(.25*ox.canvas.width,.75*ox.canvas.width),h=this.randInt(.25*ox.canvas.height,.75*ox.canvas.height),g=this.dirTo(e,f,g,h);this.ast=ox.spawn("ast",{x:e,y:f,r:this.randInt(20,60),p1:[this.randInt(-20,20),this.randInt(0,50)],p2:[this.randInt(-50,0),this.randInt(-50,50)],p3:[this.randInt(0,
50),this.randInt(-50,50)],width:100,height:100,direction:g,move_direction:g,speed:this.randInt(1,4),out:!1,fill:"black"});this.asts.push(this.ast);this.nextAst=this.randInt(0,150)}else--this.nextAst;this.outcount=0;e=this.getRandomColor();for(a=0;a<this.asts.length;a++)this.asts[a].x>ox.canvas.width+200||-200>this.asts[a].x||this.asts[a].y>ox.canvas.height+200||-200>this.asts[a].y?this.asts.splice(a,1):(1==this.asts[a].out&&(this.outcount+=1,1==this.colorMode&&(this.asts[a].fill=e),this.asts[a].speed=
0,.1<=this.asts[a].r&&(this.asts[a].r-=.1),1<=this.asts[a].p1[0]&&(this.asts[a].p1=[this.asts[a].p1[0]-1,this.asts[a].p1[1]-1]),1<=this.asts[a].p2[0]&&(this.asts[a].p2=[this.asts[a].p2[0]-1,this.asts[a].p2[1]-1]),1<=this.asts[a].p3[0]&&(this.asts[a].p3=[this.asts[a].p3[0]-1,this.asts[a].p3[1]-1])),this.asts[a].direction+=this.randInt(0,.07),this.move(this.asts[a],this.asts[a].move_direction,this.asts[a].speed));for(b=0;b<this.asts.length;b++)if(0==this.asts[b].out){for(c=0;c<this.bullets.length;c++)this.RectCircleColliding(this.asts[b],
this.bullets[c])&&(this.bullets[c].disable(),this.bullets.splice(c,1),this.asts[b].out=!0,this.asts[b].fill="white");for(d=0;d<this.ships.length;d++)this.RectCircleColliding(this.asts[b],this.ships[d])&&0==this.ships[d]["new"]&&(this.ships[d].disable(),this.ships.splice(d,1),0==this.ships.length&&(this.shipRespawn=40,--this.lives))}},shoot:function(e){this.bullet=ox.spawn("rect",{x:e.x+.75*e.width*Math.cos(e.direction),y:e.y+.75*e.width*Math.sin(e.direction),fill:"white",width:2,height:2,direction:e.direction,
speed:10,top_speed:10,min_speed:3,out:!1});this.bullets.push(this.bullet)},changeAst:function(e){for(b=0;b<this.asts.length;b++)1==this.asts[b].out&&(this.asts[b].fill="white");for(d=0;d<this.ships.length;d++);},teleport:function(e,f){e.out=!0;var g=e.x,h=e.y;"r"==f?g=0:"l"==f?g=ox.canvas.width:"u"==f?h=ox.canvas.height:"d"==f&&(h=0);this.ship2=ox.spawn("tri",{x:g,y:h,width:40,height:20,direction:e.direction,move_direction:e.move_direction,speed:e.speed,top_speed:10,min_speed:3,out:!1,"new":10,last_bullet:10,
fill:"black",flash:0,stroke:"white"});this.ships.push(this.ship2)},die:function(){var e="Score: "+this.outcount;ox.context.font="40px Courier";ox.context.fillStyle="white";this.text=ox.spawn("text",{x:.5*ox.canvas.width-.5*ox.context.measureText("You Died").width,y:1/3*ox.canvas.height,width:ox.context.measureText("You Died").width,height:20,text:"You Died",px:40});ox.context.font="20px Courier";ox.context.fillStyle="white";this.scoretext=ox.spawn("text",{x:.5*ox.canvas.width-.5*ox.context.measureText(e).width,
y:1/3*ox.canvas.height+100,width:ox.context.measureText(e).width,height:20,text:e,px:20});this.button=ox.spawn("rect",{x:.5*ox.canvas.width-ox.context.measureText("Restart").width,y:2/3*ox.canvas.height,width:ox.context.measureText("Restart").width,height:20,fill:"transparent"});this.text1=ox.spawn("text",{x:this.button.x+.5*ox.context.measureText("Restart").width,y:this.button.y+this.button.height,width:this.button.width,height:20,text:"Restart",px:20});this.dead=!0},move:function(e,f,g){e.x+=g*
Math.cos(f);e.y+=g*Math.sin(f)},keyDown:function(e){},keyPress:function(e){this.isPressed[e]=!0},keyUp:function(e){this.isPressed[e]=!1;"m"==e&&(1==this.musicplaying?(f.pause(),this.musicplaying=!1):(this.song=f.play("main"),this.musicplaying=!0))},mouseDown:function(e){1==this.dead&&ox.mouse.x>=this.button.x&&ox.mouse.x<=this.button.x+this.button.width&&ox.mouse.y>=this.button.y&&ox.mouse.y<=this.button.y+this.button.height&&(f.pause(),ox.scenes.set("main"))},mouseUp:function(e){}}},{"../engine/audio.js":3}],
25:[function(g,h,l){var f=g("../engine/audio.js");h.exports={randInt:function(e,f){return Math.floor(Math.random()*(f-e+1))+e},dirTo:function(e,f,g,h){e=Math.atan2(h-f,g-e);0>e&&(e+=2*Math.PI);return e},RectCircleColliding:function(e,f){if(void 0===e)return!1;var g=Math.abs(e.x-f.x-f.width/2),h=Math.abs(e.y-f.y-f.height/2);if(g>f.width/2+e.r||h>f.height/2+e.r)return!1;if(g<=f.width/2||h<=f.height/2)return!0;g-=f.width/2;h-=f.height/2;return g*g+h*h<=e.r*e.r},getRandomColor:function(){for(var e="#",
f=0;6>f;f++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},init:function(){this.background=ox.spawn("rect",{x:0,y:0,width:ox.canvas.width,height:ox.canvas.height,fill:"black"});ox.context.font="40px Courier";ox.context.fillStyle="white";this.text=ox.spawn("text",{x:.5*ox.canvas.width-.5*ox.context.measureText("Blip Blupper").width,y:1/3*ox.canvas.height,width:ox.context.measureText("Blip Blupper").width,height:20,text:"Blip Blupper",px:40});ox.context.font="20px Courier";ox.context.fillStyle=
"white";this.button=ox.spawn("rect",{x:.5*ox.canvas.width-.5*ox.context.measureText("Start").width,y:2/3*ox.canvas.height,width:ox.context.measureText("Start").width,height:20,fill:"transparent"});this.text1=ox.spawn("text",{x:this.button.x,y:this.button.y+this.button.height,width:this.button.width,height:20,text:"Start",px:20});ox.context.font="10px Courier";ox.context.fillStyle="white";this.text1=ox.spawn("text",{x:10,y:ox.canvas.height-20,width:ox.context.measureText("m = Toggle Music").width,
height:20,text:"m = Toggle Music",px:10});this.asts=[];this.nextAst=0;this.musicplaying=!1;this.song=f.play("start")},draw:function(){},update:function(){if(0==this.nextAst){var e=this.randInt(0,ox.canvas.width),f=this.randInt(0,ox.canvas.height),g=this.randInt(1,4);1==g?e=-10:2==g?e=ox.canvas.width+10:f=3==g?ox.canvas.height+10:-10;var g=this.randInt(.25*ox.canvas.width,.75*ox.canvas.width),h=this.randInt(.25*ox.canvas.height,.75*ox.canvas.height),g=this.dirTo(e,f,g,h);this.ast=ox.spawn("ast",{x:e,
y:f,r:this.randInt(20,60),p1:[this.randInt(-20,20),this.randInt(0,50)],p2:[this.randInt(-50,0),this.randInt(-50,50)],p3:[this.randInt(0,50),this.randInt(-50,50)],width:100,height:100,direction:g,move_direction:g,speed:this.randInt(1,4),out:!1,fill:"black"});this.asts.push(this.ast);this.nextAst=this.randInt(0,150)}else--this.nextAst;e=this.getRandomColor();for(a=0;a<this.asts.length;a++)this.asts[a].x>ox.canvas.width+200||-200>this.asts[a].x||this.asts[a].y>ox.canvas.height+200||-200>this.asts[a].y?
this.asts.splice(a,1):(1==this.asts[a].out&&(1==this.colorMode&&(this.asts[a].fill=e),this.asts[a].speed=0,.1<=this.asts[a].r&&(this.asts[a].r-=.1),1<=this.asts[a].p1[0]&&(this.asts[a].p1=[this.asts[a].p1[0]-1,this.asts[a].p1[1]-1]),1<=this.asts[a].p2[0]&&(this.asts[a].p2=[this.asts[a].p2[0]-1,this.asts[a].p2[1]-1]),1<=this.asts[a].p3[0]&&(this.asts[a].p3=[this.asts[a].p3[0]-1,this.asts[a].p3[1]-1])),this.asts[a].direction+=this.randInt(0,.07),this.move(this.asts[a],this.asts[a].move_direction,this.asts[a].speed))},
move:function(e,f,g){e.x+=g*Math.cos(f);e.y+=g*Math.sin(f)},mouseDown:function(e){ox.mouse.x>=this.button.x&&ox.mouse.x<=this.button.x+this.button.width&&ox.mouse.y>=this.button.y&&ox.mouse.y<=this.button.y+this.button.height&&(f.pause("start"),ox.scenes.set("main"))},keyUp:function(e){this.isPressed[e]=!1;"m"==e&&(1==this.musicplaying?(f.pause(),this.musicplaying=!1):(this.song=f.play("start"),this.musicplaying=!0))}}},{"../engine/audio.js":3}]},{},[5]);