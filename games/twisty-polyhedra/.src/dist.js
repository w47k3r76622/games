var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");
var Point=function(a,b,c,d){this.id=a;this.x=b;this.y=c;this.z=d};Point.prototype.update=function(a,b,c,d,e){d=d?this.rotateAroundAxis(a,d,e):a;var f=d.x;a=d.y;e=d.z;d=e*Math.cos(-b)-f*Math.sin(-b);b=e*Math.sin(-b)+f*Math.cos(-b);e=d;f=a*Math.cos(c)-e*Math.sin(c);d=a*Math.sin(c)+e*Math.cos(c);this.x=b;this.y=f;this.z=d};Point.prototype.clone=function(){return new Point(this.id,this.x,this.y,this.z)};
Point.prototype.rotateAroundAxis=function(a,b,c){var d=new Point(this.id,0,0,0),e=Math.cos(c),f=1-Math.cos(c);c=Math.sin(c);var l=b.x,g=b.y;b=b.z;var r=f*Math.pow(g,2)+e,t=f*Math.pow(b,2)+e;return d.x=(f*Math.pow(l,2)+e)*a.x+(f*l*g-c*b)*a.y+(f*l*b+c*g)*a.z,d.y=(f*l*g+c*b)*a.x+r*a.y+(f*g*b-c*l)*a.z,d.z=(f*l*b-c*g)*a.x+(f*g*b+c*l)*a.y+t*a.z,d};origin={x:0,y:0,z:0};var Vector=function(a,b){this.x=b.x-a.x;this.y=b.y-a.y;this.z=b.z-a.z};
Vector.prototype.add=function(a){return new Vector(origin,{x:this.x+a.x,y:this.y+a.y,z:this.z+a.z})};Vector.prototype.subtract=function(a){return this.add({x:-a.x,y:-a.y,z:-a.z})};Vector.prototype.multiply=function(a){return new Vector(origin,{x:this.x*a,y:this.y*a,z:this.z*a})};Vector.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Vector.prototype.unit=function(){return this.multiply(1/this.magnitude())};
Vector.prototype.cross=function(a){return new Vector(origin,{x:this.y*a.z-this.z*a.y,y:this.z*a.x-this.x*a.z,z:this.x*a.y-this.y*a.x})};var Sticker=function(a,b,c){this.id=a;this.color=b;this.points=c;this.attractor={}};Sticker.prototype.contains=function(a){for(var b,c=this.points[this.points.length-1],d=0,e=$jscomp.makeIterator(this.points),f=e.next();!f.done;f=e.next()){f=f.value;if(b=(new Vector(c,f)).cross(new Vector(c,a)),0>d&&0<b.z||0<d&&0>b.z)return!1;0!==b.z&&(d=b.z);c=f}return!0};
Sticker.prototype.calculateNormalVector=function(){return(new Vector(this.points[0],this.points[1])).cross(new Vector(this.points[0],this.points[this.points.length-1]))};Sticker.prototype.update=function(a,b,c,d,e){this.points.forEach(function(f){return f.update(a[f.id],b,c,d,e)});this.attractor={x:this.points.reduce(function(a,b){return a+b.x},0),y:this.points.reduce(function(a,b){return a+b.y},0),z:this.points.reduce(function(a,b){return a+b.z},0)}};
Sticker.prototype.getPointProjection=function(a,b,c){a=[a.x,a.y];return c&&(a[0]+=this.attractor.x-a[0]>>5,a[1]+=this.attractor.y-a[1]>>5),b&&(a[0]=-a[0]),a};Sticker.prototype.render=function(a,b,c){var d=this;a.fillStyle=this.color;a.strokeStyle="#202020";a.beginPath();a.moveTo.apply(a,$jscomp.arrayFromIterable(this.getPointProjection(this.points[0],b,c)));this.points.forEach(function(e){return a.lineTo.apply(a,$jscomp.arrayFromIterable(d.getPointProjection(e,b,c)))});a.closePath();a.fill();a.stroke()};
var Face=function(a){this.stickers=a;this.normalVector=this.stickers[0].calculateNormalVector()};Face.prototype.update=function(a,b,c){this.stickers.forEach(function(d){return d.update(a,b,c)});this.normalVector=this.stickers[0].calculateNormalVector()};Face.prototype.render=function(a,b,c){this.stickers.forEach(function(d){return d.render(a,b,c)})};var Cycle=function(a,b,c,d){this.stickerCollections=a;this.period=b;this.unitVector=c;this.animationConfig=d;this.stickerCover={}};
Cycle.prototype.update=function(){var a=this;this.stickerCollections.forEach(function(b){return b.forEach(function(b){return a.stickerCover[b.id]=!0})})};Cycle.prototype.mod=function(a,b){return(a%b+b)%b};Cycle.prototype.twist=function(a){var b=this;a=void 0===a?1:a;this.stickerCollections.forEach(function(c){if(1!==c.length){var d=a*c.length/b.period;c.forEach(function(a,f){a.newColor=c[b.mod(f-d,c.length)].color});c.forEach(function(a){a.color=a.newColor;delete a.newColor})}})};
var Puzzle=function(a,b,c,d){this.grid=a;this.faces=b;this.cycles=c;this.baseAngles=this.angles=d||{theta:-Math.PI/4,phi:Math.PI/8};this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.twistCounter=0;this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0};this.stickers=[].concat.apply([],$jscomp.arrayFromIterable(this.faces.map(function(a){return a.stickers})));this.startTime=void 0;this.movesMade=0;this.cycleMap={};this.processCycleMap();this.startSticker=void 0};
Puzzle.prototype.isSolved=function(){for(var a=0;a<this.faces.length;a++)for(var b=0;b<this.faces[a].stickers.length;b++)if(this.faces[a].stickers[b].color!==this.faces[a].stickers[0].color)return!1;return!0};Puzzle.prototype.processCycleMap=function(){var a=this;this.cycles.forEach(function(b){return b.stickerCollections[0].forEach(function(c){a.cycleMap[c.id]=a.cycleMap[c.id]||[];a.cycleMap[c.id].push(b)})})};
Puzzle.prototype.update=function(){var a=this;if(this.animationState.active&&this.animationState.counter<this.animationState.cycle.animationConfig.steps){var b=this.animationState.direction*this.animationState.counter*this.animationState.cycle.animationConfig.dAlpha;this.stickers.forEach(function(c){c.update.apply(c,[a.grid,a.angles.theta,a.angles.phi].concat($jscomp.arrayFromIterable(a.animationState.cycle.stickerCover[c.id]?[a.animationState.cycle.unitVector,b]:[])))});this.stickers.sort(function(a,
b){return b.attractor.z-a.attractor.z});this.animationState.counter++}else{if(this.animationState.active){if(this.animationState.cycle.twist(this.animationState.direction),this.startTime&&this.isSolved()?(this.onFinish&&this.onFinish(((new Date).getTime()-this.startTime)/1E3),this.startTime=void 0,this.movesMade=0):this.startTime&&this.movesMade++,this.animationState.callback&&(this.animationState.callback(),this.animationState.counter<this.animationState.cycle.animationConfig.steps))return this.update();
this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0}}this.faces.forEach(function(b){return b.update(a.grid,a.angles.theta,a.angles.phi)});this.faces.sort(function(a,b){return b.normalVector.z-a.normalVector.z})}};Puzzle.prototype.findTouchedSticker=function(a,b){for(var c,d=this.faces.length-1;0<=d&&!(0<=this.faces[d].normalVector.z);d--)if(c=this.faces[d].stickers.find(function(c){return c.contains({x:a,y:b,z:0})}))return c};
Puzzle.prototype.grab=function(a,b,c){this.startEvtCoordinates.x=a;this.startEvtCoordinates.y=b;2==c?(this.rotating=!0,this.baseAngles=Object.assign({},this.angles)):(this.startSticker=this.findTouchedSticker(a,b),this.twisting=!!this.startSticker)};
Puzzle.prototype.drag=function(a,b){this.animationState.active||(this.rotating?(this.angles.theta=this.baseAngles.theta+(a-this.startEvtCoordinates.x)/100,this.angles.phi=this.baseAngles.phi+(b-this.startEvtCoordinates.y)/100):this.twisting&&(9>this.twistCounter?this.twistCounter++:this.detectCycle(a,b)))};
Puzzle.prototype.detectCycle=function(a,b){var c=this,d,e,f=new Vector(new Point("",this.startEvtCoordinates.x,this.startEvtCoordinates.y,0),new Point("",a,b,0)),l=0;this.cycleMap[this.startSticker.id].forEach(function(a){var b=new Point("",a.unitVector.x,a.unitVector.y,a.unitVector.z);b.update(b,c.angles.theta,c.angles.phi);b.z=0;b=(new Vector({x:0,y:0,z:0},b)).unit();b=f.cross(b);l<b.magnitude()&&(l=b.magnitude(),d=a,e=0<b.z?-1:1)});this.animationState={active:!0,counter:0,direction:e,cycle:d};
this.release()};Puzzle.prototype.release=function(){this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.twistCounter=0;this.startSticker=void 0};
Puzzle.prototype.scramble=function(){for(var a=this,b=3*this.cycles.length,c=[],d=0;d<b;d++)c.push({cycle:this.cycles[Math.floor(Math.random()*this.cycles.length)],direction:.5>Math.random()?-1:1});var e=[];c.forEach(function(c,d){e.push({active:!0,counter:0,direction:c.direction,cycle:c.cycle,callback:d<b-1?function(){return a.animationState=e[d+1]}:function(){return a.startTime=(new Date).getTime()}})});this.animationState=e[0]};
Puzzle.prototype.render=function(a,b,c){c=void 0===c?!0:c;if(this.animationState.active){var d=$jscomp.makeIterator(b?[this.stickers.length-1,-1,-1]:[0,this.stickers.length,1]),e=d.next().value,f=d.next().value;for(d=d.next().value;e!==f;e+=d)this.stickers[e].render(a,b,c)}else for(d=$jscomp.makeIterator(b?[this.faces.length-1,-1,-1]:[0,this.faces.length,1]),e=d.next().value,f=d.next().value,d=d.next().value;e!==f;e+=d)this.faces[e].render(a,b,c)};
var Cube=function(a,b){a=void 0===a?2:a;b=void 0===b?250:b;var c=b/a,d=b/2,e={steps:10,dAlpha:Math.PI/2/10},f={},l=[];b=[{slices:[{fIndex:1,sIndex:0,sJump:a,cJump:1},{fIndex:3,sIndex:a-1,sJump:-1,cJump:a},{fIndex:0,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:2,sIndex:0,sJump:1,cJump:a}],attachedFaces:{ffIndex:4,lfIndex:5,iStep:a,jStep:1},unitVector:new Vector(new Point("",0,0,0),new Point("",0,0,1))},{slices:[{fIndex:1,sIndex:0,sJump:1,cJump:a},{fIndex:5,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:0,sIndex:a-
1,sJump:-1,cJump:a},{fIndex:4,sIndex:0,sJump:a,cJump:1}],attachedFaces:{ffIndex:2,lfIndex:3,iStep:1,jStep:a},unitVector:new Vector(new Point("",0,0,0),new Point("",0,-1,0))},{slices:[{fIndex:2,sIndex:0,sJump:a,cJump:1},{fIndex:5,sIndex:0,sJump:1,cJump:a},{fIndex:3,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:4,sIndex:a-1,sJump:-1,cJump:a}],attachedFaces:{ffIndex:0,lfIndex:1,iStep:1,jStep:a},unitVector:new Vector(new Point("",0,0,0),new Point("",-1,0,0))}];var g=[{key:"iStep",dir:1},{key:"jStep",dir:1},
{key:"iStep",dir:-1},{key:"jStep",dir:-1}],r,t,q,w,x,y;[{fixed:"x",direction:-1,variable:["y","z"],color:"yellow"},{fixed:"x",direction:1,variable:["y","z"],color:"white"},{fixed:"y",direction:-1,variable:["z","x"],color:"blue"},{fixed:"y",direction:1,variable:["z","x"],color:"lawngreen"},{fixed:"z",direction:-1,variable:["x","y"],color:"red"},{fixed:"z",direction:1,variable:["x","y"],color:"darkorange"}].forEach(function(b,k){var e=[];r=-d;for(var u=0;u<=a;u++){t=-d;for(var h=0;h<=a;h++)w="p-"+k+
"-"+u+"-"+h,(q={})[b.fixed]=b.direction*d,q[b.variable[0]]=r,q[b.variable[1]]=t,f[w]=new Point(w,q.x,q.y,q.z),u&&h&&(x="s-"+k+"-"+u+"-"+h,y=[f["p-"+k+"-"+u+"-"+h].clone(),f["p-"+k+"-"+(u-1)+"-"+h].clone(),f["p-"+k+"-"+(u-1)+"-"+(h-1)].clone(),f["p-"+k+"-"+u+"-"+(h-1)].clone()],-1===b.direction&&y.reverse(),e.push(new Sticker(x,b.color,y))),t+=c;r+=c}l.push(new Face(e))});var v=[],B,k,u,C,n,m,p;b.forEach(function(b){for(var c={i$7:0};c.i$7<a;c={i$7:c.i$7},c.i$7++)B=new Cycle([],4,b.unitVector,e),k=
[],b.slices.forEach(function(b){return function(c){for(var d=0;d<a;d++)u=c.sIndex+d*c.sJump+b.i$7*c.cJump,k.push(l[c.fIndex].stickers[u])}}(c)),B.stickerCollections.push(k),v.push(B);C=v[v.length-a];m=l[b.attachedFaces.ffIndex];for(c={i$9:0};c.i$9<Math.floor(a/2);c={i$9:c.i$9},c.i$9++)k=[],u=c.i$9*(a+1),g.forEach(function(c){return function(d){var e=d.key;d=d.dir;for(var f=0;f<a-2*c.i$9-1;f++)k.push(m.stickers[u]),u+=b.attachedFaces[e]*d}}(c)),C.stickerCollections.push(k);n=v[v.length-1];p=l[b.attachedFaces.lfIndex];
for(c={i$11:0};c.i$11<Math.floor(a/2);c={i$11:c.i$11},c.i$11++)k=[],u=c.i$11*(a+1),g.forEach(function(c){return function(d){var e=d.key;d=d.dir;for(var f=0;f<a-2*c.i$11-1;f++)k.push(p.stickers[u]),u+=b.attachedFaces[e]*d}}(c)),n.stickerCollections.push(k);a%2&&(C.stickerCollections.push([m.stickers[(a*a-1)/2]]),n.stickerCollections.push([p.stickers[(a*a-1)/2]]));v.forEach(function(a){return a.update()})});Puzzle.call(this,f,l,v)};$jscomp.inherits(Cube,Puzzle);
var Tetrahedron=function(a,b){a=void 0===a?3:a;b=void 0===b?200:b;var c=b/Math.sqrt(2),d={steps:10,dAlpha:2*Math.PI/3/10},e={},f={},l=[],g=[];c=[new Point("",b,0,c),new Point("",-b,0,c),new Point("",0,b,-c),new Point("",0,-b,-c)];b=[{points:[c[0],c[2],c[1]],color:"white"},{points:[c[0],c[1],c[3]],color:"blue"},{points:[c[0],c[3],c[2]],color:"lawngreen"},{points:[c[1],c[2],c[3]],color:"red"}];c=[{slices:[{fIndex:0,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(a){return[a,
0]},dIJ:function(){return[0,1]}},{fIndex:2,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]}}],attachedFace:{fIndex:3,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(new Point("",0,0,0),c[0])).unit()},{slices:[{fIndex:0,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]}},{fIndex:3,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%
2?-1:0,-1]}}],attachedFace:{fIndex:2,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(new Point("",0,0,0),c[1])).unit()},{slices:[{fIndex:0,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]}},{fIndex:2,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]}},{fIndex:3,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]}}],attachedFace:{fIndex:1,steps:[function(){return[1,2]},
function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(new Point("",0,0,0),c[2])).unit()},{slices:[{fIndex:1,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]}},{fIndex:3,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]}},{fIndex:2,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]}}],attachedFace:{fIndex:0,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},
unitVector:(new Vector(new Point("",0,0,0),c[3])).unit()}];var r,t,q,w,x,y,v;b.forEach(function(b,c){for(var k,d,n,m,p,z,h=[],A=[b.points[0].clone()],g=(new Vector(b.points[0],b.points[1])).multiply(1/a),r=(new Vector(b.points[1],b.points[2])).multiply(1/a),t={r$13:0};t.r$13<a;t={r$13:t.r$13},t.r$13++){k=[];z=g.add(A[0]);k.push(new Point("",z.x,z.y,z.z));for(var q=0;q<=t.r$13;q++)z=r.add(z),k.push(new Point("",z.x,z.y,z.z));A.forEach(function(a){return function(u,g){d=u.clone();n=k[g].clone();m=k[g+
1].clone();for(d.id="p-"+c+"-"+a.r$13+"-"+g;e[d.id];)d.id+="-n";for(n.id="p-"+c+"-"+(a.r$13+1)+"-"+g;e[n.id];)n.id+="-n";for(m.id="p-"+c+"-"+(a.r$13+1)+"-"+(g+1);e[m.id];)m.id+="-n";if(e[d.id]=d.clone(),e[n.id]=n.clone(),e[m.id]=m.clone(),h.push(new Sticker("s-"+c+"-"+a.r$13+"-"+2*g,b.color,[d,n,m])),f[h[h.length-1].id]=h[h.length-1],g<A.length-1){for(d=d.clone();e[d.id];)d.id+="-n";for(m=m.clone();e[m.id];)m.id+="-n";for((p=A[g+1].clone()).id="q-"+c+"-"+a.r$13+"-"+(g+1);e[p.id];)p.id+="-n";e[d.id]=
d.clone();e[m.id]=m.clone();e[p.id]=p.clone();h.push(new Sticker("s-"+c+"-"+a.r$13+"-"+(2*g+1),b.color,[d,m,p]));f[h[h.length-1].id]=h[h.length-1]}}}(t));A=k}l.push(new Face(h))});c.forEach(function(b){for(var c={i$15:0};c.i$15<a;c={i$15:c.i$15},c.i$15++)r=new Cycle([],3,b.unitVector,d),q=[],b.slices.forEach(function(a){return function(b){var c=$jscomp.makeIterator(b.sIJ(a.i$15));w=c.next().value;x=c.next().value;for(c={e$16:0};c.e$16<1+2*a.i$15;c={e$16:c.e$16},c.e$16++)(function(c){return function(){var k=
b.dIJ(a.i$15,c.e$16),d=$jscomp.makeIterator(k);y=d.next().value;v=d.next().value;return k}})(c)(),q.push(f["s-"+b.fIndex+"-"+w+"-"+x]),w+=y,x+=v}}(c)),r.stickerCollections.push(q),g.push(r),r.update();r=g[g.length-1];t=b.attachedFace.fIndex;var e,l,n=a-1;c=1;for(var m=0;0<n;){var p=l=m;q=[];b.attachedFace.steps.forEach(function(a){for(var b=e=0;b<n;b++){var c=$jscomp.makeIterator(a(m,e)),k=c.next().value;c=c.next().value;q.push(f["s-"+t+"-"+p+"-"+l]);p+=k;l+=c;e+=1}});r.stickerCollections.push(q);
m+=1;n-=c;c=2===c?1:2}f["s-"+t+"-"+m+"-"+m]&&r.stickerCollections.push([f["s-"+t+"-"+m+"-"+m]]);r.update()});Puzzle.call(this,e,l,g,{theta:-Math.PI/3,phi:0})};$jscomp.inherits(Tetrahedron,Puzzle);
var Octahedron=function(a,b){a=void 0===a?3:a;b=void 0===b?200:b;var c={steps:10,dAlpha:2*Math.PI/3/10},d={},e={},f=[],l=[];b=[new Point("",0,0,-b),new Point("",b,0,0),new Point("",0,b,0),new Point("",-b,0,0),new Point("",0,-b,0),new Point("",0,0,b)];b=[{points:[b[0],b[2],b[1]],color:"white"},{points:[b[0],b[1],b[4]],color:"blue"},{points:[b[0],b[4],b[3]],color:"lawngreen"},{points:[b[0],b[3],b[2]],color:"skyblue"},{points:[b[5],b[1],b[2]],color:"red"},{points:[b[5],b[2],b[3]],color:"darkorange"},
{points:[b[5],b[3],b[4]],color:"purple"},{points:[b[5],b[4],b[1]],color:"yellow"}];var g,r,t,q,w,x,y,v,B=[{slices:[{fIndex:4,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(){return[0,-1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:7,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+2*a}},{fIndex:1,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,b%2?-1:1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:2,sIJ:function(a){return[a,
0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}},{fIndex:3,sIJ:function(a){return[a,0]},dIJ:function(a,b){return[b%2?0:1,1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:5,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:0,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:6,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point("",
0,0,0),new Point("",1,1,-1))).unit()},{slices:[{fIndex:0,sIJ:function(a){return[a,0]},dIJ:function(a,b){return[b%2?0:1,1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:4,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(a){return 1+2*a}},{fIndex:7,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(){return[0,-1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:6,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+
2*a}},{fIndex:2,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,b%2?-1:1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:3,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:1,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:5,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point("",0,0,0),new Point("",1,-1,-1))).unit()},
{slices:[{fIndex:1,sIJ:function(a){return[a,0]},dIJ:function(a,b){return[b%2?0:1,1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:7,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(a){return 1+2*a}},{fIndex:6,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(){return[0,-1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:5,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+2*a}},{fIndex:3,sIJ:function(b){return[a-
1,2*b]},dIJ:function(a,b){return[b%2?-1:0,b%2?-1:1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:0,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:2,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:4,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point("",0,0,0),new Point("",-1,-1,-1))).unit()},{slices:[{fIndex:2,sIJ:function(a){return[a,
0]},dIJ:function(a,b){return[b%2?0:1,1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:6,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(a){return 1+2*a}},{fIndex:5,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(){return[0,-1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:4,sIJ:function(b){return[a-b-1,2*(a-b-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+2*a}},{fIndex:0,sIJ:function(b){return[a-1,2*b]},dIJ:function(a,b){return[b%
2?-1:0,b%2?-1:1]},limJ:function(b){return 1+2*(a-b-1)}},{fIndex:1,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:3,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:7,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point("",0,0,0),new Point("",-1,1,-1))).unit()}];b.forEach(function(b,c){for(var g,n,m,p,l,h,k=[],u=[b.points[0].clone()],
r=(new Vector(b.points[0],b.points[1])).multiply(1/a),t=(new Vector(b.points[1],b.points[2])).multiply(1/a),q={o$20:0};q.o$20<a;q={o$20:q.o$20},q.o$20++){g=[];h=r.add(u[0]);g.push(new Point("",h.x,h.y,h.z));for(var v=0;v<=q.o$20;v++)h=t.add(h),g.push(new Point("",h.x,h.y,h.z));u.forEach(function(a){return function(f,h){n=f.clone();m=g[h].clone();p=g[h+1].clone();for(n.id="p-"+c+"-"+a.o$20+"-"+h;d[n.id];)n.id+="-n";for(m.id="p-"+c+"-"+(a.o$20+1)+"-"+h;d[m.id];)m.id+="-n";for(p.id="p-"+c+"-"+(a.o$20+
1)+"-"+(h+1);d[p.id];)p.id+="-n";if(d[n.id]=n.clone(),d[m.id]=m.clone(),d[p.id]=p.clone(),k.push(new Sticker("s-"+c+"-"+a.o$20+"-"+2*h,b.color,[n,m,p])),e[k[k.length-1].id]=k[k.length-1],h<u.length-1){for(n=n.clone();d[n.id];)n.id+="-n";for(p=p.clone();d[p.id];)p.id+="-n";for((l=u[h+1].clone()).id="q-"+c+"-"+a.o$20+"-"+(h+1);d[l.id];)l.id+="-n";d[n.id]=n.clone();d[p.id]=p.clone();d[l.id]=l.clone();k.push(new Sticker("s-"+c+"-"+a.o$20+"-"+(2*h+1),b.color,[n,p,l]));e[k[k.length-1].id]=k[k.length-1]}}}(q));
u=g}f.push(new Face(k))});B.forEach(function(b){for(var d={s$22:0};d.s$22<a;d={s$22:d.s$22},d.s$22++)g=new Cycle([],3,b.unitVector,c),t=[],b.slices.forEach(function(a){return function(b){(function(){var c=b.sIJ(a.s$22),d=$jscomp.makeIterator(c);q=d.next().value;w=d.next().value;return c})();v=b.limJ(a.s$22);for(var c={e$23:0};c.e$23<v;c={e$23:c.e$23},c.e$23++)(function(c){return function(){var d=b.dIJ(a.s$22,c.e$23),e=$jscomp.makeIterator(d);x=e.next().value;y=e.next().value;return d}})(c)(),t.push(e["s-"+
b.fIndex+"-"+q+"-"+w]),q+=x,w+=y}}(d)),g.stickerCollections.push(t),l.push(g),g.update();b.attachedFaces.forEach(function(b,c){g=c?l[l.length-1]:l[l.length-a];r=b.fIndex;var d,f,k=a-1;c=1;for(var h=0;0<k;){var n=f=h;t=[];b.steps.forEach(function(a){for(var b=d=0;b<k;b++){var c=$jscomp.makeIterator(a(h,d)),g=c.next().value;c=c.next().value;t.push(e["s-"+r+"-"+n+"-"+f]);n+=g;f+=c;d+=1}});g.stickerCollections.push(t);h+=1;k-=c;c=2===c?1:2}e["s-"+r+"-"+h+"-"+h]&&g.stickerCollections.push([e["s-"+r+"-"+
h+"-"+h]]);g.update()})});Puzzle.call(this,d,f,l,{theta:-Math.PI/3,phi:0})};$jscomp.inherits(Octahedron,Puzzle);
(function(){window.menuConfig={puzzles:[]};for(var a={t:2};4>=a.t;a={t:a.t},a.t++)window.menuConfig.puzzles.push({elem:window["menu-1-item-"+(a.t-1)],create:function(a){return function(b){return new Cube(a.t,b?50:void 0)}}(a)});for(a={t$27:3};5>=a.t$27;a={t$27:a.t$27},a.t$27++)window.menuConfig.puzzles.push({elem:window["menu-2-item-"+(a.t$27-2)],create:function(a){return function(b){return new Tetrahedron(a.t$27,b?40:void 0)}}(a)});for(a={t$28:2};4>=a.t$28;a={t$28:a.t$28},a.t$28++)window.menuConfig.puzzles.push({elem:window["menu-3-item-"+
(a.t$28-1)],create:function(a){return function(b){return new Octahedron(a.t$28,b?40:void 0)}}(a)});window.menuConfig.puzzles.forEach(function(a){var b=a.elem,d=a.create,e=b.getContext("2d"),f=(Math.floor(5*Math.random())-2||1)*Math.PI/500,l=(Math.floor(5*Math.random())-2||1)*Math.PI/500,g=d(!0);e.translate(50,50);var r=function(){e.save();e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,gameCanvas.width,gameCanvas.height);e.restore();g.baseAngles.theta+=f;g.baseAngles.phi+=l;g.update();g.render(e);requestAnimationFrame(r)};
requestAnimationFrame(r);b.onmousedown=function(){window.selectedPuzzle=d();window.startbutton.style.visibility="visible"}})})();
(function(){var a=gameCanvas.getContext("2d"),b=gameCanvasInverted.getContext("2d");a.translate(300,300);b.scale(1/3,1/3);b.translate(300,300);var c=function(){var a=gameCanvas.getBoundingClientRect();return{x:a.left+300,y:a.top+300}};window.explodedStickers=!0;window.selectedPuzzle=new Tetrahedron(3);Puzzle.prototype.onFinish=function(a){window.help.style.display="none";window.menu.style.display="none";window.startbutton.style.visibility="visible";window.success.style.display="inline-block";window.message.innerHTML=
"You solved it in "+a+" seconds.<br/> Good Job."};var d=function(){if(a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,gameCanvas.width,gameCanvas.height),a.restore(),window.selectedPuzzle.update(),window.selectedPuzzle.render(a,!1,window.explodedStickers),window.showRearView&&(b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,gameCanvas.width,gameCanvas.height),b.restore(),window.selectedPuzzle.render(b,!0,window.explodedStickers)),window.selectedPuzzle.startTime){var c=Math.floor(((new Date).getTime()-
window.selectedPuzzle.startTime)/1E3),f=""+Math.floor(c/60);c=""+c%60;2>f.length&&(f="0"+f);2>c.length&&(c="0"+c);window.stats.innerHTML="Time Taken: "+f+":"+c+", Moves Made: "+window.selectedPuzzle.movesMade}else window.stats.innerHTML="Time Taken: --:--, Moves Made: --";requestAnimationFrame(d)};requestAnimationFrame(d);document.addEventListener("contextmenu",function(a){return a.preventDefault()});gameCanvas.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation();var b=
c();window.selectedPuzzle.grab(a.clientX-b.x,a.clientY-b.y,a.ctrlKey?2:a.button)});gameCanvas.addEventListener("mousemove",function(a){a.preventDefault();a.stopPropagation();var b=c();window.selectedPuzzle.drag(a.clientX-b.x,a.clientY-b.y)});gameCanvas.addEventListener("mouseup",function(a){a.preventDefault();a.stopPropagation();window.selectedPuzzle.release()});gameCanvas.addEventListener("mouseleave",function(a){window.selectedPuzzle.release()})})();
