!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}([function(t,e,r){"use strict";function n(t,e,r){try{return window.game.map[0|t][0|e][0|r]}catch(e){}}var o=r(1),i=function(t){return t&&t.__esModule?t:{default:t}}(o),a=!1,u=!1,c=!1,f=document.querySelector("#game");(0,i.default)(function(){u=!1}),t.exports={dlog:function(){c||(c=!0,console.log.apply(this,arguments),setTimeout(function(){return c=!1},500))},drawAllTextures:function(){for(var t=window.game,e=t.pixels,r=t.texmap,n=t.width,o=0;21>o;o++)for(var i=0;i<48;i++)for(var a=0;16>a;a++){var u=r[a+16*i+256*o*3],c=1.328125,f=16*o,s=f+a,l=n*i;16<o&&(s-=272,l=n*(i+48));var d=4*(s+l);e.data[d+0]=(255&u>>16)*c,e.data[d+1]=(255&u>>8)*c,e.data[d+2]=(255&u)*c}},getBlock:n,setBlock:function(t,e,r,n,o,i){if(o=o||window.game.map,!(255<t||255<e||255<r))try{o[t][e][r]!==i&&(o[t][e][r]=n)}catch(e){}},isInsideCheck:function(){if(u)return a;u=!0;for(var t,e=window.game.player,r=e.x,o=e.y,i=e.z,c=o;0<c;c--)if(0!==(t=n(r,c,i))&&8!==t)return a=!0;return a=!1},calcArcFromLength:function(t,e){var r=e/2;return(r-Math.abs(t-r))/r},tryCatch:function(t){var e=null;try{e=t()}catch(t){e=null}return e},getCanvas:function(){return f}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[];setInterval(function(){r.forEach(function(t){return t()})},1e3),e.default=function(t){r.push(t)}},function(t,e,r){"use strict";function n(){return Math.abs(c)/255}function o(){var t=f[0],e=f[1],r=f[2],o=s[0],i=s[1],a=s[2],u=n(),c=[t*(1-u),e*(1-u),r*(1-u)],l=[o*u,i*u,a*u];return[c[0]+l[0],c[1]+l[1],c[2]+l[2]]}Object.defineProperty(e,"__esModule",{value:!0}),e.time=void 0;var i=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(1),u=function(t){return t&&t.__esModule?t:{default:t}}(a),c=e.time=0,f=[154,218,255],s=[200,25,75];(0,u.default)(function(){e.time=c+=.5,255<c&&(e.time=c=-255)}),t.exports={color:function(){var t=o(),e=i(t,3),r=e[0],a=e[1],u=e[2],c=1-n();return[r*c,a*c,u*c]},timeModifier:n,setTime:function(t){e.time=c=parseFloat(t)},getTime:function(){return c}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={safeGet:function(t){return o.default.tryCatch(function(){return localStorage.getItem(t)})||""},safeSet:function(t,e){return o.default.tryCatch(function(){return localStorage.setItem(t,e)})||""},exits:function(){try{return localStorage.getItem(null),!0}catch(t){return!1}}}},function(t){"use strict";t.exports={RES:{WIDTH:320,HEIGHT:240},MAP_SIZE:256,MAX_FPS:60,SEA_LEVEL:30,MAP_SCALE:31,JMP:{STR:.4,AMP:.001},BLOCKS_MAP:[[2,4,12,7,9,11,13,14,15,16],[1,20,3,6,10,8,5,17,18,19]],CRAFTABLES:{2:[1,1],4:[20,6],7:[6,.25],9:[10,8],11:[8,.5],12:[3,4],13:[5,2],14:[17,9],15:[18,9],16:[19,9]},LOCAL_STORAGE:["_mcm","_mcs","_mct","_mci"]}},function(t,e,r){"use strict";function n(t){for(var e=0;e<t.length;e++){var r=e%256,n=0|e/256%64,o=0|e/256/64;if("-"!==t[e]){var i=l.indexOf(t[e]);-1!==i&&(window.game.map[o][n][r]=i)}}}function o(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function i(t){for(var e,r="",n="",i=0;i<t.length;i++)e=/\d/.test(t[i]),e?n+=t[i]:n?(r+=o(t[i],parseInt(n,10)),n=""):r+=t[i];return r}var a=r(0),u=r(2),c=r(3),f=function(t){return t&&t.__esModule?t:{default:t}}(c),s=r(6),l=Array(58).fill(1).map(function(t,e){return String.fromCharCode(65+e)});t.exports={main:function(){var t=window,e=t.game,r=f.default.safeGet("_mct"),o=(0,a.tryCatch)(function(){return JSON.parse(f.default.safeGet("_mci"))});o&&(e.hotbar.items=o.map(function(t){return null===t?1/0:t})),r&&(0,u.setTime)(r);var c=f.default.safeGet("_mcm");c&&n(i(s.decompress(c)))},unMinify:i}},function(t){"use strict";var e=String.fromCharCode,r=32768,n=Object.prototype.hasOwnProperty,o=Math.pow,i=function(t){return t.charCodeAt(0)};t.exports={compress:function(t){if(null==t)return"";var r,a,u,c=function(t){return e(t)},f={},s={},l="",d="",v="",m=2,h=3,p=2,w=[],y=0,g=0;for(u=0;u<t.length;u+=1)if(l=t.charAt(u),n.call(f,l)||(f[l]=h++,s[l]=!0),d=v+l,n.call(f,d))v=d;else{if(n.call(s,v)){if(256>i(v)){for(r=0;r<p;r++)y<<=1,15==g?(g=0,w.push(c(y)),y=0):g++;for(a=i(v),r=0;8>r;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1}else{for(a=1,r=0;r<p;r++)y=y<<1|a,15==g?(g=0,w.push(c(y)),y=0):g++,a=0;for(a=i(v),r=0;16>r;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1}m--,0==m&&(m=o(2,p),p++),delete s[v]}else for(a=f[v],r=0;r<p;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1;m--,0==m&&(m=o(2,p),p++),f[d]=h++,v=l+""}if(""!==v){if(n.call(s,v)){if(256>i(v)){for(r=0;r<p;r++)y<<=1,15==g?(g=0,w.push(c(y)),y=0):g++;for(a=i(v),r=0;8>r;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1}else{for(a=1,r=0;r<p;r++)y=y<<1|a,15==g?(g=0,w.push(c(y)),y=0):g++,a=0;for(a=i(v),r=0;16>r;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1}m--,0==m&&(m=o(2,p),p++),delete s[v]}else for(a=f[v],r=0;r<p;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1;0==--m&&(m=o(2,p),p++)}for(a=2,r=0;r<p;r++)y=y<<1|1&a,15==g?(g=0,w.push(c(y)),y=0):g++,a>>=1;for(;;){if(y<<=1,15==g){w.push(c(y));break}g++}return w.join("")},decompress:function(t){var n,i,a,u,c,f,s,l=function(e){return t.charCodeAt(e)},d=[],v=4,m=4,h=3,p="",w=[],y={val:l(0),position:r,index:1};for(n=0;3>n;n+=1)d[n]=n;for(a=0,c=o(2,2),f=1;f!=c;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=r,y.val=l(y.index++)),a|=(0<u?1:0)*f,f<<=1;switch(a){case 0:for(a=0,c=o(2,8),f=1;f!=c;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=r,y.val=l(y.index++)),a|=(0<u?1:0)*f,f<<=1;s=e(a);break;case 1:for(a=0,c=o(2,16),f=1;f!=c;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=r,y.val=l(y.index++)),a|=(0<u?1:0)*f,f<<=1;s=e(a);break;case 2:return""}for(d[3]=s,i=s,w.push(s);;){if(y.index>t.length)return"";for(a=0,c=o(2,h),f=1;f!=c;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=r,y.val=l(y.index++)),a|=(0<u?1:0)*f,f<<=1;switch(s=a){case 0:for(a=0,c=o(2,8),f=1;f!=c;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=r,y.val=l(y.index++)),a|=(0<u?1:0)*f,f<<=1;d[m++]=e(a),s=m-1,v--;break;case 1:for(a=0,c=o(2,16),f=1;f!=c;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=r,y.val=l(y.index++)),a|=(0<u?1:0)*f,f<<=1;d[m++]=e(a),s=m-1,v--;break;case 2:return w.join("")}if(0==v&&(v=o(2,h),h++),d[s])p=d[s];else{if(s!==m)return null;p=i+i.charAt(0)}w.push(p),d[m++]=i+p.charAt(0),v--,i=p,0==v&&(v=o(2,h),h++)}}}},function(t,e,r){"use strict";var n=r(8),o=r(14),i=r(17);t.exports={mapDataType:n,map:o,textures:i}},function(t){"use strict";t.exports=function(){var t=window.game.CONST.MAP_SIZE;return Array(t).fill(0).map(function(){return Array(64).fill(0).map(function(){return Array(t).fill(0)})})}},function(t,e,r){"use strict";var n=Math.PI,o=Math.cos,i=Math.sin,a=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=r(4),c=r(10),f=r(0),s=f.getBlock,l={forward:0,backward:0,strafeLeft:0,strafeRight:0,jump:0,jumping:0,shift:0};t.exports={applyGravity:function(){var t=window.game.CONST.JMP,e=t.AMP,r=t.STR,n=window.game.player,o=n.x,i=n.y,a=n.z;i+=2;var u=s(o,i,a);if(l.jump&&0<u&&(n.velocity=-r,l.jumping=1),l.jumping){n.velocity+=n.velocity+r+e,0<n.velocity&&(n.velocity=0,l.jumping=0);var c=s(o,n.y+n.velocity,a);return void(0==c?n.y+=n.velocity:9==c&&(n.y+=n.velocity/8))}if(0==u||9==u){3>n.velocity&&(n.velocity+=.2);var f=n.y+.1*n.velocity/(0==u?1:4),d=s(o,Math.ceil(f)+1,a);return void(n.y=0==d||9==d?f:0|f)}n.velocity=0},calculateMovement:function(){var t=window.game.player,e=s(t.x,t.y+1,t.z);if(l.forward||l.backward||l.strafeLeft||l.strafeRight){var r=9==e?16:8,a=t.x,u=t.y+1.8,c=t.z,f=i(t.yaw)/r,d=o(t.yaw)/r;l.forward?(a+=f,c+=d):l.backward&&(a-=f,c-=d);var v=t.yaw-n/2,m=i(v)/r,h=o(v)/r;l.strafeLeft?(a+=m,c+=h):l.strafeRight&&(a-=m,c-=h);var p=s(a,u,c);if(0==p||9==p)t.x=a,t.z=c;else{var w=s(a,u,t.z),y=s(t.x,u,c);0==w||9==w?t.x=a:(0==y||9==y)&&(t.z=c)}}},init:function(){var t=window.game,e=t.player,r=t.map,f=document.addEventListener,d=document.getElementById("game"),v=function(t){var r=t.movementX||t.mozMovementX||t.webkitMovementX||0,o=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.yaw=(e.yaw+r/500)%7.855,e.pitch-=o/1e3;var i=n/2,a=-i;e.pitch<a&&(e.pitch=a),e.pitch>i&&(e.pitch=i)};d.addEventListener("click",function(){d.requestPointerLock=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock,d.requestPointerLock()}),f("keydown",function(t){t.preventDefault();var e=window,r=e.game,n=t.keyCode;16==n?l.shift=1:65==n?l.strafeLeft=1:68==n?l.strafeRight=1:87==n?l.forward=1:83==n?l.backward=1:32==n?l.jump=1:48==n?r.hotbar.selected=9:49<=n&&57>=n?r.hotbar.selected=n-49:69==n&&(r.hotbar.side=r.hotbar.side?0:1)}),f("keyup",function(t){var e=t.keyCode;16==e?l.shift=0:65==e?l.strafeLeft=0:68==e?l.strafeRight=0:87==e?l.forward=0:83==e?l.backward=0:32==e&&(l.jump=0)}),f("click",function(t){for(var e,n=window.game,f=n.player,d=n.hotbar,v=d.items,m=f.x,h=f.y,p=f.z,w=[],y=0;6e3>y;y++){e=o(f.pitch),m+=i(f.yaw)*e/1e3,h-=i(f.pitch)/1e3,p+=o(f.yaw)*e/1e3;var g=s(m,h,p),M=0<g;if((9==g||10==g)&&(M=l.shift),M){if(0===t.button)r[0|m][0|h][0|p]=0,(0,c.inventoryAdd)(g);else if(2===t.button){var b=w,_=a(b,3),x=_[0],A=_[1],S=_[2],k=u.BLOCKS_MAP[d.side][d.selected],E=v[k];if(!E)return;r[0|x][0|A][0|S]=k||1,(0,c.inventoryRemove)(k)}return}w=[m,h,p]}}),["pointer","mozpointer","webkitpointer"].forEach(function(t){return document.addEventListener(t+"lockchange",function(){var t=document,e=t.pointerLockElement,r=t.mozPointerLockElement,n=t.webkitPointerLockElement;document[e==d||r==d||n==d?"addEventListener":"removeEventListener"]("mousemove",v)})})}}},function(t,e,r){"use strict";function n(t,e,r){for(var n=window.game,o=n.pixels,i=n.texmap,a=n.width,u=n.hotbar,c=0;16>c;c++)for(var f=0;16>f;f++){var s=i[f+16*(c+16)+256*t*3],l=u.items[t],d=1.328125,v=(255&s>>16)*d,m=(255&s>>8)*d,h=(255&s)*d,p=4*(e+f+(r+c)*a);if(!l){var w=(v+m+h)/6;v=w+v/3,m=w+m/3,h=w+h/3}o.data[p+0]=v,o.data[p+1]=m,o.data[p+2]=h}}function o(t,e,r){var n=window.game.ctx;if(void 0!=t&&t!==1/0){var o=999<t?(0|t/1e3)+"k":t;n.font="100 8px OCR A Std,Impact,monospace",n.strokeStyle="black",n.textAlign="right",n.lineWidth=2,n.fillStyle="#fff",n.strokeText(o,e,r),n.fillText(o,e,r)}}var i=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(4),u=a.BLOCKS_MAP,c=a.CRAFTABLES,f=function(){return(window.game.width-180)/2},s=function(){return window.game.height-16-8},l=function(t){var e=0;return Object.entries(c).some(function(r){var n=i(r,2),o=n[0],a=n[1];return i(a||[],1)[0]===t&&(e=o,!0)}),e};t.exports={drawIcons:function(){var t=window.game.hotbar;u[t.side].forEach(function(t,e){n(t,f()+18*e,s())})},drawHotbarBorder:function(){var t=window.game,e=t.ctx,r=t.hotbar,n=f()+18*r.selected;e.lineWidth=1,e.strokeStyle="#fff",e.strokeRect(n+1,s()+1,14,14),e.strokeStyle="#000",e.strokeRect(n,s(),16,16)},drawIconNumers:function(){for(var t=window.game.hotbar,e=t.side,r=0;10>r;r++){var n=f()+18*r,i=u[e][r];o(t.items[i],n+16,s()+16)}},inventoryAdd:function(t){var e=window.game.hotbar,r=e.items;r[t]++;var n=c[t];if(n){var o=i(n,2),a=o[0],u=o[1];return void(r[a]=0|r[t]/u)}var f=l(t);if(f){var s=i(c[f],2),d=s[1];r[f]+=d}},inventoryRemove:function(t){var e=window.game.hotbar,r=e.items;r[t]--;var n=c[t];if(n){var o=i(n,2),a=o[0],u=o[1];return void(r[a]=0|r[t]/u)}var f=l(t);if(f){var s=i(c[f],2),d=s[1];r[f]-=d}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=Math.cos,i=Math.sin,a=r(2),u=n(a),c=r(1),f=n(c),s=r(21),l=n(s),d=r(0),v=0,m=0;(0,f.default)(function(){m=(m+1)%3}),t.exports={render:function(){var t=window.game,e=t.texmap,r=t.width,n=t.height,a=t.player,c=t.CONST,f=(t.fps,t.scanlinesEnabled),s=t.renderDistance,h=o(a.pitch),p=i(a.pitch),w=o(a.yaw),y=i(a.yaw),g=a.x-(0|a.x),M=a.y-(0|a.y),b=a.z-(0|a.z);v=v?0:1;for(var _=0;_<r;_++)for(var x=(0,d.calcArcFromLength)(_,r),A=(_-r/2)/n,S=f?_%2+v-1:0;S<n;S+=f?2:1){for(var k,E=(0,d.calcArcFromLength)(S,n),L=s+(s*x+s*E)/2,T=(S-n/2)/n,C=h+T*p,O=T*h-p,I=A*w+C*y,P=C*w-A*y,j=0,R=255,z=0;3>z;z++){k=I,1==z&&(k=O),2==z&&(k=P);var B=1/Math.abs(k),N=I*B,D=O*B,F=P*B,G=g;1==z&&(G=M),2==z&&(G=b),0<k&&(G=1-G);var q=a.x+N*G,H=a.y+D*G,W=a.z+F*G;0>k&&(z||q--,1==z&&H--,2==z&&W--);for(var X,Z=B*G,J=c.MAP_SIZE-1;Z<L;){if(X=(0,d.getBlock)(q&J,63&H,W&J),(W>J||63<H||q>J||0>W||0>H||0>q)&&(X=0),0<X){var K=15&16*(q+W),Y=16+(15&16*H);1==z&&(K=15&16*q,Y=15&16*W,0>D&&(Y+=32));var V=e[K+16*Y+256*X*3];if(0<V){if(j=V,1==z&&(9==X||10==X)){var U=K+Y*(m+1)*16+256*X*3;9==X&&7680>U?j=e[U]:10==X&&8680>U&&(j=e[U])}var Q=u.default.timeModifier(),$=1-Z/s*Q;R=(255-(z+2)%3*50)*$,L=Z}}q+=N,H+=D,W+=F,Z+=B}}(0,l.default)(_,S,R,j)}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=r(13),i=n(o),a=r(5),u=n(a),c=r(2),f=r(1),s=n(f),l=r(0),d=r(3),v=n(d),m=r(9),h=r(7),p=r(18),w=r(4),y=w.RES,g=y.WIDTH,M=y.HEIGHT,b=0|w.MAP_SIZE/2;document.title="LibreCraft",window.game={CONST:w},window.game={CONST:w,width:g,height:M,getTime:c.getTime,setTime:c.setTime,player:{x:b,y:0,z:b,velocity:0,pitch:-.1,yaw:0},hotbar:{selected:0,side:0,items:Array(21).fill(0)},map:h.map(),texmap:h.textures(),ctx:document.getElementById("game").getContext("2d"),fps:0,scanlinesEnabled:!0,renderDistance:32},document.addEventListener("DOMContentLoaded",function(){var t=window,e=t.game,r=e.width,n=e.height,o=e.ctx,a=document.getElementById("toolbar"),c=(0,l.getCanvas)();c.width=r,c.height=n;var f=function(){var t=1.3334*window.innerHeight,e=window.innerHeight;.75*window.innerWidth<window.innerHeight&&(t=window.innerWidth,e=.75*window.innerWidth),c.setAttribute("style","width: "+t+"px; height: "+e+"px")};e.pixels=o.createImageData(r,n),e.pixels.data.fill(255),window.addEventListener("resize",f),f(),m.init(),p.clock.init(),setTimeout(u.default.main,500),(0,s.default)(function(){window.game}),a.addEventListener("click",function(t){var r=t.target.id;"lock"===r?a.classList.toggle("extended"):"save"===r?(0,i.default)():"load"===r?window.location.reload():"plus"===r?e.renderDistance+=5:"minus"===r?e.renderDistance-=5:"interlace"===r?setTimeout(function(){return e.scanlinesEnabled=!e.scanlinesEnabled},1):"newseeed"===r&&confirm("Generate a new seed? This will erase your current save.")&&(w.LOCAL_STORAGE.forEach(function(t){return localStorage.removeItem(t)}),v.default.safeSet("_mcs",0|Math.random()*Number.MAX_SAFE_INTEGER),window.location.reload()),5>e.renderDistance?e.renderDistance=5:255<e.renderDistance&&(e.renderDistance=255)})})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(){for(var t="",e=m(h()),r=m(window.game.map),n=0;n<r.length;n++){var o=e[n],i=r[n];t+=o===i?"-":i}return t}function i(t){for(var e="",r=t[0],n=1,o=1;o<t.length;o++)t[o]===r?n++:(e+=1==n?r:n+r,r=t[o],n=1);return e+=n+r}Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var a=r(5),u=r(2),c=r(7),f=n(c),s=r(3),l=n(s),d=r(6),v=Array(58).fill(1).map(function(t,e){return String.fromCharCode(65+e)}),m=e.stringify=function(t){return t.map(function(t){return t.map(function(t){return t.map(function(t){return v[t]||v[0]}).join("")}).join("")}).join("")},h=function(){return window.game._map=window.game._map||f.default.map()};e.default=function(){var t=window,e=t.game;l.default.safeSet("_mct",(0,u.getTime)()),l.default.safeSet("_mci",JSON.stringify(e.hotbar.items));var r=o();console.log("saving mapStr length",r.length);var n=i(r),c=d.compress(n);console.log("minified",n.length,n),console.log("compressed",c.length,c),l.default.safeSet("_mcm",c);var f=d.decompress(c);(0,a.unMinify)(f)===r?console.log("success"):console.log("Could not save map internally")}},function(t,e,r){"use strict";function n(t,e,r,n){for(var o=e*r%6+6,i=0;i<o;i++)t[e][r-i][n]=7;for(var a=o;0<a;a-=3)for(var u=-1;2>u;u++)for(var f=-1;2>f;f++)c(f+e,r-a,u+n,8,t,7)}var o=Math.floor,i=r(3),a=function(t){return t&&t.__esModule?t:{default:t}}(i),u=r(0),c=u.setBlock,f=r(8),s=r(15),l=a.default.exits(),d=a.default.safeGet("_mcs");l?!d&&(a.default.safeSet("_mcs",0|Math.random()*Number.MAX_SAFE_INTEGER),window.location.reload()):(d=0,document.querySelector(".nosaving").classList.toggle("show"),console.log('no localstorage. Using seed "0". No saving permitted'));var v=s(d),m={1:1,2:1,4:1};t.exports=function(){for(var t=window.game.CONST,e=t.SEA_LEVEL,r=t.MAP_SCALE,i=t.MAP_SIZE,a=f(),u=function(){return Array(i)},c=document.getElementById("loading"),s=u(),l=u(),d=0;d<i;d++){s[d]=u(),l[d]=u();for(var h,p=0;p<i;p++){h=v(d/r,p/r,0),h*=10,h+=32,h=o(h),s[d][p]=h;var w=v(d/2,p/2,0);w*=3,w=o(w),l[d][p]=w,window.treeMap=l}}console.log("ran");for(var y=0;y<i;y++)for(var g,M=0;M<i;M++){g=s[y][M],a[y][g][M]=g<=e?1:12;for(var b=g-1;b>e;b--)a[y][b][M]=9;for(var _=g+1;64>_;_++)a[y][_][M]=4;-2>=l[y][M]&&g<e&&n(a,y,g-1,M),34==g&&(a[y][g][M]=13);for(var x=e-5;64>x;x++){if(48<x){var A=v(y/r*4,x/r*2,M/r*4);if(.55<A&&.6>A){var S=a[y][x][M];m[S]&&(a[y][x][M]=10)}}var k=v(y/r*2,x/r*4,M/r*2);if(.35<k&&.8>k){var E=a[y][x][M];m[E]&&(a[y][x][M]=0)}var L=v(y/r*8,x/r*8,M/r*8);if(.2<L&&.8>L){var T=a[y][x][M];m[T]&&(50>x&&.2<L&&.21>L?a[y][x][M]=14:42<x&&50>x&&.55<L&&.6>L?a[y][x][M]=15:48<x&&.7<L&&(a[y][x][M]=16))}if(61<x)if(63==x)a[y][x][M]=11;else{var C=v(y/r*64,x/r*64,M/r*64);.1<C&&(a[y][x][M]=11)}}}return c.hidden=!0,a}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var i=function(){function t(t,e){for(var r,n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(16),u=function(t){return t&&t.__esModule?t:{default:t}}(a);t.exports=function(){for(var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Array(512),a=-1,c=Math.floor,f=[].concat(o(r)),s=function(t){return t*t*t*(t*(6*t-15)+10)},l=function(t,e,r){return(1-r)*t+r*e},d=[[1,1],[a,1],[1,a],[a,a],[1,,1],[a,,1],[1,,a],[a,,a],[,1,1],[,a,1],[,1,a],[,a,a]].map(function(t){return new(Function.prototype.bind.apply(function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=r,this.z=o}return i(t,[{key:"d",value:function(t,e,r){return this.x*t+this.y*e+this.z*r}}]),t}(),[null].concat(o(t))))}),v=0;256>v;v++)t=(0,u.default)(e+v,256)^(1&v?255&e:255&e>>8),r[v]=r[v+256]=t,f[v]=f[v+256]=d[t%12];return function(t,e,n){var o=c(t),i=c(e),a=c(n);t-=o,e-=i,n-=a,o&=255,i&=255,a&=255;var u=s(t),d=s(e),v=s(n),m=i+r[a],h=i+r[a+1],p=o+r[m],w=o+r[h],y=o+r[m+1],g=o+r[h+1];return l(l(l(f[p].d(t,e,n),f[p+1].d(t-1,e,n),u),l(f[w].d(t,e,n-1),f[w+1].d(t-1,e,n-1),u),v),l(l(f[y].d(t,e-1,n),f[y+1].d(t-1,e-1,n),u),l(f[g].d(t,e-1,n-1),f[g+1].d(t-1,e-1,n-1),u),v),d)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(""+(2147483647&Math.imul(48271,t))/2147483648).split("").slice(-10).join("")%e}},function(t){"use strict";t.exports=function(){for(var t=Array(12288),e=1;21>e;e++)for(var r=255-(0|96*Math.random()),n=0;48>n;n++)!function(n){for(var o=0;16>o;o++)!function(o){var i=9858122,a=r;if(32<=n&&(a/=2),(4!=e&&6!=e||0==(0|3*Math.random()))&&(r=255-(0|96*Math.random())),1==e&&(n<18+(3&o*o*3+81*o>>2)?i=6990400:1==e&&n<19+(3&o*o*3+81*o>>2)&&(r=2*r/3)),3==e&&(i=14606046,0<o&&15>o&&(0<n&&15>n||16<n&&31>n||32<n&&47>n)&&(a=0)),4==e&&(i=8355711),5==e&&(i=11876885,(0==(o+4*(n>>2))%8||0==n%4)&&(i=12365733)),6==e&&(i=10519115,0==(0|16*Math.random())&&(r=255-(0|96*Math.random())),0==n%4&&(a=132)),7==e)if(i=6771249,0<o&&15>o&&(0<n&&15>n||32<n&&47>n)){i=12359778;var u=o-7,c=(15&n)-7;0>u&&(u=1-u),0>c&&(c=1-c),c>u&&(u=c),r=196-(0|32*Math.random())+u%3*32}else 0==(0|2*Math.random())&&(r=r*(140-100*(1&o))/100);8==e&&(i=5298487,0==(0|2*Math.random())&&(i=0,a=255)),9==e&&(i=4219135,a=192+(0|32*Math.random())),10==e&&(i=15810114,a=192+(0|32*Math.random()),0==(0|2*Math.random())&&(i=15834690)),11==e&&(i=4392035,0==(0|2*Math.random())&&(i=2294851)),12==e&&(i=15196080,1>16*Math.random()&&(a=164+4*o)),13==e&&(i=15200224,1>16*Math.random()&&(i=16232346));var f=function(t){2<o&&13>o&&(2<n&&13>n||18<n&&29>n)&&1>4*Math.random()&&(i=t)};14==e&&(i=8355711,f(15810114)),15==e&&(i=8355711,f(15778600)),16==e&&(i=8355711,f(4517357)),17==e&&(i=13704738,1>16*Math.random()&&(a=164+4*o),0<=o&&14>o&&(0<n&&15>n||16<n&&31>n||32<n&&47>n)&&(32>n&&(i=15810114),r=255)),18==e&&(i=13673224,1>16*Math.random()&&(a=164+4*o),0<=o&&14>o&&(0<n&&15>n||16<n&&31>n||32<n&&47>n)&&(32>n&&(i=15778600),r=255)),19==e&&(i=3386283,1>16*Math.random()&&(a=164+4*o),0<=o&&14>o&&(0<n&&15>n||16<n&&31>n||32<n&&47>n)&&(32>n&&(i=4517357),r=255)),20==e&&(i=8355711,1<=(0|4*Math.random())&&(Math.random(),i=5277975));var s=(255&i>>16)*a/255<<16|(255&i>>8)*a/255<<8|(255&i)*a/255;t[o+16*n+256*e*3]=s}(o)}(n);return t}},function(t,e,r){"use strict";var n=r(19),o=r(11);t.exports={clock:n,render:o}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(){var t=window.game,e=t.ctx,r=t.pixels;window._tick+=1,d.applyGravity(),d.calculateMovement(),m(),f.default.drawIcons(),e.putImageData(r,0,0),f.default.drawHotbarBorder(),f.default.drawIconNumers(),(0,l.default)()}function i(t){var e=window.game.CONST.MAX_FPS;return t-h<1e3/e?window.requestAnimationFrame(i):(o(),h=t,void window.requestAnimationFrame(i))}var a=r(1),u=n(a),c=r(10),f=n(c),s=r(20),l=n(s),d=r(9),v=r(11),m=v.render,h=0;t.exports={init:function(){window._tick=0;var t=document.querySelector(".fps");(0,u.default)(function(){var e=window._tick;window.game.fps=e,t&&(t.innerText=e.toString()+" fps"),window._tick=0}),window.requestAnimationFrame?window.requestAnimationFrame(i):setInterval(o,10)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=function(t){return t&&t.__esModule?t:{default:t}}(n),i=void 0,a=void 0,u=void 0;e.default=function(){var t=window.game,e=t.ctx,r=t.width,n=t.height;e.lineWidth=1,e.strokeStyle="#fff",e.strokeStyle="rgb("+i+","+a+","+u+")",e.strokeRect(r/2-1,n/2-1,2,2)},(0,o.default)(function(){var t=window.game,e=t.pixels,r=t.width,n=t.height,o=4*(r/2+(n/2-5)*r);i=255&e.data[o+0]+128,a=255&e.data[o+1]+128,u=255&e.data[o+2]+128})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r(2),i=function(t){return t&&t.__esModule?t:{default:t}}(o),a=r(0);e.default=function(t,e,r,o){var u=window.game,c=u.pixels,f=u.width,s=i.default.color,l=(0,a.isInsideCheck)(),d=i.default.timeModifier(),v=s(),m=n(v,3),h=m[0],p=m[1],w=m[2],y=255*r/48960;l||(y*=1-d/2);var g=(255&o>>16)*y,M=(255&o>>8)*y,b=(255&o)*y,_=4*(t+e*f);c.data[_+0]=g||h,c.data[_+1]=M||p,c.data[_+2]=b||w}}]);