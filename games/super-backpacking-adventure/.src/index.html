<html><head><title>Game</title><meta name=monetization content=$coil.xrptipbot.com/VwAzTMYJRImKu0mJZQi1Dg><style>body,html{width:100vw;height:100vh;margin:0;padding:0;overflow:hidden;background-color:#1f2f33}#stage{padding:0;margin:0;transform-origin:0 0;-webkit-transform-origin:0 0;user-select:none;-webkit-user-select:none;display:inline-block;border:1px solid #fff}canvas{background-color:#0d0d0d;border-radius:1px}canvas,img{padding:0;margin:0;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor}</style><script>zzfx_v=.5,zzfx_x=new AudioContext,zzfx=(t,s,n,e=1,i=.1,o=0,r=0,h=0,c=0)=>{let u=44100,a=Math.PI;n*=2*a/u,n*=1+s*(2*Math.random()-1),o*=1e3*a/u**2,i*=0|(e=0<e?u*(10<e?10:e)|0:1),h*=2*a/u,c*=a,s=[];for(var l=0,f=0,d=0;d<e;++d)s[d]=.5*t*Math.cos(l*n*Math.cos(f*h+c))*(d<i?d/i:1-(d-i)/(e-i)),l+=1+r*(2*Math.random()-1),f+=1+r*(2*Math.random()-1),n+=o;return t=zzfx_x.createBuffer(1,e,u),n=zzfx_x.createBufferSource(),t.getChannelData(0).set(s),n.buffer=t,n.connect(zzfx_x.destination),n.start(),n};const t=800,s=450;function n(t){let s,n,e=t.length;const i=t.slice();for(;0!==e;)n=~~(Math.random()*e),s=i[e-=1],i[e]=i[n],i[n]=s;return i}function e(t,s){return~~(Math.random()*(s-t+1))+t}function i(...t){let s=0;for(const n of t)s+=n;return s}const o=4294967295,r=4281542334,h=4279929156,c=4286863104,u=4281510635,a=4280444068;var l;!function(t){let s,n,e;const i=new ArrayBuffer(873760),r=new Float32Array(i),h=new Uint32Array(i),c=new Uint16Array(131064),u=new Float32Array([1,0,0,1,0,0]),a=new Float32Array(60);let l,f,d,w,_,x=0,y=0,m=null,g=o;t.s=function(t){function o(t,n){const e=s.createShader(n);return s.shaderSource(e,t),s.compileShader(e),e}function r(t,n,e){const i=s.createBuffer();return s.bindBuffer(t,i),s.bufferData(t,n,e),i}n=t.width,e=t.height,s=t.getContext("webgl");const h=function(t,n){const e=s.createProgram(),i=o("precision lowp float;attribute vec2 v,t;attribute vec4 c;varying vec2 uv;varying vec4 col;uniform mat4 m;void main() {gl_Position = m * vec4(v, 1.0, 1.0);uv = t;col = c;}",s.VERTEX_SHADER),r=o("precision lowp float;varying vec2 uv;varying vec4 col;uniform sampler2D s;void main() {gl_FragColor = texture2D(s, uv) * col;}",s.FRAGMENT_SHADER);return s.attachShader(e,i),s.attachShader(e,r),s.linkProgram(e),e}();l=r(s.ELEMENT_ARRAY_BUFFER,c.byteLength,s.STATIC_DRAW),f=r(s.ARRAY_BUFFER,i.byteLength,s.DYNAMIC_DRAW),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.enable(s.BLEND),s.useProgram(h),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l);for(let t=0,s=0;t<65532;t+=6,s+=4)c[t+0]=s,c[t+1]=s+1,c[t+2]=s+2,c[t+3]=s+0,c[t+4]=s+3,c[t+5]=s+1;s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,c),s.bindBuffer(s.ARRAY_BUFFER,f),d=s.getAttribLocation(h,"v"),w=s.getAttribLocation(h,"t"),_=s.getAttribLocation(h,"c"),s.enableVertexAttribArray(d),s.vertexAttribPointer(d,2,s.FLOAT,!1,20,0),s.enableVertexAttribArray(w),s.vertexAttribPointer(w,2,s.FLOAT,!1,20,8),s.enableVertexAttribArray(_),s.vertexAttribPointer(_,4,s.UNSIGNED_BYTE,!0,20,16),s.uniformMatrix4fv(s.getUniformLocation(h,"m"),!1,new Float32Array([2/n,0,0,0,0,-2/e,0,0,0,0,1,1,-1,1,0,0])),s.activeTexture(s.TEXTURE0)},t.i=function(t){const n=s.createTexture();return s.bindTexture(s.TEXTURE_2D,n),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t),s.bindTexture(s.TEXTURE_2D,null),n},t.o=function(t){g=t},t.u=function(t,n,e){s.clearColor(t,n,e,1)},t.l=function(){s.clear(s.COLOR_BUFFER_BIT)},t._=function(t,s){u[4]=u[0]*t+u[2]*s+u[4],u[5]=u[1]*t+u[3]*s+u[5]},t.m=function(t,s){u[0]=u[0]*t,u[1]=u[1]*t,u[2]=u[2]*s,u[3]=u[3]*s},t.g=function(t){const s=Math.sin(t),n=Math.cos(t);u[0]=u[0]*n+u[2]*s,u[1]=u[1]*n+u[3]*s,u[2]=u[0]*-s+u[2]*n,u[3]=u[1]*-s+u[3]*n},t.p=function(){a[y+0]=u[0],a[y+1]=u[1],a[y+2]=u[2],a[y+3]=u[3],a[y+4]=u[4],a[y+5]=u[5],y+=6},t.v=function(){y-=6,u[0]=a[y+0],u[1]=a[y+1],u[2]=a[y+2],u[3]=a[y+3],u[4]=a[y+4],u[5]=a[y+5]},t.A=function(t,n,e,o,c,a,l,f,d){const w=n,_=e,y=n+o,p=e+c,v=n,b=e+c,A=n+o,z=e,k=u[0],M=u[1],$=u[2],F=u[3],G=u[4],q=u[5],C=g;(t!==m||x+1>=10922)&&(s.bufferSubData(s.ARRAY_BUFFER,0,i),s.drawElements(4,6*x,s.UNSIGNED_SHORT,0),x=0,m!==t&&(m=t,s.bindTexture(s.TEXTURE_2D,m)));let D=20*x;r[D++]=w*k+_*$+G,r[D++]=w*M+_*F+q,r[D++]=a,r[D++]=l,h[D++]=C,r[D++]=y*k+p*$+G,r[D++]=y*M+p*F+q,r[D++]=f,r[D++]=d,h[D++]=C,r[D++]=v*k+b*$+G,r[D++]=v*M+b*F+q,r[D++]=a,r[D++]=d,h[D++]=C,r[D++]=A*k+z*$+G,r[D++]=A*M+z*F+q,r[D++]=f,r[D++]=l,h[D++]=C,++x>=10922&&(s.bufferSubData(s.ARRAY_BUFFER,0,i),s.drawElements(4,6*x,s.UNSIGNED_SHORT,0),x=0)},t.k=function(){0!==x&&(s.bufferSubData(s.ARRAY_BUFFER,0,r.subarray(0,20*x)),s.drawElements(4,6*x,s.UNSIGNED_SHORT,0),x=0)}}(l||(l={}));var f=this&&this.M||function(t,s,n,e){return new(n||(n=Promise))(function(i,o){function r(t){try{c(e.next(t))}catch(t){o(t)}}function h(t){try{c(e.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(s){s(t.value)}).then(r,h)}c((e=e.apply(t,s||[])).next())})};const d=new Map,w=new Map;function _(t,s,n,e=1,i=1){const o=w.get(t);l.p(),l._(s,n),l.m(e,i),l.A(o.atlas,0,0,o.w,o.h,o.u0,o.v0,o.u1,o.v1),l.v()}var x,y;function m(t,s,n,e={$:o,F:x.L,m:1,G:0}){e.$=e.$||o,e.F=e.F||x.L,e.m=e.m||1,e.G=e.G||0;const i=t.toLowerCase().split(" "),r=s;let h=0;const c=0===e.G?6*t.split("").length:e.G;let u=0;e.F===x.C?u=~~(-c/2):e.F===x.R&&(u=~~-c),l.o(e.$);for(const t of i){0!==e.G&&h+6*t.length>e.G&&(n+=6*e.m,h=0);for(const i of t.split("")){const t=w.get(i);s=r+h,l.p(),l._(s,n),l.m(e.m,e.m),l.A(t.atlas,u,0,t.w,t.h,t.u0,t.v0,t.u1,t.v1),l.v(),h+=6*e.m}h+=6*e.m}l.o(o)}!function(t){t[t.L=0]="L",t[t.C=1]="C",t[t.R=2]="R"}(x||(x={})),function(t){function s(t){return{x:t.x,y:t.y}}t.copy=s,t.set=function(t,s){t.x=s.x,t.y=s.y},t.add=function(t,n){const e=s(t);return e.x+=n.x,e.y+=n.y,e}}(y||(y={}));const g=new Map;function p(t,s,n){g.has(t)||g.set(t,new Map),g.get(t).set(s,n)}function v(t,s){g.get(t).delete(s)}function b(t,...s){const n=g.get(t);if(n)for(const[t,e]of n)setTimeout(e,0,...s)}var A;!function(t){t.q={x:400,y:225},t.D=new Map,t.B=!0;let s=!1;t.O=function(n){n.addEventListener("click",s=>{null===document.pointerLockElement?n.requestPointerLock():t.B||b("mclick",y.copy(t.q))}),n.addEventListener("mousedown",()=>{t.B||(s=!0,b("mdown",y.copy(t.q)))}),n.addEventListener("mouseup",()=>{t.B||(s=!1,b("mup",y.copy(t.q)))});const e=1e3/60;let i,o=0,r=0;function h(n){i=performance.now(),r+=i-o,o=i,t.q.x+=n.movementX,t.q.y+=n.movementY,t.q.x>=800&&(t.q.x=799),t.q.y>=349&&(t.q.y=348),t.q.x<0&&(t.q.x=0),t.q.y<0&&(t.q.y=0),r>=e&&(r=0,b("mmove",y.copy(t.q),s))}document.addEventListener("pointerlockchange",()=>{document.pointerLockElement===n?(document.addEventListener("mousemove",h,!1),t.B=!1):(document.removeEventListener("mousemove",h,!1),t.B=!0)},!1)}}(A||(A={}));const z=t=>{const s=1.70158;return t*t*((s+1)*t-s)};let k=0;class M{constructor(t=null){this.P=new Map,this.j={x:0,y:0},this.S={x:0,y:0},this.H=null,this.I={x:0,y:0},this.N=!0,this.T=!0,this.U=k++,this.V=t}get J(){return null===this.V?this.K.J:this.V}get W(){return{x:this.S.x+(this.K?this.K.W.x+this.j.x:this.j.x),y:this.S.y+(this.K?this.K.W.y+this.j.y:this.j.y)}}X(...t){for(const s of t)s.K&&s.K.Y(s),this.P.set(s.U,s),s.K=this}Y(t){t.K=null,this.P.delete(t.U)}Z(){if(this.K&&this.K.Y(this),this.P)for(const[t,s]of this.P)s.Z();this.U=null,this.K=null,this.P=null,this.j=null,this.I=null,this.N=!1,this.T=!1}tt(t){const s=[];if(this.j&&function(t,s,n){return t.x>s.x&&t.x<=s.x+n.x&&t.y>s.y&&t.y<=s.y+n.y}(t,this.W,this.I)){s.push(this);for(const[n,e]of this.P)s.push(...e.tt(t))}return s}st(t,s=0,n=null,e=(t=>t)){const i=y.copy(this.j),o=y.copy(t);if(i.x===o.x&&i.y===o.y)return;if(0===s)return void(this.j=y.copy(t));const r=function*(t,s=(t=>t)){const n=yield 0;let e=n;for(;e-n<t;){const i=s((e-n)/t);e=yield i}if(e-n>=t)return 1}(s,e);this.H=t=>{const s=r.next(t);return this.j.x=i.x+Math.round((o.x-i.x)*s.value),this.j.y=i.y+Math.round((o.y-i.y)*s.value),s.done&&(this.j.x=o.x,this.j.y=o.y,n&&window.setTimeout(n,0)),s.done}}nt(t,s){if(this.H&&this.H(s)&&(this.H=null),this.N)for(const[n,e]of this.P)e.nt(t,s)}A(t,s){if(this.T&&this.N)for(const[n,e]of this.P)e.A(t,s)}}var $;!function(t){const s=new Map,n=[];t.et=function(t){s.set(t.it,t)},t.p=function(t){const e=s.get(t);n.length>0&&n[n.length-1].ot(),n.push(e),n[n.length-1].rt()},t.v=function(){n[n.length-1].ot(),n.pop(),n.length>0&&n[n.length-1].rt()},t.nt=function(t,s){n[n.length-1].nt(t,s)},t.A=function(t,s){n[n.length-1].A(t,s)}}($||($={}));class F{constructor(t,s=null,n=null,e=null,i=null){this.it=t,this.ht=s,this.ct=n,this.ut=e,this.at=i}rt(){this.lt=new M(this),this.lt.j={x:0,y:0},this.lt.I={x:t,y:s},this.ft=new q([{dt:"cursor",wt:0}],y.copy(A.q)),this.lt.X(this.ft),this.ht&&this.ht(),p("mmove",this.it,t=>{if(this.ft.N){y.set(this.ft.j,t),A.D.clear();const s=this.lt.tt(t);for(let t=0;t<s.length;t++)A.D.set(s[t].U,s[t])}}),b("mmove",y.copy(A.q),!1)}ot(){v("mmove",this.it),A.D.clear(),this.ct&&this.ct(),this.lt.Z()}nt(t,s){this.ut&&this.ut(t,s),this.lt.nt(t,s)}A(t,s){this.lt.A(t,s),this.at&&this.at(t,s),this.ft.A(t,s)}}class G extends M{constructor(t,s,n,e,i,o,r=4281542334,h=4282199001,c=4280753292,u=2566914048){super(),this._t=!1,this.xt=!1,this.yt=t,this.j={x:s,y:n},this.I={x:e,y:i},this.gt=o,this.$=r,this.pt=r,this.vt=h,this.bt=c,this.At=u,p("mmove",`btn_${this.U}`,(t,s)=>{!this.N||s||this.K&&!this.K.N||(A.D.has(this.U)?(this.$=this.vt,this.xt||zzfx(1,.02,440,.05,.55,0,0,0,.1),this.xt=!0):(this.$=this.pt,this.xt=!1))}),p("mdown",`btn_${this.U}`,t=>{!this.N||this.K&&!this.K.N||A.D.has(this.U)&&(this.$=this.bt,this.j.x+=1,this.j.y+=1,this._t||zzfx(1,.02,220,.05,.55,0,0,0,.1),this._t=!0)}),p("mup",`btn_${this.U}`,t=>{!this.N||this.K&&!this.K.N||(this._t&&(this.$=this.pt,this.j.x-=1,this.j.y-=1,this._t=!1),A.D.has(this.U)&&(zzfx(1,.02,330,.05,.55,0,0,0,.1),this.gt(this),this.$=this.vt))})}Z(){v("mmove",`btn_${this.U}`),v("mdown",`btn_${this.U}`),v("mup",`btn_${this.U}`),super.Z()}A(t,s){this.T&&(this._t||(l.o(this.At),_("solid",this.W.x+1,this.W.y+1,this.I.x+1,this.I.y+1)),l.o(this.$),_("solid",this.W.x,this.W.y,this.I.x,this.I.y),l.o(o),m(this.yt,this.W.x+~~(this.I.x/2),this.W.y-2+~~(this.I.y/2),{F:x.C}),super.A(t,s))}}class q extends M{constructor(t,s,n={x:1,y:1},e=o){super(),this.zt=0,this.kt=!1,this.Mt=-1;const i=w.get(t[0].dt);this.$t=t,this.j=y.copy(s),this.m=y.copy(n),this.I={x:i.w*this.m.x,y:i.h*this.m.y},this.$=e}Z(){super.Z()}get Ft(){if(0===this.wt)return this.$t[0];{let t=0;for(const s of this.$t)if(t+=s.wt,this.zt<=t)return s;return this.$t[this.$t.length-1]}}get wt(){if(-1===this.Mt){this.Mt=0;for(const t of this.$t)this.Mt+=t.wt}return this.Mt}nt(t,s){0!==this.wt&&(this.zt+=t,this.zt>this.wt&&(this.kt,this.zt=0))}A(t,s){l.o(this.$),_(this.Ft.dt,this.W.x,this.W.y,this.m.x,this.m.y),l.o(o),super.A(t,s)}}const C=new F("MainMenu",()=>{C.lt.X(new G("begin adventure",t/2-100,s/2+50,200,40,()=>{$.p("GameSetup")}))},()=>{},t=>{},t=>{m("js13k 2019",5,5,{F:x.L,m:3,$:4281542334}),m("theme: back",5,25,{F:x.L,m:2}),m("super",398,125,{F:x.R,m:7,$:r}),m("backpacking",402,140,{F:x.L,m:4,$:4280444068}),m("adventure",400,165,{F:x.C,m:3}),_("solid",0,40,800,1),_("solid",0,435,800,1),m("(c) 2019 david brad",5,440,{F:x.L,m:1})});class D extends M{constructor(t=[1,2,3,4,5,6],s=o,n=2){super(),this.Gt=1,this.qt=!1,this.Ct=0,this.Dt=0,this.Bt=!1,this.Lt=!1,this.Et=!1,this.Ot=t,this.$=s,this.m=n,this.I={x:16*n,y:16*n},p("mdown",`dice_${this.U}`,t=>{this.Lt||this.Et||!A.D.has(this.U)||this.qt||(this.J.ft.X(this),this.j={x:-8*n,y:-8*n},this.Bt=!0)}),p("mup",`dice_${this.U}`,t=>{if(this.Bt){this.Bt=!1;for(const[t,s]of A.D)if(s instanceof ot&&0===s.P.size&&(this.j={x:0,y:0},s.X(this),s.Pt()))return;R.jt.X(this)}})}Z(){v("mdown",`dice_${this.U}`),v("mup",`dice_${this.U}`),super.Z()}nt(t,s){this.qt&&this.Rt(s)}Rt(t){if(this.qt||(this.qt=!0,this.Ct=t,this.Dt=e(222,1111)),this.qt&&t-this.Ct>=this.Dt)return this.qt=!1,void zzfx(1,.02,330,.05,.55,0,0,0,.1);this.Gt=this.Ot[e(0,5)]}A(t,s){l.o(this.$),_(`d_${this.Gt}`,this.W.x,this.W.y,this.m,this.m),l.o(o),this.Et&&_("d_l",this.W.x,this.W.y,this.m,this.m),super.A(t,s)}}class B extends M{constructor(){super(),this.St=[],this.I.x=40,this.I.y=40}Et(t){for(let s=0;s<t;s++)this.St[s]&&(this.St[s].Et=!0)}Ht(t){this.P.clear();for(const s of this.St){const n=new D(s.Ot,s.$);n.Rt(t+500),n.Et=s.Et||!1,s.Et=!1,this.X(n)}}nt(t,s){let n=4;for(const[t,s]of this.P)s instanceof D&&(s.j={x:n,y:4},n+=36);this.I.x=36*this.St.length+4,super.nt(t,s)}A(t,s){l.o(o),super.A(t,s)}}class L extends M{constructor(t){super(),this.it="",this.It=[],this.Nt=0,this.Tt=0,this.I={x:80,y:80};const s=new D(t,o,1);s.Lt=!0,s.j.x=-16,this.X(s)}get St(){return Array.from(this.P,([t,s])=>s).filter(t=>t instanceof D)}Rt(t){for(const s of this.St)s.Rt(t)}get Ut(){return this.St.reduce((t,s)=>t+s.Gt,0)}get Vt(){return this.Tt<=0}A(t,s){m(this.it,this.W.x,this.W.y+17,{F:x.R,m:2});for(let t=0;t<this.It.length;t++)m(this.It[t],this.W.x,this.W.y+28+6*t,{F:x.R});m(`${this.Tt<=0?0:this.Tt}/${this.Nt}`,600,330,{F:x.R,m:2}),super.A(t,s)}}var E,O,P;!function(t){t[t.combat=0]="combat",t[t.dice=1]="dice",t[t.any=2]="any"}(E||(E={}));class j extends M{constructor(t,s,n,e,i=o){super(),this.it="",this.it=t,this.Jt=s,this.Kt=n,this.I={x:16,y:16},this.X(new q([{dt:e,wt:0}],{x:0,y:0},{x:2,y:2},i))}nt(t,s){A.D.has(this.U)&&m(this.it,this.W.x+9,this.W.y-9,{F:x.C}),super.nt(t,s)}}!function(t){t[t.None=0]="None",t[t.Easy=1]="Easy",t[t.Medium=2]="Medium",t[t.Hard=3]="Hard"}(O||(O={})),function(t){t[t.None=0]="None",t[t.Short=1]="Short",t[t.Medium=2]="Medium",t[t.Long=3]="Long"}(P||(P={}));const R={Qt:0,Tt:0,Nt:0,Wt:0,Xt:O.None,Yt:P.None,jt:null,Zt:null,ts:0,ss:null,ns:[],es:[],os:[]};function S(t){R.Wt>0&&(t-=R.Wt),t>0&&(R.Tt-=t)}function H(t){R.Tt+=t,R.Tt>R.Nt&&(R.Tt=R.Nt)}function I(){for(const t of R.es)t.Jt!==E.combat||R.ss.Jt!==N.Fight&&R.ss.Jt!==N.Boss||R.ss.X(t.Kt()),t.Jt===E.any&&R.ss.X(t.Kt())}var N;!function(t){t[t.Empty=0]="Empty",t[t.Camp=1]="Camp",t[t.Loot=2]="Loot",t[t.Fight=3]="Fight",t[t.Boss=4]="Boss"}(N||(N={}));class T extends M{constructor(){super(),this.rs=[],this.hs=!1,this.cs=()=>{},this.j={x:0,y:0},this.I={x:800,y:350}}us(){for(const[t,s]of this.P)s instanceof rt&&s.Z();this.as&&(this.Y(this.as),this.as=null)}ls(t){for(const[s,n]of this.P)n instanceof rt&&n.it===t&&(n.T=!1,n.Z())}nt(t,s){let n=0,e=0,i=0;for(const[t,s]of this.P)s instanceof rt&&(n++,s.N&&!s.H&&(e>2&&(e=0,i++),s.st({x:6+(s.I.x+4)*i,y:2+e*(s.I.y+4)},250),e++));this.hs||(0===n&&!this.as||this.as&&this.as.Vt)&&(this.hs=!0,this.cs()),super.nt(t,s)}A(t,s){m("tips",400,210,{F:x.C,m:2,$:4280689687});let n=222;for(const t of this.rs)m(t,400,n,{F:x.C,$:4280689687}),n+=12;super.A(t,s)}}class U extends M{constructor(){super(),this.j.x=0,this.j.y=350,this.I.x=800,this.I.y=100;for(let t=0;t<100;t++)for(let s=0;s<13;s++)this.X(new q([{dt:`gr_${e(0,3)}`,wt:0}],{x:8*t,y:8*s},{x:1,y:1},4281575987));for(let t=0;t<100;t++)this.X(new q([{dt:"tree",wt:0}],{x:e(0,800),y:e(0,25)}));this.fs=new q([{dt:"g_0",wt:250},{dt:"g_1",wt:250}],{x:0,y:26}),this.X(this.fs);for(let t=0;t<100;t++)this.X(new q([{dt:"tree",wt:0}],{x:e(0,800),y:e(55,100)}))}Z(){}nt(t,s){this.fs.j.x=this.ds.j.x,super.nt(t,s)}A(t,s){super.A(t,s),l.o(o),_("solid",this.W.x,this.W.y,800,1),l.o(2852126720),_("solid",this.W.x+this.I.x/2-100,this.W.y+2,200,12),this.ds.ss?m(this.ds.ss.it,this.W.x+this.I.x/2,this.W.y+2,{F:x.C,m:2}):m("forest entrance",this.W.x+this.I.x/2,this.W.y+2,{F:x.C,m:2})}}class V extends M{constructor(t=Ot()){super(),this.ws=null,this._s=null,this.ss=null,this.I={x:16,y:16},this.ss=t}Z(){}A(t,s){if(this.ws){l.o(o);const t=y.add(this.W,{x:8,y:8});!function(t,s,n=o){let e=Math.abs(s.x-t.x),i=Math.abs(s.y-t.y),r=t.x,h=t.y,c=1+e+i;const u=t.x<s.x?1:-1,a=t.y<s.y?1:-1;let f=e-i;for(e*=2,i*=2,l.o(n);c>0;)_("solid",r,h),f>0?(r+=u,f-=i):(h+=a,f+=e),c-=1;l.o(o)}(t,y.add(t,{x:16,y:0}))}this.ss&&this.ss.Jt!==N.Empty?this.ss.Jt===N.Camp?l.o(4294936712):this.ss.Jt===N.Loot?l.o(4280483839):this.ss.Jt===N.Fight?l.o(4294936712):this.ss.Jt===N.Boss&&l.o(4280427263):l.o(4294936712),_("node",this.W.x,this.W.y),l.o(o),super.A(t,s)}}function J(){return new j(_t,E.combat,ht,"dag")}function K(){return new j(vt,E.combat,ut,"buc")}function Q(){return new j($t,E.any,lt,"heal")}let W,X;const Y=new F("GameSetup",()=>{R.jt=new B,R.jt.St.push({Ot:[1,2,3,4,5,6],$:o}),R.jt.St.push({Ot:[1,2,3,4,5,6],$:o}),R.Qt=5,R.Tt=10,R.Nt=10,R.Xt=O.None,R.Yt=P.None,(W=new M).j.x=t/2-100,W.j.y=s/2-65,W.I.x=200,W.I.y=130,(X=new M).j.x=t/2-100,X.j.y=s/2-65,X.I.x=200,X.I.y=130,Y.lt.X(W),Y.lt.X(X),W.X(new G("easy",0,0,200,30,()=>{R.Xt=O.Easy})),W.X(new G("medium",0,50,200,30,()=>{R.Xt=O.Medium})),W.X(new G("hard",0,100,200,30,()=>{R.Xt=O.Hard})),X.X(new G("short",0,0,200,30,()=>{R.Yt=P.Short,Z(),$.v(),$.p("Game")})),X.X(new G("medium",0,50,200,30,()=>{R.Yt=P.Medium,Z(),$.v(),$.p("Game")})),X.X(new G("long",0,100,200,30,()=>{R.Yt=P.Long,Z(),$.v(),$.p("Game")}))},()=>{},t=>{R.Xt===O.None?(W.N=!0,W.T=!0,X.N=!1,X.T=!1):(W.N=!1,W.T=!1,X.N=!0,X.T=!0)},s=>{R.Xt===O.None?m("select game difficulty",t/2,100,{F:x.C,m:5}):m("select game length",t/2,100,{F:x.C,m:5})});function Z(){R.es.length=0,R.os.length=0,R.os.push(J()),R.os.push(J()),R.os.push(new j(mt,E.combat,ct,"sw")),R.os.push(K()),R.os.push(K()),R.os.push(new j(zt,E.combat,at,"sh")),R.os.push(Q()),R.os.push(Q()),R.os.push(new j(qt,E.any,ft,"heal")),R.os=n(R.os),R.ss=null,R.Zt=new U;const s=[],e=new V(null);R.Zt.ds=e,s.push(e),s.push(...tt(O.Easy,s[s.length-1],!0)),R.Yt!==P.Short&&s.push(...tt(O.Easy,s[s.length-1],!0)),R.Xt===O.Easy&&s.push(...tt(O.Easy,s[s.length-1],!0));const i=new V(Pt());s[s.length-1].ws=i,i._s=s[s.length-1],s.push(i);const o=new V(St(O.Easy));s[s.length-1].ws=o,o._s=s[s.length-1],s.push(o),R.Xt===O.Medium&&s.push(...tt(O.Medium,s[s.length-1],!0)),s.push(...tt(O.Medium,s[s.length-1],!0)),R.Yt!==P.Short&&s.push(...tt(O.Medium,s[s.length-1])),R.Yt===P.Long&&s.push(...tt(O.Medium,s[s.length-1]));const r=new V(Pt());s[s.length-1].ws=r,r._s=s[s.length-1],s.push(r);const h=new V(St(O.Medium));s[s.length-1].ws=h,h._s=s[s.length-1],s.push(h),R.Xt===O.Hard&&s.push(...tt(O.Hard,s[s.length-1],!0)),R.Yt===P.Long&&s.push(...tt(O.Hard,s[s.length-1])),s.push(...tt(O.Hard,s[s.length-1],!0));const c=new V(Pt());s[s.length-1].ws=c,c._s=s[s.length-1],s.push(c);const u=new V(St(O.Hard,!0));s[s.length-1].ws=u,u._s=s[s.length-1],s.push(u),R.ts=s.length,R.Zt.X(...s);let a=R.Zt.ds;const l={x:t/2-16*~~(R.ts/2)-R.ts%2*16,y:42};for(;null!==a;)a.j=y.copy(l),l.x+=16,a=a.ws}function tt(t,s,e=!1){const i=[];i.push(new V),i.push(new V(jt(t,void 0,t===O.Hard))),i.push(new V(jt(t,void 0,t===O.Hard))),e&&i.push(new V(Rt()));const o=n(i);for(let t=0;t<o.length;t++)t!==o.length-1&&(o[t].ws=o[t+1]),0!==t?o[t]._s=o[t-1]:(s.ws=o[t],o[t]._s=s);return o}const st=()=>{zzfx(1,.1,40,.3,.3,.3,0,9.5,.45)},nt=()=>{zzfx(1,.1,475,.1,.1,7.3,.4,5.9,.9)},et=()=>{zzfx(1,.1,1e3,.2,.15,.3,3,1,0)},it=()=>{zzfx(1,.1,1e4,.2,.07,.9,.8,0,.28)};class ot extends M{constructor(t,s){super(),this.yt="",this.yt=t,this.xs=s,this.I={x:32,y:32}}get ys(){return i(...Array.from(this.P,([t,s])=>s.Gt))}ms(){const t=Array.from(this.P,([t,s])=>s);for(const s of t)R.jt.X(s),s.Lt=!1}Pt(){return this.xs&&this.xs()?this.K.Pt():(zzfx(1,.1,281,.3,.2,0,.4,31.1,.56),!1)}nt(t,s){}A(t,s){l.o(o),_("d_s",this.W.x,this.W.y,2,2),m(this.yt,this.W.x+17,this.W.y+34,{F:x.C,$:4293848814}),super.A(t,s)}}class rt extends M{constructor(t,s,n,e,i,o){super(),this.it="",this.gs="",this.It=[],this.$=4278190080,this.ps=0,this.it=t,this.It=s,this.gs=n,this.$=e,this.xs=i,this.cs=o,this.I={x:260,y:64}}X(...t){for(const s of t)s instanceof ot&&(this.ps++,s.j={x:this.I.x-37*this.ps,y:16});super.X(...t)}get St(){return this.vs.reduce((t,s)=>(t.push(...Array.from(s.P,([t,s])=>s)),t),new Array).filter(t=>t instanceof D)}get vs(){return Array.from(this.P,([t,s])=>s).filter(t=>t instanceof ot)}get ys(){return i(...Array.from(this.P,([t,s])=>s.ys))}get bs(){return Array.from(this.P,([t,s])=>s.ys).reduce((t,s)=>t&&s>0,!0)}Pt(){if(this.bs){if(this.xs&&this.xs()){this.cs();for(const t of this.St)t.Lt=!0;return!0}return zzfx(1,.1,281,.3,.2,0,.4,31.1,.56),!1}return!0}ms(){const t=Array.from(this.P,([t,s])=>s);for(const s of t)for(const[t,n]of s.P)n.Z();this.N=!0}As(t){this.st({x:-265,y:this.j.y},250,()=>{this.N=!1,t&&this.ms()},z)}Z(){this.st({x:-265,y:this.j.y},250,()=>{super.Z()},z)}nt(t,s){super.nt(t,s)}A(t,s){l.o(2566914048),_("solid",this.W.x+1,this.W.y+1,this.I.x,this.I.y),l.o(this.$),_("solid",this.W.x,this.W.y,this.I.x,this.I.y),l.o(o),m(this.it,this.W.x+5,this.W.y+3,{m:2}),_("solid",this.W.x+5,this.W.y+14,this.I.x-10,1),m(`cost: ${this.gs}`,this.W.x+5,this.W.y+16);let n=this.W.y+22;for(const t of this.It)m(t,this.W.x+5,n,{G:160}),n+=6;super.A(t,s)}}function ht(){const t=new ot("max 3",()=>t.ys<=3),s=new rt(_t,[yt],xt,r,()=>dt(s),()=>{R.ss.as.Tt-=s.ys+1,et(),s.As(!1)});return s.X(t),s}function ct(){const t=new ot(Bt,()=>t.ys>0),s=new ot(Bt,()=>s.ys>0),n=new rt(mt,[pt],gt,r,()=>dt(n),()=>{R.ss.as.Tt-=n.ys,et(),n.As(!1)});return n.X(t),n.X(s),n}function ut(){const t=new ot("max 3",()=>t.ys<=3),s=new rt(vt,[At],bt,c,()=>dt(s),()=>{R.Wt+=s.ys+1,it(),s.As(!1)});return s.X(t),s}function at(){const t=new ot("min 4",()=>t.ys>=4),s=new rt(zt,[Mt],kt,c,()=>dt(s),()=>{R.Wt+=s.ys,it(),s.As(!1)});return s.X(t),s}function lt(){const t=new ot("max 2",()=>t.ys<=2),s=new rt($t,[Gt],Ft,h,()=>dt(s),()=>{H(s.ys),st(),s.As(!1)});return s.X(t),s}function ft(){const t=new ot("max 3",()=>t.ys<=3),s=new rt(qt,[Dt],Ct,h,()=>dt(s),()=>{H(s.ys+1),st(),s.Z()});return s.X(t),s}function dt(t){return Array.from(t.P,([t,s])=>s).map(t=>t.xs()).reduce((t,s)=>t&&s,!0)}function wt(t){const s=new L([2,2,3,3,4,4]);return s.it=t?"greater wolf":"lesser wolf",s.It.push("2-4 dmg"),s.It.push("+bleed"),t&&(s.It.push("+bleed"),s.It.push("+stun")),R.Xt===O.Easy?s.Nt=s.Tt=t?e(15,20):e(10,12):s.Nt=s.Tt=t?e(20,25):e(12,15),s.X(new q([{dt:"w_0",wt:250},{dt:"w_1",wt:250}],{x:0,y:0},{x:5,y:5})),s.I={x:80,y:80},s.zs=()=>{S(s.Ut),R.ns.push("bleed"),t&&(R.ns.push("bleed"),R.ns.push("stun"));const n=y.copy(s.j);s.st(y.add(s.j,{x:-10,y:0}),100,()=>{zzfx(1,.1,468,.6,.51,.1,0,0,.79),s.st(n,50,null)},z)},s}const _t="dagger",xt="3 or lower",yt="attack for dice value + 1",mt="sword",gt="any 2 dice",pt="attack for the combined dice values",vt="buckler",bt="3 or lower",At="defend for dice value + 1",zt="shield",kt="4 or higher",Mt="defend for the dice value",$t="bandage",Ft="2 or lower",Gt="heal for dice value",qt="first aid kit",Ct="3 or lower",Dt="heal for dice value + 1 (once per encounter)",Bt="any",Lt="beware! each bleed effect will cause you to take 1 damage, regardless of your defense.",Et="beware! each stun effect will lock one of you dice on your next turn";function Ot(t=new T){return t.us(),t.it="clearing",t.rs.length=0,t.rs.push("be sure to forage food at every clearing"),t.rs.push("if you run out of food, you will take damage each time you move forward"),t.Jt=N.Empty,t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("rest",["heal 10% hp"],"any dice + 1 food",h,()=>dt(s)&&R.Qt>0&&R.Tt<R.Nt,()=>{R.Qt--,H(~~(.1*R.Nt)),st(),s.Z()});return s.X(t),s}()),t.X(function(){const t=new ot("min 2",()=>t.ys>1),s=new rt("forage",["gather food equal to half the dice value, rounded down"],"min 2",h,()=>dt(s),()=>{R.Qt+=~~(s.ys/2),nt(),s.Z()});return s.X(t),s}()),t}function Pt(){const t=new T;return t.it="camp",t.rs.push("camps are a great spot to gather food, and heal up"),t.rs.push("increasing your max hp is helpful, but make sure it doesn't leave you starving!"),t.Jt=N.Camp,t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("eat",["gain max hp equal to half the dice value, rounded up"],"any dice + 2 food",h,()=>dt(s)&&R.Qt>=2,()=>{R.Qt-=2,R.Tt+=Math.ceil(s.ys/2),R.Nt+=Math.ceil(s.ys/2),st(),s.Z()});return s.X(t),s}()),t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("sleep",["heal for dice value + 10% hp"],"any dice",h,()=>dt(s)&&R.Tt<R.Nt,()=>{H(Math.ceil(s.ys+~~(.1*R.Nt))),st(),s.Z()});return s.X(t),s}()),t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("harvest",["gather food equal to the dice value"],Bt,h,()=>dt(s),()=>{R.Qt+=s.ys,nt(),s.Z()});return s.X(t),s}()),t}function jt(t,s=new T,n=!1){switch(s.Jt=N.Fight,s.it="enemy",t){case O.Medium:e(0,5)<3?(s.as=function(){const t=new L([2,2,3,3,4,5]);return t.it="boar",t.It.push("2-4 dmg"),t.It.push("+stun"),R.Xt===O.Easy?t.Nt=t.Tt=e(10,12):t.Nt=t.Tt=e(12,15),t.X(new q([{dt:"b_0",wt:250},{dt:"b_1",wt:250}],{x:0,y:0},{x:5,y:5})),t.I={x:80,y:80},t.zs=()=>{S(t.Ut),R.ns.push("stun");const s=y.copy(t.j);t.st(y.add(t.j,{x:-10,y:0}),100,()=>{zzfx(1,.1,2,.2,.1,1.5,.4,22,.62),t.st(s,50,null)},z)},t}(),s.rs.push(Et)):(s.as=wt(n),s.rs.push(Lt));break;case O.Hard:e(0,5)<3?(s.as=wt(n),s.rs.push(Lt)):(s.as=function(){const t=new L([3,3,4,4,5,5]);return t.it="bear",t.It.push("3-5 dmg"),t.It.push("+stun"),t.It.push("+stun"),t.It.push("+bleed"),R.Xt===O.Easy?t.Nt=t.Tt=e(15,20):t.Nt=t.Tt=e(20,25),t.X(new q([{dt:"br_0",wt:250},{dt:"br_1",wt:250}],{x:0,y:0},{x:5,y:5})),t.I={x:80,y:80},t.zs=()=>{S(t.Ut),R.ns.push("stun"),R.ns.push("stun"),R.ns.push("bleed");const s=y.copy(t.j);t.st(y.add(t.j,{x:-10,y:0}),100,()=>{zzfx(.8,.1,100,.9,.1,0,3,0,0),t.st(s,50,null)},z)},t}(),s.rs.push(Et),s.rs.push(Lt));break;case O.Easy:default:s.as=function(){const t=new L([1,1,2,2,3,3]);return t.it="snake",t.It.push("1-3 dmg"),R.Xt===O.Easy?t.Nt=t.Tt=e(7,8):t.Nt=t.Tt=e(9,10),t.X(new q([{dt:"s_0",wt:250},{dt:"s_1",wt:250}],{x:0,y:0},{x:5,y:5})),t.I={x:80,y:80},t.zs=()=>{S(t.Ut);const s=y.copy(t.j);t.st(y.add(t.j,{x:-10,y:0}),100,()=>{zzfx(.1,.1,440,.7,.4,10,2,60,0),t.st(s,50,null)},z)},t}(),s.rs.push("your defense goes back to zero after each turn"),s.rs.push("after defeating an enemy, this area will turn into a clearing"),s.rs.push("any remaining dice you have can be spent at this clearing")}return s.X(s.as),s.as.j={x:s.I.x-200,y:270},s.cs=()=>{Ot(s),I()},s.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("attack",["attack for dice value"],"any dice",r,()=>dt(s),()=>{R.ss.as.Tt-=s.ys,et(),s.As(!1)});return s.X(t),s}()),s.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("defend",["defend for half the dice value, rounded up"],"any dice",c,()=>dt(s),()=>{R.Wt+=Math.ceil(s.ys/2),it(),s.As(!1)});return s.X(t),s}()),s}function Rt(t=new T){return t.us(),t.it="treasure",t.rs.length=0,t.rs.push("read item descriptions carefully, sometimes food or hp will be better for you"),t.rs.push("you can only have 6 dice total"),t.Jt=N.Loot,t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=R.os.pop(),n=s.Kt(),e=new rt("obtain",[`obtain a [${s.it}]`,"","item:",n.gs,...n.It],"any dice",u,()=>dt(e),()=>{R.es.push(s),Kt(s),nt(),R.ss.ls("abstain"),R.ss.ls("sustain"),e.Z()});return e.X(t),e}()),t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("abstain",["skip this item, but gain 3 more max hp"],"any dice",u,()=>dt(s),()=>{R.Nt+=2,R.Tt+=2,st(),R.ss.ls("obtain"),R.ss.ls("sustain"),s.Z()});return s.X(t),s}()),t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new rt("sustain",["skip this item, but gain 5 more food"],"any dice",u,()=>dt(s),()=>{R.Qt+=5,nt(),R.ss.ls("obtain"),R.ss.ls("abstain"),s.Z()});return s.X(t),s}()),t.X(function(){const t=new ot(Bt,()=>t.ys>0),s=new ot(Bt,()=>s.ys>0),n=new j("normal die",E.dice,null,"die"),e=new rt("train",["gain a [normal die]","values: 1 2 3 4 5 6"],"any 2 dice",a,()=>dt(e),()=>{R.es.push(n),new D([1,2,3,4,5,6]).Et=!0,R.jt.St.push({Ot:[1,2,3,4,5,6],$:o}),Kt(n),nt(),R.ss.ls("meditate"),R.ss.ls("take a risk"),e.Z()});return e.X(t),e.X(s),e}()),t.X(function(){const t=new ot("1 or 6",()=>1===t.ys||6===t.ys),s=new ot("1 or 6",()=>1===s.ys||6===s.ys),n=new j("risky die",E.dice,null,"die",4287138047),e=new rt("take a risk",["gain a [risky die]","values: 1 1 1 6 6 6"],"2 dice valued at 1 or 6",a,()=>dt(e),()=>{R.es.push(n),R.jt.St.push({Ot:[1,1,1,6,6,6],$:4287138047}),Kt(n),nt(),R.ss.ls("meditate"),R.ss.ls("train"),e.Z()});return e.X(t),e.X(s),e}()),t.X(function(){const t=new ot("3 or 4",()=>3===t.ys||4===t.ys),s=new ot("3 or 4",()=>3===s.ys||4===s.ys),n=new j("middle die",E.dice,null,"die",4294936712),e=new rt("meditate",["gain a [middling die]","values: 2 3 3 4 4 5"],"2 dice valued at 3 or 4",a,()=>dt(e),()=>{R.es.push(n),R.jt.St.push({Ot:[2,3,3,4,4,5],$:4294936712}),Kt(n),nt(),R.ss.ls("train"),R.ss.ls("take a risk"),e.Z()});return e.X(t),e.X(s),e}()),t.cs=()=>{},t}function St(t,s=!1){const n=jt(t,void 0,s);n.it="boss fight",n.rs.push("boss enemies are twice as strong as their regular counterparts"),n.as.It[0]=`${n.as.It[0]} + ${n.as.It[0]}`,n.Jt=N.Boss,n.as.it=`boss ${n.as.it}`,n.as.Tt=n.as.Nt=~~(2*n.as.Nt);const e=new D(n.as.St[0].Ot,o,1);return e.Lt=!0,e.j.x=-33,n.as.X(e),n.cs=()=>{s?Tt=Ht.GameOver:(Tt=Ht.Begin,Rt(n))},n}var Ht;let It,Nt,Tt,Ut,Vt;!function(t){t[t.Begin=0]="Begin",t[t.Rolling=1]="Rolling",t[t.Player=2]="Player",t[t.Enemy=3]="Enemy",t[t.Restock=4]="Restock",t[t.Victory=5]="Victory",t[t.GameOver=6]="GameOver"}(Ht||(Ht={}));const Jt=new F("Game",()=>{Ut=0,Vt=195,Tt=Ht.GameOver;const t=Jt.lt;if(document.monetization&&"started"===document.monetization.state){const t=Q();t.it="Coil Bonus Bandage",R.es.push(t),Kt(t)}t.X(R.jt),R.jt.j={x:80,y:280},t.X(new q([{dt:"g_0",wt:250},{dt:"g_1",wt:250}],{x:0,y:270},{x:5,y:5})),It=new G("forward!",t.I.x-120,t.I.y-150,100,30,t=>{R.ss&&Jt.lt.Y(R.ss),R.Zt.ds=R.Zt.ds.ws,R.ss=R.Zt.ds.ss,Jt.lt.X(R.ss),Tt=Ht.Begin,R.Qt>0?R.Qt--:(R.Tt--,R.Tt<=0&&(Tt=Ht.GameOver)),t.N=t.T=!1,Nt.N=Nt.T=!1},4279929156,4280262992,4279594551),t.X(It),Nt=new G("end turn",t.I.x-120,t.I.y-150,100,30,t=>{Tt===Ht.Player&&(Tt=Ht.Enemy),t.N=t.T=!1}),t.X(Nt),t.X(R.Zt)},()=>{},(t,s)=>{if(!R.ss&&R.Zt.ds.ws)It.N=It.T=!0,Nt.N=Nt.T=!1;else{if(Tt===Ht.GameOver)Ut>=280?($.v(),$.p("GameOver")):Ut+=4;else if(Tt===Ht.Begin)R.Wt=0,R.ns.length=0,R.ss&&R.ss.Jt!==N.Loot?I():R.ss&&R.ss.Jt===N.Loot&&R.jt.St.length>=6&&(R.ss.ls("train"),R.ss.ls("take a risk"),R.ss.ls("meditate")),Tt=Ht.Rolling;else if(Tt===Ht.Restock){for(const[t,s]of R.ss.P)s instanceof rt&&s.ms();R.Wt=0;let t=0;for(const s of R.ns)switch(s){case"stun":t++;break;case"bleed":R.Tt-=1}R.jt.Et(t),R.ns.length=0,Tt=Ht.Rolling}else Tt===Ht.Rolling&&(R.ss.as&&R.ss.as.Rt(s),R.jt.Ht(s),Tt=Ht.Player,Nt.N=Nt.T=!0);switch(R.ss.Jt){case N.Boss:case N.Fight:Tt===Ht.Player?R.ss.as&&R.ss.as.Vt&&R.Zt.ds.ws&&(Nt.N=Nt.T=!1,It.N=It.T=!0):Tt===Ht.Enemy&&(R.ss.as&&R.ss.as.zs(),Tt=R.Tt<=0?Ht.GameOver:Ht.Restock);break;case N.Loot:case N.Camp:case N.Empty:default:R.Zt.ds.ws?(It.N=It.T=!0,Nt.N=Nt.T=!1):It.N=It.T=!1}}},t=>{const s=Jt.lt;m(`food ${R.Qt}`,s.I.x-70,s.I.y-115,{F:x.C,m:2}),m(`def ${R.Wt}`,80,320,{m:2,$:4294091313}),m(`hp  ${R.Tt>0?R.Tt:0}/${R.Nt}`,80,335,{m:2,$:4281542334}),Tt===Ht.GameOver&&(l.o(function(t,s,n,e){let i=0;return(47|(i=(72|(i=(78|(i=(i|255&(Ut>255?255:Ut))<<8>>>0))<<8>>>0))<<8>>>0))>>>0}()),_("solid",0,0,800,450))});function Kt(t){Jt.lt.X(t),t.j={x:Vt,y:330},Vt+=17}const Qt=new F("GameOver",()=>{Qt.lt.X(new G("adventure again",t/2-100,s/2+100,200,40,()=>{$.v()}))},()=>{},t=>{},s=>{m("your adventure comes to an end",t/2,165,{F:x.C,m:2}),m("but it's really about the journey, isn't it?",t/2,181,{F:x.C,m:2})});window.addEventListener("load",()=>f(this,void 0,void 0,function*(){let n=0;const e=document.querySelector("#stage"),i=document.querySelector("canvas");i.width=t,i.height=s,window.addEventListener("resize",()=>{const t=window.innerWidth/i.width,s=window.innerHeight/i.height;let n=.25*~~(Math.min(t,s)/.25);n=n<1?1:n;const o=[i.width*n,i.height*n],r=[(window.innerWidth-o[0])/2,(window.innerHeight-o[1])/2],h="translate("+r[0]+"px, "+r[1]+"px) scale("+n+")";e.style.transform=h,e.style.webkitTransform=h}),l.s(i),l.u(47/255,72/255,78/255),yield function(t){return f(this,void 0,void 0,function*(){const t=[{t:"s",n:"cursor",x:0,y:10,w:16,h:16},{t:"s",n:"d_s",x:16,y:10,w:16,h:16},{t:"s",n:"d_1",x:32,y:10,w:16,h:16},{t:"s",n:"d_2",x:48,y:10,w:16,h:16},{t:"s",n:"d_3",x:64,y:10,w:16,h:16},{t:"s",n:"d_4",x:80,y:10,w:16,h:16},{t:"s",n:"d_5",x:96,y:10,w:16,h:16},{t:"s",n:"d_6",x:112,y:10,w:16,h:16},{t:"s",n:"d_l",x:128,y:10,w:16,h:16},{t:"s",n:"solid",x:1,y:0,w:1,h:1},{t:"s",n:"g_0",x:0,y:26,w:16,h:16},{t:"s",n:"g_1",x:16,y:26,w:16,h:16},{t:"s",n:"s_0",x:32,y:26,w:16,h:16},{t:"s",n:"s_1",x:48,y:26,w:16,h:16},{t:"s",n:"b_0",x:64,y:26,w:16,h:16},{t:"s",n:"b_1",x:80,y:26,w:16,h:16},{t:"s",n:"w_0",x:96,y:26,w:16,h:16},{t:"s",n:"w_1",x:112,y:26,w:16,h:16},{t:"s",n:"br_0",x:96,y:42,w:16,h:16},{t:"s",n:"br_1",x:112,y:42,w:16,h:16},{t:"s",n:"node",x:0,y:42,w:16,h:16},{t:"s",n:"gr_0",x:16,y:42,w:8,h:8},{t:"s",n:"gr_1",x:24,y:42,w:8,h:8},{t:"s",n:"gr_2",x:16,y:50,w:8,h:8},{t:"s",n:"gr_3",x:24,y:50,w:8,h:8},{t:"s",n:"tree",x:32,y:42,w:16,h:16},{t:"s",n:"buc",x:48,y:42,w:8,h:8},{t:"s",n:"sh",x:48,y:50,w:8,h:8},{t:"s",n:"dag",x:56,y:42,w:8,h:8},{t:"s",n:"sw",x:56,y:50,w:8,h:8},{t:"s",n:"heal",x:64,y:42,w:8,h:8},{t:"s",n:"die",x:72,y:42,w:8,h:8},{t:"r",n:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",".","!"],x:0,y:0,w:5,h:5},{t:"r",n:["1","2","3","4","5","6","7","8","9","0","#","[","]","-","+","/","\\","|",":","(",")","<",">",",","'",'"',"%","?"],x:0,y:5,w:5,h:5}],s=new Image;return new Promise((n,e)=>{try{s.addEventListener("load",()=>{const e=l.i(s);d.set("sheet",e);for(const n of t)if("s"===n.t)w.set(n.n,{atlas:e,w:n.w,h:n.h,u0:n.x/s.width,v0:n.y/s.height,u1:(n.x+n.w)/s.width,v1:(n.y+n.h)/s.height});else for(let t=n.x,i=0;t<s.width;t+=n.w)w.set(n.n[i],{atlas:e,w:n.w,h:n.h,u0:t/s.width,v0:n.y/s.height,u1:(t+n.w)/s.width,v1:(n.y+n.h)/s.height}),i++;n()}),s.src="sheet.png"}catch(t){e(t)}})})}(),A.O(i),$.et(C),$.et(Y),$.et(Jt),$.et(Qt),$.p(C.it),requestAnimationFrame(function e(i){const r=i-n;n=i,$.nt(r,i),l.l(),$.A(r,i),A.B&&(l.o(2854363682),_("solid",0,0,t+1,s+1),l.o(o),m("click to focus game",t/2,s/2,{F:x.C,m:4})),l.k(),l.o(o),requestAnimationFrame(e)}),window.dispatchEvent(new Event("resize"))}));</script></head><body><div id=stage><canvas></canvas></div></body></html>