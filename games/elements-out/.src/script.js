function getClick(a,b){return function(){update(a,b)}}function updateCell(a,b){elAr[a]&&elAr[a][b]&&(ar[a][b]+=1,ar[a][b]%=iters,elAr[a][b].style.setProperty("background-color",colors[ar[a][b]]))}function update(a,b){updateCell(a,b),updateCell(a+1,b),updateCell(a-1,b),updateCell(a,b+1),updateCell(a,b-1);for(var c=!0,d=0;d<ar.length;++d)for(var e=0;e<ar[d].length;++e)ar[d][e]&&(c=!1);c&&(curr===last&&(++last,localStorage.last=last),++curr,impLvl(levels[curr%levels.length]))}function impLvl(a){for(var b=a.split("."),c=1;c<b.length;++c)b[c]=parseInt(b[c]);var d=b.splice(0,4);d.push(b);var e=d[0],f=d[1],g=d[2],h=d[4];if(!(e&&f&&g&&h))return out.textContent="invalid level!",void 0;for(iters=d[3],ar=[],elAr=[];t.childNodes.length>0;)t.removeChild(t.childNodes[0]);for(var i=0;g>i;++i){var j=document.createElement("div");t.appendChild(j),ar.push([]),elAr.push([]);for(var k=0;f>k;++k){var l=document.createElement("cell");l.addEventListener("click",getClick(i,k)),j.appendChild(l),ar[i].push(0),elAr[i].push(l)}}for(var c=0;c<h.length;c+=3)for(var m=0;m<h[c+2];++m)update(h[c],h[c+1]);var n=containW/f;t.style.setProperty("height",n*g+"px"),out.textContent=e}function genRand(a,b,c,d,e){for(var f=[a,b,c,d,[]],g=0;e>g;++g)f[4].push(0|Math.random()*b,0|Math.random()*c,1);f[4]=f[4].join(".");return f.join(".")}function ask(a,b){for(var c=document.createElement("asker"),d=0;d<a.length;++d){var e=document.createElement("p");e.innerHTML=a[d]+"<br><input id=asker"+d+" class=question>",c.appendChild(e)}var e=document.createElement("p");e.innerHTML="<input type=button id=submit value=SUBMIT>",c.appendChild(e),document.body.appendChild(c),submit.addEventListener("click",function(){for(var d=[],e=0;e<a.length;++e)d.push(document.getElementById("asker"+e).value);b(d),document.body.removeChild(c)})}var colors=["white","#0080AA","#A0AA00","#C8C8FA","#F03232"],levels=["click in the center.5.5.2.2.2.1","requires clicking 2 times!.5.5.2.1.1.1.2.2.1","yep, multiple colors.5.5.3.1.1.2.2.2.1","complete color wheel (from now on).5.5.4.0.0.1.0.1.1.1.0.1.2.2.1.3.3.1",genRand("now a randomly computed one",5,5,5,5),"pretty regular.5.5.5.0.1.1.0.3.1.1.1.1.1.3.1.2.0.1.2.1.1.2.3.1.2.4.1.3.1.1.3.3.1.4.1.1.4.3.1","grid can be any size I want.6.6.5.0.3.1.1.1.1.2.4.2.3.2.1.3.3.1.4.5.1.5.0.1.5.3.1","even non-square!.7.3.5.0.1.1.0.2.1.0.5.1.1.1.1.1.5.1.1.6.1.2.0.1.2.2.1.2.4.2.2.5.1","so beware.10.1.5.0.0.2.0.2.1.0.3.2.0.4.1.0.6.4.0.8.1.0.9.2",genRand("randomly generated 3x3 with 8 clicks!",2,2,5,8),"there are as many levels as twice the minimum amount of clicks to complete this level.6.6.5.0.0.1.0.3.1.1.1.1.1.3.1.2.2.1.2.4.1.3.1.1.4.1.1.4.2.1.4.4.1.5.0.1","if you wondered, that needed minimum 10 clicks","starting to learn.6.6.5.0.3.1.1.2.1.1.4.1.2.1.1.3.0.1.3.1.1.3.3.1.3.4.1.4.1.1.4.2.1.4.4.1","have fun.5.5.5.0.2.1.0.4.1.1.1.1.1.3.1.2.0.1.2.2.1.3.2.1.3.4.1.4.1.1.4.3.1","don't screw up!.10.10.5.0.0.1.0.3.1.0.7.1.1.5.1.2.1.1.2.8.1.3.3.1.3.6.1.4.0.1.5.4.1.5.7.1.5.9.1.6.1.1.6.6.2.7.3.1.7.5.1.7.8.1.8.0.1.8.4.1.8.5.1.9.2.1.9.4.1.9.7.1","you must have lost a lot on time on this awesome game.12.4.5.0.2.1.0.3.1.0.5.1.0.7.1.0.9.1.1.0.1.1.1.1.1.2.1.1.3.1.1.4.1.1.5.1.1.6.1.1.7.1.1.8.1.1.9.1.1.10.1.1.11.1.2.2.1.2.11.1.3.0.1.3.1.1.3.2.1.3.3.1.3.4.2.3.5.1.3.6.1.3.7.2.3.8.1.3.9.1.3.10.1.3.11.1",genRand("Almost there! random one again!",10,10,5,50),"final level!!!.5.5.3.1.1.0.1.1.0.2.1.2.2.1.2.1.1.1.1.1.0.0.1.1.0.1.3.0.1.3.2.1.2.1.1.1.1.1.1.3.1.2.3.1.2.2.1.2.2.1.0.4.1.0.4.1.2.4.1.3.4.1.3.3.1.4.3.1.3.1.1.3.1.1.4.1.1.4.1.1.2.3.1.2.2.1.2.2.1.3.1.1.3.1.1.2.0.1.1.0.1.1.1.1.1.2.1.2.2.1.2.4.1.3.3.1.4.1.1.4.0.1.2.2.1.2.2.1.4.3.1.1.1.1.2.3.1.2.2.1.3.0.1.1.0.1.0.0.1.0.2.1.0.3.1.1.3.1.1.1.1.2.0.1.3.0.1.3.1.1.2.1.1.2.0.1.2.1.1.1.3.1.2.2.1.2.3.1.3.3.1.3.3.1.4.3.1.4.4.1.3.4.1.4.2.1.4.2.1.4.1.1.3.0.1.3.1.1.3.1.1.2.1.1.5",genRand("just kidding, this is actually it",40,30,5,100)],ar=[],elAr=[],containW=500;t.style.setProperty("width",containW+"px");for(var iters=0,i=0;i<colors.length;++i)colorsDisplay.childNodes[i].style.setProperty("background-color",colors[i]);var last=parseInt(localStorage.last)||0,curr=last;reset.addEventListener("click",function(){impLvl(levels[curr])}),select.addEventListener("click",function(){ask(["level index? 0-"+last],function(a){curr=parseInt(a[0]),last>=curr?impLvl(levels[curr]):out.textContent="you did not reach that level yet"})}),importLevel.addEventListener("click",function(){ask(["Insert level string"],function(a){impLvl(a[0])})});var hash=window.location.hash.split("");hash.length?(hash.shift(),impLvl(hash.join(""))):impLvl(levels[curr]);