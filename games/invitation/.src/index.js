const CONFIG={width:750,height:700,skin:"#ffebee",pink:"#fa22d8",green:"#69F0AE",green_light:"#B9F6CA",green_signal:"#76FF03",blue:"#30defc",tears:"#0091EA",dark:"#424242",darkest:"#212121"};let CANVAS,CONTAINER,CTX,LAST_FRAME,COUNTER_FLICKER_THREE,COUNTER_FLICKER_TWO,SCREEN,MENU,GAME,LAB,INFOBOX,PLAYER,ENDING;class Menu{constructor(){this.render()}render(){let e,C,t;CTX.fillStyle=CONFIG.pink,CTX.strokeStyle="white",CTX.font="bold 4rem sans-serif",e="INVITATION",C=CANVAS.width/2-CTX.measureText(e).width/2,t=CANVAS.width/2+CTX.measureText(e).width/2,CTX.lineWidth=10,CTX.strokeText(e,C,120),CTX.fillText(e,C,120),CTX.lineWidth=15,CTX.beginPath(),CTX.moveTo(80,50),CTX.lineTo(95,75),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(110,50),CTX.lineTo(120,70),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.green,CTX.beginPath(),CTX.arc(110,95,30,0,2*Math.PI),CTX.stroke(),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(80,50,8,0,2*Math.PI),CTX.stroke(),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(110,50,8,0,2*Math.PI),CTX.stroke(),CTX.fill(),CTX.closePath(),CTX.strokeStyle=CONFIG.green,CTX.lineWidth=5,CTX.beginPath(),CTX.moveTo(80,50),CTX.lineTo(95,75),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(110,50),CTX.lineTo(120,70),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.darkest,CTX.beginPath(),CTX.arc(100,100,4,0,2*Math.PI),CTX.fill(),CTX.beginPath(),CTX.arc(130,100,4,0,2*Math.PI),CTX.fill(),CTX.strokeStyle=CONFIG.darkest,CTX.lineWidth=3,CTX.beginPath(),CTX.moveTo(110,105),CTX.bezierCurveTo(110,105,120,110,125,105),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.blue,CTX.font="1.5rem sans-serif",e="⇦   move left",CTX.fillText(e,CANVAS.width/2-CTX.measureText(e).width/2,CANVAS.height/3+125),e="⇨   move right",CTX.fillText(e,CANVAS.width/2-CTX.measureText(e).width/2,CANVAS.height/3+165),e="E   use",CTX.fillText(e,CANVAS.width/2-CTX.measureText(e).width/2,CANVAS.height/3+205),CTX.fillStyle="white",CTX.font="bold 1rem sans-serif",e="Press ENTER to start",C=CANVAS.width/2-CTX.measureText(e).width/2,CTX.fillText(e,C,CANVAS.height-50)}}class Ending{constructor(e){this.ending=e,this.render()}render(){let e,C;if(SCREEN="ending",clearCanvas(),CTX.fillStyle=CONFIG.dark,CTX.fillRect(0,0,CANVAS.width,CANVAS.height),CTX.fillStyle=CONFIG.pink,CTX.font="bold 2rem sans-serif",this.ending){e="Mission Successfully Completed",C=CANVAS.width/2-CTX.measureText(e).width/2,CTX.fillText(e,C,94);let t=80,T=100;CTX.save(),CTX.scale(2,2),CTX.fillStyle=CONFIG.skin,CTX.beginPath(),CTX.moveTo(85+t,90+T),CTX.bezierCurveTo(85+t,90+T,90+t,80+T,95+t,90+T),CTX.bezierCurveTo(95+t,90+T,110+t,105+T,105+t,120+T),CTX.bezierCurveTo(105+t,120+T,90+t,105+T,85+t,90+T),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.blue,CTX.beginPath(),CTX.moveTo(85+t,90+T),CTX.bezierCurveTo(85+t,90+T,90+t,80+T,95+t,90+T),CTX.lineTo(85+t,100+T),CTX.bezierCurveTo(85+t,100+T,80+t,95+T,85+t,90+T),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.darkest,CTX.beginPath(),CTX.arc(70+t,55+T,30,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.fillRect(40+t,55+T,60,30),CTX.fillStyle=CONFIG.blue,CTX.beginPath(),CTX.moveTo(55+t,90+T),CTX.bezierCurveTo(55+t,90+T,75+t,70+T,90+t,90+T),CTX.bezierCurveTo(90+t,90+T,100+t,120+T,90+t,130+T),CTX.lineTo(55+t,130+T),CTX.bezierCurveTo(55+t,130+T,45+t,120+T,55+t,90+T),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.skin,CTX.beginPath(),CTX.arc(70+t,55+T,30,0,Math.PI),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.darkest,CTX.beginPath(),CTX.moveTo(40+t,55+T),CTX.lineTo(50+t,55+T),CTX.lineTo(50+t,70+T),CTX.bezierCurveTo(50+t,70+T,45+t,55+T,40+t,55+T),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(60+t,60+T,4,0,2*Math.PI),CTX.fill(),CTX.beginPath(),CTX.arc(90+t,60+T,4,0,2*Math.PI),CTX.fill(),CTX.strokeStyle=CONFIG.darkest,CTX.lineWidth=3,CTX.beginPath(),CTX.moveTo(70+t,65+T),CTX.bezierCurveTo(70+t,65+T,80+t,70+T,85+t,65+T),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.skin,CTX.beginPath(),CTX.moveTo(55+t,90+T),CTX.bezierCurveTo(55+t,90+T,60+t,80+T,65+t,90+T),CTX.bezierCurveTo(65+t,90+T,70+t,115+T,60+t,125+T),CTX.bezierCurveTo(60+t,125+T,50+t,115+T,55+t,90+T),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.blue,CTX.beginPath(),CTX.moveTo(55+t,90+T),CTX.bezierCurveTo(55+t,90+T,60+t,80+T,65+t,90+T),CTX.bezierCurveTo(65+t,90+T,70+t,95+T,60+t,100+T),CTX.lineTo(55+t,100+T),CTX.bezierCurveTo(55+t,100+T,50+t,95+T,55+t,90+T),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.green_light,CTX.beginPath(),CTX.moveTo(125+t,90+T),CTX.bezierCurveTo(125+t,90+T,120+t,80+T,115+t,90+T),CTX.bezierCurveTo(115+t,90+T,100+t,105+T,105+t,120+T),CTX.bezierCurveTo(105+t,120+T,125+t,105+T,125+t,90+T),CTX.fill(),CTX.closePath(),CTX.fillStyle=CONFIG.green,CTX.beginPath(),CTX.moveTo(155+t,90+T),CTX.bezierCurveTo(155+t,90+T,135+t,70+T,120+t,90+T),CTX.bezierCurveTo(120+t,90+T,110+t,110+T,120+t,130+T),CTX.lineTo(155+t,130+T),CTX.bezierCurveTo(155+t,130+T,165+t,110+T,155+t,90+T),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(140+t,10+T,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(170+t,10+T,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(140+t,55+T,30,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.strokeStyle=CONFIG.green,CTX.lineWidth=5,CTX.beginPath(),CTX.moveTo(140+t,10+T),CTX.lineTo(130+t,30+T),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(170+t,10+T),CTX.lineTo(155+t,35+T),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.darkest,CTX.beginPath(),CTX.arc(150+t,60+T,4,0,2*Math.PI),CTX.fill(),CTX.beginPath(),CTX.arc(120+t,60+T,4,0,2*Math.PI),CTX.fill(),CTX.strokeStyle=CONFIG.darkest,CTX.lineWidth=3,CTX.beginPath(),CTX.moveTo(125+t,65+T),CTX.bezierCurveTo(125+t,65+T,130+t,70+T,140+t,65+T),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.green_light,CTX.beginPath(),CTX.moveTo(155+t,90+T),CTX.bezierCurveTo(155+t,90+T,150+t,80+T,145+t,90+T),CTX.bezierCurveTo(145+t,90+T,140+t,115+T,150+t,125+T),CTX.bezierCurveTo(150+t,125+T,160+t,115+T,155+t,90+T),CTX.fill(),CTX.closePath(),CTX.restore()}else{e="Mission failed",C=CANVAS.width/2-CTX.measureText(e).width/2,CTX.fillText(e,C,94);let t=(CANVAS.width/2-78)/2,T=70;CTX.save(),CTX.scale(2,2),CTX.strokeStyle=CONFIG.green,CTX.fillStyle=CONFIG.green,CTX.beginPath(),CTX.arc(10+t,80+T,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(70+t,80+T,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(40+t,55+T,30,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.lineWidth=5,CTX.beginPath(),CTX.moveTo(10+t,80+T),CTX.lineTo(25+t,35+T),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(70+t,80+T),CTX.lineTo(50+t,30+T),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.darkest,CTX.beginPath(),CTX.arc(25+t,60+T,4,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(55+t,60+T,4,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.strokeStyle=CONFIG.tears,CTX.beginPath(),CTX.moveTo(25+t,65+T),CTX.lineTo(25+t,70+T),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(55+t,65+T),CTX.lineTo(55+t,70+T),CTX.stroke(),CTX.closePath(),CTX.strokeStyle=CONFIG.darkest,CTX.lineWidth=3,CTX.beginPath(),CTX.moveTo(32.5+t,70+T),CTX.bezierCurveTo(32.5+t,70+T,40+t,50+T,47.5+t,70+T),CTX.stroke(),CTX.closePath(),CTX.fillStyle=CONFIG.green,CTX.beginPath(),CTX.moveTo(20+t,80+T),CTX.bezierCurveTo(20+t,80+T,40+t,70+T,60+t,80+T),CTX.bezierCurveTo(60+t,80+T,70+t,100+T,60+t,110+T),CTX.lineTo(20+t,110+T),CTX.bezierCurveTo(20+t,110+T,10+t,100+T,20+t,80+T),CTX.fill(),CTX.fillStyle=CONFIG.green_light,CTX.beginPath(),CTX.moveTo(22+t,80+T),CTX.bezierCurveTo(22+t,80+T,25+t,70+T,30+t,80+T),CTX.bezierCurveTo(30+t,80+T,35+t,90+T,30+t,100+T),CTX.bezierCurveTo(30+t,100+T,25+t,110+T,22+t,100+T),CTX.bezierCurveTo(22+t,100+T,19+t,90+T,22+t,80+T),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(52+t,80+T),CTX.bezierCurveTo(52+t,80+T,55+t,70+T,60+t,80+T),CTX.bezierCurveTo(60+t,80+T,65+t,90+T,60+t,100+T),CTX.bezierCurveTo(60+t,100+T,55+t,110+T,52+t,100+T),CTX.bezierCurveTo(52+t,100+T,49+t,90+T,52+t,80+T),CTX.fill(),CTX.closePath(),CTX.restore()}CTX.font="bold 1rem sans-serif",e="THANK YOU FOR PLAYING",C=CANVAS.width/2-CTX.measureText(e).width/2,CTX.fillText(e,C,CANVAS.height-100),CTX.fillStyle="white",e="Press ENTER to return to the menu",C=CANVAS.width/2-CTX.measureText(e).width/2,CTX.fillText(e,C,CANVAS.height-50)}}class Lab{constructor(){this.starColors=["white","#F4FF81","#80D8FF"],this.universe=[],this.createUniverse(),this.radarMinX=CANVAS.width/4+5,this.radarMaxX=CANVAS.width-CANVAS.width/4-5,this.radarMinY=55,this.radarMaxYVertical=245,this.radarMaxYHorizontal=195,this.radarVerticalStart={x:this.radarMinX,y:this.radarMinY},this.radarVerticalStop={x:this.radarMinX,y:this.radarMaxYVertical},this.radarHorizontalStart={x:this.radarMinX,y:this.radarMinY},this.radarHorizontalStop={x:this.radarMaxX,y:this.radarMinY},this.radarMoved=!1}render(){CTX.fillStyle="#757575",CTX.fillRect(0,0,CANVAS.width,CANVAS.height),CTX.fillStyle=CONFIG.darkest,CTX.fillRect(CANVAS.width/4,50,CANVAS.width/2,200),CTX.fillStyle=CONFIG.tears,CTX.fillRect(CANVAS.width/2-25,CANVAS.height-150,50,150),CTX.fillStyle="#424242",CTX.fillRect(0,0,10,CANVAS.height-105),CTX.fillRect(CANVAS.width-10,0,10,CANVAS.height-105),CTX.fillStyle="#212121",CTX.fillRect(0,CANVAS.height-105,CANVAS.width,CANVAS.height-100),this.renderNavigationSystem(),this.animateRadar()}createUniverse(){for(let e=0;e<100;e++){let e=Math.floor(Math.random()*this.starColors.length),C=3*Math.random()+1,t=Math.random()*(CANVAS.width-CANVAS.width/4-6-(CANVAS.width/4+6))+(CANVAS.width/4+6),T=188*Math.random()+56,i={c:this.starColors[e],x:t,y:T,r:C};this.universe.push(i)}}renderNavigationSystem(){switch(GAME.level){case 1:for(let e=0;e<this.universe.length;e++)CTX.fillStyle=this.universe[e].c,CTX.beginPath(),CTX.arc(this.universe[e].x,this.universe[e].y,this.universe[e].r,0,2*Math.PI),CTX.fill(),CTX.closePath();break;case 2:for(let e=0;e<this.universe.length;e++)CTX.fillStyle=this.universe[e].c,CTX.beginPath(),CTX.arc(this.universe[e].x,this.universe[e].y,this.universe[e].r,0,2*Math.PI),CTX.fill(),CTX.closePath();let T=CANVAS.width/2,i=150;CTX.fillStyle="white";let r=0,X=0;CTX.beginPath(),CTX.moveTo(T,i);for(var e=0;e<150;e++){r+=.6,X+=1*Math.PI/45;let e=T+r*Math.cos(X),C=i+r*Math.sin(X);CTX.arc(e,C,1,0,2*Math.PI),CTX.fill(),CTX.closePath()}r=0,X=0,CTX.beginPath(),CTX.moveTo(T,i);for(e=0;e<150;e++){r+=.7,X+=1*Math.PI/50;var C=T+r*Math.cos(X),t=i+r*Math.sin(X);CTX.arc(C,t,1,0,2*Math.PI),CTX.fill(),CTX.closePath()}r=0,X=0,CTX.beginPath(),CTX.moveTo(T,i);for(e=0;e<150;e++){r+=.5,X+=1*Math.PI/45;C=T+r*Math.cos(X),t=i+r*Math.sin(X);CTX.arc(C,t,1,0,2*Math.PI),CTX.fill(),CTX.closePath()}break;case 3:let l=this.radarMinX-5,a=this.radarMinY-5;CTX.fillStyle="orange",CTX.beginPath(),CTX.moveTo(l,a),CTX.lineTo(l+80,a),CTX.bezierCurveTo(l+80,a,l+40,a+50,l,a+80),CTX.lineTo(l,a),CTX.fill(),CTX.closePath(),CTX.fillStyle="#607D8B",CTX.beginPath(),CTX.arc(l+90,a+30,25,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.fillStyle="#FFD740",CTX.beginPath(),CTX.arc(l+70,a+140,30,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.fillStyle="#64B5F6",CTX.beginPath(),CTX.arc(l+220,a+110,30,0,2*Math.PI),CTX.fill(),CTX.closePath();break;case 4:CTX.fillStyle="#64B5F6",CTX.beginPath(),CTX.arc(CANVAS.width/2,150,60,0,2*Math.PI),CTX.fill(),CTX.closePath();break;default:CTX.fillStyle=CONFIG.darkest,CTX.fillRect(CANVAS.width/4,50,CANVAS.width/2,200)}}animateRadar(){if(CTX.strokeStyle="green",CTX.lineWidth=1,CTX.beginPath(),CTX.moveTo(this.radarVerticalStart.x,this.radarVerticalStart.y),CTX.lineTo(this.radarVerticalStop.x,this.radarVerticalStop.y),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(this.radarHorizontalStart.x,this.radarHorizontalStart.y),CTX.lineTo(this.radarHorizontalStop.x,this.radarHorizontalStop.y),CTX.stroke(),CTX.closePath(),1===COUNTER_FLICKER_THREE&&(this.radarMoved=!1),3===COUNTER_FLICKER_THREE&&!this.radarMoved){let e=Math.ceil(this.radarMinX),C=Math.floor(this.radarMaxX),t=Math.floor(Math.random()*(C-e+1)+e);this.radarVerticalStart.x=t,this.radarVerticalStop.x=t;let T=Math.ceil(this.radarMinY),i=Math.floor(this.radarMaxYHorizontal),r=Math.floor(Math.random()*(i-T+1)+T);this.radarHorizontalStart.y=r,this.radarHorizontalStop.y=r,this.radarMoved=!0}}}class Infobox{constructor(){this.signals=["","terrible","bad","weak","good","perfect"],this.signalIndex=1,this.render()}render(){CTX.fillStyle=CONFIG.darkest,CTX.strokeStyle=CONFIG.green_signal,CTX.fillRect(0,CANVAS.height-100,CANVAS.width,100);let e=CANVAS.height-55,C=!0;switch(CTX.lineWidth=1,CTX.setLineDash([10,10]),this.signals[this.signalIndex]){case"terrible":COUNTER_FLICKER_TWO&&(CTX.beginPath(),CTX.moveTo(0,CANVAS.height-50),CTX.lineTo(CANVAS.width,CANVAS.height-50),CTX.stroke(),CTX.closePath(),CTX.setLineDash([]));break;case"bad":if(CTX.beginPath(),CTX.moveTo(0,CANVAS.height-55),COUNTER_FLICKER_TWO){for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e-10,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e+10,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}else{for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e+10,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e-10,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}break;case"weak":if(CTX.beginPath(),CTX.moveTo(0,CANVAS.height-55),COUNTER_FLICKER_TWO){for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e-20,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e+20,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}else{for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e+20,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e-20,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}break;case"good":if(CTX.beginPath(),CTX.moveTo(0,CANVAS.height-55),COUNTER_FLICKER_TWO){for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e-30,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e+30,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}else{for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e+30,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e-30,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}break;case"perfect":if(CTX.beginPath(),CTX.moveTo(0,CANVAS.height-55),COUNTER_FLICKER_TWO){for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e-40,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e+40,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}else{for(let t=0;t<=CANVAS.width;t+=CANVAS.width/10)C?(CTX.bezierCurveTo(t,e,t+37.5,e+40,t+75,e),C=!1):(CTX.bezierCurveTo(t,e,t+37.5,e-40,t+75,e),C=!0);CTX.stroke(),CTX.closePath()}}CTX.setLineDash([0,0])}}class Player{constructor(){this.lives=3,this.width=70,this.height=153,this.x=0,this.y=CANVAS.height-105-this.height,this.minX=0,this.maxX=CANVAS.width-70,this.minY=CANVAS.height-105-this.height,this.maxY=CANVAS.height-this.height,this.direction=1}render(){this.drawAlien(this.direction,this.x,this.y)}moveForward(e){this.x+e<this.maxX?this.x+=e:this.x=this.maxX}moveBackwards(e){this.x-e>this.minX?this.x-=e:this.x=this.minX}drawAlien(e,C,t){e?(CTX.fillStyle="#B9F6CA",CTX.beginPath(),CTX.moveTo(55+C,90+t),CTX.bezierCurveTo(55+C,90+t,60+C,80+t,65+C,90+t),CTX.bezierCurveTo(65+C,90+t,70+C,115+t,60+C,125+t),CTX.bezierCurveTo(0+C,125+t,50+C,115+t,55+C,90+t),CTX.fill(),CTX.closePath(),CTX.fillStyle="#69F0AE",CTX.beginPath(),CTX.moveTo(25+C,90+t),CTX.bezierCurveTo(25+C,90+t,45+C,70+t,60+C,90+t),CTX.bezierCurveTo(60+C,90+t,70+C,120+t,60+C,150+t),CTX.bezierCurveTo(60+C,150+t,55+C,155+t,50+C,150+t),CTX.bezierCurveTo(50+C,150+t,45+C,100+t,40+C,150+t),CTX.bezierCurveTo(40+C,150+t,35+C,155+t,30+C,150+t),CTX.bezierCurveTo(30+C,150+t,15+C,120+t,25+C,90+t),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(10+C,10+t,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(40+C,10+t,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(40+C,55+t,30,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.strokeStyle="#69F0AE",CTX.lineWidth=5,CTX.beginPath(),CTX.moveTo(10+C,10+t),CTX.lineTo(25+C,35+t),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(40+C,10+t),CTX.lineTo(50+C,30+t),CTX.stroke(),CTX.closePath(),CTX.fillStyle="#212121",CTX.beginPath(),CTX.arc(30+C,60+t,4,0,2*Math.PI),CTX.fill(),CTX.beginPath(),CTX.arc(60+C,60+t,4,0,2*Math.PI),CTX.fill(),CTX.strokeStyle="#212121",CTX.lineWidth=3,CTX.beginPath(),CTX.moveTo(40+C,65+t),CTX.bezierCurveTo(40+C,65+t,50+C,70+t,55+C,65+t),CTX.stroke(),CTX.closePath(),CTX.fillStyle="#B9F6CA",CTX.beginPath(),CTX.moveTo(25+C,90+t),CTX.bezierCurveTo(25+C,90+t,30+C,80+t,35+C,90+t),CTX.bezierCurveTo(35+C,90+t,40+C,115+t,30+C,125+t),CTX.bezierCurveTo(30+C,125+t,20+C,115+t,25+C,90+t),CTX.fill(),CTX.closePath()):(CTX.fillStyle="#B9F6CA",CTX.beginPath(),CTX.moveTo(15+C,90+t),CTX.bezierCurveTo(15+C,90+t,10+C,80+t,5+C,90+t),CTX.bezierCurveTo(5+C,90+t,0+C,115+t,10+C,125+t),CTX.bezierCurveTo(10+C,125+t,20+C,115+t,15+C,90+t),CTX.fill(),CTX.closePath(),CTX.fillStyle="#69F0AE",CTX.beginPath(),CTX.moveTo(45+C,90+t),CTX.bezierCurveTo(45+C,90+t,25+C,70+t,10+C,90+t),CTX.bezierCurveTo(10+C,90+t,0+C,120+t,10+C,150+t),CTX.bezierCurveTo(10+C,150+t,15+C,155+t,20+C,150+t),CTX.bezierCurveTo(20+C,150+t,25+C,100+t,30+C,150+t),CTX.bezierCurveTo(30+C,150+t,35+C,155+t,40+C,150+t),CTX.bezierCurveTo(40+C,150+t,55+C,120+t,45+C,90+t),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(30+C,10+t,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(60+C,10+t,8,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.beginPath(),CTX.arc(30+C,55+t,30,0,2*Math.PI),CTX.fill(),CTX.closePath(),CTX.strokeStyle="#69F0AE",CTX.lineWidth=5,CTX.beginPath(),CTX.moveTo(30+C,10+t),CTX.lineTo(20+C,30+t),CTX.stroke(),CTX.closePath(),CTX.beginPath(),CTX.moveTo(60+C,10+t),CTX.lineTo(45+C,35+t),CTX.stroke(),CTX.closePath(),CTX.fillStyle="#212121",CTX.beginPath(),CTX.arc(40+C,60+t,4,0,2*Math.PI),CTX.fill(),CTX.beginPath(),CTX.arc(10+C,60+t,4,0,2*Math.PI),CTX.fill(),CTX.strokeStyle="#212121",CTX.lineWidth=3,CTX.beginPath(),CTX.moveTo(15+C,65+t),CTX.bezierCurveTo(15+C,65+t,20+C,70+t,30+C,65+t),CTX.stroke(),CTX.closePath(),CTX.fillStyle="#B9F6CA",CTX.beginPath(),CTX.moveTo(45+C,90+t),CTX.bezierCurveTo(45+C,90+t,40+C,80+t,35+C,90+t),CTX.bezierCurveTo(35+C,90+t,30+C,115+t,40+C,125+t),CTX.bezierCurveTo(40+C,125+t,50+C,115+t,45+C,90+t),CTX.fill(),CTX.closePath())}toggleUse(e){e&&(INFOBOX.signalIndex<INFOBOX.signals.length&&INFOBOX.signalIndex++,GAME.level<4&&GAME.level++)}}class Game{constructor(){this.level=1,LAB=new Lab,INFOBOX=new Infobox,this.initalizeAnimationInterval()}render(){clearCanvas(),LAB.render(),INFOBOX.render(),PLAYER.render(),4===this.level&&setTimeout((()=>{ENDING=new Ending(!0)}),1e3)}initalizeAnimationInterval(){this.animationInterval=setInterval((()=>{this.startFlickerThree(),this.startFlickerTwo()}),500)}destroyAnimationInterval(){clearInterval(this.animationInterval)}startFlickerThree(){COUNTER_FLICKER_THREE<3?COUNTER_FLICKER_THREE++:COUNTER_FLICKER_THREE=1}startFlickerTwo(){COUNTER_FLICKER_TWO=!COUNTER_FLICKER_TWO}}onload=()=>{CONTAINER=document.getElementById("con"),CANVAS=document.getElementById("can"),CANVAS.width=CONFIG.width,CANVAS.height=CONFIG.height,CTX=CANVAS.getContext("2d"),document.addEventListener("keyup",(e=>{let C=e.key;"menu"==SCREEN&&"Enter"==C&&(SCREEN="game",GAME=new Game),"game"==SCREEN&&("e"!=C&&"E"!=C||PLAYER.toggleUse(!1)),"ending"==SCREEN&&"Enter"==C&&resetWorld()}),!1),document.addEventListener("keydown",(e=>{let C=e.key;"game"==SCREEN&&("e"!=C&&"E"!=C||PLAYER.toggleUse(!0),"ArrowRight"==C&&(PLAYER.direction?PLAYER.moveForward(15):(PLAYER.direction=1,e.repeat&&PLAYER.moveForward(15))),"ArrowLeft"==C&&(PLAYER.direction?(PLAYER.direction=0,e.repeat&&PLAYER.moveBackwards(15)):PLAYER.moveBackwards(15)))}),!1),resetWorld(),animationFrame()},clearCanvas=()=>{CTX.clearRect(0,0,CANVAS.width,CANVAS.height)},resetWorld=()=>{clearCanvas(),PLAYER=new Player,MENU=new Menu,GAME&&GAME.destroyAnimationInterval(),SCREEN="menu"},animationFrame=()=>{"game"===SCREEN&&GAME.render(),requestAnimationFrame(animationFrame)};