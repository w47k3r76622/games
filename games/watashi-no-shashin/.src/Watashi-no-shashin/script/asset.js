!function(){function t(t,i,s,h,e,n,r){this.enabled=!0,this.type=Const.actors.player,this.dx=0,this.dy=0,this.scale=4,this.rotation=0,this.max=3,this.accel=9,this.x=t,this.y=i,this.width=s,this.height=h,this.defaultHitBox=r,this.touching={l:!1,r:!1,t:!1,b:!1},this.anims=e,this.currentAnim=n,this.frame=0,this.frameNum=0,this.frameRate=16,this.sprite=new Sprite,this.sprite.Init({src:this.currentAnim,x:this.x,y:this.y,scale:this.scale}),this.mob,this.strength=0}t.prototype={score:function(){return this.mob.social},stop:function(){this.enabled=this.mob.enabled=!1},start:function(t,i){this.x=t,this.y=i,this.mob.reset(),this.enabled=!0},txt:function(){this.mob.enable(this.strength)},logic:function(t){var i=this.accel*t,s=Const.game.friction*t;this.mob.enabled||((!this.touching.t&&input.isDown("UP")||input.isDown("W"))&&(this.dy-=this.dy>-this.max?i:0,this.currentAnim=this.anims.up,this.nextanim()),(!this.touching.b&&input.isDown("DOWN")||input.isDown("S"))&&(this.dy+=this.dy<this.max?i:0,this.currentAnim=this.anims.down,this.nextanim()),!this.touching.l&&input.isDown("LEFT")||input.isDown("A")?(this.dx-=this.dx>-this.max?i:0,this.nextanim()):(!this.touching.r&&input.isDown("RIGHT")||input.isDown("D"))&&(this.dx+=this.dx<this.max?i:0,this.nextanim())),0<this.dx&&(this.dx=this.dx-s<0?0:this.dx-s),this.dx<0&&(this.dx=0<this.dx+s?0:this.dx+s),0<this.dy&&(this.dy=this.dy-s<0?0:this.dy-s),this.dy<0&&(this.dy=0<this.dy+s?0:this.dy+s)},nextanim:function(){++this.frameNum>this.frameRate&&(this.frameNum=0,this.frame=1-this.frame)},move:function(){this.x+=this.dx,this.y+=this.dy},update:function(t,i){this.move(),this.sprite.Update(t,{x:this.x-i.x,y:this.y-i.y,frame:this.frame,src:this.currentAnim}),this.mob.online=0<this.strength},render:function(t){this.sprite.Render()},hitBox:function(){return this.defaultHitBox},sideBox:function(){var t=this.hitBox();return{l:t.l-1,r:t.r+1,t:t.t-1,b:t.b+1}}},window.Player=t}(),function(){function t(t,i,s,h,e,n,r){this.bounds={wt:0,ht:0},this.enabled=!0,this.type=Const.actors.shopr,this.visible=!1,this.scale=4,this.rotation=0,this.max=0,this.accel=9,this.wifi,this.player,this.altState,this.target,this.chasing,this.timers={wait:0,walk:0},this.anims=e,this.frame=0,this.frameNum=0,this.frameRate=32,this.x=t,this.y=i,this.dx=0,this.dy=0,this.width=s,this.height=h,this.defaultHitBox=r,this.touching={l:!1,r:!1,t:!1,b:!1},this.currentAnim=n,this.sprite=new Sprite,this.sprite.Init({src:this.currentAnim,x:this.x,y:this.y,scale:this.scale})}t.prototype={set:function(t,i,s,h){this.player=t,this.wifi=i,this.bounds=s,this.altState=h,this.reset()},reset:function(){this.type=Const.actors.shopr,this.target={x:Util.Rnd(32,this.bounds.wt),y:Util.Rnd(32,this.bounds.ht)},this.timers.walk=240,this.max=Util.Rnd(1,2),this.frameRate=48-8*this.max,this.chasing=!1},logic:function(t){var i=this.accel*t,s=Const.game.friction*t;if(!this.chasing&&this.wifi.active?(this.type=this.altState,this.altState==Const.actors.troll?(this.target.x=this.wifi.x+Util.Rnd(-32,32),this.target.y=this.wifi.y+Util.Rnd(-32,32)):this.target=this.player,this.max=Util.Rnd(2,4.5),this.timers={wait:0,walk:9e3},this.chasing=!0):this.chasing&&!this.wifi.active&&this.reset(),0<this.timers.wait)this.timers.wait--;else if(this.target){!this.touching.r&&this.target.x-8>this.x&&(this.dx+=this.dx<this.max?i:0),!this.touching.l&&this.target.x+8<this.x&&(this.dx-=this.dx>-this.max?i:0),!this.touching.b&&this.target.y-8>this.y&&(this.dy+=this.dy<this.max?i:0,this.currentAnim=this.anims[this.type-Const.actors.shopr].down),!this.touching.t&&this.target.y+8<this.y&&(this.dy-=this.dy>-this.max?i:0,this.currentAnim=this.anims[this.type-Const.actors.shopr].up),0<this.dx&&(this.dx=this.dx-s<0?0:this.dx-s,this.nextanim()),this.dx<0&&(this.dx=0<this.dx+s?0:this.dx+s,this.nextanim()),0<this.dy&&(this.dy=this.dy-s<0?0:this.dy-s,this.nextanim()),this.dy<0&&(this.dy=0<this.dy+s?0:this.dy+s,this.nextanim());var h=Math.sqrt((this.x-this.target.x)*(this.x-this.target.x)+(this.y-this.target.y)*(this.y-this.target.y));this.type==Const.actors.shopr&&h<10&&(this.reset(),this.timers.wait=Util.Rnd(120,240),this.visible||0!=Util.Rnd(0,5)||(this.enabled=!1)),--this.timers.walk<0&&(this.reset(),this.visible||0!=Util.Rnd(0,4)||(this.enabled=!1))}},nextanim:function(){++this.frameNum>this.frameRate&&(this.frameNum=0,this.frame=1-this.frame)},move:function(){this.x+=this.dx,this.y+=this.dy},update:function(t,i){this.move(),this.sprite.Update(t,{x:this.x-i.x,y:this.y-i.y,frame:this.frame,src:this.currentAnim})},render:function(){this.sprite.Render()},hitBox:function(){return this.defaultHitBox},sideBox:function(){var t=this.hitBox();return{l:t.l-1,r:t.r+1,t:t.t-1,b:t.b+1}}},window.Enemy=t}(),function(){function t(t,i){this.bounds={wt:t,ht:i},this.enabled=!1,this.active=!1,this.x=0,this.y=0,this.users={troll:0,hater:0},this.ranges=[],this.strength=0}t.prototype={reset:function(){this.active=!1,this.ranges=[],this.users={troll:0,hate:0},this.x=Util.Rnd(32,this.bounds.wt),this.y=Util.Rnd(32,this.bounds.ht);for(var t=Util.Rnd(200,300)/5,i=5;0<i;i--)this.ranges.push(t*i)},InRange:function(t,i){var s=0;if(this.enabled){this.users=i?{troll:0,hater:0}:this.users;for(var h=Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)),e=0;e<this.ranges.length;e++)h<this.ranges[e]&&(s=e+1);0<s&&(t.type==Const.actors.troll?this.users.troll++:t.type==Const.actors.hater&&this.users.hater++)}return s},CheckSignal:function(){8<this.users.troll+this.users.hater&&this.reset()}},window.WiFi=t}(),function(){function t(t){this.enabled=!1,this.dim={x:128,y:128,fw:t.width,fh:t.height,w:t.width-256,h:t.height-256},this.screen=0,this.pscore=0,this.txt=[[{font:Const.game.h1Font,txt:" Watashi no shashin",col:"#c10000"},{txt:null},{font:Const.game.h3Font,txt:"Tony (you)",img:"playerd"},{txt:null},{font:Const.game.h3Font,txt:"Shopper",img:"shoprd"},{txt:null},{font:Const.game.h3Font,txt:"Troll",img:"trolld"},{txt:null},{font:Const.game.h3Font,txt:"Hater",img:"haterd"},{txt:null}],[{font:Const.game.h1Font,txt:" Watashi no shashin",col:"#c10000"},{txt:null},{font:Const.game.h3Font,txt:"You have 1 hour before mom comes to pick you up from the mall."},{font:Const.game.h3Font,txt:"Take as many selfies as you can before time runs out."},{font:Const.game.h3Font,txt:"Your followers are relying on you Tony."},{txt:null},{font:Const.game.h3Font,txt:"Don't let them down!"},{txt:null},{font:Const.game.h3Font,txt:"    [W]"},{font:Const.game.h3Font,txt:"[A] [D] [F] / [arrow keys] Movement"},{font:Const.game.h3Font,txt:"[B] to open mobile"},{font:Const.game.h3Font,txt:"[SPACE] to type txt, [RETURN] to send"}],[{font:Const.game.h2Font,txt:"Tony, your followers thank you."},{txt:null},{txt:"Likes: [like]"},{txt:"Dislikes: [hate]"},{txt:null},{txt:"Score: [score]"}]]}t.prototype={update:function(){},render:function(){if(this.enabled){Renderer.DrawBox({x:-16,y:-16,width:this.dim.fw+16,height:this.dim.fh+16},"#000000","#000000",16,.7),Renderer.DrawBox({x:this.dim.x,y:this.dim.y,width:this.dim.w,height:this.dim.h},"#0b2a05","#1d5712",16,.7);for(var t,i=this.dim.y+64,s=this.txt[this.screen],h=0;h<s.length;h++){if(t=this.dim.x+32,s[h].txt){var e=s[h].txt;e=(e=(e=e.replace("[like]",this.pscore.likes)).replace("[hate]",this.pscore.hates)).replace("[score]",45e3*this.pscore.likes-17e3*this.pscore.hates),s[h].img&&(Renderer.Sprite(t+160,i,s[h].img,0,4,0,1),t+=200),Renderer.SetContext(1,1),Renderer.DrawText(e,t,i,s[h].font,s[h].col||"#b5af00")}i+=18}Renderer.DrawText("              Press [B]",t,this.dim.y+this.dim.h-32,Const.game.h2Font,"#999999")}}},window.Title=t}(),function(){function t(t){this.enabled=!1,this.score,this.wifiStrength=0,this.width=t.width,this.height=64,this.clock}t.prototype={update:function(t,i,s){this.wifiStrength=t,this.score=i,this.clock=s},render:function(){if(this.enabled){Renderer.DrawBox({x:0,y:0,width:this.width,height:this.height},"#000000","#000000",1,.7);for(var t=0;t<5;t++){var i=this.wifiStrength>t?"#ffffff":"#555555";Renderer.DrawBox({x:this.width-100+10*(t+1),y:52-8*(t+1),width:8,height:8*(t+1)},i,i,1,1)}var s=parseInt(this.clock/5);Renderer.Sprite(this.width/2,32,"like",0,3,0,1),Renderer.Sprite(this.width/2+80,32,"nolike",0,3,0,1),Renderer.SetContext(1,1),Renderer.DrawText("Time til mom: "+(60-s),this.width/4,32,Const.game.h3Font,"#ffffff"),Renderer.DrawText("     "+this.score.likes+"                "+this.score.hates,this.width/2,36,Const.game.h3Font,"#ffffff")}}},window.Info=t}(),function(){function t(t,i){this.enabled=!1,this.ready=!1,this.online=!1,this.screen=t,this.dim={wd:200,ht:300,sx:10,sy:10,sw:180,sh:220,mw:i.width},this.y=this.screen.height-this.dim.ht,this.x=0,this.txts=[],this.strength,this.leeches={troll:0,hater:0},this.txt={msg:null,count:0},this.social={likes:0,hates:0}}t.prototype={reset:function(){this.social={likes:0,hates:0}},enable:function(t){this.enabled=!this.enabled,this.strength=t,this.txt={msg:Const.txts.msgs[Util.Rnd(0,Const.txts.msgs.length)],count:0}},enter:function(){this.enabled&&(this.txt.count<this.txt.msg.length&&(this.txt.count+=this.strength),this.ready=this.txt.count>=this.txt.msg.length)},send:function(){return!(!this.online||!this.ready)&&(this.txts.push({txt:this.txt.msg,like:0}),this.enabled=!1,this.ready=!1,this.social.likes+=Util.Rnd(0,8-this.leeches.troll),this.social.hates+=Util.Rnd(0,this.leeches.hater),!0)},update:function(t,i){this.leeches=i,this.x=t.x>this.dim.mw-this.screen.width/2?100:this.screen.width-this.dim.wd-100},render:function(){this.enabled&&(Renderer.DrawBox({x:this.x,y:this.y,width:this.dim.wd,height:this.dim.ht},"#000000","#000000",12,.8),Renderer.DrawBox({x:this.x+this.dim.sx,y:this.y+this.dim.sy,width:this.dim.sw,height:this.dim.sh},"#ffffff","#cccccc",8,.7),Renderer.DrawBox({x:this.x+this.dim.sx+this.dim.sw-40,y:this.y+this.dim.sy+this.dim.sh+20,width:40,height:20},this.online&&this.ready?"#00ff00":"#555555","#cccccc",8,.8),this.online?(0<this.txt.count&&this.tmsg(this.txt.msg,this.txt.count,this.y+this.dim.sy+this.dim.sh),Renderer.Sprite(this.x+this.dim.wd/2,this.y+this.dim.sy+this.dim.sh/2,"selfie",0,8,0,1)):this.tmsg(" OFFLINE",8,this.y+this.dim.sy+this.dim.sh/2))},tmsg:function(t,i,s){32<i&&(s-=12),Renderer.DrawText(t.substr(0,32<i?32:i),this.x+this.dim.sx+2,s-2,Const.game.mobFont,"#000000"),32<i&&(s+=12,Renderer.DrawText(t.substr(32,i-32),this.x+this.dim.sx+2,s-2,Const.game.mobFont,"#000000"))}},window.Device=t}();