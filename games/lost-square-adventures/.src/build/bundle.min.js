!function(t){function e(h){if(i[h])return i[h].exports;var o=i[h]={i:h,l:!1,exports:{}};return t[h].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,h){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:h})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=i(1),o=i(4);let l=document.getElementById("game"),a=l.getContext("2d"),s={val:!1},r={val:!1},n={val:!0,progress:0},f=null,p=0,d=0,m=null,y=null,x=[],M=!0,g=1,u=!0,c=0,w=0,T=null,v=[],b=()=>{l.width=window.innerWidth,l.height=window.innerHeight,d=Math.ceil(l.height/16),p=Math.ceil(l.width/16)},R=t=>{v[t.keyCode]=!0},S=t=>{v[t.keyCode]=!1},k=(t="#000")=>{a.fillStyle=t,a.fillRect(0,0,l.width,l.height)},C=()=>{m=new h.a(250,250,n,O,H),x=[],s.val=!1},D=()=>{for(let t=Math.floor(y.y-100),e=y.y+100;t<=e;t++)for(let e=Math.floor(y.x-100),i=y.x+100;e<=i;e++)m.map[t]&&m.map[t][e]&&m.miniMap[t][e]&&(a.fillStyle=m.map[t][e].miniMapColor,a.fillRect(Math.floor(l.width-200-y.x+100+e),Math.floor(t-y.y+100),1,1))},z=()=>{1==g?L():I(),a.fillStyle="rgb(255,255,255)",a.font="20px Monospace",a.fillText("Press space to skip",10,l.height-20)},L=()=>{let t=["Hello adventurer.","Are you having fun playing games?","So do I.","I threw you into this dungeon and now you are lost","But let's play a little game, find me and I will free you."];if(T||(T=new Date),new Date-T>100&&u&&(T=new Date,w++," "==t[c][w]&&w++,w>t[c].length&&(c++,w=0,c>=t.length)))return setTimeout(()=>{g=2,u=!0,c=0,w=0},1e3),void(u=!1);for(let e=0;e<c;e++){let i=t[e];a.font="30px Monospace",a.fillStyle="rgb(255,255,255)",a.fillText(i,l.width/2-a.measureText(i).width/2,l.height/2-10-30*(c-e-(u?0:1)))}if(!u)return;let e=t[c].slice(0,w);a.font="30px Monospace",a.fillStyle="rgb(255,255,255)",a.fillText(e,l.width/2-a.measureText(e).width/2,l.height/2-10)},I=()=>{let t=["You can find me on the 5th floor.","Let's see if you are as good as you think you are.","Get me if you can!"];if(T||(T=new Date),new Date-T>100&&u&&(T=new Date,w++," "==t[c][w]&&w++,w>t[c].length&&(c++,w=0,c>=t.length)))return setTimeout(()=>{M=!1,T=null,u=!0,c=0,w=0},1e3),void(u=!1);for(let e=0;e<c;e++){let i=t[e];a.font="30px Monospace",a.fillStyle="rgb(255,255,255)",a.fillText(i,l.width/2-a.measureText(i).width/2,l.height/2-10-30*(c-e-(u?0:1)))}if(!u)return;let e=t[c].slice(0,w);a.font="30px Monospace",a.fillStyle="rgb(255,255,255)",a.fillText(e,l.width/2-a.measureText(e).width/2,l.height/2-10)},P=()=>{let t=["You've defeated me...","Unbelievable...","But as I promised...","You are free now"];if(T||(T=new Date),new Date-T>100&&u&&(T=new Date,w++," "==t[c][w]&&w++,w>t[c].length&&(c++,w=0,c>=t.length)))return void(u=!1);for(let e=0;e<c;e++){let i=t[e];a.font="30px Monospace",a.fillStyle="rgb(255,255,255)",a.fillText(i,l.width/2-a.measureText(i).width/2,l.height/2-10-30*(c-e-(u?0:1)))}if(!u)return;let e=t[c].slice(0,w);a.font="30px Monospace",a.fillStyle="rgb(255,255,255)",a.fillText(e,l.width/2-a.measureText(e).width/2,l.height/2-10)},O=()=>{if(k(),r.val)P();else if(n.val){a.fillStyle="rgb(10,200,10)",a.fillRect(0,l.height-10,n.progress*l.width,10),a.fillStyle="rgb(255,255,255)",a.font="20px Monospace";let t=`${Math.floor(100*n.progress)}%`;a.fillText(t,l.width/2-a.measureText(t).width/2,l.height-30),t=`Loading...`,a.font="40px Monospace",a.fillText(t,l.width/2-a.measureText(t).width/2,l.height/2-20)}else if(M)z();else if(s.val)a.fillStyle="#fff",a.font="20px Monospace",a.fillText("Game Over",l.width/2-a.measureText("Game Over").width/2,l.height/2-10),a.font="15px Monospace",a.fillText("Press space to play again",l.width/2-a.measureText("Press space to play again").width/2,l.height/2+30);else{m.draw(l,a,y,p,d,16);for(let t of x)t.draw(a,x);D(),a.fillStyle="rgb(255,255,255)",a.font="14px Monospace",a.fillText(`Floor: ${m.level}`,10,l.height-30)}n.val||setTimeout(B,1e3/60)},B=()=>{f||(f=new Date);let t=new Date-f;for(;t>1e3/60;)if(f=new Date(f.getTime()+1e3/60),t=new Date-f,s.val)v[32]&&C();else if(M)v[32]&&(M=!1,u=!0,T=null,c=0,w=0);else if(!n.val){y.update(m,v,x,p,d,16,s,r,n,O);for(let t of m.enemies)t.update(m,y)}O()},H=()=>{y=new o.a(m),O()};b(),window.onresize=b,window.onkeydown=R,window.onkeyup=S,m=new h.a(250,250,n,O,H)},function(t,e,i){"use strict";var h=i(2),o=i(3);let l=function*(){let t=0;for(;;)yield t++}();class a{constructor(t,e){t.includes(".png")?(this.image=new Image,this.image.src=t,this.miniMapColor="#634a00"):this.miniMapColor=this.color=t,this.blocking=e}}class s{constructor(t,e=null){this.parent=e,this.value=t,this.left=null,this.right=null}}class r{constructor(){this.root=null,this.elements=[],this.cachedLeafs=[],this.cached=!0}add(t,e="left"){this.cached=!1,this.elements.push(t),this.root?"left"===e?t.parent.left=t:t.parent.right=t:this.root=t}getLeafs(t=this.root){if(this.cached)return this.cachedLeafs;let e=[];return t&&(t.left&&e.push(...this.getLeafs(t.left)),t.right&&e.push(...this.getLeafs(t.right)),t.left||t.right||e.push(t)),e}}class n{constructor(t,e,i,h){this.x=t,this.y=e,this.width=i,this.height=h,this.id=l.next().value,this.connectedID=-1}getArea(){return this.width*this.height}getClosestPoints(t,e){let i={start:{x:0,y:0},end:{x:0,y:0}},h=-1;for(let o=this.y;o<this.y+this.height;o++)for(let l=this.x;l<this.x+this.width;l++)if(e.map[o][l]==e.tileTypes.wall)for(let a=t.y;a<t.y+t.height;a++)for(let s=t.x;s<t.x+t.width;s++)if(e.map[a][s]==e.tileTypes.wall){let t=Math.abs(a-o)+Math.abs(s-l);(t<h||-1==h)&&(h=t,i.start.x=l,i.start.y=o,i.end.x=s,i.end.y=a)}let o=!1;for(let t=i.start.y-1;t<=i.start.y+1;t++){for(let h=i.start.x-1;h<=i.start.x+1;h++)if(e.map[t][h]==e.tileTypes.floor){i.start.x=h,i.start.y=t,o=!0;break}if(o)break}o=!1;for(let t=i.end.y-1;t<=i.end.y+1;t++){for(let h=i.end.x-1;h<=i.end.x+1;h++)if(e.map[t][h]==e.tileTypes.floor){i.end.x=h,i.end.y=t,o=!0;break}if(o)break}return i}connect(t,e){this.connectedID=t.id,t.connectedID=this.id;let i=this.getClosestPoints(t,e),h=i.start.x,o=i.start.y,l={x:Math.sign(i.end.x-i.start.x),y:Math.sign(i.end.y-i.start.y)};for(let t=h;t!=i.end.x+l.x;t+=l.x){if(e.map[o][t+l.x]==e.tileTypes.blank||e.map[o][t]==e.tileTypes.blank||e.map[o][t]==e.tileTypes.wall){e.map[o][t]=e.tileTypes.floor;for(let i=1;i<=2;i++){let h=e.tileTypes.floor;2==i&&(h=e.tileTypes.wall),e.map[o+i][t]=h,e.map[o-i][t]=h}}h=t}if(0!=l.y)for(let t=-1;t<=1;t+=1)for(let i=-1;i<=1;i+=1)e.map[o+t][h+i]==e.tileTypes.blank&&(e.map[o+t][h+i]=e.tileTypes.wall);for(let t=o;t!=i.end.y+l.y;t+=l.y){if(e.map[t+l.y][h]==e.tileTypes.blank||e.map[t][h]==e.tileTypes.blank||e.map[t][h]==e.tileTypes.wall){e.map[t][h]=e.tileTypes.floor;for(let i=1;i<=2;i++){let o=e.tileTypes.floor;2==i&&(o=e.tileTypes.wall),e.map[t][h-i]=o,e.map[t][h+i]=o}}e.map[t][h]=e.tileTypes.floor}}}class f{constructor(t,e,i,h,o){this.tileTypes={wall:new a(`rgba(220, 220, 220, 1.0)`,!0),floor:new a(`assets/dirt.png`,!1),blank:new a(`rgba(0, 0, 0, 1.0)`,!0),exit:new a(`assets/doors.png`,!1),redCarpet:new a(`rgba(128, 0, 0, 1.0)`,!1)},this.level=0,this.minRoomSize=15,this.maxRoomSize=40,this.minSpaceBetween=5,this.width=t,this.height=e,this.levelUp(i,h,o)}levelUp(t,e,i){t.val=!0,t.progress=0,this.map=[],this.miniMap=[],this.level++,this.rooms=new r,this.enemies=[],this.mainRoom=null,e(),this.level<5?setTimeout(this.generateMap.bind(this,this.width,this.height,t,e,i),0):setTimeout(this.generateFinalRoom.bind(this,t,e,i),0)}generateFinalRoom(t,e,i){this.width=50,this.height=50;for(let t=0;t<this.height;t++){this.map[t]=[],this.miniMap[t]=[];for(let e=0;e<this.width;e++)this.miniMap[t][e]=!0,0==t||0==e||t==this.height-1||e==this.width-1?this.map[t][e]=this.tileTypes.wall:e==Math.floor(this.width/2)||e==Math.floor(this.width/2-1)||e==Math.floor(this.width/2+1)?this.map[t][e]=this.tileTypes.redCarpet:this.map[t][e]=this.tileTypes.floor}this.enemies.push(new o.a(this)),t.progress=1,e(),t.val=!1,i()}addExit(t,e,i){let h=this.rooms.getLeafs(),o=null,l=-1;for(let t of h){let e=Math.abs(this.mainRoom.x-t.value.x)+Math.abs(this.mainRoom.y-t.value.y);(!o||e>l)&&(o=t,l=e)}this.map[Math.floor(o.value.y+o.value.height/2)][Math.floor(o.value.x+o.value.width/2)]=this.tileTypes.exit,this.map[Math.floor(o.value.y+o.value.height/2)+1][Math.floor(o.value.x+o.value.width/2)]=this.tileTypes.exit,this.map[Math.floor(o.value.y+o.value.height/2)][Math.floor(o.value.x+o.value.width/2)+1]=this.tileTypes.exit,this.map[Math.floor(o.value.y+o.value.height/2)+1][Math.floor(o.value.x+o.value.width/2)+1]=this.tileTypes.exit,t.progress=1,e(),t.val=!1,i()}addEnemies(t,e,i){for(;this.enemies.length<4*this.level;)for(let t=1;t<this.map.length-1;t++)for(let e=1;e<this.map[t].length-1;e++)if(Math.random()<5e-4*this.level){let i={x:this.mainRoom.x+this.mainRoom.width/2,y:this.mainRoom.y+this.mainRoom.height/2};Math.abs(i.x-e)+Math.abs(i.y-t)>50&&this.map[t][e]==this.tileTypes.floor&&this.enemies.push(new h.a(e,t,this.level))}t.progress=6/7,e(),setTimeout(this.addExit.bind(this,t,e,i),0)}removeGlitches(t,e,i){for(let t=1;t<this.map.length-1;t++)for(let e=1;e<this.map[t].length-1;e++)if(this.map[t][e]==this.tileTypes.wall){let i=!1;for(let h=-1;h<=1;h++){for(let o=-1;o<=1;o++)if(this.map[t+h][e+o]==this.tileTypes.blank){i=!0;break}if(i)break}i||(this.map[t][e]=this.tileTypes.floor)}t.progress=5/7,e(),setTimeout(this.addEnemies.bind(this,t,e,i),0)}generateMap(t,e,i,h,o){for(let i=0;i<e;i++){this.map[i]=[],this.miniMap[i]=[];for(let e=0;e<t;e++)this.map[i][e]=this.tileTypes.blank,this.miniMap[i][e]=!1}this.rooms.add(new s(new n(0,0,t,e)));let l=!0,a=Math.floor(1.5*this.minRoomSize)+2*this.minSpaceBetween;for(;l;){l=!1;let t=this.rooms.getLeafs();for(let e=0;e<t.length;e++){let i=t[e],h=i.value;if(h.width>2*this.maxRoomSize||h.height>2*this.maxRoomSize){let t=Math.random()<.5;if(t<.5&&h.width>2*this.maxRoomSize){let t=a+Math.floor((h.width-2*a)*Math.random());this.rooms.add(new s(new n(h.x,h.y,t,h.height),i),"left"),this.rooms.add(new s(new n(h.x+t,h.y,h.width-t,h.height),i),"right"),l=!0}else if(t>=.5&&h.height>2*this.maxRoomSize){let t=a+Math.floor((h.height-2*a)*Math.random());this.rooms.add(new s(new n(h.x,h.y,h.width,t),i),"left"),this.rooms.add(new s(new n(h.x,h.y+t,h.width,h.height-t),i),"right"),l=!0}}}}this.rooms.cachedLeafs=this.rooms.getLeafs(),this.rooms.cached=!0,i.progress=1/7,h(),setTimeout(this.shrinkRooms.bind(this,i,h,o),0)}shrinkRooms(t,e,i){let h=this.rooms.getLeafs();for(let t of h){t=t.value;let e=Math.floor(this.minSpaceBetween/2+(t.width-this.minRoomSize)*Math.random()),i=Math.floor(this.minSpaceBetween/2+(t.height-this.minRoomSize)*Math.random());t.x+=e,t.y+=i,t.width-=e,t.height-=i,t.width>this.minRoomSize&&(t.width-=Math.floor(this.minSpaceBetween/2+(t.width-this.minRoomSize)*Math.random())),t.height>this.minRoomSize&&(t.height-=Math.floor(this.minSpaceBetween/2+(t.height-this.minRoomSize)*Math.random())),(!this.mainRoom||this.mainRoom.getArea()<t.getArea())&&(this.mainRoom=t)}t.progress=2/7,e(),setTimeout(this.tranferRoomsToMap.bind(this,t,e,i),0)}tranferRoomsToMap(t,e,i){let h=this.rooms.getLeafs();for(let t of h)for(let e=(t=t.value).y;e<t.y+t.height;e++)for(let i=t.x;i<t.x+t.width;i++)i==t.x||e==t.y||i==t.x+t.width-1||e==t.y+t.height-1?this.map[e][i]=this.tileTypes.wall:this.map[e][i]=this.tileTypes.floor;t.progress=3/7,e(),setTimeout(this.connectRooms.bind(this,t,e,i),0)}connectRooms(t,e,i){let h=this.rooms.getLeafs(),o=[];for(let t of h)-1==o.indexOf(t.parent)&&(t.parent.left.left||t.parent.left.right||t.parent.right.left||t.parent.right.right||(o.push(t.parent),t.parent.left.value.connect(t.parent.right.value,this)));for(;o.length;){let t=[];for(let e of o)e.parent&&-1==t.indexOf(e.parent)&&(t.push(e.parent),e.parent.left.value.connect(e.parent.right.value,this));o=t}t.progress=4/7,e(),setTimeout(this.removeGlitches.bind(this,t,e,i),0)}draw(t,e,i,h,o,l){let a=!1;for(let t=0;t<o;t++)for(let s=0;s<h;s++){let r=Math.floor(i.x)+s-Math.floor(h/2),n=Math.floor(i.y)+t-Math.floor(o/2),f=!1;if(Math.floor(i.x)==r&&Math.floor(i.y)==n)e.fillStyle=i.color;else{let t=((this.map[n]||[])[r]||{color:"rgba(0, 0, 0, 1.0)"}).color;t?e.fillStyle=t:f=!0}f?this.map[n][r]==this.tileTypes.exit?a||(e.drawImage(this.map[n][r].image,s*l,t*l,2*l,2*l),a=!0):e.drawImage(this.map[n][r].image,s*l,t*l):e.fillRect(s*l,t*l,l,l)}for(let t of this.enemies){e.fillStyle=t.color;let a=Math.floor(t.x)-Math.floor(i.x)+Math.floor(h/2),s=Math.floor(t.y)-Math.floor(i.y)+Math.floor(o/2);e.fillRect(a*l,s*l,l,l)}var s=e.createRadialGradient(t.width/2,t.height/2,20,t.width/2,t.height/2,400);s.addColorStop(0,"rgba(0, 0, 0, 0.0)"),s.addColorStop(1,"rgba(0, 0, 0, 1.0)"),e.fillStyle=s,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgb(0,128,0)",e.fillRect(0,t.height-20,Math.round(t.width*i.health/i.maxHealth),10),e.fillStyle="rgb(0,0,128)",e.fillRect(0,t.height-10,Math.round(t.width*i.xp/i.xpNeeded),10),e.fillStyle="rgb(255,255,255)",e.font="14px Monospace";let r=`${i.health}/${i.maxHealth}`;e.fillText(r,t.width/2-e.measureText(r).width/2,t.height-10),r=`${i.xp}/${i.xpNeeded}`,e.fillStyle="rgb(255,255,255)",e.fillText(r,t.width/2-e.measureText(r).width/2,t.height)}}e.a=f},function(t,e,i){"use strict";class h{constructor(t,e,i){this.x=t,this.y=e,this.color="rgb(10,200,10)",this.health=5+10*i,this.speed=.2+i/100,this.strength=Math.round(i+Math.random()*(1+i)),this.xp=3*i,this.attackCd=0,this.attackCdTime=45,this.type="orc"}update(t,e){let i={x:Math.floor(e.x)-Math.floor(this.x),y:Math.floor(e.y)-Math.floor(this.y)};if(!(Math.abs(i.x)<=1&&Math.abs(i.y)<=1)){for(let h=-1;h<=1;h++)for(let o=-1;o<=1;o++){let l=!0;if(t.map[Math.floor(e.y)+o][Math.floor(e.x)+h]!=t.tileTypes.floor&&(l=!1),l)for(let i of t.enemies)if(Math.floor(i.x)==Math.floor(e.x+h)&&Math.floor(i.y)==Math.floor(e.y+o)){l=!1;break}if(l){let t={x:Math.floor(e.x+h)-Math.floor(this.x),y:Math.floor(e.y+o)-Math.floor(this.y)};(!i||Math.abs(i.x)+Math.abs(i.y)>Math.abs(t.x)+Math.abs(t.y))&&(i=t)}}if(Math.abs(i.x)+Math.abs(i.y)<200){let h={x:this.x+Math.sign(i.x)*this.speed,y:this.y+Math.sign(i.y)*this.speed};if(t.map[Math.floor(h.y)][Math.floor(this.x)]==t.tileTypes.floor){let i=!0;for(let e of t.enemies)e!=this&&Math.floor(e.x)==Math.floor(h.x)&&Math.floor(e.y)==Math.floor(h.y)&&(i=!1);!i||Math.floor(h.y)==Math.floor(e.y)&&Math.floor(h.x)==Math.floor(e.x)||(this.y=h.y)}if(t.map[Math.floor(this.y)][Math.floor(h.x)]==t.tileTypes.floor){let i=!0;for(let e of t.enemies)e!=this&&Math.floor(e.x)==Math.floor(h.x)&&Math.floor(e.y)==Math.floor(h.y)&&(i=!1);!i||Math.floor(h.y)==Math.floor(e.y)&&Math.floor(h.x)==Math.floor(e.x)||(this.x=h.x)}}}}}e.a=h},function(t,e,i){"use strict";class h{constructor(t){this.x=Math.floor(t.width/2),this.y=Math.floor(3),this.health=150,this.strength=5,this.speed=1,this.color="yellow",this.attackCd=0,this.attackCdTime=20,this.xp=0,this.type="king"}update(t,e){let i={x:Math.floor(e.x)-Math.floor(this.x),y:Math.floor(e.y)-Math.floor(this.y)};if(Math.abs(i.x)+Math.abs(i.y)<200){let h={x:this.x+Math.sign(i.x)*this.speed,y:this.y+Math.sign(i.y)*this.speed};t.map[Math.floor(h.y)][Math.floor(this.x)]==t.tileTypes.floor&&(Math.floor(h.y)==Math.floor(e.y)&&Math.floor(h.x)==Math.floor(e.x)||(this.y=h.y)),t.map[Math.floor(this.y)][Math.floor(h.x)]==t.tileTypes.floor&&(Math.floor(h.y)==Math.floor(e.y)&&Math.floor(h.x)==Math.floor(e.x)||(this.x=h.x))}}}e.a=h},function(t,e,i){"use strict";var h=i(5);class o{constructor(t){this.initPos(t),this.color="#f00",this.level=1,this.xp=0,this.xpNeeded=10,this.health=100,this.maxHealth=100,this.strength=1,this.speed=.5,this.attackCd=0,this.attackCdTime=30,this.visionRadius=20}initPos(t,e){t.mainRoom?(this.x=t.mainRoom.x+Math.floor(t.mainRoom.width/2),this.y=t.mainRoom.y+Math.floor(t.mainRoom.height/2)):(this.x=Math.floor(t.width/2),this.y=t.height-2),e&&e()}update(t,e,i,h,o,l,a,s,r,n){this.handleMovement(t,e),this.handleCombat(t,i,h,o,l,a,s),t.map[Math.floor(this.y)][Math.floor(this.x)]==t.tileTypes.exit&&t.levelUp(r,n,this.initPos.bind(this,t,n));for(let e=Math.floor(this.y-this.visionRadius);e<=this.y+this.visionRadius;e++)for(let i=Math.floor(this.x-this.visionRadius);i<=this.x+this.visionRadius;i++){let h=i-this.x,o=e-this.y;t.map[e]&&t.map[e][i]&&!t.miniMap[e][i]&&h*h+o*o<=this.visionRadius*this.visionRadius&&(t.miniMap[e][i]=!0)}}handleCombat(t,e,i,o,l,a,s){this.attackCd>0&&this.attackCd--;for(let r of t.enemies){if(!r)continue;r.attackCd>0&&r.attackCd--;let n={x:Math.abs(Math.floor(r.x)-Math.floor(this.x)),y:Math.abs(Math.floor(r.y)-Math.floor(this.y))};if(n.x<=1&&n.y<=1&&(0==r.attackCd&&(this.health-=r.strength,r.attackCd=r.attackCdTime,e.push(new h.a(this.x,this.y,r.strength,this,i,o,l)),this.health<=0&&(a.val=!0)),0==this.attackCd&&(r.health-=this.strength,this.attackCd=this.attackCdTime,e.push(new h.a(r.x,r.y,this.strength,this,i,o,l))),r.health<=0)){for(this.xp+=r.xp;this.xp>=this.xpNeeded;)this.level++,this.xp-=this.xpNeeded,this.xpNeeded=Math.floor(1.5*this.xpNeeded),this.maxHealth+=50,this.health=this.maxHealth,this.strength+=2;"king"==r.type&&(s.val=!0),t.enemies.splice(t.enemies.indexOf(r),1)}}}handleMovement(t,e){let i={x:this.x,y:this.y};(e[37]||e[65])&&(i.x-=this.speed),(e[39]||e[68])&&(i.x+=this.speed);let h=!0;for(let e of t.enemies)Math.floor(e.x)==Math.floor(i.x)&&Math.floor(e.y)==Math.floor(this.y)&&(h=!1);h&&t.map[Math.floor(this.y)][Math.floor(i.x)]!=t.tileTypes.wall&&(this.x=i.x),(e[38]||e[87])&&(i.y-=this.speed),(e[40]||e[83])&&(i.y+=this.speed),h=!0;for(let e of t.enemies)Math.floor(e.x)==Math.floor(this.x)&&Math.floor(e.y)==Math.floor(i.y)&&(h=!1);h&&t.map[Math.floor(i.y)][Math.floor(this.x)]!=t.tileTypes.wall&&(this.y=i.y)}}e.a=o},function(t,e,i){"use strict";class h{constructor(t,e,i,h,o,l,a){this.x=(Math.floor(t)-Math.floor(h.x)+Math.floor(o/2))*a,this.y=(Math.floor(e)-Math.floor(h.y)+Math.floor(l/2))*a,this.damage=i,this.alpha=1}draw(t,e){t.fillStyle=`rgba(255,50,50,${this.alpha})`,t.font="16px Monospace",t.fillText(this.damage,this.x+t.measureText(this.damage).width/2,this.y),this.y--,this.alpha-=.05,this.alpha<=0&&e.splice(e.indexOf(this),1)}}e.a=h}]);