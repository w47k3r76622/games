"use strict";var $={debug:{t:{i:!1,entities:!1}}};function Hitbox(t,i,s,h,e,n,r,o=!1){this.h=t,this.x1=i,this.y1=s,this.x2=h,this.y2=e,this.o=n,this.active=r,this.$=o}function SpriteAnimation(t,i,s,h,e=!1){this._=i*$.u.l,this.T=s*$.u.l,this.R=h,this.loop=e,this.frames=t.map(t=>[t[0]*this._+2*$.u.O*t[0]+$.u.O,t[1]*this.T+2*$.u.O*t[1]+$.u.O])}function Sprite(t,i,s,h,e,n=!0){this.h=t,this.x=i,this.y=s,this.w=h,this.I=e,this.L=null,this.frame=0,this.F=0,this.play=!1,this.N=n,this.done=!1,this.loop=!1,this.A=null}$.input={P:{S:0,D:1,p:2,G:3,m:4,H:5,C:6,M:7},map:[["w","ArrowUp"],["s","ArrowDown"],["a","ArrowLeft"],["d","ArrowRight"],[" "],["e","Control"],["q","Shift"],["r"]],state:[{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0},{pressed:!1,B:!1,v:0}],g:[],W:!1,init:function(){return this.U(),window.addEventListener("keyup",i=>{if(!i.repeat){this.k=!1;for(let t=0;t<this.map.length;t++)this.map[t].includes(i.key)&&(this.g[t]=-1)}}),window.addEventListener("keydown",i=>{if(!i.repeat){this.k=!0;for(let t=0;t<this.map.length;t++)this.map[t].includes(i.key)&&(this.g[t]=1)}}),Promise.resolve()},U:function(){this.g=this.map.map(()=>0)},Y:function(){this.U();for(let t=0;t<this.state;t++)this.state[t].pressed=!1,this.state[t].B=!1,this.state[t].v=0},update:function(i){for(let t=0;t<this.state.length;t++){var s=this.g[t];s?(this.state[t].B=!0,s<0?(this.state[t].pressed=!1,this.state[t].v=0):0<this.g[t]&&(this.state[t].pressed=!0)):(this.state[t].B=!1,this.state[t].pressed&&(this.state[t].v+=i))}this.U()},pressed:function(t){return this.state[t].pressed},j:function(t){return this.state[t].pressed&&this.state[t].B},K:function(t){return!this.state[t].pressed},V:function(t){return!this.state[t].pressed&&this.state[t].B},Z:function(t){return this.state[t].pressed&&!this.state[t].B}},$.q={t:[null],J:{p:1,G:2,S:3,D:4},init:function(){return Promise.resolve()},X:function(i){var h=this.t[i],s=[],e=[];for(let t=1;t<this.t.length;t++)if(t!==i){var n=this.t[t];if((!h.h||h.h!==this.t[t].h)&&!(!n||!n.active||h.x2<=n.x1||h.x1>=n.x2||h.y2<=n.y1||h.y1>=n.y2)&&(n.h&&!s.includes(n.h)&&s.push(n.h),n.o)){var r=[n.x1-h.x2,n.x2-h.x1,n.y1-h.y2,n.y2-h.y1];let i=r[0],s=0;for(let t=1;t<r.length;t++)Math.abs(r[t])<Math.abs(i)&&(i=r[t],s=t);var o={t1:n,x:0,y:0,i1:r[0],r:r[1],s1:r[2],d:r[3]};s<2?o.x=i:o.y=i,(!n.$||o.y<0)&&e.push(o)}}return{entities:s,h1:e}},e1(i,s,h,e,n,r=null,o=!0){for(let t=1;t<this.t.length;t++)if(!this.t[t])return this.t[t]=new Hitbox(r,i,s,h,e,n,o),t;return this.t.push(new Hitbox(r,i,s,h,e,n,o)),this.t.length-1},n1:function(t){this.t[t]=null},o1:function(){this.t=[null]},_1:function(t,i,s){var t=this.t[t],h=t.x2-t.x1,e=t.y2-t.y1;t.x1=i,t.y1=s,t.x2=t.x1+h,t.y2=t.y1+e},E1:function(t,i,s){t=this.t[t];t.x1+=i,t.y1+=s,t.x2+=i,t.y2+=s},l1:function(t){return{...this.t[t]}},u1:function(t,i){this.t[t].active=!0===i||!1===i?i:!this.t[t].active}},$.u={data:new Image,O:1,l:8,f1:11,a1:{T1:1,R1:2,c1:3,O1:4,d1:5,I1:6,L1:7,F1:8,N1:9,A1:10,P1:12,S1:23,D1:24,w1:25,G1:26,m1:27,H1:28,C1:29,M1:30,B1:31,b1:32,v1:45,g1:46,W1:47,U1:48,Y1:49,j1:50,K1:51,V1:52,Z1:53,q1:54,J1:55,z1:56,Q1:57,X1:58,tt:59,it:60,st:61,ht:62,et:63,nt:64,rt:65,ot:66,$t:67,_t:68,Et:69,lt:70,ut:71,ft:72,Tt:73,Rt:74,ct:75,Ot:76,dt:77,It:86,Lt:87,Ft:88,Nt:78,At:79,Pt:80,St:81,Dt:82,wt:90,Gt:91,Ht:92,xt:93,Ct:94,Mt:102,Bt:103,bt:104,vt:105,gt:113,Wt:114,yt:115,Ut:116},kt:[],Yt:{},jt:[null],Kt:[null],init:function(t,i){return this.width=t,this.height=i,this.Vt=document.getElementsByTagName("canvas")[0],this.Vt.width=t,this.Vt.height=i,this.kt=[this.a1.N1,this.a1.A1],this.Zt=this.Vt.getContext("2d"),this.Zt.imageSmoothingEnabled=!1,this.qt=new OffscreenCanvas(t,i),this.Jt=this.qt.getContext("2d"),this.Jt.imageSmoothingEnabled=!1,this.data.src="./assets/img/sprite_sheet.png",this.Yt.v1=this.zt(this.Qt(this.a1.v1),1,1,1,!1),this.Yt.g1=this.zt(this.Qt(this.a1.g1),1,1,1,!1),this.Yt.W1=this.zt(this.Qt(this.a1.W1),1,1,1,!1),this.Yt.U1=this.zt(this.Qt(this.a1.U1),1,1,1,!1),this.Yt.z1=this.zt(this.Qt(this.a1.z1),1,1,1,!1),this.Yt.it=this.zt(this.Qt(this.a1.it),1,1,1,!1),this.Yt.Xt=this.zt(this.Qt(this.a1.z1,this.a1.tt),1,1,10,!0),this.Yt.ti=this.zt(this.Qt(this.a1.it,this.a1.et),1,1,10,!0),this.Yt.Y1=this.zt(this.Qt(this.a1.Y1),1,1,1,!1),this.Yt.j1=this.zt(this.Qt(this.a1.j1),1,1,1,!1),this.Yt.K1=this.zt(this.Qt(this.a1.K1),1,1,1,!1),this.Yt.V1=this.zt(this.Qt(this.a1.V1),1,1,1,!1),this.Yt.$t=this.zt(this.Qt(this.a1.$t),1,1,1,!1),this.Yt.ut=this.zt(this.Qt(this.a1.ut),1,1,1,!1),this.Yt.ii=this.zt(this.Qt(this.a1.$t,this.a1.lt),1,1,10,!0),this.Yt.si=this.zt(this.Qt(this.a1.ut,this.a1.Rt),1,1,10,!0),this.Yt.Nt=this.zt(this.Qt(this.a1.Nt),1,1,1,!1),this.Yt.hi=this.zt(this.Qt(this.a1.At,this.a1.Dt),1,1,3,!0),this.Yt.wt=this.zt(this.Qt(this.a1.wt),1,1,1,!1),this.Yt.C1=[this.zt(this.Qt(this.a1.C1),1,1,1,!1),this.zt(this.Qt(this.a1.M1),1,1,1,!1),this.zt(this.Qt(this.a1.B1),1,1,1,!1),this.zt(this.Qt(this.a1.b1),1,1,1,!1)],this.Yt.ei=[null,this.zt(this.Qt(this.a1.S1),1,1,1,!1),this.zt(this.Qt(this.a1.D1),1,1,1,!1),this.zt(this.Qt(this.a1.w1),1,1,1,!1)],this.Yt.ni=[null,this.zt(this.Qt(this.a1.G1),1,1,1,!1),this.zt(this.Qt(this.a1.m1),1,1,1,!1),this.zt(this.Qt(this.a1.H1),1,1,1,!1)],this.Yt.ri=[[null,this.zt(this.Qt(this.a1.Z1),1,1,1,!1),this.zt(this.Qt(this.a1.q1),1,1,1,!1),this.zt(this.Qt(this.a1.J1),1,1,1,!1)],[null,this.zt(this.Qt(this.a1.nt),1,1,1,!1),this.zt(this.Qt(this.a1.rt),1,1,1,!1),this.zt(this.Qt(this.a1.ot),1,1,1,!1)]],this.Yt.C=[[null,this.zt(this.Qt(this.a1.ct),1,1,1,!1),this.zt(this.Qt(this.a1.Ot),1,1,1,!1),this.zt(this.Qt(this.a1.dt),1,1,1,!1)],[null,this.zt(this.Qt(this.a1.It),1,1,1,!1),this.zt(this.Qt(this.a1.Lt),1,1,1,!1),this.zt(this.Qt(this.a1.Ft),1,1,1,!1)]],this.Yt.oi=this.zt(this.Qt(this.a1.Gt,this.a1.Ht),1,1,5,!0),this.Yt.$i=this.zt(this.Qt(this.a1.xt,this.a1.Ct),1,1,5,!0),this.Yt._i=this.zt(this.Qt(this.a1.Mt,this.a1.vt),1,1,10,!0),this.Yt.Ei=this.zt(this.Qt(this.a1.gt,this.a1.Ut),1,1,10,!0),new Promise(t=>{this.data.onload=t})},li:function(t){t-=1;return[t%this.f1,Math.floor(t/this.f1)]},Qt:function(i,s=null){var h=[];s=s||i;for(let t=i;t<=s;t++)h.push(this.li(t));return h},ui:function(t,i){t.play&&!t.done&&(t.F+=i,i=this.Kt[t.L],t.F>=1/i.R)&&(t.frame++,t.F=0,t.frame>=i.frames.length)&&(t.loop?t.frame=0:t.A?this.fi(t,t.A):(t.frame=i.frames.length-1,t.done=!0))},fi:function(t,i,s=null,h=!1){return h||t.L!==i||!0!==t.play||!0===t.done?(t.L=i,t.frame=0,t.F=0,t.play=!0,t.done=!1,t.A=s,t.loop=this.Kt[i].loop,0):t.frame},ai:function(t,i,s,h,e,n){this.kt.includes(i)||(i=this.li(i),t.drawImage(this.data,8*i[0]+2*this.O*i[0]+this.O,8*i[1]+2*this.O*i[1]+this.O,8,8,s,h,e,n))},clear:function(){this.Zt.clearRect(0,0,this.Vt.width,this.Vt.height)},update:function(i){if($.Ti){this.clear(),this.Zt.drawImage(this.qt,0,0,this.width,this.height);for(let t=0;t<this.jt.length;t++){var s,h,e=this.jt[t];e&&e.N&&(this.ui(e,i),h=(s=this.Kt[e.L]).frames[e.frame],this.Zt.drawImage(this.data,h[0],h[1],s._,s.T,e.x,e.y,e.w,e.I))}if(this.Zt.fillStyle="black",this.Zt.fillRect(0,this.Vt.height-24,this.Vt.width,this.Vt.height),$.debug&&$.debug.t)for(let t=1;t<$.q.t.length;t++){var n=$.q.t[t];(n.h&&$.debug.t.entities||!n.h&&$.debug.t.i&&n.active)&&(this.Zt.strokeStyle="#FF0000",this.Zt.strokeRect(n.x1,n.y1,n.x2-n.x1,n.y2-n.y1))}}},Ri:function(t,i,s=null,h=!1){return this.fi(this.jt[t],i,s,h)},ci:function(i,s,h,e,n=!0,r=null){for(let t=1;t<this.jt.length;t++)if(!this.jt[t])return this.jt[t]=new Sprite(r,i,s,h,e,n),t;return this.jt.push(new Sprite(r,i,s,h,e,n)),this.jt.length-1},zt:function(t,i,s,h,e=!1){var n=new SpriteAnimation(t,i,s,h,e);for(let t=1;t<this.Kt.length;t++)if(!this.Kt[t])return this.Kt[t]=n,t;return this.Kt.push(n),this.Kt.length-1},Oi:function(t,i,s){t=this.jt[t];t.x=i,t.y=s},di:function(t,i,s){t=this.jt[t];t.x+=i,t.y+=s},Ii:function(t,i){this.jt[t].N=!0===i||!1===i?i:!this.jt[t].N},Li:function(t,i){this.jt[t].loop=i},Fi:function(t){this.jt[t]=null},Ni:function(){this.jt=[null]},Ai:function(t){this.Kt[t]=null},Pi:function(){this.Jt.clearRect(0,0,this.qt.width,this.qt.height)}},$.Si={},window.Di=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},$.Si.wi=function(t,i){return Math.random()*(i-t)+t},$.Si.pi=function(t){var i=Object.keys(t);return t[i[i.length*Math.random()<<0]]},$.Gi={mi:new Audio("./assets/sfx/step.wav"),action:new Audio("./assets/sfx/action.wav"),Hi:new Audio("./assets/sfx/chunk.wav"),xi:new Audio("./assets/sfx/hurt.wav")},$.entities={Ci:function(i,s){if(!s.length)return{Mi:!0,Bi:!1};let h,e;for(let t=0;t<s.length;t++){var n=s[t];if($.entities.bi(i,e?0:n.x,h?0:n.y),h=h||n.y<0,(e=e||!!n.x)&&h)break}return{Mi:!h,Bi:e}},bi:function(i,s,h){for(let t=0;t<i.jt.length;t++)$.u.di(i.jt[t],s,h);for(let t=0;t<i.t.length;t++)$.q.E1(i.t[t],s,h)},vi:function(i,s,h){for(let t=0;t<i.jt.length;t++)$.u.Oi(i.jt[t],s,h);for(let t=0;t<i.t.length;t++)$.q._1(i.t[t],s,h)},gi:function(t,i,s=null,h=null,e=null){var n=$.yi.Wi(t,s,h),r=$.yi.entities[n],o=(r.index=n,Object.keys(i));for(let t=0;t<o.length;t++)r[o[t]]=i[o[t]];if(r.t)for(let t=0;t<r.t.length;t++)r.t[t].splice(5,0,n),r.t[t]=$.q.e1(...r.t[t]);if(r.jt)for(let t=0;t<r.jt.length;t++)r.jt[t].push(n),r.jt[t]=$.u.ci(...r.jt[t]);return e&&e(r),r},Ui:function(t,i,s){return this.gi(t,{x:i,y:s,dx:0,dy:1,w:32,I:64,ki:4,Yi:5,ji:!1,Ki:0,Vi:.2,Zi:1,qi:null,jt:[[i,s+1,32,32,!0],[i,s+32,32,32,!0]],t:[[i+4,s,i+32-8,s+64,!1,!0],[i,s-32,i+32,s+64,!1,!1]],Ji:function(){return!$.q.X(this.t[1]).h1.some(t=>1<Math.abs(t.s1))},zi:t===$.yi.Xi.Qi?$.u.Yt.v1:$.u.Yt.Y1,t2:t===$.yi.Xi.Qi?$.u.Yt.g1:$.u.Yt.j1,i2:t===$.yi.Xi.Qi?$.u.Yt.W1:$.u.Yt.K1,s2:t===$.yi.Xi.Qi?$.u.Yt.U1:$.u.Yt.V1,h2:t===$.yi.Xi.Qi?$.u.Yt.z1:$.u.Yt.$t,e2:t===$.yi.Xi.Qi?$.u.Yt.it:$.u.Yt.ut,n2:t===$.yi.Xi.Qi?$.u.Yt.Xt:$.u.Yt.ii,o2:t===$.yi.Xi.Qi?$.u.Yt.ti:$.u.Yt.si},function(t){this.dx=0;let i=1,s;(s=$.yi.ACTIVE===this.type&&($.input.pressed($.input.P.p)&&(this.dx=-100),$.input.pressed($.input.P.G)&&(this.dx=100),$.input.pressed($.input.P.S)&&(i=-100),$.input.pressed($.input.P.D)&&(i=100),this.dx&&(this.Zi=Math.sign(this.dx)),this.ji?$.input.pressed($.input.P.m)&&0<this.Ki?this.Ki<this.Vi&&(this.Ki+=t,this.dy+=-20):$.input.V($.input.P.m)&&(this.Ki=0):$.input.j($.input.P.m)&&(this.dy+=-128,this.Ki+=t,$.Gi.action.play()),$.input.V($.input.P.H))?!0:s)&&this.qi&&($.yi._2(this.qi,this.type,{E2:!0,dx:this.dx+150*this.Zi,dy:this.dy-150}),this.qi=null,$.u.Ri(this.jt[0],this.Zi<0?this.t2:this.zi),$.u.Ri(this.jt[1],this.Zi<0?this.e2:this.h2),$.q.u1(this.t[1],!1),s=!1),this.dx&&!this.ji?($.u.Ri(this.jt[0],0<this.dx?this.qi?this.i2:this.zi:this.qi?this.s2:this.t2),0===$.u.Ri(this.jt[1],0<this.dx?this.n2:this.o2,0<this.dx?this.h2:this.e2)&&$.Gi.mi.play()):$.u.Li(this.jt[1],!1);var h=this.dx*t,e=this.dy*t,{entities:n,h1:h}=(this.x+=h,this.y+=e,$.entities.bi(this,h,e),$.q.X(this.qi?this.t[1]:this.t[0]));let r=!1;for(let t=n.length-1;-1<t;t--)switch($.yi.l2(n[t])){case $.yi.Xi.Nt:s&&(this.Ji()?(this.qi=n[t],$.u.Ri(this.jt[0],0<this.dx?this.i2:this.s2),$.Gi.action.play(),$.q.u1(this.t[1],!0),$.yi._2(this.qi,this.type,{u2:!0,index:this.index,f2:this.t[1]})):($.yi._2(n[t],this.type,{a2:!0,dx:this.dx+150*this.Zi,dy:this.dy-30}),$.Gi.Hi.play()),s=!1);break;case $.yi.Xi.C1:r=!0,1===i&&(i=0);break;case $.yi.Xi.T2:case $.yi.Xi.R2:case $.yi.Xi.c2:s&&!this.qi&&$.yi._2(n[t],this.type)}e=$.entities.Ci(this,h).Mi;this.ji=!r&&e,this.ji?(e||$.Gi.mi.play(),r||(this.dy+=500*t)):(this.Ki=0,r?this.dy=i:this.dy=1)},function(t,i=null){switch(t){case $.yi.Xi.Nt:this.Ji()&&(this.qi=i.index,$.yi._2(i.index,this.type,{u2:!0,index:this.index,f2:this.t[1]}),$.u.Ri(this.jt[0],this.Zi<0?this.s2:this.i2),$.u.Ri(this.jt[1],this.Zi<0?this.e2:this.h2));break;case $.yi.Xi.O2:case $.yi.Xi.d2:return!!this.qi}},t=>{$.u.Ri(t.jt[0],t.zi),$.u.Ri(t.jt[1],t.h2)}).index},I2:function(t,i){return this.gi($.yi.Xi.Nt,{L2:{F2:1,N2:2,A2:3,P2:4},state:1,S2:null,x:t,y:i,dx:0,dy:500,t:[[t,i,t+32,i+32,!1]],jt:[[t,i,32,32,!0]],D2:function(t){var i=this.dx*t,s=this.dy*t,i=(this.x+=i,this.y+=s,$.entities.bi(this,i,s),$.q.X(this.t[0])),s=$.entities.Ci(this,i.h1)["Mi"];return s?this.dy+=500*t:(this.state===this.L2.A2&&$.Gi.Hi.play(),this.dx=0,this.dy=1,this.state=this.L2.F2,this.S2=null),i}},function(t){switch(this.state){case this.L2.F2:this.D2(t);break;case this.L2.N2:var i=$.q.l1(this.S2.f2);$.entities.vi(this,i.x1,i.y1);break;case this.L2.A2:var{entities:s,h1:h}=this.D2(t);for(let t=0;t<s.length;t++){var e=s[t];if(!this.S2||e!==this.S2.index)switch($.yi.l2(e)){case $.yi.Xi.Qi:case $.yi.Xi.w2:$.yi._2(e,this.type,{index:this.index})}}for(let t=0;t<h.length&&(h[t].y&&this.dy<0&&(this.dy=0),h[t].x&&(this.dx=0),0!==this.dx||0!==this.dy);t++);h.find(t=>!!t.y)&&this.dy<0&&(this.dy=0);break;case this.L2.P2:this.D2(t)}},function(t,i=null){t!==$.yi.Xi.Qi&&t!==$.yi.Xi.w2||(i.E2?(this.state=this.L2.A2,this.dx=i.dx,this.dy=i.dy):i.u2?(this.S2=i,this.state=this.L2.N2):i.a2&&(this.state=this.L2.P2,this.dx=i.dx,this.dy=i.dy))},t=>$.u.Ri(t.jt[0],$.u.Yt.Nt)).index},G2:function(i,s,h,e=0,n=null){var r=[];for(let t=0;t<h;t++)r.push([i,s+t*$.yi.m2,$.yi.m2,$.yi.m2,!e||n]);return this.gi($.yi.Xi.C1,{H2:n,color:e||0,t:[[i,s,i+$.yi.m2,s+h*$.yi.m2,!1,!e||n]],jt:r},null,function(t,i=null){i.C2===this.color&&(this.H2=!this.H2,$.q.u1(this.t[0],this.H2),this.jt.forEach(t=>$.u.Ii(t,this.H2)))},t=>t.jt.forEach(t=>$.u.Ri(t,$.u.Yt.C1[e||0]))).index},M2:function(s,h,t,e,i,n,r=null,o=null){var _=[];for(let i=0;i<t;i++)for(let t=0;t<e;t++)_.push([s+i*$.yi.m2,h+t*$.yi.m2,$.yi.m2,$.yi.m2,o]);return this.gi(i,{H2:o,color:r,jt:_,t:[[s,h,s+32*t,h+32*e,!0,o]],Kt:n?[$.u.Yt.ni[r]]:[$.u.Yt.ei[r]]},null,function(t,i=null){i.C2===this.color&&(this.H2=!this.H2,$.q.u1(this.t[0],this.H2),this.jt.forEach(t=>$.u.Ii(t,this.H2)))},i=>{i.jt.forEach(t=>$.u.Ri(t,i.Kt[0]))}).index},B2:function(t,i,s,h){return this.gi(s,{H2:!1,color:h,t:[[t,i+16,t+32,i+32,!1,!0]],jt:[[t,i,32,32,!0]],Kt:[$.u.Yt.ri[0][h],$.u.Yt.ri[1][h]]},function(t){var i=$.q.X(this.qi?this.t[1]:this.t[0])["entities"];i.length?this.H2||(this.H2=!0,$.u.Ri(this.jt[0],this.Kt[1]),$.Gi.Hi.play(),$.yi._2(-1,this.index,{C2:this.color})):this.H2&&(this.H2=!1,$.u.Ri(this.jt[0],this.Kt[0]),$.Gi.Hi.play(),$.yi._2(-1,this.index,{C2:this.color}))},null,t=>{$.u.Ri(t.jt[0],t.Kt[0])}).index},b2:function(t,i,s,h){return this.gi(s,{state:0,color:h,t:[[t,i,t+32,i+32,!1,!0]],jt:[[t,i,32,32,!0]],Kt:[$.u.Yt.C[0][h],$.u.Yt.C[1][h]]},null,function(t,i=0){t!==$.yi.Xi.Qi&&t!==$.yi.Xi.w2||(this.state=0===this.state?1:0,$.u.Ri(this.jt[0],this.Kt[this.state]),$.Gi.Hi.play(),$.yi._2(-1,this.index,{C2:this.color}))},t=>{$.u.Ri(t.jt[0],t.Kt[0])}).index},v2:function(t,i){return this.gi($.yi.Xi.At,{jt:[[t,i,32,32,!0],[t,i+32,32,32,!0]],t:[[t,i-32,t+32,i+64,!1,!0]]},function(t){var i=$.q.X(this.t[0])["entities"];i.length<3||i.find(t=>$.yi.l2(t)===$.yi.Xi.Qi)&&i.find(t=>$.yi.l2(t)===$.yi.Xi.w2)&&i.find(t=>$.yi.l2(t)===$.yi.Xi.Nt)&&$.yi.g2()},null,t=>{$.u.Ri(t.jt[0],$.u.Yt.hi),$.u.Ri(t.jt[1],$.u.Yt.wt)}).index},W2:function(t,i,s){return this.gi(s,{dx:s===$.yi.Xi.O2?-110:110,U2:0,dy:0,jt:[[t,i,32,32,!0],[t,i+32,32,32,!0]],t:[[t+8,i+4,t+32-8,i+64,!1,!0]],Y2:null},function(t){$.entities.bi(this,this.dx*t,this.dy*t);var i,s,{entities:t,h1:h}=$.q.X(this.t[0]),{}=$.entities.Ci(this,h),h=t.find(t=>$.yi.l2(t)===$.yi.Xi.Qi);h&&!$.yi._2(h,this.type)||(i=t.find(t=>$.yi.l2(t)===$.yi.Xi.w2))&&!$.yi._2(i,this.type)?($.Gi.xi.play(),$.j2()):(t=t.find(t=>$.yi.l2(t)===$.yi.Xi.K2),s=h||i||t,this.dx&&(this.U2=this.dx),(h||i)&&t?this.dx=0:(this.dx=this.dx||this.U2,s&&s!==this.Y2&&(this.Y2=s,this.dx=-this.dx,$.u.Ri(this.jt[0],this.dx<0?$.u.Yt.$i:$.u.Yt.oi),$.u.Ri(this.jt[1],this.dx<0?$.u.Yt.Ei:$.u.Yt._i))))},null,t=>{$.u.Ri(t.jt[0],t.dx<0?$.u.Yt.$i:$.u.Yt.oi),$.u.Ri(t.jt[1],t.dx<0?$.u.Yt.Ei:$.u.Yt._i)}).index},V2:function(t,i){return this.gi($.yi.Xi.K2,{t:[[t,i,t+32,i+32,!1,!0]]}).index}};const maps=[[[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,5],[5,6],[1,6],[1,6],[1,6],[1,6],[1,6],[1,6],[1,6],[1,6]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12,78],[12],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,5],[1,6],[6],[6],[6],[1,6],[1,6],[1,6],[1,6],[1,6],[17,37,30],[1,6]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[12,8],[12,30],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[12,8],[12,30],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[12,8],[12,30],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,75],[1,14,8],[12],[12],[12],[12,8],[12],[12],[12],[12,8],[12,30],[4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,5],[6],[6],[1,14,8,6],[12,6],[6],[17,26,41],[12,8,6],[12,6],[12,6],[12,6],[12,8,6],[12,6],[4,6]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,26],[1,14,8],[12],[12],[12],[12,8],[12,41],[12],[12],[12,8],[12],[12],[12],[1,4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,26],[1,14,8],[12],[12],[12],[12,8],[12,41],[12],[12],[12,8],[12],[12],[12],[1,4]],[[1,9],[1,79],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,26],[1,14,8],[12],[12],[12],[12,8],[12,41],[12],[12],[12,8],[12,45],[12,49],[12],[1,4]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,26],[1,14,8],[12],[12,53],[12],[12,8],[12,41],[12],[12],[12,8],[12],[12],[12],[1,4]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3]]],[[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1,79],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1,75],[1,77],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[1,2],[1,9,2],[1,2],[2],[2],[2],[2],[2],[2],[15,41,23],[2],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[15,41,23],[2],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,41],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,41],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,53],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,34],[1,34],[1,34],[1,34],[1,34],[1,34],[2],[15,43,25],[1,2],[2],[1,2],[1,2],[1,2],[1,2],[1,9,2]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[2],[15,43,25],[1,2],[2],[2],[2],[2],[2],[2]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,43],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1,91],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,43],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9,10],[1],[1],[1],[1],[1],[1],[1,55],[1],[1],[1],[1],[1,10],[1],[1],[1],[1],[1,43],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[1],[1],[1],[1],[1],[1,43],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[1],[1,49],[1],[1,45],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[1],[1,78],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2]]],[[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,4],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,4],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1,79],[1],[1],[1,5],[6],[6],[6],[6],[1,7],[1,4],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1,14,8],[12],[12],[1,13,8],[1],[4],[1,77],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[1],[1],[1,14,8,26],[12],[12],[1,13,8],[1],[4],[3],[3],[1],[1,35],[1,35],[1,24],[1,24],[1,24],[1,24],[1,35],[1,35],[1],[1],[1,9]],[[2],[2],[2],[2],[1,34],[26,34],[17,26,41],[6],[6],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[1,2],[2],[1],[1,14,8],[12,41],[1,12],[1,13,8],[1],[1,28],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[2],[2]],[[2],[2],[1,2],[1],[1],[1,14,8,37],[12,41],[1,12],[1,13,8,37],[1],[1,28],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[2],[2]],[[2],[2],[1,2],[1],[1],[14,8,37,23],[12,41,23],[12,23],[13,8,37,23],[1],[1,28],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,2],[1,2],[1,2],[1,2],[2]],[[2],[2],[1,2],[1,91],[1],[1,14,8],[12,41],[12],[1,13,8],[1],[1,28],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,2],[1,2],[1,2],[1,2],[2]],[[2],[2],[2,10],[1,75],[1],[1,14,8],[12,41],[12],[1,13,8],[1],[1,28,10],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[3],[3],[3],[1,3],[1,3],[1,3],[3],[1,36,28],[1,36],[1,36],[1,36],[1,36],[1,36],[2],[1,2],[1],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[1],[1],[1],[2],[2],[1],[1],[1],[1],[1],[1,2],[1,2],[1,2],[1],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[1],[1],[1],[2],[2],[1],[1],[1],[1],[1],[1,2],[1,2],[1,2],[1,2],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[1],[1],[1],[2],[2],[1],[1],[1],[1],[1],[1],[1,2],[1,2],[1,2],[1],[1],[1],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[1],[1],[1],[2],[2],[1],[1],[1],[1],[1,93],[1],[1],[1,2],[1,2],[2],[1,45],[1],[1,49],[1,9]],[[2],[2],[2],[2],[2],[2],[1],[1],[1],[1,2],[1,2,10],[1],[1],[1],[1,54],[1],[1],[1],[1,2,10],[1,2],[2],[1],[1,78],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[1,2],[1,2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2]]],[[[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[6],[1,7],[1],[1],[1],[1],[1],[1],[1,9]],[[4],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[4],[12],[12],[12],[12],[1,28],[1],[1],[1],[1],[1,45],[1],[1,49],[1,9]],[[4],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12,27],[12],[12],[12],[12],[1,28],[1],[1],[1],[1],[1],[1,78],[1],[1,9]],[[4],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12,27],[12],[12],[12],[12],[4],[1],[1],[1],[1],[2],[2],[2],[2]],[[4],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12,27],[12],[12],[12],[12],[4],[1],[1],[1],[1],[1],[1],[1],[1,9,2]],[[4],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[3],[3],[3],[3],[3],[4],[1],[1],[1],[1],[1],[1],[1],[2]],[[4],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12,93],[4],[12],[12],[1,28],[1],[1],[1],[1,91],[1],[1],[1],[2]],[[4],[12],[12],[12],[12],[12],[12],[12,10],[12],[12],[12],[12],[12],[4,10],[12],[12],[1,28,10],[1],[1],[1],[1],[1],[1],[1,55],[2,10]],[[4],[12],[12],[12],[12],[12],[12],[12],[4],[3],[3],[3],[3],[3],[12],[12],[3],[3],[3],[3],[3],[3],[3],[3],[3]],[[4],[12,91],[12],[12],[12],[12],[12],[12],[4],[12],[12],[12],[12],[12],[12,91],[12],[12],[12],[12],[12],[12],[12],[12],[12],[4]],[[4,10],[12],[12],[12],[12],[12],[12],[12],[4,10],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[12],[4,10]],[[1,9,3],[1,3],[1,3],[1,3],[3],[16,29],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[16,29],[1,9,4]],[[12,9],[12],[12],[12],[12],[12,29],[12],[12],[12,8],[12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[12,8],[12,29],[1,9,4]],[[12,9],[12],[12],[12],[12],[12,29],[12],[12],[12,8],[12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[12,8],[12,29],[1,9,4]],[[12,9],[12],[12],[12],[12],[12,29],[12],[12],[12,8],[12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[12,8],[12,29],[1,9,4]],[[12,9],[12,79],[12],[12,54],[12],[12,29],[12],[12],[12,8],[12],[1,12,91],[1,12],[12,8],[1,12],[1,12],[1,12,91],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[12,8],[12,29,93],[1,9,4]],[[12,9],[12],[12],[3],[12,10],[12,29],[12],[12],[12,8],[12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[1,12],[1,12],[12,8],[1,12],[1,12],[1,12],[12,8],[12,29],[1,9,4,10]],[[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3],[3]]],[[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1,106],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1],[1,117],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[1],[1],[1],[1,84],[1,107],[1,85],[1],[1],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[1,9]],[[1,9],[1],[1,117],[1],[1,95],[83],[1,96],[1],[1,117],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[1,9]],[[1,9],[1],[107],[107],[107],[1,107],[1,107],[1,107],[1,107],[1],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[1,9]],[[1,9],[1,117],[107],[107],[107],[1,107],[1,107],[1,107],[1,107],[1,117],[1],[],[],[],[],[],[],[],[],[],[],[],[],[],[1,9]],[[1,9],[107],[107],[107,118],[107],[1,118],[1,107],[1,118],[1,107],[1,107],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[107],[107],[107],[107],[1,107],[1,107],[1,107],[1,107],[1,107],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,9]],[[1,9],[107],[107],[107,108],[107,109],[1,107],[1,108],[1,109],[1,107],[1,107],[1,100],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,45],[1],[1,49],[1,9]],[[1,9],[107],[107],[107,119],[107,119,120],[1,107],[1,120],[1,120],[1,107],[1,107],[1,111],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1],[1,78],[1],[1,9]],[[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2],[2]]]];$.yi={Z2:-1,entities:[null],m2:32,q2:[2,3,4,6,9],Xi:{Qi:45,w2:49,Nt:78,At:79,K2:10,J2:23,z2:24,Q2:25,X2:26,ts:27,ss:28,C1:29,hs:30,es:31,ns:32,rs:34,os:35,$s:36,_s:37,Es:38,ls:39,us:41,fs:42,Ts:43,Rs:53,cs:54,Os:55,T2:75,R2:76,c2:77,d2:91,O2:93},ds:23,Is:43,Ls:[26,27,28,37,38,39],Fs:[23,24,25,34,35,36],Ns:[53,54,55],As:[75,76,77],Ps:[23,26,30,34,37,41,53,75],Ss:[24,27,31,35,38,42,54,76],Ds:[25,28,32,36,39,43,55,77],ws:[41,42,43,32,31,30,29],ps:[34,35,36,37,38,39,41,42,43],kt:[9,10],Gs:{Hs:1,xs:2,Cs:3},Ms:{},ACTIVE:null,init:function(){return this.ACTIVE=this.Xi.Qi,this.g2(0),Promise.resolve()},update:function(i){if($.Ti)if($.input.V($.input.P.C)&&(this.ACTIVE=this.ACTIVE===this.Xi.Qi?this.Xi.w2:this.Xi.Qi),$.input.V($.input.P.M))this.g2(-1);else for(let t=1;t<this.entities.length;t++)this.entities[t].update&&this.entities[t].update(i)},l2:function(t){return this.entities[t].type},_2:function(t,i,s=null){if(-1!==t)return(t=this.entities[t])&&t.message&&t.message(i,s);for(let t=1;t<this.entities.length;t++)this.entities[t].message&&this.entities[t].message(i,s)},Wi:function(t,i=null,s=null){var h={type:t,update:i,message:s};for(let t=1;t<this.entities.length;t++)if(!this.entities[t])return h.index=t,this.entities[t]=h,t;this.entities.push(h);t=this.entities.length-1;return this.entities[t].index=t},Bs:function(t){this.entities[t]=null},bs:function(){this.entities=[null]},g2:function(t){this.bs(),$.input.Y(),$.u.Ni(),$.u.Pi(),$.q.o1(),t?-1<t&&(this.Z2=t):this.Z2++,this.Z2===maps.length-1&&$.vs("end-game-text");var _=maps[this.Z2],i=[],E=[],e=[];for(let o=0;o<_.length;o++)for(let r=0;r<_[o].length;r++){var n=_[o][r],l=r*this.m2,u=o*this.m2;if(Array.isArray(n))for(let h=0;h<n.length;h++)if(Object.values(this.Xi).includes(n[h])){let t=r,s=o;if(n[h]>=this.ds&&n[h]<=this.Is){if(e.includes(`${n[h]},${r},`+o))continue;for(let i=r;i<_[o].length&&_[o][i].includes(n[h]);i++){e.push(`${n[h]},${i},`+o),t=i;for(let t=o+1;t<_.length&&_[t][i].includes(n[h]);t++)e.push(`${n[h]},${i},`+t),s=t}}i.push({x:r,y:o,w:t-r+1,I:s-o+1,gs:n[h]})}else if(this.q2.includes(n[h])){if($.u.ai($.u.Jt,n[h],l,u,this.m2,this.m2),!E.includes(r+","+o)){let e,n;for(e=r+1;e<_[o].length&&(!E.includes(e+","+o)&&_[o][e].find(t=>this.q2.includes(t)));e++);for(n=o+1;n<_.length&&(!E.includes(r+","+n)&&_[n][r].find(t=>this.q2.includes(t)));n++);if(e>r+1&&n>o+1){let s,h;for(let i=o+1;i<n;i++){let t;for(t=r+1;t<e&&(!E.includes(t+","+i)&&_[i][t].find(t=>this.q2.includes(t)));t++)(i===o+1||t<s)&&(s=t);if(!s||t===r+1)break;h=i}if(s&&h){for(let i=r;i<=s;i++)for(let t=o;t<=h;t++)E.push(i+","+t);$.q.e1(l,u,s*this.m2+this.m2,h*this.m2+this.m2,!0)}else{for(let t=r;t<e;t++)E.push(t+","+o);for(let t=o;t<n;t++)E.push(r+","+t);$.q.e1(l+this.m2,u,e*this.m2,u+this.m2,!0),$.q.e1(l,u,l+this.m2,n*this.m2,!0)}}else{if(e>r+1)for(let t=r;t<e;t++)E.push(t+","+o);else if(n>o+1)for(let t=o;t<n;t++)E.push(r+","+t);else E.push(r+","+o);$.q.e1(l,u,e*this.m2,n*this.m2,!0)}}}else $.u.ai($.u.Jt,n[h],l,u,this.m2,this.m2);else $.u.ai($.u.Jt,n,l,u,this.m2,this.m2)}var s=[];for(let t=0;t<i.length;t++)i[t].gs!==this.Xi.O2&&i[t].gs!==this.Xi.d2||s.push(t);for(let t=0;t<s.length;t++){var h=i[s[t]];i.splice(s[t],1),i.push(h)}var t=i.findIndex(t=>t.gs===this.Xi.Nt),r=i[t],t=(i.splice(t,1),i.push(r),i.findIndex(t=>t.gs===this.Xi.w2)),r=i[t],t=(i.splice(t,1),i.push(r),i.findIndex(t=>t.gs===this.Xi.Qi)),r=i[t];i.splice(t,1),i.push(r);for(let t=0;t<i.length;t++){var o=i[t].gs,f=i[t].x,a=i[t].y,T=this.Ps.includes(o)?this.Gs.Hs:this.Ss.includes(o)?this.Gs.xs:this.Ds.includes(o)?this.Gs.Cs:null,R=!this.ps.includes(o);o===this.Xi.Qi||o===this.Xi.w2?$.entities.Ui(o,f*this.m2,a*this.m2):o===this.Xi.Nt?$.entities.I2(f*this.m2,a*this.m2):this.ws.includes(o)?$.entities.G2(f*this.m2,a*this.m2,i[t].I,T,R):this.Fs.includes(o)?$.entities.M2(f*this.m2,a*this.m2,i[t].w,i[t].I,o,!1,T,R):this.Ls.includes(o)?$.entities.M2(f*this.m2,a*this.m2,i[t].w,i[t].I,o,!0,T,R):this.Ns.includes(o)?$.entities.B2(f*this.m2,a*this.m2,o,T):this.As.includes(o)?$.entities.b2(f*this.m2,a*this.m2,o,T):o===this.Xi.At?$.entities.v2(f*this.m2,a*this.m2):o===this.Xi.O2||o===this.Xi.d2?$.entities.W2(f*this.m2,a*this.m2,o):o===this.Xi.K2&&$.entities.V2(f*this.m2,a*this.m2)}}},$.Ws=0,$.Ti=!1,$.ys=!1,$.init=function(){$.u.init(800,600).then(()=>$.input.init()).then(()=>$.q.init(100)).then(()=>$.yi.init()).then(()=>$.loop())},$.loop=function(){var t=$.Us(Date.now());$.input.update(t),$.Ti?($.ys&&($.ys=!1,$.yi.g2(-1),$.vs()),$.yi.update(t),$.u.update(t)):$.input.W&&($.Ti=!0),window.Di($.loop)},$.j2=function(){$.Ti=!1,$.ys=!0,$.vs("restart-prompt",!0)},$.vs=function(t,i=!1){i&&$.u.clear(),document.getElementById("start-prompt").style.display="start-prompt"===t?"block":"none",document.getElementById("restart-prompt").style.display="restart-prompt"===t?"block":"none","end-game-text"===t?(document.getElementById("end-game-text-1").style.display="block",document.getElementById("end-game-text-2").style.display="block"):(document.getElementById("end-game-text-1").style.display="none",document.getElementById("end-game-text-2").style.display="none")},$.Us=function(t){var i=t-$.Ws;return i===($.Ws=t)||500<i?0:i/1e3},window.addEventListener("load",$.init,!1),window.addEventListener("click",()=>{$.Ti||($.Ti=!0)});