function endGame(){clearInterval(counter);if(points>hiScore){hiScore=points}game=[false,false,false,false,false,false,false,false,false];cats=0;points=0;up=[false,false,false,false,false,false,false,false,false];hit=[false,false,false,false,false,false,false,false,false];pos=[1,1,1,1,1,1,1,1,1];timeLeft=0;started=false}function render(){function e(e,t,n){e.beginPath();e.moveTo(t,n);e.bezierCurveTo(t,n-50,t+100,n-50,t+100,n);e.moveTo(t,n);e.bezierCurveTo(t,n+50,t+100,n+50,t+100,n);e.fill()}var t=document.getElementById("c"),n=t.getContext("2d");if(started){n.fillStyle="#808090";n.fillRect(0,0,500,500);n.strokeStyle="#FFFFFF";n.fillStyle="#FFFFFF";for(var r=0;r<9;r++){e(n,50+r%3*150,100+100*(r<3?0:r<6?1:2));if(pos[r]<=9&&!up[r]){game[r]=false}if(game[r]){if(pos[r]<81&&up[r]){pos[r]+=10}else if(pos[r]>9&&!up[r]){pos[r]-=10}n.globalCompositeOperation="darker";n.drawImage(catImg,0,0,56,pos[r],70+r%3*150,110+100*(r<3?0:r<6?1:2)-pos[r],56,pos[r]);n.globalCompositeOperation="source-over"}if(hit[r]){n.globalCompositeOperation="darker";n.drawImage(hitImg,50+r%3*150,50+100*(r<3?0:r<6?1:2));n.globalCompositeOperation="source-over"}}n.font="20px Helvetica bold";n.fillStyle="#2010CC";n.fillText("Cats hit: "+cats,50,430);n.fillText("Points:   "+points,50,460);n.font="30px Helvetica bold";n.fillText("Time left: "+timeLeft,150,35)}else{n.fillStyle="#A0A0F0";n.fillRect(0,0,500,500);n.fillStyle="#000000";n.font="30px Helvetica bold";n.fillText("Highest score: "+hiScore,150,35);n.font="40px Helvetica bold";n.fillText("Black Cat Lucky Hunter",50,100);n.font="15px Helvetica bold";n.fillText("Everybody knows black cats bring bad luck!",50,150);n.fillText("They are from the evil cat dimension and are",50,175);n.fillText("trying dominate our universe! You must ",50,200);n.fillText("stop them from leaving their inter-dimensional ",50,225);n.fillText("portals by pressing the keys for the respective portals, as follows:",50,250);n.fillText("Q     W     E",200,300);n.fillText("A     S     D",200,350);n.fillText("Z     X     C",200,400);n.font="20px Helvetica bold";n.fillText("Press spacebar to start the game",120,450)}}window.game=[false,false,false,false,false,false,false,false,false];window.cats=0;window.points=0;window.up=[false,false,false,false,false,false,false,false,false];window.hit=[false,false,false,false,false,false,false,false,false];window.pos=[1,1,1,1,1,1,1,1,1];window.started=false;window.hiScore=0;window.timeLeft=0;window.catImg=new Image;catImg.src="cat.jpg";window.hitImg=new Image;hitImg.src="hit.jpg";window.counterId=false;window.onkeydown=function(e){var t=e.which||e.keyCode;var n={Q:81,W:87,E:69,A:65,S:83,D:68,Z:90,X:88,C:67,SPACE:32};if(started){if(t==n["Q"]){if(game[0]){points+=10;cats++;game[0]=false;pos[0]=1;up[0]=false;hit[0]=true;setTimeout(function(){hit[0]=false},200)}else points-=10}else if(t==n["W"]){if(game[1]){points+=10;cats++;game[1]=false;pos[1]=1;up[1]=false;hit[1]=true;setTimeout(function(){hit[1]=false},200)}else points-=10}else if(t==n["E"]){if(game[2]){points+=10;cats++;game[2]=false;pos[2]=1;up[2]=false;hit[2]=true;setTimeout(function(){hit[2]=false},200)}else points-=10}else if(t==n["A"]){if(game[3]){points+=10;cats++;game[3]=false;pos[3]=1;up[3]=false;hit[3]=true;setTimeout(function(){hit[3]=false},200)}else points-=10}else if(t==n["S"]){if(game[4]){points+=10;cats++;game[4]=false;pos[4]=1;up[4]=false;hit[4]=true;setTimeout(function(){hit[4]=false},200)}else points-=10}else if(t==n["D"]){if(game[5]){points+=10;cats++;game[5]=false;pos[5]=1;up[5]=false;hit[5]=true;setTimeout(function(){hit[5]=false},200)}else points-=10}else if(t==n["Z"]){if(game[6]){points+=10;cats++;game[6]=false;pos[6]=1;up[6]=false;hit[6]=true;setTimeout(function(){hit[6]=false},200)}else points-=10}else if(t==n["X"]){if(game[7]){points+=10;cats++;game[7]=false;pos[7]=1;up[7]=false;hit[7]=true;setTimeout(function(){hit[7]=false},200)}else points-=10}else if(t==n["C"]){if(game[8]){points+=10;cats++;game[8]=false;pos[8]=1;up[8]=false;hit[8]=true;setTimeout(function(){hit[8]=false},200)}else{points-=10}}}else{if(t==n["SPACE"]){started=true;timeLeft=30;counter=setInterval(function(){timeLeft--;if(timeLeft==0)endGame()},1e3)}}};setInterval(render,10);setInterval(function(){var e=Math.random()*10001;e=Math.floor(e<1e3?1e3:e);var t=Math.floor(Math.random()*10);while(game[t]){t=Math.floor(Math.random()*10)}game[t]=true;setTimeout(function(){game[t]=false;pos[t]=1},e);up[t]=true;setTimeout(function(){up[t]=false},e/2)},1e3)