AFRAME.registerSystem("animator",{schema:{},init:function(){this.entities=[]},registerMe:function(e){this.entities.push(e)},unregisterMe:function(e){var t=this.entities.indexOf(e);this.entities.splice(t,1)},animateNext:function(i){"reachedtel59"==i&&this.changeScene(),this.entities.forEach(function(e){var t=e.components.animator;t.data.conditionAppear==i&&t.appear(),t.data.conditionDisappear==i&&t.disappear(),t.data.conditionAnimate==i&&t.animate()})},changeScene:function(){this.treesCounter=0;var e=this;setTimeout(function(){AFRAME.utils.entity.setComponentProperty(e.sceneEl,"background.color","#a3e6ff"),AFRAME.utils.entity.setComponentProperty(e.sceneEl,"fog.color","#a3e6ff")},3e3)}}),AFRAME.registerSystem("programaticsound",{schema:{context:{default:new AudioContext},frequencies:{default:{C:349.2,"C#":370,D:392,"D#":415.3,E:440,F:466.2,"F#":493.9,G:523.3,"G#":554.4,A:587.3,"A#":622.3,B:659.3}}},init:function(){this.currentNote=0,this.gain=.8,this.frequenciesArray=["C","D","E","F","G","A","B"]},playSound:function(e){var t=this.data.context,i=this.data.frequencies,n=t.createOscillator();n.frequency.value=i[e];var s=t.createGain();s.gain.value=this.gain,n.connect(s),s.connect(t.destination),n.start(t.currentTime),s.gain.setTargetAtTime(0,t.currentTime,.25)},playRandomSound:function(){var e=this.frequenciesArray[Math.floor(Math.random()*this.frequenciesArray.length)];this.playSound(e)}}),AFRAME.registerSystem("teleporter",{schema:{},init:function(){this.entities=[]},registerMe:function(e){this.entities.push(e)},unregisterMe:function(e){var t=this.entities.indexOf(e);this.entities.splice(t,1)},getId:function(e){return"tel"+this.entities.indexOf(e)}}),AFRAME.registerSystem("door",{schema:{},init:function(){this.entities=[],this.setDefaultValues()},setDefaultValues:function(){this.programedMelody="",this.playerMelody="",this.listening=!1},registerMe:function(e){this.entities.push(e)},unregisterMe:function(e){var t=this.entities.indexOf(e);this.entities.splice(t,1)},getId:function(e){return this.entities.indexOf(e)},startListening:function(e,t){this.currentDoor=e,this.programedMelody=t,this.listening=!0,this.playerMelody=""},registerNote:function(e){this.listening&&(this.playerMelody+=e,this.programedMelody.length==this.playerMelody.length&&(this.programedMelody==this.playerMelody?this.currentDoor.components.door.open():this.currentDoor.components.door.keepClosed(),this.setDefaultValues()))}});