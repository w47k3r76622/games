function detectFood(){for(var e in foods)foods[e].move(),Math.sqrt(Math.pow(foods[e].x-hero.x,2)+Math.pow(foods[e].y-hero.y,2))<=foods[e].size/2+hero.size/2&&(eatAudio(),hero.view>limitUpView?hero.view=limitUpView:hero.view+=plusView,hero.hp<10&&(hero.hp+=.5),foods.splice(e,1),e--)}function detectGuard(){for(var e in guards)guards[e].move(),Math.sqrt(Math.pow(guards[e].x-hero.x,2)+Math.pow(guards[e].y-hero.y,2))<=guards[e].size/2+hero.size/2?(hitAudio(),hero.hp-=1,blood=!0,setTimeout(function(){blood=!1},200),hero.hp<=0&&(deadAudio(),newGame=!0,s=3,clearInterval(minusView),clearInterval(setGuard),clearInterval(setGuard2),clearInterval(countScore)),guards.splice(e,1),e--):guards[e].x<0-guards[e].size||guards[e].x>WIDTH+guards[e].size?(guards.splice(e,1),e--):(guards[e].y<0-guards[e].size||guards[e].y>HEIGHT+guards[e].size)&&(guards.splice(e,1),e--)}function resetGame(){guards.length=0,foods.length=0,score=0,gnum=4,guardSpeed=1,guardSpeed2=5}var drawPlay=function(){ctx.save(),_dark(),_view(),_scene(),_hero(),_guard(),_food(),ctx.restore(),_time(),_hp(),_animate()},init=function(){resetGame(),createFoods(fnum),createHero(),start=(new Date).getTime(),guardSpeedUp=1,minusView=setInterval(function(){hero.view>limitView&&focus&&hero.view--},minusSpeed),setGuard=setInterval(function(){if(focus){gnum>gnumLimit?gnum=gnumLimit:gnum+=gnumRate,guardSpeed>guardSpeedLimit?guardSpeed=guardSpeedLimit:guardSpeed+=guardSpeedUp;for(var e=0;e<gnum;e++)setTimeout(function(){createGuards()},Math.random()*guardTime)}},guardTime);var e=0;setGuard2=setInterval(function(){focus&&score>beginScore&&(guardSpeed2>guardSpeedLimit2?guardSpeed2=guardSpeedLimit2:guardSpeed2+=guardSpeedUp2,e>640&&(e=0),createGuards2(e),e+=30)},guardTime2),countScore=setInterval(function(){focus&&(score+=1)},100)},update=function(){(keys[38]||keys[87])&&hero.y-hero.speed>hero.size/2&&(hero.y-=hero.speed),(keys[40]||keys[83])&&hero.y+hero.speed<HEIGHT-hero.size/2&&(hero.y+=hero.speed),(keys[37]||keys[65])&&hero.x-hero.speed>hero.size/2&&(hero.x-=hero.speed),(keys[39]||keys[68])&&hero.x+hero.speed<WIDTH-hero.size/2&&(hero.x+=hero.speed),detectFood(),detectGuard(),foods.length<=0&&createFoods(fnum)},drawOver=function(){_over()},drawStarter=function(){_starter()},drawPause=function(){_pause()},drawDescribe=function(){_describe()};
