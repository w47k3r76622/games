!function(t){var i={};function h(s){if(i[s])return i[s].t;var e=i[s]={i:s,h:!1,t:{}};return t[s].call(e.t,e,e.t,h),e.h=!0,e.t}h.s=t,h.c=i,h.d=function(t,i,s){h.o(t,i)||Object.defineProperty(t,i,{l:!0,get:s})},h.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},h.g=function(t,i){if(1&i&&(t=h(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.u)return t;var s=Object.create(null);if(h.r(s),Object.defineProperty(s,"default",{l:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)h.d(s,e,function(i){return t[i]}.bind(null,e));return s},h.n=function(t){var i=t&&t.u?function(){return t.default}:function(){return t};return h.d(i,"a",i),i},h.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},h.M="",h(h.p=0)}([function(t,i,h){h(3),t.t=h(1)},function(t,i,h){},,function(t,i,h){"use strict";h.r(i);var s={v:function(t){const i=document.createElement("div");return t&&(i.innerHTML=t),i.childNodes[0]}};var e=class{constructor(t){this.m=0,this.delta=0,this.F=t,this.O=this.O.bind(this),this.O(0)}O(t){this.delta=t-this.m,this.m=t,this.j=this.delta/1e3,this.paused||this.F(this.delta),this.k=requestAnimationFrame(this.O)}pause(t){this.paused=t||!this.paused}stop(){cancelAnimationFrame(this.k)}};var n=class{constructor(t,i){this.canvas=t,this.context=i,this.T={}}C({key:t="c1",bgColor:i,width:h,height:s}){const e=document.createElement("canvas");e.width=h||this.canvas.width,e.height=s||this.canvas.height;const n=e.getContext("2d");return n.imageSmoothingEnabled=!1,i&&(n.fillStyle=i,n.fillRect(0,0,e.width,e.height)),this.T[t]={canvas:e,context:n,S:this.S,P:e.width/2,A:e.width/2,clear:()=>n.clearRect(0,0,e.width,e.height),trace:this.trace,strokeRect:this.strokeRect},this.T[t]}S({x:t,y:i,color:h,width:s=30,height:e=60}){this.context.fillStyle=h||"#000",this.context.fillRect(t,i,s,e)}strokeRect({x:t,y:i,color:h,width:s=30,height:e=60}){this.context.strokeStyle=h||"#000",this.context.strokeRect(t,i,s,e)}L(t,i=2,h=1,s="#fff",e=.1,n=[5,3],r){const o=`k${t.width}${t.height}${i}${s}`;if(!this.T[o]){const e=this.C({key:o,width:t.width+2*Math.abs(i)+2*h,height:t.height+2*Math.abs(i)+2*h}),r=e.context;e.canvas,r.lineWidth=h,r.strokeStyle=s,r.setLineDash(n)}const a=this.T[o],c=a.canvas,l=a.context;l.clearRect(0,0,c.width,c.height),l.strokeRect(h/2,h/2,t.width+h+i,t.height+h+i),(r||this.context).drawImage(c,0,0,c.width,c.height,t.x-i/2-h,t.y-i/2-h,c.width,c.height),l.lineDashOffset+=e}R(t,i){if(!this.T.c1){const t=this.C({key:"c1",bgColor:"#FFF",width:this.canvas.width+50,height:this.canvas.height+50}),i=t.canvas,h=t.context,s=h.getImageData(0,0,i.width,i.height);h.putImageData(this.D(s),0,0),this.alpha=.3}this.alpha+=this.$||0,this.alpha>1&&(this.alpha=1),this.alpha<.1&&(this.alpha=.1),this.context.globalAlpha=this.alpha,this.context.drawImage(this.T.c1.canvas,t,i,this.canvas.height,this.canvas.height,0,0,this.canvas.width,this.canvas.height),this.context.globalAlpha=1}B(t){this.$=t||.02}Y(){const t=this.context.createRadialGradient(this.canvas.width/2,this.canvas.height/2,0,this.canvas.width/2-10,this.canvas.height/2,this.canvas.width/2+20);t.addColorStop(.9,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,0.2)"),this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}D(t){const i=function(t,i){const h=[];for(let s=0;s<t*i;s++)h.push(Math.round(Math.random()));return h}(t.width,t.height);for(let h=0;h<t.data.length;h+=4){let s=i[Math.floor(h/4)]?255:0;s*=Math.random(),t.data[h]=s,t.data[h+1]=s,t.data[h+2]=s}return t}};function r(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var h=[],s=!0,e=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(h.push(r.value),!i||h.length!==i);s=!0);}catch(t){e=!0,n=t}finally{try{s||null==o.return||o.return()}finally{if(e)throw n}}return h}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=class{constructor({width:t=200,height:i=200}={}){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.context=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="#1d0b15",this.context.imageSmoothingEnabled=!1,this.J=new n(this.canvas,this.context)}get N(){return this.canvas.clientWidth/this.canvas.width}get width(){return this.canvas.width}get height(){return this.canvas.height}get X(){const t=this.canvas.getBoundingClientRect();return Number.isFinite(t.left)?{x:t.left,y:t.top,width:t.width,height:t.height}:t}I(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}S({x:t,y:i,color:h,width:s=30,height:e=60}){this.context.fillStyle=h||"#000",this.context.fillRect(t,i,s,e)}H(){this.J.Y()}q(t){this.U=this.U||1,this.U>5&&(this.U=0),this.J.R(Math.round(50*Math.random()),Math.round(50*Math.random()),t),this.U+=1}K(t,i,h=1){const s=this.X;return t.pageY<s.y+i.y*h+i.height*h&&t.pageY>s.y+i.y*h&&t.pageX<s.x+i.x*h+i.width*h&&t.pageX>s.x+i.x*h}L(...t){this.J.L(...t)}V(t,i){const h=[];let s=0;for(;s<2*t;){const t={start:[0,s],end:[2*i,s],width:3};s+=7,h.push(t)}return h}_(){const t=this.canvas,i=this.context,h=t.height,s=t.width;i.save(),i.globalAlpha=.05,i.lineWidth=h/8,i.strokeStyle="#FFF",void 0===this.W&&(this.W=h+200),this.W<-200&&(this.W=h+200),this.W-=10;const e=this.W;i.beginPath(),i.moveTo(0,e),i.lineTo(s,e),i.moveTo(0,e+h/4),i.lineTo(s,e+h/4),i.closePath(),i.stroke(),i.restore()}Z(){if(this.G)return void this.context.drawImage(this.G,0,0);const t=document.createElement("canvas"),i=t.getContext("2d");t.width=this.canvas.width,t.height=this.canvas.height,i.save(),i.setTransform(1,0,0,1,0,0),i.scale(.5,.5),i.globalAlpha=.2,i.lineWidth="0.1",i.strokeStyle="#000",this.tt=this.tt||this.V(t.height,t.width),this.tt.forEach(t=>{i.lineWidth=t.width,i.beginPath(),i.moveTo(t.start[0],t.start[1]),i.lineTo(t.end[0],t.end[1]),i.closePath(),i.stroke()}),i.restore(),this.G=t}it(t,i,h="#FFF"){const s=this.context;this.globalAlpha=this.globalAlpha||.2,Math.random()>.2&&(this.globalAlpha="0.2"),Math.random()>.9&&(this.globalAlpha="0.25"),Math.random()>.9&&(this.globalAlpha="0.3"),s.save(),s.globalAlpha=this.globalAlpha;const e=r(t,3),n=e[0],o=n.x,a=n.y,c=e[1],l=c.x,u=c.y,d=e[2],w=d.x,y=d.y;s.lineWidth=3,s.strokeStyle=h,s.fillStyle=h,s.beginPath(),s.moveTo(o,a),s.lineTo(l,u),s.lineTo(w,y),s.closePath(),s.fill(),s.restore()}};const a=!1;let c=!0,l=3;c||(l=1);let u,d=!1;setTimeout(()=>{d=!0},c?8e3:2e3);let w=69,y=!1,f=!1;function g(t,i,h,s){t&&(i.ht=0,t.forEach(t=>{t.z===h&&t.update(i,s),"bird"===t.type&&t.st&&(i.ht+=1)}))}setTimeout(()=>{y=!0},3e3);var x=function(t,i){const h=t.et,s=t.entities,e=t.level,n=e.nt;y&&l>1&&h.J.B(-.01),c&&((u=u||h.J.C({key:"title",width:h.canvas.width,height:h.canvas.height,bgColor:"#000"})).context.font=`${w}px monospace`,y||(u.context.fillStyle="#000"),y||u.clear(),y||u.S({x:0,y:0,width:u.canvas.width,height:u.canvas.height}),y&&(w+=11),y&&(u.context.globalCompositeOperation="destination-out"),u.context.fillStyle="#FFF",u.context.fillText("Bot's",110-w/3,w/3+100),u.context.fillText("Back",110-w/3,w/3+200)),h.rt=[],e.update&&t.level.update(),h.S({x:0,y:0,width:h.canvas.width,height:h.canvas.height,color:"#1d0b15"}),h.S({x:0,y:200,width:h.canvas.width,height:h.canvas.height,color:"#1d122b"}),h.S({x:0,y:400,width:h.canvas.width,height:h.canvas.height,color:"#34085d"}),g(s,t,1,i),g(s,t,2,i),n&&n.ot.forEach(h=>h.update(t,i)),n&&n.ot[0].at(),g(s,t,3,i),g(s,t,4,i),g(s,t,5,i),h.rt.forEach(t=>t()),n&&n.ot[0].ct(),g(s,t,6,i),h.selected&&h.selected.selected&&!h.selected.lt&&h.L(h.selected,10,2,"#fff"),e.ut&&(h.S({x:0,y:0,width:h.width,height:h.width,color:"#FFF"}),h.context.fillStyle="#000",h.context.textAlign="left",e.dt&&h.context.fillText("Bot's Back",80,90),e.dt&&h.context.fillText("Jordan J Watkins - JS13K 2019",80,120)),function(t){l>0&&d&&(l-=.05),l<1&&(l=1),t.context.drawImage(t.canvas,-t.canvas.width*l/2-500*(l-2),-t.canvas.height*l/2-300*(l-2)+32*(l-1),t.canvas.width*l,t.canvas.height*l)}(h),h.q(),c&&h.context.drawImage(u.canvas,0,0,h.canvas.width,h.canvas.height),h._(),h.Z(),h.H(),"basics"===t.wt&&!a||f||(f=!0,l=1,c=!1,t.ft.yt=100,t.et.J.B(-1))};const b=()=>({wt:"",gt:{}});var M=class{constructor(t){this.xt=t,this.load(),this.state||(this.state=b(),this.save())}bt(t){this.state.gt[t]=this.state.gt[t]||{},this.save()}save(){try{window.localStorage.setItem(this.xt,JSON.stringify(this.state))}catch(t){}}load(){try{this.state=JSON.parse(window.localStorage.getItem(this.xt))}catch(t){}}};var p=class{constructor(){this.x=1100*Math.random()-100,this.y=600*Math.random(),this.z=1,this.width=1100*Math.random(),this.height=30+100*Math.random(),this.color="#111",this.speed={x:11+10*Math.random()}}Mt(t){t.entities=t.entities.filter(t=>t!==this)}update(t,i){const h=t.et;this.x>h.width&&(this.x=-2*this.width-this.width*Math.random()),this.x+=this.speed.x/16*i,h.S(this)}};function v(t,i,h){return i in t?Object.defineProperty(t,i,{value:h,l:!0,pt:!0,vt:!0}):t[i]=h,t}var m=class{constructor(t={}){Object.assign(this,{x:0,y:0,z:3,width:20,height:20,color:"#804939"},t),this.Ft=this.height/5}update({et:t}){t.S(function(t){for(var i=1;i<arguments.length;i++){var h=null!=arguments[i]?arguments[i]:{},s=Object.keys(h);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(h).filter(function(t){return Object.getOwnPropertyDescriptor(h,t).l}))),s.forEach(function(i){v(t,i,h[i])})}return t}({},this,{color:this.color})),t.S({width:this.Ft,height:this.Ft,x:280,y:this.y+1.2*this.Ft,color:"#663931"}),t.S({width:this.Ft,height:this.Ft,x:780,y:this.y+.9*this.Ft,color:"#8F563B"})}};var F=class{constructor(t){this.Ot=Date.now(),this.jt=0,Object.assign(this,{},t),this.kt=20;const i=this.target,h=(i.x,i.y,i.width),s=i.height;this.Tt=(new n).C({width:3*h,height:3*s})}Ct(){const t=this.target,i=t.x,h=t.y;return{x:i+t.width/2,y:h+t.height/2}}St(){const t=Date.now();t===this.Ot?this.jt+=1:this.jt=0;const i=`${t}-${this.jt}`;return this.Ot=t,i}Pt(){const t=this.target,i=this.Tt,h=i.P,s=i.A;return{x:h+t.width/2*Math.random()*this.At(),y:s+t.height/2*Math.random()*this.At(),Lt:1.1*Math.random()*this.At(),Rt:1.1*Math.random()*this.At(),color:Math.random()>.5?"#ddd":"#999"}}Dt(t){const i=this.target,h=this.Tt,s=this.At,e=h.P,n=h.A;t.x=e+i.width/2*Math.random()*s(),t.y=n+i.height/2*Math.random()*s(),t.Lt=1.1*Math.random()*s(),t.Rt=1.1*Math.random()*s(),t.color=Math.random()>.5?"#ddd":"#999"}$t(t={}){this.target;const i=this.Tt,h=this.At,s=i.P;return i.A,t.x=s+7*Math.random()*h(),t.y=0,t.Lt=.7*Math.random()*h(),t.Rt=1.5+.5*Math.random(),t.color=Math.random()>.5?"#ddd":"#999",t}Bt(){const t=this.target,i=(this.kt,this.Et),h=this.Yt,s=this.Tt,e=t.width;t.height,this.Et=i||0,h||(this.Yt=Array(2*e).fill(0).map(()=>this.$t())),this.Yt.forEach(t=>{t.x+=t.Lt,t.y+=t.Rt,s.context.globalAlpha=.3-.1*Math.random();const i=Math.abs(s.P-t.x),h=Math.abs(s.A-t.y);(h>s.canvas.width/3||i>s.canvas.height/20)&&(s.context.globalAlpha=.1),(h>s.canvas.width/2||i>s.canvas.height/16)&&this.$t(t),this.Jt(t,10,t.color),s.context.globalAlpha=1,t.Rt+=.1}),this.Et+=1}Nt(){const t=this.target,i=this.kt,h=this.Et,s=this.Yt,e=this.Tt,n=t.width;t.height,this.Et=h||0,s||(this.Yt=Array(2*n).fill(0).map(()=>this.Pt())),this.Yt.forEach(t=>{t.x+=t.Lt,t.y+=t.Rt,e.context.globalAlpha=.3-.1*Math.random();const h=Math.abs(e.P-t.x),s=Math.abs(e.A-t.y);(s>e.canvas.width/3||h>e.canvas.height/3)&&(e.context.globalAlpha=.1),(s>e.canvas.width/3||h>e.canvas.height/3)&&this.Dt(t),this.Jt(t,i,t.color),e.context.globalAlpha=1}),this.Et+=1}At(){return.5-Math.random()>0?1:-1}Jt(t,i=4,h){this.Tt.S({x:t.x-i/2,y:t.y-i/2,width:i,height:i,color:h})}Xt(){const t=this.Ct(),i=t.x,h=t.y;this.target.et.context.drawImage(this.Tt.canvas,0,0,this.Tt.canvas.width,this.Tt.canvas.height,i-this.Tt.canvas.width/2+this.target.width/2*this.target.zt,h-this.Tt.canvas.height/2,this.Tt.canvas.width,this.Tt.canvas.height)}It(){this.Ht=this.Ht||1,this.Ht+=1,this.Tt.clear(),this.Nt(),this.Xt()}qt(){this.Ht=this.Ht||1,this.Ht+=1,this.Tt.clear(),this.Bt();const t=this.Ct(),i=t.x,h=t.y;this.target.et.context.drawImage(this.Tt.canvas,0,0,this.Tt.canvas.width,this.Tt.canvas.height,i-this.Tt.canvas.width/2,h+this.Tt.canvas.height/2-this.target.height,this.Tt.canvas.width,this.Tt.canvas.height)}};var O=class{constructor(t){this.et=t.et,this.Ut=t,this.J=new n(t.et.canvas,t.et.context),this.Kt={"stop-go":{values:["stop","go"],value:"stop",rect:{}},"slow-fast":{values:["slow","fast"],value:"slow",rect:{}},"dont-climb":{values:["dont","climb"],value:"climb",rect:{}}},this.Vt=["stop-go"],this.Ut._t.thruster&&this.Vt.push("dont-climb"),this.Ut._t.booster&&this.Vt.push("slow-fast"),this.Wt=this.Ut.lt?this.et.J.C({key:"birdMenu",width:30,height:30}):this.et.J.C({key:"birdMenu",width:200,height:30*this.Vt.length+25,bgColor:"#000"}),(this.Ut.speed.x>0||this.Ut.speed.y>0)&&(this.Kt["stop-go"].value="go"),this.Ut.lt||this.Zt(),this.Ut.lt||"bird"!==this.Ut.type||this.Ut.Gt||setTimeout(()=>{this.Qt(),this.et.selected=this.Ut,this.Ut.selected=!0},1500),this.Ut.lt&&this.Ut.ti&&(this.Qt(),this.et.selected=this.Ut,this.Ut.selected=!0),this.fontSize=18,this.padding=7,this.ii=-20}hi(){this.Wt=this.et.J.C({key:"birdMenu",width:200,height:30*this.Vt.length+25,bgColor:"#000"})}Mt(){this.si()}ei(t){if(this.Kt[t])return this.Kt[t]}Zt(){this.ni=(t=>this.ri(t)),this.et.canvas.addEventListener("click",this.ni)}si(){this.et.canvas.removeEventListener("click",this.ni)}ri(t){this.Vt.forEach(i=>{const h=this.Kt[i],s=h.rect;this.oi(t,s)&&!h.disabled&&(h.value=h.values[0]===h.value?h.values[1]:h.values[0])})}ai(t){if(!this.ci)return!1;const i=this.et,h=i.N,s=this.li(),e={x:s.x,y:s.y,height:this.Wt.canvas.height,width:this.Wt.canvas.width};return i.K(t,e,h)}oi(t,i){if(!this.ci)return!1;const h=this.et,s=h.N,e=this.li(),n=e.x,r=e.y,o={x:n+i.x/s,y:r+i.y/s,height:i.height,width:i.width};return h.K(t,o,s)}Qt(){this.ci=!0}ui(){this.ci=!1}di(){if(this.Ut.wi||this.yt&&this.yt<30)return;this.Wt.context.fillStyle="#000",this.Ut.lt&&!this.Ut.ti&&(this.Wt.context.fillStyle=Math.sin(Date.now()/100)>.1?"red":"#000"),this.Wt.context.fillRect(0,0,this.Wt.canvas.width,this.Wt.canvas.height),this.Wt.context.strokeStyle="#666",this.Wt.context.strokeRect(0,0,this.Wt.canvas.width,this.Wt.canvas.height);const t=this.li(),i=t.x,h=t.y;this.yi(),this.et.context.save(),this.et.context.drawImage(this.Wt.canvas,i,h),this.et.context.restore()}li(){const t=this.Wt.canvas.width;let i=this.Ut.x+this.Ut.width/2-t/2;this.Ut.lt||(i=this.Ut.x+this.Ut.width+10);const h=this.Ut.y-this.Wt.canvas.height+this.ii,s=i+t+20;return s>this.et.canvas.width&&(i-=s-this.et.canvas.width),i-20<0&&(i=20),{x:i,y:h}}yi(){this.Vt.forEach((t,i)=>{const h=this.Kt[t];h.fi||this.Ut.gi?h.disabled=!0:h.disabled=!1,this.xi(i,t,h)})}xi(t,i,h){const s=h.values;h.value,h.rect=this.bi(0,t,s,h);const e=this.Wt,n=e.context,r=(e.canvas,e.N,this.et.N);h.value!==h.values[0]?n.fillRect(h.rect.x+170,h.rect.y/r+4-2*t,20,20):(n.strokeStyle="#FFF",n.strokeRect(h.rect.x+170,h.rect.y/r+4-2*t,20,20))}bi(t,i,h,s){const e=this.Wt,n=e.context,r=(e.canvas,this.fontSize),o=this.padding;return n.fillStyle=s.disabled?"#999":"#FFF",n.strokeStyle=s.disabled?"#999":"#FFF",n.font=`${r}px monospace`,n.textAlign="left",this.Mi=0,this.Ut.lt?(this.Ut.ti?n.fillText((Math.sin(Date.now()/100),"?"),10,21):n.fillText((Math.sin(Date.now()/100),"!"),10,21),this.pi(i)):(Array.isArray(h)&&h[1]?[h[1].toUpperCase()].forEach((t,h)=>{n.fillText(t,20+o+this.Mi,10+o+2.2*o*i+15+15*i),this.Mi+=n.measureText(t).width}):n.fillText(Math.sin(Date.now()/300)>-.5||s.disabled?h[0].toUpperCase():"",14+o+this.Mi,10+o+2.2*o*i+15+15*i),this.pi(i))}pi(t){this.fontSize;const i=this.padding;return{x:-10,y:(10+(15+2*i+5)*t)*this.et.N,width:200,height:15+2*i}}},j={vi(){if(!(this.mi||this.Fi||this.Oi||this.ji||this.ki))return this.Ti.filter(t=>{if(!t.mi&&!t.Fi&&!t.Oi&&!t.wi&&!t.Ci&&t.x<this.x&&Math.abs(this.x-t.x)<60&&Math.abs(Math.abs(this.y+this.height-t.y))<150)return t})},Si(t){const i="climb"===this.Pi.ei("dont-climb").value;if("go"===t.value){const t=this.vi();t&&t[0]&&i?(this.host&&(this.host.Oi=!1),this.target=t[0],this.mi=!0,this.Ai=!0,this.Li=null):this.Ri&&!this.mi&&(this.Ri=!1,this.Fi=!0,this.st=!0,this.host.Oi=!1,this.host.Di=null,this.host=null,this.target={x:this.x-40,y:this.level.$i,width:1,height:1})}if(this.mi&&this.host&&this.host.wi&&(this.mi=!1,this.Fi=!0,this.host=null),this.Ri?this.host&&(this.host.Bi<=0?(this.speed.x=0,this.y+=this.host.height,this.host=null,this.Ri=!1):this.mi||(this.speed.x=this.host.speed.x,this.y=this.host.y-this.height,this.x=this.host.x+this.host.width/2-this.width/2)):!this.Ei&&!this.Ci&&!this.ki&&!this.mi&&!this.Fi&&(this.y,this.height,this.level.$i),this.mi){for(;this.target.Di;)this.target=this.target.Di;let i=this.target;t.disabled=!0;let h=(i.x+i.width/2-(this.x+this.width/2))/10,s=(i.y-(this.y+this.height))/10;h=Math.floor(h),s=Math.floor(s),Math.abs(10*h)<1?(this.Ci=!1,this.mi=!1,this.st=!1,this.Ri=!0,this.host&&(this.host.Oi=!1,this.host.Di=!1),this.host=i,i.Oi=!0,i.Di=this,t.disabled=!1,t.value="stop",h=0,s=0,this.x=i.x+i.width/2-this.width/2,this.y=i.y-this.height,this.target=null):(h+=this.zt,s-=1),this.speed.x=h,this.speed.y=s,this.z=5}if(this.Fi){this.st=!0,this.target||(this.target={x:this.x,y:this.level.$i});let i=(this.target.x-this.x-this.width/2)/30;const h=this.target.y-(this.y+this.height);i=Math.floor(i),Math.abs(10*i)<15&&Math.abs(10*h)<15&&(this.Fi=!1,this.st=!1,this.speed.x=0,this.speed.y=0,t.value="stop",this.Li=null,this.host&&(this.host.Oi=!1,this.host.Di=!1),this.target=null),this.st&&(this.speed.x=i-1,this.speed.y=Math.ceil(h/30))}}},k={Yi(t){this.Ji=!0;t.canvas;this.Pi=new O(this)},Ni(t){const i=t.canvas;this.Ji=!1,i.removeEventListener("click",this.Xi)},zi(t){this.wi||(this.Ii(t,this.et)&&(this.Hi+=1,this.Hi>3&&(this.Hi=0),this.selected=!this.selected,this.selected&&this.Pi.Qt()),this.qi(t))},qi(t){const i=this.Ii(t,this.et);this.Pi.ai(t)||i||(this.selected=!1,this.Pi.ui()),this.selected?(this.et.selected=this,3===this.z&&(this.z=4)):(this.Pi.ui(),4===this.z&&(this.z=3))},Ii(t,i){const h=i.N,s={y:this.y*h,x:this.x*h,height:this.height*h,width:this.width*h};return i.K(t,s)}},T={Ui(t={x:0,y:0},i){let h=i||this.Li;h||i||(this.Li=this.Ki(t),this.Vi=1,h=this.Li),!i&&(this.Vi+=1,this.Vi>100)||(this.et.context.save(),h.forEach(t=>{t.x+=t.Lt,t.y+=t.Rt,t.Rt+=.1,this.Jt(t,2,"#8A6F30")}),this.et.context.restore())},_i(t={x:0,y:0}){this.Wi||(this.Wi=this.Ki(t),this.Zi=1),this.Zi+=1,this.Zi>100||this.Ui(t,this.Wi)},Ki(t){return Array(50).fill(0).map(()=>({x:this.x+this.width/2+1*Math.random()*this.At()+t.x,y:this.y+this.height+t.y,Lt:1*Math.random()*this.At(),Rt:-.9-Math.random()}))},At:()=>.5-Math.random()>0?1:-1,Jt(t,i=4,h){h=this.Gi||h,this.et.S({x:t.x,y:t.y,width:i,height:i,color:h})}};function C(t,i,{x:h=0,y:s=0,width:e=0,height:n=0}={}){return t!==i&&(t.x+h<i.x+i.width&&t.x+h+t.width+e>i.x&&t.y+s<i.y+i.height&&t.height+t.y+s+n>i.y)}function S(t,i,h){const s=[];return i.forEach(i=>{const e=function(t,i,h){return!!C(t,i,h)&&{Qi:t,th:i}}(t,i,h);e&&s.push(e)}),s.length>0&&s}function P(t,i,h){return i in t?Object.defineProperty(t,i,{value:h,l:!0,pt:!0,vt:!0}):t[i]=h,t}function A(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var h=[],s=!0,e=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(h.push(r.value),!i||h.length!==i);s=!0);}catch(t){e=!0,n=t}finally{try{s||null==o.return||o.return()}finally{if(e)throw n}}return h}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L={ih(){return this.level.nt.ot.filter(t=>{if("u"===t.type){if(t.hh&&Math.abs(t.y+t.height/2-this.y)<25&&Math.abs(t.x+t.width/2-this.x)<15){let i;this.Ti.forEach(t=>{t.Pi.Vt.includes("dont-climb")||t.Pi.Vt.push("dont-climb")&&t.Pi.hi()}),"thruster"!==t.hh||this._t.thruster?"booster"!==t.hh||this._t.booster?this._t[t.hh]||(this._t[t.hh]=!0,this.sh=!0):(i="slow-fast",this._t.booster=!0,this.Ti.forEach(t=>{t.Pi.Vt.includes("dont-climb")||t.Pi.Vt.push("dont-climb")&&t.Pi.hi()})):(i="dont-climb",this._t.thruster=!0,this.Ti.forEach(t=>{t.Pi.Vt.includes("dont-climb")||t.Pi.Vt.push("dont-climb")&&t.Pi.hi()})),i&&this.Pi.Vt.push(i),this.Pi.hi(),t.hh=!1}return!1}return!(this.mi||this.Fi||this.Oi||this.lt)&&(t.eh.x<this.x&&Math.abs(t.eh.y-this.y)<50&&Math.abs(t.eh.x-this.x)<50&&!S({x:t.eh.x-this.width,y:t.eh.y-this.height,width:this.width,height:this.height},this.level.entities.filter(t=>"bird"===t.type))&&t)})},nh(){if(this.mi||this.Fi||this.Oi||!this.host)return!1;const t=this.host.rh;return t.x>this.x+this.width/2&&Math.abs(t.y-this.y-this.height)<20&&Math.abs(t.x-this.x)<this.width},oh(t){const i=this.ih();if(!this.lt&&!this.Oi&&i.length>0&&!this.target&&t){this.ah();const t=A(i,1)[0];this.target=function(t){for(var i=1;i<arguments.length;i++){var h=null!=arguments[i]?arguments[i]:{},s=Object.keys(h);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(h).filter(function(t){return Object.getOwnPropertyDescriptor(h,t).l}))),s.forEach(function(i){P(t,i,h[i])})}return t}({},t.eh,{lh:t}),this.uh=t,this.dh=this.wh}},ah(){this.st=!0,this.Ai=!0,this.Li=null,this.host&&(this.host.Oi=!1,this.host.Di=null),this.host=null,this.Ri=!1,this.Ci=!1,this.ji=!0,this.Ei=!0},yh(){const t=this.target;this.fh(),this.Ei=!1,this.Ci=!0,this.x=t.x-this.width,this.y=t.y-this.height,this.host=this.target.lh,this.target=null},fh(){this.Pi.ei("stop-go").value="stop",this.ji=!1,this.st=!1,this.speed.x=0,this.speed.y=0,this.Li=null},wh(){let t=this.gh(),i=t.dx,h=t.dy;i=Math.floor(i/30),Math.abs(10*i)<5&&Math.abs(10*h)<15?this.yh():(this.speed.x=i-1,this.speed.y=Math.ceil(h/10)-1)},xh(){let t=this.gh(),i=t.dx,h=t.dy;i=Math.floor(i/20),Math.abs(10*i)<15&&Math.abs(10*h)<15?this.bh():(this.speed.x=i-1,this.speed.y=Math.ceil(h/(this.Pi.Vt.includes("dont-climb")?40:10))+1)},gh(t=!1){const i=this.target.x-this.x-this.width/2,h=this.target.y-(this.y+this.height);return t?{dx:Math.abs(i),dy:Math.abs(h)}:{dx:i,dy:h}},bh(){this.fh(),this.ki=!1,this.Ci=!1,!0===this.Mh&&(this.wi=!0,this.Bi=-20,this.Mh=!1,this.Li=null),this.host&&(this.host.Oi=!1),this.target=null},ph(){return this.Ci&&this.nh()&&!this.ji&&!this.mi},vh(){if(this.lt)return;const t="climb"===this.Pi.ei("dont-climb").value;this.oh(t),this.ph()&&(this.ji=!0,this.ki=!0,this.target={x:this.x-this.width,y:this.level.$i,width:1,height:1},this.level.$i-this.y>110&&(this.Mh=!0),this.Pi.Vt.includes("dont-climb")&&this.level.$i-this.y<190&&(this.Mh=!1),this.dh=this.xh),this.ji&&this.dh()}},R={mh(){return S(this,this.Fh,{x:150*this.zt,y:0,height:200})},Oh(){return this.lt?S(this,this.Fh,{x:0,y:0,height:20,width:0}):S(this,this.Fh,{x:0,y:0,height:20,width:20})},jh(){return S(this,this.Fh,{x:10*this.zt,y:20,width:20})},kh(){return S(this,this.Ti,{x:-10,y:0,width:-20})},Th(){return S(this,this.Ti,{x:10*this.zt,y:20,width:40})},Ch(){return S(this,this.Fh,{x:-20*this.zt,y:0})},Sh(){this.x+=this.speed.x,this.y+=this.speed.y},update(t){const i=t.et,h=t.entities,s=t.level,e=t.ft;if(this._t=t,this.et=i,this.level=s,this.ft=e,this.J=this.J||new n(this.et.canvas,this.et.context),this.sh&&!this.wi)return this.Bi<-40&&(this.wi=!0),this.Yt.It(),this.It(i),void(this.Bi-=2);if(this.wi)return this.Bi>-40&&(this.Ph||(this.Ai=!0,this.Li=null,this.Ph=!0),this.et.rt.push(()=>this.Yt.It()),this.et.rt.push(()=>this.Ui())),void(this.Bi-=1);if(this.Bi<-40)return;this.Yt||(this.Yt=new F({target:this})),this.Ah||(this.Ah=new F({target:this})),this.Ji||this.Yi(i);const r=h.filter(t=>"bird"===t.type&&t!==this&&!t.lt&&t.Bi>0),o=h.filter(t=>"bird"===t.type&&t!==this&&t.lt&&t.Bi>0);this.Ti=this.lt?o:r,this.Fh=this.lt?r:o;const a=this.Pi.ei("stop-go");let c,l;if(this.sh&&(a.value="stop"),"go"===a.value&&this.y+this.height===s.Lh-5&&(this.y+=5,this.Rh=!0),this.Rh&&this.x<800&&(this.ft.gi=!1,this.Rh=!1),"go"===a.value?(this.speed.x=("fast"===this.Pi.ei("slow-fast").value?2:1)*this.zt,this.st=!0):(this.speed.x=0,this.st=!1),this.lt||this.Si(a),l?this.speed.x=0:l=(c=this.jh())[0]?c[0].th:null,l&&(this.Fi||this.ki)&&(this.Fi=!1,this.Mh=l),(l=(c=this.Oh())[0]?c[0].th:null)||(l=(c=this.Ch())[0]?c[0].th:null),this.lt&&this.Dh){let t=this.mh();(t[0]?t[0].th:null)&&(this.Dh=!1,this.st=!0)}let u=this.kh(),d=u[0]?u[0].th:null;if(this.y+this.height>this.level.$i&&!this.isFrozen&&(this.y=this.level.$i-this.height,this.speed.y=0),(l||d&&!this.Fi&&!this.mi||this.lt&&this.x>900)&&(this.speed.x=0),d||(d=(u=this.Th())[0]?u[0].th:null),this.lt&&this.x>900&&(this.ft.wi=!0,setTimeout(()=>{this._t.Bh.$h(this._t.wt)},1e3)),this.vh(),0!==this.speed.y&&this.Ah.qt(),this.isFrozen&&(this.Eh-=2,this.speed.x=0,this.y>600&&(this.wi=!0,this.Bi=-50)),this.Sh(),this.Bi>0&&this.It(i),this.Ai&&this.Ui(),(this.lt&&this.x>900||l&&l.Bi>0&&!this.ki&&this.Bi>0)&&(this.et.rt.push(()=>this.Yt.It()),l&&l.Yh&&(l.Mh&&l.Mh===this?this.Bi=0:this.Bi-=l.Yh),this.Ai=!0,75!==this.Bi&&50!==this.Bi&&25!==this.Bi||(this.Li=null)),this.Bi<=0&&this.selected)return this.selected=null,this.Pi.ui(),void(this.et.selected=null);this.Bi<=0&&(this.wi=!0,this.host&&(this.host.Oi=!1,this.host.Di=null),this.Ji&&this.Ni(i));let w=this.Pi.li(),y=w.x,f=w.y;const g=y+(f<480-this.ft.yt?this.Pi.Wt.canvas.width:0),x=f,b=y+this.Pi.Wt.canvas.width,M=f+(y+this.Pi.Wt.canvas.width<930?this.Pi.Wt.canvas.height:0),p=this.ft.y-18-this.ft.yt;this.Pi&&this.Pi.ci&&e.yt>30&&!this.isFrozen&&(this.et.rt.push(()=>this.et.it([{x:g,y:x},{x:b,y:M},{x:930,y:p}],1)),this.et.rt.push(()=>this.Pi.di())),this.Jh(),!this.lt&&this.x+this.width<0&&t.Nh()}},D={Xh(){this.Tt=this.Tt||this.J.C({width:this.width+10,height:this.height+4}),this.Tt.clear(),this.Tt.S({x:2+(this.lt?3:0),y:-2,width:this.width-8,height:this.height,color:this.color});const t=this.st?.4:0;if(this.J.L({x:4,y:24,width:24,height:4},0,4,this.lt?"red":"yellow",this.lt?-t:t,[5,3],this.Tt.context),this.Tt.context.filter="none",this.Dh)return;let i=this.lt?"red":"yellow";this.sh&&(i="#FFF"),this.Tt.S({x:2+(this.lt?8:0),y:5,width:(this.lt,15),height:3,color:i})},It(t){this.zh||(this.Xh(),this.zh=!0),this.st&&(this.zh=!1),this.sh&&(this.Ih-=.4,this.zh=!1,this.selected=!1,this.isFrozen=!0,this.Pi.ci=!1,this.st=!1),t.context.drawImage(this.Tt.canvas,0,0,this.Tt.canvas.width,this.Ih,this.x,this.y,this.Tt.canvas.width,this.Ih)}},$={Jh(){if(this.sh)return;if((this.lt||this.Gt)&&(this.Ih=this.height+5),this.Ih>this.height+4)return;this.Ih=this.Ih||1,this.Hh=this.Hh||1,this.Hh<2?this.Hh+=1:(this.Hh=1,this.Ih+=1);const t=this.x,i=this.y+this.Ih,h=this.x+this.width,s=this.y+this.Ih,e=this.ft.y-18-this.ft.yt;this.et.rt.push(()=>this.et.it([{x:t,y:i},{x:h,y:s},{x:930,y:e}],1))}};class B{constructor(t){this.Xi=(t=>this.zi(t));const i={x:0,y:0,z:3,width:30,height:30,color:"#2472ff",speed:{x:0,y:0},qh:{x:0,y:4},st:!1,direction:0,Uh:!1,Hi:0,type:"bird",zt:t.lt?1:-1,Bi:100,Kh:100,Yh:1};Object.assign(this,i,t),this.Vh=this.y,this.lt&&(this.Yh=2,this.Bi=150,this.color="#000")}Mt(){this.Pi&&this.Pi.Mt(),this.Ji&&this.Ni(this.et)}}Object.assign(B.prototype,R,D,k,j,T,L,$);var E=B;var Y=class extends O{constructor(t){super(t),this.et=t.et,this._t=t._t,this.Ut=t,this.J=new n(t.et.canvas,t.et.context),this.Wt=this.et.J.C({key:"pulserMenu",width:100,height:55,bgColor:"#000"}),this.Kt={"spawn-1":{values:["deploy"],value:"deploy",rect:{}}},this.Vt=["spawn-1"],this.ii=-200}ri(t){const i=this._t.level;this.Vt.forEach(h=>{const s=this.Kt[h],e=s.rect;if(this.oi(t,e)&&!s.disabled){const t=s.value;if(s.fi=!0,s.disabled=!0,"deploy"===t&&i._h(new E({x:855,y:i.Lh-35,Wh:!0,Hi:2})),this.Ut.Zh+=1,this.Ut.Zh>=this.Ut.Gh)return;setTimeout(()=>{s.fi=!1},2e3)}})}pi(t){this.fontSize;const i=this.padding;return{x:-10,y:(10+(15+2*i+5)*t)*this.et.N-10,width:200,height:15+2*i+20}}ui(){return!1}};function J(t,i,h){return i in t?Object.defineProperty(t,i,{value:h,l:!0,pt:!0,vt:!0}):t[i]=h,t}var N=class{constructor({x:t=0,y:i=0,width:h=40,height:s=50,Qh:e=4,Eh:n=0,ts:r=0,hs:o=.9}){this.x=t,this.y=i,this.z=3,this.width=h,this.height=s,this.ss=!0,this.color="#333",this.speed={x:e,y:n},this.es=0,this.hs=o,this.Gh=12,this.ts=r,this.Zh=0,this.type="pulser",this.zt=0,this.x+=30}Mt(t){t.entities=t.entities.filter(t=>t!==this),this.Pi&&this.Pi.Mt()}ns(t){const i=t.et;this.es>=100&&(this.es=0,this.ts<this.Gh&&(this.ts+=1)),this.ts+this.Zh<this.Gh&&(this.es+=13*this.hs),this.wi&&(this.ts-=1),this.et.context.filter="none",this.rs(i),this.et.context.filter="none"}rs(t){const i=(1.4*this.height-2*(2*this.Gh-1))/this.Gh*2;for(let h=0;h<this.Gh;h++){let s=h>=this.ts-this.Zh?"#3a4d94":"yellow";this.wi&&(s=Math.sin(Date.now()/300)>0?"red":"#3a4d94");let e=h<this.Gh/2?0:-(i*(this.Gh/2)+this.Gh/2*2),n=h<this.Gh/2?0:2*i+2;t.S({x:this.x+3+n,y:this.y+4+e+i*h+2*h,width:2*i,height:i,color:s})}}update(t){if(this._t=t,this.et=t.et,this.Pi||(this.Pi=new Y(this)),this.Pi.ci=!0,this.Pi&&this.Pi.ci){this.Pi&&this.Pi.os&&this.Pi.os();let i=parseInt(t.et.context.globalAlpha);this.globalAlpha=this.globalAlpha||.2,Math.random()>.2&&(this.globalAlpha="0.9"),Math.random()>.8&&(this.globalAlpha="0.8"),Math.random()>.9&&(this.globalAlpha="0.93"),t.et.context.globalAlpha=this.globalAlpha,!this.wi&&this.yt>40&&this.Pi.di(),t.et.context.globalAlpha=i;let h=this.Pi.li(),s=h.x;const e=s,n=h.y+this.Pi.Wt.canvas.height,r=s+this.Pi.Wt.canvas.width/2,o=this.y-18-this.yt,a=s+this.Pi.Wt.canvas.width,c=n;!this.wi&&this.yt>40&&t.et.it([{x:e,y:n},{x:r,y:o},{x:a,y:c}],1)}if(this.as="#222",this.yt>15&&t.et.S(function(t){for(var i=1;i<arguments.length;i++){var h=null!=arguments[i]?arguments[i]:{},s=Object.keys(h);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(h).filter(function(t){return Object.getOwnPropertyDescriptor(h,t).l}))),s.forEach(function(i){J(t,i,h[i])})}return t}({},this,{color:this.as})),t.et.context.strokeStyle="#6a8aff",this.yt>15&&t.et.context.strokeRect(this.x,this.y,this.width,this.height),this.yt>16&&this.ns(t),this.yt=void 0!==this.yt?this.yt:-15,this.yt=40,this.yt+=.1,t.cs&&(this.yt+=.5),this.yt>100&&(this.yt=100),this.wi&&(this.yt-=5,this.yt<20&&(this.yt=20)),this.yt>10){t.et.S({x:this.x+this.width/2-2,y:this.y-20-Math.round(this.yt),width:4,height:20+Math.round(this.yt),color:this.as}),t.et.context.strokeRect(this.x+this.width/2-2,this.y-20-Math.round(this.yt),4,20+Math.round(this.yt)),t.et.S({x:this.x+this.width/2-15,y:this.y-20-Math.round(this.yt),width:30,height:10,color:"#333"}),this.et.context.filter="none",t.et.S({x:this.x+this.width/2-15,y:this.y-17-Math.round(this.yt),width:30,height:5,color:this.wi?"#000":"#2472ff"}),this.et.context.filter="none";const i=this.x-60,h=this.y+this.height,s=this.x+this.Pi.Wt.canvas.width/2,e=this.y-18-this.yt,n=this.x,r=h;this.yt>27&&this.yt<30&&t.et.it([{x:i,y:h},{x:s,y:e},{x:n,y:r}],1),this.yt>30&&(this.et.context.filter="none",t.et.S({x:this.x-55,y:this.y+this.height-6,width:30,height:4,color:"yellow"}),this.et.context.filter="none",t.et.S({x:this.x-60,y:this.y+this.height-5,width:40,height:5,color:"#111"}),t.et.S({x:this.x-55,y:this.y+this.height-3,width:55,height:3,color:"#333"}),t.et.S({x:this.x+25,y:this.y+5,width:12,height:12,color:"#fff"}),t.et.S({x:this.x+29,y:this.y+9,width:4,height:4,color:"#000"}))}this.Yt||(this.Yt=new F({target:this})),this.yt>-10&&this.yt<10&&this.Yt.It()}};var X=class{constructor(t){this.Xi=(t=>{Object.keys(this.ls).forEach(i=>{this._t.et.K(t,this.ls[i])&&this.$h(i)})});const i=t.et;this.debug=!0,this.width=i.width,this.height=i.height/10,this.x=0,this.y=0,this.color="#000",this.z=3,this._t=t,this.gt=this._t.gt,this.us=Object.keys(this.gt).length+.5,this.type="levelSelect",this._t.et.canvas.addEventListener("click",this.Xi)}$h(t){const i=this._t;i.ds=!0,i.et.J.B(.9),setTimeout(()=>{i.et.J.B(-.09)},100),(i.wt===t||i.ws.state.gt[t]||this.debug)&&(i.wt=t,i.ys())}fs(t){return Object.keys(this.gt).reverse().reduce((i,h,s)=>h===t?s:i,0)}gs(){this._t.et.S(this)}xs(){this._t.et.context.filter="none",this._t.et.S({x:27,y:34,width:this.width-15,height:6,color:"#2472ff"}),this.ls=this.ls||{};const t=this._t.et.N;Object.keys(this.gt).reverse().forEach((i,h)=>{this.ls[i]=this.ls[i]||{x:25*t+this.width*t/this.us*h-10*t,y:34*t-55*t,height:80*t,width:70*t},this._t.et.S({x:25+this.width/this.us*h,y:32,width:10,height:10,color:"#FFF"}),i===this._t.wt&&this._t.et.S({x:25+this.width/this.us*h+1,y:12,width:8,height:10,color:Math.sin(new Date/200)>0?"yellow":"#000"})}),this._t.et.context.filter="none"}update(t,i){this.gs(),this.xs(),this._t.et.context.font="14px monospace",this._t.et.context.fillStyle="#FFF",this._t.et.context.textAlign="right",this._t.et.context.fillText("Zone Select",990,25)}};function z(t){for(var i=1;i<arguments.length;i++){var h=null!=arguments[i]?arguments[i]:{},s=Object.keys(h);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(h).filter(function(t){return Object.getOwnPropertyDescriptor(h,t).l}))),s.forEach(function(i){I(t,i,h[i])})}return t}function I(t,i,h){return i in t?Object.defineProperty(t,i,{value:h,l:!0,pt:!0,vt:!0}):t[i]=h,t}let H,q,U=[];var K=class{static clear(){H=null,q=null,U=[]}constructor({x:t=0,y:i=0,width:h=60,height:s=20,hh:e,color:n="#39ff14"}){this.x=t,this.y=i,this.z=6,this.width=h,this.height=s,this.color=n,this.eh=this.bs(),this.rh={x:this.x,y:this.y},this.type=e?"u":"p",this.Ms=`rgba(${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, 255)`,this.ps=`rgba(${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, 255)`,this.vs=!1,this.hh=e}bs(){return{x:this.x+this.width,y:this.y}}update(t){this._t=t,this.et=t.et,this.J||(this.J=new n(this.et.canvas,this.et.context)),H=H||this.J.C({}),q=q||this.J.C({}),t[this.hh]||this.It()}ms(t){q.strokeRect(z({},this,{color:t,width:20,x:this.x+5,y:this.y+5,height:20})),q.context.lineWidth=3,q.strokeRect(z({},this,{color:t})),q.context.filter="none",q.strokeRect(z({},this,{color:t})),q.context.filter="none",q.context.lineWidth=1}It(){if(!this.vs||1===this.vs){if(this.vs=!0,this.hh&&!this._t[this.hh])return this.ms(this.color);if("u"===this.type)return;H.S(z({},this,{height:2,color:"#000",x:this.x-1e3,width:1e3,y:this.y+3*this.height/12})),H.S(z({},this,{height:1e3,color:"#000",y:this.y-1e3,width:2,x:this.x+this.width/1.3*Math.random()})),H.S(z({},this,{height:1e3,color:"#000",y:this.y-1e3,width:2,x:this.x+this.width/1.7*Math.random()})),H.S(z({},this,{height:1e3,color:"#000",y:this.y+this.height,width:2,x:this.x+this.width/1.4*Math.random()})),H.strokeRect({x:-100,y:99,width:1100,height:122}),U.push(()=>this.J.L({x:-100,y:100,width:1100,height:120},0,3,"yellow",17,[15,1003])),U.push(()=>this.J.L({x:-100,y:100,width:1100,height:120},0,3,"#FFF",15,[5,1003])),H.strokeRect({x:-100,y:209,width:1100,height:222}),U.push(()=>this.J.L({x:-100,y:210,width:1100,height:220},0,3,"yellow",13,[15,1003])),U.push(()=>this.J.L({x:-100,y:210,width:1100,height:220},0,3,"#FFF",16,[15,1003])),H.S(z({},this,{color:"#222"})),H.S(z({},this,{height:this.height/3,color:"#555",y:this.y+this.height/3})),this.height>=30&&H.S(z({},this,{height:2,color:this.Ms,y:this.y+this.height/15})),this.height<30&&(this.J.L(z({},this),-26,14,"#555",0,[5,3],H.context),H.context.filter="none",H.S(z({},this,{height:5,color:this.Ms,y:this.y+this.height/2-2})),H.context.filter="none",H.S(z({},this,{height:5,color:this.Ms,y:this.y+this.height/2-2})))}this.hh||"u"!==this.type||q.context.clearRect(this.x-7,this.y-7,this.width+14,this.height+14)}at(){this.et.context.drawImage(H.canvas,0,0),U.forEach(t=>t())}ct(){q&&this.et.context.drawImage(q.canvas,0,0)}};function V(t){for(var i=1;i<arguments.length;i++){var h=null!=arguments[i]?arguments[i]:{},s=Object.keys(h);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(h).filter(function(t){return Object.getOwnPropertyDescriptor(h,t).l}))),s.forEach(function(i){_(t,i,h[i])})}return t}function _(t,i,h){return i in t?Object.defineProperty(t,i,{value:h,l:!0,pt:!0,vt:!0}):t[i]=h,t}class W{constructor({x:t=0,y:i=0,width:h=60,height:s=20,Fs:e,Os:r=!0,z:o=3}){this.J=new n,this.Tt=this.J.C({width:h,height:s}),this.x=t,this.y=i,this.z=o,this.Os=r,this.width=h,this.height=s,this.color="#000",this.Gi="yellow",this.eh=this.bs(),this.rh={x:this.x,y:this.y},this.js=this.width,this.lineDashOffset=0,this.Fs=e}bs(){return{x:this.x+this.width,y:this.y}}L(t,i=0){const h=this.Tt,s=h.canvas,e=h.context,n=t.width+2*i+24;t.height;e.lineWidth=12,e.strokeStyle="#000",e.beginPath(),e.moveTo(-1,7),e.lineTo(n-13-12,7),e.lineWidth=12,e.strokeStyle="#555",e.fillStyle="#333",e.lineDashOffset=0,e.clearRect(0,0,s.width,s.height),e.setLineDash([0,0]),e.stroke(),e.setLineDash([5,3]),e.strokeStyle="#222",e.stroke(),e.lineWidth=20,e.lineDashOffset=this.lineDashOffset,e.strokeRect(-20,35,250,4),this.et.context.drawImage(s,0,0,s.width,s.height,t.x-i,t.y-i,s.width,s.height),this.lineDashOffset+=1.1}update(t){this._t=t,this.et=t.et,!this.Yt&&this.Os&&(this.Yt=new F({target:V({},this,{x:this.x+45,y:this.y+40,zt:0,width:99,height:89})})),this.isOpen=Math.sin(Date.now()/380/t.ks)>.9,this.Fs&&(this.isOpen=!1),this.Ts=this.isOpen?10:this.width,this.isOpen?(this.js>this.Ts&&(this.js-=35),this.js<this.Ts&&(this.js=this.Ts)):this.js<this.Ts&&(this.js+=30,this.js>this.Ts&&(this.js=this.Ts)),this._t.entities.forEach(t=>{"bird"===t.type&&C(this,t,{y:-10,x:25,width:-45})&&(this.isOpen||this.js<this.width)&&(t.isFrozen=!0,t.speed.y=2)}),this.It()}It(){if(this.et.S(V({},this,{x:this.x-10,width:this.width+20,color:"#555"})),this.et.S(this),this.L(V({},this,{width:this.js})),!this.Os)return;this.Ui({x:-this.width/2-6*Math.random(),y:-this.height}),this.Cs?this.Cs+=1:this.Cs=1,this.Cs>100&&(this.Li=null,this.Cs=1);const t=Math.sin(Date.now()/700);t>0&&t<.03&&(this.Wi=null),this._i({x:-this.width/2+6*Math.random(),y:-this.height}),this.et.rt.push(()=>this.Yt.It())}}Object.assign(W.prototype,T);var Z=W,G=t=>{const i=t.et;return{basics:()=>{const t=new E({x:490,y:460,lt:!0,speed:{x:0,y:0},ti:!0,Dh:!0}),i=new E({x:270,y:530,lt:!0,speed:{x:0,y:0},Dh:!0}),h=new E({x:170,y:530,lt:!0,speed:{x:0,y:0},Dh:!0});return t.Ci=!0,t.host=new K({x:400,width:120,y:490}),t.target={lh:t.host},{$i:550,Lh:550,entities:[t,i,h,new Z({x:-50,y:550,width:200,height:200,Fs:!0})],ft:new N({x:880,y:500}),nt:{ot:[new K({x:650,y:490}),t.host,new K({x:350,y:440}),new K({x:250,y:440}),new K({x:170,y:350,width:20,height:20,hh:"booster"}),new K({x:150,y:390}),new K({x:850,y:190}),new K({x:650,y:290})]},_h(t){this.entities.push(t),this.ft.gi=!0,setTimeout(()=>{t.Pi.Kt["dont-climb"].value="dont"},100)},update(){t.Dh||t.Ss||(t.Ss=!0,t.zh=!1,t.ti=!1,setTimeout(()=>{t.speed.x=1,t.speed.y=3,t.Pi.ei("stop-go").value="go",t.Fi=!0,setTimeout(()=>{t.Mh=null},1e3)},1e3),setTimeout(()=>{i.Dh=!1},4e3),setTimeout(()=>{h.Dh=!1},6e3),setTimeout(()=>{i.speed.x=1,i.Pi.ei("stop-go").value="go",i.zh=!1,h.speed.x=1,h.Pi.ei("stop-go").value="go",h.zh=!1},8e3))}}},stackAttack:()=>{return{$i:550,Lh:430,entities:[new E({x:690,y:530,lt:!0,speed:{x:0,y:0},ti:!0}),new Z({x:380,y:550,width:200,height:300})],ft:new N({x:880,y:380}),nt:{ot:[new K({x:750,y:430,width:300,height:300}),new K({x:480,y:470,width:60,height:20}),new K({x:-40,y:470,width:300,height:380}),new K({x:500,y:570,width:20,height:20,hh:"thruster"})]},_h(t){t.Ci=!0,t.host=this.nt.ot[0],t.target={lh:t.host},this.entities.push(t),this.ft.gi=!0},Ps(){},update(){}}},bridgeRun:()=>{return{Lh:550,$i:550,entities:[new E({x:70,y:520,lt:!0}),new Z({x:250,y:550,width:200,height:200}),new Z({x:530,y:550,width:230,height:200}),new Z({x:-100,y:150,width:200,height:700,Os:!1,z:2,Fs:!0})],ft:new N({x:880,y:500}),nt:{ot:[new K({x:0,y:270,width:390,height:280,z:6}),new K({x:630,y:470,width:100}),new K({x:615,y:435,width:20,height:20,hh:"e1",color:"#2472ff"}),new K({x:460,y:520,width:20,height:20,hh:"e2",color:"#2472ff"}),new K({x:100,y:460,width:20,height:20,hh:"e3",color:"#2472ff"})]},_h(t){this.entities.push(t),this.ft.gi=!0,setTimeout(()=>{t.Pi.Kt["dont-climb"].value="dont"},100)},update(){if(t.As&&i.rt.push(()=>i.it([{x:-20,y:100},{x:90,y:550},{x:190,y:550}],1,"#f73434")),t.Ls&&i.rt.push(()=>i.it([{x:-20,y:100},{x:410,y:550},{x:590,y:550}],1,"#ff9292")),t.Rs&&i.rt.push(()=>i.it([{x:-20,y:100},{x:750,y:550},{x:890,y:550}],1,"red")),t.Rs&&t.Ls&&t.As){if(i.rt.push(()=>i.it([{x:-20,y:100},{x:50,y:550},{x:990,y:550}],1,"#FFF")),this.Ds||(this.Ds=!0,setTimeout(()=>{this.$s=!0},2300)),!this.$s)return;this.ut?i.J.B(-.02):i.J.B(.04),this.ut||setTimeout(()=>{this.ut=!0,setTimeout(()=>{this.dt=!0},1800)},700)}}}}}};var Q=class{constructor(){this.Xi=(t=>{this.entities.forEach(i=>{"bird"!==i.type||i.lt||(i.Ii(t,this.et)?i.Xi(t):i.qi(t))})}),this.ks=1,this.debug=!1,this.Bs={width:1e3,height:600},this.et=new o(this.Bs),this.et.debug=this.debug,this.gt=G(this),this.ws=new M("OfflineDevLine7"),this.Es=!0,this.Ys=!0,this.Js(),this.Ns(),this.wt=this.wt,this.ys(),this.Yi(),this.Xs=new e(t=>{x(this,t,()=>{})})}Js(){const t=this.Bs.width/this.Bs.height;document.body.clientWidth<document.body.clientHeight*t?(this.et.canvas.style.width="100%",this.et.canvas.style.height="auto"):(this.et.canvas.style.height="100%",this.et.canvas.style.width="auto")}get wt(){return this.ws.state.wt||Object.values(this.gt)[0]}set wt(t){this.ws.state.wt=t,this.ws.save(),this.zs()}Is(){return Object.keys(this.gt)[0]===this.wt}zs(){const t=Object.keys(this.gt);t.some((i,h)=>{if(this.wt===i){const i=h+1>t.length-1;return this.Hs=i,this.qs=i?t[0]:t[h+1],!0}return!1})}Yi(){this.et.canvas.addEventListener("click",this.Xi),window.addEventListener("resize",()=>{this.Js(),setTimeout(()=>{this.Js()},300)})}Us(){this.et.canvas.removeEventListener("click",this.Xi),this.entities&&this.entities.forEach(t=>{t.Us&&t.Mt()})}bt(){const t=this.wt;this.Ks(),t&&this.gt[t]?this.level=this.gt[t]():this.level=Object.values(this.gt)[0]()}Ks(){this.entities&&this.entities.forEach(t=>{t.Mt&&"levelSelect"!==t.type&&t.Mt(this)})}Ns(){this.Vs=s.v('<div class="cc" />'),this.Vs.appendChild(this.et.canvas),this._s=s.v('<div class="sc"><div></div></div>'),this._s.appendChild(this.Vs),document.body.appendChild(this._s)}Ws(){this.entities=this.level.entities,this.Zs=this.level.Zs,this.level.entities.unshift(new m({width:this.et.width,height:50,y:this.et.height-50,Qh:.5-.2*Math.random()})),Array(50).fill(0).forEach(()=>this.level.entities.unshift(new p)),this.ft=this.level.ft||new N({x:880,y:500}),this.level.entities.unshift(this.ft),this.Bh=this.Bh||new X(this),this.level.entities.push(this.Bh)}ys(){K.clear(),this.Us(),this.et.context.globalAlpha=1,this.et.selected=null,this.bt(),this.Ws(),this.Yi()}Nh(){this.cs=!0,this.Bh&&this.Bh.$h(this.qs)}};const tt={Gs:Q};setTimeout(()=>{tt.Qs=new Q(tt)},0)}]);