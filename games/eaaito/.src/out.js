var g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={Wb:!0},ea={};try{ea.__proto__=da;ca=ea.Wb;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function l(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.pc=b.prototype}var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ia(){ia=function(){};g.Symbol||(g.Symbol=ja)}
var ja=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function ka(){ia();var a=g.Symbol.iterator;a||(a=g.Symbol.iterator=g.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ha(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return la(this)}});ka=function(){}}function la(a){var b=0;return ma(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ma(a){ka();a={next:a};a[g.Symbol.iterator]=function(){return this};return a}
function na(a){ka();ia();ka();var b=a[Symbol.iterator];return b?b.call(a):la(a)}function oa(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function pa(a,b){if(b){var c=g;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ha(c,a,{configurable:!0,writable:!0,value:b})}}
pa("Array.prototype.findIndex",function(a){return a?a:function(a,c){a:{var b=this;b instanceof String&&(b=String(b));for(var e=b.length,f=0;f<e;f++)if(a.call(c,b[f],f,b)){a=f;break a}a=-1}return a}});pa("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
function m(a,b,c){var d=this;this.canvas=document.createElement("canvas");this.canvas.width=c*a;this.canvas.height=c*b;this.a=this.canvas.getContext("2d");this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto";this.canvas.style.display="block";document.body.appendChild(this.canvas);this.g=c;this.children=[];this.ha=[];this.b=null;this.h=0;this.f=[];this.A=null;this.X={Da:null,ua:null};this.Ga=[];document.addEventListener("keydown",function(a){d.X.ua&&d.X.ua(a);d.f.forEach(function(b){b.X.ua&&
b.X.ua(a)})});document.addEventListener("keyup",function(a){d.X.Da&&d.X.Da(a);d.f.forEach(function(b){b.X.Da&&b.X.Da(a)})})}m.prototype.start=function(){setInterval(this.i.bind(this),16.666);this.h=Date.now()};m.prototype.clear=function(){this.a.clearRect(0,0,this.canvas.width,this.canvas.height)};
m.prototype.i=function(){var a=this;this.clear();var b=Date.now(),c=(b-this.h)/1E3;this.Ga.forEach(function(a){a.update(c)});this.h=b;this.ha.forEach(function(a){if(a.ha)a.ha.some(function(a){if(a.l.o.ba&&a.active)return a.update(c),!0});else if(a.l.o.ba&&a.active)return a.update(c),!0});this.A&&(this.A.update(),qa(this.A,c));this.f.forEach(function(b){b.fixed||(b.ka||(b.position.x+=b.speed.x*c),b.la||(b.position.y+=b.speed.y*c));ra(b);sa(b);a.a.save();a.a.translate(b.o.ja.x+.5*b.width,b.o.ja.y+.5*
b.height);a.a.rotate(b.angle);a.a.scale(b.o.xa.x,b.o.xa.y);a.a.globalAlpha=b.o.ub;b.type===p.a.S?a.a.drawImage(a.b.Db.image,b.ca.position.x,b.ca.position.y,b.ca.width,b.ca.height,-.5*b.width,-.5*b.height,b.ca.width,b.ca.height):b.type===p.a.Xa&&(a.a.font=b.frame.font,a.a.fillStyle=b.frame.fillStyle,a.a.fillText(b.frame.text,-.5*b.width,.5*b.height));a.a.restore()});b=window.innerWidth;var d=window.innerHeight;this.canvas.style.width=d/b*b+"px";this.canvas.style.height=d+"px";this.b.update(c);this.f.forEach(function(a){a.update(c)})};
m.prototype.removeChild=function(a){this.children.splice(ta(this.children,a,null),1);ua(this)};m.prototype.D=function(a){this.ha.push(a);return a};function ua(a){a.f.length=0;for(var b=[],c=null,d=0;d<a.children.length;d++){if(a.children[d].visible){c=a.children[d];b.push(c);var e=!1}else e=!0;for(;!e;){for(var f=!0,h=c.Bb;h<c.children.length;h++)if(c.children[h].visible){c.Bb=h+1;c=c.children[h];b.push(c);f=!1;break}c.Bb=0;f&&(c.parent!==a?c=c.parent:(e=!0,a.f=a.f.concat(b),b.length=0))}}}
function q(a,b,c){this.c=new m(a,b,c);this.canvas=this.c.canvas;this.f=this.c.a;this.Db=null;this.a=[];this.image=document.createElement("img")}function va(a,b){var c=a.c.a.font;a.c.a.font=b.font;b=a.c.a.measureText(b.text).width;a.c.a.font=c;return b}
function wa(a){var b=a.canvas.width,c=a.canvas.height,d=[];a.canvas.width=10*a.c.g+20;var e=Math.ceil(a.a.length/10);a.canvas.height=e*a.c.g+2*e;var f=0,h=-1;a.a.forEach(function(b,c){c/10===f+1?(f++,h=0):h++;b.forEach(function(b){a.f.save();var c=a.f,e=h*a.c.g+2*h,k=f*a.c.g+2*f,r=b.Lb,n=b.fillStyle,w=b.strokeStyle,V=b.lineWidth;e||(e=0);k||(k=0);n&&(c.fillStyle=n);w&&(c.strokeStyle=w);V&&(c.lineWidth=V);c.beginPath();c.moveTo(r[0].x+e,r[0].y+k);for(w=1;w<r.length;w++)c.lineTo(r[w].x+e,r[w].y+k),
n||c.stroke();c.closePath();n&&c.fill();a.f.restore();b.name&&d.push(new xa(new t(h*a.c.g+2*h,f*a.c.g+2*f),a.c.g,a.c.g,b.name))})});a.image.src=a.canvas.toDataURL("image/png");a.canvas.width=b;a.canvas.height=c;return new ya(a.image,d)}q.prototype.h=function(){var a=this;this.image.onload=function(){a.create()}};q.prototype.create=function(){this.c.b=this};q.prototype.update=function(){};function za(a,b){return Math.random()*(b-a)+a}
function ta(a,b,c){c=void 0===c?null:c;var d=-1,e=!1;return d=c?a.findIndex(function(a){c(a)===b&&(e=!0);return e}):a.findIndex(function(a){a===b&&(e=!0);return e})}function Aa(a,b,c){b=ta(a,b,c);return a[b]}function t(a,b){this.x=a;this.y=b}t.prototype.compare=function(a){return a?a.x===this.x&&a.y===this.y?!0:!1:!1};t.prototype.P=function(a){this.x=a.x;this.y=a.y};t.prototype.add=function(a){a&&(this.x+=a.x,this.y+=a.y)};
function xa(a,b,c,d){this.position=a;this.width=b;this.height=c;this.name=d}function u(){this.a=[]}function v(a,b){b.reset();a.a.push(b)}function Ca(a,b){for(var c=0;c<b.length;c++)v(a,b[c])}function y(a,b){if(0<a.a.length){var c=a.a[a.a.length-1];c.set(b);a.a.splice(a.a.length-1,1)}else c=a.f(b);return c}u.prototype.f=function(){return{}};function ya(a,b){this.image=a;this.hc=b}
function p(a,b,c,d,e,f,h){this.b=a;this.type=b;this.da=[];this.frame=this.frames=null;this.H=0;this.Ka=this.La=this.height=this.width=a.c.g;this.ca=null;Da(this,b,c);f?this.fixed=f:this.fixed=!1;this.position=new t(d,e);this.speed=new t(0,0);this.za=new t(0,0);this.children=[];this.parent=null;this.visible=!0;this.X={Da:null,ua:null};this.angle=0;this.scale=new t(1,1);this.Bb=0;this.Ja=.05;h?this.Z=h:this.Z=!1;this.oa=0;this.alpha=1;this.sa=new t(0,0);this.la=this.ka=!1;this.v=null;this.ta=new A(a,
this);this.na=100;this.o={ja:new t(1,1),xa:new t(1,1),ub:1,ba:!1};sa(this);this.Cb=!0}function Ea(a){a.sa.x=Math.floor(Math.floor(a.position.x/a.b.c.g));a.sa.y=Math.floor(Math.floor(a.position.y/a.b.c.g))}function ra(a){a.o.ja.P(a.position);a.o.xa.P(a.scale);a.o.ub=a.alpha;a.o.ba=a.visible;for(var b=a.parent;b!==a.b.c&&b;)a.o.ja.x+=b.position.x,a.o.ja.y+=b.position.y,a.o.xa.x*=b.scale.x,a.o.xa.y*=b.scale.y,a.o.ub*=b.alpha,a.o.ba&&!b.visible&&(a.o.ba=!1),b=b.parent,a.o.ba&&!b&&(a.o.ba=!1)}
function Da(a,b,c){b=void 0===b?p.a.S:b;c=void 0===c?[]:c;Array.isArray(c)?a.frames=c:a.frames=[c];a.frame=a.frames[0];a.ca=null;b===p.a.S?Fa(a):b===p.a.Xa&&(a.width=va(a.b,a.frame))}function Fa(a){for(var b=0;b<a.frames.length;b++)a.da.push(Aa(a.b.Db.hc,a.frames[b],function(a){return a.name}));a.ca=a.da[0]}function Ga(a,b){a.H=b;a.frame=a.frames[a.H];a.ca=a.da[a.H]}
p.prototype.update=function(a){this.Z&&(this.oa+=a,this.oa>this.Ja&&(this.oa=0,this.H<this.frames.length-1?this.H++:this.H=0,this.frame=this.frames[this.H],this.ca=this.da[this.H]))};p.prototype.Oa=function(a){this.sa.P(a)};p.prototype.L=function(a){this.visible=a;ua(this.b.c);ra(this)};function sa(a){a.za.x=a.o.ja.x+.5*a.width;a.za.y=a.o.ja.y+.5*a.width}function B(a,b){a.children.push(b);b.parent=a;ua(a.b.c);ra(b);sa(b);Ea(b);return b}function Ha(a,b){b.forEach(function(b){B(a,b)})}
p.prototype.removeChild=function(a){var b=-1;b=this.children.findIndex(function(b){return b===a?!0:!1});0<=b&&(this.children.splice(b,1),a.parent=null);ua(this.b.c)};p.prototype.reset=function(){this.position.x=0;this.position.y=0;this.speed.x=0;this.angle=this.speed.y=0};p.prototype.set=function(a){a.x?this.position.x=a.x:this.position.x=0;a.y?this.position.y=a.y:this.position.y=0;a.frames&&(this.da.length=0,Da(this,a.type,a.frames));a.fixed?this.fixed=a.fixed:this.fixed=!1;sa(this);Ea(this)};
g.Object.defineProperties(p,{a:{configurable:!0,enumerable:!0,get:function(){return{S:0,Xa:1}}},m:{configurable:!0,enumerable:!0,get:function(){return 0}}});function Ia(){this.a=[]}l(Ia,u);Ia.prototype.f=function(a){return new p(a.b,a.type,a.frames,a.x,a.y,a.fixed,a.Z)};function Ja(a,b,c,d,e){p.call(this,a,p.a.S,b,c,d,!0,e)}l(Ja,p);g.Object.defineProperties(Ja,{m:{configurable:!0,enumerable:!0,get:function(){return 1}}});function Ka(){this.a=[]}l(Ka,u);
Ka.prototype.f=function(a){return new Ja(a.b,a.frames,a.x,a.y,a.Z)};function La(a){p.call(this,a,null,null,0,0,!0,!1);this.h=[];this.i=new Ka;this.a=[];this.f=[];this.s=new Ia}l(La,p);function Ma(a,b){(b=void 0===b?null:b)&&Na(b,a.a,!0);a.a.forEach(function(b){a.removeChild(b)});Ca(a.i,a.a);a.a.length=0;a.f.forEach(function(b){a.removeChild(b)});Ca(a.s,a.f);a.f.length=0}
function Oa(a,b,c){c=void 0===c?null:c;for(var d=0;d<b.ya;d++)for(var e=0;e<b.Ta;e++)if(b.j[d][e].ia){var f=y(a.i,{b:a.b,frames:b.j[d][e].frames,x:d*a.b.c.g,y:e*a.b.c.g,Z:b.j[d][e].Z});f.Ja=b.j[d][e].Ja;B(a,f);a.h.push(f);a.a.push(f)}else f=new p(a.b,p.a.S,b.j[d][e].frames,d*a.b.c.g,e*a.b.c.g,!0,!1),B(a,f),a.h.push(f);c&&(Pa(c,b),a.a.forEach(function(a){Qa(c,a)}))}function Ra(a){var b=C.m;a.a.forEach(function(a){a.v=b})}
function Sa(a,b,c,d,e,f,h,k,r,n){p.call(this,a,null,null,b,c,d,null);this.U=[];for(b=0;b<f;b++)this.U.push(new e.constructor(a,e.type,e.frames,e.position.x,e.position.y,e.Z,e.Kb)),this.U[b].angle=za(0,Math.PI),B(this,this.U[b]);this.h=h;this.s=k;this.i=r;this.B=n;this.cb=!1;this.a=[];this.f=this.h;this.sb=this.hb=this.pa=this.rb=null}l(Sa,p);function Ta(a){var b=Ja.m;a.U.forEach(function(a){a.v=b})}function E(a,b,c){a.cb=b;a.f=a.h;a.rb=void 0===c?null:c}
Sa.prototype.update=function(a){var b=this;p.prototype.update.call(this,a);if(this.cb&&(this.f+=a,this.f>=this.h))if(this.a.length===this.U.length)E(this,!1);else{this.f=0;a=this.B;for(var c={Ca:0};c.Ca<this.U.length;c={Ca:c.Ca},c.Ca++){var d=-1;d=this.a.findIndex(function(a){return function(c){return c===b.U[a.Ca]?!0:!1}}(c));if(0>d){d=this.U[c.Ca];var e=za(this.s,this.i),f=0;f=isNaN(this.rb)?za(0,2*Math.PI):this.rb;d.L(!0);d.speed.x=Math.cos(f)*e;d.speed.y=Math.sin(f)*e;this.hb&&(d.speed.x+=this.hb.x,
d.speed.y+=this.hb.y);this.pa&&d.position.P(this.pa);this.sb&&(d.position.x+=this.sb.x,d.position.y+=this.sb.y);ra(d);Ea(d);this.a.push(d);a--}if(0===a)break}}};function Ua(a,b,c,d,e,f,h,k){k=void 0===k?16:k;p.call(this,a,b,c,d,e,!1,f);this.L(!1);this.Kb=h;this.a=0;this.height=this.Ka=this.width=this.La=k}l(Ua,p);Ua.prototype.update=function(a){p.prototype.update.call(this,a);this.visible&&(this.a+=a,this.a>this.Kb&&this.va())};
Ua.prototype.va=function(){this.a=0;this.L(!1);this.speed.x=0;this.speed.y=0;this.position.x=0;this.position.y=0;var a=this.parent;a.a.splice(ta(a.a,this,null),1)};function Va(){this.ha=[]}Va.prototype.D=function(a){this.ha.push(a);return a};function Wa(a){a.ha.forEach(function(a){a.active=!0})}function F(a,b,c,d){this.l=a;this.H=b;d?this.type=d:this.type=F.f;this.I=null;this.oa=this.Va=c;this.a=0;this.active=!1;this.f=0;this.Ia=null;this.N=!0;this.B=this.i=this.aa=0}F.prototype.Pa=function(){};
F.prototype.s=function(a){a&&(this.H=a)};function Xa(a){a.B=2*a.i/Math.pow(a.H,2);a.Ia=a.B*a.H;a.B*=-1}F.prototype.update=function(a){if(this.active&&(this.f+=a,this.type===F.f?this.a=this.f*this.aa/this.i:this.type===F.a&&(this.a=(this.Ia*this.f+.5*this.B*Math.pow(this.f,2))/this.i),this.N||(this.a=1-this.a),this.f>this.H)){this.f=0;a:{if(0<=this.Va&&(this.oa--,0>this.oa)){this.active=!1;this.oa=this.Va;this.N=!0;this.f=this.a=0;this.I&&this.I(this);a=!0;break a}a=!1}a||(this.N=this.N?!1:!0)}};
g.Object.defineProperties(F,{f:{configurable:!0,enumerable:!0,get:function(){return 1}},a:{configurable:!0,enumerable:!0,get:function(){return 2}}});function G(a,b,c,d,e,f){F.call(this,a,b,c,d);this.wa=this.ea=0;this.h=new t(0,0);this.da=new t(0,0);this.Pa(e,f)}l(G,F);G.prototype.update=function(a){F.prototype.update.call(this,a)};
G.prototype.Pa=function(a,b){this.h.P(a);this.da.P(b);this.ea=this.da.x-this.h.x;this.wa=this.da.y-this.h.y;a=this.h;b=this.da;this.i=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));this.s(null);Xa(this)};G.prototype.s=function(a){F.prototype.s.call(this,a);this.aa=this.i/this.H};function Ya(a,b,c,d,e,f){G.call(this,a,b,c,d,e,f)}l(Ya,G);Ya.prototype.update=function(a){G.prototype.update.call(this,a);this.active&&(this.l.position.x=this.h.x+this.a*this.ea,this.l.position.y=this.h.y+this.a*this.wa)};
function H(a,b,c,d,e,f){G.call(this,a,b,c,d,e,f)}l(H,G);H.prototype.update=function(a){G.prototype.update.call(this,a);this.active&&(this.l.scale.x=this.h.x+this.a*this.ea,this.l.scale.y=this.h.y+this.a*this.wa)};function J(a,b,c,d,e,f){F.call(this,a,b,c,d);this.h=0;this.Pa(e,f)}l(J,F);J.prototype.Pa=function(a,b){this.h=a;this.i=b-a;this.s(null);Xa(this)};J.prototype.s=function(a){F.prototype.s.call(this,a);this.aa=this.i/this.H};
J.prototype.update=function(a){F.prototype.update.call(this,a);this.active&&(this.l.alpha=this.h+this.a*this.i)};function Za(a,b,c,d,e){this.Lb=a;this.name=void 0===b?"":b;this.fillStyle=void 0===c?null:c;this.strokeStyle=void 0===d?null:d;this.lineWidth=void 0===e?null:e}
function K(a,b,c,d,e,f,h,k){e=void 0===e?"":e;f=void 0===f?100:f;h=void 0===h?0:h;k=void 0===k?0:k;e||(e="circle");h||(h=0);k||(k=2*Math.PI);f||(f=100);var r=[];k=(k-h)/f;for(var n=0;n<f;n++)r[n]=new t(Math.cos(n*k+h)*c+c+a,-Math.sin(n*k+h)*c+c+b);return new Za(r,e,void 0===d?null:d,null,null)}function $a(a,b,c,d,e){return new Za([new t(a,b),new t(a+c,b),new t(a+c,b+d),new t(a,b+d),new t(a,b)],"",e,null,null)}
function ab(a,b,c,d){a=[new t(0+a-7,7),new t(7,7),new t(7,0+b-7),new t(0+a-7,0+b-7)];b=0;for(var e,f=[],h=0;h<a.length;h++)e=K(a[h].x-7,a[h].y-7,7,void 0,void 0,void 0,b,b+Math.PI/2).Lb,f=f.concat(e),b+=Math.PI/2;return new Za(f,c,d,null,null)}
function L(a,b,c){c=void 0===c?null:c;var d=null;d="object"===typeof c?function(a,b,c){b[c].push(JSON.parse(JSON.stringify(a)))}:function(a,b,c){b[c].push(a)};this.j=[];this.ya=a;this.Ta=b;for(var e=0;e<a;e++){this.j.push([]);for(var f=0;f<b;f++)d(c,this.j,e)}this.length=a*b;this.Hb=M.f}L.prototype.getAll=function(){for(var a=[],b=0;b<this.length;b++)a.push(this.get(b));return a};L.prototype.get=function(a){var b=Math.floor(a/this.ya);a-=b*this.ya;return{$:this.j[b][a],x:b,y:a}};
function bb(a){a.getAll().forEach(function(b){a.j[b.x][b.y]=!1})}function cb(a,b,c){L.call(this,b,c,{w:[],ia:!1});this.b=a}l(cb,L);function Pa(a,b){b.getAll().forEach(function(b){b.$.ia&&(a.j[b.x][b.y].ia=!0)})}function Qa(a,b){var c=db(a,b);a.j[c.x][c.y].w.push(b)}function eb(a,b){b.forEach(function(b){Qa(a,b)})}function fb(a,b,c){c=void 0===c?!1:c;a.getAll().some(function(a){if(a.$.w.some(function(d,f){if(d===b)return a.$.w.splice(f,1),c&&(a.$.ia=!1),!0}))return!0})}
function Na(a,b,c){c=void 0===c?!1:c;b.forEach(function(b){fb(a,b,c)})}cb.prototype.update=function(){var a=this,b=[];this.getAll().forEach(function(c){c.$.w.forEach(function(d){var e=new t(c.x,c.y),f=db(a,d);f.compare(e)||b.push({l:d,ib:e,xb:f})})});b.forEach(function(b){var c=ta(a.j[b.ib.x][b.ib.y].w,b.l,null);a.j[b.ib.x][b.ib.y].w.splice(c,1)});b.forEach(function(b){a.j[b.xb.x][b.xb.y].w.push(b.l);b.l.Oa(b.xb)})};
function qa(a,b){a.getAll().forEach(function(a){a.$.w.forEach(function(a){a.ka=!1;a.la=!1})});a.getAll().forEach(function(c){c.$.w.forEach(function(d){d.o.ba&&gb(a,d,c.x,c.y,!1,b)})})}
function gb(a,b,c,d,e,f){function h(a,b){var c=0;b&&!a.la&&(c=a.speed.y*f);return a.position.y+c+a.height/2}function k(a,b){var c=0;b&&!a.ka&&(c=a.speed.x*f);return a.position.x+c+a.width/2}e=void 0===e?!1:e;f=void 0===f?0:f;var r=!1,n=[],D=[],x=0,U=0,z=0,I=0;D.push(new t(k(b,!0),h(b,!1)));D.push(new t(k(b,!1),h(b,!0)));var w=c-3;0>w&&(w=0);var V=c+3;V>a.ya&&(V=a.ya);c=d-3;0>c&&(c=0);var Ba=d+3;Ba>a.Ta&&(Ba=a.Ta);d={};for(d.x=w;d.x<V;d={x:d.x},d.x++)for(w={},w.y=c;w.y<Ba;w={y:w.y},w.y++)a.j[d.x][w.y].w.forEach(function(a,
c){return function(d){if(d.o.ba&&d!==b&&d.constructor.m&b.v){n.length=0;n.push(new t(k(d,!0),h(d,!1)));n.push(new t(k(d,!1),h(d,!0)));r=!1;for(var f=0;2>f;f++)x=n[f].x-D[f].x,U=n[f].y-D[f].y,z=d.La/2+b.La/2,I=d.Ka/2+b.Ka/2,Math.abs(x)<z&&Math.abs(U)<I&&(r=!0,e?(a.y=Ba,c.x=V):0===f?b.Cb&&(b.ka=!0,d.ka=!0):b.Cb&&(b.la=!0,d.la=!0));!e&&r&&(b.ta.ga(b,d),d.ta.ga(d,b))}}}(w,d));return r}
function db(a,b){var c=new t(b.sa.x,b.sa.y);b.speed.x?b.ka&&b.speed.x?c.x=Math.round(b.position.x/a.b.c.g):0>b.speed.x&&b.position.x<=(c.x-1)*a.b.c.g?c.x--:0<b.speed.x&&b.position.x>=(c.x+1)*a.b.c.g&&c.x++:c.x=Math.round(b.position.x/a.b.c.g);b.speed.y?b.la&&b.speed.y&&(c.y=Math.round(b.position.y/a.b.c.g)):c.y=Math.round(b.position.y/a.b.c.g);0>b.speed.y&&b.position.y<=(c.y-1)*a.b.c.g?c.y--:0<b.speed.y&&b.position.y>=(c.y+1)*a.b.c.g&&c.y++;return c}
cb.prototype.clear=function(){this.getAll().forEach(function(a){a.$.w.length=0;a.$.ia=!1})};
function M(){this.wb=[];this.wb.push({id:M.a.E,V:new t(1,0),fa:[]},{id:M.a.Pb,V:new t(0,-1),fa:[]},{id:M.a.Vb,V:new t(-1,0),fa:[]},{id:M.a.Tb,V:new t(0,1),fa:[]},{id:M.a.Qb,V:new t(1,-1),fa:[new t(1,0),new t(0,-1)]},{id:M.a.Rb,V:new t(-1,-1),fa:[new t(0,-1),new t(-1,0)]},{id:M.a.Ub,V:new t(-1,1),fa:[new t(-1,0),new t(0,1)]},{id:M.a.Gb,V:new t(1,1),fa:[new t(0,1),new t(1,0)]},{id:M.a.NONE,V:new t(0,0),fa:[]})}
g.Object.defineProperties(M,{a:{configurable:!0,enumerable:!0,get:function(){return{E:1,Pb:2,Vb:3,Tb:4,Qb:5,Rb:6,Ub:7,Gb:8,NONE:9}}},f:{configurable:!0,enumerable:!0,get:function(){return new M}}});function hb(){this.a=[]}l(hb,u);hb.prototype.f=function(a){return new ib(a.position,a.direction)};function jb(){this.a=[]}l(jb,u);jb.prototype.f=function(a){return new N(a.j,a.start,a.end,a.u,a.C,a.v)};function kb(){this.a=[]}l(kb,u);
kb.prototype.f=function(a){return new lb(a.fb,a.start,a.end,a.F,a.C,a.ma,a.v)};function ib(a,b){this.position=a?new t(a.x,a.y):new t(0,0);b?this.direction=b:this.direction=M.a.NONE}ib.prototype.reset=function(){this.direction=M.a.NONE;this.position.x=0;this.position.y=0};ib.prototype.set=function(a){this.position.P(a.position);this.direction=a.direction};
function N(a,b,c,d,e,f){this.j=a;this.start=b?new t(b.x,b.y):new t(0,0);this.end=c?new t(c.x,c.y):new t(0,0);this.C=e;this.v=f;if(d)for(this.u=[],a=0;a<d.length-1;a++)this.u.push(y(this.C,{position:d[a].position,direction:d[a].direction}));else this.u=[],this.u.push(y(this.C,{position:b,direction:M.a.NONE}));this.ab=this.Ab=!1}N.prototype.reset=function(){Ca(this.C,this.u);this.u.length=0;this.ab=this.Ab=!1};
N.prototype.set=function(a){this.start.P(a.start);this.end.P(a.end);this.v=a.v;if(a.u)for(var b=0;b<a.u.length-1;b++)this.u.push(y(this.C,{position:a.u[b].position,direction:a.u[b].direction}));else this.u.push(y(this.C,{position:a.start,direction:M.a.NONE}))};function mb(a,b){var c=!1;if(a.j.j[b.x][b.y].ia||a.j.j[b.x][b.y].w.some(function(b){if(b.o.ba&&b.constructor.m&a.v)return!0}))c=!0;return c}
function nb(a,b,c){return c.fa.some(function(c){if(a.j.j[b.position.x+c.x][b.position.y+c.y].ia||a.j.j[b.position.x+c.x][b.position.y+c.y].w.some(function(b){if(b.o.ba&&b.constructor.m&a.v)return!0}))return!0})}g.Object.defineProperties(N,{a:{configurable:!0,enumerable:!0,get:function(){return{Ob:0,Fb:1,Eb:2,Sb:3}}}});
function lb(a,b,c,d,e,f,h){this.fb=a;this.C=e;this.ma=f;this.v=void 0===h?0:h;b||(b=new t(0,0));c||(c=new t(0,0));this.a=new L(a.ya,a.Ta,!1);d?this.F=d:(this.F=[],this.F.push(y(this.ma,{j:a,start:b,end:c,u:null,C:this.C,v:this.v})))}lb.prototype.set=function(a){this.F.push(y(this.ma,{j:this.fb,start:a.start,end:a.end,u:null,C:this.C,v:this.v}));bb(this.a);this.v=a.v};lb.prototype.reset=function(){Ca(this.ma,this.F);this.F.length=0};
function O(a){this.f=a;this.J=0;this.a=!1;this.I=null;this.active=!1}O.prototype.update=function(a){!this.a&&this.active&&(this.J+=a,this.J>this.f&&(this.a=!0,this.I&&this.I(this)))};O.prototype.reset=function(a){this.active=a;this.a=!1;this.J=0};function A(a,b){this.b=a;this.l=b;this.a=[]}
A.prototype.ga=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];var d=this;this.a.forEach(function(a){for(var c=d.l;c&&c!==d.b.c&&(a.cc!==c||(a.Zb.apply(a,b instanceof Array?b:oa(na(b))),!a.terminate));)c=c.parent})};A.prototype.addListener=function(a,b,c){a=new ob(a,b,void 0===c?!1:c);this.a.push(a);return a};function ob(a,b,c){this.cc=a;this.Zb=b;this.terminate=void 0===c?!1:c};function P(a,b,c){q.call(this,a,b,c);this.i=null;this.G=new Q(this);window.addEventListener("keydown",function(a){-1<[32,37,38,39,40].indexOf(a.keyCode)&&a.preventDefault()},!1)}l(P,q);
P.prototype.h=function(){q.prototype.h.call(this);this.a.push([ab(this.c.g,this.c.g,"e1",P.a.green)]);this.a.push([ab(this.c.g,this.c.g,"p",P.a.lc)]);var a=new Za([new t(0,this.c.g/2-1),new t(this.c.g,this.c.g/2-1),new t(this.c.g/2,this.c.g)],"",P.a.Jb);this.a.push([K(0,0,this.c.g/2,P.a.Jb,"t",void 0,0,Math.PI),a]);this.a.push(Array(K(0,0,this.c.g/2,P.a.red,"cR")));this.a.push([ab(this.c.g,this.c.g,"e2",P.a.ic)]);this.a.push(Array(K(0,0,this.c.g/4,P.a.Ua,"b0")));this.a.push(Array(K(0,0,this.c.g/4,
P.a.red,"b1")));this.a.push(Array(K(0,0,this.c.g/4,P.a.dc,"b2")));this.a.push(Array(K(0,0,this.c.g/3,P.a.Za,"sB")));this.a.push(Array(K(0,0,this.c.g/4,P.a.red,"s0")));this.a.push(Array(K(0,0,this.c.g/4,P.a.green,"s1")));this.a.push(Array(K(0,0,this.c.g/3,P.a.bc,"pU0",6)));this.a.push(Array(K(0,0,this.c.g/3,P.a.Xb,"pU1",6)));this.a.push(pb(this,"w1",[P.a.Yb,P.a.Za]));this.a.push(pb(this,"b",[P.a.$b,P.a.ac],2,2));this.Db=wa(this)};
function pb(a,b,c,d,e){d=void 0===d?4:d;e=void 0===e?4:e;var f=a.c.g/e,h=f/2;a=a.c.g/d;for(var k=[],r=0;r<=e;r++)for(var n=0;n<d;n++){var D=0;r&&(D=r%2);Math.floor(n/2)===n/2&&r<e?k.push($a(r*f,n*a,f,a,c[D])):r?r===e?k.push($a(h+f*(e-1),n*a,h,a,c[1-D])):k.push($a(h+f*(r-1),n*a,f,a,c[1-D])):k.push($a(0,n*a,h,a,c[1-D]))}k[0].name=b;return k}
P.prototype.create=function(){q.prototype.create.call(this);var a=new cb(this,Q.qa.Ya,Q.qa.Wa);this.c.A=a;this.i={ec:new qb(this,0,0)};a=this.c;var b=this.i.ec;a.children.push(b);b.parent=a;ua(a);ra(b);sa(b);Ea(b);this.c.start()};g.Object.defineProperties(P,{a:{configurable:!0,enumerable:!0,get:function(){return{green:"green",Ua:"yellow",red:"red",Za:"Black",Yb:"#7FFFD4",lc:"teal",Jb:"indigo",ic:"#6A5ACD",dc:"Magenta",bc:"Lime",Xb:"Aqua",$b:"DimGray",ac:"#D3D3D3"}}}});
function qb(a,b,c){p.call(this,a,null,null,b,c,!0,!1);var d=this;this.a=0;this.b.c.A.clear();this.s=new La(a);B(this,this.s);this.ea=this.b.c.D(new J(this,2,1,F.a,1,.2));this.i=this.b.c.D(new Va);a=.5*this.b.c.g;b=new t(0,0);for(c=0;7>c;c++){var e=Math.random()*Math.PI*2;b.x=Math.cos(e)*a;b.y=Math.sin(e)*a;this.i.D(new Ya(this,.1,0,F.f,new t(0,0),b));this.i.D(new Ya(this,.1,0,F.f,b,new t(0,0)))}this.i.D(this.ea);this.N=[["PRESS THE 'wasd' KEYS TO","MOVE YOUR TANK"],["USE THE CURSOR KEYS TO","AIM AND FIRE YOUR GUN"],
["PICK UP POWER UPS-GIVE","YOURSELF THE EDGE"],["RUN OVER ALL THE GREEN","BUTTONS TO MAKE THE AI GO","OFFLINE AND ADVANCE","TO THE NEXT LEVEL"]];this.aa=["","PRESS ENTER TO START"];this.f=new O(4);var f=0;rb(this.b.G.Y.Na,this.N[f].concat(this.aa));this.f.I=function(){f++;f===d.N.length&&(f=0);rb(d.b.G.Y.Na,d.N[f].concat(d.aa));d.f.reset(!0)};this.b.c.Ga.push(this.f);this.X.ua=function(a){13===a.keyCode&&0===d.a&&(d.a++,d.h.active=!0)};this.h=this.b.c.D(new H(this,2,0,F.a,new t(1,1),new t(0,0)));
this.h.I=function(){sb(d,d.a);d.B.active=!0};this.B=this.b.c.D(new H(this,2,0,F.a,new t(0,0),new t(1,1)));sb(this,this.a);this.B.active=!0}l(qb,p);
function sb(a,b){b=void 0===b?0:b;var c=qb.a[b];Ma(a.s,a.b.c.A);a.removeChild(a.b.G.Y);var d=0,e=tb(a.b.G,c.Ha,c.K,c.M,c.Ea);0===b?(a.b.G.Y.Na.L(!0),ub(a.b.G.R,0,new t(12*a.b.c.g,12*a.b.c.g))):(a.b.G.Y.Na.L(!1),a.f.reset(!1));Oa(a.s,e.fc,a.b.c.A);Ra(a.s);Ha(a,e.K);B(a,e.R);Ha(a,e.M);B(a,e.O);e.O.l.yb.addListener(a,function(){Wa(a.i);a.ea.active=!0},!0);e.O.l.jb.addListener(a,function(b){var c=a.b.G.Y.gb;c.ra=b;c.a.reset(!0)},!0);e.O.l.kb.addListener(a,function(){a.h.active=!0},!0);eb(a.b.c.A,e.K);
Qa(a.b.c.A,e.O.l);e.M.forEach(function(b){eb(a.b.c.A,b.w);b.Qa.reset(!0)});e.K.forEach(function(b){b.zb.addListener(a,function(){d++;d===e.K.length&&(a.a++,a.a===qb.a.length&&(a.a=1),a.h.active=!0)},!0)});B(a,a.b.G.Y);a.B.I=function(){0===a.a&&a.f.reset(!0)}}qb.prototype.L=function(a){p.prototype.L.call(this,a);a&&sb(this)};
g.Object.defineProperties(qb,{a:{configurable:!0,enumerable:!0,get:function(){return[{Ha:[],K:"1fff",M:[],Ea:"88"},{Ha:["84a7"],K:"8df1",M:["0ff4","01f4"],Ea:"11"},{Ha:["58a3"],K:"a81f7f",M:["0ff5","0f15"],Ea:"11"},{Ha:["3a833"],K:"8a8511",M:["01f5","1ff3"],Ea:"f1"},{Ha:["2a533","c3aab"],K:"5a5511c5ca",M:["01f3","1ff3","0881"],Ea:"f1"},{Ha:["2bc22"],K:"5b54c4cb9f",M:["01f3","1ff2","1112"],Ea:"e6"}]}}});
function vb(a,b,c){p.call(this,a,null,null,b,c,!0,!1);this.f=new R(a,0,0,"HEALTH:",P.a.Ua);B(this,this.f);this.gb=new wb(a,this.f.width,0,100,P.a.Ua,.05);B(this,this.gb);this.a=new R(a,0,0,"SCORE:",P.a.Ua);this.Fa=new wb(a,0,0,0,P.a.Ua,.01);B(this,this.a);B(this,this.Fa);this.Na=new xb(a,this.b.c.g,this.b.c.g);B(this,this.Na)}l(vb,p);vb.prototype.update=function(){this.Fa.position.x=this.b.c.canvas.width-this.Fa.width;this.a.position.x=this.Fa.position.x-this.a.width};
function yb(a,b,c){p.call(this,a,null,null,b,c,!0,!1);this.mb=a.G.mb}l(yb,p);function ub(a,b,c){b=B(a,y(a.mb[b],{b:a.b,x:c.x,y:c.y}));Qa(a.b.c.A,b)}function zb(a,b){fb(a.b.c.A,b);v(a.mb[b.constructor.W],b);a.removeChild(b)}yb.prototype.reset=function(){for(p.prototype.reset.call(this);0<this.children.length;)zb(this,this.children[0])};
function Q(a){this.b=a;this.h=new Ab;this.H=new Bb;this.a=new Cb;this.mb=[new Db,new Eb,new Fb,new Gb,new Hb];this.f=new Ib;this.Ma=[];this.eb=[new Jb,new Kb];this.i="b";this.s=["w1"];this.R=this.O=null;this.K=[];this.M=[];this.Aa={C:new hb,ma:new jb,Ib:new kb};this.Y=new vb(a,0,0)}
function tb(a,b,c,d,e){Lb(a);a.R=y(a.f,{b:a.b,x:0,y:0});a.O=y(a.a,{b:a.b,x:0,y:0,Ra:{b:a.b,x:S(e,0)*a.b.c.g,y:S(e,1)*a.b.c.g,Z:!1,Ma:a.Ma}});Mb(a,c);Nb(a,d);b=Ob(a,b);a.M.forEach(function(b){b.w.forEach(function(b){a.Ma.push(b);b.lb=a.O.l})});return{O:a.O,K:a.K,M:a.M,fc:b,R:a.R}}
function Lb(a){a.O&&(fb(a.b.c.A,a.O.l),v(a.a,a.O),a.O.parent.removeChild(a.O),a.Y.gb.P(a.O.l.na));a.R&&(Na(a.b.c.A,a.R.children),v(a.f,a.R),a.R.parent.removeChild(a.R));a.K.forEach(function(b){fb(a.b.c.A,b);v(a.H,b);b.parent.removeChild(b)});a.K.length=0;a.M.forEach(function(b){Na(a.b.c.A,b.w);v(a.h,b);b.parent.removeChild(b)});a.M.length=0;a.Ma.length=0}function S(a,b){return parseInt(a.charAt(b),16)}
function Mb(a,b){for(var c=0;c<b.length;c+=2){var d=new Pb(a.b,0,0);d.position.x=S(b,c)*a.b.c.g+(a.b.c.g-d.width)/2;d.position.y=S(b,c+1)*a.b.c.g+(a.b.c.g-d.height)/2;a.K.push(d)}}function Nb(a,b){b.forEach(function(b){a.M.push(y(a.h,{b:a.b,id:S(b,0),x:S(b,1)*a.b.c.g,y:S(b,2)*a.b.c.g,total:S(b,3)}))})}
function Ob(a,b){function c(a,b){e(k.j[b][a])}function d(a,b){e(k.j[a][b])}function e(b){b.frames=a.s;b.ia=!0;b.Z=!1}function f(a,b,c,d){if(a>b)for(;b<=a;b++)d(b,c);else for(;b>=a;b--)d(b,c);return a}var h=a.constructor.qa,k=new L(h.Ya,h.Wa,{frames:[],ia:!1,Z:!1,Ja:.5});for(h=0;h<Q.qa.Ya;h++)e(k.j[h][0]),e(k.j[h][Q.qa.Wa-1]);for(h=1;h<Q.qa.Wa-1;h++)e(k.j[0][h]),e(k.j[Q.qa.Ya-1][h]);b.forEach(function(a){var b=new t(S(a,0)+1,S(a,1)+1);b=new t(b.x,b.y);for(var e=2;e<a.length;e++)0===e%2?b.x=f(S(a,e)+
1,b.x,b.y,d):b.y=f(S(a,e)+1,b.y,b.x,c)});k.getAll().forEach(function(b){0===b.$.frames.length&&(b.$.frames=a.i)});return k}g.Object.defineProperties(Q,{qa:{configurable:!0,enumerable:!0,get:function(){return{Ya:17,Wa:17}}}});function Qb(a,b,c,d,e){p.call(this,a,null,null,0,0,!0,!1);var f=this;this.eb=a.G.eb;this.a=e;this.w=[];this.Qa=new O(3);this.Qa.I=function(){Rb(f);f.Qa.reset(!0)};a.c.Ga.push(this.Qa);this.pa=new t(c,d);Sb(this,b)}l(Qb,p);
function Sb(a,b){for(var c=null,d=0;d<a.a;d++)c=y(a.eb[b],{b:a.b,x:0,y:0,Ra:{b:a.b,x:0,y:0}}),a.w.push(c.l);a.w.forEach(function(b){b.L(!1);b.position.P(a.pa);B(a,b.parent)})}function Rb(a){a.w.some(function(b){if(!b.visible){b.position.P(a.pa);var c=a.b.c.A;if(!gb(c,b,Math.floor(b.position.x/c.b.c.g),Math.floor(b.position.y/c.b.c.g),!0))return b.L(!0),b.jc.active=!0,Ea(b),!0}})}Qb.prototype.set=function(a){this.pa.x=a.x;this.pa.y=a.y;this.a=a.total;Sb(this,a.id)};
Qb.prototype.reset=function(){var a=this;p.prototype.reset.call(this);this.w.forEach(function(b){v(a.eb[b.constructor.vb],b.parent);b.reset();a.removeChild(b.parent)});this.w.length=0;this.Qa.reset(!1)};
function Pb(a,b,c){p.call(this,a,p.a.S,["sB"],b,c,!0,!1);var d=this;this.width=this.height=this.b.c.g/1.5;this.La=this.Ka=1;this.a=new Tb(a,0,0);this.a.position.x=(this.width-this.a.width)/2;this.a.position.y=(this.height-this.a.height)/2;B(this,this.a);this.f=!0;this.Cb=!1;this.ta.addListener(this,function(){d.f&&(d.f=!1,Ga(d.a,1),d.zb.ga(d))},!0);this.zb=new A(a,this);this.v=C.m}l(Pb,p);Pb.prototype.reset=function(){p.prototype.reset.call(this);this.f=!0;this.zb.a.length=0};
g.Object.defineProperties(Pb,{m:{configurable:!0,enumerable:!0,get:function(){return 8}}});function Tb(a,b,c){p.call(this,a,p.a.S,["s1","s0"],b,c,!0,!1);this.width=this.height=this.b.c.g/2}l(Tb,p);function T(a,b,c){p.call(this,a,null,null,b,c,!0,!1);this.l=null;this.T=[]}l(T,p);function Ub(a,b){b.forEach(function(b){b.hb=a.speed;Ta(b);b.sb=new t(a.b.c.g/4,a.b.c.g/4);B(a,b);eb(a.b.c.A,b.U);b.pa=a.l.position;a.T.push(b)})}
T.prototype.reset=function(){p.prototype.reset.call(this);this.T.forEach(function(a){a.U.forEach(function(a){a.visible&&a.va()});E(a,!1)})};
function Vb(a,b,c,d){T.call(this,a,b,c);var e=this;b=new W(a,p.a.S,["b0","b1"],0,0,!1,2);c=[];for(var f=0;3>f;f++)c.push(new Sa(a,0,0,!1,b,20,.4,64,64,1)),c[f].U.forEach(function(a){a.ta.addListener(a,function(a){a.va()},!0)});this.l=new C(d.b,d.x,d.y,d.Z);Ub(this,c);B(this,this.l);this.l.wa.addListener(this,function(a){var b=20,c=0;a&&(b=40,c=1);e.T.forEach(function(a){a.U.forEach(function(a){a.$a=b;Ga(a,c)})})},!0)}l(Vb,T);
Vb.prototype.set=function(a){T.prototype.set.call(this,{b:a.b,x:a.x,y:a.y});this.l.set(a.Ra)};Vb.prototype.reset=function(){T.prototype.reset.call(this);this.l.reset()};
function X(a,b,c,d,e){p.call(this,a,p.a.S,b,c,d,!1,e);var f=this;this.Nb=this.b.c.D(new J(this,.1,1,F.f,1,.2));this.aa=this.b.c.D(new H(this,.3,0,F.a,new t(1,1),new t(0,0)));this.aa.I=function(){f.terminate();f.scale.x=f.scale.y=1;f.na=100};this.kb=new A(a,this);this.jc=this.b.c.D(new H(this,.3,0,F.a,new t(0,0),new t(1,1)));this.$a=0}l(X,p);X.prototype.s=function(a){this.Nb.active=!0;a.va&&a.va();this.na-=a.$a};X.prototype.terminate=function(){this.L(!1);this.kb.ga(this)};
function Wb(a,b,c){p.call(this,a,p.a.S,"t",b,c,!0,!1);this.scale.x=.75}l(Wb,p);
function C(a,b,c,d){X.call(this,a,"p",b,c,d);var e=this;this.h=new t(0,0);this.f=new t(0,0);this.ea=this.b.c.g;this.Va=1.5*this.ea;this.N=this.ea;this.wa=new A(a,this);this.v=C.m+Y.m+Ja.m+Xb.m+Z.m;this.ta.addListener(this,function(a,b){b.constructor.m===Xb.m&&e.s(b);if(b.constructor.m===Z.m){zb(e.b.G.R,b);for(var c in e.i)e.i.hasOwnProperty(c)&&(a=e.i[c],a.id===b.constructor.W&&(a.J&&a.J.reset(!0),a.Ba&&a.Ba()))}b.constructor.m!==Y.m||e.B.active||e.s(b)},!0);this.a={left:!1,right:!1,tb:!1,bb:!1,ob:!1,
pb:!1,qb:!1,nb:!1};this.X.ua=function(a){if("d"===a.key||"D"===a.key)e.a.right=!0;else if("a"===a.key||"A"===a.key)e.a.left=!0;if("w"===a.key||"W"===a.key)e.a.tb=!0;else if("s"===a.key||"S"===a.key)e.a.bb=!0;39===a.keyCode?e.a.pb=!0:37===a.keyCode&&(e.a.ob=!0);38===a.keyCode?e.a.qb=!0:40===a.keyCode&&(e.a.nb=!0);Yb(e);Zb(e)};this.X.Da=function(a){if("d"===a.key||"D"===a.key)e.a.right=!1;else if("a"===a.key||"A"===a.key)e.a.left=!1;else if("w"===a.key||"W"===a.key)e.a.tb=!1;else if("s"===a.key||"S"===
a.key)e.a.bb=!1;39===a.keyCode?e.a.pb=!1:37===a.keyCode?e.a.ob=!1:38===a.keyCode?e.a.qb=!1:40===a.keyCode&&(e.a.nb=!1);Yb(e);Zb(e)};this.B=new O(2);this.b.c.Ga.push(this.B);this.B.I=function(){e.B.reset(!1)};this.i={Mb:{id:$b.W,J:new O($b.a),Ba:function(){e.parent.T[1].cb&&Zb(e,!0)}},nc:{id:ac.W,J:null,Ba:function(){e.na=100;e.jb.ga(e.na)}},oc:{id:bc.W,J:null,Ba:function(){e.b.G.Ma.forEach(function(a){a.visible&&a.terminate()});e.yb.ga()}},kc:{id:cc.W,J:new O(bc.a),Ba:function(){e.N=e.Va;Yb(e,!0)}},
gc:{id:dc.W,J:new O(dc.a),Ba:function(){e.wa.ga(!0)}}};for(var f in this.i)this.i.hasOwnProperty(f)&&(b=this.i[f],b.J&&this.b.c.Ga.push(b.J));this.i.Mb.J.I=function(a){a.reset(!1);E(e.parent.T[0],!1,0);E(e.parent.T[2],!1,0)};this.i.kc.J.I=function(a){a.reset(!1);e.N=e.ea};this.i.gc.J.I=function(a){a.reset(!1);e.wa.ga(!1)};this.yb=new A(a,this);this.jb=new A(a,this);this.Ia=new Wb(a,0,0);B(this,this.Ia)}l(C,X);
C.prototype.s=function(a){X.prototype.s.call(this,a);a.constructor.m===Y.m&&this.B.reset(!0);this.jb.ga(this.na)};C.prototype.set=function(a){X.prototype.set.call(this,a);this.L(!0)};C.prototype.reset=function(){X.prototype.reset.call(this);this.yb.a.length=0;this.jb.a.length=0;this.kb.a.length=0;this.f.x=this.f.y=0;this.h.x=this.h.y=0;for(var a in this.a)this.a.hasOwnProperty(a)&&(this.a[a]=!1)};C.prototype.Oa=function(a){X.prototype.Oa.call(this,a)};
function Yb(a,b){var c=new t(a.h.x,a.h.y);a.h.x=a.a.left&&!a.a.right?-1:a.a.right&&!a.a.left?1:0;a.h.y=a.a.tb&&!a.a.bb?-1:a.a.bb&&!a.a.tb?1:0;if((void 0===b?0:b)||!a.h.compare(c))b=Math.atan2(a.h.y,a.h.x),a.speed.x=Math.cos(b)*a.N*Math.abs(a.h.x),a.speed.y=Math.sin(b)*a.N*Math.abs(a.h.y)}
function Zb(a,b){var c=new t(a.f.x,a.f.y);a.f.x=a.a.ob&&!a.a.pb?-1:a.a.pb&&!a.a.ob?1:0;a.f.y=a.a.qb&&!a.a.nb?-1:a.a.nb&&!a.a.qb?1:0;if((void 0===b?0:b)||!a.f.compare(c))if(a.f.x||a.f.y){var d=Math.atan2(a.f.y,a.f.x);a.Ia.angle=d+Math.PI/2;a.i.Mb.J.active?(d-=.35,a.parent.T.forEach(function(a){E(a,!0,d);d+=.35})):E(a.parent.T[1],!0,d)}else a.parent.T.forEach(function(a){E(a,!1,0)})}
C.prototype.update=function(a){X.prototype.update.call(this,a);0!==this.b.G.Y.gb.value||this.aa.active||(this.aa.active=!0)};g.Object.defineProperties(C,{m:{configurable:!0,enumerable:!0,get:function(){return 2}}});function ec(a,b,c){T.call(this,a,b,c);this.a=new R(a,0,0,"+100");B(this,this.a);this.f=this.b.c.D(new Va);this.a.L(!1)}l(ec,T);
function fc(a){function b(){a.a.alpha=1;a.a.L(!1)}a.f.D(new Ya(a.a,1,0,F.f,new t(0,0),new t(0,-2*a.b.c.g)));a.f.D(new J(a.a,1,0,F.f,1,0));a.l.kb.addListener(a,function(){a.a.position.P(a.l.position);a.f.ha[0].Pa(a.a.position,new t(a.a.position.x,a.a.position.y-2*a.b.c.g));Wa(a.f);a.a.L(!0);a.f.ha[1].I=b;var c=a.b.G.Y.Fa;c.ra=a.b.G.Y.Fa.ra+100;c.a.reset(!0)},!0)}function gc(a,b,c,d){ec.call(this,a,b,c);this.l=new hc(d.b,d.x,d.y);B(this,this.l);fc(this)}l(gc,ec);
function ic(a,b,c,d){ec.call(this,a,b,c);b=new Xb(a,p.a.S,"b2",0,0,!1,2,function(){this.va()});a=new Sa(a,0,0,!1,b,20,3,64,64,1);a.U.forEach(function(a){a.ta.addListener(a,function(a){a.va()},!0)});this.l=new jc(d.b,d.x,d.y);Ub(this,[a]);B(this,this.l);fc(this)}l(ic,ec);function kc(a,b,c){p.call(this,a,p.a.S,"cR",b,c,!0,!1);var d=this;this.a=this.b.c.D(new Va);this.a.D(new H(this,1,1,F.a,new t(1,1),new t(.1,.1)));a=new J(this,1,1,F.a,1,.1);this.a.D(a);a.I=function(){Wa(d.a)}}l(kc,p);
function Y(a,b,c,d,e){X.call(this,a,b,c,d,e);var f=this;this.R=a.G.R;this.h=.9*this.b.c.g;this.lb=null;this.Aa=a.G.Aa;this.a=null;this.v=C.m+Y.m+W.m;this.f=0;this.ta.addListener(this,function(a,b){b.constructor.m===W.m&&f.s(b)},!0);this.i=null;this.N=[{id:0,Sa:.2},{id:1,Sa:.2},{id:2,Sa:.2},{id:3,Sa:.2},{id:4,Sa:.2}];this.B=new kc(a,c,d);B(this,this.B);Wa(this.B.a);this.$a=20}l(Y,X);Y.prototype.terminate=function(){X.prototype.terminate.call(this);lc(this)};
function lc(a){if(.25>Math.random()){var b=Math.random(),c=0,d=0;a.N.some(function(e){d+=e.Sa;if(b>=c&&b<d)return ub(a.R,e.id,new t(a.position.x+(a.width-a.b.c.g/1.5)/2,a.position.y+(a.height-a.b.c.g/1.5)/2)),!0;c=d})}}Y.prototype.s=function(a){X.prototype.s.call(this,a);0>=this.na&&(this.aa.active=!0)};
function mc(a){var b=a.sa,c=a.lb.sa,d=a.constructor.m;a.a&&v(a.Aa.Ib,a.a);a.a=y(a.Aa.Ib,{fb:a.b.c.A,start:new t(b.x,b.y),end:new t(c.x,c.y),F:null,mc:null,C:a.Aa.C,ma:a.Aa.ma,v:d});b=a.a.F;c=a.a;var e=d=0,f=!1,h=!1;if(!c.F[0].start.compare(c.F[0].end)){do if(c.F[d].Ab||c.F[d].ab)d<c.F.length-1?d++:h?(d=0,h=!1):f=!0;else{a:{var k=c.F[d];var r=c.a,n=k.u[k.u.length-1],D=0,x=new t(0,0);n.direction!==M.a.NONE&&(D=n.direction);for(;D<M.a.Gb;D++){var U=k.j.Hb.wb[D];var z=n.position;var I=U.V;z=new t(z.x+
I.x,z.y+I.y);x.P(z);if(x.x<k.j.ya&&0<=x.x&&x.y<k.j.Ta&&0<=x.y&&!nb(k,n,U)){z=!1;x.compare(k.end)&&(z=!0);if(z){n.direction=U.id;k.Ab=!0;k.u.push(y(k.C,{position:x,direction:M.a.NONE}));k=N.a.Fb;break a}if(z=!mb(k,x)){z=!1;for(I=0;I<k.u.length;I++)if(k.u[I].position.x===x.x&&k.u[I].position.y===x.y){z=!0;break}z=!z}if(z){r.j[x.x][x.y]?k.ab=!0:r.j[x.x][x.y]=!0;n.direction=U.id;k.u.push(y(k.C,{position:x,direction:M.a.NONE}));k=N.a.Eb;break a}}}k.ab=!0;k=N.a.Ob}k===N.a.Eb?(c.F.push(y(c.ma,{j:c.fb,start:c.F[d].start,
end:c.F[d].end,u:c.F[d].u,C:c.C,v:c.v})),d++,h||(h=!0)):k===N.a.Sb?h||(h=!0):k===N.a.Fb&&(e=d,f=!0,h||(h=!0))}while(!f)}a.i=b[e];a.f=0;b=a.b.c.A.Hb.wb[a.i.u[a.f].direction-1];c=Math.atan2(b.V.y,b.V.x);a.speed.x=Math.cos(c)*a.h*Math.abs(b.V.x);a.speed.y=Math.sin(c)*a.h*Math.abs(b.V.y);a.f++}
Y.prototype.update=function(a){X.prototype.update.call(this,a);(this.ka&&this.speed.x&&!this.speed.y||this.la&&this.speed.y&&!this.speed.x||this.speed.x&&this.speed.y&&this.ka||this.la)&&mc(this);0===this.speed.x&&0===this.speed.y&&mc(this)};Y.prototype.Oa=function(a){X.prototype.Oa.call(this,a);mc(this)};g.Object.defineProperties(Y,{m:{configurable:!0,enumerable:!0,get:function(){return 4}},vb:{configurable:!0,enumerable:!0,get:function(){return-1}}});
function hc(a,b,c){Y.call(this,a,["e1"],b,c,!1)}l(hc,Y);g.Object.defineProperties(hc,{vb:{configurable:!0,enumerable:!0,get:function(){return 0}}});function jc(a,b,c){Y.call(this,a,["e2"],b,c,!1)}l(jc,Y);jc.prototype.update=function(a){Y.prototype.update.call(this,a);a=Math.PI/4*Math.round(4/Math.PI*Math.atan2(this.lb.za.y-this.za.y,this.lb.za.x-this.za.x));!this.parent.T[0].cb&&this.visible?E(this.parent.T[0],!0,a):this.parent.T[0].rb=a};
jc.prototype.L=function(a){Y.prototype.L.call(this,a);a||E(this.parent.T[0],!1,0)};g.Object.defineProperties(jc,{vb:{configurable:!0,enumerable:!0,get:function(){return 1}}});function Jb(){this.a=[]}l(Jb,u);Jb.prototype.f=function(a){return new gc(a.b,a.x,a.y,a.Ra)};function Kb(){this.a=[]}l(Kb,u);Kb.prototype.f=function(a){return new ic(a.b,a.x,a.y,a.Ra)};function Bb(){this.a=[]}l(Bb,u);Bb.prototype.f=function(a){return new Pb(a.b,a.x,a.y)};function Ab(){this.a=[]}l(Ab,u);
Ab.prototype.f=function(a){return new Qb(a.b,a.id,a.x,a.y,a.total)};function Cb(){this.a=[]}l(Cb,u);Cb.prototype.f=function(a){return new Vb(a.b,a.x,a.y,a.Ra)};function Db(){this.a=[]}l(Db,u);Db.prototype.f=function(a){return new $b(a.b,a.x,a.y)};function Eb(){this.a=[]}l(Eb,u);Eb.prototype.f=function(a){return new ac(a.b,a.x,a.y)};function Gb(){this.a=[]}l(Gb,u);Gb.prototype.f=function(a){return new cc(a.b,a.x,a.y)};function Fb(){this.a=[]}l(Fb,u);
Fb.prototype.f=function(a){return new bc(a.b,a.x,a.y)};function Hb(){this.a=[]}l(Hb,u);Hb.prototype.f=function(a){return new dc(a.b,a.x,a.y)};function Ib(){this.a=[]}l(Ib,u);Ib.prototype.f=function(a){return new yb(a.b,a.x,a.y)};function R(a,b,c,d,e){p.call(this,a,p.a.Xa,{font:"bold 32px serif",text:void 0===d?"":d,fillStyle:void 0===e?"Black":e},b,c,!0,!1)}l(R,p);function xb(a,b,c,d){d=void 0===d?10:d;p.call(this,a,null,null,b,c,!0,!1);for(b=0;b<d;b++)B(this,new R(a,0,0,"",P.a.Za));nc(this)}
l(xb,p);function nc(a){a.children.forEach(function(b,c){b.position.y=c*a.b.c.g})}function rb(a,b){a.children.forEach(function(a){a.frame.text=""});b.forEach(function(b,d){a.children[d].frame.text=b})}
function wb(a,b,c,d,e,f){d=void 0===d?0:d;f=void 0===f?.1:f;R.call(this,a,b,c,d,void 0===e?"Black":e);var h=this;this.ra=this.value=d;this.f=f;this.a=new O(this.f);this.b.c.Ga.push(this.a);this.a.I=function(a){h.ra>h.value?h.value++:h.ra<h.value&&h.value--;h.ra!==h.value&&a.reset(!0);h.frame.text=h.value;h.width=va(h.b,h.frame)}}l(wb,R);wb.prototype.P=function(a){this.value=this.ra=a;this.a.reset(!1);this.frame.text=this.value};
function W(a,b,c,d,e,f,h,k){Ua.call(this,a,b,c,d,e,f,h,void 0===k?16:k);this.$a=20}l(W,Ua);g.Object.defineProperties(W,{m:{configurable:!0,enumerable:!0,get:function(){return 16}}});function Xb(a,b,c,d,e,f,h,k){W.call(this,a,b,c,d,e,f,h,void 0===k?16:k)}l(Xb,W);g.Object.defineProperties(Xb,{m:{configurable:!0,enumerable:!0,get:function(){return 32}}});
function Z(a,b,c,d){p.call(this,a,p.a.S,["pU0","pU1"],b,c,!0,!0);this.Ja=.2;a=new p(a,p.a.Xa,{font:"18px serif",text:d,fillStyle:P.a.Za},4,-15,!0,!1);B(this,a);this.width=this.height=this.b.c.g/1.5;this.La=this.Ka=1;this.a=this.b.c.D(new H(this,1,-1,F.a,this.scale,new t(1.2,1.2)));this.a.active=!0}l(Z,p);g.Object.defineProperties(Z,{m:{configurable:!0,enumerable:!0,get:function(){return 64}},W:{configurable:!0,enumerable:!0,get:function(){return-1}}});function $b(a,b,c){Z.call(this,a,b,c,"S")}
l($b,Z);g.Object.defineProperties($b,{W:{configurable:!0,enumerable:!0,get:function(){return 0}}});function ac(a,b,c){Z.call(this,a,b,c,"H")}l(ac,Z);g.Object.defineProperties(ac,{W:{configurable:!0,enumerable:!0,get:function(){return 1}}});function bc(a,b,c){Z.call(this,a,b,c,"N")}l(bc,Z);g.Object.defineProperties(bc,{W:{configurable:!0,enumerable:!0,get:function(){return 2}}});function cc(a,b,c){Z.call(this,a,b,c,"F")}l(cc,Z);g.Object.defineProperties(cc,{W:{configurable:!0,enumerable:!0,get:function(){return 3}}});
function dc(a,b,c){Z.call(this,a,b,c,"M")}l(dc,Z);g.Object.defineProperties(dc,{W:{configurable:!0,enumerable:!0,get:function(){return 4}}});(new P(17,17,32)).h();
