<!doctype html>
    <head>
        <meta charset="UTF-8">
        <title>Bubble Trap by recursor 2016</title>
        <script type="text/javascript">
var f=this&&this.zd||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)},n=function(){function b(a,c){void 0===a&&(a=0);void 0===c&&(c=0);this.La=!1;this.name="Go";this.z=0;this.oc=!0;this.x=a;this.y=c}Object.defineProperty(b.prototype,"active",{get:function(){return this.oc},set:function(a){this.oc=a;this.La&&this.eb(a)},enumerable:!0,configurable:!0});b.prototype.pa=function(){};b.prototype.Y=
function(){};b.prototype.N=function(){};b.prototype.eb=function(){};return b}(),p=function(){function b(a,c){void 0===a&&(a=0);void 0===c&&(c=0);this.x=a;this.y=c}b.prototype.cc=function(){return new b(this.x,this.y)};b.prototype.gc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.prototype.Xc=function(){return this.x*this.x+this.y*this.y};b.prototype.Cb=function(a){return this.x*a.x+this.y*a.y};b.prototype.Set=function(a,c){this.x=a;this.y=c};b.prototype.Eb=function(a){this.x*=a;this.y*=
a;return this};b.prototype.nb=function(a){this.x-=a.x;this.y-=a.y;return this};b.prototype.Qa=function(){var a=this.gc();if(0==a)return this;this.x/=a;this.y/=a;return this};b.prototype.lc=function(a,c,d){void 0===c&&(c=0);void 0===d&&(d=0);var b=a*Math.PI/180;a=Math.cos(b);var b=Math.sin(b),e=(this.x-c)*b+(this.y-d)*a+d;this.x=(this.x-c)*a-(this.y-d)*b+c;this.y=e};return b}(),aa=function(b){function a(c,d,l,e){void 0===c&&(c=0);void 0===d&&(d=0);void 0===l&&(l=0);void 0===e&&(e=-1);b.call(this,c,
d);this.Aa=a.ra;this.ab=a.$a;this.Ec=this.Dc=1;this.zb=0;this.z=q;this.name="bbl";this.Set(c,d,l,e)}f(a,b);a.prototype.Set=function(a,d,b,e){void 0===e&&(e=-1);this.x=a;this.y=d;this.K=b;this.qa=b/100;this.Aa=0;this.A=-1==e?t(v,w.length):e};a.prototype.bd=function(a){var d=x(this.x,this.y,a.x,a.y);if(d<Math.pow(.9*this.K+.9*a.K,2)){var b=(new p(this.x-a.x,this.y-a.y)).Qa(),d=Math.sqrt(d);b.x*=.9*this.K+.9*a.K-d;b.y*=.9*this.K+.9*a.K-d;return b}return null};a.prototype.cd=function(a){var d=(new p(a.D-
a.B,a.F-a.C)).Qa(),b=a.ec(),e=(new p(this.x-a.B,this.y-a.C)).Cb(d),d=new p(d.x*e,d.y*e);a=0>e?new p(a.B,a.C):e>b?new p(a.D,a.F):new p(a.B+d.x,a.C+d.y);a=new p(this.x-a.x,this.y-a.y);b=a.Xc();return b<this.K*this.K?a.Qa().Eb(this.K-Math.sqrt(b)):null};a.prototype.Nc=function(c){var d=this.bd(c);if(null!==d){this.x+=d.x/2;this.y+=d.y/2;c.x-=d.x/2;c.y-=d.y/2;d=(new p(c.x-this.x,c.y-this.y)).Qa();d.y=-d.y;var b=2*(this.M.Cb(d)-c.M.Cb(d))/(this.qa+c.qa);this.M.Set(this.M.x-b*c.qa*d.x,this.M.y-b*c.qa*d.y);
c.M.Set(c.M.x+b*this.qa*d.x,c.M.y+b*this.qa*d.y);d=this.K>c.K?this.K:c.K;this.Jb(a.ra+2*a.ra*c.K/d,2*a.$a*this.K/d);c.Jb(a.ra+2*a.ra*this.K/d,2*a.$a*c.K/d)}};a.prototype.Jb=function(c,d){this.Aa=c;this.ab=d;this.wd=c-a.ra;this.xd=d-a.$a};a.prototype.Y=function(c){b.prototype.Y.call(this,c);this.y<-this.K?this.e.Gb(this,!1,!1):(this.zb+=2*Math.PI*c*this.Aa,this.Dc=1+this.ab*Math.sin(.8*this.zb),this.Ec=1+.6*this.ab*Math.cos(this.zb),this.Aa>a.ra&&(this.Aa-=this.wd/t(2,3)*c,this.ab-=this.xd/3*c,this.Aa<=
a.ra&&(this.Aa=a.ra,this.ab=a.$a)),0>this.x-this.K?(this.M.x<-a.wc?this.M.x=-this.M.x:this.x=this.K,this.Jb(3*a.ra,2*a.$a)):this.x+this.K>this.e.A.width&&(this.M.x>a.wc?this.M.x=-this.M.x:this.x=this.e.A.width-this.K))};a.prototype.N=function(c){c.save();var d=this.x,b=this.y;c.translate(d,b);c.scale(this.Dc,this.Ec);c.translate(-d,-b);c.globalCompositeOperation="lighter";c.globalAlpha=.8;c.fillStyle=w[this.A];c.beginPath();c.arc(d,b,this.K,0,2*Math.PI);c.fill();c.globalCompositeOperation="source-over";
c.globalAlpha=a.opacity;c.fillStyle=this.e.rc;c.beginPath();c.arc(d,b,.95*this.K,0,2*Math.PI);c.fill();c.restore()};a.ra=1;a.$a=.035;a.wc=2;a.opacity=.5;return a}(function(b){function a(a,d,l){void 0===l&&(l=new p);b.call(this,a,d);this.Ga=new p;this.vb=new p;this.qa=1;this.hb=new p(Number.MAX_VALUE,Number.MAX_VALUE);this.ib=new p(-Number.MAX_VALUE,-Number.MAX_VALUE);this.Xb=new p;this.M=l}f(a,b);a.prototype.Y=function(a){var d=this.M.cc().Qa(),b=this.M.gc();this.Xb.Set(Math.pow(b,2)*y.x,Math.pow(b,
2)*y.y);this.M.x=Math.min(Math.max(this.M.x+(this.Ga.x+z.x+this.vb.x/this.qa-this.Xb.x*d.x)*a,this.ib.x),this.hb.x);this.M.y=Math.min(Math.max(this.M.y+(this.Ga.y+z.y+this.vb.y/this.qa-this.Xb.y*d.y)*a,this.ib.y),this.hb.y);this.vb.Set(0,0);this.x+=this.M.x*a;this.y-=this.M.y*a};a.prototype.Kc=function(a,d){this.vb.Set(a,d)};return a}(n)),C=function(){function b(a){this.A=a.A|0;this.Ra=void 0==a.Ra?.4:a.Ra;this.G=void 0==a.G?[]:a.G;this.la=b.ac(this.G)}b.prototype.N=function(a){if(!(2>this.G.length))if(a.globalAlpha=
this.Ra,a.fillStyle=w[this.A],a.beginPath(),2==this.G.length)a.strokeStyle=w[this.A],a.moveTo(this.G[0].x,this.G[0].y),a.lineTo(this.G[1].x,this.G[1].y),a.stroke();else{a.moveTo(this.G[0].x,this.G[0].y);for(var c=1;c<this.G.length;c++)a.lineTo(this.G[c].x,this.G[c].y);a.lineTo(this.G[0].x,this.G[0].y);a.closePath();a.fill()}};b.prototype.nc=function(){this.la=b.ac(this.G)};b.prototype.Ca=function(a,c){var d=this.G,b,e=d[d.length-1],h=!1;for(b=0;b<d.length;b++){var g=d[b];(g.y<c&&e.y>=c||e.y<c&&g.y>=
c)&&(g.x<=a||e.x<=a)&&(h^=g.x+(c-g.y)/(e.y-g.y)*(e.x-g.x)<a);e=d[b]}return h};b.prototype.Mc=function(a,c,d){return this.Ca(a,c)||this.Ca(a,c+d)||this.Ca(a,c-d)||this.Ca(a+d,c)||this.Ca(a-d,c)};b.ac=function(a){for(var c=new p,d=0;d<a.length;d++)c.x+=a[d].x,c.y+=a[d].y;c.Set(c.x/a.length,c.y/a.length);return c};return b}(),ba=function(){function b(a){this.S=a.S|0;this.p=new C(a.p);this.Va=0;this.Za=!0}Object.defineProperty(b.prototype,"color",{get:function(){return this.p.A},set:function(a){this.p.A=
a},enumerable:!0,configurable:!0});b.prototype.Wc=function(){return this.S<=this.Va&&this.Za};b.prototype.ua=function(){this.Va=0;this.Za=!0};b.prototype.jd=function(a){this.ua();if(0!=a.length)for(var c=0;c<a.length;c++)this.p.Ca(a[c].x,a[c].y)&&(a[c].A==this.p.A?this.Va++:this.Za=!1)};b.prototype.N=function(a){if(null!=this.p.A){a.globalAlpha=1;a.lineWidth=4;this.p.N(a);var c=this.Za?"White":"DimGray";E(a,this.Za&&this.Va>=this.S?"Complete":this.Va<=this.S?this.Va+" of "+this.S:"Full",this.p.la.x,
this.p.la.y,"center","middle",c);this.Za||E(a,"Error!",this.p.la.x,this.p.la.y+20,"center","middle",c)}};return b}(),z=new p,y=new p(.005,0),w="White Gray Yellow Cyan Red Green RoyalBlue Orange".split(" "),v=2,K=[15,25,35],ca=new p(140,90),da=new p(-140,-90),q=1,L=[1,0],ea=[5,8],Q="Arial";
function E(b,a,c,d,l,e,h,g,m){void 0===l&&(l="left");void 0===e&&(e="middle");void 0===h&&(h="White");void 0===g&&(g="20px "+Q);void 0===m&&(m=1);b.globalAlpha=m;b.font="900 "+g;b.fillStyle=h;b.textAlign=l;b.textBaseline=e;b.fillText(a,c,d)}function t(b,a){void 0===b&&(b=0);void 0===a&&(a=1);return Math.floor(Math.random()*(a-b)+b)}function x(b,a,c,d){return(b-c)*(b-c)+(a-d)*(a-d)}function R(b,a){if(null==b||null==a)return null;for(var c=[],d=0;d<b.length;d++){var l=a(b[d]);c.push(l)}return c}
function na(b,a,c){var d=8;void 0===d&&(d=-1);var l=x(b,a,c.B,c.C),e=x(b,a,c.D,c.F);b=x(b,a,(c.B+c.D)/2,(c.C+c.F)/2);if(-1==d)return l<e?1:2;if(b<l&&b<e){if(b<=d*d)return 3}else if(l<e){if(l<=d*d)return 1}else if(e<=d*d)return 2;return-1}function oa(b,a,c,d,l){b=(new p(b-c,a-d)).Qa().Eb(l);b.x+=c;b.y+=d;return b}
var W=[{t:"Plug the Hole",O:[{B:899,C:519,D:610,F:462},{B:1,C:518,D:273,F:463},{B:384,C:595,D:351,F:460},{B:502,C:597,D:535,F:460},{B:535,C:460,D:351,F:460},{B:610,C:462,D:565,F:268},{B:565,C:268,D:617,F:109},{B:617,C:109,D:234,F:110},{B:234,C:110,D:299,F:271},{B:299,C:271,D:273,F:463},{B:366,C:522,D:317,F:535}],Z:[{S:5,p:{A:4,G:[{x:235,y:112},{x:614,y:110},{x:564,y:269},{x:299,y:271}]}}],ca:[{x:41,y:563,A:2,W:70,R:1,X:5,L:75},{x:860,y:563,A:4,W:70,R:1,X:5,L:285}]},{t:"Make it Crowded",O:[{B:444,
C:307,D:508,F:441},{B:508,C:441,D:383,F:441},{B:444,C:307,D:383,F:441},{B:492,C:408,D:608,F:236},{B:398,C:410,D:288,F:241},{B:310,C:153,D:591,F:153},{B:591,C:153,D:608,F:236},{B:288,C:241,D:310,F:153}],Z:[{S:3,p:{A:6,Ra:.4,G:[{x:311,y:153},{x:589,y:155},{x:607,y:235},{x:492,y:405},{x:443,y:307},{x:398,y:407},{x:289,y:239}]}}],ka:[{x:441,y:412,r:15,A:6},{x:431,y:385,r:15,A:6},{x:457,y:384,r:15,A:6},{x:471,y:415,r:15,A:6},{x:445,y:360,r:15,A:6},{x:419,y:411,r:15,A:6}]},{t:"Dashed Lines Discriminate",
O:[{B:715,C:465,D:559,F:325},{B:208,C:477,D:356,F:332},{B:356,C:332,D:357,F:296},{B:357,C:296,D:282,F:296},{B:282,C:296,D:258,F:181},{B:559,C:325,D:558,F:290},{B:558,C:290,D:640,F:290},{B:640,C:290,D:651,F:175},{B:258,C:181,D:651,F:175,J:!0,A:7,wa:!0}],Z:[{S:6,p:{A:7,G:[{x:259,y:180},{x:650,y:175},{x:638,y:288},{x:283,y:294}]},x:0,y:0}],ca:[{x:405,y:557,A:4,R:.5,X:5,W:45},{x:501,y:557,A:7,R:.5,X:6,W:45}]},{t:"Popping Pins",ha:[{x:539,y:372,J:!0},{x:501,y:373,J:!0},{x:459,y:374,A:3,J:!0},{x:417,y:374,
A:3,J:!0},{x:383,y:375,J:!0},{x:349,y:376,J:!0}],O:[{B:651,C:530,D:568,F:376},{B:265,C:527,D:340,F:390},{B:265,C:527,D:333,F:597},{B:651,C:530,D:590,F:596},{B:568,C:376,D:597,F:173},{B:340,C:390,D:325,F:178},{B:597,C:173,D:895,F:4},{B:895,C:4,D:1,F:2},{B:1,C:2,D:325,F:178},{B:336,C:3,D:413,F:155},{B:499,C:151,D:584,F:3}],Z:[{S:4,p:{A:4,G:[{x:411,y:153},{x:324,y:176},{x:7,y:2},{x:337,y:5}]}},{S:4,p:{A:7,G:[{x:339,y:3},{x:581,y:4},{x:498,y:149},{x:412,y:151}]}},{S:4,p:{A:6,G:[{x:893,y:4},{x:597,y:173},
{x:500,y:149},{x:584,y:6}]}}],ca:[{x:411,y:563,A:7,W:70,R:1},{x:506,y:563,A:3,W:70,R:1},{x:609,y:521,A:6,W:70,R:1,L:-45},{x:309,y:521,A:4,W:70,R:1,L:45}]},{t:"Pushy",O:[{B:604,C:3,D:604,F:278},{B:333,C:0,D:333,F:278},{B:333,C:278,D:213,F:262},{B:213,C:262,D:162,F:227},{B:604,C:278,D:754,F:267},{B:754,C:267,D:808,F:227},{B:604,C:3,D:898,F:3},{B:898,C:3,D:898,F:155},{B:333,C:0,D:3,F:0},{B:3,C:0,D:3,F:111}],Z:[{S:5,p:{A:2,G:[{x:604,y:277},{x:753,y:267},{x:898,y:156},{x:898,y:3},{x:604,y:3}]}},{S:5,p:{A:5,
G:[{x:333,y:277},{x:213,y:261},{x:0,y:111},{x:1,y:0},{x:333,y:1}]}}],T:[{ea:40,L:-90,x:626,y:331,J:!0,fa:300},{ea:40,L:90,x:324,y:415,J:!0,fa:300}],ca:[{x:407,y:561,A:5,W:70,R:.5,X:5},{x:515,y:562,A:2,W:70,R:.75,X:5}]},{t:"Traffic Jam",O:[{B:0,C:595,D:898,F:595},{B:764,C:0,D:551,F:205},{B:901,C:174,D:615,F:274},{B:140,C:0,D:355,F:209},{B:0,C:127,D:283,F:281},{B:900,C:495,D:615,F:274},{B:780,C:596,D:551,F:318},{B:0,C:462,D:283,F:281},{B:358,C:324,D:132,F:594},{B:447,C:0,D:447,F:213},{B:900,C:1,D:0,
F:0},{B:448,C:310,D:448,F:596}],Z:[{S:8,p:{A:4,G:[{x:143,y:2},{x:445,y:4},{x:447,y:206},{x:353,y:207}]}},{S:8,p:{A:5,G:[{x:447,y:3},{x:761,y:2},{x:551,y:203},{x:447,y:205}]}},{S:8,p:{A:6,G:[{x:134,y:591},{x:445,y:593},{x:445,y:327},{x:356,y:325}]}},{S:8,p:{A:2,G:[{x:775,y:592},{x:448,y:593},{x:446,y:329},{x:552,y:320}]}}],T:[{ea:50,L:-120,x:717,y:165,J:!0,A:6,fa:200},{ea:50,L:-405,x:691,y:406,J:!0,A:4,fa:200},{ea:50,L:-315,x:248,y:366,J:!0,A:5,fa:200},{ea:50,L:-585,x:210,y:148,J:!0,A:2,fa:200}],ca:[{x:858,
y:47,A:2,W:130,R:.5,X:8,L:225},{x:855,y:556,A:5,W:70,R:.25,X:8,L:315},{x:48,y:555,A:4,W:70,R:.25,X:8,L:405},{x:45,y:47,A:6,W:130,R:.5,X:8,L:495}]},{t:"Factorio",ha:[{x:253,y:262,J:!0},{x:259,y:298,J:!0},{x:239,y:231,A:6,J:!0},{x:264,y:343,A:7,J:!0}],O:[{B:1,C:521,D:248,F:499},{B:248,C:499,D:220,F:436},{B:220,C:436,D:255,F:370},{B:255,C:370,D:414,F:360},{B:414,C:360,D:435,F:416},{B:435,C:416,D:404,F:488},{B:248,C:499,D:404,F:488,J:!0,A:3,wa:!0},{B:414,C:360,D:603,F:349},{B:603,C:349,D:633,F:402},{B:633,
C:402,D:588,F:480},{B:25,C:432,D:209,F:424,J:!0,A:7,wa:!0},{B:588,C:480,D:777,F:457,J:!0,A:4},{B:777,C:457,D:752,F:387},{B:752,C:387,D:765,F:330},{B:765,C:330,D:899,F:298},{B:771,C:235,D:748,F:4},{B:172,C:233,D:1,F:254},{B:262,C:223,D:312,F:138},{B:312,C:50,D:262,F:3},{B:535,C:3,D:521,F:230},{B:899,C:4,D:262,F:3},{B:603,C:349,D:694,F:233,J:!0,A:2},{B:262,C:223,D:521,F:230},{B:521,C:230,D:694,F:233,A:4,wa:!0},{B:771,C:235,D:694,F:233},{B:603,C:349,D:521,F:230,A:6,J:!0}],Z:[{S:4,p:{A:2,G:[{x:256,y:370},
{x:412,y:362},{x:434,y:415},{x:404,y:486},{x:247,y:497},{x:221,y:437}]}},{S:4,p:{A:6,G:[{x:416,y:362},{x:603,y:350},{x:629,y:403},{x:586,y:481},{x:407,y:485},{x:435,y:416}]}},{S:4,p:{A:3,G:[{x:897,y:299},{x:766,y:332},{x:753,y:388},{x:776,y:456},{x:898,y:454}]}},{S:7,p:{A:7,G:[{x:749,y:5},{x:897,y:5},{x:898,y:235},{x:771,y:235}]}},{S:5,p:{A:5,G:[{x:259,y:3},{x:532,y:4},{x:519,y:229},{x:264,y:222},{x:311,y:138},{x:312,y:50}]}},{S:7,p:{A:4,G:[{x:535,y:5},{x:748,y:4},{x:769,y:234},{x:522,y:227}]}}],
T:[{ea:5,L:90,x:234,y:556,J:!0,fa:380},{ea:50,L:30,x:160,y:331,J:!0,A:5,fa:205},{ea:10,L:-90,x:756,y:265,J:!0,A:6,fa:395},{ea:40,x:693,y:578,fa:240,J:!0}],ca:[{x:38,y:563,W:90,R:1,L:90}]}],pa=function(){function b(a){this.aa=new C({});this.ea=1;this.L=0;this.Ha=b.Ub;this.x=a.x|0;this.y=a.y|0;this.J=void 0==a.J?!1:a.J;this.A=void 0==a.A?0:a.A;this.L=void 0==a.L?0:a.L;this.ea=void 0==a.ea?10:a.ea;this.fa=void 0==a.fa?140:a.fa;this.sb=new p(0,1);this.aa=new C({G:[new p,new p,new p,new p],Ra:.2,A:this.A});
this.Oa(this.L)}b.prototype.jc=function(){this.Oa(this.L)};b.prototype.Oa=function(a){this.L=a=Math.round(a);var c=this.x-b.width/2,d=this.y-b.height/2;this.sb.Set(Math.sin(a*Math.PI/180),Math.cos(a*Math.PI/180));this.ja=this.sb.cc();this.ja.y=-this.ja.y;this.ja.Eb(60);this.ja.Set(this.ja.x+this.x,this.ja.y+this.y);this.aa.G[0].Set(c,d);this.aa.G[1].Set(c+b.width,d);this.aa.G[2].Set(c+b.width,d-this.fa);this.aa.G[3].Set(c,d-this.fa);for(a=0;a<this.aa.G.length;a++)this.aa.G[a].lc(this.L,this.x,this.y),
this.aa.G[a].x=Math.floor(this.aa.G[a].x),this.aa.G[a].y=Math.floor(this.aa.G[a].y);this.aa.nc()};b.prototype.Lc=function(a){for(var c=0;c<a.length;c++)(this.A==a[c].A||this.A<v)&&this.aa.Mc(a[c].x,a[c].y,a[c].K)&&a[c].Kc(this.sb.x*this.ea,this.sb.y*this.ea)};b.prototype.Y=function(a){this.Ha+=b.od*a;this.Ha>=b.width-b.Ub&&(this.Ha=b.Ub)};b.prototype.ta=function(a,c){a.globalAlpha=1;1!=c&&(this.aa.A=this.A,this.aa.N(a));a.globalAlpha=.4;a.fillStyle=w[this.A];a.beginPath();a.arc(this.ja.x,this.ja.y,
8,0,2*Math.PI);a.fill();a.strokeStyle="rgba(128, 128, 128, 0.4)";a.moveTo(this.ja.x,this.ja.y);a.lineTo(this.x,this.y);a.stroke();this.J&&(a.beginPath(),a.rect(this.x-16,this.y-16,32,32),a.fill());0==c&&E(a,"L:"+this.fa+"\nF:"+this.ea,this.aa.la.x,this.aa.la.y,"center")};b.prototype.N=function(a){var c=this.x-b.width/2,d=this.y-b.height/2;a.save();a.translate(this.x,this.y);a.rotate(this.L*Math.PI/180);a.translate(-this.x,-this.y);a.globalAlpha=.7;a.fillStyle=w[this.A];a.fillRect(c,d,b.width,b.height);
a.globalAlpha=1;a.lineCap="butt";a.strokeStyle="#4F4F4F";a.beginPath();a.moveTo(c+b.width/2,d+b.height/2);a.lineTo(c+b.width/2,d+b.height);a.stroke();a.strokeStyle=w[this.A];a.lineCap="round";a.setLineDash(L);a.lineWidth=3;a.beginPath();a.moveTo(c,d);a.lineTo(c+b.width,d);a.stroke();a.beginPath();a.fillStyle="#dFdFdF";a.rect(c+this.Ha,d+b.height/2-b.rb/2,b.width/2-this.Ha,b.rb);a.fill();a.beginPath();a.fillStyle="#5F5F5F";a.rect(c+b.width/2,d+b.height/2-b.rb/2,b.width/2-this.Ha,b.rb);a.fill();a.restore()};
b.width=60;b.height=15;b.od=10*b.width;b.Ub=Math.floor(.05*b.width);b.rb=Math.floor(.5*b.height);return b}(),qa=function(b){function a(a){b.call(this);this.Qb=new p;this.x=a.x|0;this.y=a.y|0;this.A=a.A|0;this.z=3;this.R=void 0==a.R||0==a.R?1:a.R;this.Ia=this.X=void 0==a.X?-1:a.X;this.W=void 0==a.W?5:a.W;this.L=void 0==a.L?0:a.L;this.$=1/this.R;this.p=new C({G:[new p,new p,new p,new p],Ra:1,A:0==this.A?1:this.A});this.Oa(this.L)}f(a,b);a.prototype.toJSON=function(){return{x:this.x,y:this.y,A:this.A,
W:this.W,R:this.R,X:-1==this.X?void 0:this.X,L:this.L}};a.prototype.jc=function(){this.Oa(this.L)};a.prototype.ua=function(){this.Ia=this.X;this.$=1/this.R};a.prototype.Oa=function(c){this.L=c=Math.round(c);this.Qb.Set(Math.sin(c*Math.PI/180),Math.cos(c*Math.PI/180));c=this.x-a.Wb/2;var d=this.y+a.ub/2;this.p.G[0].Set(c,d);this.p.G[1].Set(c+a.Wb,d);this.p.G[2].Set(c+a.Fc,d-a.ub);this.p.G[3].Set(c-(a.Fc-a.Wb),d-a.ub);for(c=0;c<this.p.G.length;c++)this.p.G[c].lc(this.L,this.x,this.y),this.p.G[c].x=
Math.floor(this.p.G[c].x),this.p.G[c].y=Math.floor(this.p.G[c].y);this.p.nc()};a.prototype.Y=function(a){if(!this.e.U.active&&0<this.$&&(this.$-=a,0>=this.$)){0<this.Ia&&this.Ia--;if(0<this.Ia||-1==this.Ia)this.$=1/this.R;a=0==this.A?this.e.cb(this.x,this.y,K[t(0,K.length)]):this.e.cb(this.x,this.y,K[t(0,K.length)],this.A);null!=a&&(a.M.Set(this.Qb.x*this.W,this.Qb.y*this.W),X.Play("bubble"+t(0,3)))}};a.prototype.ta=function(c,d){0==d&&E(c,"r:"+this.R+" s:"+this.W,this.x,this.y+a.ub/2,"center","top")};
a.prototype.N=function(a,d){void 0===d&&(d=1);this.p.N(a);a.setLineDash(L);a.strokeStyle="DarkGray";a.lineWidth=3;a.beginPath();a.moveTo(this.p.G[0].x,this.p.G[0].y);for(var b=1;b<this.p.G.length;b++)a.lineTo(this.p.G[b].x,this.p.G[b].y);a.lineTo(this.p.G[0].x,this.p.G[0].y);a.stroke();-1!=this.Ia&&0!=d?E(a,this.Ia.toString(),this.p.la.x,this.p.la.y,"center","middle",3>this.p.A?"Black":"White"):-1!=this.X&&0==d&&E(a,this.X.toString(),this.p.la.x,this.p.la.y,"center","middle",3>this.p.A?"Black":"White")};
a.ub=70;a.Fc=70;a.Wb=50;return a}(n),ra=function(){function b(a){this.x=a.x|0;this.y=a.y|0;this.A=a.A|0;this.J=void 0==a.J?!1:a.J}b.prototype.Oc=function(a){return(0==this.A||this.A==a.A)&&x(this.x,this.y,a.x,a.y)<=a.K*a.K+144?!0:!1};b.prototype.ta=function(a,c){this.J&&1!=c&&(a.globalAlpha=.3,a.fillStyle=w[this.A],a.beginPath(),a.arc(this.x,this.y,12,0,2*Math.PI),a.fill())};b.prototype.N=function(a){a.globalAlpha=1;a.lineWidth=3;a.setLineDash(L);a.beginPath();a.strokeStyle=w[this.A];a.moveTo(this.x-
6,this.y);a.lineTo(this.x+6,this.y);a.moveTo(this.x,this.y-6);a.lineTo(this.x,this.y+6);a.stroke()};return b}(),sa=function(){function b(a){this.B=a.B|0;this.C=a.C|0;this.D=a.D|0;this.F=a.F|0;this.J=void 0==a.J?!1:a.J;this.A=a.A|0;this.wa=void 0==a.wa?!1:a.wa}b.prototype.ta=function(a){var c=(this.B+this.D)/2,d=(this.C+this.F)/2;a.globalAlpha=.5;a.fillStyle=w[this.A];a.beginPath();a.arc(this.B,this.C,8,0,2*Math.PI);a.arc(this.D,this.F,8,0,2*Math.PI);this.J&&(a.fill(),a.beginPath(),a.rect(c-8,d-8,
16,16));a.fill()};b.prototype.ec=function(){return Math.sqrt(x(this.B,this.C,this.D,this.F))};b.prototype.N=function(a){a.globalAlpha=1;a.lineWidth=3;a.lineCap="butt";this.wa?a.setLineDash(ea):a.setLineDash(L);a.beginPath();a.strokeStyle=w[this.A];a.moveTo(this.B,this.C);a.lineTo(this.D,this.F);a.stroke()};return b}(),ta=function(){function b(a){this.t=a.t;this.ha=void 0==a.ha?[]:R(a.ha,function(a){return new ra(a)});this.O=void 0==a.O?[]:R(a.O,function(a){return new sa(a)});this.Z=void 0==a.Z?[]:
R(a.Z,function(a){return new ba(a)});this.T=void 0==a.T?[]:R(a.T,function(a){return new pa(a)});this.ca=void 0==a.ca?[]:R(a.ca,function(a){return new qa(a)});this.ka=void 0==a.ka?[]:a.ka}b.prototype.Hb=function(a){for(var c=0;c<this.ca.length;c++)a.sa(this.ca[c]);for(c=0;c<this.ka.length;c++)a.cb(this.ka[c].x,this.ka[c].y,this.ka[c].r,this.ka[c].A)};b.prototype.ua=function(){for(var a=0;a<this.ca.length;a++)this.ca[a].ua();for(a=0;a<this.Z.length;a++)this.Z[a].ua()};b.prototype.kb=function(a){if(a)for(var c=
0;c<this.ca.length;c++)a.kc(this.ca[c])};b.prototype.Y=function(a){for(var c=0;c<this.T.length;c++)this.T[c].Y(a)};b.prototype.Vc=function(a){for(var c=0;c<this.T.length;c++)this.T[c].Lc(a)};b.prototype.Jc=function(){return 0<this.Z.length};b.prototype.Ic=function(){for(var a=0;a<this.Z.length;a++)if(!this.Z[a].Wc())return!1;return!0};b.prototype.N=function(a,c){for(var d=0;d<this.O.length;d++)this.O[d].N(a),2==c&&this.O[d].J&&this.O[d].ta(a);for(d=0;d<this.Z.length;d++)this.Z[d].N(a);for(d=0;d<this.ha.length;d++)this.ha[d].ta(a,
c),this.ha[d].N(a);for(d=0;d<this.T.length;d++)this.T[d].N(a),(2==c&&this.T[d].J||0==c)&&this.T[d].ta(a,c);if(1!=c){for(d=0;d<this.ka.length;d++){var b=this.ka[d];a.globalCompositeOperation="lighter";a.globalAlpha=.8;a.fillStyle=w[this.ka[d].A];a.beginPath();a.arc(b.x,b.y,b.r,0,2*Math.PI);a.fill();a.globalCompositeOperation="source-over";a.globalAlpha=aa.opacity;a.fillStyle="black";a.beginPath();a.arc(b.x,b.y,.95*b.r,0,2*Math.PI);a.fill()}for(d=0;d<this.ca.length;d++)this.ca[d].N(a,c),this.ca[d].ta(a,
c)}};return b}();function ua(b){for(var a=0;24>a;a++)this[String.fromCharCode(97+a)]=b[a]||0;.01>this.c&&(this.c=.01);b=this.b+this.c+this.e;.18>b&&(b=.18/b,this.b*=b,this.c*=b,this.e*=b)}
var va=function(){function b(){}b.Pc=function(a){var c=new b;c.Ob=a;var d=c.ua();a=new Uint8Array(4*((d+1)/2|0)+44);var d=2*c.gd(new Uint16Array(a.buffer,44),d),l=new Uint32Array(a.buffer,0,44);c.Uc(l,d);return a.buffer};b.prototype.Uc=function(a,c){a[0]=1179011410;a[1]=c+36;a[2]=1163280727;a[3]=544501094;a[4]=16;a[5]=65537;a[6]=44100;a[7]=88200;a[8]=1048578;a[9]=1635017060;a[10]=c};b.prototype.ic=function(){var a=this.Ob;this.Ea=100/(a.f*a.f+.001);this.pc=100/(a.g*a.g+.001);this.Pb=1-a.h*a.h*a.h*
.01;this.md=-a.i*a.i*a.i*1E-6;a.a||(this.Fa=.5-a.n/2,this.nd=5E-5*-a.o);this.kd=1+a.l*a.l*(0<a.l?-.9:10);this.ld=0;this.Kb=1==a.m?0:(1-a.m)*(1-a.m)*2E4+32};b.prototype.ua=function(){this.ic();var a=this.Ob;this.Lb=a.b*a.b*1E5;this.Mb=a.c*a.c*1E5;this.Nb=a.e*a.e*1E5+12;return 3*((this.Lb+this.Mb+this.Nb)/3|0)};b.prototype.gd=function(a,c){var d=this.Ob,b=1!=d.s||d.v,e=d.v*d.v*.1,h=1+3E-4*d.w,g=d.s*d.s*d.s*.1,m=1+1E-4*d.t,M=1!=d.s,N=d.x*d.x,wa=d.g,fa=d.q||d.r,xa=d.r*d.r*d.r*.2,ga=d.q*d.q*(0>d.q?-1020:
1020),ha=d.p?((1-d.p)*(1-d.p)*2E4|0)+32:0,ya=d.d,ia=d.j/2,za=d.k*d.k*.01,S=d.a,T=this.Lb,Aa=1/this.Lb,Ba=1/this.Mb,Ca=1/this.Nb,d=5/(1+d.u*d.u*20)*(.01+g);.8<d&&(d=.8);for(var d=1-d,U=!1,ja=0,F=0,G=0,ka=0,O=0,H,I=0,r,A=0,B,V=0,k,la=0,D,ma=0,P=Array(1024),J=Array(32),u=P.length;u--;)P[u]=0;for(u=J.length;u--;)J[u]=2*Math.random()-1;for(u=0;u<c;u++){if(U)return u;ha&&++la>=ha&&(la=0,this.ic());this.Kb&&++this.ld>=this.Kb&&(this.Kb=0,this.Ea*=this.kd);this.Pb+=this.md;this.Ea*=this.Pb;this.Ea>this.pc&&
(this.Ea=this.pc,0<wa&&(U=!0));r=this.Ea;0<ia&&(ma+=za,r*=1+Math.sin(ma)*ia);r|=0;8>r&&(r=8);S||(this.Fa+=this.nd,0>this.Fa?this.Fa=0:.5<this.Fa&&(this.Fa=.5));if(++F>T)switch(F=0,++ja){case 1:T=this.Mb;break;case 2:T=this.Nb}switch(ja){case 0:G=F*Aa;break;case 1:G=1+2*(1-F*Ba)*ya;break;case 2:G=1-F*Ca;break;case 3:G=0,U=!0}fa&&(ga+=xa,B=ga|0,0>B?B=-B:1023<B&&(B=1023));b&&h&&(e*=h,1E-5>e?e=1E-5:.1<e&&(e=.1));D=0;for(var Da=8;Da--;){A++;if(A>=r&&(A%=r,3==S))for(H=J.length;H--;)J[H]=2*Math.random()-
1;switch(S){case 0:k=A/r<this.Fa?.5:-.5;break;case 1:k=1-A/r*2;break;case 2:k=A/r;k=6.28318531*(.5<k?k-1:k);k=1.27323954*k+.405284735*k*k*(0>k?1:-1);k=.225*((0>k?-1:1)*k*k-k)+k;break;case 3:k=J[Math.abs(32*A/r|0)]}b&&(H=I,g*=m,0>g?g=0:.1<g&&(g=.1),M?(O+=(k-I)*g,O*=d):(I=k,O=0),I+=O,ka+=I-H,k=ka*=1-e);fa&&(P[V%1024]=k,k+=P[(V-B+1024)%1024],V++);D+=k}D*=.125*G*N;a[u]=1<=D?32767:-1>=D?-32768:32767*D|0}return c};return b}(),X=function(){function b(){}b.Db=function(){b.pb=new AudioContext;b.Rb={};for(var a in b.Bc){var c=
va.Pc(new ua(b.Bc[a]));b.Rc(a,c)}};b.Rc=function(a,c){var d=this;this.index++;this.pb.decodeAudioData(c,function(c){d.Rb[a]=c;d.index--;0==d.index&&d.fc&&d.fc()},function(){console.log("ERROR!")})};b.Play=function(a,c){void 0===c&&(c=0);if(b.Rb[a]){var d=b.pb.createBufferSource();d.buffer=b.Rb[a];d.connect(b.pb.destination);c=b.pb.currentTime+(c||0);d.start(c);return d}};b.Bc={buttonDown:[2,.04,.21,.0787,.0583,.34,.0056,.1399,-.0162,.0614,,-.3787,.0883,.3414,.0899,.0111,.1224,-.7053,.9075,.1738,-.729,
.6085,.1811,.4],buttonUp:[2,.04,.21,.0787,.0583,.42,.0056,-.04,.34,.0614,,-.06,.0883,.3414,.0899,.0111,-.48,-.7053,.9075,.1738,-.729,.6085,.1811,.4],bubble0:[2,.14,.09,,.1699,.2,,.32,-.12,,.0343,-.0485,.1916,.3523,-.0239,,-1,-.76,1,-.0317,,.1172,-.2115,.3],bubble1:[2,.14,.09,,.1699,.09,,.32,-.12,,.0343,-.0485,.1916,.3523,-.0239,,-1,-.76,1,-.0317,,.1172,-.2115,.3],bubble2:[2,.14,.09,,.1699,.17,,.32,-.12,,.0343,-.0485,.1916,.3523,-.0239,,-1,-.76,1,-.0317,,.1172,-.2115,.3],lowPop:[2,,.01,.0023,.1699,
.2,.034,.2459,-.0171,,.0343,-.0485,.1916,.3523,-.0239,,-.1688,.0518,1,-.0317,,.1172,-.2115,.5],midPop:[2,,.01,.0023,.1699,.35,.034,.2459,-.0171,,.0343,-.0485,.1916,.3523,-.0239,,-.1688,.0518,1,-.0317,,.1172,-.2115,.5],highPop:[2,,.01,.0023,.1699,.5,.034,.2459,-.0171,,.0343,-.0485,.1916,.3523,-.0239,,-.1688,.0518,1,-.0317,,.1172,-.2115,.4],blowUp:[3,.4221,.01,,.85,.2394,,,,-.9113,-.2781,-1,-.5043,,.1074,.0389,4E-4,-.3199,.9776,.0118,,.7449,.1003,.3]};b.index=0;return b}(),Ea=function(b){function a(){b.call(this);
this.da=[];for(var c=0;c<a.Zb;c++)this.da[c]={x:0,y:0,Gc:0,Ab:0}}f(a,b);a.prototype.Set=function(c,d,b,e,h){this.x=c;this.y=d;this.$=this.Yb=b;this.K=e;this.A=h;b=0;h=2*Math.PI/a.Zb;e*=.1;for(var g=0;g<a.Zb;g++){var m=t(a.ib,a.hb),M=Math.cos(b),N=Math.sin(b);this.da[g].x=c+e*M;this.da[g].y=d+e*N;this.da[g].Gc=M*m;this.da[g].Ab=N*m;b+=h}};a.prototype.Y=function(a){if(0<this.$&&(this.$-=a,0>=this.$)){this.e.zc.Fb(this);return}for(var d=0;d<this.da.length;d++)this.da[d].Ab+=256*a,this.da[d].x+=this.da[d].Gc*
a,this.da[d].y+=this.da[d].Ab*a};a.prototype.N=function(a){a.fillStyle=w[this.A];var d=(this.$-this.Yb/2)/(this.Yb/2);0<d&&(a.globalAlpha=.3,a.beginPath(),a.arc(this.x,this.y,d*this.K*.9,0,2*Math.PI),a.fill());a.globalAlpha=this.$/this.Yb;for(d=0;d<this.da.length;d++)a.beginPath(),a.arc(this.da[d].x,this.da[d].y,2,0,2*Math.PI),a.fill()};a.ib=30;a.hb=120;a.Zb=50;return a}(n),Z=function(b){function a(c,d,l,e,h,g){void 0===g&&(g=!0);b.call(this,c,d);this.r=10;this.qb=this.Ya=!1;this.z=10;this.width=
l;this.height=e;this.text=h;this.Tb=a.color;this.Cc=g}f(a,b);a.prototype.Y=function(){var c=this.e.V.x,d=this.e.V.y,b=this.x,e=this.y;c>=b&&c<=b+this.width&&d>=e&&d<=e+this.height?(this.Ya||(this.Ya=!0,Y.Ka++),this.e.V.va[0]?(this.qb=!0,this.Cc&&X.Play("buttonDown")):this.e.V.Sa[0]&&this.qb&&(this.qb=!1,this.Cc&&X.Play("buttonUp"),this.fb&&this.fb(this)),this.Tb=this.e.V.ya[0]?a.vd:a.ud):(this.qb=!1,this.Tb=a.color,this.Ya&&(this.Ya=!1,Y.Ka--))};a.prototype.eb=function(a){!a&&this.Ya&&(this.Ya=!1,
Y.Ka--)};a.prototype.N=function(c){c.globalAlpha=1;c.lineWidth=a.rd;c.fillStyle=this.Tb;c.setLineDash([1,0]);c.strokeStyle="Gainsboro";c.beginPath();0==this.r?(c.lineWidth=1,c.rect(this.x,this.y,this.width,this.height)):(c.moveTo(this.x+this.r,this.y),c.lineTo(this.x+this.width-this.r,this.y),c.quadraticCurveTo(this.x+this.width,this.y,this.x+this.width,this.y+this.r),c.lineTo(this.x+this.width,this.y+this.height-this.r),c.quadraticCurveTo(this.x+this.width,this.y+this.height,this.x+this.width-this.r,
this.y+this.height),c.lineTo(this.x+this.r,this.y+this.height),c.quadraticCurveTo(this.x,this.y+this.height,this.x,this.y+this.height-this.r),c.lineTo(this.x,this.y+this.r),c.quadraticCurveTo(this.x,this.y,this.x+this.r,this.y));c.fill();c.stroke();E(c,this.text,this.x+this.width/2,this.y+this.height/2,"center","middle",a.yd,a.font)};a.font="20px "+Q;a.rd=3;a.color="DimGray";a.ud="Gray";a.vd="LightGray";a.yd="White";a.Bd=parseInt(a.font);return a}(n),Fa=function(b){function a(a){var d=this;b.call(this);
this.uc="center";this.Hc=0;this.Zc=function(a){d.oa=a.text;d.active=!1};this.z=999;this.x=a.x|0;this.y=a.y|0;this.A=void 0==a.A?"rgba(0, 32, 64, 0.9)":a.A;this.height=150;this.width=void 0==a.width?100:a.width;this.oa=null;this.buttons=[]}f(a,b);a.prototype.pa=function(){this.active=!1};a.prototype.Pa=function(a){this.oa=null;this.active=a};a.prototype.Set=function(c,d,b,e,h){void 0===b&&(b=[]);void 0===e&&(e="center");void 0===h&&(h=this.e.A.width/2);this.uc=e;this.Hc=h;this.height=0==b.length?110:
110+35*b.length;this.y=this.e.A.height/2-this.height/2;e=a.Sb+20;h=this.width/2-a.Sb/2-(d.length-1)/2*e;var g=this.y+this.height-a.qc-10;this.title=c;this.xc=b;this.buttons=[];for(c=0;c<d.length;c++)b=new Z(h,g,a.Sb,a.qc,d[c]),h+=e,b.fb=this.Zc,b.e=this.e,this.buttons.push(b),this.e.sa(b)};a.prototype.eb=function(a){if(!a){for(a=0;a<this.buttons.length;a++)this.buttons[a].active=!1,this.e.kc(this.buttons[a]);this.buttons=[]}};a.prototype.Y=function(a){for(var d=0;d<this.buttons.length;d++)this.buttons[d].Y(a)};
a.prototype.N=function(a){a.globalAlpha=1;a.fillStyle=this.A;a.fillRect(this.x,this.y,this.width,this.height);a.lineWidth=2;a.strokeStyle="White";a.beginPath();a.moveTo(this.x,this.y);a.lineTo(this.x+this.width,this.y);a.moveTo(this.x,this.y+this.height);a.lineTo(this.x+this.width,this.y+this.height);a.stroke();E(a,this.title,this.x+this.width/2,this.y+this.height/8+5,"center","middle","Yellow","24px "+Q);for(var d=0;d<this.xc.length;d++)E(a,this.xc[d],this.x+this.Hc,this.y+this.height/6+24+5+25*
d,this.uc,"middle");for(d=0;d<this.buttons.length;d++)this.buttons[d].N(a)};a.Sb=180;a.qc=50;return a}(n),Ia=function(){function b(a,c){var d=this;void 0===c&&(c="#000000");this.jb={};this.sort=this.Ja=!1;this.tb=this.timeStamp=0;this.hc=function(a){d.tb=(a-d.timeStamp)/1E3;.1<d.tb&&(d.tb=.06);d.Y(d.tb);d.N(d.tc);d.timeStamp=a;window.requestAnimationFrame(d.hc)};this.tc=a.getContext("2d");this.tc.Ad=!1;this.A=a;this.rc=c;this.P=[];this.Vb=new Ga(150,150,!0);this.zc=new Ga(5);this.bubbles=[];this.xb=
new Ha;this.V=new Y(this);this.U=new Fa({width:a.width})}b.prototype.ed=function(){if(!this.Ac){this.Ac=!0;this.V.pa();this.xb.pa();this.sa(this.U);for(var a=0;a<this.P.length;a++)this.P[a].active&&!this.P[a].La&&(this.P[a].pa(),this.P[a].La=!0);window.requestAnimationFrame(this.hc)}};b.prototype.sa=function(a){-1<this.P.indexOf(a)||(a.e=this,this.P.push(a),this.sort=!0,this.Ac&&a.active&&!a.La&&(a.pa(),a.La=!0))};b.prototype.kc=function(a){a=this.P.indexOf(a);-1<a&&this.P.splice(a,1)};b.prototype.Sc=
function(){for(var a=0;a<this.P.length;a++)if("IGE"==this.P[a].name)return this.P[a];return null};b.prototype.Y=function(a){for(var c=0;c<this.P.length;c++)this.P[c].active&&(this.P[c].La||(this.P[c].La=!0,this.P[c].pa()),this.P[c].Y(a));if(!this.Ja)for(c=0;c<this.bubbles.length;c++)this.bubbles[c].active&&this.bubbles[c].Y(a);this.xb.Bb();this.V.Bb();this.sort&&(this.sort=!this.sort,this.P.sort(function(a,c){return a.z-c.z}))};b.prototype.N=function(a){var c=!1;a.globalAlpha=1;a.fillStyle=this.rc;
a.fillRect(0,0,this.A.width,this.A.height);for(var d=0;d<this.P.length;d++){if(!c&&(this.P[d].z>=q||d==this.P.length-1))for(var c=!0,b=0;b<this.bubbles.length;b++)this.bubbles[b].active&&this.bubbles[b].N(a);this.P[d].active&&this.P[d].N(a)}};b.prototype.Gb=function(a,c,d){var b=this;void 0===c&&(c=!0);void 0===d&&(d=!0);this.Vb.Fb(a);var e=this.bubbles.indexOf(a);-1<e&&(this.bubbles.splice(e,1),this.jb[w[a.A]]--,c&&this.zc.mc(function(){var a=new Ea;b.sa(a);return a}).Set(a.x,a.y,.5,a.K,a.A));d&&
(a.K>=K[2]?X.Play("lowPop"):a.K>=K[1]?X.Play("midPop"):X.Play("highPop"))};b.prototype.mb=function(){for(var a=0;a<this.bubbles.length;a++)this.Vb.Fb(this.bubbles[a]);this.bubbles=[];this.jb={}};b.prototype.cb=function(a,c,d,b){var e,h,g=this;void 0===b&&(b=-1);void 0===e&&(e=!0);void 0===h&&(h=!1);var m=this.Vb.mc(function(){var a=new aa;a.hb=ca;a.ib=da;a.e=g;return a});null!=m&&(m.Set(a,c,d,b),m.Ga.y=h?0:5,m.Ga.x=0,m.M.x=0,m.M.y=0,e&&this.bubbles.push(m),this.jb[m.A]=(void 0==this.jb[m.A]?0:this.jb[m.A])+
1);return m};b.prototype.dd=function(a){for(var c=0;c<this.bubbles.length;c++)if(x(this.bubbles[c].x,this.bubbles[c].y,a.x,a.y)<this.bubbles[c].K*this.bubbles[c].K)return this.bubbles[c];return null};b.prototype.bc=function(){for(var a=0;a<this.bubbles.length;a++)for(var c=this.bubbles[a],d=a+1;d<this.bubbles.length;d++)c.Nc(this.bubbles[d])};return b}(),Ja=function(b){function a(){b.call(this);this.na=-1;this.abs=this.ba=null;this.z=-10;this.name="Game";this.ia=0}f(a,b);a.prototype.pa=function(){this.vc=
this.e.Sc();this.vc.Db(this);this.state=this.lb};a.prototype.bb=function(a,d){void 0===d&&(d=!1);this.e.Ja=!1;this.e.mb();this.ia=2;this.H&&this.H.kb(this.e);0>a||a>=W.length||(this.na=a,this.H=new ta(W[a]),this.H.Hb(this.e),this.Ba=d?3:0)};a.prototype.Ma=function(a){void 0===a&&(a=!1);a?(this.na+1>=W.length?this.e.U.Set("Game Complete",["Main Menu"],["Congratulations!","You have trapped all the bubbles!","Thanks for playing :)"]):this.e.U.Set("Level Complete",["Retry","Next","Main Menu"],["Nice job!"]),
this.e.U.Pa(!0),this.state=this.Da,this.e.Ja=!0,localStorage.setItem("cl",this.na.toString())):this.e.U.active&&this.state==this.Da&&"Level Complete"!=this.e.U.title?(this.state=this.lb,this.e.Ja=!1,this.e.U.Pa(!1)):this.state!=this.lb||this.e.U.active||(-1==this.na?-1<Number(localStorage.getItem("cl"))?this.e.U.Set("Main Menu",["New Game","Continue","Help"]):this.e.U.Set("Main Menu",["New Game","Help"]):this.e.U.Set("Options",["Retry","Edit Level","Resume","Main Menu"],["Level "+this.na+": "+this.H.t]),
this.abs&&this.abs.stop(),this.ba=null,this.e.Ja=!0,this.e.U.Pa(!0),this.state=this.Da)};a.prototype.Y=function(a){this.e.xb.dc()&&this.Ma();0<this.Ba&&(this.Ba-=a);1<this.Ba&&(this.e.V.ya[0]||this.e.V.ya[1]||this.e.V.ya[2])&&(this.Ba=1);this.state(a)};a.prototype.Ib=function(){this.H.kb(this.e);this.e.mb();this.na=-1;this.H=null};a.prototype.Da=function(){if(!this.e.U.active){this.state=this.lb;var a=this.e.U;switch(a.title){case "Level Complete":"Retry"==a.oa?this.bb(this.na):"Main Menu"==a.oa?
this.Ib():(this.na++,this.bb(this.na,!0));break;case "Game Complete":localStorage.removeItem("cl");this.Ib();break;case "Options":this.e.Ja=!1;"Retry"==a.oa?(this.e.mb(),this.H.kb(this.e),this.H.ua(),this.H.Hb(this.e)):"Edit Level"==a.oa?(this.Ba=0,this.active=!1,this.H.ua(),this.vc.fd(this.H)):"Main Menu"==a.oa&&this.Ib();break;case "Main Menu":"New Game"==a.oa?(localStorage.removeItem("cl"),this.bb(0,!0)):"Continue"==a.oa?(a=Number(localStorage.getItem("cl")),-1<a?this.bb(a+1,!0):this.bb(0,!0)):
"Help"==a.oa&&(this.state=this.Da,a.Set("Help",["Ok"],"Trap bubbles in same-colored areas to complete levels;Different color bubbles in a colored area isn't allowed and shows as 'Error!';Right-click blows new white bubbles (hold to make larger);Left-click pops only WHITE bubbles;In Edit Mode, items that can be moved, colored, and/or rotated are indicated;by a dot, or rectangle;Go to Edit Mode thru the menu via 'Escape' or the menu button".split(";"),"left",10),a.Pa(!0));break;case "Help":this.e.Ja=
!1}}};a.prototype.lb=function(a){if(this.H){0<this.ia&&(this.ia-=a,0>=this.ia&&this.Ma(!0));if(this.e.V.va[2]&&null==this.ba&&!Y.Ka&&-1<this.na)this.ba=this.e.cb(this.e.V.x,this.e.V.y,10,0),null!=this.ba&&(this.abs=X.Play("blowUp"),this.ba.M.Set(0,0),this.ba.Ga.y=0,this.ba.Ga.x=0);else if(this.e.V.va[0]&&!Y.Ka){var d=this.e.dd(new p(this.e.V.x,this.e.V.y));null!=d&&0==d.A&&this.e.Gb(d)}this.ba&&this.e.V.ya[2]?(this.ba.K=Math.min(this.ba.K+25*a,60),this.ba.qa=this.ba.K/50):this.ba&&this.e.V.Sa[2]&&
(this.abs&&this.abs.stop(),this.ba.M.x=t(-2,3),this.ba.M.y=t(10,40),this.ba.Ga.y=5,this.ba=null);this.e.bc();for(d=0;d<this.e.bubbles.length;d++){for(var b=0;b<this.H.O.length;b++){var e=this.e.bubbles[d].cd(this.H.O[b]);null!=e&&(this.H.O[b].wa&&this.H.O[b].A!=this.e.bubbles[d].A||!this.H.O[b].wa&&this.H.O[b].A==this.e.bubbles[d].A||0==this.H.O[b].A)&&(this.e.bubbles[d].x+=e.x,this.e.bubbles[d].y+=e.y)}for(b=0;b<this.H.ha.length;b++)if(this.H.ha[b].Oc(this.e.bubbles[d])){this.e.Gb(this.e.bubbles[d]);
break}for(b=0;b<this.H.Z.length;b++)this.H.Z[b].jd(this.e.bubbles)}this.H&&(this.H.Y(a),this.H.Vc(this.e.bubbles),this.H.Jc()&&this.H.Ic()?0==this.ia&&(this.ia=2):this.ia=0)}else this.ia-=a,0>=this.ia&&50>this.e.bubbles.length&&(this.e.cb(t(40,this.e.A.width-40),this.e.A.height+40,K[t(0,K.length)],t(0,w.length)).M.Set(t(-90,90),0),this.ia=t(.25,2)),this.e.bc()};a.prototype.N=function(a){if(-1==this.na)E(a,"Bubble Trap!",this.e.A.width/2,this.e.A.height/2,"center","middle","cyan","92px "+Q),E(a,"Escape for the menu",
this.e.A.width/2,this.e.A.height-30,"center","bottom","orange"),E(a,"by recursor for js13k 2016",this.e.A.width/2,this.e.A.height,"center","bottom","yellow","16px "+Q);else if(this.H&&(this.H.N(a,1),0<this.Ba)){var d=Math.min(Math.max(this.Ba,0),1);a.globalAlpha=.9*d;a.fillStyle="MidnightBlue";a.fillRect(0,this.e.A.height/2-50,this.e.A.width,100);E(a,this.H.t,this.e.A.width/2,this.e.A.height/2,"center","middle","white","30px "+Q,d)}};a.prototype.eb=function(a){!a&&this.H&&(this.H.kb(this.e),this.e.mb())};
return a}(n);window.addEventListener("load",function(){var b=new Ia(document.getElementById("main"));X.Db();X.fc=function(){var a=new Ja;b.sa(a);var c=new Ka;c.active=!1;b.sa(c);var d=new Z(b.A.width-25,0,25,25,"=");d.name="o";d.r=0;b.sa(d);d.fb=function(){a.active?a.Ma():c.Ma()};b.ed()}});
var Ha=function(){function b(){var a=this;this.Yc=function(){a.Wa={};a.gb={};a.wb={}};this.$c=function(c){a.Wa[c.key]&&a.Wa[c.key]||(a.Wa[c.key]=!0,a.gb[c.key]=!0)};this.ad=function(c){a.Wa[c.key]&&(a.Wa[c.key]=!1,a.wb[c.key]=!0)};this.Wa={};this.gb={};this.wb={}}b.prototype.pa=function(){window.addEventListener("blur",this.Yc);window.addEventListener("keyup",this.ad);window.addEventListener("keydown",this.$c)};b.prototype.dc=function(){return this.gb.Escape||!1};b.prototype.Bb=function(){for(var a in this.gb)this.gb[a]=
!1;for(a in this.wb)this.wb[a]=!1};return b}(),Y=function(){function b(a){this.e=a;this.va=[!1,!1,!1];this.Sa=[!1,!1,!1];this.ya=[!1,!1,!1]}b.prototype.hd=function(a){var c=this.e.A.getBoundingClientRect();this.x=a.clientX-c.left;this.y=a.clientY-c.top};b.prototype.pa=function(){var a=this;this.e.A.addEventListener("mousemove",function(c){a.hd(c)});this.e.A.addEventListener("mousedown",function(c){a.va[c.button]=!0;a.ya[c.button]=!0});this.e.A.addEventListener("mouseup",function(c){a.va[c.button]=
!1;a.Sa[c.button]=!0;a.ya[c.button]=!1})};b.prototype.Bb=function(){this.Sa[0]=this.Sa[1]=this.Sa[2]=!1;this.va[0]=this.va[1]=this.va[2]=!1};b.Ka=0;return b}(),Ga=function(){function b(a,c,d){void 0===a&&(a=0);void 0===c&&(c=-1);void 0===d&&(d=!1);this.td=c;this.pd=d;0<c&&(a=Math.min(a,c));this.ga=Array(a);for(a=0;a<this.ga.length;a++)this.ga[a]={Xa:null,$b:!1}}b.prototype.mc=function(a){for(var c=0;c<this.ga.length;c++)if(!this.ga[c].$b)return this.ga[c].$b=!0,null===this.ga[c].Xa?this.ga[c].Xa=
a():this.ga[c].Xa instanceof n&&(this.ga[c].Xa.active=!0),this.ga[c].Xa;if(this.td==this.ga.length)return this.pd?null:a()};b.prototype.Fb=function(a){a instanceof n&&(a.active=!1);for(var c=0;c<this.ga.length;c++)a===this.ga[c].Xa&&(this.ga[c].$b=!1)};return b}(),Ka=function(b){function a(){b.call(this);this.xa=-1;this.z=-10;this.name="IGE"}f(a,b);a.prototype.Db=function(a){this.sd=a};a.prototype.fd=function(a){this.H=a;this.active=!0};a.prototype.pa=function(){var a=this;this.state=this.ob;this.Ua=
new Z(this.e.A.width-100-2,this.e.A.height-40,100,40,"Color +",!1);this.Ta=new Z(this.e.A.width-210,this.e.A.height-40,100,40,"Color -",!1);this.e.sa(this.Ua);this.e.sa(this.Ta);this.Ua.active=!1;this.Ta.active=!1;this.Ua.fb=function(){a.Tc()};this.Ta.fb=function(){a.Qc()};this.$=.75};a.prototype.eb=function(a){a||(this.Ua.active=!1,this.Ta.active=!1,this.Na(null))};a.prototype.Ma=function(){this.e.U.active&&this.state==this.Da?(this.state=this.ob,this.e.U.Pa(!1)):this.e.U.active||this.state!=this.ob||
(this.e.U.Set("Options",["Play Level","Resume Editing"]),this.state=this.Da,this.e.U.Pa(!0))};a.prototype.Y=function(a){this.e.xb.dc()&&this.Ma();this.state(a);this.$-=a;0>=this.$&&(this.sc=!this.sc,this.$=.75)};a.prototype.Tc=function(){this.ma=(this.ma+1)%w.length;1==this.ma&&this.ma++;this.I&&(this.I.A=this.ma)};a.prototype.Qc=function(){this.ma--;1==this.ma?this.ma--:0>this.ma&&(this.ma=w.length-1);this.I&&(this.I.A=this.ma)};a.prototype.Na=function(a){(this.I=a)?(this.ma=this.I.A,this.Ta.active=
!0,this.Ua.active=!0):(this.Ta.active=!1,this.Ua.active=!1)};a.prototype.Da=function(){if(!this.e.U.active){var a=this.e.U;this.state=this.ob;"Options"==a.title&&"Play Level"==a.oa&&(this.active=!1,this.sd.active=!0,this.H.Hb(this.e))}};a.prototype.ob=function(){var a=this.e.V.x,d=this.e.V.y;if(this.e.V.va[0]&&!Y.Ka){this.Na(null);for(var b=0;b<this.H.O.length;b++)if(this.H.O[b].J&&(this.xa=na(a,d,this.H.O[b]),0<this.xa)){this.Na(this.H.O[b]);this.za=(new p(this.I.B,this.I.C)).nb(new p(a,d));this.yc=
(new p(this.I.D,this.I.F)).nb(new p(a,d));this.yb=new p((this.I.B+this.I.D)/2,(this.I.C+this.I.F)/2);this.qd=this.I.ec();return}for(b=0;b<this.H.T.length;b++)if(this.H.T[b].J){if(64>=x(this.H.T[b].ja.x,this.H.T[b].ja.y,a,d)){this.Na(this.H.T[b]);this.xa=1;return}if(this.H.T[b].aa.Ca(a,d)||256>=x(this.H.T[b].x,this.H.T[b].y,a,d)){this.Na(this.H.T[b]);this.za=(new p(this.I.x,this.I.y)).nb(new p(a,d));this.xa=3;return}}for(b=0;b<this.H.ha.length;b++)if(this.H.ha[b].J&&144>=x(this.H.ha[b].x,this.H.ha[b].y,
a,d)){this.Na(this.H.ha[b]);this.za=(new p(this.I.x,this.I.y)).nb(new p(a,d));break}}else this.e.V.ya[0]&&!Y.Ka&&(this.I instanceof sa?1==this.xa||2==this.xa?(a=oa(a,d,this.yb.x,this.yb.y,this.qd/2),this.I.B=a.x,this.I.C=a.y,this.I.D=a.x-2*(a.x-this.yb.x),this.I.F=a.y-2*(a.y-this.yb.y)):3==this.xa&&(this.I.B=a+this.za.x,this.I.C=d+this.za.y,this.I.D=a+this.yc.x,this.I.F=d+this.yc.y):this.I instanceof pa?3==this.xa?(this.I.x=a+this.za.x,this.I.y=d+this.za.y,this.I.jc()):1==this.xa&&(a=oa(a,d,this.I.x,
this.I.y,60),a.Set(a.x-this.I.x,a.y-this.I.y),this.I.Oa(Math.round(180*(Math.atan2(a.y,a.x)-Math.atan2(-1,0))/Math.PI))):this.I instanceof ra&&(this.I.x=a+this.za.x,this.I.y=d+this.za.y))};a.prototype.N=function(a){this.H.N(a,2);this.I&&this.I.ta&&this.I.ta(a,2);this.sc||E(a,"Edit Mode",0,0,"left","top","Yellow")};return a}(n);

</script>
    </head>
    <body>
        <canvas id="main" width="900" height="600" oncontextmenu="return false;"></canvas>
    </body>
</html>
