var RAD=Math.PI/180,canvas,cW,cH,ctx,activeTask,lvl,aP=0,sO=null,rP=null,mousex=-100,mousey=-100,dG=!1;canvas=document.getElementById("g"),ctx=canvas.getContext("2d"),cW=canvas.width=1200,cH=canvas.height=800,maxDistance=Math.sqrt(cW*cW+cH*cH)/4,maxIntensity=7;var randomWords=["absurd","anomaly","bandit","banjo","boiler","bone","book","bottle","breakfast","bridge","broker","card","cat","center","contract","cheese","club","dog","egg","error","experiment","explosion","female","fish","fungus","fusion","game","giraffe","glitch","horse","iceman","infuse","internet","jumper","keyboard","king","lawyer","letter","limit","lobster","man","meatball","message","metal","mouse","movie","mumble","normal","nugget","pancake","phobos","piece","rabbit","random","savage","scream","secure","ship","speed","stasis","sister","substance","table","test","theatre","thing","trip","twist","title","watermelon","wild","zombie"],randomWordForRandom=[];randomWords.forEach(function(e){6==e.length&&randomWordForRandom.push(e)});var menuFirstWord="game",menuSecondWord="random",menuThirdWord="title",mO,selectedObject=null,oldmousex,oldmousey,cannotSolve,inputDelay=0,prevMousex,prevMousey=-1,repetition=0,carPossibilities=[];function generateLevel(){if(cannotSolve=!1,aP=0,(sO=new Object).hR=!0,sO.iC=!1,sO.oY=0,sO.a=1,sO.c="#0F0",0==lvl)aP=1,sO.w=60,sO.h=60,sO.x=cW/2-30,sO.y=cH-120;else if(1==lvl)for(sO.w=300,sO.h=65,sO.x=455,sO.y=450,sO.a=.6,sO.hR=!1,mO=[],i=0;i<32;i++)tmp=new Object,tmp.x=rand(0,cW),tmp.y=rand(0,cH),tmp.dx=rand(-10,10),tmp.dy=rand(-10,10),tmp.sD=rand(0,300),tmp.char="üß†",mO.push(tmp);else if(2==lvl){for(repetition=0,sO.w=45,sO.h=45,sO.x=100,sO.y=100,sO.dx=rand(-9,9),sO.dy=rand(-9,9),sO.oY=-15,sO.iC=!0,sO.hR=!1,sO.a=1,mO=[],i=0;i<16;i++)tmp=new Object,tmp.x=rand(50,cW-50),tmp.y=rand(50,cH-50),tmp.dx=0,tmp.dy=0,i%3==0?(tmp.kind="time",tmp.c="#880"):i%3==1?(tmp.kind="friend",tmp.c="#4267b2"):(tmp.kind="love",tmp.c="#800"),mO.push(tmp);aP=-20}else if(3==lvl){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;for(sO.w=40,sO.h=40,sO.x=10,sO.y=80,sO.oY=-22,sO.hR=!1,rP=[],i=0;i<cW/40;i++)for(rP[i]=[],k=0;k<cH/40-5;k++)rP[i][k]=new Object,rP[i][k].char=e?"FIREFOXISBROKEN".charAt((i+k)%15):String.fromCharCode(rand(33,255)),r=rand(0,2),2==r?rP[i][k].c="#FFF":1==r?rP[i][k].c="#F00":rP[i][k].c="#0F0";r=rand(0,2),2==r?sO.c="#FFF":1==r?sO.c="#F00":sO.c="#0F0",solX=rand(0,cW/40-1),solY=rand(0,cH/40-6),rP[solX][solY].char="",sO.x=40*solX,sO.y=cH-40*solY-10}else if(4==lvl)for(sO.w=100,sO.h=100,sO.x=-90950,sO.y=600,sO.oY=15,sO.iC=!0,sO.hR=!1,sO.a=1,sO.c="#0A0",mO=[],carPossibilities=["üöó","üöã","üöê","üöë","üöí","üöì","üöï","üöô","üöö","üöõ","üöú"],i=0;i<8;i++)tmp=new Object,tmp.x=rand(0,cW),tmp.y=cH-10-20*i,tmp.dx=rand(-20,20),tmp.char=carPossibilities[rand(0,carPossibilities.length-1)],mO.push(tmp);else if(5==lvl)for(sO.w=100,sO.h=100,sO.x=550,sO.y=500,sO.oY=15,sO.iC=!0,sO.hR=!1,sO.a=1,sO.c="#FFF",mO=[],i=0;i<9;i++)tmp=new Object,tmp.x=rand(100,cW-100),tmp.y=rand(100,cH-100),0==i?tmp.c="#A00":1==i?tmp.c="#0A0":2==i?tmp.c="#00A":3==i?tmp.c="#0AA":4==i?tmp.c="#A0A":5==i?tmp.c="#AA0":6==i?tmp.c="#A70":7==i?tmp.c="#A07":8==i&&(tmp.c="#7A0"),tmp.w=50,tmp.h=50,tmp.a=.8,mO.push(tmp);else 6==lvl?(aP=1,sO.w=60,sO.h=60,sO.x=cW/2-30,sO.y=cH-120,mO=[],tmp=new Object,tmp.x=510,tmp.y=225,tmp.w=170,tmp.h=60,mO.push(tmp),cannotSolve=!0):7==lvl?(mO=[],sO.x=-9999,sO.w=100,sO.h=100,sO.oY=15,sO.iC=!0,sO.hR=!1,sO.a=0,tmp=new Object,tmp.x=250,tmp.y=250,tmp.w=150,tmp.h=300,tmp.isClosed=!0,mO.push(tmp),tmp=new Object,tmp.x=500,tmp.y=250,tmp.w=150,tmp.h=300,tmp.isClosed=!0,mO.push(tmp),tmp=new Object,tmp.x=750,tmp.y=250,tmp.w=150,tmp.h=300,tmp.isClosed=!0,mO.push(tmp)):8==lvl?(sO.w=45,sO.h=45,sO.x=-100,sO.y=-100,sO.oY=-15,sO.iC=!0,sO.hR=!1,sO.a=1):9==lvl&&(sO.w=45,sO.h=45,sO.x=cW/2,sO.y=cH/2,sO.oY=-15,sO.iC=!0,sO.hR=!1,sO.a=1,inputDelay=50)}function dS(e){for(ctx.save(),ctx.globalAlpha=e.a,ctx.fillStyle=e.c,e.hR&&(ctx.fillRect(e.x,e.y,e.w,2),ctx.fillRect(e.x,e.y-e.h,e.w,2),ctx.fillRect(e.x,e.y-e.h,2,e.h),ctx.fillRect(e.x+e.w,e.y-e.h,2,e.h+2)),e.iC&&(ctx.beginPath(),ctx.arc(e.x+e.w/2,e.y-e.h/2,e.w/2,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,ctx.strokeStyle=e.c,ctx.stroke(),ctx.closePath()),e.iC&&(ctx.fillStyle="#000"),ctx.beginPath(),ctx.arc(e.x+e.w/2,e.y-25-e.oY,5,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,e.iC?ctx.strokeStyle="#000":ctx.strokeStyle=e.c,ctx.stroke(),ctx.closePath(),i=0;i<5;i++)ctx.beginPath(),ctx.arc(e.x+e.w/2,e.y-25-e.oY,5+5*i,230*RAD,310*RAD,!1),ctx.lineWidth=1,e.iC?ctx.strokeStyle="#000":ctx.strokeStyle=e.c,ctx.stroke(),ctx.closePath();ctx.restore()}function drawHUD(to){with(ctx){for(distance=Math.sqrt((mousex-to.x-to.w/2)*(mousex-to.x-to.w/2)+(mousey-to.y+to.h/2)*(mousey-to.y+to.h/2)),distance=maxIntensity-maxIntensity*(distance/maxDistance),save(),translate(cW-30,20),distance<-3?fillStyle="#F00":distance>maxIntensity-.8?fillStyle="#0F0":fillStyle="#FFF",beginPath(),moveTo(2,0),lineTo(0,-3),lineTo(2,-3),lineTo(2,-10),lineTo(4,-10),lineTo(4,0),lineTo(2,0),lineWidth=1,moveTo(5,-10),lineTo(9,-7),lineTo(7,-7),lineTo(7,0),lineTo(5,0),lineWidth=1,fill(),closePath(),fillStyle="#FFF",i=0;i<distance;i++)fillRect(10+2*i,0,1,-3-i);if(restore(),fillStyle="#FFF",font="12px Arial",navigator.onLine){var today=new Date,h=today.getHours(),m=today.getMinutes(),s=today.getSeconds();m=m<10?"0"+m:m,s=s<10?"0"+s:s,fillText(h+":"+m+":"+s,5,15)}else fillText("Offline",5,15)}}function run(){with(ctx){if(inputDelay>0&&(inputDelay--,dG=!1),clearRect(0,0,cW,cH),fillStyle="#000",fillRect(0,0,cW,cH),fillStyle="#FFF",fillRect(0,0,cW,1),fillRect(0,cH-1,cW,1),fillRect(0,0,1,cH),fillRect(cW-1,0,1,cH),0==lvl){if(dS(sO),++aP%100==0&&(menuFirstWord=randomWords[rand(0,randomWords.length-1)],menuSecondWord=randomWordForRandom[rand(0,randomWordForRandom.length-1)],menuThirdWord=randomWords[rand(0,randomWords.length-1)]),Math.round(aP/10)%10==9){var s="abcdefghijklmnopqrstuvwxyz";r=rand(4,10),menuFirstWord=Array(r).join().split(",").map(function(){return s.charAt(Math.floor(Math.random()*s.length))}).join(""),r=6,menuSecondWord=Array(r).join().split(",").map(function(){return s.charAt(Math.floor(Math.random()*s.length))}).join(""),r=rand(4,10),menuThirdWord=Array(r).join().split(",").map(function(){return s.charAt(Math.floor(Math.random()*s.length))}).join("")}fillStyle="#EEE",font="70px Lucida Console",text="This "+menuFirstWord,fillText(text,350,150),text="has a "+menuSecondWord+" "+menuThirdWord,fillText(text,190,250),fillStyle="#0F0",font="20px Arial",fillText("PLAY",cW/2-25,cH-125),fillStyle="#FFF",font="12px Arial",fillText("By Infernet89",cW-75,cH-5),fillText("Made for JS13k Competition",5,cH-5)}else if(1==lvl){aP++,aP>180&&dS(sO),toWrite="This",toWrite=toWrite.substring(0,aP/2),fillStyle="#FFF",font="40px Arial",fillText(toWrite,150,250),toWrite="little",toWrite=toWrite.substring(0,aP/2-8),font="20px Arial",fillText(toWrite,240,250),toWrite="game",toWrite=toWrite.substring(0,aP/2-16),font="40px Arial",fillText(toWrite,290,250),toWrite="is gonna",toWrite=toWrite.substring(0,aP/2-24),font="40px Arial",fillText(toWrite,150,330),fillStyle="#F00",font="90px Arial",aP>70&&fillText("Hurt",150,450),fillStyle="#FFF",font="40px Arial",aP>90&&fillText("your",350,450),fillStyle="#0F0",font="90px Arial",aP>110?fillText("BRAIN!",450,450):dG=!1,font="18px Arial";for(i in mO)o=mO[i],(o.x+o.dx>cW-10||o.x+o.dx<10)&&(o.dx*=-1),(o.y+o.dy+60>cH-10||o.y+o.dy<10)&&(o.dy*=-1),o.x+=o.dx,o.y+=o.dy,o.dx*=.95,o.dy*=.95,--o.sD<0&&(o.dx=rand(-10,10),o.dy=rand(-10,10),o.sD=rand(0,300)),fillText(o.char,o.x,o.y)}else if(2==lvl){if(fillStyle="#777",font="24px Arial",fillText("They said that in life, only three things really matter..",300,350),fillText("          You know that there is a fourth one.",300,450),(sO.x+sO.dx>cW-sO.w||sO.x+sO.dx<0)&&(sO.dx*=-1),(sO.y+sO.dy>cH||sO.y+sO.dy<sO.h)&&(sO.dy*=-1),--aP>0){if(dG=!1,aP>33){sO.x+=sO.dx,sO.y+=sO.dy;for(i in mO){o=mO[i],distanceFrom(o,sO)<60&&(o.dx=(o.x-sO.x)/3,o.dy=(o.y-sO.y)/3);for(k in mO)i!=k&&(o2=mO[k],distanceFrom(o,o2)<100&&(o.dx=100/(o.x-o2.x),o.dy=100/(o.y-o2.y)));(o.x+o.dx>cW||o.x+o.dx<60)&&(o.dx*=-1),(o.y+o.dy+60>cH||o.y+o.dy<60)&&(o.dy*=-1),o.x+=o.dx,o.y+=o.dy,o.dx*=.95,o.dy*=.95,Math.abs(o.dx)<.5&&(o.dx=0),Math.abs(o.dy)<.5&&(o.dy=0)}}}else aP>-25?sO.a=1:(sO.a=0+repetition,aP=rand(100,600),sO.dx=rand(-5,5),sO.dy=rand(-5,5),repetition+=.005);for(i in mO)o=mO[i],fillStyle=o.c,beginPath(),arc(o.x,o.y,50,0,2*Math.PI,!1),fill(),lineWidth=.5,stroke(),closePath(),fillStyle="#000","time"==o.kind?(font="80px Arial",fillText("‚ßó",o.x-20,o.y+25)):"love"==o.kind?(font="60px Arial",fillText("‚ù§",o.x-30,o.y+25)):(font="80px Arial",fillText("‚ò∫",o.x-40,o.y+25));dS(sO)}else if(3==lvl){for(fillStyle="#777",font="24px Arial",fillText("They'll try to distract you.",400,100),font="40px Webdings",i=0;i<cW/40;i++)for(k=0;k<cH/40-5;k++)fillStyle=rP[i][k].c,fillText(rP[i][k].char,40*i,cH-40*k-10);dS(sO)}else if(4==lvl){fillStyle="#777",font="24px Arial",fillText("       But if you stop and think,",200,250),fillText("you will understand what you really need.",200,300),fillStyle="#888",fillRect(930,160,140,460),beginPath(),fillStyle="#100",arc(1e3,230,50,0,2*Math.PI,!1),fill(),beginPath(),fillStyle="#110",arc(1e3,390,50,0,2*Math.PI,!1),fill(),beginPath(),fillStyle="#010",arc(1e3,550,50,0,2*Math.PI,!1),fill(),aP<200?(fillStyle="#A00",beginPath(),arc(1e3,230,50,0,2*Math.PI,!1),fill(),lineWidth=.5,strokeStyle="#FFF",stroke(),closePath(),mousex==oldmousex&&mousey==oldmousey?aP++:aP=0):aP<300?(fillStyle="#AA0",beginPath(),arc(1e3,390,50,0,2*Math.PI,!1),fill(),lineWidth=.5,strokeStyle="#FFF",stroke(),closePath(),mousex==oldmousex&&mousey==oldmousey?aP++:aP=0):aP&&(sO.x=950,dS(sO)),fillStyle="#FFF",font="24px Arial";for(i in mO)o=mO[i],o.x+=o.dx,o.x<-50?(o.x=cW+50,o.char=carPossibilities[rand(0,carPossibilities.length-1)],o.dx=rand(-20,20)):o.x>cW+50&&(o.x=-50,o.dx=rand(-20,20),o.char=carPossibilities[rand(0,carPossibilities.length-1)]),fillText(o.char,o.x,o.y);oldmousex=mousex,oldmousey=mousey}else if(5==lvl){fillStyle="#777",font="24px Arial",fillText("There are some cheap imitation of that.",370,220),fillText("      But you need the original.",370,270),dG||(selectedObject=null),null!=selectedObject&&(selectedObject.x=mousex,selectedObject.y=mousey),dS(sO),save(),compositeOperation="lighter";for(i in mO)o=mO[i],globalAlpha=o.a,fillStyle=o.c,beginPath(),arc(o.x,o.y,o.w,0,2*Math.PI,!1),fill(),closePath(),null==selectedObject&&mousex>o.x-o.w&&mousex<o.x+o.w&&mousey>o.y-o.h&&mousey<o.y+o.h&&(selectedObject=o),"#0A0"==o.c&&(dist=Math.sqrt((o.x-sO.x-sO.w/2)*(o.x-sO.x-sO.w/2)+(o.y-sO.y+sO.h/2)*(o.y-sO.y+sO.h/2)),cannotSolve=!(dist<5));restore()}else if(6==lvl){fillStyle="#777",font="24px Arial",fillText("And you need it now.",900,750),fillStyle="#EEE",font="60px Arial",toWrite="In the jungle,",toWrite=toWrite.substring(0,aP/2-24),fillText(toWrite,350,270),toWrite="you must wait,",toWrite=toWrite.substring(0,aP/2-51),fillText(toWrite,350,360),toWrite="until the time read 5 or 8.",toWrite=toWrite.substring(0,aP/2-78),fillText(toWrite,350,450);var today=new Date;time=today.getHours()+""+today.getMinutes()+today.getSeconds(),sO.c=cannotSolve?"#A00":"#0F0",o=mO[0],mousex>o.x&&mousex<o.x+o.w&&mousey>o.y&&mousey<o.y+o.h?(sO.c="#0F0",(time.includes("5")||time.includes("8"))&&(cannotSolve=!1)):time.includes("5")||time.includes("8")||(cannotSolve=!0),dS(sO),aP++}else if(7==lvl){fillStyle="#777",font="24px Arial",fillText("Without silly games..",900,750),fillStyle="#EEE",font="60px Arial",0==aP?fillText("Which door has what are you looking for?",50,150):1==aP?fillText("Not this. Want to change your mind?",50,150):2==aP?fillText("Wrong decision.",50,150):3==aP&&fillText("Smart move!",50,150);for(i in mO)if(o=mO[i],fillStyle="#29180f",fillRect(o.x,o.y,o.w,o.h),o.isClosed?(fillStyle="#874e32",fillRect(o.x+5,o.y+5,o.w-10,o.h-10),fillStyle="#29180f",beginPath(),arc(o.x+o.w-20,o.y+o.h/2,10,0,2*Math.PI,!1),fill()):(fillStyle="#000",fillRect(o.x+5,o.y+5,o.w-10,o.h-10),fillStyle="#874e32",fillRect(o.x-5,o.y+5,10,o.h-10),fillStyle="#29180f",fillRect(o.x-15,o.y+o.h/2-10,10,20),1==aP?(fillStyle="#F00",font="99px Arial",fillText("üêê",o.x+10,o.y+o.h/2+30)):2==aP?(fillStyle="#F00",font="99px Arial",fillText("üêê",o.x+10,o.y+o.h/2+30)):3==aP&&i!=solutionDoor&&(fillStyle="#F00",font="99px Arial",fillText("üêê",o.x+10,o.y+o.h/2+30))),closePath(),0==aP){if(dG&&mousex>o.x&&mousex<o.x+o.w&&mousey>o.y&&mousey<o.y+o.h){firstDoorChoiche=i;do{r=rand(0,2)}while(r==i);mO[r].isClosed=!1,aP=1,inputDelay=30}}else if(1==aP){if(dG&&mousex>o.x&&mousex<o.x+o.w&&mousey>o.y&&mousey<o.y+o.h&&o.isClosed)if(i==firstDoorChoiche){o.isClosed=!1,aP=2,sol=-1;do{sol++}while(!mO[sol].isClosed);sO.x=mO[sol].x+mO[sol].w/2-45,sO.y=mO[sol].y+mO[sol].h/2+40,sO.a=0,cannotSolve=!0}else aP=3,o.isClosed=!1,solutionDoor=i,sO.x=mO[i].x+mO[i].w/2-45,sO.y=mO[i].y+mO[i].h/2+40,sO.a=1,sO.c="#0F0",cannotSolve=!1,dG=!1,inputDelay=30}else 2==aP&&dG&&mousex>o.x&&mousex<o.x+o.w&&mousey>o.y&&mousey<o.y+o.h&&o.isClosed&&(o.isClosed=!1,sO.a=.8,sO.c="#A00",inputDelay=30,dG=!1);2==aP&&dG&&mousex>sO.x&&mousex<sO.x+sO.w&&mousey>sO.y-sO.h&&mousey<sO.y&&sO.a>.5&&(generateLevel(),inputDelay=30),dS(sO)}else if(8==lvl){fillStyle="#777",font="24px Arial",fillText("Without dirty tricks..",900,750);var firstRectangle=new Object;firstRectangle.x=200,firstRectangle.y=160,firstRectangle.w=250,firstRectangle.h=500;var secondRectangle=new Object;secondRectangle.x=700,secondRectangle.y=160,secondRectangle.w=250,secondRectangle.h=500,strokeStyle="#F00",lineWidth=20,strokeRect(firstRectangle.x,firstRectangle.y,firstRectangle.w,firstRectangle.h),strokeRect(secondRectangle.x,secondRectangle.y,secondRectangle.w,secondRectangle.h),insideFirst=!1,insideSecond=!1,mousex>firstRectangle.x-15&&mousex<firstRectangle.x+firstRectangle.w+15&&mousey>firstRectangle.y-15&&mousey<firstRectangle.y+firstRectangle.h+15&&(mousex<firstRectangle.x+40||mousex>firstRectangle.x+firstRectangle.w-40||mousey<firstRectangle.y+40||mousey>firstRectangle.y+firstRectangle.h-40)?(sO.x=800,sO.y=410):mousex>secondRectangle.x-15&&mousex<secondRectangle.x+secondRectangle.w+15&&mousey>secondRectangle.y-15&&mousey<secondRectangle.y+secondRectangle.h+15&&(mousex<secondRectangle.x+40||mousex>secondRectangle.x+secondRectangle.w-40||mousey<secondRectangle.y+40||mousey>secondRectangle.y+secondRectangle.h-40)?(sO.x=300,sO.y=410):mousex>firstRectangle.x-15&&mousex<firstRectangle.x+firstRectangle.w+15&&mousey>firstRectangle.y-15&&mousey<firstRectangle.y+firstRectangle.h+15?insideFirst=!0:mousex>secondRectangle.x-15&&mousex<secondRectangle.x+secondRectangle.w+15&&mousey>secondRectangle.y-15&&mousey<secondRectangle.y+secondRectangle.h+15&&(insideSecond=!0),mx=prevMousex,my=prevMousey,-1!=mx&&-1!=my&&(!insideFirst||mx>firstRectangle.x-15&&mx<firstRectangle.x+firstRectangle.w+15&&my>firstRectangle.y-15&&my<firstRectangle.y+firstRectangle.h+15||(sO.x=800,sO.y=410),!insideSecond||mx>secondRectangle.x-15&&mx<secondRectangle.x+secondRectangle.w+15&&my>secondRectangle.y-15&&my<secondRectangle.y+secondRectangle.h+15||(sO.x=300,sO.y=410)),prevMousex=mousex,prevMousey=mousey,dS(sO)}else 9==lvl?(dS(sO),fillStyle="#874e32",fillRect(300,cH-100,20,100),fillRect(900,cH-100,20,100),fillStyle="#29180f",fillRect(100,cH-105,1e3,5),fillRect(100,105,5,cH-205),fillRect(1100,105,5,cH-205),fillRect(100,105,1e3,5),fillStyle="#FFF",font="10px Arial",fillText("Loading ad....",110,120),navigator.onLine&&++aP>40?(cannotSolve=!0,fillStyle="#CCC",fillRect(105,110,995,585),font="180px Arial",fillStyle="#7f41f1",fillText("Totally fake",150,300),font="130px Arial",aP/7%5>2&&fillText("ADVERTISING",155,500),fillStyle="#000",font="30px Arial",fillText("Want to play more of my games? Find them, by yourself.",150,600),save(),translate(940,605),rotate(9*aP*RAD),fillText("üêê",0,0),restore(),save(),translate(1055,150),rotate(-5*aP*RAD),fillText("‚õ≤",0,0),restore(),save(),translate(135,650),rotate(-25*aP*RAD),fillText("‚õΩ",0,0),restore(),save(),translate(675,320),rotate(3*aP*RAD),fillText("‚õÑ",0,0),restore(),save(),translate(140,140),rotate(aP*RAD),aP/20%5>2&&fillText("‚òï",0,0),restore()):cannotSolve=!1,fillStyle="#777",font="24px Arial",fillText("Just the pure essence of what are you looking for:",580,750),fillText("you need to ..",960,780)):10==lvl&&(aP++,fillStyle="#777",font="180px Arial",fillText("GO OUTSIDE!",10,240),font="24px Arial",toWrite="You just discovered that being always connected prevents you from reaching your goals.",toWrite=toWrite.substring(0,aP),fillText(toWrite,50,350),toWrite="Internet can become and addiction.",toWrite=toWrite.substring(0,-86+aP),fillText(toWrite,50,380),toWrite="Try to live OFFLINE.",toWrite=toWrite.substring(0,-120+aP),fillText(toWrite,50,410),fillStyle="#abb",fillRect(285,425,600,cH-440),fillStyle="#f0af19",fillRect(285,425,600,5),fillRect(285,cH-15,600,5),fillRect(285,425,5,cH-440),fillRect(880,425,5,cH-440),font="45px Tiomes New Roman",fillStyle="#000",fillText("I've completed a stupid game",330,500),fillText("with a random title and all I've",315,550),fillText("got was this stupid certificate.",320,600),fillText("  üéÄCONGRATULATIONSüéÄ",290,750));drawHUD(sO),mousex>sO.x&&mousex<sO.x+sO.w&&mousey>sO.y-sO.h&&mousey<sO.y&&!cannotSolve?(document.body.style.cursor="pointer",dG&&(lvl++,generateLevel())):document.body.style.cursor="default"}}function rand(e,t){return e>t?rand(t,e):(t+=1,Math.floor(Math.random()*(t-e)+e))}function distanceFrom(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function cliccatoMouse(e){dG=!0;var t=canvas.getBoundingClientRect();mousex=(e.clientX-t.left)/(t.right-t.left)*cW,mousey=(e.clientY-t.top)/(t.bottom-t.top)*cH}function mossoMouse(e){var t=canvas.getBoundingClientRect();mousex=(e.clientX-t.left)/(t.right-t.left)*cW,mousey=(e.clientY-t.top)/(t.bottom-t.top)*cH}function rilasciatoMouse(e){dG=!1}function sparitoMouse(e){mousex=mousey=-1}canvas.addEventListener("mousemove",mossoMouse),canvas.addEventListener("mousedown",cliccatoMouse),canvas.addEventListener("mouseup",rilasciatoMouse),window.addEventListener("blur",sparitoMouse),lvl=0,generateLevel(),activeTask=setInterval(run,33),window.AutoScaler=function(e,t,o,l){var i=this;this.viewportWidth=0,this.viewportHeight=0,"string"==typeof e&&(e=document.getElementById(e)),this.element=e,this.gameAspect=t/o,this.skewAllowance=l||0,this.checkRescale=function(){if(window.innerWidth!=i.viewportWidth||window.innerHeight!=i.viewportHeight){var e=window.innerWidth,t=window.innerHeight,o=e/t,l=0,s=0;l=e,s=t,Math.abs(o-i.gameAspect)>i.skewAllowance&&(o<i.gameAspect?s=e/i.gameAspect:l=t*i.gameAspect),i.element.style.width=l+"px",i.element.style.height=s+"px",i.element.style.marginLeft=(e-l)/2+"px",i.element.style.marginTop=(t-s)/2+"px",i.viewportWidth=e,i.viewportHeight=t}},i.element.style.display="block",i.element.style.margin="0",i.element.style.padding="0",window.addEventListener("resize",this.checkRescale),rescalercheck=setInterval(this.checkRescale,1500)};