function A(t){return v.width*t/100}function B(h){var i,l,a,r,e,o=0;s=A(h.s);var f=0;for(e=0;e<h.p.length;e++){if(h.id?(c.strokeStyle=t.s>h.id?h.p[e].b:"#411",c.fillStyle=t.s>h.id?h.p[e].f:"#501"):(h.p[e].b&&(c.strokeStyle=h.p[e].b),h.p[e].f&&(c.fillStyle=h.p[e].f)),c.lineWidth=h.p[e].lw?s*h.p[e].lw:.03*s,c.shadowColor=h.p[e].sh?h.p[e].sh:"transparent",h.p[e].sb&&(c.shadowBlur=s*h.p[e].sb/100),c.beginPath(),c.lineCap=h.p[e].lc?h.p[e].lc:"butt",h.p[e].l)for(f=h.f?h.af+1>h.p[e].l.length?0:h.af:0,o=0;o<h.p[e].l[f].length;o+=2)i=(h.a+h.p[e].l[f][o])/180*Math.PI,l=s*h.p[e].l[f][o+1]/100,a=h.x+Math.cos(i)*l,r=h.y+Math.sin(i)*l,o>0?c.lineTo(a,r):c.moveTo(a,r);if(h.p[e].a)for(f=h.af+1>h.p[e].a.length?0:h.af,o=0;o<h.p[e].a[f].length;o+=5)i=(h.a+h.p[e].a[f][o])/180*Math.PI,l=s*h.p[e].a[f][o+1]/100,a=h.x+Math.cos(i)*l,r=h.y+Math.sin(i)*l,c.arc(a,r,h.p[e].a[f][o+2]*s/100,h.p[e].a[f][o+3],h.p[e].a[f][o+4]);c.closePath(),h.p[e].b&&c.stroke(),h.p[e].f&&c.fill()}}function C(){for(var t=Math.round(10*Math.random()),h=10*Math.random(),s=0;s<pl.wp.g+pl.wp.s+pl.wp.sh;s++)t<5?bds.push(new $c(25*s,h)):(cl=Math.floor(6*Math.random()),Math.random()<.5?bds.push(new $b(Math.random()*v.width,2*s,cl)):bds.push(new $j(cl,50*s)))}function E(h,s,i,c){for(var l=0;l<25;l++)ptc.push(new $f(h+(Math.random()-.5)*A(i)/2,s+(Math.random()-.5)*A(i)/2,i)),l<12&&(ptc.d=0);c&&t.s>ctrl.pt&&(ctrl.pt=t.s+1200,pkp.push(new $g(h,s,ctrl.np)),ctrl.np=ctrl.np%3+1),ctrl.sc++,G(exp)}function F(t,h){function s(t,h,s,i,c,l,a){return d=Math.abs(c-t-s/2),v=Math.abs(l-h-i/2),!(d>s/2+a||v>i/2+a)&&(d<=s/2||v<=i/2||(d-=s/2,v-=i/2,a*a>d*d+v*v))}var i,c,l,a,r,e,o,f,n,p,d,v,u,y,b=A(t.s),w=A(h.s);if(t.cl.c)for(u=0;u<t.cl.c.length;u+=3){if(i=t.x+Math.cos(.01745*t.cl.c[u])*b*t.cl.c[u+1]/100,c=t.y+Math.sin(.01745*t.cl.c[u])*b*t.cl.c[u+1]/100,r=t.cl.c[u+2]*b/100,h.cl.c)for(y=0;y<h.cl.c.length;y+=3)if(l=h.x+Math.cos(.01745*h.cl.c[y])*w*h.cl.c[y+1]/100,a=h.y+Math.sin(.01745*h.cl.c[y])*w*h.cl.c[y+1]/100,e=h.cl.c[y+2]*b/100,d=i-l,v=c-a,r+e>Math.sqrt(d*d+v*v))return!0;if(h.cl.r)for(y=0;y<h.cl.r.length;y+=4)if(l=h.x+Math.cos(.01745*h.cl.r[y])*w*h.cl.r[y+1]/100,a=h.x+Math.sin(.01745*h.cl.r[y])*w*h.cl.r[y+1]/100,f=w*h.cl.r[y+2]/100,p=w*h.cl.r[y+3]/100,s(l,a,f,p,i,c,r))return!0}if(t.cl.r)for(u=0;u<t.cl.r.length;u+=4)if(i=t.x+Math.cos(.01745*t.cl.r[u])*b*t.cl.r[u+1]/100,c=t.y+Math.sin(.01745*t.cl.r[u])*b*t.cl.r[u+1]/100,o=b*t.cl.r[u+2]/100,n=b*t.cl.r[u+3]/100,h.cl.c)for(y=0;y<h.cl.c.length;y+=3)if(l=h.x+Math.cos(h.cl.c[y])*w*h.cl.c[y+1]/100,a=h.y+Math.sin(h.cl.c[y])*w*h.cl.c[y+1]/100,e=h.cl.c[y+2]*w/100,s(i,c,o,n,l,a,e))return!0}function G(t){t.currentTime=0,t.play()}function S(){var h=Date.now();for(0==t.s?t.d=17:t.d=h-t.s,c.fillStyle="#2c3e50",c.fillRect(0,0,v.width,v.height),i=0;i<3;i++)for(var s=0;s<sf[i].length;s++)sf[i][s].u();for(h>ctrl.nws&&(ctrl.nws=h+4e3,C()),i=pkp.length-1;i>-1;i--)pkp[i].u()&&pkp.splice(i,1);2==ctrl.stage&&pl.u();for(var i=bds.length-1;i>-1;i--)bds[i].u()&&bds.splice(i,1);for(i=pl.bts.length-1;i>-1;i--)pl.bts[i].u()&&pl.bts.splice(i,1);for(i=ptc.length-1;i>-1;i--)ptc[i].u()&&ptc.splice(i,1);for(i=ebs.length-1;i>-1;i--)ebs[i].u()&&ebs.splice(i,1);for(t.s=h,t.s-ac.t>ac.g&&(bds.push(new $a),ac.t=t.s),i=blb.length-1;i>-1;i--)blb[i].u()&&blb.splice(i,1);hud.gi.u(),hud.si.u(),hud.shi.u(),hud.scr.u(),0==ctrl.stage?(c.fillStyle="rgba(0,0,0,.6)",c.fillRect(0,0,v.width,v.height),c.fillStyle="#34495e",c.strokeStyle="#ecf0f1",c.shadowBlur=0,c.textAlign="center",c.font=Math.round(.1*v.width).toString()+"px impact",c.strokeText("The Wrong Universe",v.width/2,v.height/3),c.fillText("The Wrong Universe",v.width/2,v.height/3),c.font=Math.round(.03*v.width).toString()+"px impact",c.strokeText("Cursor Keys or WASD to move.",v.width/2,v.height/2),c.fillText("Cursor Keys or WASD to move.",v.width/2,v.height/2),c.strokeText("Space key to fire",v.width/2,.6*v.height),c.fillText("Space key to fire",v.width/2,.6*v.height),c.font=Math.round(.05*v.width).toString()+"px impact",c.strokeText("Press fire to play",v.width/2,.8*v.height),c.fillText("Press fire to play",v.width/2,.8*v.height),ctrl.f&&(ctrl.stage=1,ctrl.gr=1,ctrl.grt=t.s+1250,pl.x=v.width/2,pl.y=.92*v.height,pl.wp.g=1,pl.wp.s=0,pl.wp.sh=0,ctrl.sc=0,pl.ph.f=!0,pl.ph.t=t.s+6e3,pl.ph.fl=1,pl.ph.ft=t.s+50)):1==ctrl.stage?(c.fillStyle="rgba(255,255,255,"+ctrl.gr.toString()+")",c.textAlign="center",c.font=.2*v.width+"px impact",c.fillText("GET READY",v.width/2,v.height/2),t.s>ctrl.grt&&(ctrl.gr-=.001*t.d),ctrl.gr<0&&(ctrl.stage=2)):3==ctrl.stage?(c.fillStyle="#fff",c.textAlign="center",c.font=.2*v.width*ctrl.go+"px impact",c.fillText("GAME OVER",v.width/2,v.height/2),ctrl.go+=.001*t.d,ctrl.go>1&&(ctrl.stage=4,ctrl.go=t.s+1250)):4==ctrl.stage?(c.fillStyle="#fff",c.textAlign="center",c.font=.2*v.width+"px impact",c.fillText("GAME OVER",v.width/2,v.height/2),t.s>ctrl.go&&(ctrl.stage=5,ctrl.go=1)):5==ctrl.stage&&(c.fillStyle="#fff",c.textAlign="center",c.font=.2*v.width*ctrl.go+"px impact",c.fillText("GAME OVER",v.width/2,v.height/2),ctrl.go-=5e-4*t.d,ctrl.go<0&&(ctrl.stage=0)),window.requestAnimationFrame(S)}function $a(h,s){this.s=Math.round(20*Math.random()),this.pw=this.s,this.s<5&&(this.s=5),this.x=v.width*Math.random(),this.y=0-A(this.s)/2,this.a=360*Math.random(),this.rs=.0025*(25-this.s),this.yv=.0125*(25-this.s),Math.random()>.5&&(this.rs*=-1),this.af=0,this.id=0,this.p=[{b:"#594231",f:"#836049",l:[[270,50,300,50,340,50,350,50,20,50,70,50,100,50,140,48,190,50,230,50,270,50]]},{b:"#997055",f:"#997055",l:[[270,43,300,40,340,42,350,40,20,40,70,43,100,40,140,40,190,42,230,40,270,43]]},{b:"#836049",f:"#836049",l:[[225,25,270,25,295,25,310,25,310,14,270,5,250,5,220,15,225,20]]},{b:"#836049",f:"#836049",l:[[180,35,185,32,180,28,175,34,180,35]]},{b:"#836049",f:"#836049",l:[[70,15,100,15,110,10,69,5]]}],this.cl={c:[0,0,47]},this.h=function(h){return this.s<6?(E(this.x,this.y,this.s,h),!0):(this.s--,this.id=t.s+75,!1)},this.u=function(){var h=!1;return this.a+=this.rs*t.d,this.y+=t.d*this.yv,B(this),this.y>A(this.s)/2+v.height&&(h=!0),2==ctrl.stage&&0==pl.ph.f&&F(pl,this)&&(h=this.h(!1),pl.h()),h}}function $b(h,i,c){this.s=5,this.x=h,this.y=0-v.height*i/100-A(s)/2,this.v=.15+.1*Math.random(),this.a=90,this.rv=0,this.af=0,this.p=[{b:cols[c].b,f:cols[c].f,l:[[0,10,50,35,110,42,170,42,190,42,240,42,310,35]]},{f:cols[c].b,l:[[0,5,50,15,90,20,130,35,150,35,200,35,230,35,270,20,310,15]]},{b:"#7f8c8d",f:"#95a5a6",l:[[45,37,50,48,120,45,170,45,190,45,240,45,310,48,315,37,240,35,190,35,80,35,120,35]]},{b:"#7f8c8d",f:"#95a5a6",l:[[350,20,10,20,145,35,170,48,190,48,215,35]]},{f:"#bdc3c7",l:[[50,48,50,45,120,40,170,35,170,45,1200,45]]},{f:"#bdc3c7",l:[[310,48,310,45,240,40,100,35,190,45,240,45]]},{b:"#7f8c8d",f:"#95a5a6",l:[[350,20,10,20,145,35,170,48,190,48,215,35]]},{f:"#bdc3c7",l:[[350,10,10,10,153,28,170,42,190,42,207,28]]},{b:"#2c3e50",f:"#34495e",l:[[348,3,0,3.25,12,3,160,12,180,13,200,12]]}],this.cl={c:[0,-12,35]},this.h=function(t){return E(this.x,this.y,this.s,t),!0},this.u=function(){var h=!1,s=pl.y-this.y,i=Math.sqrt(Math.pow(pl.x-this.x,2)+Math.pow(pl.y-this.y,2)),c=180*Math.acos(s/i)/Math.PI;return pl.x>this.x?(this.a-=.1*t.d,this.a<90-c&&(this.a=90-c)):(this.a+=.1*t.d,this.a>90+c&&(this.a=90+c)),this.a<50&&(this.a=50),this.a>130&&(this.a=130),this.x+=Math.cos(this.a*Math.PI/180)*this.v*t.d,this.y+=Math.sin(this.a*Math.PI/180)*this.v*t.d,B(this),this.y>A(this.s)/2+v.height&&(h=!0),2==ctrl.stage&&0==pl.ph.f&&F(pl,this)&&(h=this.h(!1),pl.h()),h}}function $c(h,s){var i=8*v.width/100,c=8*v.height/100,l=v.width/v.height;this.cf=s<5?{x:-i,y:-c,xv:.005*l,yv:.005,a:h}:{x:v.width+i,y:-c,xv:-.005*l,yv:.005,a:h},this.s=5,this.x=0,this.y=0,this.a=0,this.rv=0,this.af=0,this.bt=t.s+2e3*Math.random(),this.p=[{b:"688",f:"#9aa",l:[[35,30,15,30,20,48]]},{b:"#688",f:"#9aa",l:[[75,30,45,30,60,48]]},{b:"#688",f:"#9aa",l:[[115,30,85,30,100,48]]},{b:"#688",f:"#9aa",l:[[155,30,125,30,140,48]]},{b:"#688",f:"#9aa",l:[[195,30,165,30,180,48]]},{b:"#688",f:"#9aa",l:[[235,30,205,30,220,48]]},{b:"#688",f:"#9aa",l:[[275,30,245,30,260,48]]},{b:"#688",f:"#9aa",l:[[315,30,285,30,300,48]]},{b:"#688",f:"#9aa",l:[[355,30,325,30,340,48]]},{b:"#688",f:"#9aa",l:[[0,35,15,35,60,35,90,35,120,35,150,35,180,35,210,35,240,35,270,35,300,35,330,35]]},{b:"#688",f:"#9aa",l:[[345,30,15,30,0,50]]},{b:"#688",f:"#9aa",l:[[305,30,335,30,320,50]]},{b:"#688",f:"#9aa",l:[[265,30,295,30,280,50]]},{b:"#688",f:"#9aa",l:[[225,30,255,30,240,50]]},{b:"#688",f:"#9aa",l:[[185,30,215,30,200,50]]},{b:"#688",f:"#9aa",l:[[145,30,175,30,160,50]]},{b:"#688",f:"#9aa",l:[[105,30,135,30,120,50]]},{b:"#688",f:"#9aa",l:[[65,30,95,30,80,50]]},{b:"#688",f:"#9aa",l:[[25,30,55,30,40,50]]},{b:"#688",f:"#eef",a:[[0,0,20,0,6.3]]},{b:"#038",f:"#159",sh:"#222",sb:5,a:[[0,0,10,0,6.3]]},{f:"#38d",a:[[0,0,6,0,6.3]]},{f:"#001",a:[[0,0,4,0,6.3]]}],this.cl={c:[0,0,45]},this.h=function(t){return E(this.x,this.y,this.s,t),!0},this.u=function(){for(var h=!1,s=0;s<9;s++)for(var i=0;i<5;i+=2)this.p[s].l[0][i]+=.1*t.d,this.p[s+10].l[0][i]-=.1*t.d;var c=pl.y-this.y,l=Math.sqrt(Math.pow(pl.x-this.x,2)+Math.pow(pl.y-this.y,2)),a=180*Math.acos(c/l)/Math.PI;for(s=20;s<23;s++)this.p[s].a[0][0]=pl.x>this.x?90-a:90+a,this.p[s].a[0][1]=10;return t.s>this.bt&&(ebs.push(new $i(this.x,this.y)),this.bt=t.s+(3500+4e3*Math.random())-200*(pl.wp.g+pl.wp.s+pl.wp.sh)),this.cf.x+=A(this.cf.xv)*t.d,this.cf.y+=A(this.cf.yv)*t.d,this.cf.a+=.2*t.d,this.x=this.cf.x+150*Math.cos(this.cf.a*Math.PI/180),this.y=this.cf.y+150*Math.sin(this.cf.a*Math.PI/180),B(this),this.y>A(this.s)/2+v.height&&(h=!0),2==ctrl.stage&&0==pl.ph.f&&F(pl,this)&&(h=this.h(!1),pl.h()),h}}function $d(t,h,s){this.s=s,this.x=t,this.y=h,this.yv=.6*s,this.a=0,this.os=A(s)/2,this.p=[{f:"#aab",l:[[200,15,260,40,270,50,280,40,340,15,20,15,80,40,90,50,100,40,160,15]]},{f:"#aab",l:[[110,15,170,40,180,50,190,40,250,15,290,15,350,40,0,50,10,40,70,15]]}],this.u=function(){this.y+=this.yv,this.y>this.os+v.height&&(this.y=0-this.os,this.x=Math.random()*v.width),B(this)}}function $e(h,s,i,c,l){this.s=l,this.x=h,this.y=s,this.yv=c,this.xv=i,this.a=0,this.os=A(l)/2,this.p=[{b:"rgba(20,200,255,0.5)",f:"#aab",lw:.4,sh:"#14c8ff",sb:20,lc:"round",l:[[270,45,90,45]]},{b:"rgba(20,200,255,.5)",f:"#aab",lw:.28,lc:"round",l:[[270,44,90,44]]},{b:"#eef",f:"#aab",lw:.15,lc:"round",l:[[270,43,90,43]]}],this.cl={r:[260,63,22,100]},this.u=function(){var h=!1;this.y+=this.yv*t.d,this.x+=this.xv,this.y<0-this.os&&(h=!0),B(this);for(var s=bds.length-1;s>-1;s--)F(this,bds[s])&&(h=!0,bds[s].h(!0)&&bds.splice(s,1));return h}}function $f(h,s,i){this.x=h,this.y=s,this.s,this.r=0,this.rt=i/5+Math.random()*i/3,this.sh=!1,this.xv=2*(Math.random()-.5),this.yv=-1-Math.random(),this.d=t.s+300*Math.random(),this.u=function(){if(t.s>this.d){var h=!1;this.sh?(this.r-=.075,this.x+=this.xv,this.y+=this.yv,this.r<0&&(this.r=0,h=!0)):(this.r+=.3,this.r>this.rt&&(this.r=this.rt,this.sh+=!0));var s=A(this.r);return c.beginPath(),c.strokeStyle="#aaa",c.fillStyle="#eef",c.lineWidth=10*A(this.rt)/100,c.arc(this.x,this.y,s,0,6.28),c.closePath(),c.stroke(),c.fill(),h}}}function $g(h,s,i){this.x=h,this.y=s,this.yv=-.18,this.tw=i,this.c=1==i?"#59c":2==i?"#5c5":"#b95",this.s=3,this.r=50,this.rv=-.05,this.cl={c:[0,0,50]},this.h=function(){var t="",h="";switch(this.tw){case 1:pl.wp.g>4?(pl.wp.g--,t="Guns Down!",h="255,0,0"):(pl.wp.g++,t="Guns Up!",h="85,153,204");break;case 2:pl.wp.s>4?(pl.wp.s--,t="Speed Down!",h="255,0,0"):(pl.wp.s++,t="Speed Up!",h="85,204,85");break;default:pl.wp.sh>4?(pl.wp.sh--,t="Shields Down!",h="255,0,0"):(pl.wp.sh++,t="Shields Up!",h="187,153,85")}blb.push(new $h(t,h))},this.u=function(){var h=A(this.s),s=!1;return c.beginPath(),c.fillStyle=this.c,c.shadowColor=this.c,c.shadowBlur=20,c.arc(this.x,this.y,this.r*h/100,0,6.28),c.closePath(),c.fill(),this.r+=this.rv*t.d,this.r<30?(this.r=30,this.rv*=-1):this.r>50&&(this.r=50,this.rv*=-1),this.y-=h*this.yv*t.d/100,this.y>v.height+h/2&&(s=!0),F(pl,this)&&(s=!0,this.h()),s}}function $h(h,i){return this.m=h,this.c=i,this.a=1,this.s=30,this.ms=.08*v.width,this.sv=1e-4*v.width,this.u=function(){if(this.s+=this.sv*t.d,this.s>this.ms&&(this.a-=.001*t.d),this.a<0)return!0;c.fillStyle="rgba("+this.c+","+this.a.toString()+")",c.shadowColor=c.fillStyle,c.shadowBlur=.25*s,c.font=Math.round(this.s).toString()+"px impact",c.textAlign="center",c.fillText(this.m,v.width/2,v.height/2)},!1}function $i(h,s){this.s=1,this.x=h,this.y=s;var i=Math.abs(pl.y-s),c=Math.sqrt(Math.pow(pl.x-h,2)+Math.pow(pl.y-s,2)),l=180*Math.acos(i/c)/Math.PI;l=h<pl.x?90-l:90+l,this.xv=.35*Math.cos(.01745*l),this.yv=.35*Math.sin(.01745*l),this.a=90,this.os=A(this.s)/2,this.af=0,this.p=[{b:"#a00",f:"#e00",a:[[0,0,50,0,6.3]]},{b:"#caa",f:"#fee",a:[[0,0,25,0,6.3]]}],this.cl={c:[0,0,20]},this.u=function(){return this.x+=this.xv*t.d,this.y+=this.yv*t.d,this.y>this.os+v.height||this.y<0-this.os||this.x<0-this.os||this.x>v.width+this.os||(B(this),!(2!=ctrl.stage||0!=pl.ph.f||!F(pl,this))&&(pl.h(),!0))}}function $j(t,h){this.s=4,this.x=Math.random()*v.width,this.y=0-v.height*h/100-A(s)/2,this.yv=5+5*Math.random(),this.xv=0,this.a=180,this.af=0,this.p=[{b:cols[t].b,f:cols[t].f,lw:.1,a:[[270,45,20,0,3.15]]},{f:cols[t].b,l:[[320,20,280,45,260,45,220,20]]},{b:"#7f8c8d",f:"#95a5a6",lw:.1,l:[[300,48,350,50,10,50,60,49,120,49,170,50,190,50,240,48,242,15,298,15]]},{b:"#7f8c8d",f:cols[t].b,lw:.02,l:[[242,15,200,28,170,50,120,49,60,49,10,50,340,28,298,15]]},{f:cols[t].f,lw:.02,l:[[242,5,298,5,20,35,60,35,120,35,160,35]]},{b:"#2c3e50",f:"#455a6f",l:[[90,25,110,23,130,15,120,10,60,10,50,15,70,23]]}],this.cl={c:[0,0,45]},this.h=function(t){return E(this.x,this.y,this.s,t),!0},this.u=function(){var t=!1;return this.y+=this.yv,this.y>v.height+A(this.s)&&(t=!0),B(this),this.y>A(this.s)/2+v.height&&(t=!0),2==ctrl.stage&&0==pl.ph.f&&F(pl,this)&&(t=this.h(!1),pl.h()),t}}var v=document.getElementById("c"),c=v.getContext("2d");v.width=window.innerWidth,v.height=window.innerHeight;var t={s:0,d:1},ctrl={l:!1,r:!1,u:!1,d:!1,f:!1,nws:0,sc:0,db:!1,bt:0,bg:600,pt:0,np:2,stage:0,gr:1,grt:0,go:0},cols=[{b:"#16a085",f:"#1abc9c"},{b:"#27ae60",f:"#2ecc71"},{b:"#2980b9",f:"#3498db"},{b:"#8e44ad",f:"#9b59b6"},{b:"#f39c12",f:"#f1c40f"},{b:"#d35400",f:"#e67e22"},{b:"#c0392b",f:"#e74c3c"}],bds=[],shot=new Audio,exp=new Audio;shot=document.getElementById("sh"),exp=document.getElementById("ex"),document.addEventListener("keydown",function(t){var h=t.which;37!=h&&65!=h||(ctrl.l=!0),39!=h&&68!=h||(ctrl.r=!0),38!=h&&87!=h||(ctrl.u=!0),40!=h&&83!=h||(ctrl.d=!0),32==h&&(ctrl.f=!0)}),document.addEventListener("keyup",function(t){var h=t.which;37!=h&&65!=h||(ctrl.l=!1),39!=h&&68!=h||(ctrl.r=!1),38!=h&&87!=h||(ctrl.u=!1),40!=h&&83!=h||(ctrl.d=!1),32==h&&(ctrl.f=!1)}),ac={t:0,g:1500};for(var hud={gi:{s:2,x:.9*v.width,y:.15*v.height,u:function(){var t=A(this.s);c.beginPath(),c.fillStyle="#59c",c.strokeStyle="#fff",c.shadowBlur=0,c.lineWidth=8*t/100,c.moveTo(this.x+48*t/100,this.y+12*t/100),c.quadraticCurveTo(this.x+50*t/100,this.y+10*t/100,this.x+52*t/100,this.y+12*t/100),c.quadraticCurveTo(this.x+70*t/100,this.y+30*t/100,this.x+70*t/100,this.y+70*t/100),c.lineTo(this.x+30*t/100,this.y+70*t/100),c.quadraticCurveTo(this.x+30*t/100,this.y+30*t/100,this.x+48*t/100,this.y+12*t/100),c.moveTo(this.x+70*t/100,this.y+80*t/100),c.lineTo(this.x+70*t/100,this.y+90*t/100),c.lineTo(this.x+30*t/100,this.y+90*t/100),c.lineTo(this.x+30*t/100,this.y+80*t/100),c.closePath(),c.stroke(),c.fill();for(var h=0;h<5;h++)c.beginPath(),c.strokeStyle="#59c",c.shadowColor="#59c",c.rect(this.x+30*t/100+70*t/100*(h+1),this.y+30*t/100,40*t/100,40*t/100),c.shadowBlur=h<pl.wp.g?8:0,h<pl.wp.g&&c.fill(),c.stroke(),c.closePath()}},si:{s:2,x:.9*v.width,y:.21*v.height,u:function(){var t=A(this.s);c.beginPath(),c.strokeStyle="#fff",c.lineWidth=8*t/100,c.fillStyle="#5c5",c.shadowBlur=0,c.moveTo(this.x+68*t/100,this.y),c.lineTo(this.x+30*t/100,this.y+44*t/100),c.lineTo(this.x+51*t/100,this.y+57*t/100),c.lineTo(this.x+20*t/100,this.y+t),c.lineTo(this.x+80*t/100,this.y+50*t/100),c.lineTo(this.x+57*t/100,this.y+38*t/100),c.closePath(),c.stroke(),c.fill();for(var h=0;h<5;h++)c.beginPath(),c.strokeStyle="#5c5",c.shadowColor="#5c5",c.rect(this.x+30*t/100+70*t/100*(h+1),this.y+30*t/100,40*t/100,40*t/100),c.shadowBlur=h<pl.wp.s?8:0,h<pl.wp.s&&c.fill(),c.stroke(),c.closePath()}},shi:{s:2,x:.9*v.width,y:.27*v.height,u:function(){var t=A(this.s);c.beginPath(),c.strokeStyle="#fff",c.lineWidth=8*t/100,c.fillStyle="#b95",c.shadowBlur=0,c.moveTo(this.x+50*t/100,this.y+10*t/100),c.quadraticCurveTo(this.x+64*t/100,this.y+20*t/100,this.x+83*t/100,this.y+26*t/100),c.lineTo(this.x+83*t/100,this.y+37*t/100),c.quadraticCurveTo(this.x+71*t/100,this.y+69*t/100,this.x+50*t/100,this.y+89*t/100),c.quadraticCurveTo(this.x+29*t/100,this.y+69*t/100,this.x+17*t/100,this.y+37*t/100),c.lineTo(this.x+17*t/100,this.y+26*t/100),c.quadraticCurveTo(this.x+36*t/100,this.y+20*t/100,this.x+50*t/100,this.y+10*t/100),c.closePath(),c.stroke(),c.fill();for(var h=0;h<5;h++)c.beginPath(),c.strokeStyle="#b95",c.shadowColor="#b95",c.rect(this.x+30*t/100+70*t/100*(h+1),this.y+30*t/100,40*t/100,40*t/100),c.shadowBlur=h<pl.wp.sh?8:0,h<pl.wp.sh&&c.fill(),c.stroke(),c.closePath()}},scr:{s:4,u:function(){var t=A(this.s);c.fillStyle="#f00",c.shadowColor="#f00",c.shadowBlur=.05*t,c.font=Math.round(t).toString()+"px impact",c.textAlign="right",c.fillText("Score: "+ctrl.sc,v.width-20,20+t)}}},pl={x:v.width/2,y:.92*v.height,a:0,s:8,af:0,bsp:[{a:270,h:54},{a:208,h:50},{a:332,h:50}],wp:{g:1,s:0,sh:0},ph:{f:!0,t:0,fl:1,ft:0},bts:[],p:[{b:"#2980b9",f:"#3498db",l:[[270,20,350,40,25,35,90,8,155,35,190,40,270,20]]},{b:"#7f8c8d",f:"#bdc3c7",l:[[348,42,350,45,27,42,26,35]]},{b:"#7f8c8d",f:"#bdc3c7",l:[[192,42,190,45,153,42,154,35]]},{b:"#7f8c8d",f:"#bdc3c7",l:[[267,40,273,40,15,25,75,25,105,25,165,25,267,40]]},{b:"#cdd3d7",f:"#cdd3d7",l:[[267,30,273,30,15,15,75,15,105,15,165,15,267,30]]},{b:"#2c3e50",f:"#455a6f",l:[[270,16,280,15,16,7,90,5,164,7,260,15]]}],cl:{r:[265,40,8,30,190,46,90,30]},e:function(){var t=this.x,h=this.y,s=A(this.s*(.03*Math.random()+.2)),i=s+2.5*pl.wp.s;c.beginPath(),c.fillStyle="#6ce",c.lineWidth=1,c.shadowColor="#6ce",c.shadowBlur=20,c.moveTo(t,h+.75*s),c.quadraticCurveTo(t+.6*i,h+1.5*i,t,h+2*i),c.quadraticCurveTo(t-.6*i,h+1.5*i,t,h+.75*s),c.closePath(),c.fill(),c.beginPath(),c.fillStyle="#eef",c.lineWidth=1,c.shadowColor="#eef",c.shadowBlur=20,c.moveTo(t,h+s),c.quadraticCurveTo(t+.25*i,h+1.4*i,t,h+1.8*i),c.quadraticCurveTo(t-.25*i,h+1.4*i,t,h+s),c.closePath(),c.fill()},h:function(){pl.wp.sh--,pl.ph.f=!0,pl.ph.t=t.s+1200,pl.wp.sh<0&&(pl.wp.sh=0,ctrl.stage=3,ctrl.go=0,E(this.x,this.y,2*this.s,!1))},sh:function(){var t=A(this.s),h=this.x,s=this.y;c.fillStyle="rgba(187,153,85,"+pl.wp.sh*.1.toString()+")",c.shadowColor="b95",c.shadowBlur=.15*t,c.lineWidth=.2*t,c.beginPath(),c.moveTo(h-.05*t,s-.5*t),c.quadraticCurveTo(h,s-.55*t,h+.05*t,s-.5*t),c.quadraticCurveTo(h+.15*t,s-.15*t,h+.5*t,s-.15*t),c.quadraticCurveTo(h+.6*t,s,h+.45*t,s+.25*t),c.quadraticCurveTo(h+.2*t,s+.3*t,h+.05*t,s+.45*t),c.lineTo(h-.05*t,s+.45*t),c.quadraticCurveTo(h-.2*t,s+.3*t,h-.45*t,s+.25*t),c.quadraticCurveTo(h-.6*t,s,h-.5*t,s-.15*t),c.quadraticCurveTo(h-.15*t,s-.15*t,h-.05*t,s-.5*t),c.closePath(),c.fill()},u:function(){var h=A(this.s);if(pl.ph.f&&(t.s>pl.ph.t&&(pl.ph.f=!1),t.s>pl.ph.ft&&(pl.ph.fl*=-1,pl.ph.ft=t.s+50)),ctrl.l?(this.x-=(.2+.1*pl.wp.s)*t.d,this.x<0&&(this.x=0)):ctrl.r&&(this.x+=(.2+.1*pl.wp.s)*t.d,this.x>v.width+h/2&&(this.x=v.width+h/2)),ctrl.u?(this.y-=(.2+.1*pl.wp.s)*t.d,this.y<h/2&&(this.y=h/2)):ctrl.d&&(this.y+=(.2+.1*pl.wp.s)*t.d,this.y>v.height-h/2&&(this.y=v.height-h/2)),ctrl.f&&t.s>ctrl.bt){ctrl.bt=t.s+ctrl.bg*(1-.1*pl.wp.g);var s=0;shts=pl.wp.g,shts>3&&(shts=3);for(var i=0;i<shts;i++)s=A(pl.s)*pl.bsp[i].h/100,pl.bts.push(new $e(pl.x+Math.cos(.01745*pl.bsp[i].a)*s,pl.y+Math.sin(.01745*pl.bsp[i].a)*s,0,-.85,1.5));G(shot)}this.e(),pl.ph.f?1===pl.ph.fl&&B(pl):B(pl),this.wp.sh>=0&&this.sh()}},sf=[],yr=v.height/8,x=0;x<3;x++){sf[x]=[];for(var y=0;y<8;y++)sf[x].push(new $d(Math.random()*v.width,y*yr,.5*(x+1)))}var ptc=[],pkp=[],blb=[],ebs=[];window.requestAnimationFrame(S);