!function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i){const e=function(t){return"i"==t?[[0,1,0],[1,1,1],[0,1,0],[1,0,1]]:"ii"==t?[[1,0,1],[0,1,0],[1,1,1],[0,1,0]]:"iii"==t?[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0]]:void 0},o=document.getElementById("canvas"),n=o.getContext("2d"),r=window.innerWidth,s=window.innerHeight,a=window.devicePixelRatio/["webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio"].reduce((function(t,i){return Object.prototype.hasOwnProperty.call(n,i)?n[i]:1}));o.width=Math.round(r*a),o.height=Math.round(s*a),o.style.width=r+"px",o.style.height=s+"px",n.setTransform(a,0,0,a,0,0);const h={m:0,s:0},l=function(t,i){this.x=t||0,this.y=i||0};l.prototype.add=function(t){this.x+=t.x,this.y+=t.y};const c=function(t,i,o,n){this.fixture=e("i"),this.position=new l(t,i),this.velocity=new l(o,n),this.score=0,this.update=function(){},this.render=function(){u(this.fixture,this.position)}},f=function(t,i,o,n){this.fixture=e("ii"),this.position=new l(3*"0123"[4*Math.random()|0],i),this.velocity=new l(o,n),this.update=function(){this.position.add(this.velocity);const t=e("ii");this.position.y>16&&(this.fixture=t.splice(0,-1*(Math.floor(this.position.y-12-4)-4)-1)),this.position.y>20&&(f1.player.score++,this.position.y=0,this.position.x=3*"0123"[4*Math.random()|0],this.fixture=e("ii"))},this.render=function(){u(this.fixture,this.position)}};function u(t,i){t.forEach((t,e)=>{t.forEach((t,o)=>{0!==t?(n.beginPath(),n.fillStyle="rgba(67,77,67, 0.75)",n.fillRect(o+i.x,e+i.y,1,1),n.closePath()):(n.beginPath(),n.fillStyle="rgba(67,77,67, 0.01)",n.fillRect(o+i.x,e+i.y,1,1),n.closePath())})})}const p=function(){this.map=e("iii"),this.entities=[],this.player=this.addEntity(new c(4,16)),this.highscore=0,document.addEventListener("touchmove",t=>{const{player:i}=this,{clientX:e,clientY:o}=t.touches[0],n=e,a=o,h=20*i.position.x+r/4,l=20*i.position.y+s/6-a,c=h-n;Math.abs(l)>Math.abs(c)||(i.position.x+=c>0?i.position.x<=0?0:-1:i.position.x>=9?0:1)}),document.addEventListener("keydown",t=>{37===t.keyCode?c.position.x+=c.position.x<=0?0:-1:39===t.keyCode&&(c.position.x+=c.position.x>=9?0:1)});const t=()=>{this.update(),this.render(),h.s+=1/60,60==h.s&&(h.m++,h.s-=60),requestAnimationFrame(t)};t()};p.prototype.addEntity=function(t){return this.entities.push(t),t},p.prototype.removeEntity=function(t){return this.entities=this.entities.filter(i=>i!==t)},p.prototype.update=function(){const t=this.entities.filter(t=>t!==this.player);t.length<2&&this.addEntity(new f(0,0,0,.3*Math.random()/2+.1));let i=new e("iii");t.map(t=>function(t,i){i.fixture.forEach((e,o)=>{e.forEach((e,n)=>{0!==e&&(t[o+Math.floor(i.position.y)][n+Math.floor(i.position.x)]=e)})})}(i,t));(function(t,i){const e=i.fixture,o=i.position;for(let i=0;i<e.length;++i)for(let n=0;n<e[i].length;++n)if(0!==e[i][n]&&0!==(t[i+o.y]&&t[i+o.y][n+o.x]))return!0;return!1})(i,this.player)&&(navigator.vibrate&&navigator.vibrate([100,10,100]),this.highscore=Math.max(this.player.score,this.highscore),this.player.score=0,t.map(t=>this.removeEntity(t))),this.entities.map(t=>t.update())},p.prototype.render=function(){n.fillStyle="#acbeac",n.fillRect(0,0,o.width,o.height),n.save(),n.beginPath(),n.font="0.80em",n.fillStyle="rgba(67,77,67, 1)",n.fillText("Hi-score: "+this.highscore,5,s/6+9),n.fillText("Score: "+this.player.score,5,s/6+27),n.fillText("Time: "+Math.floor(h.m)+":"+(Math.floor(h.s)>9?Math.floor(h.s):"0"+Math.floor(h.s)),5,s/6+9+36),n.closePath(),n.restore(),n.save();const t=r/2/12;n.translate(r/4,s/6),n.scale(t,t),n.strokeStyle="rgba(67,77,67, 1)",n.lineWidth=.0625,n.strokeRect(0,0,12,20),n.lineWidth=1,u(this.map,{x:0,y:0}),this.entities.map(t=>t.render()),n.restore()},window.onload=()=>f1=new p}]);