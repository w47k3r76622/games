!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);let s,h,n={};function r(t,...i){n[t]&&n[t].map(t=>t(...i))}function a(){return s}function o(){return h}function l(t){if(s=document.getElementById(t)||t||document.querySelector("canvas"),!s)throw Error("You must provide a canvas element for the game");return h=s.getContext("2d"),h.imageSmoothingEnabled=!1,r("init"),{canvas:s,context:h}}class c{constructor({spriteSheet:t,frames:i,frameRate:e,loop:s=!0}={}){this.spriteSheet=t,this.frames=i,this.frameRate=e,this.loop=s;let{width:h,height:n,margin:r=0}=t.frame;this.width=h,this.height=n,this.margin=r,this._f=0,this._a=0}clone(){return d(this)}reset(){this._f=0,this._a=0}update(t=1/60){if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render({x:t,y:i,width:e=this.width,height:s=this.height,context:h=o()}={}){let n=this.frames[this._f]/this.spriteSheet._f|0,r=this.frames[this._f]%this.spriteSheet._f|0;h.drawImage(this.spriteSheet.image,r*this.width+(2*r+1)*this.margin,n*this.height+(2*n+1)*this.margin,this.width,this.height,t,i,e,s)}}function d(t){return new c(t)}d.prototype=c.prototype,d.class=c;new WeakMap;const x=()=>{};function y(){let t=a();o().clearRect(0,0,t.width,t.height)}function f({fps:t=60,clearCanvas:i=!0,update:e,render:s}={}){if(!e||!s)throw Error("You must provide update() and render() functions");let h,n,a,o,l,c=0,d=1e3/t,f=1/t,m=i?y:x;function u(){if(n=requestAnimationFrame(u),a=performance.now(),o=a-h,h=a,!(o>1e3)){for(r("tick"),c+=o;c>=d;)l.update(f),c-=d;m(),l.render()}}return l={update:e,render:s,isStopped:!0,start(){h=performance.now(),this.isStopped=!1,requestAnimationFrame(u)},stop(){this.isStopped=!0,cancelAnimationFrame(n)},_frame:u,set _last(t){h=t}},l}let m={},u={},g={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down",13:"enter",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"};function p(t){let i=g[t.code||t.which];u[i]=!0,m[i]&&m[i](t)}function w(t){u[g[t.code||t.which]]=!1}function b(){u={}}function _(){let t;for(t=0;t<26;t++)g[t+65]=g["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)g[48+t]=g["Digit"+t]=""+t;window.addEventListener("keydown",p),window.addEventListener("keyup",w),window.addEventListener("blur",b)}function F(t){return!!u[t]}class v{constructor({create:t,maxSize:i=1024}={}){let e;if(!t||!(e=t())||!(e.update&&e.init&&e.isAlive))throw Error("Must provide create() function which returns an object with init(), update(), and isAlive() functions");this._c=t,this.objects=[t()],this.size=0,this.maxSize=i}get(t={}){if(this.size===this.objects.length){if(this.size===this.maxSize)return;for(let t=0;t<this.size&&this.objects.length<this.maxSize;t++)this.objects.push(this._c())}let i=this.objects[this.size];return this.size++,i.init(t),i}getAliveObjects(){return this.objects.slice(0,this.size)}clear(){this.size=this.objects.length=0,this.objects.push(this._c())}update(t){let i,e=!1;for(let s=this.size;s--;)i=this.objects[s],i.update(t),i.isAlive()||(e=!0,this.size--);e&&this.objects.sort((t,i)=>i.isAlive()-t.isAlive())}render(){for(let t=this.size;t--;)this.objects[t].render()}}function k(t){return new v(t)}function A(t,i){let e=[],s=i.x+i.width/2,h=i.y+i.height/2,n=t.y<h&&t.y+t.height>=i.y,r=t.y+t.height>=h&&t.y<i.y+i.height;return t.x<s&&t.x+t.width>=i.x&&(n&&e.push(0),r&&e.push(2)),t.x+t.width>=s&&t.x<i.x+i.width&&(n&&e.push(1),r&&e.push(3)),e}k.prototype=v.prototype,k.class=v;class S{constructor({maxDepth:t=3,maxObjects:i=25,bounds:e}={}){this.maxDepth=t,this.maxObjects=i;let s=a();this.bounds=e||{x:0,y:0,width:s.width,height:s.height},this._b=!1,this._d=0,this._o=[],this._s=[],this._p=null}clear(){this._s.map((function(t){t.clear()})),this._b=!1,this._o.length=0}get(t){let i,e,s=new Set;for(;this._s.length&&this._b;){for(i=A(t,this.bounds),e=0;e<i.length;e++)this._s[i[e]].get(t).forEach(t=>s.add(t));return Array.from(s)}return this._o.filter(i=>i!==t)}add(){let t,i,e,s;for(i=0;i<arguments.length;i++)if(e=arguments[i],Array.isArray(e))this.add.apply(this,e);else if(this._b)this._a(e);else if(this._o.push(e),this._o.length>this.maxObjects&&this._d<this.maxDepth){for(this._sp(),t=0;s=this._o[t];t++)this._a(s);this._o.length=0}}_a(t,i,e){for(i=A(t,this.bounds),e=0;e<i.length;e++)this._s[i[e]].add(t)}_sp(t,i,e){if(this._b=!0,!this._s.length)for(t=this.bounds.width/2|0,i=this.bounds.height/2|0,e=0;e<4;e++)this._s[e]=R({bounds:{x:this.bounds.x+(e%2==1?t:0),y:this.bounds.y+(e>=2?i:0),width:t,height:i},maxDepth:this.maxDepth,maxObjects:this.maxObjects}),this._s[e]._d=this._d+1,this._s[e]._p=this}}function R(t){return new S(t)}R.prototype=S.prototype,R.class=S;class P{constructor(t=0,i=0){this._x=t,this._y=i}add(t,i=1){return M(this.x+(t.x||0)*i,this.y+(t.y||0)*i,this)}clamp(t,i,e,s){this._c=!0,this._a=t,this._b=i,this._d=e,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}function M(t,i,e={}){let s=new P(t,i);return e._c&&(s.clamp(e._a,e._b,e._d,e._e),s.x=t,s.y=i),s}M.prototype=P.prototype,M.class=P;class j{constructor(t){this.init(t)}init(t={}){let{x:i,y:e,dx:s,dy:h,ddx:n,ddy:r,width:a,height:l,image:c}=t;this.position=M(i,e),this.velocity=M(s,h),this.acceleration=M(n,r),this._fx=this._fy=1,this.width=this.height=this.rotation=0,this.ttl=1/0,this.anchor={x:0,y:0},this.context=o();for(let i in t)this[i]=t[i];c&&(this.width=void 0!==a?a:c.width,this.height=void 0!==l?l:c.height),this.sx=0,this.sy=0}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}get animations(){return this._a}get viewX(){return this.x-this.sx}get viewY(){return this.y-this.sy}get width(){return this._w}get height(){return this._h}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}set animations(t){let i,e;for(i in this._a={},t)this._a[i]=t[i].clone(),e=e||this._a[i];this.currentAnimation=e,this.width=this.width||e.width,this.height=this.height||e.height}set viewX(t){}set viewY(t){}set width(t){let i=t<0?-1:1;this._fx=i,this._w=t*i}set height(t){let i=t<0?-1:1;this._fy=i,this._h=t*i}isAlive(){return this.ttl>0}collidesWith(t){if(this.rotation||t.rotation)return null;let i=this.x-this.width*this.anchor.x,e=this.y-this.height*this.anchor.y,s=t.x,h=t.y;return t.anchor&&(s-=t.width*t.anchor.x,h-=t.height*t.anchor.y),i<s+t.width&&i+this.width>s&&e<h+t.height&&e+this.height>h}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){this.velocity=this.velocity.add(this.acceleration,t),this.position=this.position.add(this.velocity,t),this.ttl--,this.currentAnimation&&this.currentAnimation.update(t)}draw(){let t=-this.width*this.anchor.x,i=-this.height*this.anchor.y;if(this.context.save(),this.context.translate(this.viewX,this.viewY),this.rotation&&this.context.rotate(this.rotation),-1==this._fx||-1==this._fy){let e=this.width/2+t,s=this.height/2+i;this.context.translate(e,s),this.context.scale(this._fx,this._fy),this.context.translate(-e,-s)}this.image?this.context.drawImage(this.image,0,0,this.image.width,this.image.height,t,i,this.width,this.height):this.currentAnimation?this.currentAnimation.render({x:t,y:i,width:this.width,height:this.height,context:this.context}):(this.context.fillStyle=this.color,this.context.fillRect(t,i,this.width,this.height)),this.context.restore()}}function I(t){return new j(t)}function E(t){if(+t===t)return t;let i=[],e=t.split(".."),s=+e[0],h=+e[1],n=s;if(s<h)for(;n<=h;n++)i.push(n);else for(;n>=h;n--)i.push(n);return i}I.prototype=j.prototype,I.class=j;class z{constructor({image:t,frameWidth:i,frameHeight:e,frameMargin:s,animations:h}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:i,height:e,margin:s},this._f=t.width/i|0,this.createAnimations(h)}createAnimations(t){let i,e;for(e in t){let{frames:s,frameRate:h,loop:n}=t[e];if(i=[],void 0===s)throw Error("Animation "+e+" must provide a frames property");[].concat(s).map(t=>{i=i.concat(E(t))}),this.animations[e]=d({spriteSheet:this,frames:i,frameRate:h,loop:n})}}}function W(t){return new z(t)}W.prototype=z.prototype,W.class=z;let{canvas:O,context:C}=l(),Y=new Image;Y.src="assets/pattern-min.png";let D=new Image;D.src="assets/portrait_base-min.png";let B=new Image;B.src="assets/portrait_good-min.png";let L=new Image;L.src="assets/portrait_regular-min.png";let T=new Image;T.src="assets/portrait_bad-min.png";let H,q=new Image;q.src="assets/charv2-min.png",q.onload=function(){H=W({image:q,frameWidth:32,frameHeight:40,animations:{wait:{frames:[0,0,0,1],loop:!0,frameRate:8},walk:{frames:[2,3],frameRate:8}}})};let V,X=new Image;X.src="assets/life-min.png",X.onload=function(){V=W({image:X,frameWidth:16,frameHeight:16,animations:{wait:{frames:[0,0,0,1],loop:!0,frameRate:8}}})};let $,N=new Image;N.src="assets/404-min.png",N.onload=function(){$=W({image:N,frameWidth:100,frameHeight:64,animations:{wait:{frames:[0,0,0,1],loop:!0,frameRate:8}}})};let K,U=new Image;U.src="assets/bad3-min.png",U.onload=function(){K=W({image:U,frameWidth:32,frameHeight:32,animations:{walk:{frames:[0,0,0,1],frameRate:8}}})};let G,J=new Image;J.src="assets/bad2-min.png",J.onload=function(){G=W({image:J,frameWidth:32,frameHeight:32,animations:{walk:{frames:[0,0,0,1],frameRate:8}}})};let Q,Z=new Image;Z.src="assets/bad4-min.png",Z.onload=function(){Q=W({image:Z,frameWidth:32,frameHeight:32,animations:{walk:{frames:[0,0,0,1],frameRate:8}}})};let tt,it=new Image;it.src="assets/locks-min.png",it.onload=function(){tt=W({image:it,frameWidth:32,frameHeight:32,animations:{lock:{frames:[0,0,0,1],frameRate:8},open:{frames:[2,2,2,3],frameRate:8}}})};let et=t=>{let i;switch(t){case 1:i=K.animations;break;case 2:i=G.animations;break;case 3:i=Q.animations;break;case 4:i=$.animations}return i};class st extends I.class{constructor(t){super({x:380,y:440,defx:0,defy:-1,inmun:0,width:32,height:40,anchor:{x:0,y:0},animations:H.animations,bulletsRef:t.bulletsRef,walls:t.walls,enemies:t.enemies,face:t.face,health:t.health})}update(t){if(this.dx=0,this.dy=0,F("up")&&(this.dy=-3),F("down")&&(this.dy=3),F("left")&&(this.dx=-3,this._fx=1),F("right")&&(this.dx=3,this._fx=-1),0!=this.dx||0!=this.dy?(this.defx=0!=this.dx?Math.abs(this.dx)/this.dx:0,this.defy=0!=this.dy?Math.abs(this.dy)/this.dy:0,this.playAnimation("walk")):this.playAnimation("wait"),F("space")&&!this.bulletsRef.length){let t=this.x+this.width/2,i=this.y+this.height/2;this.bulletsRef.push(new I({x:t,y:i,dx:3.2*this.defx,dy:3.2*this.defy,color:"#ff1500",radius:10,time:.5,render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()},update:function(t){this.time-=t,this.advance()}}))}for(let t of this.walls.filter(t=>this.collidesWith(t))){let i=this.y>t.y,e=this.y+this.height<=t.y+t.height,s=t.x===this.x+this.width||t.x>this.x+this.width-10,h=t.x+t.width===this.x||t.x+t.width-10<this.x;if(s&&(i||e)){this.x=t.x-this.width,this.dx=0;break}if(h&&(i||e)){this.x=t.x+t.width,this.dx=0;break}if(i){this.y=t.y+t.height,this.dy=0;break}this.y=t.y-this.height,this.dy=0;break}this.enemies.filter(t=>this.collidesWith(t)).length&&this.inmun<=0&&(this.inmun=1,this.width=this.width/1.5,this.height=this.height/1.5,this.face.shift(),this.health.shift()),this.inmun>=0&&(this.inmun-=t),this.advance()}}class ht extends I.class{constructor(t){super({x:t.x,y:t.y,width:4==t.type?100:32,height:4==t.type?64:32,anchor:{x:0,y:0},customType:t.type,playerRef:t.player,walls:t.walls,bulletsRef:t.bulletsRef,animations:et(t.type),dx:4==t.type?2:2==t.type?-2:0,dy:2==t.type?-2:0,health:4==t.type?10:2,inmun:0,live:!0})}update(t){let i=this.playerRef.x-this.x,e=this.playerRef.y-this.y;switch(this.customType){case 1:this.dx=0,this.dy=0,this.x+3>this.playerRef.x&&this.x-3<this.playerRef.x?this.dy=e/Math.abs(e)*2:this.dx=i/Math.abs(i)*2;break;case 2:for(let t of this.walls.filter(t=>this.collidesWith(t))){let i=this.y>t.y,e=this.y+this.height<=t.y+t.height,s=t.x===this.x+this.width||t.x>this.x+this.width-10,h=t.x+t.width===this.x||t.x+t.width-10<this.x;if(s&&(i||e)){this.x=t.x-this.width,this.dx=-2;break}if(h&&(i||e)){this.x=t.x+t.width,this.dx=2;break}if(i){this.y=t.y+t.height,this.dy=2;break}this.y=t.y-this.height,this.dy=-2;break}break;case 3:this.dx=0!=i?i/Math.abs(i)+(0==e?i/Math.abs(i):0):0,this.dy=0!=e?e/Math.abs(e)+(0==i?e/Math.abs(e):0):0;break;case 4:this.dy=0;for(let t of this.walls.filter(t=>this.collidesWith(t))){let i=this.y>t.y,e=this.y+this.height<=t.y+t.height,s=t.x===this.x+this.width||t.x>this.x+this.width-10,h=t.x+t.width===this.x||t.x+t.width-10<this.x;if(s&&(i||e)){this.x=t.x-this.width,this.dx=-3;break}if(h&&(i||e)){this.x=t.x+t.width,this.dx=3;break}}}this.bulletsRef.filter(t=>this.collidesWith(t)).length&&this.inmun<=0&&(this.inmun=.3,this.health-=1,this.width=this.width*(4!=this.customType?.7:.9),this.height=this.height*(4!=this.customType?.7:.9)),this.inmun>=0&&(this.inmun-=t,this.dx=-1*this.dx,this.dy=-1*this.dy),this.health<=0&&(this.live=!1),this.advance()}}const nt=()=>[I({x:0,y:0,color:"#DCDCDC",width:800,height:600,anchor:{x:0,y:0}}),I({x:0,y:80,color:"#FFFFFF",width:800,height:490,anchor:{x:0,y:0}}),I({x:10,y:50,color:"#FFFFFF",width:720,height:20,anchor:{x:0,y:0}}),I({x:0,y:0,color:"#4682B4",width:800,height:25,anchor:{x:0,y:0}}),I({x:10,y:575,color:"#696969",width:700,height:20,anchor:{x:0,y:0}}),I({x:11,y:576,color:"#F8F8FF",width:698,height:18,anchor:{x:0,y:0}}),I({x:740,y:5,color:"#1E90FF",width:15,height:15,anchor:{x:0,y:0}}),I({x:760,y:5,color:"#1E90FF",width:15,height:15,anchor:{x:0,y:0}}),I({x:780,y:5,color:"#B22222",width:15,height:15,anchor:{x:0,y:0}}),I({x:755,y:35,color:"#FFFFFF",width:40,height:40,anchor:{x:0,y:0}}),I({x:9,y:89,color:"#696969",width:782,height:52,anchor:{x:0,y:0}}),I({x:9,y:139,color:"#696969",width:52,height:422,anchor:{x:0,y:0}}),I({x:9,y:509,color:"#696969",width:782,height:52,anchor:{x:0,y:0}}),I({x:739,y:139,color:"#696969",width:52,height:422,anchor:{x:0,y:0}}),I({x:62,y:142,color:"#e6dfb3",width:676,height:400,anchor:{x:0,y:0}}),I({x:62,y:142,width:676,height:400,anchor:{x:0,y:0},render:function(){let t=C.createPattern(Y,"repeat");this.context.rect(this.x,this.y,this.width,this.height),this.context.fillStyle=t,this.context.fill()}}),I({x:760,y:40,color:"#8B0000",width:32,height:32,anchor:{x:0,y:0},image:D})];class rt extends I.class{constructor(t){super({x:370,y:90,color:"#A9A9A9",width:50,height:50,anchor:{x:0,y:0},animations:tt.animations,enemies:t.enemies,spriteok:t.spriteok,spritebar:t.spritebar,barwidth:698,originalenesize:t.enemies.length})}update(t){this.enemies.length?this.playAnimation("lock"):(this.playAnimation("open"),this.spriteok.color="#45ff01"),this.spritebar.width=this.barwidth/this.originalenesize*(this.originalenesize-this.enemies.length),this.advance()}}const at=()=>new I({x:780,y:585,color:"#FFFF00",radius:10,render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}}),ot=function(t,i,e,s,h,n){C.fillStyle=i,C.font=`${n} ${h}px Courier New`,C.textBaseline="top",C.fillText(t,e,s)};_();let lt=[],ct=0;class dt{constructor(){this.backgroud=new I({x:0,y:0,width:800,height:600,color:"#FFF"}),this.backgroud2=new I({x:0,y:0,width:800,height:600,color:"#FFF"}),this.transition=new I({x:400,y:300,radius:0,color:"#000",anchor:{x:.5,y:.5},render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}}),this.timer=0,this.finish=!1,this.next=2}update(t){this.timer+=t,this.backgroud2.x+=250*t,this.timer>=3.5&&(this.transition.radius+=700*t),this.timer>=4.5&&(this.finish=!0)}render(){this.backgroud.render(),ot("js13kgames","#a80e00",205,265,64,"bold"),this.backgroud2.render(),this.transition.render()}}class xt{constructor(){this.backgroud=new I({x:0,y:0,width:800,height:600,color:"#FFF"}),lt=[[],[{x:100,y:170}],[{x:100,y:170},{x:670,y:170}],[{x:100,y:170},{x:670,y:170},{x:370,y:170}],[{x:100,y:290},{x:670,y:170},{x:670,y:290}],[{x:100,y:290},{x:670,y:170},{x:670,y:290}],[{x:100,y:170},{x:670,y:170},{x:100,y:290},{x:670,y:290}],[{x:100,y:440},{x:370,y:170},{x:670,y:440}],[{x:100,y:170},{x:670,y:170},{x:100,y:440},{x:670,y:440}],[{x:100,y:290},{x:670,y:290},{x:100,y:440},{x:670,y:440}],[{x:100,y:170},{x:670,y:170},{x:370,y:170},{x:100,y:440},{x:670,y:440}],[{x:100,y:170},{x:670,y:170},{x:370,y:170},{x:100,y:440},{x:670,y:440}],[{x:100,y:170},{x:670,y:170},{x:370,y:170},{x:100,y:290},{x:670,y:290},{x:100,y:440},{x:670,y:440}],[{x:370,y:170}]],this.timer=0,this.finish=!1,this.next=3,this.starting=!1,this.sprites=[new I({x:160,y:480,width:32,height:32,animations:Q.animations}),new I({x:280,y:480,width:32,height:32,animations:G.animations}),new I({x:400,y:480,width:32,height:32,animations:K.animations}),new I({x:520,y:472,width:32,height:40,animations:H.animations})],this.transition=new I({x:400,y:300,radius:0,color:"#000",anchor:{x:.5,y:.5},render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}}),ct=0}update(t){for(let t of this.sprites)t.update();!this.starting&&F("enter")&&(this.starting=!0),this.starting&&(this.timer+=t,this.transition.radius+=700*t),this.timer>1.2&&(this.finish=!0)}render(){this.backgroud.render(),ot("° Can't find the page °","#949494",45,100,40,"bold"),ot("A little game about error 404","#000",45,200,20,"bold"),ot("- TOP-DOWN View","#000",45,250,20,"bold"),ot("- Move with arrows","#000",45,300,20,"bold"),ot("- Shoot with space","#000",45,350,20,"bold"),ot("- 13 rooms + bossfight","#000",45,400,20,"bold"),ot("Press Enter to start","#949494",45,550,20,"bold"),ot("By ViRO","#949494",500,550,16,"bold");for(let t of this.sprites)t.render();this.transition.render()}}class yt{constructor(){this.backgroud=new I({x:0,y:0,width:800,height:600,color:"#000"}),this.finish=!1,this.next=1}update(t){F("enter")&&(this.finish=!0)}render(){this.backgroud.render(),ot("500","#a80e00",205,265,64,"bold"),ot("Press Enter restart","#949494",45,550,20,"bold")}}class ft{constructor(){this.backgroud=new I({x:0,y:0,width:800,height:600,color:"#FFF"}),this.finish=!1,this.next=1}update(t){F("enter")&&(this.finish=!0)}render(){this.backgroud.render(),ot("Victory!","#949494",205,150,64,"bold"),ot("Thanks for playing","#949494",205,300,42,"bold"),ot("Press Enter restart","#949494",45,550,20,"bold")}}class mt{constructor(){this.transition=new I({x:400,y:130,radius:0,color:"#000",anchor:{x:.5,y:.5},render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}}),this.enemiesPositions=lt.shift(),this.finish=!1,this.pong=!0,this.bullet=[],this.health=[I({x:735,y:30,color:"#8B0000",width:16,height:16,anchor:{x:0,y:0},animations:V.animations}),I({x:735,y:45,color:"#8B0000",width:16,height:16,anchor:{x:0,y:0},animations:V.animations}),I({x:735,y:60,color:"#8B0000",width:16,height:16,anchor:{x:0,y:0},animations:V.animations})],this.faces=[I({x:760,y:40,width:32,height:32,anchor:{x:0,y:0},image:B}),I({x:760,y:40,width:32,height:32,anchor:{x:0,y:0},image:L}),I({x:760,y:40,width:32,height:32,anchor:{x:0,y:0},image:T})],this.walls=[I({x:10,y:90,color:"#522524",width:780,height:50,anchor:{x:0,y:0}}),I({x:10,y:140,color:"#522524",width:50,height:420,anchor:{x:0,y:0}}),I({x:10,y:510,color:"#522524",width:780,height:50,anchor:{x:0,y:0}}),I({x:740,y:140,color:"#522524",width:50,height:420,anchor:{x:0,y:0}})],this.loading=new I({x:11,y:576,color:"#87CEEB",width:50,height:18,anchor:{x:0,y:0}}),this.loaded=at(),this.enemies=[],this.PLY=new st({bulletsRef:this.bullet,walls:this.walls,enemies:this.enemies,face:this.faces,health:this.health});for(let t=0;t<this.enemiesPositions.length;t++)this.enemies.push(new ht({x:this.enemiesPositions[t].x,y:this.enemiesPositions[t].y,type:13==ct?4:Math.floor(3*Math.random()+1),player:this.PLY,walls:this.walls,bulletsRef:this.bullet}));this.lockImg=new rt({enemies:this.enemies,spriteok:this.loaded,spritebar:this.loading}),this.design=nt(),this.doors=[I({x:370,y:90,color:"#A9A9A9",width:50,height:50,anchor:{x:0,y:0}})],this.timer=0,this.finish=!1,this.next=2,this.starting=!1,this.spawnlim=0}update(t){this.PLY.update(t);for(let i of this.health)i.update(t);for(let i of this.enemies)i.update(t);this.lockImg.update();for(let i of this.bullet)i.update(t);if(this.bullet.length){let t=0;do{this.bullet[t].time<=0?this.bullet.splice(t,1):t+=1}while(t<this.bullet.length)}if(this.enemies.length){let t=0;do{this.enemies[t].live?t+=1:this.enemies.splice(t,1)}while(t<this.enemies.length)}0==this.health.length&&(this.finish=!0,this.next=4),0==this.enemies.length&&!this.starting&&this.lockImg.collidesWith(this.PLY)&&(this.starting=!0),this.starting&&(this.timer+=t,this.transition.radius+=1e3*t),this.timer>1&&this.starting&&!this.finish&&(ct+=1,this.next=14==ct?5:3,this.finish=!0),13==ct&&this.spawnlim>=5&&this.enemies.length&&4==this.enemies[0].customType?(this.spawnlim=0,this.enemies.push(new ht({x:this.pong?100:670,y:440,type:Math.floor(3*Math.random()+1),player:this.PLY,walls:this.walls,bulletsRef:this.bullet})),this.pong=!this.pong,this.lockImg.originalenesize=this.enemies.length):13==ct&&(this.spawnlim+=t)}render(){for(let t of this.design)t.render();for(let t of this.walls)t.render();for(let t of this.doors)t.render();for(let t of this.health)t.render();for(let t of this.bullet)t.render();this.loaded.render(),this.loading.render(),this.PLY.render();for(let t of this.enemies)t.render();this.lockImg.render(),this.faces[0].render(),ot(`https://js${ct}kgames.com/submit`,"#000000",15,55,16,""),ot("Error 404 Page not found","#FFFFFF",20,5,16,""),ot("-","#FFFFFF",742,5,16,""),ot("*","#FFFFFF",762,6,16,""),ot("x","#FFFFFF",782,5,16,""),this.transition.render()}}(new class{constructor(){this.scene=this.getScene(1),this.gameloop=f({update:t=>{this.scene.update(t),this.scene.finish&&(this.scene=this.getScene(this.scene.next))},render:()=>{this.scene.render()}})}getScene(t){let i;switch(t){case 1:i=new dt;break;case 2:i=new xt;break;case 3:i=new mt;break;case 4:i=new yt;break;case 5:i=new ft}return i}}).gameloop.start()}]);