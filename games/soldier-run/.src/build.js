!function n(t,e,o){function r(u,a){if(!e[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var d=e[u]={exports:{}};t[u][0].call(d.exports,function(n){var e=t[u][1][n];return r(e?e:n)},d,d.exports,n,t,e,o)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(n){var t,e,o,r,i,u,a=n(4),c=n(5)(),f=n(3),d=document.querySelector("#game"),l=d.getContext("2d"),s=n(2)(l),p=["#516143","#6F856F","#7B6440","#554128"],h=d.width,y=d.height,x={r:0,g:0,b:0,a:0},m=function(){e=0,o=0,r=100,i=[];for(var n=0;3>n;n++)for(var t=0;5>t;t++)i.push({x:n*h/3,y:y-t*y/3,width:h/3,height:y/3,color:c.pick(p)});u={x:h/2,y:c.int(y/2),radius:c.range(20,30),dx:0,dy:0,maxdx:200,maxdy:200,bounce:.4,color:c.pick(p)},p=["#516143","#6F856F","#7B6440","#554128"]},v=function(){var n=p.length>9?c.range(15,20):c.range(5,10);r>n&&(u.color=c.pick(p),r-=n)};m(),a.start(function(n){if(f.tick(),0>=r)return l.clearRect(0,0,h,y),l.fillStyle="#D3CEB2",l.fillRect(0,0,h,y),l.font="30px Arial",l.fillStyle="black",l.textAlign="center",l.fillText("GAME OVER",h/2,y/2-15),l.fillText("Score: "+o,h/2,y/2+15),void 0;o%100===0&&(u.color=c.pick(p)),l.clearRect(0,0,h,y),l.globalAlpha=1,i.forEach(function(n){l.fillStyle=n.color,l.fillRect(n.x,n.y,n.width,n.height),n.y+=10>o?1:Math.max(1,o/100),e=Math.min(e,n.y),n.y>y&&(n.y=e,n.color=c.pick(p))}),t=s.getColorAmount(u.x-u.radius,u.y-u.radius,2*u.radius,2*u.radius,x),(u.x-u.radius<0&&u.dx<0||u.x+u.radius>h&&u.dx>0)&&(u.dx=-u.dx*u.bounce),(u.y-u.radius<0&&u.dy<0||u.y+u.radius>y&&u.dy>0)&&(u.dy=-u.dy*u.bounce),u.x+=u.dx*n,u.y+=u.dy*n,l.beginPath(),l.arc(u.x,u.y,u.radius,0,2*Math.PI,!0),l.closePath(),l.fillStyle=u.color,l.strokeStyle=u.color,l.fill(),x=s.getPointColor(u.x+u.radius/2,u.y+u.radius/2);var a=s.getColorAmount(u.x-u.radius,u.y-u.radius,2*u.radius,2*u.radius,x);a-1e3>t?(l.globalAlpha=.8/(1+c.range(0,50)/100),l.beginPath(),l.arc(u.x,u.y,u.radius/3,0,2*Math.PI,!0),l.closePath(),l.fillStyle="#D3CEB2",l.fill(),r=Math.max(r-c.float()/(20-p.length),0)):(r=Math.min(100,r+c.float()),o+=1,4===p.length&&o>100&&199>o&&(p.push("#62452A"),p.push("#6C533D"),p.push("#55493A")),7===p.length&&o>500&&599>o&&(p.push("#376C3A"),p.push("#266235")),9===p.length&&o>1e3&&1099>o&&(p.push("#B08F53"),p.push("#FFE8B5"),p.push("#B0996B"),p.push("#8C7D58"),p.push("#FFDA73"))),l.globalAlpha=1,l.font="20px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",l.fillStyle="black",l.textAlign="end",l.fillText("Score: "+o,h-20,30),l.textAlign="start",l.fillText("Life: "+parseInt(r,10),20,30)}),f.UP.down(function(){u.dy=Math.max(u.dy-10,-u.maxdy)}),f.DOWN.down(function(){u.dy=Math.min(u.dy+10,u.maxdy)}),f.LEFT.down(function(){u.dx=Math.max(u.dx-10,-u.maxdx)}),f.RIGHT.down(function(){u.dx=Math.min(u.dx+10,u.maxdx)}),f.SPACE.up(function(){v()}),f.ESC.up(function(){m()}),d.addEventListener("touchmove",function(n){n.preventDefault();var t=n.touches[0];u.x=t.clientX,u.y=t.clientY},!1);var g,w=0;d.addEventListener("touchend",function(n){n.preventDefault(),clearTimeout(g);var t=(new Date).getTime(),e=t-w;500>e&&e>0?(v(),w=0):(g=setTimeout(function(){clearTimeout(g)},500),w=t)},!1)},{2:2,3:3,4:4,5:5}],2:[function(n,t){t.exports=function(n){return{getColorAmount:function(t,e,o,r,i){for(var u=n.getImageData(t,e,o,r),a=u.data.length,c=0,f=0;a>f;f+=4)u.data[f]===i.r&&u.data[f+1]===i.g&&u.data[f+2]===i.b&&c++;return c},getPointColor:function(t,e){var o=n.getImageData(t,e,1,1);return{r:o.data[0],g:o.data[1],b:o.data[2],a:o.data[3]}}}}},{}],3:[function(n,t){!function(n){var e=function(){var t={};t.forEach=function(n,t){var e;for(e in n)n.hasOwnProperty(e)&&t(n[e],e)};var e=t.forEach;t.getTranspose=function(n){var t={};return e(n,function(n,e){t[n]=e}),t},t.indexOf=function(n,t){if(n.indexOf)return n.indexOf(t);var e,o=n.length;for(e=0;o>e;e++)if(n[e]===t)return e;return-1};var o=t.indexOf;return t.pushUnique=function(n,t){return-1===o(n,t)?(n.push(t),!0):!1},t.removeValue=function(n,t){var e=o(n,t);return-1!==e?n.splice(e,1)[0]:void 0},t.documentOn=function(t,e){n.addEventListener?n.addEventListener(t,e,!1):document.attachEvent&&document.attachEvent("on"+t,e)},t.requestAnimationFrame=function(){return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}(),t.noop=function(){},t}(),o={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},r=e.getTranspose(o),i=[],u=function(){"use strict";function n(n){this.keyCode=n}function t(n,t,e){e?n[t]=e:n[t]()}return n.prototype._downHandler=e.noop,n.prototype._upHandler=e.noop,n.prototype._pressHandler=e.noop,n.prototype.isDown=function(){return-1!==e.indexOf(i,this.keyCode)},n.prototype.down=function(n){t(this,"_downHandler",n)},n.prototype.up=function(n){t(this,"_upHandler",n)},n.prototype.press=function(n){t(this,"_pressHandler",n)},n.prototype.unbindDown=function(){this._downHandler=e.noop},n.prototype.unbindUp=function(){this._upHandler=e.noop},n.prototype.unbindPress=function(){this._pressHandler=e.noop},n}(),a=function(t){"use strict";var i={};i.Key=u;var a=!1;return i.tick=function(){var n,e=t.length;for(n=0;e>n;n++){var o=t[n],u=r[o];u&&i[u].down()}},i.run=function(t){a=!0,e.requestAnimationFrame.call(n,function(){a&&(i.run(t),t())})},i.stop=function(){a=!1},e.forEach(o,function(n,t){i[t]=new u(n)}),e.documentOn("keydown",function(n){var o=n.keyCode,u=r[o],a=e.pushUnique(t,o);a&&i[u]&&i[u].press()}),e.documentOn("keyup",function(n){var o=e.removeValue(t,n.keyCode),u=r[o];u&&i[u].up()}),e.documentOn("blur",function(){t.length=0}),i}(i);"object"==typeof t&&"object"==typeof t.exports?t.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):n.kd=a}(window)},{}],4:[function(n,t){function e(n){return window.requestAnimationFrame(function(){var t=Date.now(),e=t-o;e>999?e=1/60:e/=1e3,o=t,n(e)})}var o=0;t.exports={start:function(n){return e(function t(o){n(o),e(t)})},stop:function(n){window.cancelAnimationFrame(n)}}},{}],5:[function(n,t){function e(n){n||(n=Date.now());var t=n%30268+1;n=(n-n%30268)/30268;var e=n%30306+1;n=(n-n%30306)/30306;var o=n%30322+1;return n=(n-n%30322)/30322,function(){return t=171*t%30269,e=172*e%30307,o=170*o%30323,(t/30269+e/30307+o/30323)%1}}t.exports=function(n){var t=e(n),o={"int":function(n){return t()*(n||268435455)|0},"float":function(){return t()},range:function(n,t){return o.int(t-n)+n},pick:function(n){return n[o.range(0,n.length)]}};return o}},{}]},{},[1]);