var utils={};if(!window.requestAnimationFrame){window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}if(!window.cancelRequestAnimationFrame){window.cancelRequestAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout}utils.captureMouse=function(e){var t={x:0,y:0};e.addEventListener("mousemove",function(n){var r,i;if(n.pageX||n.pageY){r=n.pageX;i=n.pageY}else{r=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;i=n.clientY+document.body.scrollTop+document.documentElement.scrollTop}r-=e.offsetLeft;i-=e.offsetTop;t.x=r;t.y=i},false);return t};utils.getRadians=function(e){return e*Math.PI/180};utils.getDegrees=function(e){return e*180/Math.PI};utils.getDistance=function(e,t){return Math.sqrt(e*e+t*t)};utils.getDistanceCoordinants=function(e,t){var n=t.x-e.x,r=t.y-e.y;return{dx:n,dy:r}};utils.getSpeed=function(e,t){return Math.sqrt(e*e+t*t)};utils.getVelocityAngle=function(e,t){return Math.atan2(e,t)};utils.getAngleVelocity=function(e,t){var n={vx:Math.cos(e)*t,vy:Math.sin(e)*t};return n};utils.containsPoint=function(e,t,n){return!(t<e.x||t>e.x+e.width||n<e.y||n>e.y+e.height)};utils.intersects=function(e,t){return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)};utils.ballCollision=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=this.getDistance(n,r);return i<e.radius+t.radius};utils.conserveMomentum=function(e,t){var n=((e.mass-t.mass)*e.vx+2*t.mass*t.vx)/(e.mass+t.mass);var r=((t.mass-e.mass)*t.vx+2*e.mass*e.vx)/(e.mass+t.mass);e.vx=n;t.vx=r};utils.conserveMomentumTwoAxes=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);if(i<e.radius+t.radius){var s=Math.atan2(r,n),o=Math.sin(s),u=Math.cos(s),a={x:0,y:0},f=utils.rotate(n,r,o,u,true),l=utils.rotate(e.vx,e.vy,o,u,true),c=utils.rotate(t.vx,t.vy,o,u,true),h=l.x-c.x;l.x=((e.mass-t.mass)*l.x+2*t.mass*c.x)/(e.mass+t.mass);c.x=h+l.x;var p=Math.abs(l.x)+Math.abs(c.x),d=e.radius+t.radius-Math.abs(a.x-f.x);a.x+=l.x/p*d;f.x+=c.x/p*d;var v=utils.rotate(a.x,a.y,o,u,false),m=utils.rotate(f.x,f.y,o,u,false);t.x=e.x+m.x;t.y=e.y+m.y;e.x=e.x+v.x;e.y=e.y+v.y;var g=utils.rotate(l.x,l.y,o,u,false),y=utils.rotate(c.x,c.y,o,u,false);e.vx=g.x;e.vy=g.y;t.vx=y.x;t.vy=y.y}};utils.rotate=function(e,t,n,r,i){return{x:i?e*r+t*n:e*r-t*n,y:i?t*r-e*n:t*r+e*n}};utils.ballCheckWalls=function(e,t,n){var r=e.radius,i=left=0,s=n.width,o=n.height;if(e.x+r>s){e.x=s-r;e.vx*=t}else if(e.x-r<left){e.x=r;e.vx*=t}if(e.y+r>o){e.y=o-r;e.vy*=t}else if(e.y-r<i){e.y=r;e.vy*=t}};utils.ballOffScreen=function(e,t){var n=e.radius,r=left=0,i=t.width,s=t.height,o=false;if(e.x+n>i){o=true}else if(e.x-n<left){o=true}if(e.y+n>s){o=true}else if(e.y-n<r){o=true}return o}