<!doctype html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Elemental Vanguard</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <style>*{box-sizing:border-box}body{background-color:#111;color:#fff;font-family:"Courier New";font-size:18px;margin:0;padding:0}img{display:none}#hi-score{position:absolute;width:100%;z-index:20}#hi-wave{position:absolute;text-align:right;width:100%;z-index:20}canvas{position:absolute;transform:scale(2,2);-webkit-transform:scale(2,2);transform-origin:0 0;-webkit-transform-origin:0 0}#game-container{height:600px}#viewport{border:2px solid #222;height:600px;left:0;margin:auto;position:absolute;right:0;top:5%;width:800px}#title-screen{color:#e5e5e5;font-size:14px;padding:10px 40px;text-align:center;width:600}.title{display:none}.on{display:block}.ready{color:rgba(120,220,0,1)}.title li{text-align:left}.justify{text-align:justify}table{border:1px solid #999;border-bottom:none;width:100%}td,th{background-color:#444;border-bottom:1px #999 solid;margin:0;padding:10px}td{background:0 0;border-left:1px #999 solid}td:first-child{border-left:none}#messenging{color:#ddd;height:600px;opacity:0;overflow:hidden;padding-top:200px;position:absolute;text-align:center;transform:scale(0,0);-webkit-transform:scale(0,0);transition:opacity 1s linear,transform 1s linear;-webkit-transition:opacity 1s linear,transform 1s linear;width:800px}.relative{position:relative}#messenging.visible{opacity:1;transform:scale(1,1);-webkit-transform:scale(1,1)}.hud{background:#333;border-top:1px solid #666;list-style:none;margin:0;overflow:hidden;padding:0}.hud li{float:left;padding:22px;text-align:right;width:34%}.hud .ico{width:8%}.ico{opacity:.3;position:relative}.ico.on{opacity:1}.s-attack{height:100%;left:0;position:absolute;top:10px;width:100%}.s-attack:before{content:'';height:7px;left:12px;position:absolute;top:0;transform:scale(.6);-webkit-transform:scale(.6);width:7px}#attack-e:before{box-shadow:18px 12px #864,24px 12px #864,30px 18px #864,36px 24px #864,12px 48px #864,18px 48px #864,6px 42px #864,6px 36px #864,6px 30px #864,12px 30px #864,12px 42px #864,18px 42px #864,24px 36px #864,24px 30px #864,36px 42px #864,42px 24px #864,48px 30px #864,48px 36px #864,36px 48px #864,30px 48px #864,24px 48px #864,42px 42px #864,42px 36px #864,12px 18px #864,12px 24px #864,36px 12px #973,30px 12px #973,36px 18px #973,42px 18px #973,42px 30px #753,36px 30px #753,36px 36px #753,30px 36px #753,30px 42px #753,30px 30px #753,30px 24px #753,24px 24px #753,18px 24px #753,18px 18px #753,24px 18px #753,18px 54px #765,24px 54px #765,30px 54px #765,36px 54px #765,42px 54px #765,42px 48px #765,48px 48px #765,48px 42px #765,18px 30px #765,18px 36px #765,12px 36px #765,24px 42px #765}#attack-w:before{box-shadow:24px 12px #0bf,24px 18px #0bf,24px 24px #0bf,24px 36px #0bf,24px 42px #0bf,18px 48px #0bf,24px 48px #0bf,18px 42px #0bf,30px 42px #0bf,12px 42px #0bf,6px 36px #0bf,42px 36px #0bf,24px 6px #0bf,30px 24px #0bf,36px 24px #0bf,42px 30px #0bf,36px 36px #0bf,36px 30px #0bf,30px 36px #0bf,30px 30px #0bf,6px 30px #0bf,12px 24px #0bf,18px 18px #0bf,18px 12px #0bf,24px 30px #0bf,30px 18px #0bf,18px 24px #fff,18px 30px #fff,12px 30px #fff,12px 36px #0bf,18px 36px #fff,36px 48px #11f,42px 42px #11f,36px 42px #0bf,30px 54px #11f,30px 48px #11f}#attack-a:before{box-shadow:36px 42px #ffe,36px 48px #ffe,30px 54px #ffe,24px 54px #ffe,18px 54px #ffe,12px 48px #ffe,6px 42px #ffe,0 36px #ffe,0 30px #ffe,0 24px #ffe,6px 18px #ffe,12px 12px #ffe,18px 6px #ffe,24px 6px #ffe,36px 12px #ffe,30px 6px #ffe,42px 18px #ffe,48px 18px #ffe,54px 18px #ffe,48px 30px #ffe,42px 30px #ffe,36px 30px #ffe,30px 24px #ffe,24px 24px #ffe,18px 24px #ffe,12px 30px #ffe,18px 36px #ffe,24px 42px #ffe,48px 42px #ffe,54px 42px #ffe}#attack-f:before{box-shadow:12px 42px #ff0,18px 48px #ff0,24px 48px #ff0,36px 48px #ff0,42px 48px #ff0,42px 42px #ff0,12px 12px #e00,12px 18px #e00,6px 24px #e00,6px 36px #e00,6px 42px #e00,12px 48px #e00,12px 54px #e00,18px 54px #e00,24px 54px #e00,30px 54px #e00,42px 54px #e00,48px 54px #e00,36px 54px #e00,48px 48px #e00,48px 42px #e00,54px 36px #e00,54px 30px #e00,48px 24px #e00,48px 18px #e00,48px 12px #e00,42px 6px #e00,36px 12px #e00,30px 18px #e00,24px 12px #e00,24px 24px #f81,30px 42px #f81,30px 48px #f81,24px 42px #f81,18px 36px #f81,18px 42px #f81,18px 30px #f81,18px 24px #f81,12px 24px #f81,36px 42px #f81,30px 30px #f81,42px 12px #f81,36px 24px #f81,42px 18px #f81,36px 18px #f81,42px 30px #f81,42px 36px #f81,48px 36px #f81,48px 30px #f81,24px 18px #ff0,12px 6px #ff0,12px 30px #ff0,42px 24px #ff0,36px 36px #ff0,36px 30px #ff0,6px 30px #f00,12px 36px #f00,30px 24px #f00,30px 36px #f00,24px 36px #f00,24px 30px red}</style>
</head>
<body>
    <div id="viewport">
        <div id="hi-score">High Score: <span id="score-number">0</span></div>
        <div id="hi-wave">Highest Wave: <span id="wave-number">0</span></div>
        <div id="game-container">
            <canvas id="bg" width="400" height="300"></canvas>
            <canvas id="main-0" class="m" width="400" height="300"></canvas>
            <canvas id="main-1" class="m" width="400" height="300"></canvas>
            <canvas id="main-2" class="m" width="400" height="300"></canvas>
            <canvas id="main-3" class="m" width="400" height="300"></canvas>
            <canvas id="effects" width="400" height="300"></canvas>
            <canvas id="hud-canvas" width="425" height="300"></canvas>
            <div id="messenging">
                <h1></h1>
                <h4></h4>
            </div>
            <div id="title-screen">
                <div class="title">
                    <h1>The Elemental Vanguard</h1>
                    <p class="justify">You are the first line of defense against an invasion of baddies that threaten your civilization's very existence. Armed with only your trusty laser and elemental weaponry, you must destroy as many enemies as you can before it's too late...</p>
                    <h2>Objectives</h2>
                    <ul>
                        <li><b>Keep your hero alive.</b> Colliding with enemy vessels will result in death.</li>
                        <li><b>Keep enemies way from your planet.</b> Letting 10 enemy vessels get by you will result in mission failure.</li>
                    </ul>
                    <p>Make no mistake, you will die on this mission as a member of the Vanguard. The question is how long will you last?</p>
                    <p>You can disptach enemies with your laser or one of four elemental weapons. All elemental weapons have a 20 second cooldown after their effects have taken place. Enemies affected by elemental weaponry do not award points.</p>
                    <br><br><br>
                    <p><em>(Press Enter to continue)</em></p>
                </div>
                <div class="title">
                    <h1>Controls</h1>
                    <table>
                        <tr>
                            <th>Key</th>
                            <th>Effect</th>
                        </tr>
                        <tr>
                            <td>Left and Right cursors</td>
                            <td>Move your hero's ship</td>
                        </tr>
                        <tr>
                            <td>Spacebar</td>
                            <td>Fire laser</td>
                        </tr>
                        <tr>
                            <th colspan="2">Elemental Weapons (20 second cooldown)</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Earth: fling asteroids at your enemies</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Water: slow all enemies for 10 secs</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Air: stop on-screen enemies and prevent new enemies for 10 secs</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Fire: destroy all on-screen enemies and hero is invincible for 10 secs</td>
                        </tr>
                    </table>
                    <br>
                    <p><em>(Press Enter to Start Game)</em></p>
                </div>
            </div>
        </div>
        <ul id="hud" class="hud">
                <li id="earth" class="ico">
                    <div class="s-attack" id="attack-e">1</div>
                </li>
                <li id="water" class="ico">
                    <div class="s-attack" id="attack-w">2</div>
                </li>
                <li id="air" class="ico">
                    <div class="s-attack" id="attack-a">3</div>
                </li>
                <li id="fire" class="ico">
                    <div class="s-attack" id="attack-f">4</div>
                </li>
                <li id="enemies-passed">
                    Enemies let by: 0
                </li>
                <li id="score">
                    Score: 99999
                </li>
            </ul>
    </div>
    <img id="player-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAIAAAAmKNuZAAAABnRSTlMA/wD/AP83WBt9AAAEn0lEQVR4Aa1UC0xTVxi+jCxkLNkSEnxsU5zQjZeFa8ujK4XKykKh3LVUiDbYBShNCnTiaGlpeFRairzkoasMBEGMGURnDOJjLLBolhhBo0LGxqBgGEwe4piQbAy4+xibYalZybITQv7zn+985/u//78l6P91bYru6YO+odZT/4Xu95WlzuGGwenejckz+dllyQm2/nv2MAd0jf251SueiruuM4uT2M7Oznb23KhsaWy5ekVVqO+937cRdugO8Xh+/N/oPu+vPTK6JftOyLNff8b2XOvZE0V5jXV1lzouZ8sOFORkDQz2I395qD7d9mryBf+5hVkH3hV9G35pvAxB+/m2nvNndfceslLTjEeLeG0XTQWG4/nmpaXfcJrVy7DN3XfcisHx218+bLaNjZQcySq3jbnT9PZQTrO5mKTp1691qWUH6hs/fTT9Xc9Q68zcpGO68ZGfao/VfxDM0tbWhNG0y90BMiCgqOQYYuepeW+KEgQy05IyOy92P5l+6phubGxU/bGa/eY2YWXV2zTt1NfPJklleQVi5+EfQcf18gwg99R9dmpq6rFjOpQJOp+dO94XS5yMZiJLw+LtS1coXE0liN/hhbMZDCaTWVV9fGJiYlN0ijTFWx47hRERMi4XZmVkqkFnOJT0UWwsRVHePu/6+vlaSoo3RTds+0GpSnVzc5NIJGWlpU2nTxcWFkIvhqamqkqlUuElf6av2WLaFB0caWlt2u3lIRaLTSYTGOVy+fMYwnEUnyj+5vYtBx8ZdOHvl2fzgL7H4yQmJhiNRqlMQsp37c3cHnkwXKfTKZVKSIN8wADGVL+AbnV19YuO9hSlHH8HkxIjBXyRSJScnCyiROxEv6h25/ibBFvrTu2Pg9JoYTTsC4vgxEmjo+ME1oZaXP8H3bWuK/ACOCiSSqVBQUFRUVGIwUV9RRhWCe08oX5CQCNO0Q2SJAFGAKRCmdLQYv2LbmVl5Vxbs9VqzchMl8lkEMXjhWEOuFwuYihKGyUyHhEpDwjtIrGv3hVJLBaLFRISEhMTg3bhVW2OJr8od3l5mSirNutytQaDIS8vT6/XczihgIIO6mA/1MVchTpw/alOsQvJdfkQCEa4qdFo0B9ULUuVEnAaHmFvsVjQO4BAhwWNEIvHQxP2QhRKRqVoKFqBl8i/F64Um81A8vn8HZ7bCGq/EOKxhzTMFHQBhMcRII+JW+8sqkZn1zHPuYDBFpXhOszx2eNFCGJ4eC1WJESZmACMO0DrUJCilvKKio1zB7/QVpwCiQD/0WJKvOb4Gl0wLxCTUX2ysrSy+Oub3Q1n6vAAvvBgTgjWukCUAwloF3ihAqcgYnGY+BXAFVzErICE4e9BIIum0BsWet3Vc13wYfQb3gwJRaEc+AV/USma6EMGII8rC4sLG28Zi/PW6JjB3tl6NW23WptOuLk4ezEDwvmRr2zxc3l5K35XIBkBj+1njzcc1azR+ZC7Mw4r7Y8bagvaFS/h82R4btWJiJwUpzB3AuYejnRSRb1mj4emNTphPP+F6kZHvh8oF0zNTE5OjHeruR3awBsnLcjfqoi/XlNgj9cXfgLT/wCRKf7YWQn2iwAAAABJRU5ErkJggg==">
<script>/*! js13k-2014 - v0.1.0 - 2014-08-30
* Copyright (c) 2014; Licensed MIT */

(function(){"use strict";function a(a){return"[object Array]"===Object.prototype.toString.call(a)}function b(a,b,c){var e=[];b=b||[];for(var f=b.length-1;f>=0;f--)e[f]=d[b[f]];d[a]=c.apply(null,e)}function c(){var a,c,f,g,h,i=0;for(g=e.length-1;g>=0;g--){for(a=e[g],c=a.deps,f=!0,h=c.length-1;h>=0;h--)"undefined"==typeof d[c[h]]&&(f=!1);f&&(b(a.moduleName,a.deps,a.module),e.splice(g,1),i++)}return i}var d=this._moduleCache={},e=[];this.define=function(f,g,h){var i=typeof g,j=!0,k=1;if(a(g)||"function"!==i){if(a(g))for(var l=g.length-1;l>=0;l--)"undefined"==typeof d[g[l]]&&(j=!1)}else h=g,g=null;if(j)for(b(f,g,h);k>0;)k=c();else e.push({moduleName:f,module:h,deps:g||[]})}}).call(window||{}),define("Asteroid",["Sprite","vent","util"],function(a,b,c){"use strict";function d(){a.apply(this,arguments),this.size=c.random(15,30),this.isCreated=!1,this.physics={speed:2,friction:2,velocity:0,velocityGoal:c.random(-.5,-.25)},this.fillStyle=["#372720","rgba(73, 52, 42, 0.5)","rgba(104, 74, 59, 0.3)"],this.position={x:0,y:this.canvas.height+this.size},this.angle=Math.cos(Math.random())}var e;return e=d.prototype=Object.create(a.prototype),e.create=function(a){return this.position.x=a,b.emit("laser-added",this),this},e.update=function(){this.position.y<0-2*this.size?this.destroy():this.position.y=this.position.y+this.physics.velocityGoal},e.render=function(){c.polygon(this.ctx,this.position.x,this.position.y,this.size,7,this.fillStyle[0],null,this.angle),c.polygon(this.ctx,this.position.x,this.position.y,.8*this.size,5,this.fillStyle[1],{},this.angle),c.polygon(this.ctx,this.position.x,this.position.y,.3*this.size,4,this.fillStyle[2],{},this.angle)},e.destroy=function(){this.position.x=0,this.position.y=0,this.destroyed=!0,b.emit("laser-destroyed",this)},d}),define("Enemy",["Sprite","vent","util"],function(a,b,c){"use strict";function d(){a.apply(this,arguments),this.fillStyle=c.randomColor(),this.size=15,this.physics={speed:2,friction:.01,velocity:c.random(.5,1),velocityGoal:.1},this.orbitAt=0,this.orbitSpeed=3,this.inc=.2,this.position={x:Math.random()*this.canvas.width,y:0-2*this.size},this.displayProps={},this.gradients={"default":["#800008","#c3000b"],water:["#255989","#56b8ff"],air:["#333","#f1f1f1"]},this.currentGradient=this.gradients.default,this.orbiterDisplayProps={shadowBlur:0},this.effected=!1}var e;return e=d.prototype=Object.create(a.prototype),e.create=function(b){return a.prototype.create.call(this),this.setEffect(b||null),this},e.bindEvents=function(){a.prototype.bindEvents.call(this),b.on("elemental-water-on",this.waterEffect.bind(this,!0)),b.on("elemental-air-on",this.airEffect.bind(this,!0)),b.on("deactivate",this.deactivateAllEffects.bind(this)),b.on("elemental-fire-on",this.destroy.bind(this))},e.render=function(){if(!this.destroyed){var a,b=.02,d=.5*b,e=.9;a=this.ctx.createRadialGradient(this.position.x,this.position.y,1.5*this.size,this.position.x+10,this.position.y+10,this.size/2),a.addColorStop(0,this.currentGradient[0]),a.addColorStop(1,this.currentGradient[1]),c.circle(this.ctx,this.position.x,this.position.y,this.size,a,this.displayProps),this.orbitAt=this.orbitAt>=2?0:this.orbitAt,this.orbitAt+=b*this.orbitSpeed,c.circle(this.ctx,this.position.x+(this.size+2.5)*Math.cos(this.orbitAt*Math.PI),this.position.y+(this.size+2.5)*Math.sin(this.orbitAt*Math.PI),5,"rgba(221,113,8,1.0)",this.orbiterDisplayProps);for(var f=20;f>0;f--)c.circle(this.ctx,this.position.x+(this.size+f/4)*Math.cos((this.orbitAt-d)*Math.PI),this.position.y+(this.size+f/4)*Math.sin((this.orbitAt-d)*Math.PI),f/4,"rgba(221, 113, 8, "+e+")"),d+=1*b,e-=.6*b}},e.update=function(){this.destroyed||(this.position.y+this.physics.velocity>this.canvas.height+this.size?(this.destroy(),b.emit("enemy-passed")):this.position.y=this.position.y+this.physics.velocity)},e.destroy=function(a){a===!0&&b.emit("kaboom!",this.position.x,this.position.y),this.position={x:0,y:0},this.destroyed=!0,this.deactivateAllEffects(),b.emit("entity-destroyed",this)},e.recycle=function(){this.position.x=Math.random()*this.canvas.width,this.position.y=0-this.size,this.physics.velocityGoal=c.random(.1,.5),this.destroyed=!1,this.fillStyle=c.randomColor()},e.setEffect=function(a){"water"===a?this.waterEffect(!0):this.deactivateAllEffects()},e.waterEffect=function(a){this.effected=!!a,a?(this.currentGradient=this.gradients.water,this.physics.velocity=.3*this.physics.velocity):(this.currentGradient=this.gradients.default,this.physics.velocityGoal=c.random(.5,1))},e.airEffect=function(a){this.effected=a,a?(this.currentGradient=this.gradients.air,this.physics.velocity=0):(this.currentGradient=this.gradients.default,this.physics.velocity=c.random(.5,1))},e.deactivateAllEffects=function(){this.waterEffect(!1),this.airEffect(!1)},d}),define("HUD",["vent","util","Sprite"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;x={cooldownTimer:{fillStyle:{current:"#f1f1f1","default":"#f1f1f1",water:"rgba(0, 0, 220, 1)",air:"#b8f0f0",fire:"rgba(255, 0, 0, 1)"},font:"20px Courier",height:200,currentHeight:200,opts:{fg:{lineWidth:10,lineCap:"round"},bg:{lineWidth:12,lineCap:"round"}},percent:0}},h={score:function(){j.innerHTML="Score: "+i},cooldownTimer:function(a){var c=x.cooldownTimer;b.line(a,a.canvas.width-15,a.canvas.height-50,a.canvas.width-15,a.canvas.height-50-c.height,"#333",c.opts.bg),b.line(a,a.canvas.width-15,a.canvas.height-50,a.canvas.width-15,a.canvas.height-50-c.height*c.percent,c.fillStyle.current,c.opts.fg)},enemyCount:function(){s.innerHTML="Enemies let by: "+t+"/10"}},c=function(){var c=b.getById("hud-canvas");d=c.getContext("2d"),q=null,r=b.QSA(".ico"),i=0,j=b.getById("score"),s=b.getById("enemies-passed"),t=0,w={score:b.getById("score-number"),wave:b.getById("wave-number")},l={current:20,lastChecked:Date.now(),max:20,timerStarted:null,elem:b.getById("cooldown-timer")},p=!0,u=!0,a.on("update",e),a.on("render",f),a.on("deactivate",n),a.on("activate",m),a.on("elemental-progress",function(a){x.cooldownTimer.percent=a}),a.on("start-game",function(){p=!1,l.timerStarted=Date.now(),b.getById("title-screen").style.display="none"}),a.on("activate",function(a){for(var c=0;c<r.length;c++)r[c].classList.remove("on");q=b.getById(a),q.classList.add("on")}),a.on("cooldown-end",function(){for(var b=0;b<r.length;b++)r[b].classList.add("on");a.emit("elemental-ready"),u&&(a.emit("message",'<p class="ready">Elemental Weapons Ready!</p>',2e3),u=!1)}),a.on("enemy-passed",function(){t++})},g=function(){a.on("start",function(a){c(a),w.score.innerHTML=v("get","score")||0,w.wave.innerHTML=v("get","wave")||1}),a.on("enemy-down",function(){i+=2,v("get","score")<i&&(v("set","score",i),w.score.innerHTML=i)}),a.on("new-wave",function(b){v("get","wave")<b&&(v("set","wave",b),a.emit("hi-wave-update",b),w.wave.innerHTML=b)})},m=function(a){l.current=1e4,l.lastChecked=Date.now(),x.cooldownTimer.fillStyle.current=x.cooldownTimer.fillStyle[a],"earth"===a&&n()},n=function(){q&&q.classList.remove("on"),l.current=2e4,l.display=20,l.lastChecked=Date.now(),x.cooldownTimer.fillStyle.current=x.cooldownTimer.fillStyle.default,x.cooldownTimer.percent=0,l.timerStarted=Date.now(),p=!1},o=function(){if(!p){if(l.display<=0)return a.emit("cooldown-end"),x.cooldownTimer.fillStyle.current="rgba(120, 220, 0, 1)",x.cooldownTimer.percent=1,void(p=!0);var b=Date.now(),c=b-l.timerStarted;l.current=c,l.lastChecked=b,x.cooldownTimer.percent=(b-l.timerStarted)/2e4,l.display=l.max-parseInt(l.current/1e3)}},e=function(){o()},f=function(){d.clearRect(0,0,d.canvas.width,d.canvas.height),k("score"),k("cooldownTimer"),k("enemyCount")},k=function(a){h[a](d)},v=function(a,b,c){return window.localStorage[a+"Item"](b,c)},g()}),define("Laser",["Sprite","util","vent"],function(a,b,c){"use strict";function d(){a.apply(this,arguments),this.size=5,this.isCreated=!1,this.physics={speed:2,friction:2,velocity:0,velocityGoal:-3},this.position={x:100,y:100},this.displayProps={shadowOffsetX:0,shadowOffsetY:0,lineWidth:2,strokeStyle:"#444"}}var e,f=!1;return e=d.prototype=Object.create(a.prototype),e.create=function(a){return this.position.x=a.x,this.position.y=a.y,c.emit("laser-added",this),this},e.render=function(){if(!this.destroyed){var a=this.position;b.circle(this.ctx,a.x,a.y,this.size,b.randomColor(),this.displayProps)}},e.update=function(){this.destroyed||(this.size=f?15:5,this.physics.velocity=b.approach(this.physics.velocityGoal,this.physics.velocity,this.physics.friction),this.position.y+this.physics.velocity<0-this.size?this.destroy():this.position.y+=this.physics.velocity)},e.destroy=function(){this.position.x=0,this.position.y=0,this.destroyed=!0,c.emit("laser-destroyed",this)},c.on("elemental-fire-on",function(){f=!0}),c.on("elemental-fire-off",function(){f=!1}),d}),define("Particle",["Sprite","util"],function(a,b){"use strict";function c(c,d){a.apply(this,arguments),this.size=b.random(.5,1.5),this.physics={speed:.5,friction:.09,velocity:0,velocityGoal:b.random(1,2)},this.direction=2*Math.random()*Math.PI,this.xInc=function(){return Math.cos(this.direction)*this.physics.velocity},this.yInc=function(){return Math.sin(this.direction)*this.physics.velocity},d||(this.life=b.random(15,25),this.fillStyle="rgba(244,0,8,"+1*Math.random()+")",this.position={x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height-this.size}),this.bindRefs={}}var d;return d=c.prototype=Object.create(a.prototype),d.create=function(){return this},d.bindEvents=function(){},d.update=function(){this.physics.velocity=b.approach(this.physics.velocityGoal,this.physics.velocity,this.physics.friction),this.position.y+=this.yInc(),this.position.x+=this.xInc(),this.life--},d.render=function(a){b.circle(a,this.position.x,this.position.y,this.size,this.fillStyle)},d.recycle=function(){this.destroyed=!1},c}),define("Player",["Sprite","vent","Laser","util","spritePool"],function(a,b,c,d,e){"use strict";function f(){a.apply(this,arguments),this.ctx=this.canvas.ctx[this.canvas.ctx.length-1],this.dims={width:30,height:30},this.physics={speed:2,friction:.98,velocity:0,velocityGoal:0},this.keyPressed=!1,this.lastFired=Date.now(),this.laserPosition={x:0,y:0},this.img=d.getById("player-img")}var g;return g=f.prototype=Object.create(a.prototype),g.create=function(){this.position={x:this.ctx.canvas.width/2-this.dims.width/2,y:this.ctx.canvas.height-37},this.isCreated=!0,b.on("keydown",this.move.bind(this)),b.on("keyup",this.stop.bind(this)),b.on("keydown",function(a){32===a.keyCode&&this.fire(a)}.bind(this)),a.prototype.create.call(this),b.emit("player-added",this)},g.bindEvents=function(){a.prototype.bindEvents.call(this),b.on("elemental-fire-on",function(){this.fireActive=!0}.bind(this)),b.on("elemental-fire-off",function(){this.fireActive=!1}.bind(this))},g.render=function(){this.ctx.shadowBlur=0,this.ctx.drawImage(this.img,this.position.x,this.position.y,this.dims.width,this.dims.height)},g.move=function(a){if(!this.keyPressed){var b=/^(37|39)/g,c=a.keyCode;b.test(c)&&(this.physics.velocityGoal=37===c?-6:6,this.keyPressed=!0)}},g.stop=function(a){var b=/^(37|39)/g,c=a.keyCode;b.test(c)&&(this.physics.velocityGoal=0,this.keyPressed=!1)},g.fire=function(){if(!(this.lastFired>Date.now()-200)){var a=e.recycle("lasers"),d=this.laserPosition;this.laserPosition.x=this.position.x+16,this.laserPosition.y=this.position.y,a?a.destroyed=!1:(a=new c(this.canvas),e.register("lasers",a)),a.create(d),this.lastFired=Date.now(),b.emit("shoot")}},g.update=function(){this.physics.velocity=d.approach(this.physics.velocityGoal,this.physics.velocity,.4),this.position.x=this.position.x+this.physics.velocity>=this.canvas.width-this.dims.width?this.canvas.width-this.dims.width:this.position.x+this.physics.velocity<=0?0:this.position.x+this.physics.velocity,this.fireActive&&b.emit("emit-fire",this.position.x+this.dims.width/2,this.position.y+this.dims.height/2-10)},g.destroy=function(){this.destroyed=!0,b.emit("entity-destroyed",this),b.emit("kaboom!",this.position.x,this.position.y)},f}),define("SpeedLine",["Sprite","vent","util"],function(a){"use strict";function b(){a.apply(this,arguments),this.size={width:1,height:10},this.physics={speed:2,friction:2,velocity:0,velocityGoal:2*Math.random()+3},this.fillStyle="rgba(255,255,255,0.1)",this.position={x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height-this.size.height}}var c;return c=b.prototype=Object.create(a.prototype),c.bindEvents=function(){},c.create=function(){return this},c.restart=function(){this.position.x=Math.random()*this.canvas.width,this.position.y=-10},b}),define("Star",["Sprite","util","vent"],function(a,b){"use strict";function c(){a.apply(this,arguments),this.size=b.random(.1,1),this.physics={speed:2,friction:2,velocity:0,velocityGoal:b.random(.5,3.5)},this.fillStyle="rgba(241,241,241,"+b.random(.1,.4)+")",this.position={x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height-this.size}}var d;return d=c.prototype=Object.create(a.prototype),d.create=function(){return this},d.bindEvents=function(){},d.restart=function(){this.position.x=Math.random()*this.canvas.width,this.position.y=-10},c}),define("game",["Canvas","Player","vent","util"],function(a,b,c,d){"use strict";var e,f,g,h;return e=new a,g=d.getById("effects").getContext("2d"),c.on("render",function(){g.clearRect(0,0,g.canvas.width,g.canvas.height),c.emit("effects-render")}),f=new b(e),h={canvas:e,player:f,vent:c},document.addEventListener("keydown",function(a){c.emit("keydown",a)}),document.addEventListener("keyup",function(a){c.emit("keyup",a)}),document.addEventListener("DOMContentLoaded",function(){c.emit("create",h),c.emit("start",h)}),c.on("game-over",function(a){c.emit("message","Game Over",a+"<br/><br/> Press 'R' to try again."),c.on("keydown",function(a){82===a.keyCode&&(window.location.href=window.location.href)})}),window.game=h,h}),define("activationEffects",["vent","util"],function(a,b){"use strict";var c,d,e,f,g,h,i,j={opacity:0,fillStyle:"rgba(184,240,240,%a)",decrement:.02,inProgress:!1};c=function(){var a=b.getById("effects");e=a.getContext("2d"),d={width:a.width,height:a.height,ctx:e}},i=function(){a.on("start",function(b){c(b),a.on("effects-render",f),a.on("update",g),a.on("activate",h)})},h=function(){j.opacity=1,j.inProgress=!0},g=function(){j.inProgress&&(j.opacity-=j.decrement,j.opacity<0&&(j.inProgress=!1,j.opacity=0))},f=function(){j.inProgress&&(e.fillStyle=j.fillStyle.replace("%a",j.opacity),e.fillRect(0,0,800,600))},i()}),define("audio",["jsfxr","vent"],function(a,b){"use strict";function c(c,d){var f=a(d,e);b.on(c,function(){var a=e.createBufferSource();a.buffer=f,a.connect(e.destination),a.start(0)})}var d=window.webkitAudioContext||window.AudioContext,e=new d;c("shoot",[0,,.0243,,.2334,.7546,,-.3971,,,,,,,,,,,1,,,,,.33]),c("kaboom!",[3,,.233,.3771,.67,.0656,,-.29,,,,,,,,.75,-.24,.34,.15,-.18,.76,,,.31]),c("activate",[0,,.3417,,.49,.2556,,.2183,,.6583,.4986,-.24,,.37,-.0799,,,,1,,,,,.34]),c("deactivate",[0,,.3469,,.44,.2142,,-.18,,.2873,.1353,,,.3639,,,,,1,,,,,.4]),c("elemental-ready",[1,,.3367,,.29,.3476,,.2325,,,,,,,,,,,1,,,,,.39])}),define("Canvas",["util","vent"],function(a,b){"use strict";function c(){this.elems=a.QSA("canvas.m"),this.ctx=[];for(var b=0;b<this.elems.length;b++)this.ctx.push(this.elems[b].getContext("2d"));this.width=this.ctx[0].canvas.width,this.height=this.ctx[0].canvas.height,this.entityCache=[],this.laserCache=[],this.hudCache=[],this.bgCache=[],this.canvasCounter=0,this.bindEvents()}var d=c.prototype;return d.getNextContext=function(){var a=this.ctx[++this.canvasCounter];return this.canvasCounter>=this.ctx.length-1&&(this.canvasCounter=0),a},d.bindEvents=function(){b.on("render",this.render.bind(this)),b.on("bg-item-added",this.addBGItem.bind(this)),b.on("entity-added",this.addSprite.bind(this)),b.on("entity-destroyed",this.destroySprite.bind(this)),b.on("laser-added",this.addLaser.bind(this)),b.on("laser-destroyed",this.destroyLaser.bind(this))},d.render=function(){var a,b;for(a=0;a<this.ctx.length;a++)b=this.ctx[a],b.clearRect(0,0,b.canvas.width,b.canvas.height);for(a=0;a<this.bgCache.length;a++)this.bgCache[a].render();for(a=0;a<this.laserCache.length;a++)this.laserCache[a].render();for(a=0;a<this.entityCache.length;a++)this.entityCache[a].render()},d.addSprite=function(a){this.entityCache.push(a)},d.addLaser=function(a){this.laserCache.push(a),b.emit("laser-cache-updated",this.laserCache)},d.destroyLaser=function(a){var b,c,d=[];for(c=0;c<this.laserCache.length;c++)b=this.laserCache[c],b.id===a.id&&d.push(c);for(c=0;c<d.length;c++)this.laserCache.splice(d[c],1)},d.destroySprite=function(a){for(var b,c=0;c<this.entityCache.length;c++)if(b=this.entityCache[c],b.id===a.id)return this.entityCache.splice(c,1)},d.addBGItem=function(a){this.bgCache.push(a)},c}),define("elementalPulse",["vent","Asteroid","util"],function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m={},n=!1;h={checkAir:null,checkWater:null,checkFire:null},d=function(){a.on("start",function(b){e=b.canvas,l=!1,a.on("keydown",g),a.on("cooldown-end",function(){l=!0})})},g=function(a){if(!n&&l)switch(a.keyCode){case 49:f();break;case 50:j("water","checkWater");break;case 51:j("air","checkAir");break;case 52:j("fire","checkFire")}},i=function(b,c){a.off("update",h[c]),a.emit("deactivate "+b+"-off"),h[c]=null,n=!1},j=function(b,c){if(!n){var d=Date.now();a.emit("activate elemental-"+b+"-on",b),h[c]=m[b].bind(null,d),a.on("update",h[c]),n=!0,l=!1}},f=function(){for(var c=5,d=e.width/c,f=d-d/2,g=0;c>g;g++)new b(e).create(f),f+=d;a.emit("activate elemental-earth","earth"),l=!1},k=function(b,d){var e=c.capitalize(b);return function(c){var f=Date.now();a.emit("elemental-progress",(f-c)/d),f-c>d&&i("elemental-"+b,"check"+e)}},m.water=k("water",1e4),m.air=k("air",1e4),m.fire=k("fire",1e4),d()}),define("engine",["vent","Enemy","spritePool","Laser","util"],function(a,b,c,d,e){"use strict";var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;f=function(b){r=0,m=[],l=[],o=0,i=b.canvas,x=Date.now(),u=q(),v=a.emit.bind(a,"message")},g=function(){a.on("player-added",function(a){t=a}),a.on("start",function(b){f(b),a.on("start-game",function(){a.on("update",h)}),a.on("update",j),a.on("update",k),a.on("laser-cache-updated",function(a){l=a}),a.on("activate",function(a){n=a}),a.on("deactivate",function(){n=null}),a.on("start-game",function(){v("Wave 1",2e3)}),a.on("enemy-passed",s),a.on("game-over",w)})},h=function(){var d,e;if(!(x>Date.now()-3e3)){e=p(u),e||(o++,u=q(),e=p(u),a.emit("new-wave",o+1),a.emit("message","Wave "+parseInt(o+1),2e3));for(var f=0;e>f;f++)"air"!==n&&(d=c.recycle("enemies"),d||(d=new b(i),c.register("enemies",d),m.push(d)),d.create(n||null));x=Date.now()}},j=function(){var b,c,e;m.forEach(function(f){l.forEach(function(g){b=f.position.x-g.position.x,c=f.position.y-g.position.y,e=Math.sqrt(b*b+c*c),e<f.size+g.size&&(a.emit("kaboom!",f.position.x,f.position.y),g instanceof d&&!f.effected&&a.emit("enemy-down"),f.destroy(),g.destroy())})})},k=function(){t&&m.forEach(function(b){var c=Math.abs(b.position.x-t.position.x-t.dims.width/2),d=Math.abs(b.position.y-t.position.y-t.dims.height/2);return c>t.dims.width/2+b.size||d>t.dims.height/2+b.size?!1:void((c<=t.dims.width/2||d<=t.dims.height/2)&&(t.fireActive?(a.emit("kaboom!",b.position.x,b.position.y),b.destroy()):(t.destroy(),a.off("update",k),a.emit("game-over","Your hero is dead."))))})},p=function(){var b=0;return a.on("new-wave",function(){b=0}),function(a){return a[++b]}}(),q=function(){for(var a=[],b=30,c=0;b>c;c++)a.push(parseInt(Math.round(e.random(1+o,2+o))));return a},s=function(){r++,10===r&&a.emit("game-over","Valiant effort, but you were overrun.")},w=function(){m.forEach(function(a){a.destroy()}),a.off("update",h)},g()}),define("gameLoop",["vent"],function(a){"use strict";function b(){d||(a.emit("update"),a.emit("render"),a.emit("debug")),c(b)}var c=window.requestAnimationFrame,d=!1;a.on("start",b),a.on("pause",function(){d=!d})}),define("jsfxr",function(){function a(){this.setSettings=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;this.c<.01&&(this.c=.01);var c=this.b+this.c+this.e;if(.18>c){var d=.18/c;this.b*=d,this.c*=d,this.e*=d}}}function b(){this._params=new a;var b,c,d,e,f,g,h,i,j,k,l,m;this.reset=function(){var a=this._params;e=100/(a.f*a.f+.001),f=100/(a.g*a.g+.001),g=1-a.h*a.h*a.h*.01,h=-a.i*a.i*a.i*1e-6,a.a||(l=.5-a.n/2,m=5e-5*-a.o),i=1+a.l*a.l*(a.l>0?-.9:10),j=0,k=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},this.totalReset=function(){this.reset();var a=this._params;return b=a.b*a.b*1e5,c=a.c*a.c*1e5,d=a.e*a.e*1e5+12,3*((b+c+d)/3|0)},this.synthWave=function(a,n){var o=this._params,p=1!=o.s||o.v,q=o.v*o.v*.1,r=1+3e-4*o.w,s=o.s*o.s*o.s*.1,t=1+1e-4*o.t,u=1!=o.s,v=o.x*o.x,w=o.g,x=o.q||o.r,y=o.r*o.r*o.r*.2,z=o.q*o.q*(o.q<0?-1020:1020),A=o.p?((1-o.p)*(1-o.p)*2e4|0)+32:0,B=o.d,C=o.j/2,D=o.k*o.k*.01,E=o.a,F=b,G=1/b,H=1/c,I=1/d,J=5/(1+o.u*o.u*20)*(.01+s);J>.8&&(J=.8),J=1-J;for(var K,L,M,N,O,P,Q=!1,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=new Array(1024),ab=new Array(32),bb=_.length;bb--;)_[bb]=0;for(var bb=ab.length;bb--;)ab[bb]=2*Math.random()-1;for(var bb=0;n>bb;bb++){if(Q)return bb;if(A&&++Z>=A&&(Z=0,this.reset()),k&&++j>=k&&(k=0,e*=i),g+=h,e*=g,e>f&&(e=f,w>0&&(Q=!0)),L=e,C>0&&($+=D,L*=1+Math.sin($)*C),L|=0,8>L&&(L=8),E||(l+=m,0>l?l=0:l>.5&&(l=.5)),++S>F)switch(S=0,++R){case 1:F=c;break;case 2:F=d}switch(R){case 0:T=S*G;break;case 1:T=1+2*(1-S*H)*B;break;case 2:T=1-S*I;break;case 3:T=0,Q=!0}x&&(z+=y,M=0|z,0>M?M=-M:M>1023&&(M=1023)),p&&r&&(q*=r,1e-5>q?q=1e-5:q>.1&&(q=.1)),P=0;for(var cb=8;cb--;){if(X++,X>=L&&(X%=L,3==E))for(var db=ab.length;db--;)ab[db]=2*Math.random()-1;switch(E){case 0:O=l>X/L?.5:-.5;break;case 1:O=1-X/L*2;break;case 2:N=X/L,N=6.28318531*(N>.5?N-1:N),O=1.27323954*N+.405284735*N*N*(0>N?1:-1),O=.225*((0>O?-1:1)*O*O-O)+O;break;case 3:O=ab[Math.abs(32*X/L|0)]}p&&(K=W,s*=t,0>s?s=0:s>.1&&(s=.1),u?(V+=(O-W)*s,V*=J):(W=O,V=0),W+=V,U+=W-K,U*=1-q,O=U),x&&(_[Y%1024]=O,O+=_[(Y-M+1024)%1024],Y++),P+=O}P*=.125*T*v,a[bb]=Math.max(-1,Math.min(1,P))||0}return n}}var c=new b;return function(a,b){var d,e;return c._params.setSettings(a),e=new Float32Array(c.totalReset()),c.synthWave(e,e.length),d=b.createBuffer(1,e.length,44100),d.getChannelData(0).set(e),d}}),define("messaging",["util","vent"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l;return c=function(){i=a.getById("messenging"),j=i.querySelector("h1"),l=i.querySelector("h4")},d=function(){b.on("start",c),b.on("start-game",f),b.on("message",k)},e=function(){return i.classList.add("visible"),i},f=function(){return i.classList.remove("visible"),i},g=function(a){j.innerHTML=a},h=function(a){l.innerHTML=a},k=function(a,b,c){"number"==typeof b&&(c=b,b=""),g(a),h(b),e(),c&&setTimeout(f,c)},d(),{show:e,hide:f,header:g,subheader:h}}),define("particleEffects",["vent","util","Particle","spritePool"],function(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n=[],o="particles";f=function(){var a=b.getById("effects");h=a.getContext("2d"),g={width:a.width,height:a.height,ctx:h},m=[{fill:"rgba(243,125,0,%a)",life:25},{fill:"rgba(243,96,38,%a)",life:20},{fill:"rgba(242,148,78,%a)",life:20},{fill:"rgb(241,241,241,%a)",life:15}]},l=function(){a.on("start",function(){f(),a.on("effects-render",i),a.on("update",j),a.on("kaboom!",e),a.on("emit-fire",k)})},j=function(){for(var a=0;a<n.length;a++){var b=n[a];b.update(),b.life<=0&&(n.splice(a,1),b.destroyed=!0)}},i=function(){for(var a=0;a<n.length;a++){var b=n[a];b.render(h)}},e=function(a,b){for(var e,f=20*Math.random()+50,h=0;f>h;h++)e=d.recycle(o),e?c.call(e,g):(e=new c(g),d.register(o,e)),e.position.x=a,e.position.y=b,n.push(e.create())},k=function(a,e){for(var f,h,i=0;10>i;i++)h=m[Math.round(b.random(0,3))],f=d.recycle(o),f?c.call(f,g,!0):(f=new c(g,!0),d.register(o,f)),f.life=h.life,f.direction=-(Math.random()*Math.PI),f.size=b.random(1,3),f.fillStyle=h.fill.replace(/%a/,b.random(0,1)),f.position.x=a,f.position.y=e+25,n.push(f.create())},l()}),define("Sprite",["vent","util"],function(a,b){"use strict";function c(a){if(void 0===a)throw new Error("Sprites require a canvas context");this.canvas=a,a.ctx&&a.ctx.length&&(this.ctx=a.getNextContext()),this.position={x:0,y:0},this.size={width:50,height:50},this.id=b.guid(),this.bindEvents()}var d;return d=c.prototype,d.bindEvents=function(){var b=this;a.on("create",function(a){b.create.call(b,a)}),a.on("update",this.update.bind(this))},d.create=function(){return a.emit("entity-added",this),this},c}),define("spritePool",function(){"use strict";function a(a){return a.destroyed===!0}var b,c,d={};return b=function(a,b){"undefined"==typeof d[a]&&(d[a]=[]),d[a].push(b)},c=function(b){"undefined"==typeof d[b]&&(d[b]=[]);var c=d[b].filter(a);return c.length?(void 0!==c[0].recycle&&c[0].recycle(),c[0]):!1},{register:b,recycle:c,_registry:d}}),define("starField",["Star","SpeedLine","vent","util"],function(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l=[],m=[];k={starCount:300,lineCount:8},e=function(a){h=a,j=h.getContext("2d")},g=function(){c.on("start",function(){e(d.getById("bg")),f(),c.on("update",i)})},f=function(){for(var e=0;e<k.starCount;e++)l.push(new a(h).create());for(e=0;e<k.lineCount;e++)m.push(new b(h).create());var f={render:function(){j.clearRect(0,0,h.width,h.height);for(var a=0;a<l.length;a++){var b=l[a];d.circle(j,b.position.x,b.position.y,b.size,b.fillStyle)}for(a=0;a<m.length;a++){var c=m[a];d.rect(j,c.position.x,c.position.y,c.size.width,c.size.height,c.fillStyle)}}};c.emit("bg-item-added",f)},i=function(){for(var a,b,c,e=0;e<l.length;e++)c=l[e],c.physics.velocity=d.approach(c.physics.velocityGoal,c.physics.velocity,c.physics.friction),a=c.position.y+c.physics.velocity,a>c.canvas.height+c.size?c.restart():c.position.y=a;for(e=0;e<m.length;e++)b=m[e],b.physics.velocity=d.approach(b.physics.velocityGoal,b.physics.velocity,b.physics.friction),a=b.position.y+b.physics.velocity,a>b.canvas.height+b.size.height?b.restart():b.position.y=a},g()}),define("titleScreen",["util","vent"],function(a,b){var c,d,e,f,g,h,i,j;c=function(){j(),i=0,e[0].classList.add("on"),d()},j=function(){var b=a.QSA(".title");f=a.getById("title-screen"),e=[];for(var c=0;c<b.length;c++)e.push(b[c])},d=function(){b.on("keydown",h)},h=function(a){13===a.keyCode&&g()},g=function(){return i++,e[i]?(e[i-1].classList.remove("on"),void e[i].classList.add("on")):(e[i-1].classList.remove("on"),f.style.display="none",b.emit("start-game"),void b.off("keydown",h))},c()}),define("util",function(){"use strict";function a(a,b,c){var d=a-b;return d>c?b+c:-c>d?b-c:a}function b(a,b){return Math.random()*(b-a)+a}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function d(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function e(a,b,c,d,e,f){var g;if(a.beginPath(),a.fillStyle=e,a.arc(b,c,d,0,2*Math.PI,!1),void 0!==f)for(g in f)a[g]=f[g];a.fill(),void 0!==f&&void 0!==f.lineWidth&&a.stroke()}function f(a,b,c,d,e,f,g){var h;if(a.beginPath(),a.fillStyle=f,a.rect(b,c,d,e),void 0!==g)for(h in g)a[h]=g[h];a.fill()}function g(a,b,c,d,e,f,g){var h;if(a.beginPath(),a.strokeStyle=f,a.moveTo(b,c),a.lineTo(d,e),void 0!==g)for(h in g)a[h]=g[h];a.stroke()}function h(a,b,c,d,e,f,g,h,i){var j,k;if(!(3>e)){if(void 0!==g)for(j in g)a[j]=g[j];k=2*Math.PI/e,k=i?-k:k,a.beginPath(),a.save(),a.translate(b,c),a.rotate(h),a.moveTo(d,0);for(var l=1;e>l;l++)a.lineTo(d*Math.cos(k*l),d*Math.sin(k*l));a.closePath(),a.restore(),a.strokeStyle=f,a.stroke(),a.fillStyle=f,a.fill()}}function i(a){return a.charAt(0).toUpperCase()+a.slice(1)}return{getById:document.getElementById.bind(document),QS:document.querySelector.bind(document),QSA:document.querySelectorAll.bind(document),approach:a,guid:c,randomColor:d,random:b,circle:e,rect:f,line:g,polygon:h,capitalize:i}}),define("vent",function(){var a=function(){"use strict";function a(a){return e.call(a,0)}function b(a){return void 0!==f[a]?f[a]:d.test(a)?(f[a]=a.split(d),f[a]):(f[a]=[a],f[a])}function c(){this._cache={}}var d=/\s+/,e=Array.prototype.slice,f={};return c.prototype={constructor:c,on:function(){var a,c,d=Array.prototype.slice.call(arguments),f=b(d[0]),g=e.call(d,1);for(a=0;a<f.length;a++){c=f[a],this._cache[c]=this._cache[c]||[];for(var h=0;h<g.length;h++)this._cache[c].push(g[h])}return this},off:function(){var c,d,f=a(arguments),g=b(f[0]),h=[],i=e.call(f,1);for(d=0;d<g.length;d++)if(c=g[d],this._cache[c]=this._cache[c]||[],i.length){for(var j=0;j<this._cache[c].length;j++)for(var k=0;k<i.length;k++)this._cache[c][j]!==i[k]&&h.push(this._cache[c][j]);this._cache[c]=h}else delete this._cache[c];return this},emit:function(){var a,c,d,e,f=Array.prototype.slice.call(arguments),g=b(f[0]);for(f.splice(0,1),a=f,c=0;c<g.length;c++){d=g[c],e=this._cache[d]||[];for(var h=0;h<e.length;h++)switch(a.length){case 0:e[h]();break;case 1:e[h](a[0]);break;case 2:e[h](a[0],a[1]);break;case 3:e[h](a[0],a[1],a[2]);break;default:e[h].apply(null,a)}}return this}},c}.call(this);return new a});
//# sourceMappingURL=js13k.min.map</script>
</body>
</html>
