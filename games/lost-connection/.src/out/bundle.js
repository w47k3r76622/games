!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=25)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,a,u,f,h,p,l;t.__esModule=!0,s=n(2),a=o(s),u=n(16),f=o(u),h=n(8),p=o(h),l=function(e){function t(n){i(this,t);var o=r(this,e.call(this));return o._game=n,o.id=null,o.name=null,o.tweens=[],o._emitter=new p.default,o}return c(t,e),t.prototype.revalidate=function(){},t.prototype.tween=function(e){var t=new f.default(e,this);this.tweens.push(t)},t.prototype.update=function(e){var t=this;this.tweens.forEach(function(n,o){n.update(e),n.completed&&t.tweens.splice(o,1)})},t.prototype.clone=function(){var e=this.constructor,t=new e(this._game);return t._cloner=this,t.fromJSON(this.toJSON(),!0)},t.prototype.on=function(e,t){return this._emitter.on(e,t),this},t.prototype.trigger=function(e,t){this._emitter.trigger(e,t)},t.prototype.updateCloner=function(){return},t}(a.default),t.default=l},function(e,t,n){"use strict";t.isPointInRect=function(e,t,n){return e.x>t.x&&e.x<t.x+t.width&&e.y>t.y&&e.y<t.y+t.height},t.radToDeg=function(e){return 180*e/Math.PI},t.degToRad=function(e){return e*Math.PI/180},t.random=function(e,t){var n,o;return e>t&&(n=e,e=t,t=n),o=Math.random()*(t-e)+e,o>t?o=t:o<e&&(o=e),o};var o={};o.linear=function(e,t,n,o){return n*e/o+t},o.easeInQuad=function(e,t,n,o){return e/=o,n*e*e+t},o.easeOutQuad=function(e,t,n,o){return e/=o,-n*e*(e-2)+t},o.easeInOutQuad=function(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},t.ease=o},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r,c,s,a;t.__esModule=!0,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t){return!e||(0==e.indexOf("_")||(!(!t||!t.call)||"string"!=typeof t&&("number"!=typeof t&&("boolean"!=typeof t&&(!t||void 0)))))},c=function(e){return"string"==typeof e||"number"==typeof e},s=function e(t){var n,o,r,c,s,a,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0!==t&&"function"!=typeof t){if(null===t)return null;if("undefined"==typeof window||t!==window){if(f.indexOf(t)>-1)return t;if("[object Array]"===Object.prototype.toString.call(t)){for(n=[],o=0,r=t.length;o<r;o++)c=void 0,f.indexOf(t[o])>-1?c=t[o]:(f.push(t[o]),c=e(t[o],f)),n[o]=c;return n}if("object"===(void 0===t?"undefined":i(t))){s={};for(a in t){if(0==a.indexOf("_"))return;u=void 0,f.indexOf(t[a])>-1?u=t[a]:(f.push(t[a]),u=e(t[a],f)),s[a]=u}return s}return t}}},a=function(){function e(){o(this,e)}return e.prototype.fromJSON=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(t).forEach(function(o){if("type"!==o){if(!(o in e))throw console.error(e),"::fromJSON(): class "+e.constructor.name+" has no property "+o;if(e[o]=t[o],e[o])if(t[o].id&&t[o].type)e[o]=e._game._repository.getObject(t[o].id,t[o].type,n);else if(t[o].splice){var i=e[o];e[o]=[],i.forEach(function(t,i){t&&t.type&&t.id?e[o].push(e._game._repository.getObject(t.id,t.type,n)):c(t)&&e[o].push(t)})}}}),this.revalidate(),this},e.prototype.toJSON=function(){var e,t=this,n={};for(e in this)r(e,this[e])||(this[e].type&&this[e].id?n[e]={id:this[e].id,type:this[e].type}:this[e]&&this[e].splice?function(){var o=t[e],i=[];o.forEach(function(e){e&&e.type&&e.id?i.push({type:e.type,id:e.id}):c(e)&&i.push(s(e))}),n[e]=i}():n[e]=s(this[e]));return n},e}(),t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a,u,f;t.__esModule=!0,c=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=n(5),u=function(e){var t,n;if(e&&e.__esModule)return e;if(t={},null!=e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),f=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.type="GameObjectProto",r.width=0,r.height=0,r.spriteSheet=null,r.scale={x:1,y:1},r.vel={x:0,y:0},r.pos={x:0,y:0},r.angle=0,r.alpha=1,r.rigid=!1,r._behaviour=null,r.commonBehaviour=[],r.currFrameIndex=0,r._sprPosX=0,r._sprPosY=0,r.frameAnimations=[],r._currFrameAnimation=null,r._timeCreated=null,r.tileOffset={x:0,y:0},r.tileRepeat=!1,r.groupName="",r}return r(t,e),t.find=function(e){},t.findAll=function(e){},t.prototype.revalidate=function(){var e=this;this.setFrameIndex(this.currFrameIndex),this.spriteSheet&&(this.width=this.spriteSheet._frameWidth,this.height=this.spriteSheet._frameHeight),this.frameAnimations.forEach(function(t,n){e.frameAnimations[n]=e.frameAnimations[n].clone(),e.frameAnimations[n]._gameObject=e}),this.commonBehaviour.forEach(function(t){new(0,u[t.name])(e._game).manage(e,t.parameters)})},t.prototype.getRect=function(){return{x:this.pos.x,y:this.pos.y,width:this.width,height:this.height}},t.prototype.playFrameAnimation=function(e){var t=this.frameAnimations.find(function(t){return t.name===e});t._gameObject=this,this._currFrameAnimation=t,t.play()},t.prototype.setFrameIndex=function(e){this.currFrameIndex=e,this._sprPosX=this.spriteSheet.getFramePosX(this.currFrameIndex),this._sprPosY=this.spriteSheet.getFramePosY(this.currFrameIndex)},t.prototype.update=function(t,n){e.prototype.update.call(this,t),this._currFrameAnimation&&this._currFrameAnimation.update(t),this._game._renderer.draw(this),this._individualBehaviour&&this._individualBehaviour.onUpdate()},t.prototype.onShow=function(){this._individualBehaviour&&this._individualBehaviour.onCreate()},t.prototype.stopFrAnimations=function(){this._currFrameAnimation&&this._currFrameAnimation.stop()},t.prototype.kill=function(){this._layer.kill(this)},t}(s.default),t.default=f},function(e,t,n){"use strict";var o,i,r=n(9),c=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(24),a=function(e){var t,n;if(e&&e.__esModule)return e;if(t={},null!=e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u={width:800,height:500,startSceneId:"01_5"};o=new c.default({width:800,height:500,startSceneId:"01_5"}),o._repository.setDescriptions({SpriteSheet:[{id:"74_3",name:"board",width:777,height:480,resourcePath:"resources/board.svg"},{name:"1",width:50,height:50,resourcePath:"resources/1.svg",id:"81_0"},{name:"2",width:50,height:50,resourcePath:"resources/2.svg",id:"97_4"},{name:"3",width:50,height:50,resourcePath:"resources/3.svg",id:"45_7"},{name:"4",width:50,height:50,resourcePath:"resources/4.svg",id:"06_10"},{name:"5",width:50,height:50,resourcePath:"resources/5.svg",id:"88_13"},{name:"6",width:50,height:50,resourcePath:"resources/6.svg",id:"39_16"}],GameObjectProto:[{name:"board",width:777,height:480,spriteSheet:{id:"74_3",type:"SpriteSheet"},id:"39_4"},{id:"21_1",name:"connection_1",width:50,height:50,spriteSheet:{id:"81_0",type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:"37_0"}]},{id:"82_5",name:"connection_2",width:50,height:50,spriteSheet:{id:"97_4",type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:"36_1"}]},{id:"20_8",name:"connection_3",width:50,height:50,spriteSheet:{id:"45_7",type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:"04_2"}]},{id:"42_11",name:"connection_4",type:"GameObjectProto",width:50,height:50,spriteSheet:{id:"06_10",type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:"17_3"}]},{id:"47_14",name:"connection_5",width:50,height:50,spriteSheet:{id:"88_13",type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:"20_4"}]},{id:"50_17",name:"connection_6",width:50,height:50,spriteSheet:{id:"39_16",type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:"96_5"}]}],Scene:[{id:"01_5",name:"gameScene",layers:[{type:"Layer",id:"19_6"}]}],Layer:[{id:"19_6",name:"l1",gameObjects:[{type:"GameObject",id:"83_7"},{type:"GameObject",id:"06_2"},{type:"GameObject",id:"08_6"},{type:"GameObject",id:"74_9"},{type:"GameObject",id:"45_12"},{type:"GameObject",id:"00_15"},{type:"GameObject",id:"97_18"}]}],GameObject:[{id:"83_7",name:"board",width:777,height:480,spriteSheet:{id:"74_3",type:"SpriteSheet"},scale:{x:1,y:1},vel:{x:0,y:0},pos:{x:4,y:4},layerId:"19_6"},{id:"06_2",name:"connection_1",width:50,height:50,spriteSheet:{id:"81_0",type:"SpriteSheet"},layerId:"19_6"},{id:"08_6",name:"connection_2",width:50,height:50,spriteSheet:{id:"97_4",type:"SpriteSheet"},layerId:"19_6"},{id:"74_9",name:"connection_3",width:50,height:50,spriteSheet:{id:"45_7",type:"SpriteSheet"},layerId:"19_6"},{id:"45_12",name:"connection_4",width:50,height:50,spriteSheet:{id:"06_10",type:"SpriteSheet"},layerId:"19_6"},{id:"00_15",name:"connection_5",width:50,height:50,spriteSheet:{id:"88_13",type:"SpriteSheet"},layerId:"19_6"},{id:"97_18",name:"connection_6",width:50,height:50,spriteSheet:{id:"39_16",type:"SpriteSheet"},layerId:"19_6"}],ParticleSystem:[],CommonBehaviour:[{name:"Draggable",id:"37_0"},{name:"Draggable",id:"36_1"},{name:"Draggable",id:"04_2"},{name:"Draggable",id:"17_3"},{name:"Draggable",id:"20_4"},{name:"Draggable",id:"96_5"}]}),i=o._repository.getObject(u.startSceneId,"Scene"),i.layers.forEach(function(e){e.gameObjects.forEach(function(e){var t=""+e.name[0].toUpperCase()+e.name.substr(1)+"Behaviour",n=a[t];n&&e.setIndividualBehaviour(n)})}),o.runScene(i)},function(e,t,n){"use strict";var o,i;t.__esModule=!0,t.Draggable=void 0,o=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(o),t.Draggable=i.default},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(t){o(this,e),this.game=t,this.points={}}return e._getEventId=function(e){return e.id||1},e.prototype.manage=function(t,n){var o,i=this;t.on("click",function(n){i.points[e._getEventId(n)]={mX:n.objectX,mY:n.objectY,target:t,preventDefault:function(){this.defaultPrevented=!0}}}),o=this.game.getCurrScene(),o.on("mouseDown",function(t){var n=e._getEventId(t),o=i.points[n];o&&(o.dragStartX=o.target.pos.x,o.dragStartY=o.target.pos.y)}),o.on("mouseMove",function(n){var o=e._getEventId(n),r=i.points[o];if(r){if(!r.dragStart&&(r.dragStart=!0,r.target.trigger("dragStart",r),r.defaultPrevented))return void delete i.points[o];t.pos.x=n.screenX-r.mX,t.pos.y=n.screenY-r.mY}}),o.on("mouseUp",function(n){var o=e._getEventId(n),r=i.points[o];r&&(r.dragStart&&(r.x=t.pos.x,r.y=t.pos.y,r.target.trigger("dragStop",r)),delete i.points[o])})},e}();t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r,c,s;t.__esModule=!0,i=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(i),c="ontouchstart"in window,s=function(){function e(t){o(this,e),this.game=t,this.objectsCaptured={}}return e.prototype.listenTo=function(e){var t=this;c?({},e.ontouchstart=function(e){for(var n=e.touches.length;n--;)t.resolveClick(e.touches[n])},e.ontouchend=e.ontouchcancel=function(e){for(var n=e.changedTouches.length;n--;)t.resolveMouseUp(e.changedTouches[n])},e.ontouchmove=function(e){for(var n=e.touches.length;n--;)t.resolveMouseMove(e.touches[n])}):(e.onmousedown=function(e){0===e.button&&t.resolveClick(e)},e.onmouseup=function(e){t.resolveMouseUp(e)},e.onmousemove=function(e){t.resolveMouseMove(e)},e.ondblclick=function(e){t.resolveDoubleClick(e)})},e.prototype.resolveScreenPoint=function(e){return{x:~~((e.clientX-this.game.pos.x)/this.game.scale.x),y:~~((e.clientY-this.game.pos.y)/this.game.scale.y),id:e.identifier||0}},e.prototype.triggerEvent=function(e,t){var n,o,i,c,s,a=this.game.getCurrScene();if(a){n=this.resolveScreenPoint(e);e:for(o=0;o<a.layers.length;o++)for(i=a.layers[a.layers.length-1-o],c=0;c<i.gameObjects.length;c++)if(s=i.gameObjects[i.gameObjects.length-1-c],r.default.isPointInRect(n,s.getRect())){s.trigger(t,{screenX:n.x,screenY:n.y,objectX:n.x-s.pos.x,objectY:n.y-s.pos.y,id:n.id}),a.trigger(t,{screenX:n.x,screenY:n.y,id:n.id,target:s});break e}return n}},e.prototype.resolveClick=function(e){if(!window.canceled){this.triggerEvent(e,"click");this.triggerEvent(e,"mouseDown")}},e.prototype.resolveMouseMove=function(e){var t,n;(t=this.triggerEvent(e,"mouseMove"))&&(n=this.objectsCaptured[t.id],n&&n!=t.object&&(n.trigger("mouseLeave"),delete this.objectsCaptured[t.id]),t.object&&n!=t.object&&(t.object.trigger("mouseEnter"),this.objectsCaptured[t.id]=t.object))},e.prototype.resolveMouseUp=function(e){var t,n;(t=this.triggerEvent(e,"mouseUp"))&&(n=this.objectsCaptured[t.id])&&(n.trigger("mouseUp"),delete this.objectsCaptured[t.id])},e.prototype.resolveDoubleClick=function(e){var t=this.triggerEvent(e,"doubleClick");t&&delete this.objectsCaptured[t.id]},e}(),t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(){o(this,e),this.events={}}return e.prototype._on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},e.prototype.on=function(e,t){"string"==typeof e?this._on(e,t):e.splice&&e.forEach(function(e){this._on(e,t)})},e.prototype.trigger=function(e,t){var n,o=this.events[e];if(o)for(n=o.length;n--;)o[n](t)},e}();t.default=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,a,u,f,h,p,l,d,m;t.__esModule=!0,n(11),s=n(14),a=o(s),u=n(15),f=o(u),h=n(7),p=o(h),l=n(2),d=o(l),m=function(e){function t(n){var o,c;return i(this,t),o=r(this,e.call(this)),o.pos={x:0,y:0},o.scale={x:1,y:1},Object.keys(n).forEach(function(e){o[e]=n[e]}),o._currentScene=null,c=Date.now(),o._lastTime=c,o._currTime=c,o._deltaTime=0,o._running=!1,o._repository=new f.default(o),o.mouse=new p.default(o),o}return c(t,e),t.prototype.getTime=function(){return this._lastTime},t.prototype.getDeltaTime=function(){return this._deltaTime},t.prototype.runScene=function(e){var n=this;this._renderer||(this._renderer=a.default.getRenderer(this),this.mouse.listenTo(this._renderer.container)),e.preload(function(){n._currentScene=e,n._currentScene.onShow(),n._running||(t.update(n),n._running=!0)})},t.prototype.getCurrScene=function(){return this._currentScene},t.prototype.setCurrScene=function(e){this._currentScene=e},t.update=function(e){requestAnimationFrame(function(){t.update(e)}),e._lastTime=e._currTime,e._currTime=Date.now(),e._deltaTime=e._currTime-e._lastTime,e._currentScene&&e._currentScene.update(e._currTime,e._deltaTime)},t}(d.default),t.default=m},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(){o(this,e),this.tasksResolved=0,this.tasks=[],this.tasksProgressById={},this.tasts=[],this.onResolved=null,this.onProgress=null}return e.prototype.size=function(){return this.tasks.length},e.prototype.calcProgress=function(){var e=0;return Object.keys(this.tasksProgressById).forEach(function(t){e+=this.tasksProgressById[t]||0}),e/this.tasks.length},e.prototype.addTask=function(e,t){this.tasks.push(e),this.tasksProgressById[t]=0},e.prototype.progressTask=function(e,t){this.tasksProgressById[e]=t,this.onProgress&&this.onProgress(this.calcProgress())},e.prototype.resolveTask=function(e){this.tasksResolved++,this.tasksProgressById[e]=1,this.tasks.length==this.tasksResolved?(this.onProgress&&this.onProgress(1),this.onResolved&&this.onResolved()):this.onProgress&&this.onProgress(this.calcProgress())},e.prototype.start=function(){0==this.size()&&this.onResolved(),this.tasks.forEach(function(e){e&&e()})},e}();t.default=i},function(e,t,n){"use strict";Array.prototype.remove=function(e){for(var t=this.length;t--;)e(this[t],t)&&this.splice(t,1)},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(t){o(this,e),this.game=t,this.renderableCache={},this.container=null}return e.prototype.onResize=function(){var e=this.container.height/this.container.width,t=window.innerHeight/window.innerWidth,n=void 0,o=void 0;t<e?(o=window.innerHeight,n=o/e):(n=window.innerWidth,o=n*e),this.game.scale.x=n/this.game.width,this.game.scale.y=o/this.game.height,this.game.pos.x=(window.innerWidth-n)/2,this.game.pos.y=(window.innerHeight-o)/2,this.container.style.width=n+"px",this.container.style.height=o+"px"},e.prototype.registerResize=function(){var e=this;this.onResize(),window.addEventListener("resize",function(){e.onResize()})},e.prototype.loadTextureInfo=function(e,t){},e.prototype.getTextureInfo=function(e){},e}();t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a;t.__esModule=!0,c=n(12),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=function(e){function t(n){var r,c;return o(this,t),r=i(this,e.call(this,n)),c=document.createElement("canvas"),r.ctx=c.getContext("2d"),document.body.appendChild(c),c.setAttribute("width",n.width),c.setAttribute("height",n.height),r.container=c,r.registerResize(),r}return r(t,e),t.prototype.draw=function(e){var t=this.ctx;t.save(),t.translate(e.pos.x+e.width/2,e.pos.y+e.height/2),t.scale(e.scale.x,e.scale.y),t.rotate(e.angle),t.translate(-e.width/2,-e.height/2),t.globalAlpha=e.alpha,t.globalCompositeOperation=e.blendMode||"source-over",t.drawImage(this.renderableCache[e.spriteSheet.resourcePath],e._sprPosX,e._sprPosY,e.width,e.height,0,0,e.width,e.height),t.restore()},t.prototype.drawImage=function(e,t,n,o,i,r,c){this.ctx.drawImage(e,t,n,o,i,r,c,o,i)},t.prototype.fillRect=function(e,t,n,o,i){this.ctx.fillStyle=i,this.ctx.fillRect(e,t,n,o)},t.prototype.setAlpha=function(e){this.ctx.globalAlpha=e},t.prototype.lockRect=function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(e.x,e.y,e.width,e.height),this.ctx.clip()},t.prototype.unlockRect=function(){this.ctx.restore()},t.prototype.clear=function(){this.ctx.clearRect(0,0,this.game.width,this.game.height)},t.prototype.loadTextureInfo=function(e,t){var n=this,o=new Image;o.src=e,o.onload=function(){var i,r=document.createElement("canvas");r.setAttribute("width",o.width),r.setAttribute("height",o.height),i=r.getContext("2d"),i.drawImage(o,0,0),n.renderableCache[e]=r,t()}},t}(s.default),t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r,c;t.__esModule=!0,i=n(13),r=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(){function e(){o(this,e)}return e.getRenderer=function(e){if(!e)throw"RendererFactory::getRenderer: game param not specified";return new r.default(e)},e}(),t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r,c;t.__esModule=!0,i=n(17),r=function(e){var t,n;if(e&&e.__esModule)return e;if(t={},null!=e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),c=function(){function e(t){o(this,e),this._game=t,this.reset()}return e.prototype.addDescription=function(e,t){this.descriptions[t]||(this.descriptions[t]=[]),this.descriptions[t].push(e)},e.prototype.setDescriptions=function(e){var t=this;Object.keys(e).forEach(function(n){e[n].forEach(function(e){t.addDescription(e,n)})})},e.prototype.getObject=function(e,t){var n,o,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n=r[t],!(o=this.descriptions[t].find(function(t){return t.id==e})))throw'can not find object "'+t+'" with id '+e;return!i&&this.cache[o[e]]||(this.cache[e]=new n(this._game).fromJSON(o)),this.cache[e]},e.prototype.addObject=function(e){this.arrays[e.type]||(this.arrays[e.type]=[]),this.arrays[e.type].push(e),this.descriptions[e.type]||(this.descriptions[e.type]=[]),this.descriptions[e.type].push(e.toJSON())},e.prototype.updateObject=function(e){var t,n=e.toJSON(),o=this.descriptions[e.type].findIndex(function(t){return t.id==e.id});this.descriptions[e.type][o]=n,(t=this.getObject(e.id,e.type,!0))&&t.fromJSON(n)},e.prototype.removeObject=function(e){this.arrays[e.type]||(this.arrays[e.type]=[]);var t=this.arrays[e.type].findIndex(function(t){return t.id===e.id});this.arrays[e.type].splice(t,1),this.descriptions[e.type]||(this.descriptions[e.type]=[]),t=this.descriptions[e.type].findIndex(function(t){return t.id===e.id}),this.descriptions[e.type].splice(t,1),delete this.cache[e.id]},e.prototype.getArray=function(e){var t,n=this;return this.arrays[e]?this.arrays[e]:(t=[],this.descriptions[e]||(this.descriptions[e]=[]),this.descriptions[e].forEach(function(o){t.push(n.getObject(o.id,e))}),this.arrays[e]=t)},e.prototype.reset=function(){this.descriptions={},this.arrays={},this.cache={}},e}(),t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r,c;t.__esModule=!0,i=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(){function e(t,n){o(this,e),this.obj=t.target||n,this.propsToChange=[],this.startedTime=null,this.progressFn=t.progress,this.completeFn=t.complete,this.easeFnName=t.ease||"linear",this.completed=!1,this.tweenTime=t.time||1e3,this.desc=this.normalizeDesc(t)}return e.prototype.normalizeDesc=function(e){var t,n=this;return e.from=e.from||{},e.to=e.to||{},t={},Object.keys(e.from).forEach(function(e){t[e]=!0}),Object.keys(e.to).forEach(function(e){t[e]=!0}),this.propsToChange=Object.keys(t),this.propsToChange.forEach(function(t){void 0===e.from[t]&&(e.from[t]=n.obj[t]),void 0===e.to[t]&&(e.to[t]=n.obj[t])}),e},e.prototype.update=function(e){var t,n,o;if(this.startedTime||(this.startedTime=e),!this.completed){if((t=e-this.startedTime)>this.tweenTime)return void this._complete();for(n=this.propsToChange.length;n--;)o=this.propsToChange[n],this.obj[o]=r.default.ease[this.easeFnName](t,this.desc.from[o],this.desc.to[o]-this.desc.from[o],this.tweenTime);this.progressFn&&this.progressFn(this.obj)}},e.prototype.progress=function(e){this.progressFn=e},e.prototype.reset=function(){this.startedTime=null,this.completed=!1},e.prototype._complete=function(){var e,t;if(!this.completed){for(e=this.propsToChange.length;e--;)t=this.propsToChange[e],this.obj[t]=this.desc.to[t];this.progressFn&&this.progressFn(this.obj),this.completeFn&&this.completeFn(this.obj),this.completed=!0}},e}(),t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i,r,c,s,a,u,f,h,p,l,d,m,y,g;t.__esModule=!0,t.Layer=t.Scene=t.ParticleSystem=t.CommonBehaviour=t.GameObject=t.GameObjectProto=t.SpriteSheet=void 0,i=n(23),r=o(i),c=n(3),s=o(c),a=n(19),u=o(a),f=n(18),h=o(f),p=n(21),l=o(p),d=n(22),m=o(d),y=n(20),g=o(y),t.SpriteSheet=r.default,t.GameObjectProto=s.default,t.GameObject=u.default,t.CommonBehaviour=h.default,t.ParticleSystem=l.default,t.Scene=m.default,t.Layer=g.default},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a;t.__esModule=!0,c=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.type="CommonBehaviour",r.parameters=[],r.description=null,r}return r(t,e),t}(s.default),t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a;t.__esModule=!0,c=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.type="GameObject",r.layerId=null,r}return r(t,e),t.prototype.setIndividualBehaviour=function(e){var t=new e;t.game=this._game,t.object=this,this._individualBehaviour=t},t}(s.default),t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a;t.__esModule=!0,c=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.type="Layer",r.gameObjects=[],r}return r(t,e),t.prototype.addGameObject=function(e){e._layer=this,this.gameObjects.push(e)},t.prototype.getAllSpriteSheets=function(){var e=[];return this.gameObjects.forEach(function(t){t.spriteSheet&&!e.find(function(e){return t.id===e.id})&&e.push(t.spriteSheet)}),e},t.prototype.onShow=function(){this.gameObjects.forEach(function(e){e.onShow()})},t.prototype.kill=function(e){this.gameObjects.remove(function(t){return t.id===e.id})},t.prototype.update=function(e,t){for(var n,o=this.gameObjects,i=o.length,r=i-1;i--;)(n=o[r-i])&&n.update(e,t)},t}(s.default),t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a,u,f,h;t.__esModule=!0,c=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=n(1),u=function(e){var t,n;if(e&&e.__esModule)return e;if(t={},null!=e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),f=function(e){return u.random(e.from,e.to)},h=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.type="ParticleSystem",r.gameObjectProto=null,r._particles=[],r.numOfParticlesToEmit={from:1,to:10},r.particleAngle={from:0,to:0},r.particleVelocity={from:1,to:100},r.particleLiveTime={from:100,to:1e3},r.emissionRadius=0,r}return r(t,e),t.prototype.revalidate=function(){this.particleAngle.to<this.particleAngle.from&&(this.particleAngle.to+=2*Math.PI)},t.find=function(e){},t.findAll=function(e){},t.prototype.emit=function(e,t){var n,o,i,r;for(n=0;n<f(this.numOfParticlesToEmit);n++)o=this.gameObjectProto.clone(),i=f(this.particleAngle),r=f(this.particleVelocity),o.vel.x=r*Math.cos(i),o.vel.y=r*Math.sin(i),o.pos.x=f({from:e-this.emissionRadius,to:e+this.emissionRadius}),o.pos.y=f({from:t-this.emissionRadius,to:t+this.emissionRadius}),o.liveTime=f(this.particleLiveTime),this._particles.push(o)},t.prototype.update=function(e,t){for(var n,o=this._particles,i=o.length,r=i-1;i--;)(n=o[r-i])&&(n._timeCreated||(n._timeCreated=e),e-n._timeCreated>n.liveTime&&this._particles.splice(this._particles.indexOf(n),1),n.update(e,t))},t}(s.default),t.default=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,a,u,f,h;t.__esModule=!0,s=n(0),a=o(s),u=n(10),f=o(u),h=function(e){function t(n){i(this,t);var o=r(this,e.call(this,n));return o.type="Scene",o.alpha=1,o.layers=[],o.useBG=!1,o.colorBG={r:255,g:255,b:255},o._tweenMovies=[],o.tileMap={_spriteSheet:null,spriteSheetId:null,width:0,height:0,data:[]},o}return c(t,e),t.prototype.addTweenMovie=function(e){this._tweenMovies.push(e)},t.prototype.getAllSpriteSheets=function(){var e={};return this.layers.forEach(function(t){t.getAllSpriteSheets().forEach(function(t){e[t.id]=t})}),Object.keys(e).map(function(t){return e[t]})},t.prototype.preload=function(e){var t=this,n=this.getAllSpriteSheets(),o=new f.default;o.onResolved=function(){e&&e()},n.forEach(function(e){o.addTask(function(){t._game._renderer.loadTextureInfo(e.resourcePath,function(){return o.resolveTask(e.id)})},e.id)}),o.start()},t.prototype.onShow=function(){this.layers.forEach(function(e){e.onShow()})},t.prototype.update=function(e,t){var n,o,i;for(this._game._renderer.clear(),n=this.layers,o=this.layers.length,i=o-1;o--;)n[o-i].update(e,t)},t.prototype.fadeIn=function(e,t){return this.tween(this,{to:{alpha:1}},e,t)},t.prototype.fadeOut=function(e,t){return this.tween(this,{to:{alpha:0}},e,t)},t.prototype.tween=function(e,t,n,o){var i=new tweenMovieModule.TweenMovie,r=new tweenModule.Tween(e,t,n,o);i.tween(0,r),i.play()},t.prototype._render=function(){},t.prototype.getTileAt=function(e,t){var n,o;return this.tileMap._spriteSheet?(n=~~(e/this.tileMap._spriteSheet._frameWidth),o=~~(t/this.tileMap._spriteSheet._frameHeight),this.tileMap.data[o]&&this.tileMap.data[o][n]):null},t.prototype.printText=function(e,t,n,o){n&&(n.substring||(n=JSON.stringify(n,null,4)),this.game.renderer.printText(e,t,n,o))},t.prototype.log=function(e){this.printText(0,0,e)},t}(a.default),t.default=h},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,a;t.__esModule=!0,c=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.type="SpriteSheet",r.width=0,r.height=0,r.numOfFramesH=1,r.numOfFramesV=1,r._frameWidth=0,r._frameHeight=0,r._numOfFrames=0,r.resourcePath="",r}return r(t,e),t.prototype.revalidate=function(){this.numOfFramesH&&this.numOfFramesV&&(this._frameWidth=~~(this.width/this.numOfFramesH),this._frameHeight=~~(this.height/this.numOfFramesV),this._numOfFrames=this.numOfFramesH*this.numOfFramesV)},t.prototype.getFramePosX=function(e){return e%this.numOfFramesH*this._frameWidth},t.prototype.getFramePosY=function(e){return~~(e/this.numOfFramesH)*this._frameHeight},t}(s.default),t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r;t.__esModule=!0,i={letterData:["","1818181818181800001818","36363636","00006666ff6666ff6666","187effd8f87e1f1bff7e18","70d8db760c18306edb1b0e","386cccccd87070d8cfc67f","0e0c1c18","0c1830303030303030180c","30180c0c0c0c0c0c0c1830","0000995a3cff3c5a99","0000181818ffff181818","000000000000001c1c1830","0000000000ffff","00000000000000003838","030306060c0c181830306060","3c66c3c7cfdbf3e3c3663c","183878181818181818187e","7ee703060c183060c0c0ff","7ee70303077e070303e77e","0c1c3c6cccff0c0c0c0c0c","ffc0c0c0c0fe070303e77e","7ee7c0c0c0fec7c3c3e77e","ff030303060c1830303030","7ee7c3c3e77ee7c3c3e77e","7ee7c3c3e77f030303e77e","00000000383800003838","0000001c1c00001c1c1830","060c183060c06030180c06","00000000ffff00ffff","6030180c0603060c183060","7ec3c303060c1818000018","0000007ec3ddd3dbcf603f","183c66c3c3c3ffc3c3c3c3","fec7c3c3c7fec7c3c3c7fe","7ee7c0c0c0c0c0c0c0e77e","fccec7c3c3c3c3c3c7cefc","ffc0c0c0c0fcc0c0c0c0ff","ffc0c0c0fcc0c0c0c0c0c0","7ee7c0c0c0c0cfc3c3e77e","c3c3c3c3c3ffc3c3c3c3c3","7e1818181818181818187e","0606060606060606c6ee7c","c3c6ccd8f0e0f0d8ccc6c3","c0c0c0c0c0c0c0c0c0c0ff","c3e7ffffdbc3c3c3c3c3c3","e3e3f3f3fbdbdfcfcfc7c7","7ee7c3c3c3c3c3c3c3e77e","fec7c3c3c7fec0c0c0c0c0","3c66c3c3c3c3c3dbdf6e3f","fec7c3c3c7fef0d8ccc6c3","7ee7c0c0e07e070303e77e","ff18181818181818181818","c3c3c3c3c3c3c3c3c3e77e","c3c3c3c3c3c366663c3c18","c3c3c3c3c3dbdbffffe7c3","c366663c3c183c3c6666c3","c366663c3c181818181818","ff0303060c7e3060c0c0ff","3c3030303030303030303c","6060303018180c0c06060303","3c0c0c0c0c0c0c0c0c0c3c","183c66c3","0000000000000000000000ffff","70303818","000000007ec3037fc3c37f","c0c0c0c0c0fec3c3c3c3fe","000000007ec3c0c0c0c37e","03030303037fc3c3c3c37f","000000007ec3c3fec0c07f","1e33303030fc3030303030","000000007ec3c3c37f0303c37e","c0c0c0c0fec3c3c3c3c3c3","0018000018181818181818","000c00000c0c0c0c0c0c0c6c38","c0c0c0c0c6ccd8f0f8ccc6","781818181818181818187e","00000000fedbdbdbdbdbdb","00000000fcc6c6c6c6c6c6","000000007cc6c6c6c6c67c","00000000fec3c3c3c3fec0c0c0","000000007fc3c3c3c37f030303","00000000fee0c0c0c0c0c0","000000007fc0c07e0303fe","00303030fc30303030361c","00000000c6c6c6c6c6c67e","00000000c3c366663c3c18","00000000c3c3c3dbffe7c3","00000000c3663c183c66c3","00000000c366663c18306060c0","00000000ff060c183060ff","0f18181838f0381818180f0000","18181818181818181818181818","f01818181c0f1c181818f0","00000060f18f06"],sprites:{man:[[6,6,0,14,7,6,11,25],[6,6,0,6,6,6,6,14]]},pixels:[],game:null,create:function(e){var t,n,o,i=this;for(this.letters=[],this.uncompress=function(e,t){i.letterData.forEach(function(e,t){i.letters[t]=[];var n=e.match(/[\s\S]{1,2}/g);n&&n.forEach(function(e,n){i.letters[t][n]=parseInt(e,16)})})},this.letterData.forEach(function(e,t){i.letters[t]=[];var n=e.match(/[\s\S]{1,2}/g);n&&n.forEach(function(e,n){i.letters[t][n]=parseInt(e,16)})}),this.game=e.game,t=0;t<16;t++)for(this.pixels[t]=[],n=0;n<104;n++)this.pixels[t][n]||(this.pixels[t][n]=[]),o={},o.pos={x:e.object.pos.x+6*n+74,y:e.object.pos.y+6*t+75},o.alpha=.1,o.color="#bbb",this.pixels[t][n]=o},draw:function(){var e,t,n,o=this.game._renderer;for(e=0;e<16;e++)for(t=0;t<104;t++)n=this.pixels[e][t],o.setAlpha(n.alpha),o.fillRect(n.pos.x,n.pos.y,5,5,n.color),n.alpha=.1},drawSprite:function(e,t,n,o,i,r){var c,s,a,u,f,h="";for(c=0;c<i;c++){for(s=n[c],a=1<<o-1,u=0;u<o;u++)f=(a&s)>0?1:0,f&&this.pixels[t+c]&&this.pixels[t+c][e+u]&&(this.pixels[t+c][e+u].alpha=1),a>>=1,r&&(h+=f?"*":" ");r&&(h+="\n")}return h},printLetter:function(e,t,n,o){return this.drawSprite(e,t,this.letters[n],8,13,o)},printString:function(e,t,n,o){var i=this,r="";return n.split("").map(function(e){return e.charCodeAt(0)}).forEach(function(n){r+=i.printLetter(e,t,n-32,o),e+=9}),{res:r,x:e,y:t}}},r={clamp:function(e,t,n){return e<t?t:e>n?n:e},cellFromXY:function(e,t){var n=~~((e-this.parent.object.pos.x-60)/50),o=~~((t-this.parent.object.pos.y-200)/50);return n=this.clamp(n,0,this.w-1),o=this.clamp(o,0,this.h-1),{cellX:n,cellY:o}},posFromCellXY:function(e,t){return{posX:50*e+this.parent.object.pos.x+60,posY:50*t+this.parent.object.pos.y+200}},objects:[],w:13,h:4,limit:0,isConnected:!1,getObjMatrix:function(e){switch(e){case 1:return[[0,1,0],[1,0,1],[0,0,0]];case 2:return[[0,1,0],[1,0,1],[0,1,0]];case 3:case 4:case 5:return[[0,0,0],[1,0,1],[0,0,0]];case 6:return[[0,0,0],[1,0,0],[0,1,0]]}},_checkConnectedItem:function(e,t,n,o){if(n&&!n.checked){e.matrix[t.j][t.i]&&n.matrix[o.j][o.i]&&((e.main||e.connected||n.main||n.connected)&&(n.connected=!0),n.checked=!0,n.blendMode=n.connected||n.main?"overlay":"",this.checkConnected(n))}},checkConnected:function(e){var t,n,o,i;e.main&&(e.connected=!0,e.alpha=.7),t=this.objects[e.j][e.i-1],n=this.objects[e.j][e.i+1],o=this.objects[e.j-1]&&this.objects[e.j-1][e.i],i=this.objects[e.j+1]&&this.objects[e.j+1][e.i],this._checkConnectedItem(e,{j:1,i:0},t,{j:1,i:2}),this._checkConnectedItem(e,{j:1,i:2},n,{j:1,i:0}),this._checkConnectedItem(e,{j:0,i:1},o,{j:2,i:1}),this._checkConnectedItem(e,{j:2,i:1},i,{j:0,i:1}),e.blendMode=e.connected||e.main?"overlay":"",e.checked=!0},iterateAll:function(e){var t,n;for(t=0;t<this.h;t++)for(n=0;n<this.w;n++)this.objects[t]&&this.objects[t][n]&&e(this.objects[t][n])},checkAllConnected:function(){this.iterateAll(function(e){e.checked=e.connected=!1,e.blendMode=""}),this.checkConnected(this.mainObject);var e=!0;this.iterateAll(function(t){e=e&&t.connected}),this.isConnected=e},rotateMatrix:function(e){var t,n,o=[];for(t=0;t<e.length;t++)for(o[t]=[],n=0;n<e[t].length;n++)o[t][n]=e[e[t].length-n-1][t];return o},create:function(e){var t,n,o,i,r,c,s=this;for(this.limit+=3,this.isConnected=!1,this.iterateAll(function(e){e.kill()}),this.parent=e,this.game=e.game,t=!1,n=null,o=0,i=0;i<this.h;i++)for(this.objects[i]=[],r=function(r){var c,a,u;return o>s.limit?"continue":Math.random()<.5?(s.objects[i][r]=null,"continue"):(c=1+~~(6*Math.random()),a=s.game._repository.getArray("GameObjectProto").find(function(e){return e.name==="connection_"+c}),u=a.clone(),o++,u.pos={x:e.object.pos.x+50*r+60,y:e.object.pos.y+50*i+200},u.j=i,u.i=r,!t&&Math.random()>.8?(u.main=!0,s.mainObject=u,t=!0):n=u,u.matrix=s.getObjMatrix(c),s.objects[i][r]=u,u.on("doubleClick",function(){if(!u._rotationLocked&&!u._moveLocked){u._rotationLocked=!0;var e=u.angle+Math.PI/2;u.tween({complete:function(){u._rotationLocked=!1,u.matrix=s.rotateMatrix(u.matrix),s.checkAllConnected()},to:{angle:e},time:500})}}),u.on("dragStart",function(e){u._moveLocked&&e.preventDefault()}),u.on("dragStop",function(e){var t,n,o,i,r;u._moveLocked=!0,t=s.cellFromXY(e.x+e.mX,e.y+e.mY),n=s.cellFromXY(e.dragStartX,e.dragStartY),o=s.posFromCellXY(n.cellX,n.cellY),i=s.posFromCellXY(t.cellX,t.cellY),r=s.objects[t.cellY]&&s.objects[t.cellY][t.cellX],r?u.tween({complete:function(){u._moveLocked=!1},target:u.pos,to:{x:o.posX,y:o.posY},time:500}):(u.tween({complete:function(){u._moveLocked=!1,u.j=t.cellY,u.i=t.cellX,s.checkAllConnected()},target:u.pos,time:500,to:{x:i.posX,y:i.posY}}),s.objects[n.cellY][n.cellX]=null,s.objects[t.cellY][t.cellX]=u)}),void s.game.getCurrScene().layers[0].addGameObject(u))},c=0;c<this.w;c++){r(c)}t||(n.main=!0,this.mainObject=n),this.checkAllConnected()}},t.BoardBehaviour=function(){function e(){o(this,e),this.txtPos=0,this.txt=""}return e.prototype.onCreate=function(){var e=this;i.create(this),r.create(this),this.object._game.getCurrScene().on("click",function(){r.isConnected&&r.create(e)}),console.log(i.printString(0,0,"js13k",!0).res)},e.prototype.onUpdate=function(){var e,t,n,o,c,s=this.game.getDeltaTime();r.isConnected?(this.txt="CONNECTED!!!",i.printString(0,3,this.txt)):(this.txt="LOST connection!!!",this.txtPos-=s/1e3*20,this.txtPos<9*-this.txt.length-5&&(this.txtPos=109),e=~~this.txtPos,t=i.printString(e,3,this.txt),n=t.x,o=t.y,e<0&&(e=-e),c=e%6,c=c<=3?0:1,i.drawSprite(n,o+3,i.sprites.man[c],5,8)),i.draw()},e}()},function(e,t,n){e.exports=n(4)}]);