<!DOCTYPE html><html lang="en"><head><title>js13k - Satellite Situation</title><style>body{background-color:#313b58;color:#c2c2c2;padding-top:20px;font-family:Trebuchet MS,Arial,Helvetica,sans-serif}h3{margin-bottom:5px}hr{margin:0 auto;width:50%;border:1px solid #a44e4e}a{color:#a44e4e;text-decoration:none;font-weight:700}a:hover{text-decoration:underline}#l{position:fixed;z-index:1;background-color:rgba(0,0,0,.5);width:100%;height:100%;top:0;left:0}#m{position:fixed;top:50%;left:50%;width:500px;height:300px;margin-left:-230px;margin-top:-150px;background-color:#000;z-index:2;border:10px double #a44e4e;border-radius:20px;padding:10px;box-sizing:border-box;text-align:center}#o{position:absolute;top:-100px;width:100%;left:0}#c,#f{display:flex;flex-direction:column}.w{display:flex;justify-content:center;align-items:center}.w .s{position:unset;margin-right:20px}.w .s:last-child{margin-right:0}.b{width:150px;margin:0 auto;background-color:#a44e4e;height:40px;border:none;border-radius:5px;color:#c2c2c2;font-family:Trebuchet MS,Arial,Helvetica,sans-serif;font-size:24px;text-transform:uppercase}.b.p{margin-top:20px;margin-bottom:20px}.b:hover{cursor:pointer;background-color:#743939;color:#747474}.z{display:flex;align-items:center;width:320px;margin:0 auto}.z .b{width:40px}#g{position:fixed;width:650px;height:700px;top:50%;left:50%;margin-left:-300px;margin-top:-350px;background-color:#000}#s{display:flex;justify-content:space-around;background-color:#a44e4e}#v{height:650px;display:flex;align-items:center;justify-content:center}#p{width:100px;height:100px;background:url(sprite.png)}.i{position:absolute;width:200px;height:200px}.i.d{-webkit-animation:spin-right 15s linear infinite;animation:spin-right 15s linear infinite}#a{position:absolute;left:84px;top:-16px}#b{position:fixed;width:512px;height:512px;transform:rotate(0)}#e{position:absolute;top:-32px;left:224px;width:64px;height:64px;background:url(sprite.png) -428px 0}#j,#k{position:absolute;top:-32px;width:32px;height:32px;background:url(sprite.png) -300px 0}#k{left:188px;transform:rotate(180deg)}#j{left:292px}@-webkit-keyframes spin-right{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spin-left{100%{-webkit-transform:rotate(-360deg);-moz-transform:rotate(-360deg);-ms-transform:rotate(-360deg);-o-transform:rotate(-360deg);transform:rotate(-360deg)}}.s{position:fixed;z-index:9;width:32px;height:32px}.s.s1{background:url(sprite.png) -332px 0}.s.s2{background:url(sprite.png) -364px 0}.s.s3{background:url(sprite.png) -396px 0}.h{display:none!important}</style></head><body><div id="m"><div id="q"><div class="z"><p>Select level:</p><button class="b" onclick="sg(1)">1</button><button class="b" onclick="sg(2)">2</button><button class="b" onclick="sg(3)">3</button></div><h3>Controls</h3><hr><p>A / D -- Left / Right arrows -> Move spaceship<p>Spacebar -> Shoot satellite</p><h3>Credits</h3><hr><p>Game created by<a href="http://kehosworld.itch.io" target="_blank">KehosWorld</a> for<a href="https://js13kgames.com/" target="_blank">js13k 2021</a></div><div id="o" class="h"><h2>Game Over</h2></div><div id="c" class="h"><h3>Level complete!</h3><hr><button class="b p" onclick="sg(0)">Next Level</button><button class="b" onclick="gt()">Main menu</button></div><div id="f" class="h"><h3>Game complete!</h3><hr><p>Thank you for playing</p><div class="w"><div class="s s-1"></div><div class="s s-2"></div><div class="s s-3"></div></div><button class="b p" onclick="sg(1)">Play again</button><button class="b" onclick="gt()">Main menu</button></div></div><div id="l"></div><div id="g"><div id="s"><p>Level:<span id="n">1</span><p>Satellites remaining:<span id="r">5</span></div><div id="v"><div id="p"></div><div id="t" class="i"><div id="a" class="s"></div></div><div id="b"><div id="k" class="h"></div><div id="e"></div><div id="j" class="h"></div></div></div></div><script>var G=0,L=1,s=G,H="h",mb=document.getElementById("m"),m=document.getElementById("q"),l=document.getElementById("l"),go=document.getElementById("o"),lc=document.getElementById("c"),f=document.getElementById("f"),k=["a","d","ArrowLeft","ArrowRight"],po=document.getElementById("b"),p=document.getElementById("e"),pl=document.getElementById("k"),pr=document.getElementById("j"),ip=gf(p),cp=0,d=0,si=.02,sm=-2,sx=2,pt=360,o=document.getElementById("t"),st=document.getElementById("a"),sp={x:84,y:-16},oc=gr(o),df={x:gf(st).left-sp.x,y:gf(st).top-sp.y},iv=15,cv=iv,P=document.getElementById("p"),R=document.getElementById("r"),v=document.getElementById("n"),gc=document.getElementById("g"),g=document.getElementById("v"),sr=5,cl=1,ls={1:"",2:"-100px 0",3:"-200px 0"},sl=[],sd=0,oi=0,K={};function mp(){if(s==L)for(var t in K)if(K[t])switch(t){case"a":case"ArrowLeft":d>sm&&(d-=si,pr.classList.remove(H));break;case"d":case"ArrowRight":d<sx&&(d+=si,pl.classList.remove(H))}po.style.transform="rotate("+(cp+=d)+"deg)",(cp>pt||cp<-pt)&&(cp=0)}function ss(){var t=gf(p),e={x:t.left+p.offsetWidth/2-16,y:t.top+p.offsetHeight},s=document.createElement("div");s.setAttribute("id","s"+sd),sd++,s.classList.add("s"),s.classList.add("s"+Math.floor(3*Math.random()+1)),s.style.left=e.x+"px",s.style.top=e.y+"px",gc.insertBefore(s,g);var n=Math.atan2(oc.y-e.y,oc.x-e.x),o=5*Math.cos(n),c=5*Math.sin(n),l=setInterval(function(){s.style.left=(e.x+=o)+"px",s.style.top=(e.y+=c)+"px",ch(s)?(rv(s,l),gv()):ck(s)&&(sk(s),clearInterval(l),sl.push(s),ds())},10)}function ds(){sr--,sl.innerHTML=sr,R.innerHTML=sr,0==sr&&ct()}function gf(t){const e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY}}function gr(t){var e=gf(t);return{x:e.left+t.offsetWidth/2,y:e.top+t.offsetHeight/2}}function ck(t){var e=gr(t),s=o.offsetWidth/2;return(oc.x-e.x)*(oc.x-e.x)+(oc.y-e.y)*(oc.y-e.y)<(s*=s)}function ch(t){var e=!1;return sl.forEach(function(s){var n=gf(t),o=n.left,c=n.left+t.offsetWidth,l=n.top,d=gf(s),i=d.left,r=d.left+s.offsetWidth,a=d.top,f=d.top+s.offsetHeight;e=o>=i&&o<=r&&l>=a&&l<=f||c>=i&&c<=r&&l>=a&&l<=f}),e}function rv(t,e){if(t&&t.parentElement){var s=t.getAttribute("id").split("s")[1];t.parentElement.removeChild(t);var n=document.getElementById("o"+s);n&&n.remove(),clearInterval(e)}}function sk(t){var e=gf(t),s=e.left-df.x,n=e.top-df.y,o=document.createElement("div");o.setAttribute("id","o"+oi),oi++,o.classList.add("i"),o.style.animationDuration=cv+"s",g.appendChild(o),t.style.position="absolute",t.style.left=s+"px",t.style.top=n+"px",o.appendChild(t),o.classList.add("d")}function cg(){cp=0,d=1,po.style.transform="rotate("+(cp+=d)+"deg)",p.style.left=ip.left,p.style.top=ip.top,sl.forEach(function(t){rv(t)}),sl=[]}function sg(t){s=L,m.classList.add(H),l.classList.add(H),mb.classList.add(H),go.classList.add(H),f.classList.add(H),cl=0==t?cl+=1:t,cv=iv-5*(cl-1),v.innerHTML=cl,sr=5*cl,R.innerHTML=sr,P.style.background="url(sprite.png)"+ls[cl],cg()}function gv(){s=G,go.classList.remove(H),gt()}function ct(){s=G,3==cl?(f.classList.remove(H),lc.classList.add(H)):(lc.classList.remove(H),f.classList.add(H)),l.classList.remove(H),mb.classList.remove(H)}function gt(){lc.classList.add(H),f.classList.add(H),m.classList.remove(H),mb.classList.remove(H)}setInterval(mp,20),onkeydown=function(t){s==L&&t&&k.includes(t.key)&&(K[t.key]=!0)},onkeyup=function(t){s==L&&t&&k.includes(t.key)&&(K[t.key]=!1,pl.classList.add(H),pr.classList.add(H))},document.addEventListener("keyup",t=>{s==L&&"Space"==t.code&&sr>0&&ss()});</script></body></html>