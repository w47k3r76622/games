!function t(i,n,e){function o(s,a){if(!n[s]){if(!i[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var c=new Error("N'"+s+"'");throw c.code="NF",c}var u=n[s]={exports:{}};i[s][0].call(u.exports,function(t){var n=i[s][1][t];return o(n?n:t)},u,u.exports,t,i,n,e)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<e.length;s++)o(e[s]);return o}({1:[function(t){"use strict";function i(t,i,n){t.addEventListener(i,n)}function n(t){return document.createElement(t||"div")}function e(t,i){t.appendChild(i)}function o(t,i){t.insertBefore(i,t.firstChild)}function r(t,i){t.textContent=i}function s(t,i){t.classList.add(i)}function a(t,i){t.classList.remove(i)}function h(t,i){return t-i}function c(t,i){i.sort(h);for(var n=i.length;n--;)t.splice(i[n],1)}function u(t){return 440*Math.pow(2,(t-69)/12)}function p(t,i){var n=xi.createBufferSource();n.buffer=t,n.connect(xi.destination),n.start(i?xi.currentTime+i:0)}function l(t,i,n,e){for(var o=n*mi,r=xi.createBuffer(1,o,mi),s=r.getChannelData(0),a=0;o>a;a++)s[a]=i(t*a/mi,a/o)*e;return r}function f(t){return Math.sin(2*t*Math.PI)}function y(t,i){return function(n,e){var o=ni.clamp(f(n)+ni.randFloatSpread(t),-1,1),r=Math.exp(-e*i);return o*r}}function d(t,i){var n=.5*(f(t)+f(.5*t)),e=Math.exp(4*-i);return n*e}function x(t,i,n){p(t),p(i,ji),p(n,Ci)}function m(){1>fi%2?(p(Ii),fi%16>=12&&p(Wi,ji+qi),p(Ti,Ci),p(Wi,Ci+ji+qi)):2>fi%4?(p(Ii,ji),p(Ti,Ci),p(Wi,Ci+ji+qi)):4>fi%8?(p(Ii,ji),p(Ti,Ci),p(Wi,Ci+ji)):8>fi%16?(p(Ii,ji),p(Ti,Ci),p(Wi,Ci+ji),p(Wi,Ci+ji+qi)):(p(Ii,ji),p(Ti,Ci),p(Wi,Ci+qi),p(Ai,Ci+ji),p(Pi,Ci+ji+qi));var t=fi%32;4>t?x(Oi,Ei,Ri):8>t?x(Vi,Di,Ni):12>t?x(Qi,Yi,Li):16>t?x(Ui,Zi,Xi):20>t?x(Hi,Gi,_i):24>t?x(Qi,Yi,Li):28>t?x(Vi,Di,Ni):x(Oi,Ei,Ri),fi++}function v(){p(Ji),p(Ii),p(Ji,.1*Math.random()),p(Ii,.2*Math.random()),p(Ji,.4*Math.random())}function w(){for(var t=ii(),i=t.ve,n=0,e=i.length;e>n;n++)i[n].mS(ni.randFloat(1,1.3));return t.cFN(),t}function z(){return new G({cr:(new L).cp(Ki),am:new L(.5,.3,.8),df:new L(.3,.2,.1),op:10,ov:.5})}function g(){return pi.set(ni.randSign()*(2+ni.randFloat(0,16)),ni.randFloat(-1,6),ni.randFloat(30,60))}function S(t,i,n,e,o){var r=e/2,s=o/2;return t.push([r,0,0,-r,0,0,0,s,0,0,-s,0,0,0,i,0,0,-n],[[0,2,4],[0,5,2],[0,4,3],[0,3,5],[1,4,2],[1,2,5],[1,3,4],[1,5,3]])}function b(t,i,n,e,o,r,s,a){for(var h=e/2,c=[n,0,-Math.tan(r)*n,0,h,0,0,-h,0,s,0,o],u=[[0,1,3],[0,3,2],[1,2,3],[1,0,2]],p=0,l=c.length;l>p;p+=3)c[p]=a*(c[p]+i),c[p+1]*=a;return t.push(c,u)}function M(){var t=new H,i=3,n=.8,e=.8,o=.6;S(t,i,n,e,o);var r=.8,s=1,a=.2,h=1.2,c=Math.PI/4,u=-.2;return b(t,r,s,a,h,c,u,1),b(t,r,s,a,h,c,u,-1),t.cFN(),t}function k(t,i,n,e){var o,r,s,a,h=t/2,c=i/2,u=n||1,p=e||1,l=u+1,f=p+1,y=t/u,d=i/p,x=new H,m=x.ve,v=x.fa;for(r=0;f>r;r++)for(a=r*d-c,o=0;l>o;o++)s=o*y-h,m.push(new U(s,0,-a));var w,z,g,S;for(r=0;p>r;r++)for(o=0;u>o;o++)w=o+l*r,z=o+l*(r+1),g=o+1+l*(r+1),S=o+1+l*r,v.push(new X(w,S,z)),v.push(new X(z,S,g));return x.cFN(),x}function F(t,i){t.beginPath(),t.moveTo(i,0),t.lineTo(0,i),t.lineTo(-i,0),t.lineTo(0,-i),t.closePath()}function B(t){F(t,1),t.fillStyle="rgba(240, 120, 80, 0.5)",t.fill(),F(t,.4),t.fillStyle=this.cr.toString(),t.fill()}function C(){for(var t=0,i=mn.length;i>t;t++)en=mn[t],en.vi=!1,en.scale.set(1,1,1),vn[t].set(ni.randSign()*ni.randFloatSpread(48),24+24*Math.random(),-16*Math.random())}function j(t){for(var i=0,n=mn.length;n>i;i++)en=mn[i],en.vi=!0,en.po.set(ni.randFloatSpread(2),ni.randFloatSpread(2),ni.randFloatSpread(2)).add(t)}function q(t){F(t,.5),t.fillStyle="#fff",t.fill()}function T(){return pi.set(ni.randSign()*ni.randFloatSpread(400),ni.randFloat(60,120),ni.randFloat(100,100+Sn))}function A(t){F(t,4),t.shadowColor="#fff",t.shadowBlur=16,t.fillStyle="rgba(160, 160, 255, 0.5)",t.fill();var i=1.2;t.beginPath(),t.moveTo(-i,0),t.lineTo(i,0),t.moveTo(0,i),t.lineTo(0,-i),t.strokeStyle="#fff",t.lineWidth=.4,t.shadowBlur=1,t.stroke(),F(t,3),t.shadowColor="rgba(0, 0, 0, 0.5)",t.stroke(),t.shadowBlur=0}function P(){return pi.set(ni.randFloatSpread(2*Yn+Bn),0,ni.randFloat(80,100))}function I(){ci(ei,kn,function(){Cn=!0})}function W(){En=!1}function O(){Tn=!0,On=3,En=!1,Wn=0,An=0,In=0,fi=0,Pn=Bi,ci.reset(),yi=ui.se=new Y,tn=[];var t,i,n,e;for(n=0;16>n;n++)i=w(),t=new K(i,z()),t.po.cp(g()),tn.push(t),yi.add(t);for(nn=new K(rn,sn),yi.add(nn),yn.po.z=0,yn.po.y=-2,yi.add(yn),dn.po.x=-2*pn,dn.po.y=yn.po.y,dn.po.z=hn,yi.add(dn),C(),n=0,e=mn.length;e>n;n++)yi.add(mn[n]);for(n=0,e=zn.length;e>n;n++)en=zn[n],en.po.cp(T()),yi.add(en);bn.po.cp(P()),bn.vi=!1,bn.scale.set(1,1,1),yi.add(bn),ci(ei,kn,function(){Cn=!0}),qn.po.set(-4,2,0),yi.add(qn),yi.fogDensity=.08,Rn.po.set(0,Vn,Dn),Rn.lA(new U(0,3,0)),Rn.uPM()}function E(t,e,s,a){var h=n("button");return h.id=e,r(h,s),i(h,"click",a),o(t,h),h}function R(){ui.setSize(Math.min(window.innerWidth,Jn?1/0:ai),Math.min(window.innerHeight,Jn?1/0:hi))}function V(){ui.play(),s(Zn,"h")}function D(){ui.rg&&(ui.pause(),r($n,"RESUME"),a(Zn,"h"))}function N(){ui.pause(),O(),r($n,"RETRY"),a(Zn,"h")}var Q=t(3),Y=t(23),L=t(15),U=t(21),Z=t(14),X=t(4),H=t(5),G=(t(11),t(10)),_=t(9),J=t(12),K=t(24),$=t(25),ti=t(8),ii=t(6),ni=t(34),ei=function(){},oi=Math.PI/180,ri=Math.PI/2,si=document.querySelector.bind(document),ai=852,hi=480,ci=function(){function t(t){var i,n,o,r,s,a,h,u=[],p=[];for(a=0,h=e.length;h>a;a++)i=e[a],n=i[0],o=i[1],r=i[2]+=t,r>=o&&(u.push(a),s=i[3],s&&p.push(s)),i[0](ni.clamp(r/o,0,1));for(c(e,u),a=0,h=p.length;h>a;a++)p[a]()}function i(t,n,o){return e.push([t,n||0,0,o]),i}function n(){e=[]}var e=[];return i.ud=t,i.reset=n,i}(),ui=new Q(Math.min(window.innerWidth,ai),Math.min(window.innerHeight,hi)),pi=new U,li=si("#g");li.appendChild(ui.canvas);var fi,yi,di=window.AudioContext||window.webkitAudioContext,xi=new di,mi=xi.sampleRate,vi=u(28),wi=u(52),zi=u(49),gi=u(51),Si=u(56),bi=u(54),Mi=y(.05,24),ki=y(.8,16),Fi=140,Bi=120/Fi*1e3,Ci=.001*Bi/2,ji=Ci/2,qi=ji/2,Ti=l(wi,ki,ji,.2),Ai=l(wi,ki,ji,.1),Pi=l(wi,ki,ji+qi,.3),Ii=l(vi,Mi,Ci+qi,1),Wi=l(vi,Mi,Ci+qi,.6),Oi=l(Si,d,Ci,.2),Ei=l(Si,d,Ci,.1),Ri=l(Si,d,Ci+qi,.1),Vi=l(bi,d,Ci,.2),Di=l(bi,d,Ci,.1),Ni=l(bi,d,Ci+qi,.1),Qi=l(wi,d,Ci,.2),Yi=l(wi,d,Ci,.1),Li=l(wi,d,Ci+qi,.1),Ui=l(gi,d,Ci,.2),Zi=l(gi,d,Ci,.1),Xi=l(gi,d,Ci+qi,.1),Hi=l(zi,d,Ci,.2),Gi=l(zi,d,Ci,.1),_i=l(zi,d,Ci+qi,.1),Ji=l(vi,y(.2,16),6*Ci,1),Ki=new L(.6,.4,.4),$i=(new L).cp(Ki);$i.r+=.3;for(var tn,nn,en,on,rn=M(),sn=new _({cr:new L(.6,.6,.65),tC:new L(1,1,1),df:new L(1,1,1),am:new L(.3,.3,.3),shadowColor:new L(1,1,1),shadowBlur:8,wf:!0,lineWidth:.5}),an=56,hn=16,cn=16,un=8,pn=an/cn,ln=k(an,hn,cn,un),fn=new G({cr:new L(.5,.5,.6),tC:new L(.9,.9,1),df:new L(.6,.6,1),am:new L(.3,.3,.3),wf:!0,lineWidth:1,op:.3}),yn=new K(ln,fn),dn=new K(ln,fn),xn=new U(0,-500,0),mn=[],vn=[],wn=0;24>wn;wn++)on=new J({cr:new L(1,1,1),bl:"lighter",op:.5}),on.program=B,en=new $(on),mn.push(en),vn.push(new U);var zn=[],gn=50,Sn=100;for(wn=0;48>wn;wn++)on=new J({bl:"lighter"}),on.program=q,en=new $(on),zn.push(en);var bn,Mn,kn=10,Fn=2/60,Bn=5,Cn=!1,jn=!1;Mn=new J({bl:"lighter"}),Mn.program=A,bn=new $(Mn),ui.am.rgb(.3,.3,.5);var qn=new ti(new L(1,1,1));qn.intensity=2;var Tn,An,Pn,In,Wn,On,En,Rn=ui.ca,Vn=3.5,Dn=-5,Nn=24,Qn=30,Yn=6,Ln=240*oi,Un=0,Zn=n();Zn.id="m",s(Zn,"c"),e(li,Zn);var Xn=n();Xn.id="s",e(li,Xn);var Hn=n();Hn.id="hs",e(li,Hn);var Gn=n();Gn.id="l",e(li,Gn);var _n=n();_n.id="hp",_n.innerHTML="A/D  ←/→.<div>Space to start.</div>",e(li,_n);var Jn=!1,Kn=E(li,"fs","[ ↔ ]",function(){Jn=!Jn,r(Kn,Jn?"×":"[ ↔ ]"),R()});i(window,"resize",R);var $n=E(Zn,"p","PLAY",V);i(window,"blur",D);var te={};i(document,"keydown",function(t){te[t.keyCode]=!0,32===t.keyCode&&t.preventDefault()}),i(document,"keyup",function(t){te[t.keyCode]=!1,32!==t.keyCode||ui.rg||V()}),O();var ie=new Z,ne=new Z;ui.onUpdate=function(t){function i(t){t%=3;var i=2*pn;return 1===t?i=0:2===t&&(i=-i),i}Pn+=1e3*t,Tn&&Pn>Bi&&(m(),Pn=0),Tn||(t*=.1),ci.ud(t);var n=nn.po,e=nn.ro;(te[39]||te[68])&&n.x>-Yn&&(n.x-=Qn*t,e.z=Math.max(e.z-Ln*t,-ri)),(te[37]||te[65])&&n.x<Yn&&(n.x+=Qn*t,e.z=Math.min(e.z+Ln*t,ri)),n.z+=Nn*t,e.z-=4*e.z*t,Math.abs(e.z)<.01&&(e.z=0);var o=.1*n.x;Rn.po.x=o,Rn.po.z=n.z+Dn,Rn.lA(new U(o,3,n.z)),Rn.rz(.1*o),(En||!Tn)&&(Rn.po.x=o+ni.randFloatSpread(.5),Rn.po.y=Vn+ni.randFloatSpread(.5)),nn.uQ(),nn.uM(),ie.sFO(nn).eS(-.2);var s,a,h,c,u=.7+.2*(1+Math.cos(Pn/Bi*Math.PI*4));for(h=0,c=tn.length;c>h;h++)if(s=tn[h],a=s.po,a.z<n.z+Dn&&(a.cp(g()),a.z+=n.z),Tn){if(s.scale.set(u,u,u),s.uM(),ne.sFO(s).eS(-.1),s.rx(1.6*(h%7-3.5)*t),s.ry(1.6*(h%6-3)*t),s.rz(1.6*(h%5-2.5)*t),ie.iB(ne)){s.mt.cr.cp($i),C(),j(pi.cp(nn.po).add(s.po).mS(.5)),En||(En=!0,v(),ci(ei,.6,W),On--,0>=On&&(Tn=!1,setTimeout(N,1024)));break}s.mt.cr.cp(Ki)}An+=t;var p,l,f=ln.ve;for(h=0,c=f.length;c>h;h++)p=h%c,l=Math.floor(h/c),f[h].y=.8*Math.sin(10*An+(p+l));yn.po.z+.5*hn<n.z&&(yn.po.x=i(In),yn.po.z+=2*hn,In++),dn.po.z+.5*hn<n.z&&(dn.po.x=i(In),dn.po.z+=2*hn,In++),ln.cFN();var y,d=1-.05*t;for(h=0,c=mn.length;c>h;h++)en=mn[h],en.vi&&(y=vn[h],en.po.add(pi.cp(y).mS(t)),en.scale.mS(d),y.mS(d),y.add(pi.cp(xn).mS(t)));var x,w;for(h=0,c=zn.length;c>h;h++)en=zn[h],x=en.po,x.z-=40*t,x.z<n.z+gn&&(x.cp(T()),x.z+=n.z+Sn),w=x.z-n.z,en.mt.op=ni.clamp(-w/400+1,0,1);!bn.vi&&Cn&&4>On&&Math.random()<Fn&&(bn.po.cp(P()),bn.po.z+=n.z,bn.vi=!0,Cn=!1);var z;bn.vi&&(z=bn.po,w=z.z-n.z,bn.mt.op=ni.clamp(-w/80+1,0,1),!jn&&z.dT(n)<Bn?(jn=!0,ci(function(t){z.lerp(n,t),bn.scale.set(1-t,1-t,1-t)},.4,function(){On++,bn.vi=!1,jn=!1,bn.scale.set(1,1,1),I()})):!jn&&bn.po.z<n.z+Dn&&(bn.vi=!1,I())),Wn=10*n.z,Wn>Un&&(Un=Wn),r(Hn,"HIGH SCORE: "+(0|Un)),r(Xn,"SCORE: "+(0|Wn)),r(Gn,"LIVES: "+(0|On))}},{}],2:[function(t,i){"use strict";function n(t,i,n,e){o.call(this),this.fov=t||60,this.as=i||1,this.near=n||.1,this.far=e||1e3,this.mWI=new s,this.pM=new s,this.uPM()}var e=t(34),o=t(23),r=t(21),s=t(19),a=Math.PI/180,h=new s;e.e(n,o),n.prototype.lA=function(t){h.lA(this.po,t,r.Y),this.qu.sR(h)},n.prototype.uPM=function(){var t=this.near,i=this.far,n=t*Math.tan(.5*this.fov*a),e=-n,o=e*this.as,r=n*this.as,s=2*t/(r-o),h=2*t/(n-e),c=(r+o)/(r-o),u=(n+e)/(n-e),p=-(i+t)/(i-t),l=-2*i*t/(i-t),f=this.pM.el;return f[0]=s,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=h,f[6]=0,f[7]=0,f[8]=c,f[9]=u,f[10]=p,f[11]=-1,f[12]=0,f[13]=0,f[14]=l,f[15]=0,this},i.exports=n},{}],3:[function(t,i){"use strict";function n(t,i){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.rg=!1,this.pt=0,this.t=0,this.ca=new r(90),this.setSize(t,i),this.se=new o,this.am=new e,this.rr=new s({ctx:this.ctx,am:this.am}),this.tick=this.tick.bind(this),this.onUpdate=null}var e=t(15),o=t(23),r=t(2),s=t(33);n.prototype.tick=function(){this.rg&&(this.ud(),this.draw(),requestAnimationFrame(this.tick))},n.prototype.ud=function(){this.t=Date.now();var t=this.t-this.pt;this.pt=this.t,t>100&&(t=100),t*=.001,this.onUpdate&&this.onUpdate(t),this.se.ch.forEach(function(i){i.ud(t)})},n.prototype.draw=function(){this.rr.render(this.se,this.ca)},n.prototype.play=function(){this.rg=!0,this.pt=Date.now(),requestAnimationFrame(this.tick)},n.prototype.pause=function(){this.rg=!1},n.prototype.setSize=function(t,i){this.canvas.width=t,this.canvas.height=i,this.ca.as=t/i,this.ca.uPM()},i.exports=n},{}],4:[function(t,i){"use strict";function n(t,i,n){this.a=t,this.b=i,this.c=n,this.nr=new o,this.cr=new e}var e=t(15),o=t(21);i.exports=n},{}],5:[function(t,i){"use strict";function n(){this.ve=[],this.fa=[]}var e=t(21),o=(t(14),t(4)),r=t(7),s=new e,a=new e;n.prototype.push=function(t,i){var n,s,a=this.ve.length;for(n=0,s=t.length;s>n;n+=3)this.ve.push(new e(t[n],t[n+1],t[n+2]));var h,c;for(n=0,s=i.length;s>n;n++){if(h=i[n],3===h.length)c=new o(a+h[0],a+h[1],a+h[2]);else{if(4!==h.length)continue;c=new r(a+h[0],a+h[1],a+h[2],a+h[3])}this.fa.push(c)}return this},n.prototype.cFN=function(){for(var t,i,n,e,o=0,r=this.fa.length;r>o;o++)t=this.fa[o],i=this.ve[t.a],n=this.ve[t.b],e=this.ve[t.c],s.sV(e,n),a.sV(i,n),s.cross(a).nz(),t.nr.cp(s)},i.exports=n},{}],6:[function(t,i){"use strict";function n(){var t=(1+Math.sqrt(5))/2,i=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],n=[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]];return(new e).push(i,n)}var e=t(5);i.exports=n},{}],7:[function(t,i){"use strict";function n(t,i,n,r){this.a=t,this.b=i,this.c=n,this.d=r,this.nr=new o,this.cr=new e}var e=t(15),o=t(21);i.exports=n},{}],8:[function(t,i){"use strict";function n(t,i){o.call(this),this.cr=t,this.intensity=void 0!==i?i:1,this.fi=new r}var e=t(34),o=t(23),r=t(17);e.e(n,o),i.exports=n},{}],9:[function(t,i){"use strict";function n(t){t=t||{},o.call(this,t),this.fi=new r}var e=t(34),o=t(10),r=t(17);e.e(n,o),n.prototype.draw=function(t,i,n,e){t.shadowBlur=this.shadowBlur*e,o.prototype.draw.call(this,t,i,n)},i.exports=n},{}],10:[function(t,i){"use strict";function n(t){r.call(this,t),this.am=t.am||new o,this.df=t.df||new o,this.em=t.em||new o}var e=t(34),o=t(15),r=t(11);e.e(n,r),n.prototype.draw=function(t,i,n){t.fillStyle=i.toString(),r.prototype.draw.call(this,t,n)},i.exports=n},{}],11:[function(t,i){"use strict";function n(t){t=t||{},this.side=t.side||r,this.cr=t.cr||new o,this.tC=t.tC,this.op=void 0!==t.op?t.op:1,this.lineWidth=t.lineWidth||0,this.fill=void 0!==t.fill?t.fill:!0,this.wf=void 0!==t.wf?t.wf:!1,this.shadowColor=t.shadowColor||new o,this.shadowBlur=t.shadowBlur||0,this.bl=t.bl||"source-over",this.ov=t.ov||0}var e=t(34),o=t(15),r=0,s=1,a=2;n.prototype.set=function(t){var i=this.cr.toString(),n=this.tC&&this.cr!==this.tC?this.tC.toString():i;t.fillStyle=i,t.strokeStyle=n,t.globalAlpha=this.op,t.lineWidth=this.lineWidth,t.shadowColor=this.shadowColor.toString(),t.shadowBlur=this.shadowBlur,t.globalCompositeOperation=this.bl},n.prototype.draw=function(t,i){void 0!==i&&(t.globalAlpha=e.clamp(this.op*i,0,1)),this.fill&&t.fill(),this.wf&&t.stroke()},n.FS=r,n.BS=s,n.DS=a,i.exports=n},{}],12:[function(t,i){"use strict";function n(t){o.call(this,t),this.program=function(){}}var e=t(34),o=t(11);e.e(n,o),n.prototype.draw=function(t){this.program.call(this,t)},i.exports=n},{}],13:[function(t,i){"use strict";function n(t,i){this.min=t||new e(1/0,1/0,1/0),this.max=i||new e(-1/0,-1/0,-1/0)}var e=t(21),o=new e;n.prototype.contains=function(t){return!(this.min.x>t.x||t.x>this.max.x||this.min.y>t.y||t.y>this.max.y||this.min.z>t.z||t.z>this.max.z)},n.prototype.iB=function(t){return!(t.max.x<this.min.x||this.max.x<t.min.x||t.max.y<this.min.y||this.max.y<t.min.y||t.max.z<this.min.z||this.max.z<t.min.z)},n.prototype.eP=function(t){return this.min.min(t),this.max.max(t),this},n.prototype.eS=function(t){return this.min.aS(-t),this.max.aS(t),this},n.prototype.mE=function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},n.prototype.sFP=function(t){this.mE();for(var i=0,n=t.length;n>i;i++)this.eP(t[i]);return this},n.prototype.sFO=function(t){this.mE();for(var i=t.geometry.ve,n=0,e=i.length;e>n;n++)o.cp(i[n]).m4(t.mW),this.eP(o);return this},i.exports=n},{}],14:[function(t,i){i.exports=t(13)},{}],15:[function(t,i){"use strict";function n(t,i,n){this.r=t||0,this.g=i||0,this.b=n||0}var e=t(34).lerp;n.prototype.rgb=function(t,i,n){return this.r=t,this.g=i,this.b=n,this},n.prototype.toString=function(){return"rgb("+(255*this.r|0)+", "+(255*this.g|0)+", "+(255*this.b|0)+")"},n.prototype.add=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},n.prototype.mul=function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},n.prototype.mS=function(t){return this.r*=t,this.g*=t,this.b*=t,this},n.prototype.lerp=function(t,i){return this.r=e(this.r,t.r,i),this.g=e(this.g,t.g,i),this.b=e(this.b,t.b,i),this},n.prototype.cp=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},i.exports=n},{}],16:[function(t,i){"use strict";function n(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0}var e=t(34);n.prototype.sQ=function(t){var i=t.x*t.x,n=t.y*t.y,o=t.z*t.z,r=t.w*t.w;return this.x=Math.atan2(2*(t.x*t.w-t.y*t.z),r-i-n+o),this.y=Math.asin(e.clamp(2*(t.x*t.z+t.y*t.w),-1,1)),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),r+i-n-o),this},i.exports=n},{}],17:[function(t,i){"use strict";function n(){this.cB=1,this.mB=65535,this.grI=0}n.prototype.collides=function(t){return this.grI&&this.grI===t.grI?this.grI>0:this.mB&t.cB&&this.cB&t.mB},i.exports=n},{}],18:[function(t,i){"use strict";function n(t,i,n,e,o,r,s,a,h){this.el=new Float32Array(9);var c=this.el;c[0]=void 0!==t?t:1,c[3]=i||0,c[6]=n||0,c[1]=e,c[4]=void 0!==o?o:1,c[7]=r||0,c[2]=s,c[5]=a||0,c[8]=void 0!==h?h:1}n.prototype.set=function(t,i,n,e,o,r,s,a,h){var c=this.el;return c[0]=t,c[3]=i,c[6]=n,c[1]=e,c[4]=o,c[7]=r,c[2]=s,c[5]=a,c[8]=h,this},n.prototype.id=function(){return this.set(1,0,0,0,1,0,0,0,1),this},n.prototype.mS=function(t){var i=this.el;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},n.prototype.gI=function(t){var i=t.el,n=this.el;n[0]=i[10]*i[5]-i[6]*i[9],n[1]=-i[10]*i[1]+i[2]*i[9],n[2]=i[6]*i[1]-i[2]*i[5],n[3]=-i[10]*i[4]+i[6]*i[8],n[4]=i[10]*i[0]-i[2]*i[8],n[5]=-i[6]*i[0]+i[2]*i[4],n[6]=i[9]*i[4]-i[5]*i[8],n[7]=-i[9]*i[0]+i[1]*i[8],n[8]=i[5]*i[0]-i[1]*i[4];var e=i[0]*n[0]+i[1]*n[3]+i[2]*n[6];return e?(this.mS(1/e),this):(this.id(),this)},n.prototype.tr=function(){var t,i=this.el;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},n.prototype.nM=function(t){return this.gI(t).tr(),this},i.exports=n},{}],19:[function(t,i){"use strict";function n(t,i,n,e,o,r,s,a,h,c,u,p,l,f,y,d){this.el=new Float32Array(16);var x=this.el;x[0]=void 0!==t?t:1,x[4]=i||0,x[8]=n||0,x[12]=e||0,x[1]=o||0,x[5]=void 0!==r?r:1,x[9]=s||0,x[13]=a||0,x[2]=h||0,x[6]=c||0,x[10]=void 0!==u?u:1,x[14]=p||0,x[3]=l||0,x[7]=f||0,x[11]=y||0,x[15]=void 0!==d?d:1}var e=t(21);n.prototype.set=function(t,i,n,e,o,r,s,a,h,c,u,p,l,f,y,d){var x=this.el;return x[0]=t,x[4]=i,x[8]=n,x[12]=e,x[1]=o,x[5]=r,x[9]=s,x[13]=a,x[2]=h,x[6]=c,x[10]=u,x[14]=p,x[3]=l,x[7]=f,x[11]=y,x[15]=d,this},n.prototype.cp=function(t){return this.el.set(t.el),this},n.prototype.id=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},n.prototype.sP=function(t){var i=this.el;return i[12]=t.x,i[13]=t.y,i[14]=t.z,this},n.prototype.mS=function(t){var i=this.el;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},n.prototype.gI=function(t){var i=this.el,n=t.el,e=n[0],o=n[4],r=n[8],s=n[12],a=n[1],h=n[5],c=n[9],u=n[13],p=n[2],l=n[6],f=n[10],y=n[14],d=n[3],x=n[7],m=n[11],v=n[15];i[0]=c*y*x-u*f*x+u*l*m-h*y*m-c*l*v+h*f*v,i[4]=s*f*x-r*y*x-s*l*m+o*y*m+r*l*v-o*f*v,i[8]=r*u*x-s*c*x+s*h*m-o*u*m-r*h*v+o*c*v,i[12]=s*c*l-r*u*l-s*h*f+o*u*f+r*h*y-o*c*y,i[1]=u*f*d-c*y*d-u*p*m+a*y*m+c*p*v-a*f*v,i[5]=r*y*d-s*f*d+s*p*m-e*y*m-r*p*v+e*f*v,i[9]=s*c*d-r*u*d-s*a*m+e*u*m+r*a*v-e*c*v,i[13]=r*u*p-s*c*p+s*a*f-e*u*f-r*a*y+e*c*y,i[2]=h*y*d-u*l*d+u*p*x-a*y*x-h*p*v+a*l*v,i[6]=s*l*d-o*y*d-s*p*x+e*y*x+o*p*v-e*l*v,i[10]=o*u*d-s*h*d+s*a*x-e*u*x-o*a*v+e*h*v,i[14]=s*h*p-o*u*p-s*a*l+e*u*l+o*a*y-e*h*y,i[3]=c*l*d-h*f*d-c*p*x+a*f*x+h*p*m-a*l*m,i[7]=o*f*d-r*l*d+r*p*x-e*f*x-o*p*m+e*l*m,i[11]=r*h*d-o*c*d-r*a*x+e*c*x+o*a*m-e*h*m,i[15]=o*c*p-r*h*p+r*a*l-e*c*l-o*a*f+e*h*f;var w=e*i[0]+a*i[4]+p*i[8]+d*i[12];return w?(this.mS(1/w),this):(this.id(),this)},n.prototype.mM=function(t,i){var n=t.el,e=i.el,o=this.el,r=n[0],s=n[4],a=n[8],h=n[12],c=n[1],u=n[5],p=n[9],l=n[13],f=n[2],y=n[6],d=n[10],x=n[14],m=n[3],v=n[7],w=n[11],z=n[15],g=e[0],S=e[4],b=e[8],M=e[12],k=e[1],F=e[5],B=e[9],C=e[13],j=e[2],q=e[6],T=e[10],A=e[14],P=e[3],I=e[7],W=e[11],O=e[15];return o[0]=r*g+s*k+a*j+h*P,o[4]=r*S+s*F+a*q+h*I,o[8]=r*b+s*B+a*T+h*W,o[12]=r*M+s*C+a*A+h*O,o[1]=c*g+u*k+p*j+l*P,o[5]=c*S+u*F+p*q+l*I,o[9]=c*b+u*B+p*T+l*W,o[13]=c*M+u*C+p*A+l*O,o[2]=f*g+y*k+d*j+x*P,o[6]=f*S+y*F+d*q+x*I,o[10]=f*b+y*B+d*T+x*W,o[14]=f*M+y*C+d*A+x*O,o[3]=m*g+v*k+w*j+z*P,o[7]=m*S+v*F+w*q+z*I,o[11]=m*b+v*B+w*T+z*W,o[15]=m*M+v*C+w*A+z*O,this},n.prototype.mRQ=function(t){var i=this.el,n=t.x,e=t.y,o=t.z,r=t.w,s=n+n,a=e+e,h=o+o,c=n*s,u=n*a,p=n*h,l=e*a,f=e*h,y=o*h,d=r*s,x=r*a,m=r*h;return i[0]=1-(l+y),i[4]=u-m,i[8]=p+x,i[1]=u+m,i[5]=1-(c+y),i[9]=f-d,i[2]=p-x,i[6]=f+d,i[10]=1-(c+l),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},n.prototype.lA=function(){var t=new e,i=new e,n=new e;return function(e,o,r){var s=this.el;return n.sV(e,o).nz(),n.length()||(n.z=1),t.cV(r,n).nz(),t.length()||(n.x+=1e-4,t.cV(r,n).nz()),i.cV(n,t),s[0]=t.x,s[4]=i.x,s[8]=n.x,s[1]=t.y,s[5]=i.y,s[9]=n.y,s[2]=t.z,s[6]=i.z,s[10]=n.z,this}}(),n.prototype.scale=function(t){var i=this.el,n=t.x,e=t.y,o=t.z;return i[0]*=n,i[1]*=n,i[2]*=n,i[3]*=n,i[4]*=e,i[5]*=e,i[6]*=e,i[7]*=e,i[8]*=o,i[9]*=o,i[10]*=o,i[11]*=o,this},i.exports=n},{}],20:[function(t,i){"use strict";function n(t,i,n,e){this.x=t||0,this.y=i||0,this.z=n||0,this.w=void 0!==e?e:1}n.prototype.aa=function(t,i){var n=i/2,e=Math.sin(n);return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this.w=Math.cos(n),this},n.prototype.mul=function(t){return this.mQ(this,t)},n.prototype.mQ=function(t,i){var n=t.x,e=t.y,o=t.z,r=t.w,s=i.x,a=i.y,h=i.z,c=i.w;return this.x=n*c+r*s+e*h-o*a,this.y=e*c+r*a+o*s-n*h,this.z=o*c+r*h+n*a-e*s,this.w=r*c-n*s-e*a-o*h,this},n.prototype.sR=function(t){var i,n=t.el,e=n[0],o=n[4],r=n[8],s=n[1],a=n[5],h=n[9],c=n[2],u=n[6],p=n[10],l=e+a+p;return l>0?(i=.5/Math.sqrt(l+1),this.w=.25/i,this.x=(u-h)*i,this.y=(r-c)*i,this.z=(s-o)*i):e>a&&e>p?(i=2*Math.sqrt(1+e-a-p),this.w=(u-h)/i,this.x=.25*i,this.y=(o+s)/i,this.z=(r+c)/i):a>p?(i=2*Math.sqrt(1+a-e-p),this.w=(r-c)/i,this.x=(o+s)/i,this.y=.25*i,this.z=(h+u)/i):(i=2*Math.sqrt(1+p-e-a),this.w=(s-o)/i,this.x=(r+c)/i,this.y=(h+u)/i,this.z=.25*i),this},n.prototype.sE=function(t){var i=Math.cos(t.x/2),n=Math.cos(t.y/2),e=Math.cos(t.z/2),o=Math.sin(t.x/2),r=Math.sin(t.y/2),s=Math.sin(t.z/2);return this.x=o*n*e+i*r*s,this.y=i*r*e-o*n*s,this.z=i*n*s+o*r*e,this.w=i*n*e-o*r*s,this},i.exports=n},{}],21:[function(t,i){"use strict";function n(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0}n.prototype.set=function(t,i,n){return this.x=t,this.y=i,this.z=n,this},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},n.prototype.sV=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},n.prototype.aS=function(t){return this.x+=t,this.y+=t,this.z+=t,this},n.prototype.mS=function(t){return this.x*=t,this.y*=t,this.z*=t,this},n.prototype.min=function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},n.prototype.max=function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},n.prototype.cp=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},n.prototype.cross=function(t){var i=this.x,n=this.y,e=this.z;return this.x=n*t.z-e*t.y,this.y=e*t.x-i*t.z,this.z=i*t.y-n*t.x,this},n.prototype.cV=function(t,i){var n=t.x,e=t.y,o=t.z,r=i.x,s=i.y,a=i.z;return this.x=e*a-o*s,this.y=o*r-n*a,this.z=n*s-e*r,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},n.prototype.length=function(){return Math.sqrt(this.lengthSq())},n.prototype.dTS=function(t){var i=this.x-t.x,n=this.y-t.y,e=this.z-t.z;return i*i+n*n+e*e},n.prototype.dT=function(t){return Math.sqrt(this.dTS(t))},n.prototype.nz=function(){var t=this.length();return this.mS(t?1/t:0)},n.prototype.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},n.prototype.m3=function(t){var i=this.x,n=this.y,e=this.z,o=t.el;return this.x=o[0]*i+o[3]*n+o[6]*e,this.y=o[1]*i+o[4]*n+o[7]*e,this.z=o[2]*i+o[5]*n+o[8]*e,this},n.prototype.m4=function(t){var i=this.x,n=this.y,e=this.z,o=t.el;return this.x=o[0]*i+o[4]*n+o[8]*e+o[12],this.y=o[1]*i+o[5]*n+o[9]*e+o[13],this.z=o[2]*i+o[6]*n+o[10]*e+o[14],this},n.prototype.aP=function(t){var i=this.x,n=this.y,e=this.z,o=t.el,r=1/(o[3]*i+o[7]*n+o[11]*e+o[15]);return this.x=(o[0]*i+o[4]*n+o[8]*e+o[12])*r,this.y=(o[1]*i+o[5]*n+o[9]*e+o[13])*r,this.z=(o[2]*i+o[6]*n+o[10]*e+o[14])*r,this},n.prototype.mP=function(t){var i=t.el;return this.x=i[12],this.y=i[13],this.z=i[14],this},n.prototype.applyQuaternion=function(t){var i=this.x,n=this.y,e=this.z,o=t.x,r=t.y,s=t.z,a=t.w,h=a*i+r*e-s*n,c=a*n+s*i-o*e,u=a*e+o*n-r*i,p=-o*i-r*n-s*e;return this.x=h*a+p*-o+c*-s-u*-r,this.y=c*a+p*-r+u*-o-h*-s,this.z=u*a+p*-s+h*-r-c*-o,this},n.X=new n(1,0,0),n.Y=new n(0,1,0),n.Z=new n(0,0,1),i.exports=n},{}],22:[function(t,i){"use strict";function n(t,i,n,e){this.x=t||0,this.y=i||0,this.z=n||0,this.w=void 0!==e?e:1}n.prototype.set=function(t,i,n,e){return this.x=t,this.y=i,this.z=n,this.w=e,this},n.prototype.cp=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},n.prototype.m4=function(t){var i=this.x,n=this.y,e=this.z,o=this.w,r=t.el;return this.x=r[0]*i+r[4]*n+r[8]*e+r[12]*o,this.y=r[1]*i+r[5]*n+r[9]*e+r[13]*o,this.z=r[2]*i+r[6]*n+r[10]*e+r[14]*o,this.w=r[3]*i+r[7]*n+r[11]*e+r[15]*o,this},i.exports=n},{}],23:[function(t,i){"use strict";function n(){this.ch=[],this.po=new e,this.ro=new r,this.qu=new s,this.scale=new e(1,1,1),this.mx=new o,this.mW=new o,this.vi=!0}var e=t(21),o=t(19),r=t(16),s=t(20),a=new e,h=new s,c=new o;n.prototype.add=function(t){return this.ch.push(t),this},n.prototype.remove=function(t){var i=this.ch.indexOf(t);return i>-1&&this.ch.splice(i,1),this},n.prototype.ud=function(){},n.prototype.uM=function(){return this.mx.mRQ(this.qu),this.mx.scale(this.scale),this.mx.sP(this.po),this.mW.cp(this.mx),this},n.prototype.uQ=function(){this.qu.sE(this.ro)},n.prototype.uR=function(){this.ro.sQ(this.qu)},n.prototype.ra=function(t,i){return h.aa(t,i),this.qu.mul(h),this},n.prototype.rx=function(t){return this.ra(e.X,t)},n.prototype.ry=function(t){return this.ra(e.Y,t)},n.prototype.rz=function(t){return this.ra(e.Z,t)},n.prototype.ta=function(t,i){return a.cp(t).applyQuaternion(this.qu),this.po.add(a.mS(i)),this},n.prototype.tx=function(t){return this.ta(e.X,t)},n.prototype.ty=function(t){return this.ta(e.Y,t)},n.prototype.tz=function(t){return this.ta(e.Z,t)},n.prototype.lA=function(t){c.lA(t,this.po,e.Y),this.qu.sR(c)},i.exports=n},{}],24:[function(t,i){"use strict";function n(t,i){o.call(this),this.geometry=t,this.mt=i,this.fi=new r}var e=t(34),o=t(23),r=t(17);e.e(n,o),i.exports=n},{}],25:[function(t,i){"use strict";function n(t){o.call(this),this.geometry=s,this.mt=t}var e=t(34),o=t(23),r=t(5),s=(new r).push([-.5,-.5,0,.5,-.5,0,.5,.5,0],[]);e.e(n,o),i.exports=n},{}],26:[function(t,i){"use strict";function n(){function t(){function t(t){s=t,a=s.mt}function i(t){var i=t.po,n=t.pw,e=t.ps;n.cp(i).m4(C),e.cp(n).m4(L);var o=1/e.w;e.x*=o,e.y*=o,e.z*=o,t.vi=-1<=e.x&&e.x<=1&&-1<=e.y&&e.y<=1&&-1<=e.z&&e.z<=1}function e(t,e,o){M=n(),M.po.set(t,e,o),i(M)}function o(t,i,n,e){return t.vi||i.vi||n.vi||e&&e.vi?!0:(Q.length=0,Q[0]=t.ps,Q[1]=i.ps,Q[2]=n.ps,e&&(Q[3]=e.ps),D.iB(N.sFP(Q)))}function r(t,i,n){return(n.ps.x-t.ps.x)*(i.ps.y-t.ps.y)-(n.ps.y-t.ps.y)*(i.ps.x-t.ps.x)<0}var s,a;return{sO:t,pV:e,cTV:o,cBC:r}}function i(){if(b===j.length){var t=new f;return j.push(t),b++,t}return j[b++]}function n(){if(q===T.length){var t=new y;return T.push(t),q++,t}return T[q++]}function v(){if(A===P.length){var t=new d;return P.push(t),A++,t}return P[A++]}function w(){if(I===W.length){var t=new x;return W.push(t),I++,t}return W[I++]}function z(){if(B===O.length){var t=new m;return O.push(t),B++,t}return O[B++]}function g(t,i){return i.z-t.z}var S,b,M,k,F,B,C,j=[],q=0,T=[],A=0,P=[],I=0,W=[],O=[],E={os:[],ls:[],el:[]},R=new e,V=new o,D=new a(new e(-1,-1,-1),new e(1,1,1)),N=new a,Q=[],Y=new s,L=new s,U=new r,Z=new t;this.pS=function(t,n){A=0,I=0,B=0,b=0,n.uM(),Y.cp(n.mWI.gI(n.mW)),L.mM(n.pM,Y),E.os.length=0,E.el.length=0,E.ls.length=0;var e,o,r;for(o=0,r=t.ch.length;r>o;o++)e=t.ch[o],e.vi&&(e.uM(),e instanceof c?E.ls.push(e):(S=i(),S.object=e,R.mP(e.mW),R.aP(L),S.z=R.z,E.os.push(S)));E.os.sort(g);var s,a,f,y,d,x,m,M,j,P,W,O,D,N,Q,X,H;for(o=0,r=E.os.length;r>o;o++)if(e=E.os[o].object,s=e.geometry,a=e.mt,s&&a)if(Z.sO(e),C=e.mW,q=0,e instanceof p){for(y=s.ve,d=s.fa,U.nM(C),f=a.side,x=0,m=y.length;m>x;x++)M=y[x],Z.pV(M.x,M.y,M.z);for(j=0,P=d.length;P>j;j++)if(W=d[j],O=W instanceof h,N=T[W.a],Q=T[W.b],X=T[W.c],O&&(H=T[W.d]),(O||Z.cTV(N,Q,X))&&(!O||Z.cTV(N,Q,X,H))){if(D=Z.cBC(N,Q,X),f!==u.DS){if(f===u.FS&&!D)continue;if(f===u.BS&&D)continue}k=O?w():v(),k.v0.cp(N),k.v1.cp(Q),k.v2.cp(X),O&&k.v3.cp(H),k.nm.cp(W.nr),D||f!==u.BS&&f!==u.DS||k.nm.negate(),k.nm.m3(U).nz(),k.cr=W.cr,k.mt=a,k.z=O?(N.ps.z+Q.ps.z+X.ps.z+H.ps.z)/4:(N.ps.z+Q.ps.z+X.ps.z)/3,E.el.push(k)
}}else if(e instanceof l){V.set(C.el[12],C.el[13],C.el[14],1).m4(L);var G=1/V.w;V.z*=G,-1<=V.z&&V.z<=1&&(F=z(),F.x=V.x*G,F.y=V.y*G,F.z=V.z,F.object=e,F.ro=e.ro,F.scale.x=e.scale.x*Math.abs(F.x-(V.x+n.pM.el[0])/(V.w+n.pM.el[12])),F.scale.y=e.scale.y*Math.abs(F.y-(V.y+n.pM.el[5])/(V.w+n.pM.el[13])),F.mt=e.mt,E.el.push(F))}return E.el.sort(g),E}}var e=t(21),o=t(22),r=t(18),s=t(19),a=t(13),h=t(7),c=t(8),u=t(11),p=t(24),l=t(25),f=t(29),y=t(32),d=t(28),x=t(30),m=t(31);i.exports=n},{}],27:[function(t,i){"use strict";function n(){this.v0=new r,this.v1=new r,this.v2=new r,this.nm=new o,this.cr=new e,this.mt=null,this.z=0}var e=t(15),o=t(21),r=t(32);i.exports=n},{}],28:[function(t,i){i.exports=t(27)},{}],29:[function(t,i){"use strict";function n(){this.object=null,this.z=0}i.exports=n},{}],30:[function(t,i){"use strict";function n(){r.call(this),this.v3=new o}var e=t(34),o=t(32),r=t(27);e.e(n,r),i.exports=n},{}],31:[function(t,i){"use strict";function n(){this.object=null,this.x=0,this.y=0,this.z=0,this.ro=0,this.scale=new e,this.mt=null}var e=t(21);i.exports=n},{}],32:[function(t,i){"use strict";function n(){this.po=new e,this.pw=new e,this.ps=new o,this.vi=!0}var e=t(21),o=t(22);n.prototype.cp=function(t){this.pw.cp(t.pw),this.ps.cp(t.ps)},i.exports=n},{}],33:[function(t,i){"use strict";function n(t){function i(t,i,n){for(var e,o,r=t.nm,s=0,a=0,h=m.length;h>a;a++)e=m[a],Q.cp(e.cr),U.mP(e.mW).nz(),o=r.dot(U),0>=o||(o*=e.intensity,(!i.fi||i.fi.collides(e.fi))&&(s+=o),n.add(Q.mS(o)));return s}function n(t,i){i.set(R),R.beginPath();var n=t.scale.x*z,e=t.scale.y*g;R.save(),R.translate(t.x,t.y),i.ro&&R.rotate(i.ro),R.scale(n,e),i.draw(R),R.restore()}function p(t,n,e,o,s,a,h){n.set(R),R.beginPath(),B=o.ps.x,C=o.ps.y,j=s.ps.x,q=s.ps.y,T=a.ps.x,A=a.ps.y;var c=1;if(W){var p=o.ps.w+s.ps.w+a.ps.w;p=e?(p+h.ps.w)/4:p/3;var y=t.z*p;if(c=r.clamp(Math.pow(2,-W*W*y*y/Math.LN2),0,1),!c)return}O.info.render.ve+=e?4:3,e?(P=h.ps.x,I=h.ps.y,f(B,C,j,q,T,A,P,I),O.info.render.qd++):(l(B,C,j,q,T,A),O.info.render.fa++),n instanceof u?(D.cp(n.cr),N.cp(n.em),V.cp(Y),L=i(t,n,V),V.mul(D).add(N),n.draw(R,V,c,L)):n.draw(R,c)}function l(t,i,n,e,o,r){R.moveTo(t,i),R.lineTo(n,e),R.lineTo(o,r),R.lineTo(t,i)}function f(t,i,n,e,o,r,s,a){R.moveTo(t,i),R.lineTo(n,e),R.lineTo(o,r),R.lineTo(s,a),R.lineTo(t,i)}function y(t,i,n){var e,o=i.x-t.x,r=i.y-t.y,s=o*o+r*r;s&&(e=n/Math.sqrt(s),o*=e,r*=e,t.x-=o,t.y-=r,i.x+=o,i.y+=r)}t=t||{};var d,x,m,v,w,z,g,S,b,M,k,F,B,C,j,q,T,A,P,I,W,O=this,E=new c,R=t.ctx,V=new e,D=new e,N=new e,Q=new e,Y=t.am||new e,L=0,U=new o;R&&(R.lineCap=R.lineJoin="round",this.info={render:{vertices:0,faces:0,quads:0}},this.clear=function(t,i){R.clearRect(0,0,t,i)},this.render=function(t,i){O.info.render.ve=0,O.info.render.fa=0,O.info.render.qd=0,v=R.canvas.width,w=R.canvas.height,z=v/2,g=w/2,this.clear(v,w),R.save(),R.setTransform(1,0,0,-1,0,w),R.translate(z,g),d=E.pS(t,i),x=d.el,m=d.ls,S=i,W=t.fogDensity;for(var e,o,r,c,u=0,l=x.length;l>u;u++)if(e=x[u],o=e.mt,o&&o.op)if(e instanceof h)e.x*=z,e.y*=g,n(e,o);else if(e instanceof s){if(c=e instanceof a,b=e.v0,M=e.v1,k=e.v2,c&&(F=e.v3),-1>b.ps.z||b.ps.z>1)continue;if(-1>M.ps.z||M.ps.z>1)continue;if(-1>k.ps.z||k.ps.z>1)continue;if(c&&(-1>F.ps.z||F.ps.z>1))continue;b.ps.x*=z,b.ps.y*=g,M.ps.x*=z,M.ps.y*=g,k.ps.x*=z,k.ps.y*=g,r=o.ov,r&&(y(b.ps,M.ps,r),y(M.ps,k.ps,r),y(k.ps,b.ps,r)),c?(F.ps.x*=z,F.ps.y*=g,p(e,o,c,b,M,k,F)):p(e,o,c,b,M,k)}R.restore()})}var e=t(15),o=t(21),r=t(34),s=t(28),a=t(30),h=t(31),c=t(26),u=t(10);i.exports=n},{}],34:[function(t,i,n){"use strict";n.lerp=function(t,i,n){return t+n*(i-t)},n.inverseLerp=function(t,i,n){return(n-t)/(i-t)},n.clamp=function(t,i,n){return i>t?i:t>n?n:t},n.smoothstep=function(t,i,n){return i>=t?0:t>=i?1:(t=(t-i)/(n-i),t*t*(3-2*t))},n.smootherstep=function(t,i,n){return i>=t?0:t>=i?1:(t=(t-i)/(n-i),t*t*t*(t*(6*t-15)+10))},n.randInt=function(t,i){return t+Math.floor(Math.random()*(i-t+1))},n.randFloat=function(t,i){return t+Math.random()*(i-t)},n.randFloatSpread=function(t){return t*(.5-Math.random())},n.randSign=function(){return Math.random()<.5?-1:1},n.e=function(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t}},{}]},{},[1]);