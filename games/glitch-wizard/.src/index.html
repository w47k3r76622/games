<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title></title><style>article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}.stage,canvas{margin:0 auto;width:800px}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.stage{position:relative}canvas{border:1px solid #000;position:absolute}.bg{width:800px;height:600px;background-color:#7cc9ef}img{display:none}</style></head><body><div class="stage"><canvas class="bg" width="800" height="800"></canvas><canvas class="camera" width="800" height="600"></canvas><canvas class="hud" width="800" height="600"></canvas></div><img class="heart" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAApElEQVQ4T6WTMQ6AIBAElxfZ6l9s7H2OvRY8htbO32AOuciROzDRhsTbHRZWHX4+7qcfNSAWwE+zUhQVN8/TLGT69KxpJgT04tw2DOv6KgCU4BoiAMkcAoL3GBuXcwBYcgqZYJ67ZvKZAIrX2plD2Qk+dEqbXMoRyCpa0Fi1uWyB9SZEM2sANYlltgAC0jK3AAmy54Nx59q99H4m/ghNXQ/QLfYGZT84EUBGgjoAAAAASUVORK5CYII=" alt=""> <img class="bomb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T62T7w0AEQzFmcYAEuNYwDwWIDGMxACmcSFXcf5cXZzPfb++6islh4/u6JVSSWs9rUUBb+Lc/BWAiTFA6sb7NEIRc84LI4QArAEyoyYQMsaqiRgjgB6aJaAVSymJMYY454axe8DQXQhRXVhrBxcoIKszxHtPZmNsAcDCDiDX/vOJs4jf60S3UFyc5KBtDmlcRh49JuxaL7LdRxFETUynAAAAAElFTkSuQmCC" alt=""> <img class="arrow" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVMaXEAAAApFQBaLQCQAAAzMzM2BATMzMxS+hqqAAAAAXRSTlMAQObYZgAAAD1JREFUeAFjGJ6AEQhQBAThAoIQBS4hYSICYH65EgiouaS6JoJlyo3hwJABWYUrRAXCjJSwkBABDFuGFQAABVEKy99jA94AAAAASUVORK5CYII=" alt=""> <img class="wizard1" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAATlBMVEUAAAAAAAA8ZBwcPRdHZo9pkSsQODh4YR/M6/8sWGzDnzjUjFKCrdQ4Nibrs4U4i5d1Pi3rzzgfMGn/2a1kt7//6IVrFxfT09NSLiGUlJSLNx2kAAAAAXRSTlMAQObYZgAAAZNJREFUeAGVkoWC3UAMAyvbyxs+/P8frZzDQK+tHr+ZJSW//ivxK3cYsZCUMk2l8Nsd91CZHqYylYsBx5MPj+XBP+N1gokhozGVG8G3QLQznwdHniqpb2GeW2v+dhKGVKsbcxvHjRlrOi9BhVmYx8fHpabhJHD2YUifGWZchT1cwtMuwhsusQHwPeCu6LmVuL0CPgOuTVLYYtuen57uhX0DPwqIPofnugcPdmE8CadFwCL/xAdvB/CrwB3c8er1qmLPMNzwZamDqWrSBLsKqXICdBOtWq1fhOgBtHcrxTIuN/x+uypUteecRc8COZ+qwiQkEZw5MalKCFJRQzgLXJ9Q8C4sC04czl0QqQsA8qsgQRUpAWb9KOw8eUWVlKfopjhNoArvkhbT7XiKtx0qeJF8I0E0SzgK8AIoNA0ezXx9GV4xuSgA2QXpdicwTr3onoN8FwD94mY9HwVErKofgvHT+ffrCaxuON8j1iUfqqJh64chYrkf+a6YraswZtmbxFFgOIn1nj2GK2YAvHiAK/9SrvQ3uTYW9yTfemcAAAAASUVORK5CYII=" alt=""> <img class="wizard2" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAATlBMVEUAAAAAAAAcPRd4YR8QODgsWGw8ZBxHZo/UjFI4NiaCrdTDnzg4i5dpkSvM6/91Pi3rzzj/2a3rs4Vkt7//6IUfMGlrFxdSLiHT09OUlJQ4EZXSAAAAAXRSTlMAQObYZgAAAZJJREFUeF6VkYlu20AQQ8OZvXX5Str+/4+WhJBGq1UKhAZsAe95Lr39KOErVxghksQ4zzHy6YorVObnHOc4GBCe9fcQn/oNY4GZeQqxwIWwj0BOpjrouU+kGmHbSin6OgnVp0nGVh6PO/OY/NyCCnNjXq/XbfJ6Eli9Vv+XumEQ9rCFUgZhxzEUAJoBV4feSgz3P4AqYLikhHso998fH9dCYMp/BQTVUMYZFEDC41uhMgE85Ddcd/QK6C1ogjpwnpiGGRRUr0MBChXZzM1h2XuD41X3CmvZJn4yasWRx8AAZjRizLkBOBUIMRpMxrquLVHtCiiBNC1LcnhaEnpBOCVyChOmRYJ1I4Aw4VNIiYIfBHEiOMntBufG5hs6nhYzgNdw5AzASzkKbmY+gQox92h6Oi4JHVIWe2jTlIg7AXxDohoz0VguhLILMvK6GPol1POT65b52IPMmKSIa8zGHodA/FPI9Nqae+H9q4CS8iC8U6Gz45Tz2igcAiq7I9qa+CmQkwlJicVHQ8Ev5oRH8e0H+QtwPRcHaY+McQAAAABJRU5ErkJggg==" alt=""> <img class="floor-right" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAALVBMVEUAAABpjCeHqD6mxFolKxo6VA8cEwuhgmwXFxeHaFLK5n44JxlSOim6m4ZrUDz82OfoAAAAAXRSTlMAQObYZgAAAYFJREFUeNqNkVGO5CAMRGNsgwlJ7n/cfYagzUjzMaXuhlQ9KkZ9/FXy+x7ZMkQ+q/wAvJQiv2hz7lImkj9lSlWntQhxQTPHP3VpdnIAIFcBd18n5VN4nnSUciIl3fUoU/YcO45tKNhO0ZnnxGwB50rPrzRrnQZB8yYi+qrw4SsAeU1xRDoxc3Ois4C4igHM6xgNYV7MJJGFWfEEzDGDisALE1dneIMw1gRCxHimwTSCtwA7YKj6/i8cQiKsJB00ADlwLEATEE4XlSgepoKZxNsgZ9IWoaRFAth5P+SR4jCm45sqEH4OxSjhC4hIoGSzsM+BGVLxSVEkgBtGybrSnGmELaBytFQbYzztfkJh1Wq96gbYP2Z11Kvd7amMwRMatoExrn5hkLcLsOL0zv7aDaO3PgBa6/0C6P2+gdvYQG/33ZMjz2Wm0McGWjpJZH3bMfnSeL1OzKBLdGW2X/F64817bo8PcL3u8w7aK/oCo79KFm46/4FexyYuCCYdF7d6dv4PoaMQqz/NQQ4AAAAASUVORK5CYII=" alt=""> <img class="floor-left" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAALVBMVEUAAACHqD4cEwtpjCeHaFI4JxkXFxemxFqhgmwlKxo6VA9SOim6m4bK5n5rUDxNmlg3AAAAAXRSTlMAQObYZgAAAXFJREFUeNqVkdu2wyAIRI8ioGjy/5/bmaJJX8+sZSXM5pL071+Sn7jk9T6WXyHh7i/k/noC7YBH6CMi4fKovMoGfl3sAiuoB4ND4DTGQZR+uTwH0Wc+y+kkF5HPHCHCGSzwzTKkzggbEe65yYWTIrSBESPM+IvJJtewKL4HSgIhJCy8mIUMG+IyhpQQdCBhJQzW5QNXGTjuqCgy9scMD5S5FINIsU8MhL6BKOIlBr0hCchAY4vzbxTuGV8AJ4KbsEA2UEYavNTYphjj8XSwG2lmqtriiIKYidOht9Zn1Xar9rU6kFpZYenLvFvTOVtvqq2Dxl1nraoJWJ3I3HMBqI1Ctxud6gYq2dnhw9nSxU71AeAzM1URp+C/AHdjhYLFLtgDBIG3Q98+0msB7mQfgLrpo4zutzunHeBI+7EJY6UDkAY/YW5b8zU0AVr3VD1+pei/AA2t+yOyYQLzAJqA7nJ+r+8KZwcOZ1KpOtfKl5hT6wfRaRFa7I2naQAAAABJRU5ErkJggg==" alt=""> <img class="floor-middle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAKlBMVEUAAACHqD5pjCc6VA+mxFolKxrK5n44JxkcEwtSOilrUDyhgmyHaFK6m4YULsMOAAAAAXRSTlMAQObYZgAAAYpJREFUeNqdkOuy4CAIg721oOL7v+5+UXvOzuy/zbQKJATa9L/IfyflXy5nrnPXUnJruT7PU2uplZNSqa0oeGpq5SAj23jfl4ab4tAapKIr28FJqo70kkpw0AjV++uaqCK9+LE5FaicXpAvzgJaoRw3UhwYxovN7x7q0iyQOJ8HmiM/teyv5cnoC3dJrLcFvI2yYoiyixIm/RDaeBEQQlYyrHTnlqiaubl7bpWzw7pRErqzw+PD3eZ0f83GCKukvcMiOgIMxlrd324RQXd0A/uQAN7Wmms0Grv4tTSCLOZIDZ+5wAzoLVDCCJQEKT5+ju49UCgNTQmKM2kbAtCdDoiYuN17RjJmBcGQkAoEgEdAGYEUwzBydcD4AUIZJYe/P2Zc3gTXQrQl79Y3vabTcj8PewldAtNoeLqdHlkvKigECRYIZ7FhQsAKgZP5TKx2FC5Dm9CXN9OdVKJ4px9S238JS4oHql02jtkVoPhMfdPDhU+dGB4/gr55De+cqiEIt/jmsrcx/FsykP8BWekaDRWalM4AAAAASUVORK5CYII=" alt=""> <img class="spikes" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAALBAMAAADsP5IyAAAAG1BMVEUAAAAzMzOcnJx4eHi9vb1XV1ccEwtSOilrUDzwI7XUAAAAAXRSTlMAQObYZgAAAHZJREFUeAEVyEVhxAAQBdA3sxEQMLAkIAKWQUulVFjvVVAICci93D8fBwCnhAQACv/mZIn7wqmQfHNaWvrEtwTdbBmd6FLSnJhREj8SIfw/f0op+dKXbdcrqyj3kotSBMv8GRrJ82yL7Dh8y0dVeqVst4rp6eEXa3MbsFJisC8AAAAASUVORK5CYII=" alt=""> <img class="glitch1" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAAJ1BMVEUAAAB4Uj1FKyuheFQpHxQAAAB1Pi3/2a3UjFLrs4WjMzPT09OUlJQ407pZAAAAAXRSTlMAQObYZgAAARhJREFUeNqF04uOgzAMRNH11EmB3f//3rUdGJc4qFaFqt6jhFd/Pgfn8Ie5yitGVob1wTAnMbPqzEFmIHKtP1gCFRt2rieTyJ4gBQKwx5f2CZRdxjU0oEXKFUaPsdjYeRLsAHrv7Qaah6u31m2iJ4CXcfg7jiWI7ov/HsdmswSqvW8G9n0nSAHAwLa/Y/YC8A3EZRLUzifZt62cgYOY8y7aoPbxjuSzugNlGESwAiTxqfdJbdJN4GwCGOUplD0cOPXjBM4F4mCEPQHA91YBPIFXABGgdL0DXYB88csCBQhKJ4guWgH0O0AAiIPSuYc8AO5x/XfuQAhkHCbQQsQeiCwEKSQEJIadoDkR1bGKNgOVeHPFXEnMlP8B7V8JQlGdMqIAAAAASUVORK5CYII=" alt=""> <img class="glitch2" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAAJ1BMVEUAAABFKyt4Uj2heFQpHxQAAAB1Pi3/2a3UjFLrs4WjMzPT09OUlJRqiCNcAAAAAXRSTlMAQObYZgAAARtJREFUeNqV04tuhDAMRNHONEmB9v+/txMbyyUGoVor9nGPLEDsx78G5zxWftrwziDqg/F8ITI3PbORFZCx31mCRk12xp5FZE+QAgLRA/a/oEW3dxId6JZyg3cbxR49TyK6MsYY/QL6DNF7HxrrCTCLH36O4w54n8u/j2PT3ILWxtgE9n0XWAUAgW3/stkLwBuw6wxQezwxwNi2PINyFVJ2GzvKAl/BcxNX0EALQXRcACkRZCLc3OmmAR0VAFgjIJs9RTsfGcw987AA/SggMV8i0RPAgLpmfqkdeSH6hDfwuCHuQ+0CeAEIoN5uQf430EoPQAeLUHFhAARYAGOFLSDRy9MQAtSgXYEJmvAPXb0IJ1D1XIhGKWqdh/YL5hUJG0GN9wUAAAAASUVORK5CYII=" alt=""><script>!function(){"use strict";function t(){Object.defineProperty(this,"_emitterId",{value:++Y}),Z[this._emitterId]={}}function e(t){return Array.prototype.slice.call(document.querySelectorAll(t))}function i(t){return"function"==typeof t}function n(t){function e(t,i){var n,s;return 0===t.length?i:1===t.length?(r(t[0],function(t,e){i[e]=t}),t.pop(),i):(s=t[t.length-1],n=t[t.length-2],r(s,function(t,e){n[e]=t}),t.pop(),e(t,i))}var i,n=[];for(i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e(n,t)}function r(t,e,i){Array.isArray(t)?t.forEach(e.bind(i?i:t)):Object.keys(t||{}).forEach(function(n){e.call(i||t,t[n],n,t)})}function s(t,e,i){var n;return Array.isArray(t)?n=t.map(e.bind(i?i:t)):(n=[],r(t,function(r,s){n.push(e.call(i||t,r,s,t))})),n}function h(t,e){return Math.floor(Math.random()*(e-t+1))+t}function o(t,e,i){var n=null;return function(){var r,s=[],h=arguments.length;for(n&&window.clearTimeout(n),r=0;r<h;r++)s[r]=arguments[r];n=setTimeout(function(){t.apply(i,s)},e||0)}}function a(t,e,i){var n={};return i="function"==typeof e?i:e,function(r){return e&&(r=e.apply(null,arguments)),n[r]||(n[r]=t.apply(i,arguments))}}function c(t,e,i){var n=t-e;return n>i?e+i:n<-i?e-i:t}function u(t,e){return window.addEventListener(t,e)}function f(t,e,i){t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.drawImage(i,e.x,e.y,e.w,e.h)}function l(){var t,e=arguments.length,i=[],n=0;for(t=0;t<e;t++)i[t]=arguments[t];return function(){return n=n>=e?0:n,i[n++]}}function d(t){for(var e,i,n=t.length;n;)e=Math.floor(Math.random()*n--),i=t[n],t[n]=t[e],t[e]=i;return t}function m(){}function w(t){function e(){tt.call(this),"function"==typeof this.init&&this.init.apply(this,arguments)}var i=this.prototype||{},r=Object.create(i);return n(r,t),e.extend=w,e.prototype=r,e.prototype.constructor=e,e}function p(){var t,e,i;ot&&(t=Date.now(),i=t-ht,e=Math.max(i/at,1).toFixed(2),rt.emit("update",e,i),rt.emit("render",i),ht=Date.now(),st(p))}function g(){dt.drawImage(ft.main.el,pt.x,pt.y,mt,wt,0,0,mt,wt)}function y(t,e,i){return t+e+i}function v(t,e,i){var n={canvas:document.createElement("canvas")};return n.ctx=n.canvas.getContext("2d"),n.canvas.width=t,n.canvas.height=e,n.ctx.fillStyle=i,n}function x(t,e){var i=0;return s(t,function(t,n,r){var s=r[n-1];return i+=(s?s.width:0)*e+(0!==n?e:0)},0)}function b(t,e,i){var n,s,h,o,a,c;return t=t.toUpperCase(),n=Ot(t),h=n[0].map.length*e,s=y(t,e,i),a=x(n,e),o=a[a.length-1]+Et(t[t.length-1])*e,At[s]=c=v(o,h,i),r(n,function(t,i,n){Ct(c.ctx,t.map,a[i],0,e)}),c}function k(t){var i=t.w||(t.w=32),n=t.h||(t.h=32),r=e("img."+t.name)[0],s=document.createElement("canvas"),h=s.getContext("2d");return s.width=i,s.height=n,h.imageSmoothingEnabled=!1,h.mozImageSmoothingEnabled=!1,h.drawImage(r,0,0,i,n),s}function E(){return Jt.filter(z)}function O(){var t=Jt.filter(function(t){return t.isOffscreen()}).pop();return t||(t=new Dt({x:-100,y:-100}),Jt.push(t),Ht.addEntity(t)),t}function C(t){return t.w+S()}function A(t,e,i){return new Tt({size:t,x:e,y:i})}function I(t,e){return new Rt({x:t,y:e})}function S(){return h(128,220)}function z(t){return t.isOnscreen()===!0}function j(t){return t.isOffscreen()===!0}function T(){return Lt.filter(function(t){return t.isBehind()&&t.isOffscreen()})}function F(){return P()}function R(){return Lt.filter(j)}function P(){return Lt.filter(z)}function M(){return qt.filter(z)}function B(){return Gt.filter(z)}function D(){T().forEach(function(t){t.x=Ut,Ut+=Wt+S()})}function H(){Ht.w-pt.x<=1200&&W()}function W(){var t=F(),e=R(),i=(B(),E());t.forEach(function(t,e){var i,n,r,s;r=t.x-pt.x,t.bomb&&(n=t.bomb,s=n.x-t.x,n.x=r+s),Ut=t.x=r,t.spikes&&(i=t.spikes,i.x=t.x+t.w/2-i.w/2),Ut+=C(t)}),i.forEach(function(t,e){t.x-=pt.x}),d(e).forEach(function(t){var e,i;t.x=Ut,t.spikes&&(e=t.spikes,e.x=t.x+t.w/2-e.w/2),t.bomb&&(i=t.bomb,i.x=t.x+t.w+S()/2),Ut+=C(t)}),ee.x=ee.x-pt.x,pt.x=0,Lt=t.concat(e)}function _(){var t=0,e=h(1,12);rt.on("update",function(i,n){t+=n,t>=1e3*e&&(t=0,e=h(1,12),O().throwAt(ee))})}function L(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(i<.18){var n=.18/i;this.b*=n,this.c*=n,this.e*=n}}}function U(){this._params=new L;var t,e,i,n,r,s,h,o,a,c,u,f;this.reset=function(){var t=this._params;n=100/(t.f*t.f+.001),r=100/(t.g*t.g+.001),s=1-t.h*t.h*t.h*.01,h=-t.i*t.i*t.i*1e-6,t.a||(u=.5-t.n/2,f=5e-5*-t.o),o=1+t.l*t.l*(t.l>0?-.9:10),a=0,c=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var n=this._params;return t=n.b*n.b*1e5,e=n.c*n.c*1e5,i=n.e*n.e*1e5+12,3*((t+e+i)/3|0)},this.synthWave=function(l,d){var m=this._params,w=1!=m.s||m.v,p=m.v*m.v*.1,g=1+3e-4*m.w,y=m.s*m.s*m.s*.1,v=1+1e-4*m.t,x=1!=m.s,b=m.x*m.x,k=m.g,E=m.q||m.r,O=m.r*m.r*m.r*.2,C=m.q*m.q*(m.q<0?-1020:1020),A=m.p?((1-m.p)*(1-m.p)*2e4|0)+32:0,I=m.d,S=m.j/2,z=m.k*m.k*.01,j=m.a,T=t,F=1/t,R=1/e,P=1/i,M=5/(1+m.u*m.u*20)*(.01+y);M>.8&&(M=.8),M=1-M;for(var B,D,H,W,_,L,U=!1,q=0,G=0,J=0,K=0,N=0,Q=0,V=0,X=0,Y=0,Z=0,$=new Array(1024),tt=new Array(32),et=$.length;et--;)$[et]=0;for(var et=tt.length;et--;)tt[et]=2*Math.random()-1;for(var et=0;et<d;et++){if(U)return et;if(A&&++Y>=A&&(Y=0,this.reset()),c&&++a>=c&&(c=0,n*=o),s+=h,n*=s,n>r&&(n=r,k>0&&(U=!0)),D=n,S>0&&(Z+=z,D*=1+Math.sin(Z)*S),D|=0,D<8&&(D=8),j||(u+=f,u<0?u=0:u>.5&&(u=.5)),++G>T)switch(G=0,++q){case 1:T=e;break;case 2:T=i}switch(q){case 0:J=G*F;break;case 1:J=1+2*(1-G*R)*I;break;case 2:J=1-G*P;break;case 3:J=0,U=!0}E&&(C+=O,H=0|C,H<0?H=-H:H>1023&&(H=1023)),w&&g&&(p*=g,p<1e-5?p=1e-5:p>.1&&(p=.1)),L=0;for(var it=8;it--;){if(V++,V>=D&&(V%=D,3==j))for(var nt=tt.length;nt--;)tt[nt]=2*Math.random()-1;switch(j){case 0:_=V/D<u?.5:-.5;break;case 1:_=1-V/D*2;break;case 2:W=V/D,W=6.28318531*(W>.5?W-1:W),_=1.27323954*W+.405284735*W*W*(W<0?1:-1),_=.225*((_<0?-1:1)*_*_-_)+_;break;case 3:_=tt[Math.abs(32*V/D|0)]}w&&(B=Q,y*=v,y<0?y=0:y>.1&&(y=.1),x?(N+=(_-Q)*y,N*=M):(Q=_,N=0),Q+=N,K+=Q-B,K*=1-p,_=K),E&&($[X%1024]=_,_+=$[(X-H+1024)%1024],X++),L+=_}L*=.125*J*b,l[et]=Math.max(-1,Math.min(1,L))||0}return d}}function q(t,e){var i,n;return Nt._params.setSettings(t),n=new Float32Array(Nt.totalReset()),Nt.synthWave(n,n.length),i=e.createBuffer(1,n.length,44100),i.getChannelData(0).set(n),i}function G(t){var e=q(t,Xt);return{play:function(){if(!Vt)return!1;var t=Xt.createBufferSource();t.buffer=e,t.connect(Xt.destination),t.start(0)}}}function J(){pe(ee.health).reduce(function(t,e){return ae.drawImage(e,t,4,32,32),t-40},ce-38)}function K(){var t=Math.floor(le);It.draw(ae,"distance: ",4,10,3,"rgb( 255, 255, 255 )",we),Array.prototype.slice.call(t.toString()).forEach(function(t,e){It.draw(ae,t,175+20*e,10,3,"rgb( 255, 255, 255 )",we)})}function N(){de&&!ee.dead&&(It.draw(ae,"glitch",220,100,10,"#fff",me),It.draw(ae,"wizard",220,200,10,"#fff",me),It.draw(ae,"travel as far as you can, fam",135,300,3,"#fff",me))}function Q(){ee.dead&&(It.draw(ae,"game",275,100,10,"#fff",me),It.draw(ae,"over",275,200,10,"#fff",me),It.draw(ae,"press R to try again",210,300,3,"#fff",me))}function V(){ae.clearRect(0,0,ce,ue),N(),J(),K(),Q()}function X(){var t,e=window.innerWidth/window.innerHeight;t=e<=1?window.innerWidth/ge.width:window.innerHeight/ge.height;var i=ge.height*t-25,n=ge.width*t-25;ge.style.height=i+"px",ye.style.height=i+"px",ve.style.height=i+"px",xe.style.height=i+"px",ge.style.width=n+"px",ye.style.width=n+"px",ve.style.width=n+"px",xe.style.width=n+"px"}var Y=0,Z={},$=[];t.prototype.on=function(t,e){var i=Z[this._emitterId];return(i[t]||(i[t]=[])).push(e),this},t.prototype.off=function(t,e){var i,n;return 0===arguments.length?(Z[this._emitterId]={},this):1===arguments.length?(Z[this._emitterId][t]=[],this):"function"==typeof e?(i=Z[this._emitterId][t],n=i.indexOf(e),i.splice(n,1),this):void 0},t.prototype.emit=function(t){var e,i=[],n=Z[this._emitterId],r=arguments.length;if(r>1)for(e=1;e<r;e++)i.push(arguments[e]);return(n[t]||$).forEach(function(t){t.apply(null,i)}),this},t.prototype.once=function(t,e){var i=this,n=function(){e.apply(null,arguments),i.off(t,n)};return this.on(t,n)};var tt=window.Emitter=t,et=w.call(m,tt.prototype),it={37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",32:"SPACE",80:"P",82:"R"},nt={LEFT:!1,UP:!1,RIGHT:!1,DOWN:!1,SPACE:!1,P:!1,R:!1};u("keydown",function(t){var e=t.keyCode;nt[it[e]]=!0}),u("keyup",function(t){var e=t.keyCode;nt[it[e]]=!1});var rt=new tt,st=window.requestAnimationFrame,ht=null,ot=!1,at=1/60*1e3;rt.start=function(){ot||(ht=Date.now(),ot=!0,st(p),rt.emit("start"))},rt.stop=function(){ot&&(ot=!1,rt.emit("stop"))},u("blur",o(rt.stop,250)),u("focus",o(rt.start,250)),window.loop=rt;var ct=et.extend({init:function(t){this.cfg=t=n({},t),t.selector?(this.el=e(t.selector)[0],this.w=this.el.width,this.h=this.el.height):(this.el=document.createElement("canvas"),this.w=this.el.width=t.w,this.h=this.el.height=t.h),this.ctx=this.el.getContext("2d"),this.w=this.el.width,this.h=this.el.height,this.entities=[],this.player=null,this.bindEvents()},bindEvents:function(){rt.on("update",this.onUpdate.bind(this)),rt.on("render",this.onRender.bind(this))},onUpdate:function(t){var e=this;e.emit("before-update",t),r(this.world.bombs,function(e){e.update.call(e,t)}),r(this.entities,function(e){e.update.call(e,t)}),e.emit("update",t)},onRender:function(t){var e=this;e.emit("before-render"),e.ctx.clearRect(0,0,e.w,e.h),r(this.world.floors,function(t){t.render.call(t,e.ctx)}),r(this.world.spikes,function(t){t.render.call(t,e.ctx)}),r(this.world.bombs,function(t){t.render.call(t,e.ctx)}),r(this.entities,function(t){t.render.call(t,e.ctx)}),e.emit("render")},addEntity:function(t){this.entities.push(t)}}),ut=new ct({w:3200,h:600}),ft={main:ut},lt=e(".camera")[0],dt=lt.getContext("2d"),mt=lt.width,wt=lt.height,pt={w:mt,h:wt,x:0,y:0,velocity:0,get offset(){return pt.w/4},shake:function(){pt.shakeEffect=!0,pt.effectCount=30},render:function(){dt.clearRect(0,0,mt,wt),pt.shakeEffect&&pt.effectCount--?(dt.save(),dt.translate(h(1,5),h(1,5)),g(),dt.restore()):(pt.effectCount<=0&&pt.shakeEffect&&(pt.shakeEffect=!1,pt.effectCount=0),g())}};rt.on("render",pt.render.bind(pt));var gt,yt,vt=et.extend({init:function(t){this.cfg=n({x:0,y:0},t),this.w=this.cfg.w,this.h=this.cfg.h,this.x=this.cfg.x,this.y=this.cfg.y,this.offscreen=document.createElement("canvas"),this.offscreen.width=this.w,this.offscreen.height=this.h,this.offscreenCtx=this.offscreen.getContext("2d"),i(this.buildSprite)&&(this.sprite=this.buildSprite())},collidesWith:function(t){var e=this.hitbox?this.hitbox:this,i=t.hitbox?t.hitbox:t;return e.x<i.x+i.w&&i.x<e.x+e.w&&e.y<i.y+i.h&&i.y<e.y+e.h},isOffscreen:function(){var t=this,e=pt;return!(t.x<e.x+e.w&&e.x<t.x+t.w)},isOnscreen:function(){return!this.isOffscreen()},isBehind:function(){var t=this,e=pt;return t.x<e.x},update:function(){},render:function(){}}),xt={1:[[,,1,,0],[,1,1,,0],[,,1,,0],[,,1,,0],[1,1,1,1,1]],2:[[1,1,1,1,0],[,,,,1],[,1,1,1,0],[1,,,,0],[1,1,1,1,1]],3:[[1,1,1,1,0],[,,,,1],[,1,1,1,1],[,,,,1],[1,1,1,1,0]],4:[[1,,,1,0],[1,,,1,0],[1,1,1,1,1],[,,,1,0],[,,,1,0]],5:[[1,1,1,1,1],[1,,,,0],[1,1,1,1,0],[,,,,1],[1,1,1,1,0]],6:[[,1,1,1,0],[1,,,,0],[1,1,1,1,0],[1,,,,1],[,1,1,1,0]],7:[[1,1,1,1,1],[,,,,1],[,,,1,0],[,,1,,0],[,,1,,0]],8:[[,1,1,1,0],[1,,,,1],[,1,1,1,0],[1,,,,1],[,1,1,1,0]],9:[[,1,1,1,0],[1,,,,1],[,1,1,1,1],[,,,,1],[,1,1,1,0]],0:[[,1,1,1,0],[1,,,,1],[1,,,,1],[1,,,,1],[,1,1,1,0]],A:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,,1],[1,,,,1]],B:[[1,1,1,1,0],[1,,,1,0],[1,1,1,1,1],[1,,,,1],[1,1,1,1,1]],C:[[1,1,1,1,1],[1,,,,0],[1,,,,0],[1,,,,0],[1,1,1,1,1]],D:[[1,1,1,,0],[1,,,1,0],[1,,,,1],[1,,,,1],[1,1,1,1,1]],E:[[1,1,1,1,1],[1,,,,0],[1,1,1,,0],[1,,,,0],[1,1,1,1,1]],F:[[1,1,1,1,1],[1,,,,0],[1,1,1,,0],[1,,,,0],[1,,,,0]],G:[[1,1,1,1,1],[1,,,,0],[1,,1,1,1],[1,,,,1],[1,1,1,1,1]],H:[[1,,,,1],[1,,,,1],[1,1,1,1,1],[1,,,,1],[1,,,,1]],I:[[1,1,1,1,1],[,,1,,0],[,,1,,0],[,,1,,0],[1,1,1,1,1]],J:[[,,,,1],[,,,,1],[,,,,1],[1,,,,1],[1,1,1,1,1]],K:[[1,,,1,0],[1,,1,,0],[1,1,1,,0],[1,,,1,0],[1,,,,1]],L:[[1,,,,0],[1,,,,0],[1,,,,0],[1,,,,0],[1,1,1,1,1]],M:[[1,,,,1],[1,1,,1,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,,1],[1,1,,,1],[1,,1,,1],[1,,,1,1],[1,,,,1]],O:[[1,1,1,1,1],[1,,,,1],[1,,,,1],[1,,,,1],[1,1,1,1,1]],P:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,,0],[1,,,,0]],Q:[[1,1,1,1,0],[1,,,1,0],[1,,,1,0],[1,,,1,0],[1,1,1,1,1]],R:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,1,0],[1,,,,1]],S:[[1,1,1,1,1],[1,,,,0],[1,1,1,1,1],[,,,,1],[1,1,1,1,1]],T:[[1,1,1,1,1],[,,1,,0],[,,1,,0],[,,1,,0],[,,1,,0]],U:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,,,1],[1,1,1,1,1]],V:[[1,,,,1],[1,,,,1],[1,,,,1],[,1,,1,0],[,,1,,0]],W:[[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,,1,1],[1,,,,1]],X:[[1,,,,1],[,1,,1,0],[,,1,,0],[,1,,1,0],[1,,,,1]],Y:[[1,,,,1],[1,,,,1],[1,1,1,1,1],[,,1,,0],[,,1,,0]],Z:[[1,1,1,1,1],[,,,1,0],[,,1,,0],[,1,,,0],[1,1,1,1,1]]," ":[[,,,,0],[,,,,0],[,,,,0],[,,,,0],[,,,,0]],",":[[,,,,0],[,,,,0],[,,,,0],[,,1,,0],[,,1,,0]],"+":[[,,,,0],[,,1,,0],[,1,1,1,0],[,,1,,0],[,,,,0]],"/":[[,,,,1],[,,,1,0],[,,1,,0],[,1,,,0],[1,,,,0]],":":[[,,,,0],[,,1,,0],[,,,,0],[,,1,,0],[,,,,0]],"@":[[1,1,1,1,1],[,,,,1],[1,1,1,,1],[1,,1,,1],[1,1,1,1,1]],".":[[,,,,],[,,,,],[,,,,],[,,,,],[1,,,,]],"=":[[,,,,],[1,1,1,1,1],[,,,,],[1,1,1,1,1],[,,,,]]},bt=a(function(t){return Array.prototype.slice.call(t).map(function(t){return t.toUpperCase()})}),kt=a(function(t){return{map:xt[t],width:Et(t),"char":t}}),Et=a(function(t){return xt[t].reduce(function(t,e){return t<e.length?e.length:t},0)}),Ot=a(function(t){return bt(t).map(kt)}),Ct=a(function(t,e,i,n,s){r(e,function(e,h){var o=n+h*s;r(e,function(e,n){var r;0!==e&&(r=i+n*s,t.fillRect(r,o,s,s))})})},function(t,e){return e["char"]}),At={},It={draw:function(t,e,i,n,s,h,o){var a,c=y(e,s,h);(a=At[c])||(a=b(e,s,h)),t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,r(o,function(e,i){t[i]=e}),t.drawImage(a.canvas,i,n),t.shadowBlur=0},prime:function(t,e,i){b.apply(null,arguments)}},St=a(k,function(t){return t.name}),zt={glitch1:St({name:"glitch1",w:32,h:44}),glitch2:St({name:"glitch2",w:32,h:44}),wizard1:St({name:"wizard1",w:32,h:44}),wizard2:St({name:"wizard2",w:32,h:44})},jt={left:St({name:"floor-left"}),middle:St({name:"floor-middle"}),right:St({name:"floor-right"})},Tt=vt.extend({init:function(t){var e=this;0===t.size?(this.small=!0,this.size=0):this.size=t.size||3,vt.prototype.init.apply(this,arguments),this.setDimensions(),Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+35}},w:{get:function(){return e.w-55}},y:{get:function(){return e.y+20}},h:{value:1}})},setDimensions:function(){this.w=128*(this.size+2),this.h=128},hasSpikes:function(){return!!this.spikes},buildSprite:function(){var t,e,i=1,n=this.size,r=32,s=32;for(e=document.createElement("canvas"),t=e.getContext("2d"),e.width=(this.size+2)*r,e.height=s,f(t,{x:0,y:0,w:r,h:s},jt.left),i;i<=n;i++)this.small||f(t,{x:r*i,y:0,w:r,h:s},jt.middle);return f(t,{x:r*i,y:0,w:r,h:s},jt.right),e},render:function(t){this.isOffscreen()||f(t,this,this.sprite)}}),Ft=St({name:"spikes",w:32,h:11}),Rt=vt.extend({init:function(t){var e=this;t.w=128,t.h=55,vt.prototype.init.apply(this,arguments),Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+25}},w:{get:function(){return e.w-35}},y:{get:function(){return e.y+20}},h:{value:1}})},render:function(t){this.isOffscreen()||f(t,this,Ft)}}),Pt=St({name:"bomb",w:16,h:16}),Mt=vt.extend({init:function(t){var e=this;t.w=48,t.h=48,vt.prototype.init.apply(this,arguments),this.direction={x:0},this.speed=5,this.velocity={x:0,y:0},this.gravity=17,this.flung=!1,this.timer=null,this.flingInterval=500,Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+10}},w:{value:e.w-10},y:{get:function(){return e.y+10}},h:{value:e.h-10}})},checkBounds:function(){this.y>600&&(this.y=600,this.emit("landed"))},fling:function(){this.velocity.y=h(-15,-20),this.flung=!0},startFlingTimer:function(){var t=this;this.timer=window.setTimeout(function(){t.fling(),t.once("landed",function(){t.startFlingTimer()})},this.flingInterval)},checkPlayer:function(){!this.timer&&ee.x>=this.x-h(350,500)&&this.startFlingTimer()},resetTimer:function(){window.clearTimeout(this.timer),this.timer=null,this.flung=!1},checkTimer:function(){this.timer&&this.isOffscreen()&&this.resetTimer()},update:function(t){this.checkTimer(),this.isOffscreen()||(this.checkPlayer(),this.velocity.y=c(this.gravity,this.velocity.y,.4),this.y+=this.velocity.y*t,this.checkBounds())},render:function(t){this.isOffscreen()||f(t,this,Pt)}}),Bt=St({name:"arrow",w:32,h:32}),Dt=vt.extend({init:function(t){var e=this;t.w=64,t.h=64,vt.prototype.init.apply(this,arguments),Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+20}},w:{get:function(){return e.w-35}},y:{get:function(){return e.y+25}},h:{value:15}}),this.speed=h(13,15),this.velocity={x:0}},throwAt:function(t){this.x=pt.x+pt.w+100,this.y=t.y+t.h/2-this.h/2,this.thrown=!0},update:function(t){return this.isOffscreen()&&this.isBehind()?void(this.thrown=!1):(this.velocity.x=c(this.speed,this.velocity.x,.1),void(this.x-=this.velocity.x*t))},render:function(t){this.isOffscreen()||f(t,this,Bt)}}),Ht=ft.main,Wt=ft.main.w,_t=ft.main.h,Lt=[],Ut=0;for(gt=0;gt<30;gt++)yt=h(0,3),Lt.push(A(yt,Ut,_t-128)),Ut+=C(Lt[gt]);var qt=[];Lt.forEach(function(t,e){var i;e>0&&h(1,100)>=50&&(i=I(),i.x=t.x+t.w/2-i.w/2,i.y=t.y-i.h/2,qt.push(i),t.spikes=i)});var Gt=[];Lt.forEach(function(t,e,i){var n,r;e<i.length-1&&h(1,100)<=50&&(r=t.x+t.w+S()/2,n=new Mt({x:r,y:_t}),Gt.push(n),t.bomb=n)});var Jt=[],Kt={floors:Lt,spikes:qt,bombs:Gt,getOnscreenFloors:P,getOnscreenSpikes:M,getOnscreenBombs:B,getOnscreenArrows:E,start:_};Ht.on("before-update",H),Ht.on("before-update",D),Ht.world=Kt;var Nt=new U,Qt=window.AudioContext||window.webkitAudioContext,Vt=!0,Xt=new Qt,Yt={jump:G([0,,.2964,,.18,.3314,,.1583,,,,,.09,.1348,-.6,,,,1,-.16,.12,.27,-.16,.35]),hurt:G([3,,.0322,,.48,.7076,,-.3268,,,,,,,,,,,1,,,,,.35]),wizard:G([0,,.2557,,.59,.3608,,.2042,,,,,,.2346,,.4444,,,1,,,,,.35])},Zt={glitch:[zt.glitch1,zt.glitch2],wizard:[zt.wizard1,zt.wizard2]},$t=l(1,.8,.5,.3,0,.3,.5,.8,1),te=vt.extend({init:function(){vt.prototype.init.apply(this,arguments),this.direction={x:0},Object.defineProperty(this,"speed",{get:function(){return this.mode?6:5}}),this.velocity={x:0,y:0},this.gravity=12,this.x=10,this.y=400,this.vulnerable=!1,this.hurt=!1,this.health=4,this.dead=!1,this.lastAnim=Date.now(),this.currentFrame=0,this.mode=0,this.distance=0,Object.defineProperty(this,"frames",{get:function(){return Zt[0===this.mode?"glitch":"wizard"]}}),ft.main.addEntity(this),this.bindEvents()},bindEvents:function(){this.on("ouch",this.checkMode.bind(this)),this.once("move",function(){this.vulnerable=!0,Kt.start()}.bind(this))},checkMode:function(){0===this.mode?(this.mode=h(0,2),1===this.mode):this.mode=0;var t=this.mode?Yt.wizard:Yt.hurt;t.play()},checkKeys:function(){this.dead||this.falling&&0===this.mode||(this.right=nt.RIGHT,this.left=nt.LEFT,(nt.RIGHT||nt.LEFT)&&this.emit("move"),nt.SPACE&&this.startJump())},checkBounds:function(){this.x-pt.x<=0&&(this.x=pt.x),!this.dead&&this.y>=pt.y+pt.w&&(Yt.hurt.play(),this.die())},startJump:function(){this.jumping||this.falling||(this.velocity.y=this.mode?-11:-10,this.gravity=this.mode?4:8,this.currentFrame=1,this.emit("jump"),Yt.jump.play())},ouch:function(){this.setHurt(!0),this.health--,this.velocity.y=-6,this.direction.x=-1,this.velocity.x=3,pt.shake(),this.emit("ouch"),0===this.health&&this.die()},setHurt:function(t){this.lastHurt=t?Date.now():this.lastHurt,this.hurt=t,this.vulnerable=!t},checkHurt:function(){this.hurt&&Date.now()-this.lastHurt>2e3&&this.setHurt(!1)},checkRestart:function(){this.dead&&nt.R&&(window.location.href=window.location.href)},die:function(){this.dead=!0,this.vulnerable=!1,this.deathEffect=!0},setDirection:function(){this.right?this.direction.x=1:this.left&&(this.direction.x=-1)},update:function(t){this.checkKeys(),this.setDirection(),this.checkHurt(),this.checkRestart(),this.velocity.y=c(this.gravity,this.velocity.y,.4),this.y+=this.velocity.y*t,this.velocity.x=c(this.right||this.left?this.speed:0,this.velocity.x,.5),this.x+=this.velocity.x*t*this.direction.x,this.adjustCamera(t),this.checkCollisions(),this.checkBounds(),this.moving=this.velocity.x>0,this.falling=this.velocity.y>0,this.jumping=this.velocity.y<0,this.emit("update",this.velocity.x*t*this.direction.x)},render:function(t){var e=Date.now(),i=this.currentFrame;this.hurt&&(t.globalAlpha=$t()),f(t,this,this.frames[i]),t.globalAlpha=1,this.setFrame(e,i)},setFrame:function(t,e){this.moving&&t-this.lastAnim>=300&&(this.lastAnim=t,this.currentFrame=1===e?0:1),this.moving||this.jumping||(this.currentFrame=0)},adjustCamera:function(t){this.x>pt.x+pt.offset&&1===this.direction.x&&(pt.x+=.1*(this.x-pt.x-pt.offset)*t),(this.jumping||this.falling)&&this.y<350?pt.y+=.1*(this.y-pt.y-350)*t:pt.y=c(0,pt.y,5)},checkCollisions:function(){var t=this;t.dead||(r(Kt.getOnscreenFloors(),function(e){e.collidesWith(t)&&(t.velocity.y=0,t.y=e.hitbox.y-t.h,t.distance++)}),r(Kt.getOnscreenSpikes(),function(e){t.vulnerable&&e.collidesWith(t)&&t.ouch()}),r(Kt.getOnscreenBombs(),function(e){t.vulnerable&&e.collidesWith(t)&&t.ouch()}),r(Kt.getOnscreenArrows(),function(e){t.vulnerable&&e.collidesWith(t)&&t.ouch()}))}}),ee=window.p=new te({w:64,h:92}),ie=e("canvas.bg")[0],ne=ie.getContext("2d");ne.globalAlpha=.055,ne.translate(0,-120),ne.drawImage(jt.middle,0,0,32,32,0,0,800,1200),ne.drawImage(jt.middle,0,0,32,32,800,0,800,1200);var re=0,se=0;rt.on("render",function(){ne.clearRect(0,0,800,1200),ne.save(),ne.translate(re-=3,0),ne.drawImage(jt.middle,0,0,32,32,0,0,800,1200),ne.drawImage(jt.middle,0,0,32,32,800,0,800,1200),ne.restore(),ne.save(),ne.globalAlpha=.055,ne.translate(se-=10,80),ne.drawImage(jt.middle,0,0,32,32,0,0,800,1200),ne.drawImage(jt.middle,0,0,32,32,800,0,800,1200),ne.restore(),re=re<=-800?0:re,se=se<=-800?0:se});var he=St({name:"heart",w:16,h:16}),oe=e(".hud")[0],ae=oe.getContext("2d"),ce=oe.width,ue=oe.height,fe=[],le=0,de=!0,me={shadowColor:"#000",shadowBlur:15},we={shadowColor:"#000",shadowBlur:1};ee.on("update",function(t){var e=Math.max(t,0);le+=.01*e}),ee.once("move",function(){setTimeout(function(){de=!1},3e3)}),ae.imageSmoothingEnabled=!1,ae.mozImageSmoothingEnabled=!1;var pe=a(function(t){return t<=0?fe:[he].concat(pe(--t))});rt.on("render",V);var ge=e("canvas.camera")[0],ye=e("canvas.bg")[0],ve=e("canvas.hud")[0],xe=e(".stage")[0];X(),window.addEventListener("resize",o(X,300)),window.addEventListener("orientationchange",o(X,300)),rt.start()}();</script></body></html>