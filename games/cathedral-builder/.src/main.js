const mge={bj:{},bv:{},ck:{},dg:{},dt:{},hc:{}};mge.hg={get hd(){return mge.bj.ai.currentTime},get he(){return mge.bj.aq},set he(_value){mge.bj.be(_value)},hf:function(al,an,ad,ae,aq){mge.bj.ak(al,mge.bj.aj,an,ad,ae,aq)}};mge.hi={get bpm(){return mge.hc.fo},set bpm(_value){mge.hc.fo=_value},hh:function(fu,fv,aq){return mge.hc.ahTrack(fu,fv,aq)},start:function(){mge.hc.cg()},stop:function(){mge.hc.dd()},reset:function(){mge.hc.ah()}};mge.game={get width(){return mge.bv.bo.width},set width(_value){mge.bv.bo.width=_value},get height(){return mge.bv.bo.height},set height(_value){mge.bv.bo.height=_value},get fps(){return mge.dg.da},get hj(){return mge.ck.cj()},start:function(cf){mge.ck.cg(cf)},hk:function(cf){mge.ck.ce(cf)},hl:function(){return mge.ck.ahSprite()}};mge.hq={get hp(){return mge.dt.dj},get x(){return mge.dt._x},get y(){return mge.dt._y}};mge.fl={set hr(_value){this.dw=_value},get width(){return this.bl},set width(_value){this.bl=_value},get height(){return this.bm},set height(_value){this.bm=_value},get x(){return this._x},set x(_value){this._x=_value},get y(){return this._y},set y(_value){this._y=_value},get hs(){return this.bs},set hs(_value){this.bs=_value},get ht(){return this.bt},set ht(_value){this.bt=_value},get hu(){return this.eb},set hu(_value){this.eb=_value},get hv(){return this.ec},set hv(_value){this.ec=_value},get hw(){return this.eo(mge.dt._x,mge.dt._y)},get hp(){return this.dj(mge.dt._x,mge.dt._y,mge.dt.dj)},draw:function(){this.ed()},hy:function(){return this.ex()},ia:function(){this.fc()},hz:function(){this.fa()},ib:function(_method){return this.fe(_method)}};mge.bj.aa=function(ab,ac,ad,ae){let a=ab.a||0.0001;let d=ab.d||0.0001;let s=ab.s||0.0001;let r=ab.r||0.0001;let af=ab.minValue||0.0001;let ag=ab.maxValue||1;if(ae<=a){ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag*ae/a,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}else if(ae<=a+d){ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag,ad+a);ac.exponentialRampToValueAtTime(ag*s*d/ae,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}else{ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag,ad+a);ac.exponentialRampToValueAtTime(ag*s,ad+a+d);ac.setValueAtTime(ag*s,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}};mge.bj.ah=function(){this.ai='';this.aj='';this.aq=1;this.ai=new(window.AudioContext||window.webkitAudioContext)();this.aj=this.ai.createGain();this.aj.connect(this.ai.destination)};mge.bj.ak=function(al,am,an,ad,ae,aq){let aa=this.aa;let as=this.ai;let at=al.oscType||'sine';let au=al.filterType||'lowpass';let aqADSR=al.heADSR||{a:0,d:0,s:1,r:0,minValue:1,maxValue:1};let aw=al.pitchADSR||{a:0,d:0,s:1,r:0,minValue:an,maxValue:an};let ax=al.detuneADSR||{a:0,d:0,s:1,r:0,minValue:0,maxValue:0};let ay=al.filterFreqADSR||{a:0,d:0,s:1,r:0,minValue:20000,maxValue:20000};let az=al.filterQADSR||{a:0,d:0,s:1,r:0,minValue:1,maxValue:1};let bd='';if(at=='noise'){bd=as.createBufferSource();let buffer=as.createBuffer(1,as.sampleRate*(ae+aqADSR.r),as.sampleRate);let noiseOutput=buffer.getChannelData(0);for(let i=0;i<buffer.length;i++){noiseOutput[i]=Math.random()*2-1};osc.buffer=buffer;}else{bd=as.createOscillator();bd.mg=at;aa(aw,bd.frequency,ad,ae);aa(ax,bd.detune,ad,ae)};bd.start(ad);bd.stop(ad+ae+aqADSR.r);let ba=as.createGain();aa(aqADSR,ba.gain,ad,ae);let bb=as.createGain();bb.gain.setValueAtTime(mge.bj.aqToGain(aq)*0.04,ad);let bc=as.createBiquadFilter();bc.mg=au;aa(ay,bc.frequency,ad,ae);aa(az,bc.Q,ad,ae);bd.connect(bc);bc.connect(ba);ba.connect(bb);bb.connect(am)};mge.bj.be=function(aq){if(aq<=0){mge.bj.aq=0}else if(aq>=1){mge.bj.aq=1}else{mge.bj.aq=aq};mge.bj.aj.gain.setValueAtTime(mge.bj.aqToGain(mge.bj.aq),mge.hg.hd)};mge.bj.aqToGain=function(aq){let bi=30;if(aq<=0){return 0;}else if(aq>=1){return 1;}else{return Math.pow(10,(aq-1)*bi/10)}};mge.bv.ah=function(bl,bm,bn){this.bo='';this.bp='';this.bo=document.getElementById(bn);if(this.bo){this.bo.remove()};this.bo=document.createElement('canvas');this.bo.id=bn;this.bo.width=bl;this.bo.height=bm;document.body.appendChild(this.bo);this.bp=this.bo.getContext('2d')};mge.bv.bq=function(){let br=this.bo;let bs=(window.innerWidth-10)/br.width;let bt=(window.innerHeight-10)/br.height;let bu=Math.min(bs,bt);br.style.transformOrigin='0 0';br.style.transform='scale('+bu+')';br.display='block'};mge.ck.ah=function(bl,bm){this.bz='';this.ca='';this.cb=[];let bv=mge.bv;let bj=mge.bj;let dg=mge.dg;let dt=mge.dt;let cqboard=mge.cqboard;let hc=mge.hc;bv.ah(bl,bm,'GAME_RENDER_CANVAS');dt.ah(bv.bo);bj.ah();hc.ah();dg.ah()};mge.ck.ahSprite=function(){let fl=mge.fl;let bv=mge.bv;let ck=mge.ck;let bp=bv.bp;let _newSprite=Object.create(fl);_newSprite.ah(bp);ck.cb.push(_newSprite);return _newSprite};mge.ck.cj=function(){let ci=0;this.cb.forEach(fl=>{ci+=fl.ez.length;});return ci};mge.ck.ce=function(cf){if(!cf.start){cf.start=function(){}};if(!cf.upnx){cf.upnx=function(){}};if(!cf.draw){cf.draw=function(){}};this.ca=cf};mge.ck.cg=function(cf){let dg=mge.dg;this.ce(cf);dg.cg()};mge.dg.ah=function(){this.cx=0;this.cy=0;this.cz=0;this.da=0;this.db='stopped'};mge.dg.cg=function(){this.db='running';this.de()};mge.dg.dd=function(){this.db='stopped';this.de()};mge.dg.de=function(){let bv=mge.bv;let ck=mge.ck;let dt=mge.dt;let hc=mge.hc;let bp=bv.bp;let bo=bv.bo;let dg=mge.dg;let cb=ck.cb;dg.cy=performance.now();dg.cz=dg.cy-dg.cx;dg.da=1/(dg.cz/1000);dt.cu();if(ck.bz !=ck.ca){ck.bz=ck.ca;dt.ct();ck.bz.start()};ck.bz.upnx();cb.forEach(fl=>{fl.ev();});bp.clearRect(0,0,bo.width,bo.height);ck.bz.draw();bv.bq();hc.gq();dg.cx=dg.cy;if(dg.db=='running'){requestAnimationFrame(dg.de)}};mge.dt.dn=function(e){this.dm=true;this.dk=e.offsetX;this.dl=e.offsetY};mge.dt.dp=function(e){this.dk=e.offsetX;this.dl=e.offsetY};mge.dt.dq=function(e){this.dk='';this.dl=''};mge.dt.ct=function(){this._x=0;this._y=0;this.dj=false;this.dk=0;this.dl=0;this.dm=false};mge.dt.cu=function(){this._x=this.dk;this._y=this.dl;this.dj=this.dm;this.dm=false};mge.dt.ah=function(br){this._x=0;this._y=0;this.dj=false;this.dk=0;this.dl=0;this.dm=false;br.onclick=function(e){mge.dt.dn(e)};br.onhqmove=function(e){mge.dt.dp(e)};br.onhqout=function(e){mge.dt.dq(e)}};mge.fl.ah=function(dv){this.dv=dv;this.dw=function(){};this.bl=100;this.bm=100;this._x=0;this._y=0;this.bs=1;this.bt=1;this.eb=true;this.ec=false;this.ez=[];this.ey=false};mge.fl.ed=function(){if(this.eb){let dv=this.dv;dv.save();dv.translate(this._x-this.bl*this.bs/2,this._y-this.bm*this.bt/2);dv.scale(this.bs,this.bt);this.dw(dv);if(this.ec){dv.strokeStyle='red';dv.strokeRect(0,0,this.bl,this.bm);dv.strokeRect(this.bl/2,this.bm/2,1,1)};dv.restore()}};mge.fl.dj=function(el,em,en){if(this.eo(el,em)&& en){return true;}else{return false}};mge.fl.eo=function(el,em){let er=this._x+(this.bl/2)*this.bs;let es=this._x-(this.bl/2)*this.bs;let et=this._y+(this.bm/2)*this.bt;let eu=this._y-(this.bm/2)*this.bt;if(el>=es && el<=er && em>=eu && em<=et){return true;}else{return false}};mge.fl.ev=function(){let ew=[];this.ez.forEach(fk=>{if(fk.ey){ew.push(fk)};});this.ez=ew};mge.fl.ex=function(){let fk=Object.create(this);fk.ey=true;this.ez.push(fk);return fk};mge.fl.fc=function(){this.ey=false};mge.fl.fa=function(){this.ez=[]};mge.fl.fe=function(_method){this.ez.forEach(fk=>{fk[_method]();})};mge.hc.ah=function(){this.fn=[];this.fo=60;this.fp=1;this.fq=0;this.fr=0;this.db='stopped'};mge.hc.ga=function(gb){let gc={C:32.7,Db:34.6,D:36.7,Eb:38.9,E:41.2,F:43.6,Gb:46.2,G:49,Ab:51.9,A:55,Bb:58.3,B:61.7};let gd=parseInt(gb.substr(gb.length-1,gb.length),10);let ge=gb.substr(0,gb.length-1);let an=gc[ge]*Math.pow(2,gd);return Math.round(an)};mge.hc.ahTrack=function(fu,fv,aq){let fy=mge.hc.fy;let fn=mge.hc.fn;let fz=Object.create(fy);fz.fu=fu;fz.fv=fv;fz.aq=aq;fn.push(fz);return fz};mge.hc.gg=function(fy,gi){let fv=fy.fv;let aq=fy.aq;let gl=fy.ha(gi);let gm=this.fq;for(let i=0;i<gl.length;i+=2){let ge=gl[i];let geFrequency=this.ga(ge);let ae=gl[i+1]*60/this.fo;fv.play(geFrequency,gm,ae,aq);gm+=ae}};mge.hc.gq=function(){let gr=mge.bj.ai.currentTime;if(gr>=this.fr && this.db=='started'){for(let i=0;i<this.fn.length;i++){let fy=this.fn[i];this.gg(fy,this.fp)};this.fp+=1;this.fr=this.fq+3*60/this.fo;this.fq+=4*60/this.fo}};mge.hc.cg=function(){this.fp=1;this.fq=mge.bj.ai.currentTime;this.fr=0;this.db='started'};mge.hc.dd=function(){this.db='stopped'};mge.hc.fy={fu:[],fv:{},aq:1,be:function(aq){if(aq<=0){this.aq=0}else if(aq>=1){this.aq=1}else{this.aq=aq}},ha:function(hb){let _nnj=this.fu.length;if(_nnj==0){return ''}else if(hb%_nnj==0){return this.fu[_nnj-1]}else{return this.fu[hb%_nnj-1]}}};mge.ck.ah(640,360);game={nq:{nr:{},ns:{}},nt:{},nu:{cathedral:mge.game.hl(),click:mge.game.hl(),build:mge.game.hl(),nv:mge.game.hl(),nw:mge.game.hl(),nx:mge.game.hl(),play:mge.game.hl(),level:mge.game.hl(),ny:mge.game.hl(),nz:mge.game.hl(),mm:mge.game.hl(),mn:mge.game.hl(),logo:mge.game.hl()},variables:{oa:0,ob:0,oc:0,od:0,oe:1000,of:1000,og:1000,rockProduction:1,stoneProduction:10,goldProduction:1,oh:0,oi:0,oj:0,ok:0,buildSpeed:1,year:1200,month:1,level:1,ol:50,om:1,on:0,unlockTime:0},np:{},utils:{},mfs:{light:'#FFDDCA',ld:'#411F0C',le:'#411F0C77'}};window.addEventListener("load",(event)=>{let loading=document.getElementById("loading");loading.remove();mge.game.width=1280;mge.game.height=720;mge.game.start(game.nq.nr)});game.nt.vp={x:965,y:0};game.nt.jc=function(point){let vp=game.nt.vp;let jd=Math.log10(1+point.z/10);let je=point.x-jd*(point.x-vp.x);let jf=point.y-jd*(point.y-vp.y);return{x:je,y:jf}};game.nt.jg={jh:[{x:100,y:100},{x:200,y:200},{x:100,y:200}],ji:true,lineWidth:2,strokeStyle:'black',fillStyle:'red',draw:function(ctx){ctx.lineWidth=this.lineWidth;ctx.fillStyle=this.fillStyle;ctx.strokeStyle=this.strokeStyle;ctx.beginPath();let startPoint=this.jh[0];ctx.moveTo(startPoint.x,startPoint.y);for(let i=1;i<this.jh.length;i+=1){let point=this.jh[i];ctx.lineTo(point.x,point.y)};if(this.ji){ctx.lineTo(startPoint.x,startPoint.y)};ctx.fill();ctx.stroke()}};game.nt.id={ie:{x:100,y:100,z:0},size:{x:100,y:100,z:1},ig:{lineWidth:1,strokeStyle:'black',fillStyle:'grey'},ih:{lineWidth:1,strokeStyle:'black',fillStyle:'grey'},ii:{lineWidth:1,strokeStyle:'black',fillStyle:'grey'},ij:{lineWidth:1,strokeStyle:'black',fillStyle:'grey'},ik:{lineWidth:1,strokeStyle:'black',fillStyle:'grey'},draw:function(ctx){let ie=this.ie;let size=this.size;let ig=this.ig;let ih=this.ih;let ii=this.ii;let ij=this.ij;let ik=this.ik;let jc=game.nt.jc;let jg=game.nt.jg;let vp=game.nt.vp;let iu={x:ie.x,y:ie.y-size.y,z:ie.z};let iv={x:ie.x,y:ie.y,z:ie.z};let iw={x:ie.x+size.x,y:ie.y,z:ie.z};let ix={x:ie.x+size.x,y:ie.y-size.y,z:ie.z};let iy={x:ie.x,y:ie.y-size.y,z:ie.z+size.z};let iz={x:ie.x,y:ie.y,z:ie.z+size.z};let ja={x:ie.x+size.x,y:ie.y,z:ie.z+size.z};let jb={x:ie.x+size.x,y:ie.y-size.y,z:ie.z+size.z};let il=jc(iu);let im=jc(iv);let io=jc(iw);let ip=jc(ix);let iq=jc(iy);let ir=jc(iz);let is=jc(ja);let it=jc(jb);jg.jh=[];jg.jh.push(il,im,io,ip);jg.ji=true;jg.lineWidth=ig.lineWidth;jg.strokeStyle=ig.strokeStyle;jg.fillStyle=ig.fillStyle;jg.draw(ctx);if(ie.y-size.y/2>vp.y){jg.jh=[];jg.jh.push(il,ip,it,iq);jg.ji=true;jg.lineWidth=ih.lineWidth;jg.strokeStyle=ih.strokeStyle;jg.fillStyle=ih.fillStyle;jg.draw(ctx)};if(ie.y-size.y/2<vp.y){jg.jh=[];jg.jh.push(im,ir,is,io);jg.ji=true;jg.lineWidth=ii.lineWidth;jg.strokeStyle=ii.strokeStyle;jg.fillStyle=ii.fillStyle;jg.draw(ctx)};if(ie.x+size.x/2>vp.x){jg.jh=[];jg.jh.push(im,ir,iq,il);jg.ji=true;jg.lineWidth=ij.lineWidth;jg.strokeStyle=ij.strokeStyle;jg.fillStyle=ij.fillStyle;jg.draw(ctx)};if(ie.x+size.x/2<vp.x){jg.jh=[];jg.jh.push(ip,io,is,it);jg.ji=true;jg.lineWidth=ik.lineWidth;jg.strokeStyle=ik.strokeStyle;jg.fillStyle=ik.fillStyle;jg.draw(ctx)}}};game.nu.cathedral.ky=function(ctx,stone){let id= game.nt.id;let la=this.height;let jk=this.jk;id.ig={lineWidth:1,strokeStyle:'#876552',fillStyle:'#FFDDCA'};id.ih={lineWidth:1,strokeStyle:'#876552',fillStyle:'#FFDDCA'};id.ii={lineWidth:1,strokeStyle:'#411F0C',fillStyle:'#876552'};id.ij={lineWidth:1,strokeStyle:'876552',fillStyle:'#FFDDCA'};id.ik={lineWidth:1,strokeStyle:'#411F0C',fillStyle:'#876552'};id.size={x:jk.x,y:jk.y,z:jk.z};let lc={x:stone.x*id.size.x,y:la-stone.y*id.size.y,z:stone.z*id.size.z};id.ie=lc;id.draw(ctx)};game.nu.cathedral.ka=function(id){let kb= document.createElement('canvas');kb.id=id;kb.width=this.width;kb.height=this.height;kb.style.display='none';document.body.appendChild(kb);if(id=='kc'){this.kc.ctx=kb.getContext('2d');this.kc.htmlRef=kb};if(id=='kd'){this.kd.ctx=kb.getContext('2d');this.kd.htmlRef=kb};if(id=='ke'){this.ke.ctx=kb.getContext('2d');this.ke.htmlRef=kb};if(id=='kf'){this.kf.ctx=kb.getContext('2d');this.kf.htmlRef=kb}};game.nu.cathedral.kn=function(kh,ki,height){let r=[];let y=height;r.push([kh,ki,0,0]);r.push([kh,kh,1,height]);for(let x=kh+1;x<ki;x+=1){if(x<=ki-(ki-kh)/2){y+=1;}else{y-=1};r.push([x,x,y,y])};r.push([ki,ki,1,height]);return r};game.nu.cathedral.kj=function(x){return[[x,x,0,0],[x,x,18,23],[x,x,39,46],[x,x,59,60]]};game.nu.cathedral.kk=function(x){return[[x,x,0,0],[x,x,18,18],[x,x,23,23],[x,x,39,39],[x,x,46,46],[x,x,59,60]]};game.nu.cathedral.kjMiddle=function(x){return[[x,x,0,0],[x,x,18,23],[x,x,39,46]]};game.nu.cathedral.kkMiddle=function(x){return[[x,x,0,0],[x,x,18,18],[x,x,23,23],[x,x,39,39],[x,x,46,46]]};game.nu.cathedral.kg=function(){let kn=game.nu.cathedral.kn;let ko=game.nu.cathedral.kj;let kp=game.nu.cathedral.kk;let koM=game.nu.cathedral.kjMiddle;let kpM=game.nu.cathedral.kkMiddle;let ks=[[20,40,0,0],[20,22,1,13],[21,22,14,14],[22,22,15,19],[23,23,20,20],[24,24,21,21],[25,25,22,22],[26,26,23,23],[27,27,24,24],[28,28,25,25],[29,31,25,33],[32,32,25,25],[33,33,24,24],[34,34,23,23],[35,35,22,22],[36,36,21,21],[37,37,20,20],[38,38,1,19],[39,39,1,15],[40,40,1,14]];let kt=[[11,49,0,0],[11,12,1,13],[12,12,14,14],[13,14,1,19],[11,15,20,20],[12,15,21,21],[13,15,22,22],[14,16,23,23],[15,16,24,33],[16,16,24,34],[17,17,25,26],[17,17,34,35],[18,18,26,27],[18,18,35,36],[19,19,25,28],[19,19,36,37],[20,20,23,29],[20,20,37,38],[21,21,20,30],[21,21,38,39],[22,22,1,42],[21,21,43,43],[22,22,43,44],[23,23,1,45],[24,24,38,46],[25,25,42,47],[26,26,45,48],[27,27,47,49],[28,28,49,50],[29,29,50,51],[30,30,51,52],[31,31,50,51],[32,32,49,50],[33,33,47,49],[34,34,45,48],[35,35,42,47],[36,36,38,46],[37,37,1,45],[38,38,1,44],[39,39,20,30],[39,39,38,39],[39,39,43,43],[40,40,23,29],[40,40,37,38],[41,41,25,28],[41,41,36,37],[42,42,26,27],[42,42,35,36],[43,43,25,26],[43,43,34,35],[44,44,23,34],[45,45,20,33],[46,46,1,23],[47,47,1,22],[48,48,1,14],[48,48,20,21],[49,49,1,13],[49,49,20,20]];let kv=[[13,47,0,0],[11,11,20,20],[12,12,20,21],[13,13,1,22],[14,14,22,23],[15,15,23,24],[16,16,24,25],[17,17,25,26],[18,18,26,27],[19,19,27,28],[20,20,28,29],[21,21,29,30],[21,21,43,43],[22,22,30,44],[23,23,44,45],[24,24,45,46],[25,25,46,47],[26,26,47,48],[27,27,48,49],[28,28,49,50],[29,29,50,51],[30,30,51,52],[31,31,50,51],[32,32,49,50],[33,33,48,49],[34,34,47,48],[35,35,46,47],[36,36,45,46],[37,37,44,45],[38,38,30,44],[39,39,43,43],[39,39,29,30],[40,40,28,29],[41,41,27,28],[42,42,26,27],[43,43,25,26],[44,44,24,25],[45,45,23,24],[46,46,22,23],[47,47,1,22],[48,48,20,21],[49,49,20,20]];let ku=[[11,11,20,20],[12,12,20,21],[13,47,0,0],[13,13,1,22],[14,14,1,23],[15,15,20,24],[16,16,21,25],[17,17,22,26],[18,18,23,27],[19,19,24,28],[20,20,25,29],[21,21,26,30],[21,21,43,43],[22,22,27,44],[23,23,28,45],[24,24,29,46],[25,25,30,47],[26,26,31,48],[27,27,32,49],[28,28,33,50],[29,29,34,51],[30,30,35,52],[31,31,34,51],[32,32,33,50],[33,33,32,49],[34,34,31,48],[35,35,30,47],[36,36,29,46],[37,37,28,45],[38,38,27,44],[39,39,26,30],[39,39,43,43],[40,40,25,29],[41,41,24,28],[42,42,23,27],[43,43,22,26],[44,44,21,25],[45,45,20,24],[46,46,1,23],[47,47,1,22],[48,48,20,21],[49,49,20,20]];let kw=[[11,49,0,0],[11,12,1,60],[22,23,1,60],[37,38,1,60],[48,49,1,60]];let jl=[ [[26,34,0,6],[26,27,7,19],[27,27,20,20],[28,28,17,21],[29,29,18,22],[30,30,19,23],[31,31,18,22],[32,32,17,21],[33,34,7,19],[33,33,20,20]],kn(25,35,19),kn(24,36,19),kn(23,37,19),kn(22,38,19),kn(22,38,19),kn(22,38,19),kn(22,38,19),ks,ks,kn(21,39,19).concat([[29,31,34,35]]),kn(20,40,19).concat([[29,31,35,36]]),kn(19,41,19).concat([[29,31,36,37]]),kn(18,42,19).concat([[29,31,37,38]]),kn(17,43,19).concat([[29,31,38,39]]),kn(16,44,19).concat([[29,31,39,40]]),kn(15,45,19).concat([[29,31,40,41]]),ku,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,kv,kv,kt,kt,kv,kv,kv,kv,ku,[[11,49,0,0],[11,12,1,60],[13,21,23,60],[22,23,1,60],[24,36,23,46],[37,38,1,60],[39,47,23,60],[48,49,1,60]],kw,kw,kw,kw,[[11,49,0,0],[11,13,1,60],[13,15,1,46],[13,13,47,60],[14,14,55,60],[15,15,56,60],[16,18,7,23],[16,18,31,46],[16,16,55,60],[17,17,47,60],[18,18,55,60],[19,23,1,46],[19,19,56,60],[20,20,55,60],[21,23,1,60],[24,26,1,46],[27,33,7,27],[27,27,28,29],[27,27,33,46],[28,28,28,28],[28,28,34,46],[29,31,35,46],[32,32,28,28],[32,32,34,46],[33,33,28,29],[33,33,33,46],[34,36,1,46],[37,39,1,60,],[40,41,1,46],[40,40,55,60],[41,41,56,60],[42,44,7,23],[42,44,31,46],[42,42,55,60],[43,43,47,60],[44,44,55,60],[45,47,1,46],[45,45,56,60],[46,46,55,60],[47,47,47,60],[48,49,1,60]],[[11,49,0,0],[11,13,1,60],[14,14,5,23],[14,14,28,46],[14,14,55,60],[15,15,8,23],[15,15,31,46],[15,15,56,60],[16,16,10,23],[16,16,33,46],[16,16,55,60],[17,17,11,23],[17,17,34,60],[18,18,10,23],[18,18,33,46],[18,18,55,60],[19,19,8,23],[19,19,31,46],[19,19,56,60],[20,20,5,23],[20,20,28,46],[20,20,55,60],[21,23,1,60],[24,24,1,46],[25,25,5,46],[26,26,8,29],[26,26,33,46],[27,27,11,28],[27,27,34,46],[28,28,13,27],[28,28,35,46],[29,29,14,26],[29,29,36,46],[30,30,15,26],[30,30,36,46],[31,31,14,26],[31,31,36,46],[32,32,13,27],[32,32,35,46],[33,33,11,28],[33,33,34,46],[34,34,8,29],[34,34,33,46],[35,35,5,46],[36,36,1,46],[37,39,1,60],[40,40,5,23],[40,40,28,46],[40,40,55,60],[41,41,8,23],[41,41,31,46],[41,41,56,60],[42,42,10,23],[42,42,33,46],[42,42,55,60],[43,43,11,23],[43,43,34,60],[44,44,10,23],[44,44,33,46],[44,44,55,60],[45,45,8,23],[45,45,31,46],[45,45,56,60],[46,46,5,23],[46,46,28,46],[46,46,55,60],[47,49,1,60]],[[11,12,0,60]].concat(kp(13),ko(14),kp(15),ko(16),kp(17),ko(18),kp(19),ko(20),kp(21),[[22,23,0,60]],kpM(24),koM(25),kpM(26),koM(27),kpM(28),koM(29),kpM(30),koM(31),kpM(32),koM(33),kpM(34),koM(35),kpM(36),[[37,38,0,60]],kp(39),ko(40),kp(41),ko(42),kp(43),ko(44),kp(45),ko(46),kp(47),[[48,49,0,60]])];let z=120;for(let i=0;i<=jl.length-1;i+=1){for(let j=0;j<=jl[i].length-1;j+=1){let wall=jl[i][j];for(let y=wall[2];y<=wall[3];y+=1){for(let x=wall[0];x<=wall[1];x+=1){this.jl.push({x:x,y:y,z:z,mg:wall[4]})}}};z-=1};this.totalStonesToBuild=this.jl.length};game.nu.cathedral.jp=function(stonesNb){let jm=this.jm;let js=this.kc.ctx;let jt=this.kd.ctx;let ju=this.ke.ctx;let jv=this.kf.ctx;let jl=this.jl;let jq=Math.min(stonesNb,jl.length-jm);for(let jr=jm;jr<jm+jq;jr+=1){let stone=this.jl[jr];let joStone0={x:stone.x,y:stone.y,z:stone.z,mg:stone.mg};let joStone50={x:stone.x,y:stone.y,z:stone.z,mg:stone.mg};let joStone90={x:stone.x,y:stone.y,z:stone.z,mg:stone.mg};let joStone110={x:stone.x,y:stone.y,z:stone.z,mg:stone.mg};joStone0.z-=0;joStone50.z-=50;joStone90.z-=90;joStone110.z-=110;this.ky(js,joStone0);this.ky(jt,joStone50);this.ky(ju,joStone90);this.ky(jv,joStone110);this.jn+=1};this.jm+=jq};game.nu.cathedral.hr=function(ctx){let v=game.variables;if(v.od>=16000){ctx.drawImage(this.kc.htmlRef,0,0);}else if(v.od>=5500){ctx.drawImage(this.kd.htmlRef,0,0);}else if(v.od>=800){ctx.drawImage(this.ke.htmlRef,0,0);}else{ctx.drawImage(this.kf.htmlRef,0,0)}};game.nu.cathedral.clear=function(){let w=this.width;let h=this.height;this.jm=0;this.jn=0;this.kc.ctx.clearRect(0,0,w,h);this.kd.ctx.clearRect(0,0,w,h);this.ke.ctx.clearRect(0,0,w,h);this.kf.ctx.clearRect(0,0,w,h)};game.nu.cathedral.jj=function(){this.width=830;this.height=630;this.x=860;this.y=395;this.hs=1;this.ht=1;this.hu=false;this.size={x:60,y:60,z:120};this.jk={x:10,y:10,z:0.25};this.jl=[];this.jm=0;this.jn=0;this.totalStonesToBuild=0;this.kf={ctx:{},htmlRef:{}};this.ke={ctx:{},htmlRef:{}};this.kd={ctx:{},htmlRef:{}};this.kc={ctx:{},htmlRef:{}};this.ka('kf');this.ka('ke');this.ka('kd');this.ka('kc');this.kg()};game.nu.cathedral.upnx=function(ctx){let id=this.id;let v=game.variables;if(v.on>=3){this.hu=true}};game.nu.click.hr=function(ctx){let id=this.id;let ld=game.mfs.ld;let le=game.mfs.le;ctx.fillStyle=ld;ctx.strokeStyle=ld;ctx.lineWidth=4;ctx.font="30px serif";ctx.textAlign="center";ctx.fillText(this.text,this.width/2,this.height/2+10);ctx.strokeRect(0,0,this.width,this.height);if(this.isStarted){ctx.fillStyle=ld;ctx.fillRect(0,this.height*3/4,this.width*this.lx,this.height/4)};ctx.fillStyle=le;if(id=='lr' && game.variables.oa<1){ctx.fillRect(0,0,this.width,this.height)}};game.nu.click.upnx=function(ctx){let id=this.id;let v=game.variables;if(id=='lq' && v.on>=1){this.hu=true};if(id=='lr' && v.on>=2){this.hu=true};if(id=='ls' && v.on>=6){this.hu=true};let lt=false;if(id=='lq' && performance.now()<v.oh){lt=true};if(id=='lr' && performance.now()<v.oi){lt=true};if(id=='ls' && performance.now()<v.oj){lt=true};if(!this.isStarted){this.lx=0;if(id=='lq' &&(this.hp||lt)){this.isStarted=true;this.startTime=performance.now()};if(id=='lr' && game.variables.oa>=1 &&(this.hp||lt)){game.variables.oa-=1;this.isStarted=true;this.startTime=performance.now()};if(id=='ls' &&(this.hp||lt)){this.isStarted=true;this.startTime=performance.now()}};let lu=0;if(id=='lq'){lu=v.oe};if(id=='lr'){lu=v.of};if(id=='ls'){lu=v.og};if(this.isStarted){this.lx=(performance.now()-this.startTime)/lu;if(this.lx>=1){this.lx=1}};if(this.lx==1){this.lx=0;this.isStarted=false;if(id=='lq'){v.oa+=v.rockProduction};if(id=='lr'){v.ob+=v.stoneProduction};if(id=='ls'){v.oc+=v.goldProduction}}};game.nu.click.jj=function(){this.width=170;this.height=90;this.hu=false;this.id="";this.text="";this.startTime=performance.now();this.isStarted=false;this.lx=0;let lq=this.hy();lq.id="lq";lq.text="DIG";lq.x=210;lq.y=245;let lr=this.hy();lr.id="lr";lr.text="CUT";lr.x=210;lr.y=365;let ls=this.hy();ls.id="ls";ls.text="BEG";ls.x=210;ls.y=485};game.nu.build.hr=function(ctx){let ld=game.mfs.ld;let le=game.mfs.le;let v=game.variables;ctx.fillStyle=ld;ctx.strokeStyle=ld;ctx.lineWidth=4;ctx.font="30px serif";ctx.textAlign="center";ctx.strokeRect(0,0,this.width,this.height);if(v.ob>=1){ctx.fillText('BUILD',this.width/2,this.height/2-7);ctx.fillText('CATHEDRAL',this.width/2,this.height/2+27);if(performance.now()<v.ok){ctx.fillStyle=le;ctx.fillRect(0,0,this.width,this.height)};}else{ctx.font="25px serif";ctx.fillText("Need stones",this.width/2,this.height/2-10);ctx.fillText("to build the cathedral",this.width/2,this.height/2+25);ctx.fillStyle=le;ctx.fillRect(0,0,this.width,this.height)}};game.nu.build.upnx=function(ctx){let id=this.id;let v=game.variables;let now=performance.now();let lu=v.buildSpeed;if(v.on>=3){this.hu=true};if(this.hp){v.ok=now+1000};let lt=false;if(now<v.ok){lt=true};if(v.ob>=lu && lt && now>this.lastClick+50){game.nu.cathedral.jp(lu);v.ob-=lu;v.od+=lu;this.lastClick=now;game.nu.mn.create(300,150,1,8,12)}};game.nu.build.jj=function(){this.width=285;this.height=90;this.hu=false;this.x=153;this.y=125;this.lastClick=0};game.nu.nv.hr=function(ctx){let ld=game.mfs.ld;let le=game.mfs.le;ctx.fillStyle=ld;ctx.strokeStyle=ld;ctx.lineWidth=2;ctx.strokeRect(0,0,this.width,this.height);ctx.font="18px serif";ctx.textAlign="center";ctx.fillText(this.text,this.width/2,this.height/2-3);ctx.font="14px serif";ctx.fillText(this.goldNeeded+' gold',this.width/2,this.height/2+15);ctx.fillStyle=le;if(this.disable){ctx.fillRect(0,0,this.width,this.height)}};game.nu.nv.upnx=function(ctx){let id=this.id;let v=game.variables;let now=performance.now();if(id=='lf' && v.on>=6){this.hu=true};if(id=='lg' && v.on>=6){this.hu=true};if(id=='lh' && v.on>=6){this.hu=true};if(id=='li' && v.on>=7){this.hu=true};if(id=='lj' && v.on>=7){this.hu=true};if(id=='lk' && v.on>=7){this.hu=true};if(id=='ll' && v.on>=8){this.hu=true};if(this.goldNeeded>v.oc){this.disable=true;}else{if(id=='li' && now<v.oh){this.disable=true}else if(id=='lj' && now<v.oi){this.disable=true}else if(id=='lk' && now<v.oj){this.disable=true}else if(id=='ll' && now<v.ok){this.disable=true}else{this.disable=false}};if(!this.disable && this.hp){if(id=='lf'){v.oe=v.oe*0.9;v.rockProduction=Math.ceil(v.rockProduction*1.05)};if(id=='lg'){v.of=v.of*0.9;v.stoneProduction=Math.ceil(v.stoneProduction*1.25)};if(id=='lh'){v.og=v.og*0.9;v.goldProduction=Math.ceil(v.goldProduction*1.05)};if(id=='li'){v.oh=now+10000};if(id=='lj'){v.oi=now+10000};if(id=='lk'){v.oj=now+10000};if(id=='ll'){v.ok=now+10000};if(this.hp){v.oc-=this.goldNeeded;if(id=='lj'||id=='lk'||id=='ll'||id=='li'){this.goldNeeded=Math.ceil(this.goldNeeded*1.4);}else{this.goldNeeded=this.goldNeeded*2}}}};game.nu.nv.reset=function(){this.goldNeeded=1};game.nu.nv.jj=function(){this.width=125;this.height=40;this.hu=false;this.id="";this.text="";this.goldNeeded=1;this.disable=false;let lf=this.hy();lf.id="lf";lf.text="UPGRADE";lf.x=368;lf.y=220;let lg=this.hy();lg.id="lg";lg.text="UPGRADE";lg.x=368;lg.y=340;let lh=this.hy();lh.id="lh";lh.text="UPGRADE";lh.x=368;lh.y=460;let li=this.hy();li.id="li";li.text="AUTO CLICK";li.x=368;li.y=270;let lj=this.hy();lj.id="lj";lj.text="AUTO CLICK";lj.x=368;lj.y=390;let lk=this.hy();lk.id="lk";lk.text="AUTO CLICK";lk.x=368;lk.y=510;let ll=this.hy();ll.id="ll";ll.text="AUTO CLICK";ll.height=90;ll.x=368;ll.y=125};game.nu.nw.hr=function(ctx){let id=this.id;let v=game.variables;let light=game.mfs.light;let ld=game.mfs.ld;ctx.fillStyle=ld;ctx.strokeStyle=ld;ctx.lineWidth=4;ctx.fillRect(0,0,this.width,this.height);ctx.strokeRect(0,0,this.width,this.height);ctx.fillStyle=light;ctx.font="25px serif";ctx.textAlign="center";ctx.fillText(this.text,this.width/2,this.height/2-5);ctx.font="20px serif";let text='';if(id=='ly'){text=v.oa};if(id=='lz'){text=v.ob};if(id=='ma'){text=v.oc};ctx.fillText(text,this.width/2,this.height/2+25)};game.nu.nw.upnx=function(ctx){let id=this.id;let v=game.variables;if(id=='ly' && v.on>=1){this.hu=true};if(id=='lz' && v.on>=2){this.hu=true};if(id=='ma' && v.on>=6){this.hu=true}};game.nu.nw.jj=function(){this.width=100;this.height=90;this.hu=false;this.id="";this.text="";let ly=this.hy();ly.id="ly";ly.text="ROCK";ly.x=60;ly.y=245;let lz=this.hy();lz.id="lz";lz.text="STONE";lz.x=60;lz.y=365;let ma=this.hy();ma.id="ma";ma.text="GOLD";ma.x=60;ma.y=485};game.nu.nx.hr=function(ctx){let ld=game.mfs.ld;let v=game.variables;ctx.fillStyle=ld;ctx.font="30px serif";ctx.fillText('Year:'+v.year+'-Month:'+v.month,10,this.height/2+5)};game.nu.nx.upnx=function(ctx){let v=game.variables;if(v.on>=5){this.hu=true};if(performance.now()-this.lv>200){this.lv=performance.now();if(v.month==12){v.month=1;v.year+=1;}else{v.month+=1}}};game.nu.nx.jj=function(){this.width=200;this.height=50;this.hu=false;this.x=110;this.y=30;this.lv=0};game.nu.play.hr=function(ctx){let light=game.mfs.light;let ld=game.mfs.ld;let w=this.width;let h=this.height;ctx.fillStyle=ld;ctx.font="100px serif";ctx.textAlign="center";ctx.fillText('CATHEDRAL',70,-175);ctx.fillText('BUILDER',70,-75);ctx.drawImage(game.nu.cathedral.kc.htmlRef,-610,35);ctx.fillStyle=ld;ctx.fillRect(0,0,w,h);ctx.font="20px serif";ctx.textAlign="center";ctx.fillStyle=light;ctx.fillText('Play',w/2,h/2+5);ctx.fillStyle=ld;ctx.font="24px serif";ctx.textAlign="center";ctx.fillText('A game created for JS13K 2023',70,-30)};game.nu.play.upnx=function(ctx){};game.nu.play.jj=function(){this.width=120;this.height=50;this.x=660;this.y=305;game.nu.cathedral.jp(2382)};game.nu.level.hr=function(ctx){let v=game.variables;let ld=game.mfs.ld;ctx.fillStyle=ld;ctx.font="30px serif";ctx.textAlign="left";ctx.fillText('Level '+v.level,0,this.height/2+5);let lw=300;ctx.strokeStyle=ld;ctx.strokeRect(110,15,lw,15);let lx=v.od/v.ol;ctx.fillRect(110,15,lx*lw,15);ctx.font="20px serif";ctx.fillText(v.od,110+lx*lw,50);ctx.font="20px serif";ctx.fillText(v.ol,120+lw,28)};game.nu.level.upnx=function(ctx){let v=game.variables;let nz=game.nu.nz;let rdm=game.utils.mr;if(v.on>=5){this.hu=true};if(v.od>=v.ol){v.oc+=v.om;if(v.level==1){nz.create('stone',50);}else if(v.level==2){}else if(v.level==3){nz.create('gold',10);}else if(v.level==4){}else{let mg=rdm(['rock','stone','gold','autoclick']);if(mg=='rock'){nz.create('rock',v.rockProduction*5)};if(mg=='stone'){nz.create('stone',v.stoneProduction*5)};if(mg=='gold'){nz.create('gold',v.goldProduction*5)};if(mg=='autoclick'){nz.create('autoclick',10000)}};v.buildSpeed=Math.ceil(v.buildSpeed*1.05);v.level+=1;if(v.level==15){v.ol=34570}else{v.ol=Math.ceil(v.ol*1.5/100)*100;v.om=Math.ceil(v.om*1.1)};game.nu.mn.create(900,100,50,-3,3)}};game.nu.level.jj=function(){this.width=200;this.height=50;this.hu=false;this.x=500;this.y=30};game.nu.ny.hr=function(ctx){let v=game.variables;let ld=game.mfs.ld;ctx.fillStyle=ld;ctx.strokeStyle=ld;ctx.lineWidth=4;ctx.font="25px serif";if(v.on==0){ctx.textAlign="center";ctx.fillText('13th CENTURY',this.width/2,this.height/2);ctx.fillText('GOLDEN AGE OF CATHEDRALS',this.width/2,this.height/2+50);ctx.font="16px serif";ctx.fillText('Click to continue',this.width/2,this.height/2+100)};if(v.on==0.1){ctx.textAlign="center";ctx.fillText('WILL YOU BE ABLE TO BUILD A CATHEDRAL',this.width/2,this.height/2);ctx.fillText('IN LESS THAN 100 YEARS?',this.width/2,this.height/2+50);ctx.font="16px serif";ctx.fillText('Click to continue',this.width/2,this.height/2+100)};if(v.on==1){ctx.textAlign="left";ctx.fillText('FIRST DIG UP ROCK',-130,this.height/2-15)};if(v.on==2){ctx.textAlign="left";ctx.fillText('THEN CUT STONES',-130,this.height/2+105)};if(v.on==3){ctx.textAlign="left";ctx.fillText('GREAT !!! YOU CAN NOW START BUILDNG',-130,this.height/2-135)};if(v.on==5){ctx.textAlign="center";ctx.fillText('PERFECT! WE CAN NOW START THE GAME',this.width/2,this.height/2);ctx.fillText('REMEMBER YOU HAVE 100 YEARS',this.width/2,this.height/2+50);ctx.fillText('TO BUILD YOUR CATHEDRAL',this.width/2,this.height/2+100)}};game.nu.ny.upnx=function(ctx){};game.nu.ny.jj=function(){this.width=300;this.height=200;this.x=mge.game.width/2;this.y=mge.game.height*3/8;this.hu=true};game.nu.nz.hr=function(ctx){let light='#B0A29B';let mk1='#9D8B82';let mk2='#856F63';let mk3='#674B3C';let ld='#411F0C';ctx.fillStyle=light;ctx.fill(this.me);ctx.fillStyle=mk1;ctx.fill(this.center);ctx.fillStyle=mk2;ctx.fill(this.left);ctx.fill(this.down);ctx.fill(this.up);ctx.fillStyle=mk3;ctx.fill(this.md);ctx.fill(this.mb);ctx.fill(this.mc);ctx.fillStyle=ld;ctx.fill(this.right);ctx.fillStyle=ld;ctx.font="12px serif";ctx.textAlign="center";ctx.fillText(this.text,50,28)};game.nu.nz.upnx=function(ctx){let v=game.variables;let nb=this.nb;let now=performance.now();if(this.mj<now+100){this.mj=now;this.x+=this.mh;this.y+=this.mi;if(this.x>1200||this.x<400){this.mh=this.mh*-1};if(this.y>650||this.y<100){this.mi=this.mi*-1}};if(this.hp){this.ia();if(this.mg=='rock'){v.oa+=nb};if(this.mg=='stone'){v.ob+=nb};if(this.mg=='gold'){v.oc+=nb};if(this.mg=='build'){game.nu.cathedral.jp(this.nb)};if(this.mg=='autoclick'){let ml=now+this.nb;v.oh=ml;v.oi=ml;v.oj=ml;v.ok=ml}}};game.nu.nz.jj=function(){this.width=100;this.height=50;this.hu=true;this.x=500;this.y=250;this.up=new Path2D('M10 0 L90 0 L85 10 L15 10 L10 0');this.mb=new Path2D('M85 10 L90 0 L100 10 L90 15 L85 10');this.right=new Path2D('M100 10 L100 40 L90 35 L90 15 L100 10');this.mc=new Path2D('M85 40 L90 35 L100 40 L90 50 L85 40');this.down=new Path2D('M90 50 L10 50 L15 40 L85 40 L90 50');this.md=new Path2D('M0 40 L10 35 L15 40 L10 50 L0 40');this.left=new Path2D('M0 10 L10 15 L10 35 L0 40 L0 10');this.me=new Path2D('M0 10 L10 0 L15 10 L10 15 L0 10');this.center=new Path2D('M15 10 L85 10 L90 15 L90 35 L85 40 L15 40 L10 35 L10 15 L15 10');this.mf='red';this.mg='rock';this.nb=10;this.text='nz';this.mh=3;this.mi=1;this.mj=0};game.nu.nz.create=function(mg,nb){let u=game.utils;let nz=this.hy();nz.mh=u.ms(-3,3);if(nz.mh==0){nz.mh=1};nz.mi=u.ms(-3,3);if(nz.mi==0){nz.mi=1};nz.x=u.mq(600,1000);nz.y=200;nz.mg=mg;nz.nb=nb;nz.text=mg.toUpperCase()};game.nu.mm.hr=function(ctx){let v=game.variables;let light=game.mfs.light;let ld=game.mfs.ld;ctx.fillStyle=ld;ctx.strokeStyle=ld;ctx.lineWidth=4;ctx.fillRect(0,0,this.width,this.height);ctx.strokeRect(0,0,this.width,this.height);ctx.fillStyle=light;ctx.font="40px serif";ctx.textAlign="center";if(v.year>=1300){ctx.fillText('GAME OVER',this.width/2,this.height/2-70);ctx.font="25px serif";ctx.fillText('You were not able to build the cathedral',this.width/2,this.height/2-5);ctx.fillText('in less than 100 years!',this.width/2,this.height/2+35);}else{ctx.fillText('CONGRATULATIONS!',this.width/2,this.height/2-70);ctx.font="25px serif";ctx.fillText('You were able to build the catheral',this.width/2,this.height/2-5);ctx.fillText('in less than 100 years!',this.width/2,this.height/2+35)};ctx.fillText('TRY AGAIN',this.width/2,this.height/2+105);ctx.strokeStyle=light;ctx.strokeRect(135,220,220,50)};game.nu.mm.upnx=function(ctx){let v=game.variables;let s=game.nu;if(v.year>=1300||v.od>=game.nu.cathedral.totalStonesToBuild){this.hu=true;if(this.hp){v.oa=0;v.ob=0;v.oc=0;v.od=0;v.oe=1000;v.of=1000;v.og=1000;v.rockProduction=1;v.stoneProduction=10;v.goldProduction=1;v.oh=0;v.oi=0;v.oj=0;v.ok=0;v.buildSpeed=1;v.year=1200;v.month=1;v.level=1;v.ol=50;s.cathedral.clear();s.nv.ib('reset');this.hu=false};}else{this.hu=false}};game.nu.mm.jj=function(){this.width=500;this.height=300;this.hu=false;this.x=640;this.y=360};game.nu.mn.hr=function(ctx){let r=this.r;let g=this.g;let b=this.b;let a=this.a;let rgba='rgba('.concat(r,',',g,',',b,',',a,')');ctx.fillStyle=rgba;ctx.fillRect(0,0,this.width,this.height)};game.nu.mn.upnx=function(ctx){this.vY+=0.5;this.x+=this.vX;this.y+=this.vY;this.a-=0.02;if(this.a<=0){this.ia()}};game.nu.mn.create=function(x,y,nb,vXmin,vXmax){rdmn=game.utils.ms;rdmi=game.utils.mq;for(let i=0;i<nb;i++){let p=this.hy();let size=rdmi(10,20);p.r=rdmi(55,75);p.g=rdmi(20,40);p.b=rdmi(0,20);p.x=x;p.y=y;p.vX=rdmn(vXmin,vXmax);p.vY=rdmn(-10,0);p.width=size;p.height=size;p.hu=true;p.drawBundaries=true}};game.nu.mn.jj=function(x,y){this.hu=false;this.vX=0;this.vY=0;this.r=65;this.g=31;this.b=12;this.a=1};game.nu.logo.upnx=function(ctx){};game.nu.logo.hr=function(ctx){let v=game.variables;let ld=game.mfs.ld;let light=game.mfs.light;ctx.fillStyle=light;ctx.strokeStyle=ld;ctx.lineWidth=4;ctx.beginPath();ctx.arc(200,200,200,0,2*Math.PI);ctx.fill();ctx.stroke();ctx.strokeStyle=ld;ctx.fillStyle='#a500e1';ctx.lineWidth=6;ctx.stroke(this.mo);ctx.lineWidth=9;ctx.fill(this.mp);ctx.stroke(this.mp);ctx.stroke(this.D);ctx.stroke(this.l1);ctx.stroke(this.p);ctx.stroke(this.u);ctx.stroke(this.iDown);ctx.strokeStyle='#a500e1';ctx.stroke(this.iUp);ctx.stroke(this.l2);ctx.stroke(this.e)};game.nu.logo.jj=function(){this.width=400;this.height=400;this.x=660;this.y=650;this.hs=0.15;this.ht=0.15;this.mo=new Path2D("m 205.10691,165.3075 c 0,0-0.35863,85.0167 0.70259,110.34558");this.mp=new Path2D("m 205.10691,165.3075 c 0,0-21.76814,-17.35005-34.70011,-17.35005-12.93197,0-34.70011,17.35005-34.70011,17.35005 0,0-21.76815,-17.35005-34.70012,-17.35005-12.931969,0-34.700107,17.35005-34.700107,17.35005 0,0 11.114434,-48.94448 34.700107,-69.400229 23.58568,-20.455752 67.04061,-36.054153 104.10034,-34.700121 37.05974,1.354039 81.27067,23.221529 104.10033,43.37514 22.82966,20.15363 34.70013,60.72521 34.70013,60.72521 0,0-21.76815,-17.35005-34.70012,-17.35005-12.93197,0-34.70011,17.35005-34.70011,17.35005 0,0-21.76814,-17.35005-34.70011,-17.35005-12.93197,0-34.70012,17.35005-34.70012,17.35005 z");this.D=new Path2D("m 62.317745,265.53698 v-72.77286 c 0,0 20.255119,0.0492 28.619153,6.32809 8.364034,6.27866 14.776452,20.46694 14.718422,30.37475-0.0584,9.90781-6.406585,23.55881-14.718422,29.74195-8.31183,6.18313-28.619153,6.32807-28.619153,6.32807 z");this.iDown=new Path2D("m 120.0927,270.84804 c 0,0-2.81801,19.23816 0,28.47634 0.70013,2.29525 1.78631,4.78289 4.08844,6.32807 3.25571,2.18522 12.26535,3.16404 12.26535,3.16404");this.l1=new Path2D("m 153.19642,212.86772 c 0,0-2.818,41.38641 0,50.62459 0.70013,2.29525 1.78632,4.7829 4.08845,6.32808 3.2557,2.18522 12.26535,3.16404 12.26535,3.16404");this.l2=new Path2D("m 243.82091,247.70377 c 0,0-2.818,41.38641 0,50.62459 0.70014,2.29525 1.78632,4.78289 4.08844,6.32807 3.25571,2.18523 12.26536,3.16404 12.26536,3.16404");this.p=new Path2D("m 186.16226,353.41499 v-63.28076 h 16.35381 c 0,0 9.21799,0.80571 12.26534,3.16404 3.04735,2.35833 4.08845,9.49211 4.08845,9.49211 v 15.82019 c 0,0-1.78632,4.78289-4.08845,6.32807-3.25571,2.18522-12.26534,3.16404-12.26534,3.16404 h-16.35381");this.e=new Path2D("m 295.14667,248.6777 c 0,0-11.18223,1.33408-16.35371,0-6.4644,-1.66759-12.48876,-4.77544-15.53611,-9.49212-3.65682,-5.65999-3.12917,-13.13784 0,-18.98422 2.21265,-4.13401 6.31848,-7.13437 11.44765,-8.8593 3.74971,-1.26102 8.48807,-1.21082 12.26529,0 5.34178,1.71236 10.05264,4.72529 12.26529,8.8593 2.08609,3.89759 0,12.02334 0,12.02334 h-36.79592");this.u=new Path2D("m 312.85192,250.64495 v 27.84353 c 0,0 1.04109,7.13378 4.08841,9.49211 3.04735,2.35833 7.95572,3.16405 12.26532,3.16404 4.30962,0 9.21798,-0.80571 12.26532,-3.16404 3.04736,-2.35833 3.39814,-6.19998 4.08846,-9.49211 1.7464,-8.32848 0,-27.84353 0,-27.84353");this.iUp=new Path2D("m 120.0927,260.58547 c-1.92732,0-4.08846,-1.6725-4.08846,-3.16404 0,-1.49154 2.16114,-3.16405 4.08846,-3.16405 1.92731,0 4.08844,1.67251 4.08844,3.16405 0,1.49154-2.16113,3.16404-4.08844,3.16404 z")};game.np.no={play:function(an,ad,ae,aq){let al={heADSR:{a:0.02,d:0.5,s:0.2,r:0.15,minValue:0,maxValue:aq},oscType:'triangle',};mge.hg.hf(al,an,ad,ae,aq)}};game.np.createMusic=function(){let mt=['r',4];let a1Am=['A2',0.5,'C3',0.5,'E3',0.5,'E3',1.5,'C3',1];let a1Bdim=['B2',0.5,'D3',0.5,'F3',0.5,'F3',1.5,'B2',1];let a1Dm=['D3',0.5,'F3',0.5,'A3',0.5,'F3',1.5,'F2',1];let a1E7=['E2',0.5,'Ab2',0.5,'B2',0.5,'B2',1.5,'E3',1];let a1F=['F2',0.5,'A2',0.5,'C3',0.5,'C3',1.5,'F3',1];let mu=[];mu.push(a1Am,a1Bdim,a1Am,a1Bdim);let mv=[];mv.push(a1Am,a1Bdim,a1Am,a1Bdim,a1E7,a1F,a1E7,a1Am);let mw=[];mv.push(a1Am,a1Dm,a1Am,a1Dm,a1Am,a1E7,['A2',0.5,'C3',0.5,'E3',0.5,'A3',0.5,'C4',1,'A3',1]);game.np.mx=[].concat(mu,mv,mw);let a2Am=['r',1.5,'A3',1.5];let a2Bdim=['r',1.5,'B3',1.5];let a2Dm=['r',1.5,'A3',1.5];let a2E7=['r',1.5,'E3',1.5];let a2F=['r',1.5,'F3',1.5];let my=[];my.push(a2Am,a2Bdim,a2Am,a2Bdim);let mz=[];mz.push(a2Am,a2Bdim,a2Am,a2Bdim,a2E7,a2F,a2E7,a2Am);let na=[];mz.push(a2Am,a2Dm,a2Am,a2Dm,a2Am,a2E7,mt);game.np.nb=[].concat(my,mz,na);let a3Am=['r',1.5,'C4',1.5];let a3Bdim=['r',1.5,'D4',1.5];let a3Dm=['r',1.5,'D4',1.5];let a3E7=['r',1.5,'Ab3',1.5];let a3F=['r',1.5,'A3',1.5];let nc=[];nc.push(a3Am,a3Bdim,a3Am,a3Bdim);let nd=[];nd.push(a3Am,a3Bdim,a3Am,a3Bdim,a3E7,a3F,a3E7,a3Am);let ne=[];nd.push(a3Am,a3Dm,a3Am,a3Dm,a3Am,a3E7,mt);game.np.nf=[].concat(nc,nd,ne);let bAm=['A1',1.5,'A1',1.5,'A1',1];let bDm=['F2',1.5,'F2',1.5,'F2',1];let bE7=['E2',1.5,'E2',1.5,'E2',1];let ng=[];ng.push(mt,mt,mt,mt);let nh=[];nh.push(mt,mt,mt,mt,mt,mt,mt,mt);let ni=[];nh.push(bAm,bDm,bAm,bDm,bAm,bE7,['A1',4]);game.np.nj=[].concat(ng,nh,ni);let nk=[mt,mt,mt,['r',2.5,'E4',0.5,'A4',0.5,'Ab4',0.5]];let nl=[['B4',1.5,'C5',1,'E4',0.5,'C5',0.5,'B4',0.5],['Ab4',1.5,'A4',1,'C5',0.5,'B4',0.5,'Ab4',0.5],['E4',4],['r',2.5,'E4',0.5,'A4',0.5,'Ab4',0.5],['C5',1.5,'B4',1.5,'Gb4',1],['A4',3,'B4',0.5,'A4',0.5],['Ab4',4],['r',2.5,'E4',0.5,'A4',0.5,'B4',0.5]];let nm=[['B4',1.5,'C5',1.5,'A4',1],['D5',3,'B4',0.75,'A4',0.25],['C5',3,'D5',0.5,'C5',0.5],['B4',2.5,'E4',0.5,'A4',0.5,'B4',0.5],['B4',1.5,'C5',1.5,'B4',0.5,'A4',0.5],['Ab4',1.5,'A4',0.25,'Ab4',0.25,'Gb4',1,'Ab4',1],['A4',4]];game.np.nn=[].concat(nk,nl,nm)};game.np.play=function(){let mx=game.np.mx;let nb=game.np.nb;let nf=game.np.nf;let nj=game.np.nj;let nn=game.np.nn;let no=game.np.no;mge.hi.stop();mge.hi.reset();mge.hi.hh(mx,no,0.85);mge.hi.hh(nb,no,0.85);mge.hi.hh(nf,no,0.85);mge.hi.hh(nj,no,0.9);mge.hi.hh(nn,no,0.8);mge.hi.bpm=110;mge.hi.start()};game.utils.mr=function(array){return array[Math.floor(Math.random()*array.length)]};game.utils.ms=function(min,max){return Math.random()*(max-min)+min};game.utils.mq=function(min,max){return Math.floor(Math.random()*(max-min)+min)};game.nq.nr.draw=function(){game.nu.play.draw();game.nu.logo.draw()};game.nq.nr.start=function(){let s=game.nu;s.cathedral.jj();s.click.jj();s.build.jj();s.nv.jj();s.nw.jj();s.nx.jj();s.play.jj();s.level.jj();s.ny.jj();s.nz.jj();s.mm.jj();s.mn.jj();s.logo.jj();game.np.createMusic()};game.nq.nr.upnx=function(){let s=game.nu;if(s.play.hp){s.cathedral.clear();game.np.play();mge.game.hk(game.nq.ns)}};game.nq.ns.draw=function(){game.nu.cathedral.draw();game.nu.click.ib('draw');game.nu.nv.ib('draw');game.nu.nw.ib('draw');game.nu.nz.ib('draw');game.nu.mn.ib('draw');game.nu.nx.draw();game.nu.build.draw();game.nu.level.draw();game.nu.ny.draw();game.nu.mm.draw()};game.nq.ns.start=function(){};game.nq.ns.on=function(){let v=game.variables;let hp=mge.hq.hp;let now=performance.now();if(v.on==0){if(hp){v.on=0.1};}else if(v.on==0.1){if(hp){v.on=1};}else if(v.on==1){if(v.oa>=1){v.on=2};}else if(v.on==2){if(v.ob>=1){v.on=3};}else if(v.on==3){if(v.od>=1){v.on=4};}else if(v.on==4){if(v.od>=20){v.on=5;v.year=1200;v.month=1;v.unlockTime=now};}else if(v.on==5){if(now-v.unlockTime>5000){v.on=5.1}};if(v.on==5.1){if(v.od>=100){v.on=6};}else if(v.on==6){if(v.od>=300){v.on=7}};if(v.on==7){if(v.od>=500){v.on=8}}};game.nq.ns.upnx=function(){let s=game.nu;let v=game.variables;if(v.year>=1300||v.od>=game.nu.cathedral.totalStonesToBuild){s.mm.upnx();}else{this.on();s.click.ib('upnx');s.nv.ib('upnx');s.nw.ib('upnx');s.nz.ib('upnx');s.mn.ib('upnx');s.cathedral.upnx();s.nx.upnx();s.build.upnx();s.level.upnx();s.ny.upnx()}}