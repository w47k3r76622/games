<!DOCTYPE html><html><head><meta charset="utf-8"><title>Lost in CYBERSPACE</title><script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script><script>!function(e,t,n){function r(e,t){let n=[],r=0;for(let t=0;t<8;t++){let o=(t*e+r)%8;void 0!==n[o]&&(o=(t*e+ ++r)%8),n[o]=t}return t&&(n=n.concat(n.splice(0,t))),n}function o(e,t){return{rowWalls:e.map(function(e,n){return[e,7-t[n]]}),colWalls:t.map(function(t,n){return[t,7-e[n]]})}}function i(e){return~~(n.random()*e)}function a(e,t,n,i){if(0===e||0===n)return null;let a=o(r(e,t),r(n,i)),l=s(a.rowWalls,a.colWalls);return-1===l.reduce((e,t)=>e.concat(t)).indexOf(0)?l.reduce((e,t)=>e.concat(t)).filter(e=>1===e).length<5?null:{rowSpread:e,rowOffset:t,colSpread:n,colOffset:i,rowWalls:a.rowWalls,colWalls:a.colWalls,connections:l}:null}function s(e,t){let n=[];for(let e=0;e<8;e++){n[e]=[];for(let t=0;t<8;t++)n[e][t]=0}return l(n,0,0,e,t),n[0][0]--,n}function l(e,t,n,r,o){if(e[t][n])return void e[t][n]++;e[t][n]=1;let i,a;a=n,(i=t+1)<8&&-1===r[n].indexOf(i)&&l(e,i,a,r,o),i=t,(a=n+1)<8&&-1===o[t].indexOf(a)&&l(e,i,a,r,o),a=n,(i=t-1)>=0&&-1===r[n].indexOf(t)&&l(e,i,a,r,o),i=t,(a=n-1)>=0&&-1===o[t].indexOf(n)&&l(e,i,a,r,o)}function c(){let e=i(6)+1,t=i(7),n=i(6)+1,r=i(7),o=a(e,t,n,r);for(;!o;)o=a(e,t,n=i(6)+1,r=i(7));return o}function u(){let e=[0,1,2,3];return[e.splice(i(e.length),1)[0],e.splice(i(e.length),1)[0],e.splice(i(e.length),1)[0],e[0]]}function p(){return[i(8),i(8)]}function d(e){let t=[];for(let r=0;r<4;r++){let o=e[r],i=(4*r+e[(r+1)%4]+e[(r+2)%4])%16;o===i&&(i=15-o),(4===n.abs(o-i)||1===n.abs(o-i)&&~~(o/4)==~~(i/4))&&(o=(16+o-5)%16,i=(i+5)%16),[o,i].forEach(e=>{let n=[e%4,~~(e/4)];1!==r&&3!==r||(n[0]=n[0]+4),2!==r&&3!==r||(n[1]=n[1]+4),t.push(n)})}return{trapsSeed:e,trapsXY:t}}function h(){return d([i(16),i(16),i(16),i(16)])}function f(){let e=h(),t=p(),n=c();for(;e.trapsXY.some(e=>e.join()===t.join())||1!==n.connections[t[0]][t[1]];)e=h(),t=p();return{colors:u(),traps:e,target:t,walls:n}}function m(e){return(e+4*i(4)).toString(16).toUpperCase()}function E(e){return(e+8*i(2)).toString(16).toUpperCase()}function y(e){return"0x"+m(0)+e.map(m).join("")}function A(e){let t="0x"+m(1);return t+=[e.rowSpread,e.rowOffset,e.colSpread,e.colOffset].map(E).join("")}function g(e){let t="0x"+m(2);return t+=e.trapsSeed.map(e=>e.toString(16).toUpperCase()).join("")}function C(e){let t="0x"+m(3);return t=t+e.map(E).join("")+e.map(E).join("")}function v(e){return[y(e.colors),A(e.walls),g(e.traps),C(e.target)]}function b(e,t){let n=i(16),r=[n,e,t].reduce((e,t,n)=>e+t*(2*n+1),0);return"0x"+n.toString(16).toUpperCase()+[e,t].map(e=>(e<16?"0":"")+e.toString(16).toUpperCase()).join("")+(r%16).toString(16).toUpperCase()}function T(){this.setSettings=function(e){for(var t=0;t<24;t++)this[String.fromCharCode(97+t)]=e[t]||0;this.c<.01&&(this.c=.01);var n=this.b+this.c+this.e;if(n<.18){var r=.18/n;this.b*=r,this.c*=r,this.e*=r}}}function k(t){ee=t,ce++,e.querySelectorAll(".node-inside").forEach(e=>e.setAttribute("visible",!1)),t.el.querySelector(".node-inside").setAttribute("visible",!0),t.isTrap&&(t.el.querySelector(".node-box").components[K?"sound__lose":"sound__trap"].playSound(),O(32)),z()}function x(e,t){let n=performance.now(),r=!1;return requestAnimationFrame(function o(i){let a=(i-n)/t;a>1&&(a=1);let s=a;r||e(s),!r&&a<1&&requestAnimationFrame(o)}),()=>{r=!0}}function w(t,n){const r=e.createElement(t);for(const e in n){let t=n[e];"position"===e&&(t=(t.x||0)+" "+(t.y||0)+" "+(t.z||0)),r.setAttribute(e,t)}return r}function S(e){return w("a-box",{class:"wall",src:"#G",position:e,color:"#FFF",height:4,width:4,depth:4})}function R(e,t,n=1){let r=w("a-entity",{position:{x:e.x-.5*n,y:e.y,z:e.z-.5*n},rotation:"0 "+(90*n-45)+" 0"});if(r.appendChild(w("a-plane",{position:{y:-.4},rotation:"-10 0 0",height:.5,width:.5,src:`#T${t.isTrap?"T":t.sector}`})),!t.isTrap){r.appendChild(w("a-plane",{class:"node-action-help",position:{x:-.3,y:-.2},rotation:"-10 15 0",height:.1,width:.4,src:"#AE",material:"transparent: true;","fuse-on-hover":"","scale-on-hover":"","help-on-click":"","text-on-hover":"",sound__click:{src:ae}})),r.appendChild(w("a-plane",{class:"node-action-hack",position:{x:-.31,y:-.35},rotation:"-10 15 0",height:.1,width:.4,src:"#AA",material:"transparent: true;","fuse-on-hover":"","scale-on-hover":"","hack-on-click":"","text-on-hover":"",sound__hack:{src:oe}}));let e=w("a-entity",{class:"hint",position:{y:-.2,z:-.1},visible:!1});e.appendChild(w("a-plane",{position:{y:.375},height:.5,width:.5,src:`#H`,material:"transparent:true"})),e.appendChild(w("a-plane",{position:{y:.0625},height:.125,width:.125,src:`#HA`,material:"transparent:true"})),r.appendChild(e)}return r}function _(e,t){let n=w("a-entity",{class:"node"});n.appendChild(w("a-box",{class:"node-box",src:`#N${t.sector}`,position:e,height:1.5,width:1.5,depth:1.5,rotation:"0 45 0","move-on-click":"","scale-on-hover":"","text-on-hover":"","fuse-on-hover":"",sound__move:{src:ne,on:"click"},sound__trap:{src:re},sound__lose:{src:ie}}));let r=w("a-entity",{class:"node-inside"});return r.appendChild(w("a-plane",{position:{x:e.x,y:e.y-.7,z:e.z},color:t.isTrap?G:B[J.colors[t.sector]],rotation:"-90 45 0",material:"transparent:true",src:"#F",height:1.46,width:1.46})),r.appendChild(R(e,t)),r.appendChild(R(e,t,-1)),n.appendChild(r),n.data=t,n}function N(e,t,n){let r=F(e),o=`> access code\n  ${t}`,i=(`> hack\n  ACCESS DENIED!`,`> hack\n\n  ACCESS GRANTED\n\n> sudo rm -rf /\n> kill -9 -1`,"\n\n> "+(n||""));return(P&&!X?r+"\n\n":"")+(ee.isHacked?"> hack\n  ACCESS DENIED!":X?"> hack\n\n  ACCESS GRANTED\n\n> sudo rm -rf /\n> kill -9 -1":o)+(X?"":i)}function F(e){let t=e%60,n=`0${~~(e/60)}:${t<10?"0":""}${t}`,r=~~(100*(te-e)/te);return`LOCATING INTRUDER\n${r}% [${"=".repeat(~~(r/10)+(r<100?1:0))+" ".repeat(10-~~(r/10)+(r<10?1:0))}]\n            ${n}`}function I(e){let t=F(e);return(P?t+"\n\n":"")+"    INTRUDER  \n"+(K?"   ELIMINATED":"    DETECTED  ")}function z(e){Q.forEach((t,n)=>{H(ue[`T${n}`],N(le,t,e),B[J.colors[n]],48)}),H(ue[`TT`],I(le),G)}function j(e){Q.forEach((t,n)=>{H(ue[`N${n}`],">"+(e||""),B[J.colors[n]],112)})}function O(e){(le-=e)<0&&(le=0),z()}function $(){X||(--le<0&&(le=0),z(),le?setTimeout($,ee.isTrap?500:1e3):q())}function W(){P||(P=!0,z(),$())}function q(){V&&V(),K=!0,e.getElementById("camera").setAttribute("position","0 0 0"),L(G),k(Z)}function D(){let t=b(le,ce),n=["              ERROR","","A fatal exception "+t+" has","occured in the network sectors:",Q.join(" ")+".","","All processes terminated.","","Contact your system administator","or technical support for further","assistance.","","TIME_TO_LOCATE_INTRUDER: "+`0${~~(le/60)}:${le%60<10?"0":""}${le%60}`,"INTRUDER_SWITCHES_COUNT: "+ce,"NETWORK_TOP_HACKER_CODE: "+t,"","YOU WIN!"].join("\n");H(ue.H,n,"",24);let r=w("a-plane",{width:2,height:2,position:{y:1,z:-3},src:"#H",material:"transparent:true"});e.getElementById("camera").appendChild(r),r=w("a-plane",{width:2,height:2,position:{y:1,z:3},src:"#H",material:"transparent:true",rotation:"0 180 0"}),e.getElementById("camera").appendChild(r)}function U(){function t(n,r,o){let a=[].filter.call(e.querySelectorAll(n),e=>e.getAttribute("visible"));a.length?(a[i(a.length)].setAttribute("visible",!1),a[i(a.length)].setAttribute("visible",!1),setTimeout(()=>t(n,r,o),r)):o()}X=!0;let n=e.getElementById("camera");n.setAttribute("sound",{src:se}),n.components.sound.playSound(),z(),e.getElementById("scene").appendChild(w("a-sky",{color:"#00F"})),e.querySelectorAll(".sky").forEach(e=>e.parentNode.removeChild(e)),e.querySelectorAll(".node-action-hack").forEach(e=>e.parentNode.removeChild(e)),e.querySelectorAll(".node-action-help").forEach(e=>e.parentNode.removeChild(e)),L("#00F"),t(".wall",20,()=>t(".node",50,D))}function H(e,t,n,r=48,o="white"){t=t.split("\n"),e.clearRect(0,0,512,512),n&&(e.fillStyle=n,e.fillRect(0,0,512,512)),e.lineWidth=1,e.fillStyle=o,e.font=`${r}px Monaco,Consolas,monospace`,t.forEach((t,n)=>e.fillText(t,10,(n+1)*r*1.2)),n&&r>30&&(e.strokeStyle=n,t.forEach((t,n)=>e.strokeText(t,10,(n+1)*r*1.2))),e.strokeStyle="rgba(0,0,0,0.3)",t.forEach((t,n)=>e.strokeText(t,10,(n+1)*r*1.2))}function L(e="#FFF"){let t=ue.G;t.fillStyle="black",t.strokeStyle=e,t.fillRect(0,0,256,256);for(let e=0;e<6;e++){let n=51*e+.5;t.beginPath(),t.moveTo(0,n),t.lineTo(256,n),t.stroke()}}function M(){let t=e.querySelector("a-assets"),n=(n,r,o)=>{let i=e.createElement("canvas");return i.id=n,i.width=r,i.height=o,ue[n]=i.getContext("2d"),t.appendChild(i),ue[n]},r=n("G",256,256);L(),(r=n("F",128,128)).strokeStyle="#FFF",r.clearRect(0,0,128,128),r.strokeRect(.5,.5,127,127),H(n("AA",512,128),">hack","",90),H(n("AE",512,128),">help","",90),(r=n("HA",128,128)).fillStyle="rgba(255,255,255,0.8)",r.beginPath(),r.moveTo(0,0),r.lineTo(64,64),r.lineTo(128,0),r.fill();let o=["> access code","","Four ACCESS_CODEs from terminals","in different sectors can be used","by NAVIGATOR to map the network","and locate the TARGET node.","","> hack","","HACK the TARGET node to destroy","the corporate network and win.","","But beware - hacking wrong nodes","will make you easier to locate","and you will be lost in CYBERSPACE","when the time runs out!"].join("\n");H(n("H",512,512),o,"rgba(255,255,255,0.8)",24,"#333"),["N0","N1","N2","N3","T0","T1","T2","T3","TT"].forEach(e=>n(e,512,512)),j()}let B=["#3C5","#3CF","#FC3","#F3C"],G="#F00";var Y=new function(){this._params=new T;var e,t,r,o,i,a,s,l,c,u,p,d;this.reset=function(){var e=this._params;o=100/(e.f*e.f+.001),i=100/(e.g*e.g+.001),a=1-e.h*e.h*e.h*.01,s=-e.i*e.i*e.i*1e-6,e.a||(p=.5-e.n/2,d=5e-5*-e.o),l=1+e.l*e.l*(e.l>0?-.9:10),c=0,u=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.totalReset=function(){this.reset();var n=this._params;return e=n.b*n.b*1e5,t=n.c*n.c*1e5,r=n.e*n.e*1e5+12,3*((e+t+r)/3|0)},this.synthWave=function(h,f){var m=this._params,E=1!=m.s||m.v,y=m.v*m.v*.1,A=1+3e-4*m.w,g=m.s*m.s*m.s*.1,C=1+1e-4*m.t,v=1!=m.s,b=m.x*m.x,T=m.g,k=m.q||m.r,x=m.r*m.r*m.r*.2,w=m.q*m.q*(m.q<0?-1020:1020),S=m.p?32+((1-m.p)*(1-m.p)*2e4|0):0,R=m.d,_=m.j/2,N=m.k*m.k*.01,F=m.a,I=e,z=1/e,j=1/t,O=1/r,$=5/(1+m.u*m.u*20)*(.01+g);$>.8&&($=.8),$=1-$;for(var W,q,D,U,H,L,M=!1,B=0,G=0,Y=0,P=0,K=0,X=0,V=0,J=0,Q=0,Z=0,ee=new Array(1024),te=new Array(32),ne=ee.length;ne--;)ee[ne]=0;for(ne=te.length;ne--;)te[ne]=2*n.random()-1;for(ne=0;ne<f;ne++){if(M)return ne;if(S&&++Q>=S&&(Q=0,this.reset()),u&&++c>=u&&(u=0,o*=l),a+=s,(o*=a)>i&&(o=i,T>0&&(M=!0)),q=o,_>0&&(Z+=N,q*=1+n.sin(Z)*_),(q|=0)<8&&(q=8),F||((p+=d)<0?p=0:p>.5&&(p=.5)),++G>I)switch(G=0,++B){case 1:I=t;break;case 2:I=r}switch(B){case 0:Y=G*z;break;case 1:Y=1+2*(1-G*j)*R;break;case 2:Y=1-G*O;break;case 3:Y=0,M=!0}k&&((D=0|(w+=x))<0?D=-D:D>1023&&(D=1023)),E&&A&&((y*=A)<1e-5?y=1e-5:y>.1&&(y=.1)),L=0;for(var re=8;re--;){if(++V>=q&&(V%=q,3==F))for(var oe=te.length;oe--;)te[oe]=2*n.random()-1;switch(F){case 0:H=V/q<p?.5:-.5;break;case 1:H=1-V/q*2;break;case 2:H=.225*(((H=1.27323954*(U=6.28318531*((U=V/q)>.5?U-1:U))+.405284735*U*U*(U<0?1:-1))<0?-1:1)*H*H-H)+H;break;case 3:H=te[n.abs(32*V/q|0)]}E&&(W=X,(g*=C)<0?g=0:g>.1&&(g=.1),v?(K+=(H-X)*g,K*=$):(X=H,K=0),P+=(X+=K)-W,H=P*=1-y),k&&(ee[J%1024]=H,H+=ee[(J-D+1024)%1024],J++),L+=H}L*=.125*Y*b,h[ne]=L>=1?32767:L<=-1?-32768:32767*L|0}return f}};t.jsfxr=function(e){Y._params.setSettings(e);var t=Y.totalReset(),n=new Uint8Array(4*((t+1)/2|0)+44),r=2*Y.synthWave(new Uint16Array(n.buffer,44),t),o=new Uint32Array(n.buffer,0,44);o[0]=1179011410,o[1]=r+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=r,r+=44;for(var i=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="data:audio/wav;base64,";i<r;i+=3){var l=n[i]<<16|n[i+1]<<8|n[i+2];s+=a[l>>18]+a[l>>12&63]+a[l>>6&63]+a[63&l]}return s};let P,K,X,V,J,Q,Z,ee,te=256,ne=`url(${jsfxr([0,.002,.0234,.1937,.7505,.2288,,.2736,.0139,-.1929,-.2634,-.818,-.532,,,,-.3047,.8316,.7164,-.0983,,.1088,9e-4,.5])})`,re=`url(${jsfxr([1,.06,.3,.2,.08,.18,,,,,,,,,,,,,1,,,.09,,.5])})`,oe=`url(${jsfxr([1,,.19,.13,.12,.22,,-.02,,,,.02,,,,,-.0799,.08,1,,,.12,,.5])})`,ie=`url(${jsfxr([0,.0107,.4818,.1177,.1103,.5301,,-.001,-.2314,,.8409,.6064,-.8357,-.2814,-.1833,,-.1204,-6e-4,.9992,.2134,.7968,.9975,-.8724,.5])})`,ae=`url(${jsfxr([0,,.1906,,.0556,.4761,,,,,,,,.1562,,,,,1,,,.1,,.5])})`,se=`url(${jsfxr([1,,.3447,,.4712,.2109,,.1984,,.1398,.5774,,,,,,,,1,,,,,.5])})`,le=te,ce=-1,ue={};AFRAME.registerComponent("scale-on-hover",{init:function(){let e=this.el;e.addEventListener("mouseenter",()=>{e.setAttribute("scale",{x:1.1,y:1.1,z:1.1})}),e.addEventListener("mouseleave",()=>{e.setAttribute("scale",{x:1,y:1,z:1})})}}),AFRAME.registerComponent("fuse-on-hover",{init:function(){let t=e.getElementById("cursor");if(!t.components.cursor.data.fuse)return;let n,r=this.el;r.addEventListener("mouseenter",()=>{t.setAttribute("scale",{x:1.2,y:1.2,z:1.2}),n=x(e=>{let n=.007-.0069*e;t.setAttribute("geometry",{radiusInner:n})},1500)});let o=()=>{t.setAttribute("scale",{x:1,y:1,z:1}),t.setAttribute("material",{color:"white"}),t.setAttribute("geometry",{radiusInner:.007}),n()};r.addEventListener("mouseleave",o),r.addEventListener("click",o)}}),AFRAME.registerComponent("text-on-hover",{init:function(){let e=this.el;e.addEventListener("mouseenter",()=>{"node-box"===e.className?j("switch"):"node-action-hack"===e.className&&z("hack"),"node-action-help"===e.className&&z("help")}),e.addEventListener("mouseleave",()=>{j(),z()})}}),AFRAME.registerComponent("move-on-click",{init:function(){let t=this.el,n=e.getElementById("camera"),r=!1;t.addEventListener("click",()=>{if(r||K)return;let e=n.getAttribute("position"),o=t.getAttribute("position"),i=t.parentEl.data,a=ee.isTrap?G:B[J.colors[ee.sector]],s=i.isTrap?G:B[J.colors[i.sector]],l=a.split("").splice(1).map(e=>parseInt(e,16)),c=s.split("").splice(1).map(e=>parseInt(e,16));V=x(t=>{let r={x:e.x+(o.x-e.x)*t,y:e.y,z:e.z+(o.z-e.z)*t};n.setAttribute("position",r),a!==s&&L("#"+l.map((e,n)=>(~~(e+(c[n]-e)*t)).toString(16)).join(""))},1e3),i&&(W(),r=!0,setTimeout(()=>{K||(k(i,!0),r=!1)},900))})}}),AFRAME.registerComponent("hack-on-click",{init:function(){let e=this.el,t=e.parentNode.parentNode.parentNode;e.addEventListener("click",()=>{t.data&&(t.data.isTarget?U():(W(),t.data.isHacked=!0,e.components.sound__hack.playSound(),O(16)))})}}),AFRAME.registerComponent("help-on-click",{init:function(){let e=this.el,t=e.parentNode.querySelector(".hint");e.addEventListener("click",()=>{e.components.sound__click.playSound(),t.setAttribute("visible",!t.getAttribute("visible"))})}}),AFRAME.registerComponent("cyberspace",{init:function(){let t,n=this.el,r=v(J=f()),o=J.target;t=o[1]<4?o[0]<4?3:2:o[0]<4?1:0;let a=r.slice(0,3);(Q=[]).push(a.splice(i(a.length),1)[0]),Q.push(a.splice(i(a.length),1)[0]),Q.push(a[0]),Q.splice(t,0,r[3]),M();for(let e=0;e<=16;e++)for(let t=0;t<=16;t++){let r={x:4*e,y:2,z:4*t};(0===e||16===e||0===t||16===t||e%2==0&&t%2==0)&&n.appendChild(S(r))}n.appendChild(S({x:-4,y:2,z:0})),n.appendChild(S({x:0,y:2,z:-4})),J.walls.rowWalls.forEach((e,t)=>{e.forEach((r,o)=>{r&&r!==e[o-1]&&n.appendChild(S({x:2*r*4,y:2,z:4*(2*t+1)}))})}),J.walls.colWalls.forEach((e,t)=>{e.forEach((r,o)=>{r&&r!==e[o-1]&&n.appendChild(S({x:4*(2*t+1),y:2,z:2*r*4}))})});let s=[];for(let e=0;e<8;e++){s[e]=[];for(let t=0;t<8;t++){let n={isTrap:!1,isTarget:!1,isHacked:!1,el:null};t<4?(n.code=e<4?Q[0]:Q[1],n.sector=e<4?0:1):(n.code=e<4?Q[2]:Q[3],n.sector=e<4?2:3),s[e][t]=n}}J.traps.trapsXY.forEach(e=>{s[e[0]][e[1]].isTrap=!0}),s[J.target[0]][J.target[1]].isTarget=!0;let l,c;for(l=0;l<8;l++)for(c=0;c<8;c++){let e={x:4*(2*l+1),y:1.7,z:4*(2*c+1)};s[l][c].el=_(e,s[l][c]),n.appendChild(s[l][c].el)}(Z={isTrap:!0,sector:0}).el=_({x:0,y:1.7,z:0},Z),n.appendChild(Z.el);let u;do{l=i(8),c=i(8),u=s[l][c]}while(u.isTrap||u.isTarget||u.code!==r[0]&&u.code!==r[1]);let p=e.getElementById("camera"),d={x:4*(2*l+1),z:4*(2*c+1)};p.setAttribute("position",d),p.setAttribute("rotation","0 45 0"),L(u.isTrap?G:B[J.colors[u.sector]]),k(u)}})}(document,window,Math);</script></head><body bgcolor="#000"><p style="position:absolute;margin-left:1em;color:#FFF;font:1em Monaco,Consolas,monospace">Entering CYBERSPACE...</p><a-scene cyberspace id="scene"><a-assets></a-assets><a-entity id="camera"><a-camera wasd-controls-enabled="false"><a-entity id="cursor" cursor position="0 0 -0.5" geometry="primitive: ring; radiusInner: 0.007; radiusOuter: 0.01, segmentsTheta: 32" material="color: white; shader: flat; opacity: 0.8"></a-camera></a-entity><a-plane class="sky" position="0 5 0" rotation="90 0 0" width="600" height="600" color="#001"></a-plane><a-plane class="sky" position="0 -1 0" rotation="-90 0 0" width="600" height="600" color="#001"></a-plane></a-scene></body></html>