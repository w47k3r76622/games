var e=!0,f=null,h=!1,aa=5,ba=25,l=document.getElementById("c"),n,p=0,q=0,r=-1,t=1,u=0,v=[],x=[],y=[],z=[],B=[],ca=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent),C={},da={a:32,u:1,v:2,K:200,w:500,U:1.2,e:49,f:40,H:10,F:250,j:100,M:2,D:["#87643E","#221409"]},D=Math.PI,E=Math.round,F=Math.floor,ea=Math.random,fa=Math.sin,ga=Math.cos,ha=Math.atan2,G=Math.pow,ia=Math.sqrt,H=Math.abs,ja=Math.max,ka=Math.min,I="#000",J="#fff",la="110000000000111111111111111111111111111111111111110000000000001111111111111111111111100000001111110000000000000011111111111111111110000000000001111000000000000001111111111111111110000000000000011100000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000001100000000000000000000000000000000000111110000000110000000000000011111111111111111111111110000000011000000000000001111111111111111111111100000000001110000000000001111111111111111111110000000000000111100000000001111111111111111111111000000000000111111111111111111111111111111111111110000000000111111111111111111111111111111111111111000000000111111111111111111111111111111111111111100000111111111111111111111111111111111111111111110000011111111111111111111111111111111111111111100000011111111111111111111111111111111111111111111000000001111111111111111111111111111111111111110000000000000001111111111111111111111111111111111111000000000000011111111111111111111111111111111111111111000000000111111111111111111111111111111111111110000000000111111111111111111111111111111111111100000000011111111111111111111111111111111111111111100000001111111111111111111111111111111111111111110000000111111111111111111111111111111111111111110000000011111111111111111111111111111111111111111000000001111111111111111111111111111111111111111000000000111111000000000000000000000111111111111111100000001111000000000000000000000111111111111111100000001111110000000000000000000001111111111111110000000011110000000000000000000001111111111111000000000011111000000000000000000000111111111111100000000001111100000000000000000000011111111111110000000111111111000000000000000000011111111111110000000000000011100000000000000000000000000000000000000000000001110000000000000000000000000000000000000000000011111100000000000000000000000000000000000000000011111111111111111111111100000000000000111111111111111";
function ma(){for(param in da)C[param]=da[param];na=0;l.onclick=f;n=new oa;K=new ArrayBuffer(C.e*C.f);L=new Uint8Array(K);n.R(6,7);v.push(new pa(12,34));x.push(new M(38,5,qa));x.push(new M(41,26,ra));x.push(new M(42,28,ra));y.push(new sa(37,13));for(i=0;i<la.length;++i){var a=parseInt(la.charAt(i),10);isNaN(a)||(L[i]=a)}for(;i<L.length;++i)L[i]=1;B.push(new N(470,110,"... somewhere deep underground near the Large Hadron Collider..."));B.push(new N(600,280,"... something has gone terribly wrong..."));
B.push(new N(1250,90,"<-- Watch out"));B.push(new N(1252,405,"Score big points"));B.push(new N(1225,425,"<-- Collect electronics"));B.push(new N(530,1050,"<-- Try to not get lost"));B.push(new N(560,1070,"in the multiverse"));ta()}var O;
function ua(a,b){a=O[a.x][a.y];b=O[b.x][b.y];for(var c=0;c<O.length;c++)for(var d=0;d<O[c].length;d++)O[c][d].k=0,O[c][d].G=0,O[c][d].m=0,O[c][d].$=h,O[c][d].closed=h,O[c][d].parent=f;c=[];for(c.push(a);0<c.length;){for(var k=0,g=0;g<c.length;g++)c[g].k<c[k].k&&(k=g);d=c[k];if(d==b){c=d;for(d=[];c.parent;)d.push(c),c=c.parent;return d.reverse()}c.splice(k,1);d.closed=e;var g=O,k=[],m=d.x,w=d.y;g[m-1]&&g[m-1][w]&&k.push(g[m-1][w]);g[m+1]&&g[m+1][w]&&k.push(g[m+1][w]);g[m][w-1]&&g[m][w-1]&&k.push(g[m][w-
1]);g[m][w+1]&&g[m][w+1]&&k.push(g[m][w+1]);for(g=0;g<k.length;g++)if(m=k[g],!m.closed&&0==P(m.x,m.y)){var w=d.G+1,s=h;if(m.$)w<m.G&&(s=e);else{var s=e,A=m,Q=m,Pa=b,gb=H(Pa.x-Q.x),Q=H(Pa.y-Q.y);A.m=gb+Q;m.$=e;c.push(m)}s&&(m.parent=d,m.G=w,m.k=m.G+m.m)}}return[]}for(i=0;5>i;++i)new Audio("47acx".charAt(i)+".mp3");function va(a,b){var c=new Audio(a+".mp3");c.playbackRate=b;c.play()}var R=0,wa=0,S=0,xa=0,T={Y:f,da:f};
ca?(window.ontouchstart=function(a){var b;a:{b=a.changedTouches[0];if(b.clientY>l.height-150&&b.clientY<l.height-50){if(50<b.clientX&&150>b.clientX){b="fire";break a}if(160<b.clientX&&210>b.clientX){b="weapon";break a}if(b.clientX>l.width-150&&b.clientX<l.width-50){b="aim";break a}}b=void 0}b&&("weapon"==b?n.X():(T[b]=a.changedTouches[0].identifier,"fire"==b&&(wa=1)))},window.ontouchend=function(a){for(type in T)T[type]==a.changedTouches[0].identifier&&(T[type]=f);T.fire===f&&(wa=0);T.aim===f&&(R=
0)},window.ontouchmove=function(a){a.preventDefault();for(i=0;i<a.changedTouches.length;++i){var b=a.changedTouches.item(i);if(T.aim===b.identifier){var c=l.width-b.clientX-100,b=l.height-b.clientY-100;S=l.width/2-2*c;xa=l.height/2-2*b;R=625<c*c+b*b?-1:0}}}):(window.onmousemove=function(a){S=a.clientX;xa=a.clientY},window.onmousedown=function(){wa=1},window.onmouseup=function(){wa=0},window.onkeydown=function(a){switch(a.key){case "w":R=-1;break;case "s":R=1;break;case "c":n.X()}},window.onkeyup=
function(a){switch(a.key){case "w":case "s":R=0}});var K,L;function P(a,b){return L[C.e*b+a]}function ya(){v.length=0;x.length=0;y.length=0;z.length=0;B.length=0}function U(a,b,c){var d,k,g=c*c;for(k=-c;k<=c;++k)for(d=-c;d<=c;++d)d*d+k*k<=g&&(L[C.e*(b+k)+(a+d)]=0)}
function za(a,b,c,d){for(var k=H(c-a),g=H(d-b),m=a<c?1:-1,w=b<d?1:-1,s=k-g;;){var A=V(2,25);if(4<=A){var A=a,Q=b;--A;--Q;for(i=9;0!=i--;)L[C.e*Q+A]=0,A++,0==i%3&&(A-=3,++Q)}else U(a,b,A+2);if(a==c&&b==d)break;A=2*s;A>-g&&(s-=g,a+=m);A<k&&(s+=k,b+=w)}}var W=700,Aa=400,X=0,na=0;
function Ba(a){0<n.t&&(na+=a);p+=q*a;0.2<C.v&&H(p)>=C.v&&(q=0-q);0.01<u&&(u-=0.5*a);for(var b=0;b<B.length;++b)B[b].update&&B[b].update(B[b],a);for(b=0;b<x.length;++b)x[b].c&&x[b].update(a);for(b=0;b<z.length;++b)z[b].update(a);Ca(a);Da();z=z.filter(function(a){return a.c});b={x:0,y:0};Ea(b,a);Fa(b);n.x+=b.x;n.y+=b.y;Ga(n,Ha);for(b=0;b<x.length;++b)if(x[b].c){var c=G(n.x-x[b].x,2)+G(n.y-x[b].y,2);c<x[b].s&&n.S(x[b])}for(b=0;b<y.length;++b)y[b].c&&(c=G(n.x-y[b].x,2)+G(n.y-y[b].y,2),c<y[b].s&&y[b].T());
n.update(a);wa&&n.Y(a);n.J<n.r*ba+n.n*aa&&(n.J+=20*a)}function Ea(a,b){S&&xa&&(n.b=ha(xa-l.height/2,S-l.width/2)+D,n.b-=p*D/180);0!=R?(X+=R*C.K*b,X>C.w&&(X=C.w),X<0-C.w&&(X=0-C.w)):X/=C.U;a.x+=ga(n.b)*X*b;a.y+=fa(n.b)*X*b;n.i=-X}function Fa(a){for(var b=14*C.a,c=0;c<v.length;++c){var d=v[c],k=ia(G(n.x-d.x,2)+G(n.y-d.y,2));k>b||(30>k?(d=v[c],u=r=0,q=10,n.x=d.x,n.y=d.y,va("x",0.5)):(k=1E3*(1/(k*k)),a.x-=(n.x-d.x)/1*k,a.y-=(n.y-d.y)/1*k))}}
function Da(){var a,b,c,d;a=0;for(b=x.length;a<b;++a){c=0;for(d=z.length;c<d;++c)G(z[c].x-x[a].x,2)+G(z[c].y-x[a].y,2)<x[a].s&&x[a].S(z[c])}}function Ga(a,b,c){Ia(a,b,-1,0,c);Ia(a,b,1,0,c);Ia(a,b,0,-1,c);Ia(a,b,0,1,c);Ja(a)}function Ia(a,b,c,d,k){var g=F((a.x+b*c)/C.a),m=F((a.y+b*d)/C.a);0<P(g,m)&&(0!=c&&(g*=C.a,0>c&&(g+=C.a),a.x=g-b*c,k&&k.call(a,"x",c)),0!=d&&(c=m*C.a,0>d&&(c+=C.a),a.y=c-b*d,k&&k.call(a,"y",d)))}
function Ja(a){var b=F(a.x/C.a),c=F(a.y/C.a);0!=P(b,c)&&(b=Ka(b,c),b.length&&(b.sort(function(a,b){return b[2]-a[2]}),b=b.pop(),a.x=b[0]*C.a,a.y=b[1]*C.a))}function Ka(a,b){var c,d=a-3;mx=a+3;var k;my=b+3;var g=[];for(k=b-3;k<=my;++k)for(c=d;c<=mx;++c)if(0==P(c,k)){var m=H(a-c)+H(b-k);g.push([c,k,m])}return g}function La(a,b){var c=F(a.x/C.a),d=F(a.y/C.a);0<P(c,d)&&b.apply(a)}var Y=l.getContext("2d"),Ma=0,Na=0,Z={o:0,p:0,B:0,C:0,size:0},Oa,Qa,Ra=new Image;Ra.src="h.gif";
function Sa(){l.width=window.innerWidth;l.height=window.innerHeight}function Ta(a,b,c){var d=document.createElement("canvas");d.width=a;d.height=b;c(d.getContext("2d"),d);return d}
function Ua(){l.style.cursor="none";Oa=Ta(C.e,C.f,Va);Qa=Ta(30,30,function(a){var b=a.createRadialGradient(15,15,0,15,15,15);b.addColorStop(0,"rgba(255,0,0,0)");b.addColorStop(0.5,"rgba(240,8,8,1)");b.addColorStop(1,"rgba(120,4,4,1)");a.lineWidth=3;a.strokeStyle=b;a.beginPath();a.arc(15,15,10,0,2*D);a.moveTo(0,15);a.lineTo(30,15);a.moveTo(15,0);a.lineTo(15,30);a.stroke()})}
function Wa(){function a(a,c){Y.fillText(a,(l.width-Y.measureText(a).width)/2,c)}Y.fillStyle=I;Y.font="40px serif";a("GAME OVER",75);Y.font="20px sans";a("Collected "+n.r+" circuit board"+(1==n.r?"":"s"),150);a("Killed "+n.n+" bug"+(1==n.n?"":"s"),180);a("Survived "+na.toFixed(1)+" seconds",210);a("CLICK ANYWHERE TO START OVER",l.height-100);Y.font="26px sans";a(n.r*ba+n.n*aa+" points",260)}
function Xa(){Y.fillStyle=J;Y.beginPath();Y.arc(100,l.height-100,50,0,2*D);Y.arc(180,l.height-100,25,0,2*D);Y.arc(l.width-100,l.height-100,50,0,2*D);Y.fill();Y.fillStyle=I;Y.font="12px monospace";Y.fillText("C",176,l.height-95);Y.font="28px monospace";Y.fillText("F",90,l.height-90);Y.fillText("M",l.width-110,l.height-90)}function Va(a){a.fillStyle=C.D[0];for(var b=0;b<C.f;++b)for(var c=0;c<C.e;++c)P(c,b)||a.fillRect(c,b,1,1)}function Ya(){l.onclick=function(){ma()}}
function $(a,b){return ea()*(b-a)+a}function V(a,b){return E($(a,b))}function Za(a,b){return"#"+V(a,b).toString(16)+V(a,b).toString(16)+V(a,b).toString(16)}function $a(a,b){return{x:ga(a)*b,y:fa(a)*b}}var ab=[];
function pa(a,b){this.x=a*C.a;this.y=b*C.a;this.l=this.h=0;this.d=function(a){a.translate(this.x,this.y);var b,k;a.strokeStyle=J;a.fillStyle=J;for(var g=0;g<ab.length;++g)b=ab[g],k=$a(b.b,b.h+37),a.globalAlpha=1-b.h/100,25>b.h?a.fillRect(k.x,k.y,1,1):(a.beginPath(),a.moveTo(k.x,k.y),k=$a(b.b+0.05,b.h+35),a.lineTo(k.x,k.y),a.stroke());a.globalAlpha=1;a.fillStyle=I;a.beginPath();a.arc(0,0,40,0,2*D);a.fill();a.stroke();a.translate(-this.x,-this.y)}}
function Ca(a){for(var b=0;b<ab.length;++b){var c=ab[b];c.b+=70*(1/c.h)*a;c.h-=20*a;0>=c.h&&(c.b=$(0,2*D),c.h=100)}}function bb(a,b,c,d){this.x=a;this.y=b;this.b=c;this.i=d;this.dir=$a(c,d);this.c=e;this.l=1}bb.prototype.d=function(a){a.globalAlpha=this.l;a.fillRect(this.x-2,this.y-2,4,4)};
bb.prototype.update=function(a){this.x+=this.dir.x*a;this.y+=this.dir.y*a;if(0>this.x||0>this.y||this.x>C.e*C.a||this.y>C.f*C.a)this.c=h;La(this,function(){this.b+=$(0,2*D);this.dir=$a(this.b,this.i);this.l-=0.1});this.l-=0.01;0.01>this.l&&(this.c=h)};var cb=new Image;cb.src="e.gif";function sa(a,b){this.x=a*C.a;this.y=b*C.a;this.c=e;this.s=1225}sa.prototype.d=function(a){a.drawImage(cb,this.x,this.y)};sa.prototype.T=function(){this.c=h;B.push(new db("+"+ba,"#08621E"));n.r++};
var qa=0,ra=1,eb=2,fb=new Image;fb.src="b.gif";function M(a,b,c){this.x=a*C.a;this.y=b*C.a;this.b=0;this.c=e;this.s=625;this.Q=3;this.aa=6;this.W=c;this.q=0;if(enemy_behave_setup[c])enemy_behave_setup[c](this)}M.prototype.d=function(a){if(this.c!=h){var b=F(this.q/0.25);a.translate(this.x,this.y);a.rotate(this.b);a.drawImage(fb,18*b,0,18,22,-9,-11,18,22);a.rotate(-this.b);a.translate(-this.x,-this.y)}};
M.prototype.update=function(a){enemy_behave_update[this.W](this,a);this.q+=a;0.5<this.q&&(this.q-=0.5)};enemy_behave_setup=[function(a){a.P=C.j;a.b=D},function(a){a.O=C.j;a.b=D/2}];
enemy_behave_update=[function(a,b){a.y+=a.P*b;Ga(a,10,function(){a.P=-a.P;a.b+=D});hb(a)},function(a,b){a.x+=a.O*b;Ga(a,10,function(){a.O=-a.O;a.b+=D});hb(a)},function(a,b){a.I+=b;1<a.I&&(a.path=ua({x:F(n.x/C.a),y:F(n.y/C.a)},{x:F(a.x/C.a),y:F(a.y/C.a)}),a.I=0);if(0!=a.path.length){var c=a.path[0].x*C.a-a.x,d=a.path[0].y*C.a-a.y;a.b=ha(d,c)+D/2;c=0==c?0:0<c?C.j:-C.j;a.x+=c*b;d=0==d?0:0<d?C.j:-C.j;a.y+=d*b;Ga(a,10)}}];function hb(a){var b=C.F*C.F;G(n.x-a.x,2)+G(n.y-a.y,2)<b&&(a.W=eb,a.I=2)}
M.prototype.S=function(a){this.Q-=a.l;0>this.Q&&this.c&&(this.c=h,n.n+=1,va("7",0.5),B.push(new ib(this.x,this.y,"+"+aa,"#08621E")))};var jb=new Image;jb.src="g.gif";function kb(a,b,c){this.x=a*C.a;this.y=b*C.a;this.type=c;this.c=e;this.s=1600}kb.prototype.d=function(a){a.drawImage(jb,18*this.type,0,18,8,this.x-18,this.y-18,36,16)};kb.prototype.T=function(){this.c=h;B.push(new db(lb[this.type].name.toUpperCase(),J));-1===n.z.indexOf(this.type)&&n.z.push(this.type);n.ca(this.type)};
function mb(a,b){this.x=a*C.a;this.y=b*C.a;this.c=e;this.s=1600}mb.prototype.d=function(a){a.shadowBlur=10;a.drawImage(Ra,this.x,this.y);a.shadowBlur=0};mb.prototype.T=function(){this.c=h;B.push(new db("+1","#08621E"));n.t++};var lb=[{name:"Shotgun",i:400,N:0.8},{name:"Machine gun",i:500,N:0.1},{name:"Pistol",i:700,N:0.4}],Ha=15;
function oa(){this.z=[2];this.t=3;this.J=this.n=this.r=0;var a=2,b=10,c=0,d=0,k=0,g=0.01,m=new Image;m.src="p.png";this.R=function(a,b){this.x=a*C.a;this.y=b*C.a;this.i=this.b=0;d=3};this.ca=function(b){a=b};this.d=function(b){b.translate(n.x,n.y);b.rotate(n.b+k);b.drawImage(m,52*a,0,52,31,-Ha-22,-Ha,52,31);b.rotate(-n.b-k);b.translate(-n.x,-n.y)};this.update=function(a){0<c&&(c-=a);0<d&&(d-=a);0!=R&&(k+=g,0.05<H(k)&&(g=-g));10>b&&(b+=0.1*a)};this.X=function(){var b=n.z.indexOf(a);b++;b==n.z.length&&
(b=0);a=n.z[b]};this.Y=function(){if(!(0<c)){var b=this.x-40*ga(this.b)-8*ga(this.b-D/2),d=this.y-40*fa(this.b)-8*fa(this.b-D/2);if(0==a){for(var g=-2;2>=g;++g)z.push(new bb(b,d,this.b+D+0.1*g,lb[a].i+n.i));va("a",1)}else z.push(new bb(b,d,this.b+D,lb[a].i+n.i)),va("c",2==a?0.8:2);c=lb[a].N}};this.S=function(a){if(!(0<d)){b-=a.aa;if(0>=b){n.t--;b=10;if(0==n.t){ya();t=1;p=q=0;C.a=32;C.u=10;C.v=0;C.K=200;C.w=300;C.U=1.2;C.D=["#f8f8f8","#95EDEC"];C.e=50;C.f=50;K=new ArrayBuffer(C.e*C.f);L=new Uint8Array(K);
for(a=0;a<L.length;++a)L[a]=1;U(15,25,8);U(25,25,4);U(35,25,8);for(a=0;4>a;++a)U(V(5,45),V(5,45),3);n.R(25,25);ta();window.setTimeout(Ya,2E3)}va("4",1);B.push(new db("DEAD","#620A08"))}else B.push(new ib(this.x,this.y,"OUCH","#620A08"));d=1}}}function ib(a,b,c,d){this.x=a;this.y=b;this.text=c;this.color=d;this.c=e;this.g=0}ib.prototype.update=function(a,b){a.y-=100*b;a.g+=b;1<a.g&&(a.c=h)};ib.prototype.d=function(a,b){a.c&&(b.fillStyle=this.color,b.fillText(a.text,a.x,a.y))};
function N(a,b,c){this.x=a;this.y=b;this.text=c}N.prototype.d=function(a,b){b.fillStyle=J;b.fillText(a.text,a.x,a.y)};function db(a,b){this.text=a;this.color=b;this.c=e;this.g=0}db.prototype.update=function(a,b){a.g+=b;1<a.g&&(a.c=h)};db.prototype.d=function(a,b){if(a.c){var c=250*a.g*a.g+12,d=1-a.g;b.font=c+"px monospace";b.globalAlpha=d;b.fillStyle=a.color;b.fillText(a.text,(l.width-b.measureText(a.text).width)/2-Ma,(l.height-c)/2-Na);b.font="12px monospace";b.globalAlpha=1}};window.onresize=Sa;
var nb=0,ob=h;
function pb(a){var b=a-nb;nb=a;33.32<b&&(b=33.32);if(0>r)Ba(b/1E3);else if(a=b/1E3,r+=a,3>r)Ca(a),t+=12*a,p+=q*a,q+=10,u+=0.5*a;else{u-=0.5*a;t=1;p=q=0;C.a=V(20,70);C.u=$(0,15);1>C.u&&(C.u=0);2>=$(1,10)?C.v=0:C.v=$(2,80);C.K=$(150,300);C.w=C.K*$(1,3);C.U=$(1.1,1.3);C.D=[Za(100,250),Za(50,200)];30>C.H&&(C.H+=2);150>C.j&&(C.j+=5,C.F+=5);C.M+=5;ya();C.e=100;C.f=100;K=new ArrayBuffer(C.e*C.f);L=new Uint8Array(K);a=[];for(var c,d,k,g,m,b=0;b<L.length;++b)L[b]=1;for(b=0;8>b;++b)c=V(10,C.e-20),d=V(10,C.f-
20),k=V(5,10),U(c,d,k),k=G(g-c,2)+G(m-d,2),c+=V(-3,3),d+=V(-3,3),0==b?(g=c,m=d):2>v.length&&225<=k?(U(c,d,15),v.push(new pa(c,d))):(1>y.length&&400<=k&&(y.push(new sa(c,d)),c+=V(-3,3),d+=V(-3,3)),x.push(new M(c,d,V(0,1)))),a.push({x:c,y:d});for(b=0;b<a.length;b+=2)za(a[b].x,a[b].y,a[b+1].x,a[b+1].y);c=[];d={x:g,y:m};for(b=1;b<a.length;++b)0==ua(d,a[b]).length&&c.push(a[b]);for(b=0;b<c.length;++b)za(d.x,d.y,c[b].x,c[b].y),d=c[b];for(;x.length<C.H;)c=V(0,C.e),d=V(0,C.f),a=P(c,d),0==a&&x.push(new M(c,
d,V(0,1)));if(V(1,100)>=100-C.M){do c=V(g-10,g+10),d=V(m-10,m+10),a=P(c,d);while(0!=a);5<V(1,10)?y.push(new kb(c,d,V(0,1))):y.push(new mb(c,d));C.M=2}n.R(g,m);ta();r=-1}Y.setTransform(1,0,0,1,0,0);Y.imageSmoothingEnabled=h;Y.msImageSmoothingEnabled=h;Y.font="12px monospace";Y.globalAlpha=1;Y.shadowColor=J;Y.fillStyle=C.D[1];Y.fillRect(0,0,l.width,l.height);Y.translate(l.width/2,l.height/2);Y.rotate(p*D/180);Y.scale(t,t);Y.translate(0-l.width/2,0-l.height/2);Ma=E(0-n.x+l.width/2);Na=E(0-n.y+l.height/
2);Y.translate(Ma,Na);g=1.4*ja(l.width,l.height);Z.o=E(n.x-g/2);Z.p=E(n.y-g/2);Z.B=E(n.x+g/2);Z.C=E(n.y+g/2);Z.o=ja(Z.o,0);Z.p=ja(Z.p,0);Z.B=ka(Z.B,C.e*C.a);Z.C=ka(Z.C,C.f*C.a);g=Z.B-Z.o;m=Z.C-Z.p;Y.drawImage(Oa,Z.o/C.a,Z.p/C.a,g/C.a,m/C.a,Z.o,Z.p,g,m);n.d(Y);for(g=0;g<v.length;++g)m=v[g],a=Z,m.x>=a.o&&(m.x<=a.B&&m.y>=a.p&&m.y<=a.C)&&v[g].d(Y);for(g=0;g<x.length;++g)x[g].c&&x[g].d(Y);for(g=0;g<y.length;++g)y[g].c&&y[g].d(Y);Y.fillStyle=I;for(g=0;g<z.length;++g)z[g].d(Y);Y.globalAlpha=1;Y.fillStyle=
J;for(g=0;g<B.length;++g)B[g].d(B[g],Y);Y.setTransform(1,0,0,1,0,0);Y.drawImage(Qa,S-15,xa-15);0.01<u&&(Y.fillStyle=I,Y.globalAlpha=u,Y.fillRect(0,0,l.width,l.height),Y.globalAlpha=1);if(0==n.t)Wa();else{for(i=0;i<n.t;++i)Y.drawImage(Ra,20+22*i,20);Y.fillStyle=J;Y.font="12px monospace";Y.drawImage(cb,20,50);Y.fillText("\u00d7 "+n.r,50,61);Y.drawImage(fb,0,0,18,22,20,80,18,22);Y.fillText("\u00d7 "+n.n,50,92);Y.fillText(F(n.J)+" pts",20,130)}ca&&Xa();requestAnimationFrame(pb)}Sa();O=Array(100);
for(var qb=0;100>qb;++qb){O[qb]=Array(100);for(var rb=0;100>rb;++rb)O[qb][rb]={x:qb,y:rb}}for(var sb=0;250>sb;++sb)ab.push({b:$(0,2*D),h:$(0,98)});n=new oa;
(function(){function a(){var b;Y.setTransform(1,0,0,1,0,0);Y.fillStyle="#404E4C";Y.fillRect(0,0,l.width,l.height);Y.translate((l.width-W)/2,(l.height-Aa)/2);Y.fillStyle=g;Y.shadowColor="#333";Y.shadowBlur=10;Y.fillRect(0,-120,W,100);Y.fillRect(0,0,W,Aa);Y.shadowBlur=0;Y.font="52px serif";b=Y.measureText("LOST WORLDS");Y.fillStyle=J;Y.fillText("LOST WORLDS",(W-b.width)/2+1,-49);Y.fillStyle=I;Y.fillText("LOST WORLDS",(W-b.width)/2,-50);Y.font="16px sans";ca?(Y.fillText("Move right virtual-joystick to aim + move player",
50,45),Y.fillText("Hold left virtual-joystick to fire. Tap small one to change weapon",50,70)):(Y.fillText("W = forwards   S = backwards   LMB = shoot   C = change weapon",50,45),Y.fillText("Your player moves forwards towards the mouse",50,70));Y.font="24px sans";for(var c=0;c<k.length;++c){var s=k[c];Y.fillStyle=s.V;Y.fillRect(s.x,s.y,s.L,s.m);Y.fillStyle=J;b=Y.measureText(s.A);Y.fillText(s.A,s.x+(s.L-b.width)/2,s.y+s.m/2+10)}n.b=ha(xa-l.height/2-25,S-l.width/2)+D;Y.setTransform(1,0,0,1,0,0);Y.translate(l.width/
2,l.height/2-20);Y.beginPath();Y.arc(0,0,90,0,2*D);Y.fill();n.d(Y);Y.font="16px monospace";Y.fillStyle=I;Y.rotate(n.b-D/2);ca||(Y.fillText("W",-5,-30),Y.fillText("S",-5,32));Y.beginPath();Y.moveTo(0,-55);Y.lineTo(0,-80);Y.lineTo(-5,-75);Y.moveTo(5,-75);Y.lineTo(0,-80);Y.stroke();ca&&(Y.setTransform(1,0,0,1,0,0),Y.fillStyle=J,Xa());d=requestAnimationFrame(a)}function b(a){l.webkitRequestFullscreen&&l.webkitRequestFullscreen();l.mozRequestFullScreen&&l.mozRequestFullScreen();l.Z&&l.Z();l.requestFullscreen&&
l.requestFullscreen();a.A="WINDOW";a.k=c}function c(a){document.webkitExitFullscreen&&document.webkitExitFullscreen();document.mozCancelFullScreen&&document.mozCancelFullScreen();document.ba&&document.ba();document.exitFullscreen&&document.exitFullscreen();a.A="FULLSCREEN";a.k=b}var d=requestAnimationFrame(a),k=[];k.push({x:225,y:300,L:250,m:50,V:"#333",A:"START",k:function(){cancelAnimationFrame(d);ma()}});if(l.webkitRequestFullscreen||l.mozRequestFullScreen||l.Z||l.requestFullscreen)k.push({x:50,
y:300,L:250,m:50,V:"#555",A:"FULLSCREEN",k:b}),k[0].x=400;var g=Y.createRadialGradient(W/2,Aa/2,0,W/2,Aa/2,W);g.addColorStop(0,"#DAE9C9");g.addColorStop(1,"#7FB83A");l.onclick=function(a){var b=a.clientX-(l.width-W)/2;a=a.clientY-(l.height-Aa)/2;for(var c=0;c<k.length;++c){var d=k[c];if(b>=d.x&&a>=d.y&&b<=d.x+d.L&&a<=d.y+d.m){d.k(d);break}}}})();function ta(){p=$(-C.u,C.v);q=C.u;1.5<$(1,2)&&(q=-q);Ua();ob||(nb=performance.now(),requestAnimationFrame(pb));ob=e};
