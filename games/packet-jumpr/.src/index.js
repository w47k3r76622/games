var JLP=function(){"use strict";class t{constructor(t,s){this.isOff=!1,this.draw=()=>{},this.accumulator=0,this.delta=1e3/60,this.step=1/60,this.last=0,this.dt=0,this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.l=s}setup(){this.l.start(this.getFeatures()),this.draw=()=>{if(this.animLoop=window.requestAnimationFrame(this.draw),this.now=performance.now(),this.dt=this.now-this.last,this.last=this.now,!(this.dt>1e3))for(this.accumulator+=this.dt;this.accumulator>=this.delta;)this.l.update(this.getFeatures()),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.l.render(this.getFeatures()),this.accumulator-=this.delta}}getFeatures(){return{dt:this.step,canvas:this.canvas,ctx:this.ctx,on:()=>this.on(),off:()=>this.off()}}on(){this.isOff&&(this.isOff=!1),this.draw()}off(){this.isOff=!0,window.cancelAnimationFrame(this.animLoop)}}class s{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.radius=0,this.fillStyle="#0f0",this.strokeStyle="#00f",this.lineWidth=0,this.vx=0,this.vy=0,this.friction=0,this.bounce=0,this.accX=0,this.accY=0,this.rotation=0,this.text="",this.shared={},this.isHidden=!1}collideWith(t){const s=this.x+this.width<t.x,i=this.x>t.x+t.width,e=this.y+this.height<t.y,h=this.y>t.y+t.height;return!(s||i||e||h)}toggle(){this.isHidden?this.isHidden=!1:this.isHidden=!0}}function i(t,s){const i=s.ctx;i.save(),i.filter=t.filter,i.fillStyle=t.fillStyle,i.translate(t.x,t.y),i.rotate(t.rotation),i.fillRect(0,0,t.width,t.height),t.strokeStyle&&(i.lineWidth=t.lineWidth,i.strokeStyle=t.strokeStyle,i.strokeRect(0,0,t.width,t.height)),i.restore()}function e(t,s){const i=s.ctx;i.save(),i.beginPath(),i.font=t.font,i.strokeStyle=t.strokeStyle,i.fillStyle=t.fillStyle,i.fillText(t.text,t.x,t.y),t.strokeStyle&&(i.lineWidth=t.lineWidth,i.strokeStyle=t.strokeStyle,i.strokeText(t.text,t.x,t.y)),i.restore()}class h{constructor(){this.events={},this.pattern=/([a-z]+)\.?(.*)?/,this.isUndefined=t=>void 0===t}on(t,s,i){const e=s.match(this.pattern);if(!this.isUndefined(e)){this.events[s]=function(t){i.call(this,t)};let h=e[1];t.addEventListener(h,this.events[s],!1)}}off(t,s){const i=this.events[s],e=s.match(this.pattern);if(!this.isUndefined(e)&&!this.isUndefined(i)){let s=e[1];t.removeEventListener(s,i,!1)}}once(t,s,i){const e=s.match(this.pattern),h=this;if(!this.isUndefined(e)){this.events[s]=function(e){i.call(this,e),h.off(t,s)};var n=e[1];t.addEventListener(n,this.events[s],!1)}}}function n(t,s){const i=t.getBoundingClientRect();return{x:s.clientX-i.left,y:s.clientY-i.top}}function r(t,s){return t.x>s.x&&t.x<s.x+s.width&&t.y>s.y&&t.y<s.y+s.height}class c extends s{constructor(){super(...arguments),this.isHidden=!1,this.label={fillStyle:"#00416d",font:"30px Arial, sans-serif"},this.eventHandler=new h,this.events={},this.fillStyle="#f8bd7f"}start(t){this.canvas=t.canvas,this.isHidden||this.subscribe(t.canvas)}update(t){this.isHidden||this.subscribe(t.canvas)}render(t){this.isHidden||(i(this,t),e(this.label,t))}hide(){this.isHidden||(this.isHidden=!0,this.off(this.canvas))}show(){this.isHidden&&(this.isHidden=!1,this.subscribe(this.canvas))}on(t,s){return this.events[t]=s,this}subscribe(t){var s=this,i={};for(var e in i["mousedown."+this.id]=function(i){r(n(t,i),this)&&s.triggerEvent("pressed",this,[i])},i["mouseup."+this.id]=function(t){s.triggerEvent("unpressed",this,[t])},i["click."+this.id]=function(i){r(n(t,i),s)&&(s.triggerEvent("click",this,[i]),s.triggerEvent("unpressed",this,[i]))},i["mousemove."+this.id]=function(i){const e=n(t,i);t.classList.remove("cursor"),r(e,s)&&(t.classList.add("cursor"),s.triggerEvent("mouseinside",this,[i]))},i["keyup."+this.id]=function(t){s.triggerEvent("keyup",this,[t]),s.triggerEvent("unpressed",this,[t])},i)this.eventHandler.on(document,e,i[e])}off(t){["mousedown","mouseup","click","mousemove","keyup"].forEach(t=>{this.eventHandler.off(document,`${t}.${this.id}`)}),t.classList.remove("cursor")}triggerEvent(t,s,i){void 0!==this.events[t]&&this.events[t].apply(s,i)}}var d;!function(t){t[t.ARROW_UP=38]="ARROW_UP",t[t.ARROW_DOWN=40]="ARROW_DOWN",t[t.ENTER=13]="ENTER",t[t.ESC=27]="ESC",t[t.SBAR=32]="SBAR"}(d||(d={}));const l=[{title:"PACKET JUMPR",ml:-190,desc:"Use the mouse and click on the canvas",mml:-340,opts:[{l:"START",k:d.ENTER,w:180}]},{title:"Take a Breath!",ml:-170,desc:"",mml:-240,opts:[{l:"RESTART",k:d.ENTER,w:150},{l:"CONTINUE",k:d.ESC,w:130}]},{title:"❌ 404 ❌",ml:-150,desc:"Max Score:",mml:-110,opts:[{l:"PLAY AGAIN",k:d.ENTER,w:100}]},{title:"Sweet! You Win 🙌 ",ml:-210,desc:"Perfect 💯",mml:-90,opts:[{l:"PLAY AGAIN!",k:d.ENTER,w:100}]}];var a=new class extends s{constructor(){super(...arguments),this.startBtn=new c,this.isHidden=!1,this.comps=[],this.cbs={},this.scLs=[]}start(t){this.width=t.canvas.width,this.height=t.canvas.height-50,this.y=80,this.fillStyle="#ffffffcc",this.comps=l.map((s,i)=>{const e={text:s.title};e.y=this.height/2-100,e.x=this.width/2+s.ml,e.font="50px Arial, sans-serif",2==i&&(e.font="60px Arial, sans-serif",e.fillStyle="#F03A17",e.strokeStyle="#000",e.lineWidth=2);const h={text:s.desc};h.y=e.y+60,h.x=this.width/2+s.mml,h.font="40px Arial, sans-serif";return{title:e,desc:h,btns:s.opts.map((s,e)=>{const h=new c;return h.id=`${i}${e}`,h.width=280,h.height=60,h.x=this.width/2-h.width/2,h.y=this.height/2+80*(e+1),h.label.text=""+s.l,h.label.y=10+h.y+h.height/2,h.label.width=s.w,h.label.x=h.x+s.w/2,void 0!==this.cbs["c"+h.id]&&h.on("click",this.cbs["c"+h.id]),void 0!==this.cbs["ku"+h.id]&&h.on("keyup",t=>{s.k==t.keyCode&&this.cbs["ku"+h.id](t)}),h.start(t),h})}})}update(t){this.isHidden||null==this.active?this.comps.forEach(t=>{t.btns.forEach(t=>t.hide())}):this.getComp().btns.forEach(t=>t.show())}render(t){this.isHidden||(i(this,t),e(this.getComp().title,t),e(this.getComp().desc,t),this.scLs.forEach(s=>e(s,t)),this.getComp().btns.forEach(s=>s.render(t)))}show(t,s=[]){this.scLs=[],s.length>0&&(this.scLs=s.map((t,s)=>{var i={};this.fillStyle="#ffffffcc",i.font="40px Arial, sans-serif",i.x=this.width/2-100,i.y=this.height/2+50*(s+1)-40;return i.text=`${["Bricks","URLs"][s]} : ${t}`,i})),this.active=t,this.isHidden=!1}clear(){this.isHidden=!0,this.active=void 0}getComp(){return this.comps[this.active]}};class o extends s{constructor(){super(...arguments),this.maxAccY=30,this.maxVY=-15}start(t){this.width=30,this.height=30,this.fillStyle="#fff",this.lineWidth=2,this.strokeStyle="#000",this.x=20,this.y=50,this.bounce=-1,this.accY=.1}update(t){this.accY>this.maxAccY&&(this.accY=this.maxAccY),this.vy<this.maxVY&&(this.vy=this.maxVY),this.vy+=t.dt*this.accY,this.y+=this.vy}render(t){i(this,t)}}const f={int:(t,s)=>Math.floor(Math.random()*(s-t+1))+t,fromArray:t=>t[Math.floor(f.int(0,t.length-1))]};class u extends s{constructor(){super(...arguments),this.x=0,this.y=0,this.fillStyle="#ffffff",this.strokeStyle="#ff000000",this.lineWidth=0,this.width=0,this.height=30,this.label={fillStyle:"#00416d",font:"30px Arial, sans-serif"}}start(t){}update(t){const s=t.ctx.measureText(this.label.text).width;this.label.x=this.x+this.width/2-2*s,this.label.y=this.y+25,this.label.width=this.width,this.label.height=this.height}render(t){i(this,t),e(this.label,t)}}class v extends s{constructor(){super(...arguments),this.d=[0,0,0,0,0,0,0],this.won=!1,this.bricks=[],this.numBricks=3}start(t){this.width=t.canvas.width,this.height=t.canvas.height/2+10,this.x=20,this.y=t.canvas.height-this.height,this.lineWidth=1,this.ll=this.gtLsLength(),this.generateBricks(t)}update(t){this.x+=this.vx,this.d[2]!=this.ll?(this.d[4]==this.ls[this.d[3]].length&&(this.ll-this.d[4]>1&&(this.d[5]=0,this.d[3]++),this.d[4]=0),this.bricks.forEach((s,i)=>{if(s.vx=t.dt*this.vx,s.x+=s.vx,s.x+s.width<=0){this.bricks.splice(i,1);var e=this.d[0]+(0==this.d[1]?this.numBricks:0);this.ls[this.d[1]].length==e&&this.ll-(this.d[2]+this.numBricks)>1&&(e=0,this.d[0]=0,this.d[1]++),void 0!==this.ls[this.d[1]][e]&&this.appendBrick(t,this.bricks[this.bricks.length-1],this.ls[this.d[1]][e]),this.d[0]++,this.d[2]++,this.d[4]++,this.d[5]++}s.update(t)})):this.won=!0}render(t){this.bricks.forEach(s=>{s.render(t)})}collidesWithBrick(t){return this.bricks.find(s=>!0===s.collideWith(t))}generateBricks(t){for(let i=0;i<this.numBricks;i++){var s=this.getNewBrick(t,void 0,this.ls[this.d[1]][i]);if(s.x=20,this.bricks.length>0){let e=this.bricks[i-1];s=this.getNewBrick(t,e,this.ls[this.d[1]][i])}this.bricks.push(s)}}appendBrick(t,s,i){this.bricks.push(this.getNewBrick(t,s,i))}getNewBrick(t,s,i){let e=new u;return e.width=f.fromArray([40,60]),e.y=3*t.canvas.height/4+f.int(-100,100),s&&(e.x=s.x+s.width+f.int(200,280)),e.label.text=i.toUpperCase(),e.start(t),e}gtLsLength(){return this.ls.reduce((t,s)=>t+s.length,0)}}class g extends s{constructor(){super(...arguments),this.isPressed=!1,this.evtHandler=new h,this.box=new o,this.bricks=new v,this.isOff=!1,this.isOut=!1,this.won=!1,this.ls=[],this.d=[0,0,0]}start(t){this.bricks.ls=this.ls,this.box.start(t),this.bricks.start(t),this.off(t.canvas)}update(t){this.d=this.bricks.d,this.isOff||(this.box.update(t),this.bricks.update(t),this.box.y>t.canvas.height&&(this.won=this.bricks.won,this.isOut=!0),this.isPressed||(this.box.accY-=10*Math.sin(30),this.bricks.vx=0),this.isPressed&&(this.bricks.vx=-900),this.bounceBox())}render(t){this.isOff||this.isOut||(this.box.render(t),this.bricks.render(t))}pause(t){this.isOff=!0,this.off(t.canvas)}resume(t){this.isOff=!1,this.on(t.canvas),t.on()}restart(t){this.box=new o,this.bricks=new v,this.isOut=!1,this.isOff=!1,this.won=!1,this.bricks.d[2]=0,this.start(t),this.on(t.canvas)}on(t){this.evtHandler.on(t,"mousedown",()=>{this.isPressed=!0}),this.evtHandler.on(t,"mouseup",()=>{this.isPressed=!1}),this.evtHandler.on(document,"keydown",t=>{t.keyCode==d.SBAR&&(this.isPressed=!0)}),this.evtHandler.on(document,"keyup",t=>{t.keyCode==d.SBAR&&(this.isPressed=!1)})}off(t){this.evtHandler.off(t,"mousedown"),this.evtHandler.off(t,"mouseup"),this.evtHandler.off(document,"keydown"),this.evtHandler.off(document,"keyup")}bounceBox(){let t=this.bricks.collidesWithBrick(this.box);t&&(this.box.y=t.y-(this.box.height+this.box.lineWidth),this.box.vy*=this.box.bounce,t.fillStyle="#0dfff0",this.bricks.ll==this.bricks.d[2]+1&&(this.won=!0))}}class x extends s{constructor(){super(...arguments),this.boxUrl={x:10,y:10,fillStyle:"#fff",height:60,font:"30px Arial, sans-serif"},this.url={x:20,y:50,fillStyle:"#000",width:300,height:60,font:"30px Arial, sans-serif"},this.bricks={y:50,fillStyle:"#000",font:"30px Arial, sans-serif"},this.urls={y:50,fillStyle:"#00416d",font:"30px Arial, sans-serif"},this.fc={y:50,fillStyle:"#fff",width:50,height:60,font:"40px Arial, sans-serif"},this.v=[0,0,0,""]}start(t){const s=t.canvas.width;this.boxUrl.width=s-80,this.bricks.x=s-400,this.urls.x=s-210,this.fc.x=s-60}update(t){this.url.text="https://"+(this.v[0]||"--"),this.bricks.text="Bricks: "+(this.v[1]||"--"),this.urls.text="URLs: "+(this.v[2]||"--"),this.fc.text=""+(this.v[3]||"🙂")}render(t){i(this.boxUrl,t),e(this.fc,t),e(this.url,t),e(this.urls,t),e(this.bricks,t)}}class p extends s{constructor(){super(...arguments),this.evtHandler=new h,this.gs=new g,this.v=new x,this.ksc="jlp"}start(t){this.gs.ls=(t=>{var s=[];const i=["abazio","yaloo","waytags","linkverse","jumppulse","quifi","tweetpulse"],e=["com","gov","org"];for(var h=0;h<t;h++)s.push(`${i[f.int(0,i.length-1)]}.${e[f.int(0,e.length-1)]}`);return s})(f.int(5,10)),this.gs.start(t),this.v.start(t),a.cbs.c00=()=>{a.clear(),this.gs.resume(t)},a.cbs.ku00=a.cbs.c00,a.cbs.c10=()=>{a.clear(),this.gs.restart(t)},a.cbs.ku10=a.cbs.c10,a.cbs.c11=a.cbs.c00,a.cbs.c20=a.cbs.c10,a.cbs.ku20=a.cbs.c20,a.cbs.c30=a.cbs.c10,a.cbs.ku30=a.cbs.c10,a.start(t),a.show(0),this.evtHandler.on(window.document,"keyup",s=>{if(d.ESC==s.keyCode&&-1==[0,2].indexOf(a.active)){if(this.gs.isOff)return this.gs.resume(t),void a.clear();a.show(1),this.gs.pause(t)}})}update(t){return this.v.v=[this.gs.ls[this.gs.d[3]],this.gs.d[2],this.gs.d[3]],this.gs.isPressed&&(this.v.v[3]="😮",this.v.update(t)),this.gs.won?(this.v.v=[this.gs.ls[this.gs.d[3]],this.gs.d[2]+1,this.gs.d[3]+1,"🤩"],this.v.update(t),a.show(3),void a.update(t)):this.gs.isOut?(this.v.v[3]="😵",this.v.update(t),a.show(2,this.recMRAndResult()),void a.update(t)):(this.v.update(t),this.gs.update(t),void a.update(t))}render(t){this.gs.render(t),a.render(t),this.v.render(t)}recMRAndResult(){this.bsc=null==localStorage.getItem(this.ksc)?"[0,0]":localStorage.getItem(this.ksc);const t=JSON.parse(this.bsc);return this.gs.d[2]>t[0]&&localStorage.setItem(this.ksc,JSON.stringify([this.gs.d[2],this.gs.d[3]])),t[0]>this.gs.d[2]?[t[0],t[1]]:[this.gs.d[2],this.gs.d[3]]}}return()=>{const s=new t("c",new p);s.setup(),s.on()}}();
