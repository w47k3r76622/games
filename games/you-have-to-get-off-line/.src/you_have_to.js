!function(){var o=function(){var O,F,G=44100,J=G*K.songLen;function N(t){return Math.sin(6.283184*t)}function j(t){return N(t)<0?-1:1}function W(t){return t%1-.5}function H(t){var e=t%1*4;return e<2?e-1:3-e}function U(t){return.00390625*Math.pow(1.059463094,t-128)}!function(){var t=Math.ceil(Math.sqrt(2*J/2)),e=document.createElement("canvas").getContext("2d");O=e.createImageData(t,t).data;var o,n=e.createImageData(t,t).data;for(o=t*t*4-2;0<=o;o-=2)n[o]=0,n[o+1]=128;F=n}(),this.lps=G/K.rowLen,this.generate=function(t){var e,o,n,s,r,a,i,c,l,f,_,d,h,u,p,v,m,y,x,g,w,q,b=[N,j,W,H],k=O,M=F,P=J,E=2*J*2,I=K.songData[t],R=K.rowLen,L=b[I.lfo_waveform],C=b[I.osc1_waveform],S=b[I.osc2_waveform],A=I.env_attack,B=I.env_sustain,D=I.env_release,z=Math.pow(2,I.fx_pan_freq-8)/R,T=Math.pow(2,I.lfo_freq-8)/R;for(n=0;n<E;n+=2)k[n]=0,k[n+1]=128;for(s=i=0;s<K.endPattern-1;++s)for(c=I.p[s],r=0;r<32;++r){if(c&&(a=I.c[c-1].n[r]))for(l=f=0,w=U(a+12*(I.osc1_oct-8)+I.osc1_det)*(1+8e-4*I.osc1_detune),q=U(a+12*(I.osc2_oct-8)+I.osc2_det)*(1+8e-4*I.osc2_detune),_=I.fx_resonance/255,d=h=0,e=A+B+D-1;0<=e;--e){switch(v=L((o=e+i)*T)*I.lfo_amt/512+.5,m=1,e<A?m=e/A:A+B<=e&&(m-=(e-A-B)/D),p=w,I.lfo_osc1_freq&&(p+=v),I.osc1_xenv&&(p*=m*m),x=C(l+=p)*I.osc1_vol,p=q,I.osc2_xenv&&(p*=m*m),x+=S(f+=p)*I.osc2_vol,I.noise_fader&&(x+=(2*Math.random()-1)*I.noise_fader*m),x*=m/255,g=I.fx_freq,I.lfo_fx_freq&&(g*=v),h+=(g=1.5*Math.sin(3.141592*g/G))*(u=_*(x-h)-(d+=g*h)),I.fx_filter){case 1:x=u;break;case 2:x=d;break;case 3:x=h;break;case 4:x=d+u}p=N(o*z)*I.fx_pan_amt/512+.5,x*=39*I.env_master,y=k[o<<=2]+(k[o+1]<<8)+x*(1-p),k[o]=255&y,k[o+1]=y>>8&255,y=k[o+2]+(k[o+3]<<8)+x*p,k[o+2]=255&y,k[o+3]=y>>8&255}i+=R}for(s=I.fx_delay_time*R>>1,p=I.fx_delay_amt/255,a=0;a<P-s;++a)n=4*a,y=k[o=4*(a+s)]+(k[o+1]<<8)+(k[n+2]+(k[n+3]<<8)-32768)*p,k[o]=255&y,k[o+1]=y>>8&255,y=k[o+2]+(k[o+3]<<8)+(k[n]+(k[n+1]<<8)-32768)*p,k[o+2]=255&y,k[o+3]=y>>8&255;for(n=0;n<E;n+=2)y=M[n]+(M[n+1]<<8)+k[n]+(k[n+1]<<8)-32768,M[n]=255&y,M[n+1]=y>>8&255},this.createAudio=function(){var t,e,o,n,s,r,a,i,c=F,l=2*J*2;for(O=null,r=(s=l-8)-36,n=String.fromCharCode(82,73,70,70,255&s,s>>8&255,s>>16&255,s>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&r,r>>8&255,r>>16&255,r>>24&255),t=0;t<l;){for(o="",e=0;e<256&&t<l;++e,t+=2)i=(i=4*(c[t]+(c[t+1]<<8)-32768))<-32768?-32768:32767<i?32767:i,o+=String.fromCharCode(255&i,i>>8&255);n+=o}return a="data:audio/wav;base64,"+btoa(n),n=null,new Audio(a)},this.getData=function(t,e){for(var o=Math.floor(t*G),n=0,s=[],r=F;n<2*e;n+=2){var a=4*(o+n)+1;s.push(0<t&&a<r.length?(r[a]+r[a-1]/256)/256:.5)}return s}},K={songLen:37,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:3,osc2_oct:7,osc2_det:0,osc2_detune:7,osc2_xenv:0,osc2_vol:201,osc2_waveform:3,noise_fader:0,env_attack:789,env_sustain:1234,env_release:13636,env_master:191,fx_filter:2,fx_freq:5839,fx_resonance:254,fx_delay_time:6,fx_delay_amt:121,fx_pan_freq:6,fx_pan_amt:147,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:6,lfo_amt:195,lfo_waveform:0,p:[1,2,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,159,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:8,osc2_det:0,osc2_detune:18,osc2_xenv:1,osc2_vol:191,osc2_waveform:2,noise_fader:0,env_attack:3997,env_sustain:56363,env_release:1e5,env_master:255,fx_filter:2,fx_freq:392,fx_resonance:255,fx_delay_time:8,fx_delay_amt:69,fx_pan_freq:5,fx_pan_amt:67,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:4,lfo_amt:57,lfo_waveform:3,p:[1,2,1,2,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:60,env_attack:50,env_sustain:419,env_release:4607,env_master:130,fx_filter:1,fx_freq:10332,fx_resonance:120,fx_delay_time:4,fx_delay_amt:16,fx_pan_freq:5,fx_pan_amt:108,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:5,lfo_amt:187,lfo_waveform:0,p:[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147,0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:255,osc1_waveform:0,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:255,osc2_waveform:0,noise_fader:0,env_attack:50,env_sustain:150,env_release:4800,env_master:200,fx_filter:2,fx_freq:600,fx_resonance:254,fx_delay_time:0,fx_delay_amt:0,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:7,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:154,osc2_waveform:2,noise_fader:0,env_attack:2418,env_sustain:1075,env_release:10614,env_master:240,fx_filter:3,fx_freq:2962,fx_resonance:255,fx_delay_time:6,fx_delay_amt:117,fx_pan_freq:3,fx_pan_amt:73,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:5,lfo_amt:124,lfo_waveform:0,p:[0,0,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,147,0,152,0,157,0,0,0,159,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:1,osc2_oct:6,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:192,osc2_waveform:1,noise_fader:0,env_attack:137,env_sustain:2e3,env_release:4611,env_master:192,fx_filter:1,fx_freq:982,fx_resonance:89,fx_delay_time:6,fx_delay_amt:25,fx_pan_freq:6,fx_pan_amt:77,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:69,lfo_waveform:0,p:[1,2,1,3,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0,130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0]},{n:[123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0,123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0]},{n:[135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0,135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:3,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:255,osc2_waveform:0,noise_fader:127,env_attack:22,env_sustain:88,env_release:3997,env_master:255,fx_filter:3,fx_freq:4067,fx_resonance:234,fx_delay_time:4,fx_delay_amt:33,fx_pan_freq:2,fx_pan_amt:84,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:28,lfo_waveform:0,p:[0,0,1,2,1,2,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0,0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0]},{n:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,147,0,0,0,154,0,0,0,154,0]},{n:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,0,0,147,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:255,env_attack:140347,env_sustain:9216,env_release:133417,env_master:208,fx_filter:2,fx_freq:2500,fx_resonance:16,fx_delay_time:2,fx_delay_amt:157,fx_pan_freq:8,fx_pan_amt:207,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:2,lfo_amt:51,lfo_waveform:0,p:[0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]}],rowLen:5513,endPattern:9};if(!Element.prototype.requestFullscreen)try{Element.prototype.requestFullscreen=Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen||Element.prototype.webkitRequestFullscreen}catch(t){}"use strict";var a=new(function(){function t(){this.on=!0,this.sounds={}}return t.prototype.add=function(t,e,o){this.sounds[t]={tick:0,count:e,pool:[]};for(var n=0;n<e;++n){var s=new Audio;s.src=window.SOUND(o),this.sounds[t].pool.push(s)}},t.prototype.play=function(t){if(this.on){var e=this.sounds[t];e.pool[e.tick].play(),++e.tick>=e.count&&(e.tick=0)}},t}()),t=null!=navigator.userAgent.match(/Android|iPhone|iPad/i);function s(t,e,o){return t*(1-o)+e*o}t?a.on=!1:(a.add("bip",3,[1,,.1241,,.1855,.5336,,,,,,,,,,,,,1,,,.1,,.64]),a.add("jmp",4,[0,,.2086,,.2238,.3305,,.236,,,,,,.0687,,,,,.5894,,,.0532,,.5]),a.add("las",5,[0,,.2949,.2527,.3167,.6796,.2,-.2246,,,,,,.8584,-.586,,,,1,,,.2201,,.5]),a.add("hit",1,[1,,.2548,,.1007,.7539,.0996,-.5302,,,,,,.7769,-.4436,,,,1,,,,,.5]),a.add("end",1,[0,,.0108,.3989,.4412,.444,,,,,,.5147,.6024,,,,,,1,,,,,.5]));var n={37:{player:2,action:0},39:{player:2,action:1},38:{player:2,action:2},40:{player:2,action:3},65:{player:1,action:0},68:{player:1,action:1},87:{player:1,action:2},83:{player:1,action:3},32:{player:1,action:2}},i=[[],[!1,!1,!1,!1],[!1,!1,!1,!1]];function e(t,e){var o;e&&(t.altKey||t.ctrlKey||t.metaKey||t.repeat)||(o=n[t.keyCode])&&(i[o.player][o.action]=e)}document.body.addEventListener("keydown",function(t){return e(t,!0)}),document.body.addEventListener("keyup",function(t){return e(t,!1)}),document.body.addEventListener("mousedown",function(t){t.button||(t.preventDefault(),i[1][2]=!0)});var r=function(){var o=function(t){},n=function(t){},e=.02,s=-1,r=0;function a(t){for(requestAnimationFrame(a),-1==s&&(s=t),r+=.001*(t-s),s=t;0<r;)r-=e,o(e);n(r/e+1)}return function(t,e){o=t,n=e,requestAnimationFrame(a)}}(),c=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.set=function(t,e){this.x=t,this.y=e},t.prototype.setTo=function(t){this.x=t.x,this.y=t.y},t.prototype.copy=function(){return new t(this.x,this.y)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t}(),h=960,u=540,l=16/9,f=1,_=document.getElementById("container"),d=document.getElementById("bcanvas"),p=document.getElementById("canvas"),v=d.getContext("2d"),m=p.getContext("2d"),y="transform";function x(t,e,o){t.style[e]=o+"px"}function g(){var t=innerWidth,e=innerHeight;l<t/e?t=e*l:e=t/l,f=h/t,x(_,"width",t),x(_,"height",e),x(_,"left",.5*(innerWidth-t)),x(_,"top",.5*(innerHeight-e));var o=.5*t/h,n="scale3d("+o+","+o+",1)";U.style[y]=n}function w(t,e){t.font=e+"px 'Segoe UI','Helvetica Neue',sans-serif"}function q(t,e,o){var n=o-25,s=n+16,r=s+16,a=t.measureText(e).width,i=.5*(h-a);t.beginPath(),t.moveTo(i,n),t.lineTo(h-i,n),t.quadraticCurveTo(h-i+16,n,h-i+16,s),t.quadraticCurveTo(h-i+16,r,h-i,r),t.lineTo(i,r),t.quadraticCurveTo(i-16,r,i-16,s),t.quadraticCurveTo(i-16,n,i,n),t.fillStyle="rgba(0,0,0,0.5)",t.fill(),t.fillStyle="#fff",t.fillText(e,.5*h,o,900)}y in _.style||(y="webkitTransform"),d.width=p.width=h,d.height=p.height=u,addEventListener("resize",g),addEventListener("orientationchange",g),p.addEventListener("contextmenu",function(t){t.preventDefault()}),p.addEventListener("touchstart",function(t){t.preventDefault(),i[2][2]=!0}),v.textAlign=m.textAlign="center";var b,k=new c(60,160),M=function(){function t(){this.dead=!1,this.doubleJump=!1,this.nDeaths=0,this.onGround=!1,this.pos=k.copy(),this.prevPos=k.copy(),this.r=20,this.velocity=new c(0,0)}return t.prototype.restart=function(){this.dead=!1,this.doubleJump=!1,this.onGround=!1,this.pos=k.copy(),this.prevPos=k.copy(),this.velocity.set(0,0)},t.prototype.standOn=function(t){this.doubleJump=!0,this.onGround=!0,this.pos.y=t-this.r,this.velocity.x=7,this.velocity.y=0},t.prototype.kill=function(){this.dead=!0,this.velocity.x*=.5,this.velocity.y<0&&this.velocity.y},t.prototype.update=function(t,e){if((i[1][2]||i[2][2])&&!this.dead&&(this.onGround?(this.onGround=!1,this.velocity.y=-900*t,a.play("jmp")):this.doubleJump&&(this.doubleJump=!1,this.velocity.y=-900*t,a.play("jmp")),i[1][2]=i[2][2]=!1),this.prevPos.setTo(this.pos),this.velocity.y+=48*t,this.pos.add(this.velocity),this.pos.x>B-this.r&&!this.dead)return!0;if(!this.dead){var o=e.getFloor(this.pos.x-this.r,this.pos.x+this.r),n=o[0],s=o[1];this.pos.y>=n-this.r&&this.prevPos.y<=n-this.r?this.standOn(n):this.pos.y>=s-this.r&&this.prevPos.y<=s-this.r?this.standOn(s):this.onGround=!1}if(this.pos.y>u+this.r)return++this.nDeaths,e.reset(),this.restart(),void a.play("bip");if(!this.dead){var r=e.getWall(this.pos.x+this.r,this.pos.y+this.r);this.pos.x>r-this.r&&(this.pos.x=r-this.r)}},t.prototype.render=function(t,e){var o=s(this.prevPos.x,this.pos.x,e),n=s(this.prevPos.y,this.pos.y,e);t.fillStyle=this.dead?"#90a4ae":"#fff",t.fillRect(o-this.r,n-this.r,40,40),t.fillStyle=this.dead?"#607d8b":"#bdbdbd",t.fillRect(o,n-10,4,10),t.fillRect(o+10,n-10,4,10)},t}(),P=this&&this.__extends||(b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),E=["#ffdc26","#fdec4a","#fff699","#fffee6"],I=function(){function t(t,e){this.activation=t,this.end=t+.4+.82,this.killing=!1,this.paletteIndex=0,this.r=60,this.rPrev=this.r,this.t=0,this.y=e,this.a=1/.24,this.b=this.end/.24,this.sound=!0}return t.prototype.reset=function(){this.killing=!1,this.paletteIndex=0,this.r=60,this.rPrev=this.r,this.t=0,this.sound=!0},t.prototype.kills=function(t){return this.killing&&!t.dead&&Math.abs(this.y-t.pos.y)<this.r+t.r},t.prototype.update=function(t){var e,o,n;this.t+=t,this.killing=this.t>this.activation+.4&&this.t<this.end,this.rPrev=this.r,this.r=60*(e=-this.a*this.t+this.b,n=1,e<(o=0)?o:n<e?n:e)},t.prototype.render=function(t,e){if(this.paletteIndex=(this.paletteIndex+1)%4,!(this.t<this.activation||this.t>this.end))if(this.t<this.activation+.4){if(2&this.paletteIndex)return;t.fillStyle="#ff1507",this._paintPrefire(t)}else{var o=s(this.rPrev,this.r,e);t.fillStyle=E[this.paletteIndex],this._paint(t,o),this.sound&&(this.sound=!1,a.play("las"))}},t.prototype._paint=function(t,e){t.fillRect(0,this.y-e,h,2*e)},t.prototype._paintPrefire=function(t){t.fillRect(0,this.y-1,h,3)},t}(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.kills=function(t){return this.killing&&!t.dead&&Math.abs(this.y-t.pos.x)<this.r+t.r},e.prototype._paint=function(t,e){t.fillRect(this.y-e,0,2*e,u)},e.prototype._paintPrefire=function(t){t.fillRect(this.y-1,0,3,u)},e}(I),L=-255,C=[{title:"You Are Now Entering",cols:[60,60,60,60,60,60,60,60,60,40,40,20,20,0,0,0,0,0,0,0,0,0],lasers:[],ez:!0},{title:"Jump Around",cols:[0,0,0,0,0,0,0,0,L,L,L,L,L,L,0,0,0,0,0,0,0,0],lasers:[],ez:!0},{title:"Double Jump",cols:[0,0,0,0,0,0,0,0,0,0,310,310,0,0,0,0,0,0,0,0,0,0],lasers:[],ez:!0},{title:"Beware Laser Beam",cols:[0,0,0,0,0,0,0,0,0,0,0,0,140,140,0,0,0,0,0,0,0,0],lasers:[{act:1.05,pos:60}],ez:!0},{title:"You Are Now Leaving",cols:[0,0,0,0,0,0,0,0,0,20,20,40,40,60,60,60,60,60,60,60,60,60],lasers:[{act:2.9,pos:60}],ez:!0},{title:"Chill",cols:[0,0,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0],lasers:[{act:1.2,pos:440,v:!0}]},{title:"Obstacle Race",cols:[0,0,0,0,L,L,150,0,0,0,0,L,L,200,0,0,0,0,L,L,300,0],lasers:[]},{title:"Bunny Hop",cols:[0,0,0,0,0,140,0,0,0,0,0,0,140,0,0,0,0,0,0,140,0,0],lasers:[{act:2.9,pos:60},{act:2.65,pos:260},{act:1.85,pos:260},{act:1.05,pos:260}]},{title:"Mind the Gap",cols:[0,0,0,0,0,L,L,L,L,L,L,L,L,L,L,L,L,0,0,0,0,0],lasers:[{act:1.05,pos:260}]},{title:"Boost",cols:[0,0,0,0,0,0,20,20,20,20,0,0,0,0,330,330,0,0,0,0,0,0],lasers:[{act:3.6,pos:60},{act:2.9,pos:60},{act:1.7,pos:500,v:!0}]},{title:"Unchill",cols:[0,0,0,0,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,0,0],lasers:[{act:2.9,pos:60},{act:1.1,pos:400,v:!0}]},{title:"Jump Start",cols:[0,0,0,0,0,0,0,0,0,L,L,L,L,0,0,0,0,0,0,0,0,0],lasers:[{act:.4,pos:60}]},{title:"You Are Now Ascending",cols:[0,0,20,20,40,40,60,60,80,80,100,100,120,120,140,140,160,160,180,180,200,200],lasers:[{act:1.8,pos:120},{act:1.1,pos:80}]},{title:"Back Up",cols:[200,200,200,200,L,L,L,L,L,L,L,L,120,120,140,140,160,160,180,180,200,200],lasers:[{act:1.28,pos:640,v:!0},{act:.88,pos:380},{act:.48,pos:260}]},{title:"Never Changes",cols:[80,80,80,80,80,80,80,80,80,0,0,0,0,80,80,80,80,80,80,80,80,80],lasers:[{act:3.6,pos:140},{act:2,pos:140},{act:1.2,pos:140}],ez:!0},{title:"Written for js13kGames–2018",cols:[200,200,180,180,160,160,140,140,120,120,100,100,80,80,60,60,40,40,20,20,0,0],lasers:[{act:1.2,pos:60}],ez:!0},{title:"EOL (End of Line)",cols:[0,0,0,0,0,0,0,0,500,500,500,500,500,500,500,500,500,500,500,500,500,500],lasers:[],ez:!0,render:function(t){t.clearRect(A+80,0,h,u),t.fillStyle="#fff",t.beginPath(),t.arc(A+80,S+2,5,0,2*Math.PI),t.fill()},renderBackground:function(t){w(t,25),q(t,"Congratulations!",S-15),w(t,18),q(t,"(Reload the page to start a new game)",S+22)}},{title:"",cols:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lasers:[],ez:!0}],S=440,A=.5*(h-880),B=A+880,D=40,z=function(){function t(t){var e,o,n,s;this.columns=t.cols,this.lasers=t.lasers.map(function(t){return new(t.v?R:I)(t.act,t.v?A+t.pos:S-t.pos)}),this.staticImage=(e=h,o=u,n=this.renderOnce.bind(this),(s=document.createElement("canvas")).width=e,s.height=o,n(s.getContext("2d")),s),t.render&&t.render(this.staticImage.getContext("2d")),function(s,t,e){s.clearRect(0,0,h,u);for(var r=310,o=[],n=(.03*Math.random()-.03*Math.random())*Math.PI,a=-250;a<=250;a+=10)for(var i=-250;i<=250;i+=10)Math.sqrt(a*a+i*i),o.push({x:a*Math.cos(n)-i*Math.sin(n),y:3*Math.random()+60,z:a*Math.sin(n)+i*Math.cos(n)});function c(t){var e=r/(r+t.z),o=t.x*e+.5*h,n=t.y*e+.5*(u-S);o<0||h<o||n<0||u<n||s.lineTo(o,n)}s.fillStyle=s.strokeStyle=e?"#32fa05":"#18ffff";for(var l=0;l<51;++l){s.beginPath();for(var f=0;f<51;++f)c(o[51*l+f]);s.stroke()}for(f=0;f<51;++f){for(s.beginPath(),l=0;l<51;++l)c(o[51*l+f]);s.stroke()}for(var _=0;_<200;++_){a=Math.random()*h;var d=80*Math.random();s.fillStyle="rgba("+Math.round(100*Math.random())+"155,"+Math.round(100*Math.random())+"155,"+Math.round(100*Math.random())+"155,"+Math.random()+")",s.beginPath(),s.arc(a,d,Math.random()+.5,0,2*Math.PI),s.fill()}t&&(w(s,25),q(s,'"'+t+'"',48))}(v,t.title,t.ez),t.renderBackground&&t.renderBackground(v)}return t.prototype.getFloor=function(t,e){var o=S-this.columns[Math.floor((t-A)/D)],n=S-this.columns[Math.floor((e-A)/D)];return o<n?[o,n]:[n,o]},t.prototype.getWall=function(t,e){var o=Math.floor((t-A)/D);return e>S-this.columns[o]?A+o*D:t},t.prototype.reset=function(){for(var t=0;t<this.lasers.length;++t)this.lasers[t].reset()},t.prototype.kills=function(t){for(var e=0;e<this.lasers.length;++e)if(this.lasers[e].kills(t))return!0;return!1},t.prototype.update=function(t){for(var e=0;e<this.lasers.length;++e)this.lasers[e].update(t)},t.prototype.render=function(t,e){t.drawImage(this.staticImage,0,0);for(var o=0;o<this.lasers.length;++o)this.lasers[o].render(t,e)},t.prototype.renderOnce=function(t){for(var e=0;e<22;++e){var o=A+e*D;if(this.columns[e]==L)t.fillStyle="#fff",0!=e&&this.columns[e-1]!=L&&(t.fillRect(o-2,S+4,2,36),t.fillRect(o-2,S+55,2,20),t.fillRect(o-2,S+90,2,10)),21!=e&&this.columns[e+1]!=L&&(t.fillRect(o+D,S+4,2,36),t.fillRect(o+D,S+55,2,20),t.fillRect(o+D,S+90,2,10));else{var n=S-this.columns[e];t.fillStyle="#fff",t.fillRect(o,S,D,4),t.fillStyle="#f1f1f1",t.fillRect(o,n,D,this.columns[e])}}},t}(),T=new M,O=17,F=new z(C[O]),G=.09,J=.04;function N(t){if(T.update(t,F))return O!=C.length-1&&++O,F=new z(C[O]),T.restart(),void a.play("end");F.update(t),F.kills(T)&&(T.kill(),a.play("hit"))}function j(t){m.clearRect(0,0,h,u),m.save();var e=s(T.prevPos.x,T.pos.x,t),o=s(T.prevPos.y,T.pos.y,t);m.translate((.5*h-e)*G,(.5*u-o)*J),F.render(m,t),T.render(m,t),m.restore(),T.nDeaths&&(w(m,20),q(m,"Deaths: "+T.nDeaths,500))}var W=null;if(!t)try{!function(){for(var t=new o,e=0;e<8;++e)t.generate(e);(W=t.createAudio()).loop=!0,W.volume=.7}()}catch(t){}var H=document.getElementById("load"),U=document.getElementById("home"),Y=document.getElementById("start");function Q(){_.removeChild(U),F=new z(C[O=0]),(t||1<f)&&document.body.requestFullscreen&&document.body.requestFullscreen(),r(N,j),a.play("bip")}Y.addEventListener("mousedown",Q),Y.addEventListener("touchstart",Q),g(),function(){t&&(document.body.className="mobile");var e=document.getElementById("m"),o=document.getElementById("s");e.checked=!(o.checked=!0),e.addEventListener("change",function(t){W&&(e.checked?(W.currentTime=0,W.play()):W.pause())}),o.addEventListener("change",function(t){(a.on=o.checked)&&a.play("bip")}),_.removeChild(H)}()}();