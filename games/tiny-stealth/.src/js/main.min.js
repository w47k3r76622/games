!function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=(e("./core"),e("./_t2")),s=e("./sat/SAT.js"),a=function(){function e(t){r(this,e),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.active=t.active||!0,this.visible=t.visible||!0,this._a=new o.Vector2(this.x,this.y),this._g=new o.Vector2(0,0),this.colliding=!1,this.shape=new s.Box(new s.Vector(this.x,this.y),this.width,this.height).toPolygon()}return n(e,[{key:"draw",value:function(){}},{key:"update",value:function(){}}]),e}();i.BasicObject=a},{"./core":4,"./sat/SAT.js":12,"./_t2":14}],2:[function(e,t,i){"use strict";function r(e,t,i,r){var o=i+n._e._f.x-(e+n._e._f.x),s=r+n._e._f.y-(t+n._e._f.y);return Math.atan2(s,o)}Object.defineProperty(i,"__esModule",{value:!0}),i.angle=r;var n=e("./core")},{"./core":4}],3:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function(e,t,i){for(var r=!0;r;){var n=e,o=t,s=i;a=l=h=void 0,r=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,r=!0}},a=e("./rectangle"),h=(e("./_t2"),function(e){function t(e,i,n,o){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,i,n,o),this.follow=null,this._fMaxY=0,this.normalizedByMapHeight=0,this._i=0,this._shake=0,this.sd=0}return n(t,e),o(t,[{key:"_o",value:function(){this._fMaxY=0,this.normalizedByMapHeight=0,this._i=0,this.x=0,this.y=0}},{key:"setObjectToFollow",value:function(e){this.follow=e}},{key:"shake",value:function(e){this.sd=e,this._shake=e}},{key:"update",value:function(){null!=this.follow&&(this.y+=.05*(this.follow.y-(this.y+this.h/3))>>0),this.x+=.5*(this._shake-this.x)>>0,this.y>this._fMaxY&&(this._fMaxY=this.y),this._i=this.y/384>>0,this._j=(this.y+this.h)/384>>0,this.sd>0?this._shake<=0?this._shake=this.x=0:this._shake+=.4*(-1-this._shake):this._shake>=0?this._shake=this.x=0:this._shake+=.4*(1-this._shake),this.y=Math.max(this._fMaxY,this.y)}}]),t}(a.Rectangle));i.Camera=h},{"./rectangle":11,"./_t2":14}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={};i._e=r;var n=e("pathfinding");r._s=null,r.canvas=null,r.screen=null,r._f=null,r.keys=[],r.maps=[],r.mouse=[],r._n=null,r.pathfinderGrid=new n.Grid(15,48),r.pathfinder=new n.AStarFinder,r._oGame=null,r.pause=!1,r.highScore=0,r.timeHolder=1,r.lastMapIndex=0,r.colors={b:"#21313E",rb:"rgba(33,49,62, 0.7)",bm:"#BF9FD4",w:"#F6BAF7",p:"#268073",pb:"#20575F",e:"#793E1D",eb:"#4D1F14"}},{pathfinding:21}],5:[function(e,t,i){"use strict";function r(e,t,i,r){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-r,2))}Object.defineProperty(i,"__esModule",{value:!0}),i.distance=r},{}],6:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e("./core"),s=e("./_t2"),a=e("./_f"),h=e("./mouse"),l=e("./keys"),c=function(){function e(t){r(this,e),this.screen={size:new s.Vector2(t.screen.size.x,t.screen.size.y),center:t.screen.center,background:t.screen.background},this.containerID=t.containerID,this.setUp(),o._e.screen=this.screen}return n(e,[{key:"setUp",value:function(){this.container=document.getElementById(this.containerID),this.canvas=document.createElement("canvas"),this._s=this.canvas.getContext("2d"),this.canvas.width=this.screen.size.x,this.canvas.height=this.screen.size.y,this.container.style.width=this.screen.size.x+"px",this.container.style.height=this.screen.size.y+"px",document.body.style.background=o._e.colors.b,this.container.style.background=o._e.colors.bm,this.screen.center&&this.container.classList.add("center"),this.container.appendChild(this.canvas),o._e.canvas=this.canvas,o._e._s=this._s,o._e._f=new a.Camera(0,0,this.screen.size.x,this.screen.size.y),o._e.mouse=new h.Mouse,l.InitKeys(),requestAnimationFrame(this.step.bind(this))}},{key:"draw",value:function(){this._s.clearRect(0,0,this.screen.size.x,this.screen.size.y)}},{key:"update",value:function(){o._e._f.update(),o._e.mouse.update()}},{key:"step",value:function(){this.draw(),this.update(),o._e.mouse.draw(),requestAnimationFrame(this.step.bind(this))}}]),e}();i.Game=c},{"./_f":3,"./core":4,"./keys":8,"./mouse":9,"./_t2":14}],7:[function(e,t,i){"use strict";function r(e,t,i,r){o._e._s.fillStyle=r,o._e._s.beginPath(),o._e._s.arc(e,t,i,0,2*Math.PI,!1),o._e._s.closePath(),o._e._s.fill()}function n(e,t,i,r,n){o._e._s.strokeStyle=n,o._e._s.beginPath(),o._e._s.moveTo(e,t),o._e._s.lineTo(i,r),o._e._s.closePath(),o._e._s.stroke()}Object.defineProperty(i,"__esModule",{value:!0}),i.drawCircle=r,i.drawLine=n;var o=e("../engine/core")},{"../engine/core":4}],8:[function(e,t,i){"use strict";function r(){document.body.addEventListener("keydown",function(e){n._e.keys[e.keyCode]=!0},!1),document.body.addEventListener("keyup",function(e){n._e.keys[e.keyCode]=!1},!1)}Object.defineProperty(i,"__esModule",{value:!0}),i.InitKeys=r;var n=e("./core")},{"./core":4}],9:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e("./core"),s=e("./_t2"),a=(e("./BasicObject"),e("./distance")),h=e("../engine/helper"),l=function(){function e(){r(this,e),this.x=0,this.y=0,this.screen=new s.Vector2(0,0),this.lastClick=new s.Vector2(32,16),this.down=!1,this.rect=null,this.justPressed=!1,this.maxSize=10,this.size=10,this.state="Free",this.IDenemyLocked=0,this.touch=!1,this.addEventCanvas("mousemove",function(e){e.preventDefault(),this.setMousePosition(e)}.bind(this)),this.addEventCanvas("mousedown",function(e){e.preventDefault(),this.setMousePosition(e),this.down=!0,this.justPressed=!0,this.lastClick.x=this.screen.x,this.lastClick.y=this.screen.y}.bind(this)),this.addEventCanvas("mouseup",function(e){e.preventDefault(),this.setMousePosition(e),this.down=!1}.bind(this)),this.addEventCanvas("touchstart",function(e){e.preventDefault(),this.touch=!0,this.setTouchPosition(e),this.down=!0,this.justPressed=!0,this.lastClick.x=this.screen.x,this.lastClick.y=this.screen.y}.bind(this)),this.addEventCanvas("touchend",function(e){e.preventDefault(),this.down=!1}.bind(this))}return n(e,[{key:"addEventCanvas",value:function(e,t){o._e.canvas.addEventListener(e,t.bind(this))}},{key:"setTouchPosition",value:function(e){this.rect=o._e.canvas.getBoundingClientRect(),this.setPosition(e.touches[0].clientX-this.rect.left,e.touches[0].clientY-this.rect.top)}},{key:"setMousePosition",value:function(e){this.rect=o._e.canvas.getBoundingClientRect(),this.setPosition(e.clientX-this.rect.left,e.clientY-this.rect.top)}},{key:"setPosition",value:function(e,t){this.x=e,this.y=t,this.screen.x=this.x+o._e._f.x,this.screen.y=this.y+o._e._f.y}},{key:"checkDistanceToEnemy",value:function(){for(var e=0;e<o._e.maps[Math.floor(this.screen.y/384)%o._e.maps.length]._q.length;e++){var t=o._e.maps[Math.floor(this.screen.y/384)%o._e.maps.length]._q[e];a.distance(t.x+t.width/2,t.y+t.height/2,this.screen.x,this.screen.y)<20&&1==t.visible&&(this.IDenemyLocked=e,this.state="Locked")}}},{key:"drawFree",value:function(){return this.touch?!1:(o._e._s.strokeStyle="#181818",h.drawCircle(this.x,this.y,this.size,"rgba(255,255,255,0.2)"),void o._e._s.stroke())}},{key:"updateFree",value:function(){this.justPressed&&(this.size=2),this.size+=.2*(this.maxSize-this.size),this.checkDistanceToEnemy()}},{key:"drawLocked",value:function(){0==o._e._n._r.alive&&0==o._e.pause?(o._e._s.strokeStyle=o._e.colors.b,h.drawLine(o._e._n.x+8-o._e._f.x,o._e._n.y+8-o._e._f.y,this.x,this.y,"#8F82AC"),o._e._s.strokeStyle="rgba(179,49,50,0.6)"):o._e._s.strokeStyle="#B33132",h.drawCircle(this.x,this.y,this.size,"rgba(179,49,50,0.2)"),o._e._s.stroke()}},{key:"updateLocked",value:function(){this.size+=.2*(16-this.size);var e=o._e.maps[Math.floor(this.screen.y/384)%o._e.maps.length]._q[this.IDenemyLocked];this.x=e.x-o._e._f.x+e.width/2,this.y=e.y-o._e._f.y+e.height/2,(a.distance(e.x+e.width/2,e.y+e.height/2,this.screen.x,this.screen.y)>32||0==e.visible)&&(this.state="Free"),(this.justPressed&&0==o._e._n._r.alive||1==this.touch&&0==o._e._n._r.alive&&1==e.visible)&&(this.size=10,o._e._n.radius=o._e._n.width/2+8,o._e._n.shoot(e.x+e.width/2,e.y+e.height/2),this.touch&&(this.state="Free"))}},{key:"draw",value:function(){this["draw"+this.state]()}},{key:"update",value:function(){this["update"+this.state]()}}]),e}();i.Mouse=l},{"../engine/helper":7,"./BasicObject":1,"./core":4,"./distance":5,"./_t2":14}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={"int":function(e,t){return Math.floor(Math.random()*(e-t+1)+t)}};i._p=r},{}],11:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function o(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3];r(this,o),this.x=e,this.y=t,this.w=i,this.h=n};i.Rectangle=n},{}],12:[function(e,t,i){"use strict";!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof i?t.exports=r():e.SAT=r()}(void 0,function(){function e(e,t){this.x=e||0,this.y=t||0}function t(t,i){this.pos=t||new e,this.r=i||0}function i(t,i){this.pos=t||new e,this.angle=0,this.offset=new e,this.setPoints(i||[])}function r(t,i,r){this.pos=t||new e,this.w=i||0,this.h=r||0}function n(){this.a=null,this.b=null,this.overlapN=new e,this.overlapV=new e,this.clear()}function o(e,t,i){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=e.length,s=0;o>s;s++){var a=e[s].dot(t);r>a&&(r=a),a>n&&(n=a)}i[0]=r,i[1]=n}function s(e,t,i,r,n,s){var a=g.pop(),h=g.pop(),l=d.pop().copy(t).sub(e),c=l.dot(n);if(o(i,n,a),o(r,n,h),h[0]+=c,h[1]+=c,a[0]>h[1]||h[0]>a[1])return d.push(l),g.push(a),g.push(h),!0;if(s){var u=0;if(a[0]<h[0])if(s.aInB=!1,a[1]<h[1])u=a[1]-h[0],s.bInA=!1;else{var p=a[1]-h[0],f=h[1]-a[0];u=f>p?p:-f}else if(s.bInA=!1,a[1]>h[1])u=a[0]-h[1],s.aInB=!1;else{var p=a[1]-h[0],f=h[1]-a[0];u=f>p?p:-f}var y=Math.abs(u);y<s.overlap&&(s.overlap=y,s.overlapN.copy(n),0>u&&s.overlapN.reverse())}return d.push(l),g.push(a),g.push(h),!1}function a(e,t){var i=e.len2(),r=t.dot(e);return 0>r?b:r>i?w:x}function h(e,t){var i=d.pop().copy(e).sub(t.pos),r=t.r*t.r,n=i.len2();return d.push(i),r>=n}function l(e,t){C.pos.copy(e),m.clear();var i=f(C,t,m);return i&&(i=m.aInB),i}function c(e,t,i){var r=d.pop().copy(t.pos).sub(e.pos),n=e.r+t.r,o=n*n,s=r.len2();if(s>o)return d.push(r),!1;if(i){var a=Math.sqrt(s);i.a=e,i.b=t,i.overlap=n-a,i.overlapN.copy(r.normalize()),i.overlapV.copy(r).scale(i.overlap),i.aInB=e.r<=t.r&&a<=t.r-e.r,i.bInA=t.r<=e.r&&a<=e.r-t.r}return d.push(r),!0}function u(e,t,i){for(var r=d.pop().copy(t.pos).sub(e.pos),n=t.r,o=n*n,s=e.calcPoints,h=s.length,l=d.pop(),c=d.pop(),u=0;h>u;u++){var p=u===h-1?0:u+1,f=0===u?h-1:u-1,y=0,v=null;l.copy(e.edges[u]),c.copy(r).sub(s[u]),i&&c.len2()>o&&(i.aInB=!1);var g=a(l,c);if(g===b){l.copy(e.edges[f]);var m=d.pop().copy(r).sub(s[f]);if(g=a(l,m),g===w){var C=c.len();if(C>n)return d.push(r),d.push(l),d.push(c),d.push(m),!1;i&&(i.bInA=!1,v=c.normalize(),y=n-C)}d.push(m)}else if(g===w){if(l.copy(e.edges[p]),c.copy(r).sub(s[p]),g=a(l,c),g===b){var C=c.len();if(C>n)return d.push(r),d.push(l),d.push(c),!1;i&&(i.bInA=!1,v=c.normalize(),y=n-C)}}else{var x=l.perp().normalize(),C=c.dot(x),P=Math.abs(C);if(C>0&&P>n)return d.push(r),d.push(x),d.push(c),!1;i&&(v=x,y=n-C,(C>=0||2*n>y)&&(i.bInA=!1))}v&&i&&Math.abs(y)<Math.abs(i.overlap)&&(i.overlap=y,i.overlapN.copy(v))}return i&&(i.a=e,i.b=t,i.overlapV.copy(i.overlapN).scale(i.overlap)),d.push(r),d.push(l),d.push(c),!0}function p(e,t,i){var r=u(t,e,i);if(r&&i){var n=i.a,o=i.aInB;i.overlapN.reverse(),i.overlapV.reverse(),i.a=i.b,i.b=n,i.aInB=i.bInA,i.bInA=o}return r}function f(e,t,i){for(var r=e.calcPoints,n=r.length,o=t.calcPoints,a=o.length,h=0;n>h;h++)if(s(e.pos,t.pos,r,o,e.normals[h],i))return!1;for(var h=0;a>h;h++)if(s(e.pos,t.pos,r,o,t.normals[h],i))return!1;return i&&(i.a=e,i.b=t,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0}var y={};y.Vector=e,y.V=e,e.prototype={copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new e(this.x,this.y)},perp:function(){var e=this.x;return this.x=this.y,this.y=-e,this},rotate:function(e){var t=this.x,i=this.y;return this.x=t*Math.cos(e)-i*Math.sin(e),this.y=t*Math.sin(e)+i*Math.cos(e),this},reverse:function(){return this.x=-this.x,this.y=-this.y,this},normalize:function(){var e=this.len();return e>0&&(this.x=this.x/e,this.y=this.y/e),this},add:function(e){return this.x+=e.x,this.y+=e.y,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this},scale:function(e,t){return this.x*=e,this.y*=t||e,this},project:function(e){var t=this.dot(e)/e.len2();return this.x=t*e.x,this.y=t*e.y,this},projectN:function(e){var t=this.dot(e);return this.x=t*e.x,this.y=t*e.y,this},reflect:function(e){var t=this.x,i=this.y;return this.project(e).scale(2),this.x-=t,this.y-=i,this},reflectN:function(e){var t=this.x,i=this.y;return this.projectN(e).scale(2),this.x-=t,this.y-=i,this},dot:function(e){return this.x*e.x+this.y*e.y},len2:function(){return this.dot(this)},len:function(){return Math.sqrt(this.len2())}},y.Circle=t,t.prototype.getAABB=t.prototype.getAABB=function(){var t=this.r,i=this.pos.clone().sub(new e(t,t));return new r(i,2*t,2*t).toPolygon()},y.Polygon=i,i.prototype={setPoints:function(t){var i=!this.points||this.points.length!==t.length;if(i){var r,n=this.calcPoints=[],o=this.edges=[],s=this.normals=[];for(r=0;r<t.length;r++)n.push(new e),o.push(new e),s.push(new e)}return this.points=t,this._recalc(),this},setAngle:function(e){return this.angle=e,this._recalc(),this},setOffset:function(e){return this.offset=e,this._recalc(),this},rotate:function(e){for(var t=this.points,i=t.length,r=0;i>r;r++)t[r].rotate(e);return this._recalc(),this},translate:function(e,t){for(var i=this.points,r=i.length,n=0;r>n;n++)i[n].x+=e,i[n].y+=t;return this._recalc(),this},_recalc:function(){var e,t=this.calcPoints,i=this.edges,r=this.normals,n=this.points,o=this.offset,s=this.angle,a=n.length;for(e=0;a>e;e++){var h=t[e].copy(n[e]);h.x+=o.x,h.y+=o.y,0!==s&&h.rotate(s)}for(e=0;a>e;e++){var l=t[e],c=a-1>e?t[e+1]:t[0],u=i[e].copy(c).sub(l);r[e].copy(u).perp().normalize()}return this},getAABB:function(){for(var t=this.calcPoints,i=t.length,n=t[0].x,o=t[0].y,s=t[0].x,a=t[0].y,h=1;i>h;h++){var l=t[h];l.x<n?n=l.x:l.x>s&&(s=l.x),l.y<o?o=l.y:l.y>a&&(a=l.y)}return new r(this.pos.clone().add(new e(n,o)),s-n,a-o).toPolygon()}},y.Box=r,r.prototype.toPolygon=function(){var t=this.pos,r=this.w,n=this.h;return new i(new e(t.x,t.y),[new e,new e(r,0),new e(r,n),new e(0,n)])},y.Response=n,n.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var d=[],v=0;10>v;v++)d.push(new e);for(var g=[],v=0;5>v;v++)g.push([]);var m=new n,C=new r(new e,1,1).toPolygon(),b=-1,x=0,w=1;return y.pointInCircle=h,y.pointInPolygon=l,y.testCircleCircle=c,y.testPolygonCircle=u,y.testCirclePolygon=p,y._d=f,y})},{}],13:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e("./core"),s=e("./sat/SAT.js"),a=function(){function e(t){r(this,e),this.map=t.map,this.tilesize=16,this.width=t.width,this.height=t.height,this.rows=t.rows,this.cols=t.cols,this.x=t.x,this.y=t.y,this.mapImage=new Image,this.mapImage.src=t.src}return n(e,[{key:"draw",value:function(){o._e._s.drawImage(this.mapImage,this.x-o._e._f.x,this.y-o._e._f.y)}},{key:"tileIsSolid",value:function(e,t){return e=e/this.tilesize>>0,t=t/this.tilesize>>0,this.map[this.cols*t+e]>0}},{key:"checkTileCollision",value:function(t,i,r,n){!this.tileIsSolid(16*t-this.x,16*i-this.y)||0!=r.colliding&&1!=n||(r.shape.pos.x=r._a.x,r.shape.pos.y=r._a.y,e.tileShape.pos.x=16*t,e.tileShape.pos.y=16*i,r.colliding=s._d(r.shape,e.tileShape,e._m),n&&(r._a.x-=e._m.overlapV.x,r._a.y-=e._m.overlapV.y),e._m.clear())}},{key:"checkCollision",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=Math.floor(e._a.x/16),r=Math.floor((e._a.x+16)/16),n=Math.floor(e._a.y/16),o=Math.floor((e._a.y+16)/16);if(e._g.y<=0)for(var s=o;s>=n;s--)for(var a=r;a>=i;a--)this.checkTileCollision(a,s,e,t);else if(e._g.y>=0)for(var s=n;o>=s;s++)for(var a=i;r>=a;a++)this.checkTileCollision(a,s,e,t);return t&&(e.x=e._a.x,e.y=e._a.y),e.colliding}},{key:"update",value:function(){}}]),e}();i.Tilemap=a,a.tileShape=new s.Box(new s.Vector(0,0),16,16).toPolygon(),a._m=new s.Response},{"./core":4,"./sat/SAT.js":12}],14:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function o(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];r(this,o),this.x=e,this.y=t};i.Vector2=n},{}],15:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function(e,t,i){for(var r=!0;r;){var n=e,o=t,s=i;a=l=h=void 0,r=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,r=!0}},a=e("../engine/BasicObject"),h=e("../engine/core"),l=(e("../engine/angle"),e("../engine/distance"),e("../engine/helper")),c=(e("../engine/sat/SAT.js"),function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.angle=0,this._l=e._l,this.setDead(),this.speed=e.speed,this.color=e.color}return n(t,e),o(t,[{key:"setAlive",value:function(){this.alive=!0,this.colliding=!1}},{key:"setDead",value:function(){this.alive=!1,this._a.x=this._l.x+4,this._a.y=this._l.y+4}},{key:"_o",value:function(){this.x=this.y=0,this.shape.pos.x=this.x,this.shape.pos.y=this.y,t._m.clear()}},{key:"draw",value:function(){return 0==this.alive?!1:void l.drawCircle(this.x+this.width/2-h._e._f.x,this.y+this.height/2-h._e._f.y,this.width/2+2,this.color)}},{key:"update",value:function(){return 0==this.alive?!1:(this.colliding=!1,this._g.x=Math.cos(this.angle)*this.speed,this._g.y=Math.sin(this.angle)*this.speed,this._a.x+=this._g.x,this._a.y+=this._g.y,h._e.maps[Math.floor(this.y/384)%h._e.maps.length].checkCollision(this,!1)&&this.setDead(),this.x=this._a.x,void(this.y=this._a.y))}}]),t}(a.BasicObject));i.Bullet=c},{"../engine/BasicObject":1,"../engine/angle":2,"../engine/core":4,"../engine/distance":5,"../engine/helper":7,"../engine/sat/SAT.js":12}],16:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function(e,t,i){for(var r=!0;r;){var n=e,o=t,s=i;a=l=h=void 0,r=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,r=!0}},a=e("../engine/BasicObject"),h=e("../engine/core"),l=e("../engine/angle"),c=e("../engine/distance"),u=e("./_r"),p=e("../engine/helper"),f=e("../engine/sat/SAT.js"),y=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._r=new u.Bullet({x:0,y:0,width:4,height:4,speed:3,color:h._e.colors.eb,_l:this}),this.radius=this.width/2+2}return n(t,e),o(t,[{key:"_b",value:function(){if(0!=this._r.alive){this._r.shape.pos.x=this._r._a.x,this._r.shape.pos.y=this._r._a.y,h._e._n.shape.pos.x=h._e._n._a.x,h._e._n.shape.pos.y=h._e._n._a.y;var e=f._d(this._r.shape,h._e._n.shape,t._h);return t._h.clear(),e}}},{key:"kill",value:function(){this.visible=this.active=!1}},{key:"draw",value:function(){0==this.visible&&(this.radius+=.4*(0-this.radius)),p.drawCircle(this.x+this.width/2-h._e._f.x,this.y+this.height/2-h._e._f.y,this.radius,h._e.colors.e),0!=this.visible&&(this._r.draw(),c.distance(this.x+this.width/2,this.y+this.height/2,h._e._n.x+h._e._n.width/2,h._e._n.y+h._e._n.height/2)<128&&0==h._e.pause&&p.drawLine(h._e._n.x+8-h._e._f.x,h._e._n.y+8-h._e._f.y,this.x+8-h._e._f.x,this.y+8-h._e._f.y,"rgba(179,49,50,0.2)"))}},{key:"update",value:function(){0!=this.active&&(c.distance(this.x+this.width/2,this.y+this.height/2,h._e._n.x+h._e._n.width/2,h._e._n.y+h._e._n.height/2)<128&&0==this._r.alive&&(this._r.angle=l.angle(this.x+this.width/2,this.y+this.height/2,h._e._n.x+h._e._n.width/2,h._e._n.y+h._e._n.height/2),this.radius=this.width/2+6,Math.cos(this._r.angle)>0?h._e._f.shake(-5):h._e._f.shake(5),this._r.setAlive()),this._b()&&(h._e.highScore=Math.max(h._e.highScore,h._e._f._fMaxY),h._e.pause=!0,h._e.timeHolder=0,h._e._f._shake=0),this.radius+=.2*(this.width/2+2-this.radius),this._r.update())}}]),t}(a.BasicObject);i.Enemy=y,y._h=new f.Response},{"../engine/BasicObject":1,"../engine/angle":2,"../engine/core":4,"../engine/distance":5,"../engine/helper":7,"../engine/sat/SAT.js":12,"./_r":15}],17:[function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t,i){for(var r=!0;r;){var n=e,o=t,s=i;a=l=h=void 0,r=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,r=!0}},o=e("../engine/game"),s=e("../engine/core"),a=e("../engine/_t2"),h=e("./mapPiece"),l=(e("../engine/BasicObject"),e("./maps")),c=e("./_n"),u=e("../engine/random"),p=function(e){function o(e){t(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e),s._e.maps=[],this._n=new c.Player({x:64,y:128,width:16,height:16}),this.highScore=0,s._e._n=this._n,s._e.timeHolder=1,s._e._f.setObjectToFollow(this._n),this.initMaps(),s._e._oGame=this._oGame}return i(o,e),r(o,[{key:"_oGame",value:function(){s._e.mouse.justPressed=!1,s._e.mouse.state="Free";for(var e=0;e<l.MAPS.length;e++)s._e.maps[e].onResetGame(0,384*e);s._e.lastMapIndex=0,this._n._o(),s._e._f._o()}},{key:"initMaps",value:function(){for(var e=0;e<l.MAPS.length;e++)s._e.maps[e]=new h.MapPiece({map:l.MAPS[e].map,src:l.MAPS[e].src,width:240,height:384,rows:24,cols:15,x:0,y:384*e});for(var e=0;2>e;e++)for(var t=s._e.maps[e].rows*e;t<s._e.maps[e].rows*(e+1);++t)for(var i=0;i<s._e.maps[e].cols;++i){var r=s._e.maps[e].cols*(t-s._e.maps[e].rows*e)+i;s._e.pathfinderGrid.setWalkableAt(i,t,0==s._e.maps[e].map[r])}}},{key:"draw",value:function(){n(Object.getPrototypeOf(o.prototype),"draw",this).call(this);for(var e=s._e._f._i;e<=s._e._f._j;e++)s._e.maps[e%s._e.maps.length].draw();s._e._s.fillStyle=s._e.colors.b,s._e._s.fillRect(0,0,16,s._e.canvas.height),s._e._s.fillRect(s._e.canvas.width-16,0,16,s._e.canvas.height),this._n.draw(),0==s._e.pause&&(s._e._s.fillStyle=s._e.colors.rb,s._e._s.fillRect(0,0,s._e.canvas.width,16),s._e._s.font="10pt sans-serif",s._e._s.textAlign="center",s._e._s.fillStyle=s._e.colors.w,s._e._s.fillText("Score: "+s._e._f.y,s._e.canvas.width/2,12))}},{key:"update",value:function(){if(1==s._e.pause)return s._e._s.fillStyle=s._e.colors.rb,s._e._s.fillRect(0,0,s._e.canvas.width,s._e.canvas.height),s._e._s.fillStyle=s._e.colors.w,s._e._s.font="12pt sans-serif",s._e._s.textAlign="center",s._e._s.fillText("HOLD TO TRY AGAIN",s._e.canvas.width/2-s._e._f.x,s._e.canvas.height/2-20),s._e._s.font="10pt sans-serif",s._e._s.fillText("Score: "+s._e._f.y,s._e.canvas.width/2-s._e._f.x,s._e.canvas.height/2+20),s._e._s.fillText("High Score: "+s._e.highScore,s._e.canvas.width/2-s._e._f.x,s._e.canvas.height/2+40),s._e.mouse.down?(s._e.timeHolder+=.03,s._e._f.shake(u._p["int"](-4+11*s._e.timeHolder,4+11*s._e.timeHolder))):s._e.timeHolder+=.05*(0-s._e.timeHolder),s._e._s.fillStyle=s._e.colors.b,s._e._s.fillRect(0,0,s._e.canvas.width*s._e.timeHolder-s._e._f.x,s._e.canvas.height),s._e.timeHolder>=1.2&&(s._e.pause=!1,this._oGame()),void s._e._f.update();if(n(Object.getPrototypeOf(o.prototype),"update",this).call(this),s._e.timeHolder>0&&(s._e._s.fillStyle=s._e.colors.b,s._e._s.fillRect(0,0,s._e.canvas.width*s._e.timeHolder,s._e.canvas.height),s._e.timeHolder+=.05*(-1-s._e.timeHolder)),s._e.pathfinderDirty=!1,s._e.lastMapIndex!=s._e._f._j){s._e.lastMapIndex=s._e._f._j;for(var e=0,t=s._e._f._i;t<=s._e._f._j;t++){for(var i=s._e.maps[t%s._e.maps.length].rows*e;i<s._e.maps[t%s._e.maps.length].rows*(e+1);++i)for(var r=0;r<s._e.maps[t%s._e.maps.length].cols;++r){var a=s._e.maps[t%s._e.maps.length].cols*(i-s._e.maps[t%s._e.maps.length].rows*e)+r;s._e.pathfinderGrid.setWalkableAt(r,i,0==s._e.maps[t%s._e.maps.length].map[a])}e++}}this._n.update();for(var t=s._e._f._i;t<=s._e._f._j;t++)s._e.maps[t%s._e.maps.length].update();s._e.mouse.justPressed=!1}}]),o}(o.Game);new p({name:"-",screen:{size:new a.Vector2(240,384),center:!0},containerID:"container"})},{"../engine/BasicObject":1,"../engine/core":4,"../engine/game":6,"../engine/random":10,"../engine/_t2":14,"./mapPiece":18,"./maps":19,"./_n":20}],18:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function(e,t,i){for(var r=!0;r;){var n=e,o=t,s=i;a=l=h=void 0,r=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);
if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,r=!0}},a=e("../engine/tilemap"),h=e("../engine/random"),l=e("./enemy"),c=e("../engine/core"),u=e("./maps"),p=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._q=[],this.initEnemies(),this._oEnemies()}return n(t,e),o(t,[{key:"initEnemies",value:function(){for(var e=0;3>e;e++){var t=this.findEmptyTile();this._q[e]=new l.Enemy({x:16*t.x+this.x,y:16*t.y+this.y,width:12,height:12})}}},{key:"findEmptyTile",value:function(){var e=h._p["int"](0,this.cols-1),t=h._p["int"](0,this.rows-1);return 0==this.tileIsSolid(16*e,16*t)?{x:e,y:t}:0==h._p["int"](0,1)?{x:e,y:h._p["int"](0,1)}:{x:e,y:h._p["int"](this.rows-2,this.rows-1)}}},{key:"onResetGame",value:function(e,t){if(this.x=e,this.y=t,0==this.y){var i=h._p["int"](0,u.MAPS.length-1);return this.map=u.MAPS[i].map,this.mapImage.src=u.MAPS[i].src,void(c._e.lastMapIndex=0)}this._oEnemies()}},{key:"_oEnemies",value:function(){var e=h._p["int"](0,u.MAPS.length-1);this.map=u.MAPS[e].map,this.mapImage.src=u.MAPS[e].src,c._e.lastMapIndex=0;for(var t=0;t<this._q.length;t++){var i=this.findEmptyTile();this._q[t].x=16*i.x+this.x,this._q[t].y=16*i.y+this.y,this._q[t].active=!0,this._q[t].visible=!0,this._q[t]._r.setDead(),this._q[t].radius=this._q[t].width/2+2,0==this.y&&(this._q[t].radius=0,this._q[t].active=!1,this._q[t].visible=!1)}}},{key:"draw",value:function(){s(Object.getPrototypeOf(t.prototype),"draw",this).call(this);for(var e=0;e<this._q.length;e++)this._q[e].draw()}},{key:"update",value:function(){s(Object.getPrototypeOf(t.prototype),"update",this).call(this);for(var e=0;e<this._q.length;e++)this._q[e].update();c._e._f.y>this.height+this.y&&(this.y+=this.height*u.MAPS.length,this._oEnemies())}}]),t}(a.Tilemap);i.MapPiece=p},{"../engine/core":4,"../engine/random":10,"../engine/tilemap":13,"./enemy":16,"./maps":19}],19:[function(e,t,i){"use strict";function r(e){o.width=240,o.height=384;for(var t=0;24>t;t++)for(var i=0;15>i;i++){var r=15*t+i;e[r]>0&&(s.fillStyle=n._e.colors.b,s.fillRect(16*i,16*t,16,16))}return o.toDataURL("image/png")}Object.defineProperty(i,"__esModule",{value:!0});var n=e("../engine/core"),o=document.createElement("canvas"),s=o.getContext("2d"),a=[];i.MAPS=a,a[0]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[1]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[2]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[3]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[4]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[5]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[6]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[7]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,1,1,0,0,0,1,1,0,1,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},a[8]={map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]};for(var h=0;h<a.length;h++)a[h].src=r(a[h].map)},{"../engine/core":4}],20:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function(e,t,i){for(var r=!0;r;){var n=e,o=t,s=i;a=l=h=void 0,r=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,r=!0}},a=e("../engine/core"),h=e("../engine/BasicObject"),l=e("../engine/angle"),c=e("../engine/helper"),u=e("../engine/distance"),p=e("./_r"),f=(e("../engine/random"),e("pathfinding")),y=e("../engine/sat/SAT.js"),d=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.angleToGo=l.angle(this.x+this.width/2,this.y+this.height/2,a._e.mouse.lastClick.x,a._e.mouse.lastClick.y),this.speed=10,this.path=[],this.pathNormalizedMapY=a._e._f._i,this._r=new p.Bullet({x:0,y:0,width:6,height:6,speed:5,color:a._e.colors.pb,_l:this}),this._rParticle={x:0,y:0,radius:0},this.pa=0,this.radius=this.width/2+2}return n(t,e),o(t,[{key:"shoot",value:function(e,t){0==this._r.alive&&(this._r.angle=l.angle(this.x+this.width/2,this.y+this.height/2,e,t),this._rParticle.x=this._r._a.x=this.x+4,this._rParticle.y=this._r._a.y=this.y+4,Math.cos(this._r.angle)>0?a._e._f.shake(-10):a._e._f.shake(10),this._r.setAlive())}},{key:"draw",value:function(){c.drawCircle(this.x+this.width/2-a._e._f.x,this.y+this.height/2-a._e._f.y,this.radius,a._e.colors.p);for(var e=0;3>e;e++){var t=e*(2*Math.PI)/3;c.drawCircle(this.x+this.width/2-a._e._f.x+Math.cos(this.pa+(this.pa+t))*(4*(this.width/2+2-(this.radius+.4))),this.y+this.height/2-a._e._f.y+Math.sin(this.pa+(this.pa+t))*(4*(this.width/2+2-(this.radius+.4))),2,"#98CF6F")}this._r.draw(),this._r.angle,this._r.alive&&0==a._e.pause&&(this._rParticle.x+=2*Math.cos(this._r.angle-Math.PI),this._rParticle.y+=2*Math.sin(this._r.angle-Math.PI),c.drawCircle(this._rParticle.x-a._e._f.x,this._rParticle.y-a._e._f.y,Math.max(0,this._rParticle.radius),a._e.colors.pb),this._rParticle.radius+=.1*(-1-this._rParticle.radius),this._rParticle.radius<=0&&(this._rParticle.radius=4,this._rParticle.x=this._r.x+4,this._rParticle.y=this._r.y+4))}},{key:"_o",value:function(){this.path.length=0,this.pathNormalizedMapY=0,this.speed=0,this.angleToGo=0,this.x=this._a.x=64,this.y=this._a.y=128,this._r.setDead()}},{key:"moveTo",value:function(){if(0==this.path.length)return!1;var e=16*this.path[0][0]+this.width/2,t=16*(this.path[0][1]+24*this.pathNormalizedMapY)+this.height/2;this.angleToGo=l.angle(this.x+this.width/2,this.y+this.height/2,e,t),this._g.x=Math.cos(this.angleToGo)*this.speed,this._g.y=Math.sin(this.angleToGo)*this.speed,u.distance(this.x+this.width/2,this.y+this.height/2,e,t)>=this.speed?(this._a.x+=this._g.x,this._a.y+=this._g.y,this.speed=5):(this._a.x=e-this.width/2,this._a.y=t-this.height/2,this.speed=0,this.path.shift())}},{key:"_c",value:function(){for(var e=0;e<a._e.maps[Math.floor(this._r.y/384)%a._e.maps.length]._q.length;e++){var i=a._e.maps[Math.floor(this._r.y/384)%a._e.maps.length]._q[e];i.shape.pos.x=i.x,i.shape.pos.y=i.y,this._r.shape.pos.x=this._r._a.x,this._r.shape.pos.y=this._r._a.y;var r=y._d(this._r.shape,i.shape,t._h);r&&i.visible&&(i.kill(),this._r.setDead(),i.x<120?a._e._f.shake(-15):a._e._f.shake(15)),t._h.clear()}}},{key:"update",value:function(){if(this._r.update(),this._a.y=Math.max(this._a.y,a._e._f.y),a._e.maps[Math.floor(this.y/384)%a._e.maps.length].checkCollision(this),this._nYPos=a._e._f._i,a._e.mouse.justPressed&&"Free"==a._e.mouse.state){var e=a._e.pathfinderGrid.clone();this.pathNormalizedMapY=a._e._f._i,this.path=a._e.pathfinder.findPath(this.x/16>>0,(this.y/16>>0)-24*a._e._f._i,a._e.mouse.lastClick.x/16>>0,(a._e.mouse.lastClick.y/16>>0)-24*a._e._f._i,e),0!=this.path.length&&(this.path=f.Util.smoothenPath(e,this.path))}this.moveTo(a._e.mouse.lastClick),this._c(),this.radius+=.2*(this.width/2+2-this.radius),this._g.x>0?this.pa+=.05:this.pa-=.05}}]),t}(h.BasicObject);i.Player=d,d._h=new y.Response},{"../engine/BasicObject":1,"../engine/angle":2,"../engine/core":4,"../engine/distance":5,"../engine/helper":7,"../engine/random":10,"../engine/sat/SAT.js":12,"./_r":15,pathfinding:21}],21:[function(e,t){t.exports=e("./src/PathFinding")},{"./src/PathFinding":24}],22:[function(e,t){t.exports=e("./lib/heap")},{"./lib/heap":23}],23:[function(e,t){(function(){var e,i,r,n,o,s,a,h,l,c,u,p,f,y,d;r=Math.floor,c=Math.min,i=function(e,t){return t>e?-1:e>t?1:0},l=function(e,t,n,o,s){var a;if(null==n&&(n=0),null==s&&(s=i),0>n)throw Error("lo must be non-negative");for(null==o&&(o=e.length);o>n;)a=r((n+o)/2),s(t,e[a])<0?o=a:n=a+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,r){return null==r&&(r=i),e.push(t),y(e,0,e.length-1,r)},o=function(e,t){var r,n;return null==t&&(t=i),r=e.pop(),e.length?(n=e[0],e[0]=r,d(e,0,t)):n=r,n},h=function(e,t,r){var n;return null==r&&(r=i),n=e[0],e[0]=t,d(e,0,r),n},a=function(e,t,r){var n;return null==r&&(r=i),e.length&&r(e[0],t)<0&&(n=[e[0],t],t=n[0],e[0]=n[1],d(e,0,r)),t},n=function(e,t){var n,o,s,a,h,l;for(null==t&&(t=i),a=function(){l=[];for(var t=0,i=r(e.length/2);i>=0?i>t:t>i;i>=0?t++:t--)l.push(t);return l}.apply(this).reverse(),h=[],o=0,s=a.length;s>o;o++)n=a[o],h.push(d(e,n,t));return h},f=function(e,t,r){var n;return null==r&&(r=i),n=e.indexOf(t),-1!==n?(y(e,0,n,r),d(e,n,r)):void 0},u=function(e,t,r){var o,s,h,l,c;if(null==r&&(r=i),s=e.slice(0,t),!s.length)return s;for(n(s,r),c=e.slice(t),h=0,l=c.length;l>h;h++)o=c[h],a(s,o,r);return s.sort(r).reverse()},p=function(e,t,r){var s,a,h,u,p,f,y,d,v,g;if(null==r&&(r=i),10*t<=e.length){if(u=e.slice(0,t).sort(r),!u.length)return u;for(h=u[u.length-1],d=e.slice(t),p=0,y=d.length;y>p;p++)s=d[p],r(s,h)<0&&(l(u,s,0,null,r),u.pop(),h=u[u.length-1]);return u}for(n(e,r),g=[],a=f=0,v=c(t,e.length);v>=0?v>f:f>v;a=v>=0?++f:--f)g.push(o(e,r));return g},y=function(e,t,r,n){var o,s,a;for(null==n&&(n=i),o=e[r];r>t&&(a=r-1>>1,s=e[a],n(o,s)<0);)e[r]=s,r=a;return e[r]=o},d=function(e,t,r){var n,o,s,a,h;for(null==r&&(r=i),o=e.length,h=t,s=e[t],n=2*t+1;o>n;)a=n+1,o>a&&!(r(e[n],e[a])<0)&&(n=a),e[t]=e[n],t=n,n=2*t+1;return e[t]=s,y(e,h,t,r)},e=function(){function e(e){this.cmp=null!=e?e:i,this.nodes=[]}return e.push=s,e.pop=o,e.replace=h,e.pushpop=a,e.heapify=n,e.updateItem=f,e.nlargest=u,e.nsmallest=p,e.prototype={push:function(e){return s(this.nodes,e,this.cmp)},pop:function(){return o(this.nodes,this.cmp)},peek:function(){return this.nodes[0]},contains:function(e){return-1!==this.nodes.indexOf(e)},replace:function(e){return h(this.nodes,e,this.cmp)},pushpop:function(e){return a(this.nodes,e,this.cmp)},heapify:function(){return n(this.nodes,this.cmp)},updateItem:function(e){return f(this.nodes,e,this.cmp)},clear:function(){return this.nodes=[]},empty:function(){return 0===this.nodes.length},size:function(){return this.nodes.length},clone:function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},toArray:function(){return this.nodes.slice(0)}},e}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],24:[function(e,t){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder")}},{"./core/DiagonalMovement":25,"./core/Grid":26,"./core/Heuristic":27,"./core/Node":28,"./core/Util":29,"./finders/AStarFinder":30,heap:22}],25:[function(e,t){var i={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=i},{}],26:[function(e,t){function i(e,t,i){var r;"object"!=typeof e?r=e:(t=e.length,r=e[0].length,i=e),this.width=r,this.height=t,this.nodes=this._buildNodes(r,t,i)}var r=e("./Node"),n=e("./DiagonalMovement");i.prototype._buildNodes=function(e,t,i){var n,o,s=Array(t);for(n=0;t>n;++n)for(s[n]=Array(e),o=0;e>o;++o)s[n][o]=new r(o,n);if(void 0===i)return s;if(i.length!==t||i[0].length!==e)throw Error("Matrix size does not fit");for(n=0;t>n;++n)for(o=0;e>o;++o)i[n][o]&&(s[n][o].walkable=!1);return s},i.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},i.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},i.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},i.prototype.setWalkableAt=function(e,t,i){this.nodes[t][e].walkable=i},i.prototype.getNeighbors=function(e,t){var i=e.x,r=e.y,o=[],s=!1,a=!1,h=!1,l=!1,c=!1,u=!1,p=!1,f=!1,y=this.nodes;if(this.isWalkableAt(i,r-1)&&(o.push(y[r-1][i]),s=!0),this.isWalkableAt(i+1,r)&&(o.push(y[r][i+1]),h=!0),this.isWalkableAt(i,r+1)&&(o.push(y[r+1][i]),c=!0),this.isWalkableAt(i-1,r)&&(o.push(y[r][i-1]),p=!0),t===n.Never)return o;if(t===n.OnlyWhenNoObstacles)a=p&&s,l=s&&h,u=h&&c,f=c&&p;else if(t===n.IfAtMostOneObstacle)a=p||s,l=s||h,u=h||c,f=c||p;else{if(t!==n.Always)throw Error("Incorrect value of diagonalMovement");a=!0,l=!0,u=!0,f=!0}return a&&this.isWalkableAt(i-1,r-1)&&o.push(y[r-1][i-1]),l&&this.isWalkableAt(i+1,r-1)&&o.push(y[r-1][i+1]),u&&this.isWalkableAt(i+1,r+1)&&o.push(y[r+1][i+1]),f&&this.isWalkableAt(i-1,r+1)&&o.push(y[r+1][i-1]),o},i.prototype.clone=function(){var e,t,n=this.width,o=this.height,s=this.nodes,a=new i(n,o),h=Array(o);for(e=0;o>e;++e)for(h[e]=Array(n),t=0;n>t;++t)h[e][t]=new r(t,e,s[e][t].walkable);return a.nodes=h,a},t.exports=i},{"./DiagonalMovement":25,"./Node":28}],27:[function(e,t){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return t>e?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],28:[function(e,t){function i(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i?!0:i}t.exports=i},{}],29:[function(e,t,i){function r(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function n(e,t){var i=r(e),n=r(t);return i.concat(n.reverse())}function o(e){var t,i,r,n,o,s=0;for(t=1;t<e.length;++t)i=e[t-1],r=e[t],n=i[0]-r[0],o=i[1]-r[1],s+=Math.sqrt(n*n+o*o);return s}function s(e,t,i,r){var n,o,s,a,h,l,c=Math.abs,u=[];for(s=c(i-e),a=c(r-t),n=i>e?1:-1,o=r>t?1:-1,h=s-a;;){if(u.push([e,t]),e===i&&t===r)break;l=2*h,l>-a&&(h-=a,e+=n),s>l&&(h+=s,t+=o)}return u}function a(e){var t,i,r,n,o,a,h=[],l=e.length;if(2>l)return h;for(o=0;l-1>o;++o)for(t=e[o],i=e[o+1],r=s(t[0],t[1],i[0],i[1]),n=r.length,a=0;n-1>a;++a)h.push(r[a]);return h.push(e[l-1]),h}function h(e,t){var i,r,n,o,a,h,l,c,u,p,f,y=t.length,d=t[0][0],v=t[0][1],g=t[y-1][0],m=t[y-1][1];for(i=d,r=v,a=[[i,r]],h=2;y>h;++h){for(c=t[h],n=c[0],o=c[1],u=s(i,r,n,o),f=!1,l=1;l<u.length;++l)if(p=u[l],!e.isWalkableAt(p[0],p[1])){f=!0;break}f&&(lastValidCoord=t[h-1],a.push(lastValidCoord),i=lastValidCoord[0],r=lastValidCoord[1])}return a.push([g,m]),a}function l(e){if(e.length<3)return e;var t,i,r,n,o,s,a=[],h=e[0][0],l=e[0][1],c=e[1][0],u=e[1][1],p=c-h,f=u-l;for(o=Math.sqrt(p*p+f*f),p/=o,f/=o,a.push([h,l]),s=2;s<e.length;s++)t=c,i=u,r=p,n=f,c=e[s][0],u=e[s][1],p=c-t,f=u-i,o=Math.sqrt(p*p+f*f),p/=o,f/=o,(p!==r||f!==n)&&a.push([t,i]);return a.push([c,u]),a}i.backtrace=r,i.biBacktrace=n,i.pathLength=o,i.interpolate=s,i.expandPath=a,i.smoothenPath=h,i.compressPath=l},{}],30:[function(e,t){function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||o.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||o.manhattan:this.heuristic=e.heuristic||o.octile}var r=e("heap"),n=e("../core/Util"),o=e("../core/Heuristic"),s=e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,i,o,s){var a,h,l,c,u,p,f,y,d=new r(function(e,t){return e.f-t.f}),v=s.getNodeAt(e,t),g=s.getNodeAt(i,o),m=this.heuristic,C=this.diagonalMovement,b=this.weight,x=Math.abs,w=Math.SQRT2;for(v.g=0,v.f=0,d.push(v),v.opened=!0;!d.empty();){if(a=d.pop(),a.closed=!0,a===g)return n.backtrace(g);for(h=s.getNeighbors(a,C),c=0,u=h.length;u>c;++c)l=h[c],l.closed||(p=l.x,f=l.y,y=a.g+(p-a.x===0||f-a.y===0?1:w),(!l.opened||y<l.g)&&(l.g=y,l.h=l.h||b*m(x(p-i),x(f-o)),l.f=l.g+l.h,l.parent=a,l.opened?d.updateItem(l):(d.push(l),l.opened=!0)))}return[]},t.exports=i},{"../core/DiagonalMovement":25,"../core/Heuristic":27,"../core/Util":29,heap:22}]},{},[17]);