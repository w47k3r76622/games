var crit=0,fpcrit=0,cardnb=0,pdk=[],prepdk=[],dmg=0,turn=1,mh=200,phdmg=0,aldmg=0,truedmg=0,ehand=[],phand=[],dst=0,ax="#4527a0",ay="#80d8ff",ooc=0,d=document,e={hp:200,moves:8,pm:"",cm:"",nxt:"",t:[""],dp:[],nm:"Opponent",l:["Edwin","Roderick","Wilbur","Triston"],lcard:""},p={hp:200,moves:8,pm:"",cm:"",nxt:"",t:[""],dp:[],nm:"Player",l:["Edwin","Roderick","Wilbur","Triston"],lcard:""};for(i=0;i<9;i++)d.getElementById("card"+i).style.display="none",d.getElementById("card"+i).src="SC.png";function rmv(e,n){let t=e.indexOf(n);-1!==t&&e.splice(t,1)}function rdn(e){return Math.floor(Math.random()*e)}var pcsarr=["Violet","Violet","Violet","Finch","Finch","CarterHill","CarterHill","Rhugh","Rhugh","Bill","Bill","Thralin","Thralin","Thralin","Evelyn","Evelyn","Florent"],ecsarr=[...pcsarr],pcs={Violet:{nm:"Violet Drun",t:["ph","offensive"],nb:3,strg:25,lr:"Enrolled to join the White Capes at the first call of Wilbur. She had borne enough, it was time to give BACK.",aty:"Does 25 ph dmg. dmg increased by 25 each time it is used.",s:function(){phdmg=25,pcs.Violet.nb,2==pcs.Violet.nb&&(phdmg=50,pcs.Violet.strg=50),1==pcs.Violet.nb&&(phdmg=75,pcs.Violet.strg=75),e.t.indexOf("defensive")>-1&e.t.indexOf("ph")>-1&&ecs[e.cm].s(),e.hp=e.hp-phdmg,ay="#bf360c"}},Finch:{nm:"Finch Marias",t:["defensive","ph","al"],nb:2,lr:"He never did mind taking a hit for those close to him. He was the best of us all.<br>-Wilbur Glidron",aty:"Cancels all ph dmg on first turn. Cancels all ph and al dmg on the second turn.",s:function(){phdmg=0,1==pcs.Finch.nb&&(phdmg=0,aldmg=0),ay="#2d9aff"}},Florent:{nm:"Sir Florent",t:["defensive","ph","al"],nb:2,lr:"Wronged by his own king, betrayed by his own people. All hope seemed lost for Sir Florent till The White God showed him a path.",aty:"Reflects 50% of all ph and al dmg on the first turn.",s:function(){e.hp=e.hp-Math.round((aldmg+phdmg)/2),aldmg=0,phdmg=0,pcs.Florent.nb,ay="#00564f"}},CarterHill:{nm:"Carter Hill",t:["offensive","ph"],nb:2,lr:"A lone man fighting a corrupt system would never leave a dent. Sir Carter Hill tried regardless, even in face of insurmountable odds. When God came on earth he knew joing The White Capes in his nm was the only answer.",aty:"Does 35 ph dmg and 25 ph dmg on the next turn.",s:function(){phdmg=35,e.t.indexOf("defensive")>-1&e.t.indexOf("ph")>-1&&ecs[e.cm].s(),e.hp=e.hp-phdmg,ay="#004bff"},sagain:function(){phdmg=25,e.t.indexOf("defensive")>-1&e.t.indexOf("ph")>-1&&ecs[e.cm].s(),e.hp=e.hp-phdmg}},Thralin:{nm:"Thralin Thralson",t:["al","offensive"],nb:3,lr:"Having faced many wrongs at the hands of the Giant of Nimbleville as a child, he resolved to never let others come to such harm. He joined Wilbur and slowly hones his skills, of which he possessed more than he knew of.",aty:"Does 25 al dmg. dmg increased by 25 each time it is used.",s:function(){aldmg=25,2==pcs.Thralin.nb&&(aldmg=50),1==pcs.Thralin.nb&&(aldmg=75),e.t.indexOf("defensive")>-1&e.t.indexOf("al")>-1&&ecs[e.cm].s(),e.hp=e.hp-aldmg,ay="#e64a19"}},Rhugh:{nm:"Rhugh",t:["al","ph","offensive"],nb:2,lr:"Rhugh and his hundreds had well earned respect in the Empire. The tales of his loyalty were legendary. Whatever the crises, the King knew there was always Rhugh he could rely on.",aty:"Does 35 al dmg on the first and 35 ph as well as al dmg on the second turn.",s:function(){aldmg=35,phdmg=0,1==pcs.Rhugh.nb&&(aldmg=35,phdmg=35);let n=e.t.indexOf("defensive"),t=e.t.indexOf("al"),d=e.t.indexOf("ph");n>-1&(t>-1||d>-1)&&ecs[e.cm].s(),e.hp=e.hp-aldmg-phdmg,ay="#880e4f"}},Bill:{nm:"Priest Bill",t:["defensive","al"],nb:2,lr:"He was the first Priest to see the White God in person. One of the founding fathers of the Order of The White Capes",aty:"Blocks all al dmg done. Reflects 50% of the al dmg back when used again.",s:function(){aldmg=0,1==pcs.Bill.nb&&(e.hp=e.hp-Math.round(aldmg/2),aldmg=0),ay="#000d2b"}},Evelyn:{nm:"Evelyn Griffiron",t:["special","heal"],nb:2,lr:"Freedom is the highest form of wealth.",aty:"Heals 50 hp. When used the second time, restores 50% of lost hp",s:function(){1!==pcs.Evelyn.nb&&(p.hp=p.hp+50,p.hp>mh&&(p.hp=mh)),1==pcs.Evelyn.nb&&(p.hp=p.hp+Math.round((mh-p.hp)/2)),ay="#01261f"}},Edwin:{nm:"Edwin",t:["ph","offensive","l"],nb:3,lr:"",aty:"Deals 50% of current e hp as ph dmg",s:function(){phdmg=.5*e.hp,e.t.indexOf("defensive")>-1&e.t.indexOf("ph")>-1&&ecs[e.cm].s(),e.hp=e.hp-phdmg,ay="#e65100"}},Wilbur:{nm:"Wilbur Glidron",t:["offensive","l","special"],nb:3,lr:"The Founding father of the White Capes.",aty:"Deals 50 true dmg. Rallies allies and calls a random card from the dk",s:function(){let n=pcsarr[Math.floor(Math.random()*pcsarr.length)];phand.push(n),prepdk[8]=n,d.getElementById("card8").style.display="block",d.getElementById("card8").src=n+".png",e.hp=e.hp-50,p.moves++,ay="#ddd9e0"}},Triston:{nm:"Triston Griffiron",t:["offensive","l","al"],nb:3,lr:"",aty:"Deals 50 percent of lost e hp.",s:function(){aldmg=.5*(mh-e.hp),e.t.indexOf("defensive")>-1&e.t.indexOf("al")>-1&&ecs[e.cm].s(),e.hp=e.hp-aldmg,ay="#1e7600"}},Roderick:{nm:"Roderick",t:["l","al","special"],nb:3,lr:"",aty:"Destroys e l",s:function(){for(i=0;i<ehand.length;i++){ecs[ehand[i]].t.indexOf("l")>-1&&(dst=ehand[i])}rmv(ehand,dst),e.moves--,ay="#602896"}},SC:{nm:"",t:"non legedary",aty:"Flip the card to view it. Hover over it for details.",lr:""}},ecs={Finch:{t:["defensive","ph","al"],s:function(){phdmg=0,1==ecs.Finch.nb&&(phdmg=0,aldmg=0)}},Violet:{t:["ph","offensive"],s:function(){phdmg=25,2==ecs.Violet.nb&&(phdmg=50),1==ecs.Violet.nb&&(phdmg=75),p.t.indexOf("defensive")>-1&p.t.indexOf("ph")>-1&&pcs[p.cm].s(),p.hp=p.hp-phdmg,ax="#ffeb3b"}},CarterHill:{t:["offensive","ph"],s:function(){phdmg=35,p.t.indexOf("defensive")>-1&p.t.indexOf("ph")>-1&&pcs[p.cm].s(),p.hp=p.hp-phdmg,ax="#5889ff"},sagain:function(){phdmg=25,p.t.indexOf("defensive")>-1&p.t.indexOf("ph")>-1&&pcs[p.cm].s(),p.hp=p.hp-phdmg}},Thralin:{t:["al","offensive"],s:function(){aldmg=25,2==ecs.Thralin.nb&&(aldmg=50),1==ecs.Thralin.nb&&(aldmg=75),p.t.indexOf("defensive")>-1&p.t.indexOf("al")>-1&&pcs[p.cm].s(),p.hp=p.hp-aldmg,ax="#ffab91"}},Rhugh:{t:["al","ph","offensive"],s:function(){aldmg=35,1==ecs.Rhugh.nb&&(aldmg=35,phdmg=35);let e=p.t.indexOf("defensive"),n=p.t.indexOf("al"),t=p.t.indexOf("ph");e>-1&(n>-1||t>-1)&&pcs[p.cm].s(),p.hp=p.hp-aldmg-phdmg,ax="#851f00"}},Bill:{t:["defensive","al"],s:function(){aldmg=0,1==ecs.Bill.nb&&(p.hp=p.hp-Math.round(aldmg/2),aldmg=0),ax="#a3beff"}},Evelyn:{t:["special","heal"],s:function(){1!=ecs.Evelyn.nb&&(e.hp=e.hp+50,e.hp>mh&&(e.hp=mh)),1==ecs.Evelyn.nb&&(e.hp=e.hp+Math.round((mh-e.hp)/2)),ax="#b2ff59"}},Florent:{t:["defensive","ph","al"],s:function(){p.hp=p.hp-Math.round((aldmg+phdmg)/2),aldmg=0,phdmg=0,ecs.Florent.nb,ax="#00d2c1"}},Edwin:{t:["ph","offensive","l"],s:function(){phdmg=.5*p.hp,p.t.indexOf("defensive")>-1&p.t.indexOf("ph")>-1&&pcs[p.cm].s(),p.hp=p.hp-phdmg,ax="#ffea00"}},Wilbur:{t:["offensive","l","special"],s:function(){let n=ecsarr[Math.floor(Math.random()*ecsarr.length)];ehand.push(n),p.hp=p.hp-50,e.moves++,ax="#3e1a61"}},Triston:{t:["offensive","l","al"],s:function(){aldmg=.5*(mh-p.hp),p.t.indexOf("defensive")>-1&p.t.indexOf("al")>-1&&pcs[p.cm].s(),p.hp=p.hp-aldmg,ax="#2eb200"}},Roderick:{t:["l","al","special"],s:function(){d.getElementById("card8").style.display="none",rmv(phand,p.lcard),p.moves--,ax="#3e1a61"}},Placecard:{nm:"placecard",t:[""],s:function(){}},undefined:{nm:"placecard",t:[""],s:function(){}}};if(el=e.l[Math.floor(Math.random()*e.l.length)],rmv(e.l,el),"Edwin"==el||"Roderick"==el)for(ehand[0]=el,i=1;i<8;i++)ehand[i]=ecsarr[Math.floor(Math.random()*ecsarr.length)],rmv(ecsarr,ehand[i]);else if("Triston"==el){let e=rdn(3)+5;for(i=0;i<e;i++)ehand[i]=ecsarr[Math.floor(Math.random()*ecsarr.length)],rmv(ecsarr,ehand[i]);for(ehand[e]=el,i=e+1;i<8;i++)ehand[i]=ecsarr[Math.floor(Math.random()*ecsarr.length)],rmv(ecsarr,ehand[i])}else{let e=rdn(8);for(i=0;i<e;i++)ehand[i]=ecsarr[Math.floor(Math.random()*ecsarr.length)],rmv(ecsarr,ehand[i]);for(ehand[e]=el,i=e+1;i<8;i++)ehand[i]=ecsarr[Math.floor(Math.random()*ecsarr.length)],rmv(ecsarr,ehand[i])}var cardclick=[0,0,0,0,0,0,0,0];function card(e){let n=e.getAttribute("id");n=n.slice(-1),n=parseInt(n),0==cardclick[n]?(e.src=prepdk[n]+".png",cardclick[n]++):(pdk[cardnb]=prepdk[n],rmv(phand,pdk[cardnb]),cardnb++,e.style.display="none",d.getElementById("pcard").src=prepdk[n]+".png",fight())}function fight(){if(p.cm=pdk[turn-1],e.cm=ehand.shift(),e.t=ecs[e.cm].t,e.dp[turn-1]=e.cm,p.t=pcs[p.cm].t,turn>1&&(p.pm=pdk[turn-2],e.pm=e.dp[turn-2],"CarterHill"==e.pm&&ecs.CarterHill.sagain(),"CarterHill"==p.pm&&pcs.CarterHill.sagain()),d.getElementById("ecard").src=e.cm+".png",ecs[e.cm].s(),pcs[p.cm].s(),e.dp[turn-1]=e.cm,ecs[e.cm].nb--,pcs[p.cm].nb--,p.moves--,e.moves--,turn++,e.hp<0&&(e.hp=0),p.hp<0&&(p.hp=0),d.getElementById("ehp").innerHTML=e.nm+" HP ="+e.hp+"/"+mh,d.getElementById("php").innerHTML=p.nm+" HP ="+p.hp+"/"+mh,d.body.style="background: linear-gradient(289deg, "+ay+", "+ax+");animation: Anm 7s ease infinite;background-size: 400% 400%;",p.moves<=0&e.moves>0){let n=ehand.length;for(k=0;k<=n;k++)ecs[ehand.shift()].s();e.moves=0}if(p.moves>0&e.moves<=0&&(d.getElementById("einfo").innerHTML=e.nm+" is out of cards!"),0==e.hp||0==p.hp||e.moves<=0&p.moves<=0)for(d.getElementById("pinfo").innerHTML='<div onclick="location.reload();">PLAY AGAIN!</div>',d.getElementById("pinfo").style.background="rgba(0, 0, 0, 0.603)",p.hp>e.hp?(d.getElementById("ms").innerHTML="YOU WON!",win()):p.hp<e.hp?(d.getElementById("ms").innerHTML="YOU LOST!",lost()):p.hp==e.hp&&(d.getElementById("ms").innerHTML="TIE!",lost()),m=0;m<=8;m++)d.getElementById("card"+m).style.display="none"}var d1=0;function draw(){if(0==d1){for(i=0;i<7;i++)prepdk[i]=pcsarr[Math.floor(Math.random()*pcsarr.length)],phand[i]=prepdk[i],rmv(pcsarr,prepdk[i]),d.getElementById("card"+i).style.display="block";prepdk[8]=p.l[Math.floor(Math.random()*p.l.length)],phand[8]=prepdk[8],p.lcard=prepdk[8],rmv(p.l,prepdk[8]),d.getElementById("card8").style.display="block",d.getElementById("ecard").src="SC.png",d.getElementById("einfo").innerHTML=e.nm+" has played his card!",d.getElementById("draw").innerHTML="Reveal All",d1++}else{for(i=0;i<7;i++)d.getElementById("card"+i).src=prepdk[i]+".png",cardclick[i]=1;d.getElementById("card8").src=prepdk[8]+".png",d.getElementById("draw").innerHTML="Good Luck!"}}function di(e){d.getElementById("dict").style.background="url("+e+".png)",d.getElementById("nm").innerHTML=pcs[e].nm,d.getElementById("Title").innerHTML=" type : "+pcs[e].t,d.getElementById("aty").innerHTML=pcs[e].aty+"</br></br>"+pcs[e].lr}function help(){d.getElementById("dict").style="overflow: auto;",d.getElementById("nm").innerHTML="How to Play",d.getElementById("Title").innerHTML="Player with the highest hp at the end of the round wins. Hover over the cards to see details. Each hand has has 8 cards with 1 legendary card.",d.getElementById("aty").innerHTML="ph- physical<br></br>al- alchemy<br>l- legendary</br>"}function cd(e){di(e.getAttribute("src").slice(0,-4))}