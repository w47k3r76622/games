function startgame(){var t=c.getContext("2d");t.clearRect(0,0,c.width,c.height);var i=1e3/60;gameSetup();var e=function(){updateGame(),drawGame()};setInterval(e,i)}function gameSetup(){GameController.blockers.push(new CeilBlocker(0),new Blocker(150),new Blocker(300),new CeilBlocker(450),new CeilBlocker(600))}function updateGame(){GameController.update()}function drawGame(){ctx.clearRect(0,0,c.width,c.height),drawHUD(),player.draw(),GameController.draw()}function drawHUD(){ctx.rect(0,0,actualWidth,actualHeight),ctx.stroke(),ctx.fillStyle="#000000",ctx.font="24px Helvetica",ctx.fillText("Speed Up - <",actualWidth-350,200),ctx.fillText("Slow Down - >",actualWidth-350,230),ctx.fillText("Change Position - space bar",actualWidth-350,260),ctx.fillStyle="#990000",ctx.fillText("Steps spent colliding "+stepsSpentCollided,actualWidth-350,290),ctx.fillStyle="#000000",ctx.fillRect(0,0,actualWidth,actualHeight/2)}function dealWithKeyboardUp(t){"32"==t.keyCode&&player.reverse()}function dealWithKeyboardDown(t){"37"==t.keyCode&&gameSpeed++,"39"==t.keyCode&&(gameSpeed--,0>gameSpeed&&(gameSpeed=0))}function collides(t,i){return t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.y+t.height>i.y}var c=document.getElementById("myCanvas"),ctx=c.getContext("2d"),actualWidth=ctx.canvas.width,actualHeight=ctx.canvas.height,gameSpeed=0,stepsSpentCollided=0,c=document.getElementById("myCanvas"),ctx=c.getContext("2d"),actualWidth=ctx.canvas.width,actualHeight=ctx.canvas.height,player={isDown:!0,x:120,y:290,width:40,height:40,draw:function(){ctx.fillStyle="#000000",ctx.fillRect(this.x,this.y-this.width,this.width,this.height)},reverse:function(){player.isDown=!player.isDown,player.y=player.isDown?floor_y:ceil_y}};ceil_y=200,floor_y=290;var CeilBlocker=function(t){console.log("creating CeilBlocker"),this.swap=!1,this.width=50,this.height=50,this.x=t,this.y=this.width,this.draw=function(){this.swap?(ctx.fillStyle="#990000",ctx.fillRect(this.x,this.y-this.width,this.width,this.height)):ctx.clearRect(this.x,this.y-this.width,this.width,this.height)},this.update=function(t){this.x+=10*t,this.x>actualWidth?(this.x=0,this.swap=!this.swap):this.x<-this.width&&(this.x=actualWidth,this.swap=!this.swap),this.y=this.swap?actualHeight/2+this.width:this.width}},Blocker=function(t){console.log("creating Blocker"),this.swap=!1,this.width=50,this.height=50,this.x=t,this.y=actualHeight/2,this.draw=function(){this.swap?(ctx.fillStyle="#009900",ctx.fillRect(this.x,this.y-this.width,this.width,this.height)):ctx.clearRect(this.x,this.y-this.width,this.width,this.height)},this.update=function(t){this.x+=10*t,this.x>actualWidth?(this.x=0,this.swap=!this.swap):this.x<-this.width&&(this.x=actualWidth,this.swap=!this.swap),this.y=this.swap?actualHeight:actualHeight/2}},GameController={blockers:[],draw:function(){for(var t in this.blockers)this.blockers[t].draw()},update:function(){for(var t in this.blockers)this.blockers[t].update(gameSpeed/100),collides(player,this.blockers[t])&&stepsSpentCollided++}};startgame(),window.addEventListener("keyup",dealWithKeyboardUp,!1),window.addEventListener("keydown",dealWithKeyboardDown,!1);