<body style="margin:auto;overscroll-behavior:contain;"><canvas id=a style="max-width: 100%;max-height: 100%;"><script>c=a.getContext`2d`,ot=kP=rD=tS=lS=$=s=o=0,img=new Image,img.src="r.png",iO=[[0,0,21,43],[25,0,34,32],[63,0,26,36],[93,0,37,72],[126,83,43,52],[36,76,16,18],[56,76,25,22],[85,76,27,18],[24,42,37,29],[134,0,53,50],[134,54,27,29],[0,54,16,14],[0,112,6,23],[8,101,106,13]],getW=e=>iO[e][2]*S,getH=e=>iO[e][3]*S,reS=(e,t,a)=>c.drawImage(img,iO[e][0],iO[e][1],iO[e][2],iO[e][3],t,a,getW(e),getH(e)),PS=32,CS=160,S=4,p={mv:3,cO:{get x(){return p.x-80},get y(){return p.y-80},w:160,h:160},aT:new Set,image:0},p.w=p.h=32,p.vx=p.vy=p.mx=p.my=0,lim=(e,t,a)=>e<t?t:e>a?a:e,col=(e,t)=>e.x+e.w>t.x&&e.x<t.x+t.w&&t.y+t.h>e.y&&t.y<e.y+e.h,getC=e=>`#${"4fdabcda4f4ffffffffb7d7d000000".substr(6*e,6)}`,document.body.style.background=getC(4),setC=e=>c.fillStyle=c.strokeStyle=getC(e),rnd=(e,t)=>~~(Math.random()*(t-e)+e);class e{constructor(e,t,a,s=rnd(-20,20),i=rnd(-20,20)){$=this,$.vx=s,$.vy=i,$.x=e,$.y=t,$.lif=80,$.co=a}upd(){$=this,$.x+=$.vx-=$.vx/14,$.y+=$.vy-=$.vy/14,c.globalAlpha=$.lif--/80,setC($.co),c.fillRect($.x,$.y,6,6),c.globalAlpha=1}}class r extends e{upd(){$=this,$.x+=$.vx-=$.vx/20,$.y+=$.vy-=$.vy/20,c.globalAlpha=$.lif--/40,c.translate($.x,$.y),c.scale($.lif/80,$.lif/80),reS($.co,-getW($.co)/2,-getH($.co)/2),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1}}class n{constructor(){$=this,$.x=rnd(0,w),$.y=rnd(0,h),$.freq=5*Math.random(),$.lif=rnd(2,4)}upd(e){$=this;let t=~~(Math.cos($.freq*e)+$.lif);c.fillRect($.x,$.y,t,t)}}class l{dead=!1;constructor(){$=this,$.parent=arguments[0],$.image=rnd(4,12),$.w=getW($.image),$.h=getH($.image),$.weight=$.h*$.w/1e3,o=1&new Date;const[e,t]=m(o);$.x=e-$.w*o,$.y=t-$.h*o,$.vx=rnd(0,w)-$.x,$.vy=rnd(0,h)-$.y,$.vx/=w,$.vy/=h,$.wihtinScreen=!1}upd(e){$=this,$.x+=$.vx*e,$.y+=$.vy*e,reS($.image,$.x,$.y),$.wihtinScreen||($.wihtinScreen=$.x+$.w>0&&$.x<w&&$.y+$.h>0&&$.y<h),$.wihtinScreen&&($.x<0&&($.vx=Math.abs($.vx)),$.x+$.w>w&&($.vx=-Math.abs($.vx)),$.y<0&&($.vy=Math.abs($.vy)),$.y+$.h>h&&($.vy=-Math.abs($.vy)))}}class f extends l{constructor(){super(arguments[0]),$=this,$.x=$.parent.x,$.y=$.parent.y,$.image=11+(1&new Date),$.w=$.h=50,$.weight=.2}}class g{dead=!1;constructor(e=rnd(0,w-120),t=rnd(0,h-120),a=5){$=this,$.x=e,$.y=t,$.h=$.w=100,$.rC=a}upd(e){this.rC-=7*e/1e3}}function m(e){return 1&new Date?[e?-50:w+50,rnd(0,h)]:[rnd(0,w),e?-50:h+50]}class u extends g{image=3;constructor(e,t,a=3){[e,t]=m(),super(e,t,a);const[s,i]=m(1);$=this,$.vx=s-e,$.vy=i-t,$.x0=e,$.y0=t}upd(e){for(super.upd(e),$=this,c.translate($.x0,$.y0),c.rotate(Math.atan2($.vx,-$.vy)),i=0;i++<16;)reS(2,-getW(2),-getH(2)*i);if(c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,Math.random()<.01&&X.push(new f($)),$.rC<0&&($.x=$.x0-$.vx*$.rC/5,$.y=$.y0-$.vy*$.rC/5,dR($)),$.rC<=0){col(p,b)&&(s=9,txt="You crashed into a spaceship",Sp(p,1));for(let e of X.filter((e=>e instanceof l)))col(b,e)&&e.parent!=$&&(e.dead=!0,kP++,Sp(e,0))}$.dead|=$.rC<=-5}}class v extends g{sz=1;image=1;upd(e){if(super.upd(e),$=this,setC(3),$.rC>0?(reS(13,$.x-120,$.y),sF(3),c.fillText("Black hole warning "+$.rC.toFixed(1),$.x+75-120,$.y+37)):(c.translate($.x,$.y),c.scale($.sz,$.sz),reS($.image,0,0),c.setTransform(1,0,0,1,0,0),$.sz-=1*e/1e3),$.rC<=0){col(p,$)&&(s=9,txt="You fell into a black hole",sC(p,$));let e={x:$.x-160,y:$.y-160,w:$.w+320,h:$.h+320};for(let t of X.filter((e=>e instanceof l)))col($,t)&&(sC(t,$),t.dead=!0,$.sz=lim($.sz+.1,0,1.5),rD+=t.weight),col(e,t)&&this.accT(t)}$.sz<.2&&($.dead=!0,Sp($,2))}accT(e){const a=this.x-e.x,s=this.y-e.y,i=20*Math.sqrt(a*a+s*s);e.vx=lim(e.vx+a/i*t,-3,3),e.vy=lim(e.vy+s/i*t,-3,3)}}txt="Welcome to Space",X=[],spawnNewEnemies=e=>{for(i=0;i<2;i++)X.push(new l);X.filter((e=>e instanceof u)).length<1?X.push(new u):X.filter((e=>e instanceof v)).length<1?X.push(new v):X.push(new(1&new Date?u:v))},Y=[],bg=[],Sp=(t,a=1)=>{for(i=rnd(20,35);i--;)Y.push(new e(t.x+t.w/2,t.y+t.h/2,a))},getGrade=e=>(U="D",kP<1?U="S":kP<10?U="A":kP<20?U="B":kP<50&&(U="C"),rD<200?U+="-":rD>500?U+="+":rD>1e3&&(U+="++"),U),sC=(e,t)=>{dx=t.x+t.w/2-e.x-e.w/2,dy=t.y+t.h/2-e.y-e.h/2,Y.push(new r(e.x+e.w/2,e.y+e.h/2,e.image,dx/20,dy/20))},sF=e=>c.font=`${e}0px Impact,Arial`,getT=e=>tS/1e3,gameLoop=e=>{for(pa of(a.width=w=a.height=h=1280,c.imageSmoothingEnabled=!1,c.webkitImageSmoothingEnabled=!1,c.mozImageSmoothingEnabled=!1,c.msImageSmoothingEnabled=!1,c.oImageSmoothingEnabled=!1,t=(e-ot)/7,ot=e,e/=1e3,setC(2),bg))pa.upd(e);switch(setC(8==s?0:1),sF(9),c.fillText(txt,20,150),s){case 0:p.x=p.y=w,s++;case 1:p.mx=lim(e*w/2,0,2*w/3),p.my=h/3,e>1.2&&(s++,p.mx=p.my=void 0);case 2:sF(4),e>2.5&&c.fillText("Press anywhere to move",20,210),setC(2),e>1.2&&!p.mx&&c.fillText("Wow, I'm in space!",900,710);break;case 3:sF(4),setC(2),c.fillText("Bilionaire space tourists have been producing a lot of waste",20,250),c.fillText("and we're running out of space for new ships. Your job is to",20,300),c.fillText("clean up and protect our customers from incoming space debris.",20,350),c.fillText("Recycle as much trash as possible, while protecting the tourists",20,450);break;case 8:sF(4),rM(),setC(0),c.globalAlpha=.1,c.fillRect(0,20,w,350),c.globalAlpha=1,c.fillText("Passengers killed: "+kP,20,220),c.fillText("Trash recycled: "+rD.toFixed(1)+"kg",20,270),c.fillText("Total grade: "+getGrade(),20,320);break;case 9:sF(4),rM(),setC(1),c.globalAlpha=.1,c.fillRect(0,20,w,350),c.globalAlpha=1,p.x=p.y=-1e6,c.fillText("Passengers killed: "+kP,20,220),c.fillText("Trash recycled: "+rD.toFixed(1)+"kg",20,270),c.fillText("Time survived: "+getT().toFixed(1)+"h",20,320);break;case 4:sF(3),e-lS>4&&9!=s&&(lS=e,spawnNewEnemies()),tS+=t,!p.mx&&p.aT.clear(),c.lineWidth=3,setC(0),c.beginPath(),p.mv=4,p.aT.forEach((e=>{let a=p.x+p.w/2,s=p.y+p.h/2,i=e.x+e.w/2,o=e.y+e.h/2;c.moveTo(a,s),c.lineTo(i,o),dx=a-i,dy=s-o,dx*dx+dy*dy>25600&&(d=Math.sqrt(dx*dx+dy*dy)/e.weight*.002*t,k=Math.atan2(dy,dx),e.vx=lim(e.vx+Math.cos(k)*d,-4,4),e.vy=lim(e.vy+Math.sin(k)*d,-4,4)),e.vx-=e.vx/90,e.vy-=e.vy/90,p.mv=lim(p.mv-e.weight/50,1.5,4)})),c.stroke(),p.aT=new Set([...p.aT].filter((e=>!e.dead))),rM(e),s<9&&(setC(2),c.fillText(`Time: ${getT().toFixed(1)}h`,20,50),c.fillText(`Passengers killed: ${kP}`,470,50),c.fillText(`Debris recycled: ${rD.toFixed(1)}kg`,950,50),getT()>=8&&(s=8,txt="Good job on your first day"))}s<9&&(p.y+=p.vy*t,p.x+=p.vx*t,p.mx?(dx=-p.x+p.mx,dy=-p.y+p.my,d=Math.sqrt(dx*dx+dy*dy),k=Math.atan2(dy,dx),p.vx=Math.cos(k)*p.mv,p.vy=Math.sin(k)*p.mv):(p.vx*=.98,p.vy*=.98),p.x=lim(p.x,0,w-p.w),p.y=lim(p.y,0,h-p.h),dR(p)),requestAnimationFrame(gameLoop)},rM=e=>{for(b of X)b instanceof l&&col(p.cO,b)&&p.mx&&p.aT.add(b),b.upd(t);for(pa of(X=X.filter((e=>!e.dead)),Y))pa.upd(e);Y=Y.filter((e=>e.lif>0))},dR=e=>{c.translate(e.x+getW(e.image)/5,e.y+getH(e.image)/5),c.rotate(Math.atan2(e.vx,-e.vy)),reS(e.image,-getW(e.image)/2,-getH(e.image)/2),c.setTransform(1,0,0,1,0,0)},img.onload=e=>{for(gameLoop(9),i=120;i--;)bg.push(new n)},onclick=e=>{switch(x=e.pageX,y=e.pageY,s){case 2:zzfxV=.5,zzfxR=44100,zzfx=(...e)=>zzfxP(zzfxG(...e)),zzfxP=(...e)=>{let t=zzfxX.createBufferSource(),a=zzfxX.createBuffer(e.length,e[0].length,44100);return e.map(((e,t)=>a.getChannelData(t).set(e))),t.buffer=a,t.connect(zzfxX.destination),t.start(),t},zzfxG=(e=1,t=.05,a=220,s=0,i=0,o=.1,r=0,n=1,l=0,c=0,$=0,h=0,x=0,p=0,d=0,f=0,g=0,y=1,m=0,w=0)=>{let u,v,b=2*Math.PI,M=l*=500*b/44100**2,T=(0<d?1:-1)*b/4,z=a*=(1+2*t*Math.random()-t)*b/44100,S=[],C=0,k=0,P=0,X=1,D=0,F=0,A=0;for(c*=500*b/44100**3,d*=b/44100,$*=b/44100,h*=44100,x=44100*x|0,v=(s=99+44100*s)+(m*=44100)+(i*=44100)+(o*=44100)+(g*=44100)|0;P<v;S[P++]=A)++F%(100*f|0)||(A=r?1<r?2<r?3<r?Math.sin((C%b)**3):Math.max(Math.min(Math.tan(C),1),-1):1-(2*C/b%2+2)%2:1-4*Math.abs(Math.round(C/b)-C/b):Math.sin(C),A=(x?1-w+w*Math.sin(2*Math.PI*P/x):1)*(0<A?1:-1)*Math.abs(A)**n*e*.5*(P<s?P/s:P<s+m?1-(P-s)/m*(1-y):P<s+m+i?y:P<v-g?(v-P-g)/o*y:0),A=g?A/2+(g>P?0:(P<v-g?1:(v-P)/g)*S[P-g|0]/2):A),u=(a+=l+=c)*Math.sin(k*d-T),C+=u-u*p*(1-1e9*(Math.sin(P)+1)%2),k+=u-u*p*(1-1e9*(Math.sin(P)**2+1)%2),X&&++X>h&&(a+=$,z+=$,X=0),!x||++D%x||(a=z,l=M,X=X||1);return S},zzfxX=new(AudioContext||webkitAudioContext),zzfxM=(e,t,a,s=125)=>{let i,o,r,n,l,c,$,h,x,p,d,f,g,y,m,w=0,u=[],v=[],b=[],M=0,T=0,z=1,S={},C=44100/s*60>>2;for(;z;M++)u=[z=h=d=g=0],a.map(((s,d)=>{for($=t[s][M]||[0,0,0],z|=!!t[s][M],m=g+(t[s][0].length-2-!h)*C,y=d==a.length-1,o=2,n=g;o<$.length+y;h=++o){for(l=$[o],x=o==$.length+y-1&&y||p!=($[0]||0)|l|0,r=0;r<C&&h;r++>C-99&&x?f+=(f<1)/99:0)c=(1-f)*u[w++]/2||0,v[n]=(v[n]||0)-c*T+c,b[n]=(b[n++]||0)+c*T+c;l&&(f=l%1,T=$[1]||0,(l|=0)&&(u=S[[p=$[w=0]||0,l]]=S[[p,l]]||(i=[...e[p]],i[2]*=2**((l-12)/12),l>0?zzfxG(...i):[])))}g=m}));return[v,b]};const e=zzfxM([[1.2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[,0,35,.002,.02,.08,3,,,,,,,,,.051,.01],[3,0,44,,,.25,,,,,,,,2]],[[[1,,15,,18,,22,,15,,18,,22,,15,,18,,22,,15,,18,,22,,15,,18,,13,,18,,8,,12,,15,,8,,12,,15,,8,,12,,15,,8,,12,,15,,10,12,12,13,10,,13,,],[,1,,,15,,15,,,,15,,,,15,,,,15,,,,15,,27,,27,,27,,27,,,,8,,,,8,,,,8,,,,8,,,,,,8,,8,,,,8,,8,,8,,,,]],[[1,,15,,18,,22,,15,,18,,22,,15,,18,,22,,15,,18,,22,,15,15,15,18,13,,18,,8,,12,,15,,8,,12,,15,,8,,12,,15,,8,,12,,15,,10,12,12,13,10,,13,,],[,-1,,,15,,15,,,,15,,15,,15,,,,15,,,,15,,,,15,27,27,27,15,,,,8,,,,8,,,,8,,,,8,,,,,,8,,8,,,,8,,8,,8,,,,],[2,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,20,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,20,,20,32,,,20,,,,]],[[1,,27,29,30,34,34,32,30,29,27,25,27,29,30,32,34,,27,29,,32,34,32,30,29,27,,25,,27,,8,,12,,15,,8,,12,,15,,20,,24,,27,,20,,24,,27,,34,,25,,13,,10,,13,,],[,1,15,,15,,15,,,,15,,15,,15,,,,15,,15,,15,,,,15,,,,,,8,,8,,8,,,,8,,8,,,,8,,8,,,,8,,8,,,,13,,13,,8,,1,,],[2,,20,,20,,20,,20,,20,,20,,20,,20,,20,,,20,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,30,,20,,,,20,,,,]]],[1,2,1,1,2],120);zzfxP(...e).loop=!0;case 3:s++,txt=""}},onpointerup=ontouchend=onpointerdown=onpointermove=ontouchmove=e=>{if(e.touches?e.touches.length:e.pressure){e.touches&&(e=e.touches[0]);const t=a.getBoundingClientRect();p.mx=(e.clientX-t.left)*w/t.width,p.my=(e.clientY-t.top)*h/t.height}else p.mx=p.my=void 0}</script>