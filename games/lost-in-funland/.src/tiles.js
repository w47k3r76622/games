tile_w=32,tile_h=32,tiles={0:{sprite:void_sprite,solid:0,isTrigger:!1,isSpike:!1,isBuff:!1,nextTiles:{0:6,1:0,2:3,3:0,4:0,5:0}},1:{sprite:wall_unportalable_sprite,solid:1,isTrigger:!1,isSpike:!1,isBuff:!1,nextTiles:{0:0,1:5,2:0,3:3,4:1,5:1}},2:{sprite:slope_45deg_right,solid:2,isTrigger:!1,isSpike:!1,isBuff:!1,solidity:function(i,e){return e>tile_w-i},nextTiles:{0:0,1:8,2:0,3:0,4:0,5:2}},3:{sprite:slope_45deg_left,solid:2,isTrigger:!1,isSpike:!1,isBuff:!1,solidity:function(i,e){return e>i},nextTiles:{0:10,1:0,2:0,3:0,4:0,5:0}},4:{sprite:spike,solid:2,isTrigger:!1,isSpike:!0,isBuff:!1,solidity:function(i,e){return e<i},nextTiles:{0:0,1:4,2:0,3:3,4:3,5:0}},5:{sprite:buff,solid:2,isTrigger:!1,isSpike:!1,isBuff:!0,solidity:function(i,e){return e<tile_w-i},nextTiles:{0:0,1:4,2:0,3:3,4:0,5:3}},6:{sprite:trigger,solid:0,isTrigger:!0,isSpike:!1,isBuff:!1}},is_solid=function(i,e){var r=Math.floor(e/tile_h),t=Math.floor(i/tile_w);if(0===tiles[maps[current_map][r][t]].solid)return!1;if(1===tiles[maps[current_map][r][t]].solid)return!0;var s=i-t*tile_w,l=e-r*tile_h;return tiles[maps[current_map][r][t]].solidity(s,l)},is_trigger=function(i,e){var r=Math.floor(e/tile_h),t=Math.floor(i/tile_w);return tiles[maps[current_map][r][t]].isTrigger},is_spike=function(i,e){var r=Math.floor(e/tile_h),t=Math.floor(i/tile_w);return tiles[maps[current_map][r][t]].isSpike},is_buff=function(i,e){var r=Math.floor(e/tile_h),t=Math.floor(i/tile_w);return tiles[maps[current_map][r][t]].isBuff},is_badFloor=function(i){var e=0;if("3"===i[i.length-1])return!0;for(t in i)if("0"===i[t]?e++:e=0,e>3)return!1;return!0},generateLevel=function(e){var r,t,s=generateTransition(25),l=[];for(floors=0;floors<=e;floors++){for(r="1",i=1;i<map_maxWidth-1;i++)prevTile=r[i-1],r+=generateTile(prevTile),"";is_badFloor(r)||(l.push(r+"1"),l.push("1"+"0".repeat(map_maxWidth-2)+"1"),l.push("1"+"0".repeat(map_maxWidth-2)+"1"),l.push("1"+"0".repeat(map_maxWidth-2)+"1"))}return t="1"+"6".repeat(map_maxWidth-2)+"1",s.concat(l,generateTransition(10),t,generateTransition(10))},generateTransition=function(i){var e=[];for(floors=0;floors<=i;floors++)e.push("1"+"0".repeat(map_maxWidth-2)+"1");return e},generateTile=function(i){var e="";for(var r in tiles[i].nextTiles)e+=r.repeat(tiles[i].nextTiles[r]);return e[Math.floor(Math.random()*e.length)]};