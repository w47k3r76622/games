<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><title>JS13k 2024</title><style>*{margin:0;padding:0;user-select:none;-webkit-user-select:none;-moz-user-select:none;touch-action:none}body{overflow:hidden;background:#000}#wrapper{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden}canvas{position:absolute;image-rendering:pixelated;image-rendering:crisp-edges}</style><script type="text/javascript">const aa=[,,,,68,68,64,64,170,160,,,85,245,245,80,78,142,46,64,162,68,138,,234,136,72,224,68,128,,,104,136,136,96,194,34,34,192,4,228,228,,4,78,68,,,,68,128,,14,,,,,4,64,34,68,136,,74,170,170,64,76,68,68,224,234,46,136,224,234,36,42,224,136,170,226,32,232,226,42,224,234,142,170,224,226,34,34,32,234,164,170,224,234,174,42,224,4,64,4,64,4,64,4,72,2,72,66,,,224,224,,8,66,72,,234,38,64,64,234,162,234,224,234,174,170,160,202,172,170,192,234,136,138,224,202,170,170,192,234,140,138,224,234,140,136,128,234,138,170,224,170,174,170,160,228,68,68,224,226,34,42,224,170,204,170,160,136,136,138,224,174,234,170,160,170,238,234,160,234,170,170,224,234,174,136,128,234,170,172,32,234,174,202,160,234,142,42,224,228,68,68,64,170,170,170,224,170,170,170,64,170,170,238,160,170,68,74,160,170,228,68,64,234,36,138,224,232,136,136,224,8,132,66,32,226,34,34,224,78,160,,,,,,14,136,64,,,,226,234,224,136,234,170,224,,234,138,224,34,234,170,224,,234,232,224,,232,200,128,,234,174,46,136,234,170,160,64,196,68,224,32,98,34,174,136,170,202,160,196,68,68,224,,174,234,160,,234,170,160,,234,170,224,,234,174,136,,234,174,34,,234,136,128,,232,226,224,68,228,68,96,,170,170,224,,170,164,64,,170,238,160,,170,74,160,,170,174,46,,226,72,224,2,100,196,98,4,68,4,68,8,196,100,200,10,232,,,];function d(a,b,g,c,e){var f=ba;f.save();f.fillStyle=e;for(e=0;e<g.length;e++){var q=g.charCodeAt(e)-32;if(!(0>q||94<q))for(var v=0,y=0,C=0;4>C;C++){for(var t=aa[4*q+C]||0,w=0;8>w;w++)t&1<<8-w&&f.fillRect(Math.floor(a+4*e*c+v*c),Math.floor(b+c*y),Math.ceil(c),Math.ceil(c)),v++,4==v&&(v=0,y++);f.stroke()}}f.restore()}var ca=[{width:3,height:2,title:"Simple",g:[,,2,3,1,1]},{width:3,height:2,title:"Block",g:[1,1,1,3,4,2]},{width:3,height:3,title:"Button",g:[5,,,1,,,3,4,2]},{width:7,height:5,title:"Count",g:[3,,,5,,1,,1,1,1,1,1,4,1,,,6,,,,1,2,4,,5,,1,1,,1,1,1,1,1]},{width:7,height:7,title:"Untitled",g:[1,1,7,1,4,6,1,1,,,1,,,1,1,,,1,,,1,1,,,1,,,1,1,,,1,,,1,1,5,,1,,2,1,,,,3,,,]},{width:8,height:8,title:"Amelie",g:[1,1,,,,5,,2,7,,,1,7,1,1,4,1,,,1,,,,,1,5,,1,4,1,,,1,,,,,1,5,6,1,1,4,1,,,,1,1,,,1,1,,1,1,3,,,,1,1,1]},{width:8,height:8,title:"Seven",g:[,1,5,1,,1,1,1,1,1,,1,7,1,,3,4,,,,,,,4,1,1,,1,5,1,,1,,7,1,1,,1,7,1,1,1,,,,,,,1,,1,7,1,,1,2,1,5,1,,1,4,1]},{width:8,height:8,title:"Ethan",g:[3,1,1,,5,1,1,,,,1,7,1,,4,1,,,,,,,1,1,1,1,1,7,1,1,6,1,1,,,,,,,,1,1,1,6,4,1,1,,,7,,,,,1,,6,5,6,,,1,1,2]},{width:8,height:8,title:"UWU",g:[,,,,,1,1,1,1,5,,1,7,4,,1,7,,,1,7,,,1,1,1,3,,2,,1,4,1,,,,,1,6,,1,,,1,1,1,,,1,,1,1,,1,1,,1,1,1,,,,5]},{width:8,height:8,title:"Dix",g:[3,,7,1,1,1,1,7,1,,1,,,,,1,1,,1,,1,1,1,1,1,,1,,1,,,,1,,1,,1,6,1,1,1,,1,,7,,,1,1,,1,,1,,,4,1,7,1,,5,,,2]},{width:8,height:8,title:"Legs",g:[1,1,7,1,6,1,1,,1,,1,,,1,1,1,1,,1,,,,,4,1,,1,1,1,,1,1,7,,1,,5,,7,,1,,1,1,1,,1,2,1,,,,,,,,1,1,1,1,7,1,1,3]},{width:8,height:8,title:"Zwolf",g:[1,1,1,6,5,,2,,1,,,,,,4,,1,1,1,1,1,1,1,1,,,1,,,,,,1,1,4,,5,1,1,,1,,,,,,1,1,1,1,1,1,1,1,1,,,1,,3,,1,,]},{width:8,height:8,title:"Unlucky for some",g:[,,,,2,,,,,1,4,1,4,,1,,,1,,,,,1,,1,1,,1,1,1,1,5,5,1,1,7,1,,1,1,,1,,,,,1,,,1,1,1,1,1,1,,,,,3,1,,,]},{width:8,height:8,title:"14",g:[3,,,,,,,7,7,,,,,1,1,1,1,,,,1,1,,1,1,,,7,1,,,1,1,,1,1,,,,1,1,1,1,,,,,7,7,1,,,,,,4,5,,,,,,,2]},{width:8,height:8,title:"Cans",g:[,7,,,1,1,1,1,1,5,,,2,,,1,,1,,,,,,1,,1,,,,,,1,,1,,,,7,1,7,,1,,,,,,1,,1,,,1,,,1,1,3,1,4,1,1,1,1]},{width:8,height:8,title:"Bruh",g:[5,,,,,,,6,6,7,1,7,1,1,,1,,,,,,7,4,1,,1,7,1,,1,,7,1,1,,1,,7,,1,7,,,1,7,1,,7,1,1,,,,,,1,,3,,2,1,7,1,1]},{width:8,height:8,title:"Seventeen",g:[1,7,1,7,1,,2,,6,,5,,1,,1,,,,,7,1,4,7,1,1,7,1,1,7,,1,,,1,,,,,7,1,1,7,,5,7,,,,,4,,,1,1,1,3,,1,1,1,7,1,,]},{width:8,height:8,title:"One Eight",g:[1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,3,4,4,4,7,1,4,4,4,4,4,1,1,4,4,4,4,4,1,7,4,4,4,4,4,7,1,4,4,4,4,4,1,1,4,4,4,4,4,2,7,4,4,4,4,4,4]},{width:11,height:9,title:"XIX",g:[,,,4,4,4,4,4,,,,,,,4,1,1,1,4,,,,4,4,4,4,1,1,1,4,4,4,4,4,1,1,4,4,7,4,4,1,1,4,4,1,1,1,7,3,7,1,1,1,4,4,1,1,4,4,7,4,4,1,1,4,4,4,4,4,1,1,1,4,4,4,4,,,,4,1,2,1,4,,,,,,,4,4,4,4,4,,,]},{width:22,height:18,title:"Vingt",g:[1,1,1,,1,1,1,,,1,,,1,1,,,1,,1,,1,1,,1,,,1,,,,1,1,,,,,1,,1,,1,,1,1,,1,,,1,1,1,,,1,,,1,1,,,1,1,,,1,1,,1,,,,,1,,,1,,,,,1,,1,,1,,,,1,1,,,1,1,1,,1,1,1,,1,1,,,1,,1,,1,1,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,1,1,1,1,,,1,,,,,,,,,,,,,,,,,,,1,5,,1,,1,1,1,1,1,1,1,1,6,1,1,1,1,1,1,1,,1,,,1,,1,,,,,,,,,,,,,,,1,,1,,,1,,1,,1,1,1,1,1,6,1,1,1,1,1,1,,1,,1,,,1,,1,,1,,,,,,,,,,,4,,1,,1,,,1,,6,,1,,2,,,,,,,,,1,,1,,1,,5,1,,1,,1,,4,1,1,1,1,6,1,1,1,1,,6,,1,,,1,,1,,1,,,,,,,,,,,,,1,,1,,,1,,1,,1,1,1,1,6,1,1,1,1,1,1,1,1,1,,1,,,3,,1,,,,,,,,,,,,,,,,,1,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,6,1,1,1,1]},{width:8,height:8,title:"Twist",g:[7,1,,7,1,1,1,,,5,,4,,,7,5,,7,,1,,,6,,,1,1,7,,,1,,,1,,,,1,4,7,,1,,5,1,1,,7,,1,,,,,,7,5,3,1,,2,4,1,7]},{width:15,height:15,title:"22NC",g:[,4,2,4,1,7,1,7,1,1,4,2,4,1,,,1,,,,,,,,,,,,7,,,7,,1,1,1,1,6,1,1,1,1,,1,,1,1,,1,4,4,4,4,4,4,4,1,,1,1,1,1,,1,4,2,2,2,2,2,4,1,,1,1,1,1,,1,4,4,4,4,4,4,4,1,,1,1,6,1,7,1,1,1,1,3,1,1,1,1,7,1,6,1,1,,1,4,4,4,4,4,4,4,1,,1,1,1,1,,1,4,2,2,2,2,2,4,1,,1,1,7,1,,1,4,4,4,4,4,4,4,1,,1,7,,1,,1,1,1,1,6,1,1,1,1,,1,,,1,,,,,,,,,,,,1,,,1,1,1,1,1,1,6,1,1,1,1,1,1,,,,7,,,,,,,,,,7,,,,1,1,1,1,1,1,2,1,1,1,1,1,1]},{width:15,height:15,title:"22rd",g:[1,1,1,1,1,1,4,1,1,1,5,1,1,1,1,1,,,,,,,1,,,,,,,1,1,,,1,2,1,,1,,1,2,1,,,1,1,1,4,1,1,1,,1,,1,1,1,1,1,1,,,,,,,,1,,,,,,,,5,1,1,1,1,1,5,1,4,1,1,1,1,1,1,1,1,,,,,,1,,,,,,1,1,,,,,,,,1,,,,,,,,,1,1,1,1,1,4,1,5,1,1,1,1,1,,,1,1,,,,,1,,,,,1,1,,,,,,,,,1,,,,,,,,1,1,,,,,,1,,,,,,1,1,1,1,4,1,1,5,1,1,1,1,5,1,4,1,1,,,,,,,,1,,,,,,,,,,,,,,,3,,,,,,,]},{width:15,height:15,title:"24 club",g:[,,,1,,,,6,,,,1,,,,,7,1,1,1,1,1,1,1,1,1,1,1,7,,6,1,,,,,,,,,,6,,1,,,1,,,7,1,7,,7,1,7,,,1,1,1,1,,7,7,,7,1,7,,7,1,1,7,,,1,,4,,,,,,,,,,,,3,1,,7,1,6,1,1,1,1,1,1,1,1,2,,1,,,,,,,,,,,,,,,1,,7,1,1,1,1,1,7,,7,1,7,,6,1,,1,,6,,,,5,,1,,1,,,1,,1,,,,6,,,,1,,1,,1,1,,7,1,1,1,1,1,1,1,7,,1,6,,1,,,,,,,,,,,,1,,,7,1,1,1,1,1,1,1,1,1,1,1,7,,,,,6,,,,1,,,,6,,,]},{width:15,height:15,title:"Quarter C",g:[,7,,,,7,,1,1,1,,,,2,,7,5,7,,7,5,,4,,1,1,,1,1,,,7,,,7,,,1,,,5,,4,,,,1,4,7,6,7,,6,,1,1,,1,1,,,1,,,,5,,4,,1,4,4,4,1,,,7,,1,1,7,,1,,1,1,1,1,1,,,5,,4,,,,1,,,5,,4,,,,7,,7,1,1,1,1,,4,4,4,4,4,4,,1,,,,,,,,4,,4,,,,,7,1,1,1,4,5,1,1,5,1,5,1,7,,,,6,,,,,,,,,,,1,,4,2,4,2,4,2,4,2,4,2,4,2,,4,1,,,,,,,,,,,,,,5,,5,4,3,4,1,4,1,4,6,4,1,4,1,1,,1,1,7,1,1,1,1,1,7,1,1,1,1,,]}];const da=[{t:"coriolis",C:[[1,0,1],[0,1,1],[-1,0,1],[0,-1,1],[1,-1,0],[1,0,1],[0,-1,1],[1,0,1],[1,1,0],[0,1,1],[0,1,1],[-1,1,0],[-1,0,1],[-1,0,1],[-1,-1,0],[0,-1,1],[1,-1,0],[0,-1,1],[-1,-1,0],[0,-1,-1],[1,0,-1],[1,1,0],[1,0,1],[1,-1,0],[-1,0,-1],[-1,-1,0],[-1,0,1],[-1,1,0],[0,1,1],[1,1,0],[0,1,-1],[-1,1,0],[0,-1,-1],[-1,-1,0],[-1,0,-1],[0,-1,-1],[1,0,-1],[1,-1,0],[0,1,-1],[1,1,0],[1,0,-1],[-1,0,-1],[-1,1,0],[0,1,-1],[0,-1,-1],[-1,0,-1],[0,1,-1],[1,0,-1]],f:[[1,2,3],[1,3,4],[5,6,7],[8,9,10],[11,12,13],[14,15,16],[17,18,19],[17,19,20],[21,22,23],[21,23,24],[25,26,27],[25,27,28],[29,30,31],[29,31,32],[33,34,35],[36,37,38],[39,40,41],[42,43,44],[45,46,47],[45,47,48]],c:[7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],i:3},{t:"stealth",C:[[-1354,0,25],[-1054,-200,25],[265,-535,25],[929,-1242,25],[1061,-1329,25],[1155,-1181,25],[1027,-783,25],[1353,-250,25],[1198,0,25],[1353,250,25],[1027,783,25],[1155,1181,25],[1061,1329,25],[929,1242,25],[265,535,25],[-1054,200,25],[-1034,0,149],[-958,-78,129],[-691,-114,165],[-578,-45,227],[-550,0,239],[-578,45,227],[-691,114,165],[-958,78,129],[1092,-351,60],[1272,-384,25],[1274,-126,25],[1091,-150,60],[1173,-252,80],[1091,150,60],[1274,126,25],[1272,384,25],[1092,351,60],[1173,250,80],[649,-351,109],[649,-150,109],[649,0,58],[649,150,109],[649,351,109],[-445,-348,25],[-393,-291,-97],[-445,-70,-87],[-445,70,-87],[-393,291,-97],[-445,348,25],[301,-340,-102],[301,340,-102],[-1147,0,-79],[877,250,-71],[877,-250,-71],[-564,0,-83],[-564,0,-238],[159,269,-104],[234,369,-225],[159,-269,-104],[234,-369,-225],[1092,-351,30],[1091,-150,30],[1159,-252,30],[1091,150,30],[1092,351,30],[1159,250,30]],f:[[17,18,21],[18,19,21],[19,20,21],[17,21,24],[24,21,23],[21,22,23],[1,2,17],[2,18,17],[2,19,18],[2,3,19],[3,20,19],[3,21,20],[3,4,7],[4,5,6],[4,6,7],[7,26,3],[26,25,3],[9,28,27],[25,29,28],[25,28,36],[36,35,25],[25,35,3],[36,28,9],[9,37,36],[35,36,21],[21,3,35],[21,36,37],[1,17,16],[24,16,17],[23,16,24],[23,15,16],[22,15,23],[21,15,22],[15,11,14],[11,12,14],[12,13,14],[32,11,15],[33,32,15],[9,31,30],[30,34,33],[33,39,30],[39,38,30],[39,33,15],[9,30,38],[38,37,9],[38,39,21],[15,21,39],[21,37,38],[40,42,41],[43,45,44],[42,40,2],[42,2,1],[41,42,46],[46,42,43],[3,40,41],[3,41,46],[3,46,50],[3,50,4],[46,47,49],[50,9,8],[8,7,50],[50,6,4],[5,4,6],[6,50,7],[1,43,42],[45,43,16],[43,1,16],[43,44,47],[46,43,47],[44,45,15],[15,47,44],[49,15,14],[49,47,15],[49,50,46],[49,10,9],[49,14,12],[10,49,11],[12,14,13],[12,11,49],[50,49,9],[57,25,26],[57,26,8],[57,8,59],[59,8,27],[59,27,58],[58,27,28],[58,28,29],[58,29,59],[59,29,25],[59,25,57],[60,30,31],[60,31,10],[10,62,60],[62,10,32],[62,32,61],[61,32,33],[61,33,34],[61,34,62],[62,34,30],[62,30,60]],c:[8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,6,6,6,6,8,8,8,8,8,8,6,6,6,6],i:.0068},{t:"chipcube",C:[[-8,10,-10],[-10,10,-8],[-10,10,8],[-8,10,10],[8,10,10],[10,10,8],[10,10,-8],[8,10,-10],[-8,-10,-10],[-10,-10,-8],[-10,-10,8],[-8,-10,10],[8,-10,10],[10,-10,8],[10,-10,-8],[8,-10,-10],[-10,8,-10],[-10,8,10],[10,8,10],[10,8,-10],[-10,-8,-10],[-10,-8,10],[10,-8,10],[10,-8,-10]],f:[[1,2,3],[1,3,4],[1,4,5],[1,5,6],[1,6,7],[1,7,8],[16,15,14],[16,14,13],[16,13,12],[16,12,11],[16,11,10],[16,10,9],[3,2,17],[3,17,21],[3,21,10],[3,10,11],[3,11,22],[3,22,18],[7,6,19],[7,19,23],[7,23,14],[7,14,15],[7,15,24],[7,24,20],[17,1,8],[17,8,20],[17,20,24],[17,24,16],[17,16,9],[17,9,21],[4,18,22],[4,22,12],[4,12,13],[4,13,23],[4,23,19],[4,19,5],[1,17,2],[3,18,4],[5,19,6],[7,20,8],[10,21,9],[12,22,11],[14,23,13],[16,24,15]],c:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],i:10},{t:"tree",C:[[-.5,-.5,4],[-.5,.5,4],[.5,.5,4],[.5,-.5,4],[-.5,-.5,0],[-.5,.5,0],[.5,.5,0],[.5,-.5,0],[-3,-3,0],[-3,3,0],[3,3,0],[3,-3,0],[0,0,-8]],f:[[1,5,8],[1,8,4],[4,8,7],[4,7,3],[1,2,6],[1,6,5],[7,6,2],[7,2,3],[9,13,12],[12,13,11],[11,13,10],[10,13,9],[9,12,11],[9,11,10]],c:[9,9,9,9,9,9,9,9,10,10,10,10,10,10],i:10}];function h(a,b=1){a.v=0;a.u=void 0==b?1:b;a.l=!0;window.requestAnimationFrame(a.D.bind(a))}class ea{constructor(){this.h=[];this.o=this.s=0;this.m=[];this.A=[];this.l=!1;this.v=0;this.u=1}add(a,b){this.h.push({start:a,item:b,done:!1});this.h.sort(function(g,c){return c.start<g.start?1:c.start==g.start?0:-1});return this}D(a){var b=0;if(this.l){0==this.s&&(this.o=a);for(var g=a-this.o,c=0;c<this.h.length;c++){if(!this.h[c].done&&this.h[c].start<g&&(this.h[c].done=!0,void 0!=this.h[c].item))try{this.h[c].item()}catch(e){}1==this.l&&this.h.length-1>=c&&!this.h[c].done&&b++}0<this.m.length&&(1==this.h.length&&void 0==this.h[0].item&&0<this.h[0].start?this.m.forEach(e=>{try{this.A.forEach(f=>e(f,g/this.h[0].start*100))}catch(f){}}):this.m.forEach(e=>{try{this.A.forEach(f=>e(f))}catch(f){}}));this.s=a;if(this.s==this.o||0<b)window.requestAnimationFrame(this.D.bind(this));else if(this.v++,0==this.u||this.v<this.u){this.l=!1;for(c=this.o=this.s=0;c<this.h.length;c++)this.h[c].done=!1;this.l=!0;window.requestAnimationFrame(this.D.bind(this))}else this.l=!1}}end(){this.l=!1;return this}reset(){this.l=!1;this.h=[];this.o=this.s=0;this.m=[];this.A=[];this.v=0;this.u=1;return this}}const fa=[[.4,.4,.4],[1,0,0],[0,1,0],[0,0,1],[0,1,1],[1,0,1],[1,1,0],[1,1,1],[0,0,0],[.5,0,0],[0,.5,0],[0,0,.5],[0,.5,.5],[.5,0,.5],[.5,.5,0],[.8,.8,.8]];var ha=()=>{var a=k,b=l,g,c;b.clearColor(...a.b.c);b.clear(b.COLOR_BUFFER_BIT);b.enable(b.DEPTH_TEST);b.shaderSource(g=b.createShader(b.VERTEX_SHADER),"#version 300 es\n      precision lowp float;\n      in vec4 fc,p;\n      uniform mat4 M,m;\n      out vec4 C,P;\n\n      void main()\n      {\n        gl_Position=M*p;\n        P=m*p;\n        C=fc;\n      }");b.compileShader(g);b.shaderSource(c=b.createShader(b.FRAGMENT_SHADER),"#version 300 es\n      precision lowp float;\n      uniform vec3 c,d,a;\n      in vec4 C,P;\n      out vec4 o;\n\n      void main()\n      {\n        float n=max(dot(d,-normalize(cross(dFdx(P.xyz),dFdy(P.xyz)))),0.);\n        o=vec4(c*C.rgb*n+a*C.rgb,1.);\n      }");b.compileShader(c);var e=b.createProgram();b.attachShader(e,g);b.attachShader(e,c);b.linkProgram(e);b.useProgram(e);b.uniform3f(b.getUniformLocation(e,"c"),...a.d.c);b.uniform3f(b.getUniformLocation(e,"d"),...a.d.p);b.uniform3f(b.getUniformLocation(e,"a"),...a.a.c);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);b.enable(b.BLEND);b.activeTexture(b.TEXTURE0);return e};function ia(){return[[[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,-1]],[[0,1,2],[0,2,3],[5,0,3],[5,3,4],[5,6,1],[5,1,0],[1,6,7],[1,7,2],[6,5,4],[6,4,7],[3,2,7],[3,7,4]],[7,7,1,1,2,2,3,3,6,6,5,5]]}function ja(a,b){switch(a.code){case "ArrowLeft":case "KeyA":case "KeyZ":m=1==b?m|1:m&-2;a.preventDefault();break;case "ArrowUp":case "KeyW":case "Semicolon":m=1==b?m|2:m&-3;a.preventDefault();break;case "ArrowRight":case "KeyD":case "KeyX":m=1==b?m|4:m&-5;a.preventDefault();break;case "ArrowDown":case "KeyS":case "Period":m=1==b?m|8:m&-9;a.preventDefault();break;case "Enter":case "ShiftLeft":case "ShiftRight":case "Space":m=1==b?m|16:m&-17;a.preventDefault();break;case "KeyI":1==b&&(n=!n),a.preventDefault()}}function p(a,b){1==b?r?(b=a.clientX-ka,a=a.clientY-la,m=0,Math.abs(b)>=ma&&(m=0<b?m|4:m|1),Math.abs(a)>=na&&(m=0<a?m|8:m|2)):(m=0,ka=a.clientX,la=a.clientY,r=!0):(r=!1,m=0)}function oa(a,b){try{p(a.touches[0]||a.changedTouches[0],b)}catch(g){}}var u=null,x=null,pa=null,z=[],qa=1;function ra(){try{if(null==u)try{u=new (window.AudioContext||window.webkitAudioContext);x=u.createGain();x.connect(u.destination);x.gain.setValueAtTime(.05,u.currentTime);pa=u.createStereoPanner();pa.connect(x);var a=1;const f=[[0,4],[0,2],[116,2],[136,2],[136,2],[152,2],[152,2],[136,4],[116,2],[116,2],[116,3],[116,1],[144,1],[136,1],[132,1],[124,1],[116,4],[0,2],[116,2],[136,2],[136,2],[152,2],[152,2],[136,4],[116,2],[136,2],[132,2],[124,1],[132,1],[136,2],[112,2],[116,4],[0,2],[116,2],[132,2],[132,2],[136,1],[132,1],[124,1],[132,1],[136,4],[116,2],[136,2],[132,2],[132,2],[132,1],[156,1],[144,1],[132,1],[136,6],[136,2],[124,2],[124,2],[124,2],[136,2],[136,4],[116,2],[116,2],[116,3],[116,1],[144,2],[132,2],[136,6],[136,2],[132,1],[124,1],[124,2],[124,1],[136,1],[132,1],[144,1],[136,4],[116,2],[116,2],[116,3],[116,1],[144,2],[132,2],[136,4],[0,4]];for(var b of f)z.push([parseInt(b[0],10),a]),a+=parseInt(b[1],10);qa=a+2}catch(f){}for(var g in z)if(0!=z[parseInt(g,10)][0]){var c=u.currentTime+.2*z[parseInt(g,10)][1],e=u.createOscillator();e.connect(pa);pa.pan.setValueAtTime(z[parseInt(g,10)][0]/245*2-1,c);e.type="triangle";e.frequency.value=65.41*Math.pow(2,(z[parseInt(g,10)][0]-5)/4/12);e.start(c);e.stop(c+.2)}setTimeout(ra,200*qa)}catch(f){}}const sa=Math.PI/180;var A=1/60,B=0,ta=0,ua=0,D=[],E=null,l=null,F=null,ba=null,va=1,wa=640/360,k={b:{c:[.3,.3,.7,1]},c:{p:[0,-5,-20],r:[20,10,0]},d:{p:[.5,-.3,-.7],c:[1,1,1]},a:{c:[.5,.5,.5]},B:[]},xa=null,m=0,ka=0,la=0,r=!1,ma=0,na=0,G=0,H=[0,0,0],I=[0,0,0],J=1,K=0,L=null,M=[],ya=[],N=-1,za=!1,O=0,P=0,Q=0,R=0,S=[],T=0,Aa=0,Ba=0,Ca=[],U=-1,V=[],Da=!1,Ea=new ea,n=!1;function Fa(){var a=window.innerHeight,b=Math.floor(640/360*a),g=0,c=Math.floor(window.innerWidth/2-b/2);b>window.innerWidth&&(b=window.innerWidth,a=Math.floor(.5625*b),c=0,g=Math.floor(window.innerHeight/2-a/2));ma=window.innerWidth/20;na=window.innerHeight/20;va=a/360;E.style.top=g+"px";E.style.left=c+"px";E.style.transformOrigin="0 0";E.style.transform="scale("+va+")";F.style.top=g+"px";F.style.left=c+"px";F.style.transformOrigin="0 0";F.style.transform="scale("+va+")"}function X(){return Math.random()}function Ga(){var a=S[T].p[0],b=S[T].p[1],g=S[T].p[2],c={};if(!(100<V.length))for(var e=0;60>e;e++)V.push({j:ia(),i:.3*X(),p:[a,b,g],r:[0,0,0],c:[c.r||1*X(),c.J||1*X(),c.b||1*X()],t:[.1*X()-.05,.1*X()-.05,.1*X()-.05],a:2})}function Ha(){var a;for(a=0;a<V.length;a++)V[a].p[0]+=V[a].t[0],V[a].p[1]+=V[a].t[1],V[a].p[2]+=V[a].t[2],V[a].r[0]+=5*X(),V[a].r[1]+=5*X(),V[a].r[2]+=5*X(),V[a].a-=.007,V[a].i=Math.abs(V[a].i-.001);for(a=V.length;a--;)0>=V[a].a&&V.splice(a,1)}function Ia(){Ga()}function Ja(a){var b=0,g=0;switch(a){case 1:b=-1;break;case 4:b=1;break;case 2:g=-1;break;case 8:g=1}try{var c=Math.floor((S[T].p[0]-O+2+2*b)/6),e=Math.floor((S[T].p[2]-Q+2+2*g)/6);if(0>c||c>=L.width||0>e||e>=L.height)return!1;var f=L.g[e*L.width+c]||0;switch(f){case 2:return J=3,N=-1,S[T].p[0]=6*c+O,S[T].p[2]=6*e+Q,K++,K>=ca.length?(J=4,K=0,h(Ea.reset().add(13E3,Ka).add(3E3,Ia).add(6E3,Ia).add(9E3,Ia),1)):h(Ea.reset().add(5E3,Ka),1),Ga(),!1;case 4:a:{for(const t of M)if(t.x==c&&t.y==e){var q=t.H;break a}q=!0}return!q;case 5:b=a=null;for(g=0;g<M.length;g++){var v=Math.abs(c-M[g].x),y=Math.abs(e-M[g].y);var C=Math.sqrt(v*v+y*y);if(null==a||C<b)a=g,b=C}try{null!=a&&(delete S[M[a].id].c,S[M[a].id].p[1]=0,M[a].H=!1)}catch(t){}break;case 6:La(13)}}catch(t){f=0}return 0!=f}function Ma(){k.c.p=[0-S[T].p[0]+2*Math.cos(R),-8+Math.sin(R),0-S[T].p[2]-4+2*Math.sin(R)];k.c.r=[60,10*Math.cos(R),0];S[T].r[1]+=4;S[T].r[0]+=4;S[T].p[1]=1+Math.sin(R);R+=.025;Ha()}function Na(a){if(n){for(;0<D.length&&D[0]<=a-1E3;)D.shift();D.push(a);ua=D.length}if(0<ta){B+=(a-ta)/1E3;for(B>A&&900<B/A&&(B=2*A);B>A;){switch(J){case 2:Ha();break;case 1:if(S[T].p[1]<=P){if(n){0!=(m&1)&&--k.c.r[1];0!=(m&4)&&(k.c.r[1]+=1);0!=(m&2)&&(k.c.p[0]-=.2*Math.sin(k.c.r[1]*sa),k.c.p[2]+=.2*Math.cos(k.c.r[1]*sa));0!=(m&8)&&(k.c.p[0]+=.2*Math.sin(k.c.r[1]*sa),k.c.p[2]-=.2*Math.cos(k.c.r[1]*sa));for(var b=0;3>b;b++)0>k.c.r[b]&&(k.c.r[b]+=360),360<=k.c.r[b]&&(k.c.r[b]-=360)}else{0==G&&0!=(m&1)&&Ja(1)&&(G=1,H=[].concat(S[T].p),H[0]-=2,I=[].concat(S[T].r),I[2]+=90);0==G&&0!=(m&4)&&Ja(4)&&(G=4,H=[].concat(S[T].p),H[0]+=2,I=[].concat(S[T].r),I[2]-=90);0==G&&0!=(m&2)&&Ja(2)&&(G=2,H=[].concat(S[T].p),H[2]-=2,I=[].concat(S[T].r),I[0]-=90);0==G&&0!=(m&8)&&Ja(8)&&(G=8,H=[].concat(S[T].p),H[2]+=2,I=[].concat(S[T].r),I[0]+=90);if(0!=G){-1==N&&La(13);b=0;var g=16/45;if(0!=G){for(var c=0;3>c;c++)S[T].p[c]<H[c]?(S[T].p[c]+=g,S[T].p[c]>H[c]&&(S[T].p[c]=H[c])):S[T].p[c]>H[c]?(S[T].p[c]-=g,S[T].p[c]<H[c]&&(S[T].p[c]=H[c])):b++,S[T].r[c]<I[c]?(S[T].r[c]+=16,S[T].r[c]>I[c]&&(S[T].r[c]=I[c])):S[T].r[c]>I[c]?(S[T].r[c]-=16,S[T].r[c]<I[c]&&(S[T].r[c]=I[c])):b++;6==b&&(S[T].r=[0,0,0],G=0)}}b=void 0;for(b of Ca)b.F&&(S[b.id].p[0]<S[T].p[0]&&(S[b.id].p[0]+=.04),S[b.id].p[0]>S[T].p[0]&&(S[b.id].p[0]-=.04),S[b.id].p[2]<S[T].p[2]&&(S[b.id].p[2]+=.04),S[b.id].p[2]>S[T].p[2]&&(S[b.id].p[2]-=.04));0-S[T].p[0]>k.c.p[0]&&(k.c.p[0]+=.2);0-S[T].p[0]<k.c.p[0]&&(k.c.p[0]-=.2);0-S[T].p[2]-15>k.c.p[2]&&(k.c.p[2]+=.2);0-S[T].p[2]-15<k.c.p[2]&&(k.c.p[2]-=.2)}Ha();a:{b=void 0;for(b of Ca)if(c=Math.abs(S[T].p[2]-S[b.id].p[2]),1.5>Math.abs(S[T].p[0]-S[b.id].p[0])&&1.5>c){S[b.id].c=[.5,1,.5];b.F?La(1):La(13);b=b.F=!0;break a}b=!1}b&&(H=[0,0,0],I=[0,0,0],G=0,S[T].p=[O+6*Aa,P,Q+6*Ba],k.b={c:[.1,.1,.3,1]},l.clearColor(...k.b.c))}break;case 3:Ma();break;case 4:Ma()}B-=A}k.B=[];for(var e of S)k.B.push(e);for(var f of V)k.B.push(f);e=k;f=l;b=xa;var q,v,y,C;g=[1,1,1];f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);for(q of e.B){[y,W,C]=q.j||ia();c=[];var t=[];var w=0;for(v of W){var W=q.c?q.c:fa[C[w]];t.push(...W.concat(1));t.push(...W.concat(1));t.push(...W.concat(1));w++;c.push(...y[v[0]]);c.push(...y[v[1]]);c.push(...y[v[2]])}f.bindBuffer(f.ARRAY_BUFFER,f.createBuffer());f.bufferData(f.ARRAY_BUFFER,new Float32Array(c),f.STATIC_DRAW);f.vertexAttribPointer(w=f.getAttribLocation(b,"p"),3,f.FLOAT,!1,0,0);f.enableVertexAttribArray(w);void 0!=q.i&&("number"==typeof q.i?g=[q.i,q.i,q.i]:g=q.i);w=(new DOMMatrix).translate(...(q.p||[0,0,0])).rotate(...(q.r||[0,0,0])).scale(...g);f.uniformMatrix4fv(f.getUniformLocation(b,"m"),!1,w.toFloat32Array());f.bindBuffer(f.ARRAY_BUFFER,f.createBuffer());f.bufferData(f.ARRAY_BUFFER,new Float32Array(t),f.STATIC_DRAW);f.vertexAttribPointer(t=f.getAttribLocation(b,"fc"),4,f.FLOAT,!1,0,0);f.enableVertexAttribArray(t);f.uniformMatrix4fv(f.getUniformLocation(b,"M"),!1,(new DOMMatrix([1.8/wa,0,0,0,0,1.8,0,0,0,0,-1.001,-1,0,0,-.2,0])).rotate(...e.c.r).translate(...e.c.p).multiply(w).toFloat32Array());f.drawArrays(f.TRIANGLES,0,c.length/3)}n&&(document.title=""+ua+" fps")}ta=a;ba.clearRect(0,0,F.width,F.height);if(-1!=N)a=Math.round((N-Date.now())/1E3),0>=a&&!za&&(za=!0,N=-1,J=2,h(Ea.reset().add(6E3,Ka),1)),0>a&&(a=0),d(10,10,""+a+"s",8,"rgba(255,0,255,0.5)");else switch(J){case 2:d(50,50,"FAILED !",8,"rgba(255,0,0,0.9)");d(300,280,"Please try again",5,"rgba(255,0,0,0.9)");break;case 3:d(50,50,"Level Complete !",8,"rgba(255,128,0,0.7)");break;case 1:S[T].p[1]<=P&&(0==K?(d(20,20,"Cursors or WASD to roll",4,"rgba(255,128,0,0.7)"),d(120,300,"GET TO THE FOREST IN 13 SECONDS",4,"rgba(255,128,0,0.7)")):d(20,20,"GO when you're ready",4,"rgba(255,128,0,0.7)"));break;case 4:d(30,50,"WELL DONE",8,"rgba(255,128,0,0.7)"),d(20,280,"YOU'VE COMPLETED ALL LEVELS",5,"rgba(255,128,0,0.7)")}1==J&&S[T].p[1]>P&&(--S[T].p[1],k.c.p[1]=0-S[T].p[1]-5);window.requestAnimationFrame(Na)}function Oa(a){for(var b of da)if(b.t==a){a=JSON.parse(JSON.stringify(b.f));for(var g in a)a[g][0]--,a[g][1]--,a[g][2]--;return[b.C,a,b.c]}return ia()}function Pa(a){1==a.G?a.p[0]--:a.p[0]++;if(-300>a.p[0]||300<a.p[0])a.G=1-a.G,a.r[1]=180-a.r[1],a.r[0]=0;a.r[0]++}function Ka(){L=JSON.parse(JSON.stringify(ca[K]));M=[];ya=[];V=[];N=-1;r=za=!1;m=0;Ca=[];H=[0,0,0];I=[0,0,0];G=0;k.b={c:[.3,.3,.7,1]};l.clearColor(...k.b.c);O=-(6*(L.width-1)/2);P=0;Q=-(6*(L.height-1)/2);S=[];for(var a=0;a<L.height;a++)for(var b=0;b<L.width;b++){var g={i:1,p:[O+6*b,P,Q+6*a],r:[90,0,0]};switch(L.g[a*L.width+b]||0){case 0:continue;case 1:g.j=Y();break;case 2:var c=g,e=Y();e=Qa(e,{x:2.75,y:2.75,z:-1});e=Qa(e,{x:2.75,y:-2.75,z:-1});e=Qa(e,{x:-2.75,y:2.75,z:-1});e=Qa(e,{x:-2.75,y:-2.75,z:-1});c.j=e;break;case 3:U=S.length;S.push({j:Oa("stealth"),i:.01,p:[O+6*b+10,P+6,Q+6*a-20],r:[270,0,0]});S[U].G=1;T=S.length;S.push({j:Oa("coriolis"),i:1,p:[O+6*b,P+30,Q+6*a],r:[0,0,0],c:[1,.5,0]});Aa=b;Ba=a;g.j=Y();break;case 4:M.push({x:b,y:a,id:S.length,H:!0});g.p[1]-=.5;g.c=[.2,.2,.2];g.j=Y();break;case 5:ya.push({x:b,y:a,id:S.length});g.c=[1,0,1];g.j=Y();break;case 6:g.j=Y();break;case 7:Ca.push({id:S.length,F:!1});S.push({j:Oa("chipcube"),i:.1,p:[O+6*b,P,Q+6*a],r:[0,0,0],c:[.5,.5,.5]});g.j=Y();break;default:continue}S.push(g)}k.c.p=[0,-5,-20];k.c.r=[20,10,0];k.c.p[0]=0-S[T].p[0];k.c.p[1]=0-S[T].p[1]-5;k.c.p[2]=0-S[T].p[2]-15;J=1;S[U].I=new ea;a=S[U].I.reset().add(1E4,void 0);a.A.push(S[U]);a.m.push(Pa);h(a,0)}function Y(){for(var a=[],b=[],g=[],c=0,e=0;6>e;e++)for(var f=0;6>f;f++)a.push([-3+f,-3+e,1]),c++,a.push([-3+f,e+-2,1]),c++,a.push([f+-2,e+-2,1]),c++,a.push([f+-2,-3+e,1]),c++,b.push([c-4,c-3,c-2]),b.push([c-4,c-2,c-1]),g.push(7+(f+e&1)),g.push(7+(f+e&1)),6==e+1&&(a.push([-3+f,e+-2,1]),c++,a.push([f+-2,e+-2,1]),c++,a.push([f+-2,e+-2,1.5]),c++,a.push([-3+f,e+-2,1.5]),c++,b.push([c-4,c-3,c-2]),b.push([c-4,c-2,c-1]),g.push(7+(f+e&1)),g.push(7+(f+e&1))),0==f&&(a.push([-3+f,-3+e,1]),c++,a.push([-3+f,e+-2,1]),c++,a.push([-3+f,e+-2,1.5]),c++,a.push([-3+f,-3+e,1.5]),c++,b.push([c-4,c-3,c-2]),b.push([c-4,c-2,c-1]),g.push(7+(f+e&1)),g.push(7+(f+e&1))),6==f+1&&(a.push([f+-2,-3+e,1]),c++,a.push([f+-2,e+-2,1]),c++,a.push([f+-2,e+-2,1.5]),c++,a.push([f+-2,-3+e,1.5]),c++,b.push([c-4,c-2,c-3]),b.push([c-4,c-1,c-2]),g.push(7+(f+e&1)),g.push(7+(f+e&1)));return[a,b,g]}function Qa(a,b){var g=Oa("tree");a=JSON.parse(JSON.stringify(a));var c=a[0].length,e;for(e in g[0])a[0].push([.5*g[0][e][0]+b.x,.5*g[0][e][1]+b.y,.5*g[0][e][2]+b.z]);for(var f in g[1])a[1].push([g[1][f][0]+c,g[1][f][1]+c,g[1][f][2]+c]);a[2]=a[2].concat(g[2]);return a}function La(a){N=Date.now()+1E3*a}function Z(){Da?"suspended"===u.state&&u.resume():(Da=!0,ra())}function Ra(){document.onkeydown=function(a){a=a||window.event;ja(a,1);Z()};document.onkeyup=function(a){a=a||window.event;ja(a,0);Z()};window.ondragstart=function(a){a=a||window.event;a.preventDefault()};E=document.getElementById("canvas");l=E.getContext("webgl2");F=document.getElementById("osd");ba=F.getContext("2d");F.onmousedown=function(a){a=a||window.event;p(a,1);Z();a.preventDefault()};F.onmousemove=function(a){a=a||window.event;r&&p(a,1)};F.onmouseup=function(a){a=a||window.event;p(a,0);Z()};F.onmouseout=function(){r=!1;m=0};F.addEventListener("touchstart",function(a){a=a||window.event;oa(a,1);Z()});F.addEventListener("touchmove",function(a){a=a||window.event;r&&oa(a,1)});F.addEventListener("touchend",function(a){a=a||window.event;oa(a,0);Z()});window.addEventListener("resize",function(){Fa()});Fa();Ka();xa=ha();window.requestAnimationFrame(Na)}window.onload=function(){Ra()};</script><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/></head><body><div id="wrapper"><canvas id="canvas" width="640" height="360"></canvas><canvas id="osd" width="640" height="360"></canvas></div></body></html>