var GA=GA||{};GA.VERSION="0.0.1";GA.plugins=void 0;GA.custom=void 0;
GA.create=function(d,g,h,n,l){function q(){requestAnimationFrame(q,c.canvas);if(void 0===c._fps)t(),c.render(c.canvas,0);else{var a=Date.now(),b=a-c._startTime;1E3<b&&(b=c._frameDuration);c._startTime=a;for(c._lag+=b;c._lag>=c._frameDuration;)v(),t(),c._lag-=c._frameDuration;c.render(c.canvas,c._lag/c._frameDuration)}}function v(){function a(b){b._previousX=b.x;b._previousY=b.y;b.children&&0<b.children.length&&b.children.forEach(function(b){a(b)})}c.stage.children.forEach(function(b){a(b)})}function t(){if(0<
c.buttons.length){c.canvas.style.cursor="auto";for(var a=c.buttons.length-1;0<=a;a--){var b=c.buttons[a];b.update(c.pointer,c.canvas);"over"!==b.state&&"down"!==b.state||b.stage||(c.canvas.style.cursor="pointer")}}c.dragAndDrop&&c.pointer.updateDragAndDrop();c.state&&!c.paused&&c.state();if(0!==c.updateFunctions.length)for(a=0;a<c.updateFunctions.length;a++)(0,c.updateFunctions[a])()}function r(a){a.x=0;a.y=0;a.vx=0;a.vy=0;a.width=0;a.height=0;a.scaleX=1;a.scaleY=1;a.pivotX=.5;a.pivotY=.5;a.rotation=
0;a.visible=!0;a.parent=void 0;a.stage=!1;a.shadow=!1;a.shadowColor="rgba(100, 100, 100, 0.5)";a.shadowOffsetX=3;a.shadowOffsetY=3;a.shadowBlur=3;a.blendMode=void 0;a._alpha=1;a._draggable=void 0;a._layer=0;a._circular=!1;a._interactive=!1;a._previousX=void 0;a._previousY=void 0;a.children=[];a.addChild=function(b){b.parent&&b.parent.removeChild(b);b.parent=a;a.children.push(b)};a.removeChild=function(b){if(b.parent===a)a.children.splice(a.children.indexOf(b),1);else throw Error(b+"is not a child of "+
a);};a.swapChildren=function(b,c){var k=a.children.indexOf(b),g=a.children.indexOf(c);if(-1!==k&&-1!==g)b.childIndex=g,c.childIndex=k,a.children[k]=c,a.children[g]=b;else throw Error(child+" Both objects must be a child of the caller "+a);};a.add=function(b){var c=Array.prototype.slice.call(arguments);1<c.length?c.forEach(function(b){a.addChild(b)}):a.addChild(c[0])};a.remove=function(b){var c=Array.prototype.slice.call(arguments);1<c.length?c.forEach(function(b){a.removeChild(b)}):a.removeChild(c[0])};
a.setPosition=function(b,c){a.x=b;a.y=c};a.putCenter=function(b,c,m){b.x=a.x+a.halfWidth-b.halfWidth+(c||0);b.y=a.y+a.halfHeight-b.halfHeight+(m||0);a.compensateForParentPosition(a,b)};a.putTop=function(b,c,m){b.x=a.x+a.halfWidth-b.halfWidth+(c||0);b.y=a.y-b.height+(m||0);a.compensateForParentPosition(a,b)};a.putRight=function(b,c,m){b.x=a.x+a.width+(c||0);b.y=a.y+a.halfHeight-b.halfHeight+(m||0);a.compensateForParentPosition(a,b)};a.putBottom=function(b,c,m){b.x=a.x+a.halfWidth-b.halfWidth+(c||0);
b.y=a.y+a.height+(m||0);a.compensateForParentPosition(a,b)};a.putLeft=function(b,c,m){b.x=a.x-b.width+(c||0);b.y=a.y+a.halfHeight-b.halfHeight+(m||0);a.compensateForParentPosition(a,b)};a.compensateForParentPosition=function(a,c){if(0!==c.parent.gx||0!==c.parent.gy)c.x-=a.gx,c.y-=a.gy};Object.defineProperties(a,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},
position:{get:function(){return{x:a.x,y:a.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return a.parent._alpha*a._alpha},set:function(b){a._alpha=b},enumerable:!0,configurable:!0},halfWidth:{get:function(){return a.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return a.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return a.x+a.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return a.y+a.halfHeight},enumerable:!0,configurable:!0},
layer:{get:function(){return a._layer},set:function(b){a._layer=b;a.parent.children.sort(y)},enumerable:!0,configurable:!0},circular:{get:function(){return a._circular},set:function(b){!0===b&&!1===a._circular&&(w(a),a._circular=!0);!1===b&&!0===a._circular&&(delete a.diameter,delete a.radius,a._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return a._draggable},set:function(b){!0===b&&(c.draggableSprites.push(a),a._draggable=!0,!1===c.dragAndDrop&&(c.dragAndDrop=!0));!1===
b&&c.draggableSprites.splice(c.draggableSprites.indexOf(a),1)},enumerable:!0,configurable:!0},interactive:{get:function(){return a._interactive},set:function(b){!0===b&&(x(a),a._interactive=!0);!1===b&&(c.buttons.splice(c.buttons.indexOf(a),1),a._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:a.width,height:a.height}},enumerable:!0,configurable:!0},globalBounds:{get:function(){return rectangle={x:a.gx,y:a.gy,width:a.gx+a.width,height:a.gy+a.height}},
enumerable:!0,configurable:!0},empty:{get:function(){return 0===a.children.length?!0:!1},enumerable:!0,configurable:!0}})}function w(a){Object.defineProperties(a,{diameter:{get:function(){return a.width},set:function(b){a.width=b;a.height=b},enumerable:!0,configurable:!0},radius:{get:function(){return a.width/2},set:function(b){a.width=2*b;a.height=2*b},enumerable:!0,configurable:!0}})}function x(a){a.press=a.press||void 0;a.release=a.release||void 0;a.over=a.over||void 0;a.out=a.out||void 0;a.tap=
a.tap||void 0;a.state="up";a.action="";a.pressed=!1;a.enabled=!0;a.hoverOver=!1;c.buttons.push(a);a.update=function(b,k){a.enabled&&(k=c.pointer.hitTestSprite(a),b.isUp&&(a.state="up","button"===a.subtype&&a.show(0)),k&&(a.state="over",a.frames&&3===a.frames.length&&"button"===a.subtype&&a.show(1),b.isDown&&(a.state="down","button"===a.subtype&&(3===a.frames.length?a.show(2):a.show(1)))),"down"!==a.state||a.pressed||(a.press&&a.press(),a.pressed=!0,a.action="pressed"),"over"===a.state&&(a.pressed&&
(a.release&&a.release(),a.pressed=!1,a.action="released",c.pointer.tapped&&a.tap&&a.tap()),a.hoverOver||(a.over&&a.over(),a.hoverOver=!0)),"up"===a.state&&(a.pressed&&(a.release&&a.release(),a.pressed=!1,a.action="released"),a.hoverOver&&(a.out&&a.out(),a.hoverOver=!1)))}}function u(a){var b={};b.code=a;b.isDown=!1;b.isUp=!0;b.press=void 0;b.release=void 0;b.downHandler=function(a){a.keyCode===b.code&&(b.isUp&&b.press&&b.press(),b.isDown=!0,b.isUp=!1);a.preventDefault()};b.upHandler=function(a){a.keyCode===
b.code&&(b.isDown&&b.release&&b.release(),b.isDown=!1,b.isUp=!0);a.preventDefault()};window.addEventListener("keydown",b.downHandler.bind(b),!1);window.addEventListener("keyup",b.upHandler.bind(b),!1);return b}function y(a,b){return a.layer<b.layer?-1:1}var c={};c.canvas=document.createElement("canvas");c.canvas.setAttribute("width",1*d);c.canvas.setAttribute("height",1*g);c.canvas.style.backgroundColor="black";document.body.appendChild(c.canvas);c.canvas.ctx=c.canvas.getContext("2d");c.stage=function(){var a=
{};r(a);a.stage=!0;a.width=c.canvas.width;a.height=c.canvas.height;a.x=0;a.y=0;a.parent=void 0;return a}();c.pointer=function(){var a={_x:0,_y:0};Object.defineProperties(a,{x:{get:function(){return a._x/c.scale},enumerable:!0,configurable:!0},y:{get:function(){return a._y/c.scale},enumerable:!0,configurable:!0},centerX:{get:function(){return a.x},enumerable:!0,configurable:!0},centerY:{get:function(){return a.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:a.x,y:a.y}},enumerable:!0,
configurable:!0}});a.isDown=!1;a.isUp=!0;a.tapped=!1;a.downTime=0;a.elapsedTime=0;a.press=void 0;a.release=void 0;a.tap=void 0;a.dragSprite=null;a.dragOffsetX=0;a.dragOffsetY=0;a.moveHandler=function(b){a._x=b.pageX-b.target.offsetLeft;a._y=b.pageY-b.target.offsetTop;b.preventDefault()};a.touchmoveHandler=function(b){a._x=b.targetTouches[0].pageX-c.canvas.offsetLeft;a._y=b.targetTouches[0].pageY-c.canvas.offsetTop;b.preventDefault()};a.downHandler=function(b){a._x=b.pageX-b.target.offsetLeft;a._y=
b.pageY-b.target.offsetTop;a.isDown=!0;a.isUp=!1;a.tapped=!1;a.downTime=Date.now();a.press&&a.press();b.preventDefault()};a.touchstartHandler=function(b){a._x=b.targetTouches[0].pageX-c.canvas.offsetLeft;a._y=b.targetTouches[0].pageY-c.canvas.offsetTop;a.isDown=!0;a.isUp=!1;a.tapped=!1;a.downTime=Date.now();a.press&&a.press();b.preventDefault()};a.upHandler=function(b){a.elapsedTime=Math.abs(a.downTime-Date.now());200>=a.elapsedTime&&(a.tapped=!0,a.tap&&a.tap());a.isUp=!0;a.isDown=!1;a.release&&a.release();
b.preventDefault()};c.canvas.addEventListener("mousemove",a.moveHandler.bind(a),!1);c.canvas.addEventListener("mousedown",a.downHandler.bind(a),!1);window.addEventListener("mouseup",a.upHandler.bind(a),!1);c.canvas.addEventListener("touchmove",a.touchmoveHandler.bind(a),!1);c.canvas.addEventListener("touchstart",a.touchstartHandler.bind(a),!1);window.addEventListener("touchend",a.upHandler.bind(a),!1);c.canvas.style.touchAction="none";a.hitTestSprite=function(b){if(b.circular){var c=a.x-(b.gx+b.halfWidth),
m=a.y-(b.gy+b.halfHeight);b=Math.sqrt(c*c+m*m)<b.radius}else{c=b.gx+b.width;m=b.gy;var g=b.gy+b.height;b=a.x>b.gx&&a.x<c&&a.y>m&&a.y<g}return b};a.updateDragAndDrop=function(){if(a.isDown)if(null===a.dragSprite)for(var b=c.draggableSprites.length-1;-1<b;b--){var k=c.draggableSprites[b];if(k.draggable&&a.hitTestSprite(k)){a.dragOffsetX=a.x-k.gx;a.dragOffsetY=a.y-k.gy;a.dragSprite=k;b=k.parent.children;b.splice(b.indexOf(k),1);b.push(k);c.draggableSprites.splice(c.draggableSprites.indexOf(k),1);c.draggableSprites.push(k);
break}}else a.dragSprite.x=a.x-a.dragOffsetX,a.dragSprite.y=a.y-a.dragOffsetY;a.isUp&&(a.dragSprite=null);c.draggableSprites.some(function(b){if(b.draggable&&a.hitTestSprite(b))return c.canvas.style.cursor="pointer",!0;c.canvas.style.cursor="auto";return!1})};return a}();c.key=function(){var a={};a.leftArrow=u(37);a.upArrow=u(38);a.rightArrow=u(39);a.downArrow=u(40);a.space=u(32);return a}();c.buttons=[];c.dragAndDrop=!1;c.draggableSprites=[];c.tweens=[];c.state=void 0;c.load=l||void 0;c.setup=h||
void 0;if(void 0===c.setup)throw Error("Please supply the setup function in the constructor");c.assetFilePaths=n||void 0;c.paused=!1;c._fps=60;c._startTime=Date.now();c._frameDuration=1E3/c._fps;c._lag=0;c.interpolate=!0;c.updateFunctions=[];c.scale=1;c.start=function(){c.assetFilePaths?(c.assets.whenLoaded=function(){c.state=void 0;c.setup()},c.assets.load(c.assetFilePaths),c.load&&(c.state=c.load)):c.setup();q()};c.pause=function(){c.paused=!0};c.resume=function(){c.paused=!1};c.hidePointer=function(){c.canvas.style.cursor=
"none"};c.showPointer=function(){c.canvas.style.cursor="auto"};Object.defineProperties(c,{fps:{get:function(){return c._fps},set:function(a){c._fps=a;c._startTime=Date.now();c._frameDuration=1E3/c._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(a){c.canvas.style.backgroundColor=a},enumerable:!0,configurable:!0}});c.remove=function(a){var b=Array.prototype.slice.call(arguments);if(b[0]instanceof Array){if(b=b[0],0<b.length)for(var c=b.length-1;0<=c;c--){var m=b[c];m.parent.removeChild(m);
b.splice(b.indexOf(m),1)}}else 1<b.length?b.forEach(function(a){a.parent.removeChild(a)}):b[0].parent.removeChild(b[0])};c.group=function(a){var b={};r(b);b.addChild=function(a){a.parent&&a.parent.removeChild(a);a.parent=b;b.children.push(a);b.calculateSize()};b.removeChild=function(a){if(a.parent===b)b.children.splice(b.children.indexOf(a),1);else throw Error(a+"is not a child of "+b);b.calculateSize()};b.calculateSize=function(){0<b.children.length&&(b._newWidth=0,b._newHeight=0,b.children.forEach(function(a){a.x+
a.width>b._newWidth&&(b._newWidth=a.x+a.width);a.y+a.height>b._newHeight&&(b._newHeight=a.y+a.height)}),b.width=b._newWidth,b.height=b._newHeight)};c.stage.addChild(b);a&&Array.prototype.slice.call(arguments).forEach(function(a){b.addChild(a)});return b};c.rectangle=function(a,b,k,m,g,f,e){var p={};r(p);p.mask=!1;p.width=a||32;p.height=b||32;p.fillStyle=k||"red";p.strokeStyle=m||"none";p.lineWidth=g||0;p.x=f||0;p.y=e||0;c.stage.addChild(p);p.render=function(a){a.strokeStyle=p.strokeStyle;a.lineWidth=
p.lineWidth;a.fillStyle=p.fillStyle;a.beginPath();a.rect(-p.width*p.pivotX,-p.height*p.pivotY,p.width,p.height);!0===p.mask?a.clip():("none"!==p.strokeStyle&&a.stroke(),"none"!==p.fillStyle&&a.fill())};return p};c.circle=function(a,b,k,m,g,f){var e={};r(e);e.mask=!1;e.width=a||32;e.height=a||32;e.fillStyle=b||"red";e.strokeStyle=k||"none";e.lineWidth=m||"none";e.x=g||0;e.y=f||0;c.stage.addChild(e);w(e);e.render=function(a){a.strokeStyle=e.strokeStyle;a.lineWidth=e.lineWidth;a.fillStyle=e.fillStyle;
a.beginPath();a.arc(e.radius+-e.diameter*e.pivotX,e.radius+-e.diameter*e.pivotY,e.radius,0,2*Math.PI,!1);!0===e.mask?a.clip():("none"!==e.strokeStyle&&a.stroke(),"none"!==e.fillStyle&&a.fill())};return e};c.line=function(a,b,k,m,g,f){var e={};r(e);k||0===k||(k=0);m||0===m||(m=0);g||0===g||(g=32);f||0===f||(f=32);e.ax=k;e.ay=m;e.bx=g;e.by=f;e.strokeStyle=a||"red";e.lineWidth=b||1;e.lineJoin="round";c.stage.addChild(e);e.render=function(a){a.strokeStyle=e.strokeStyle;a.lineWidth=e.lineWidth;a.lineJoin=
e.lineJoin;a.beginPath();a.moveTo(e.ax,e.ay);a.lineTo(e.bx,e.by);"none"!==e.strokeStyle&&a.stroke();"none"!==e.fillStyle&&a.fill()};return e};c.text=function(a,b,k,g,d){var f={};r(f);f.content=a||"Hello!";f.font=b||"12px sans-serif";f.fillStyle=k||"red";f.textBaseline="top";Object.defineProperties(f,{width:{get:function(){return c.canvas.ctx.measureText(f.content).width},enumerable:!0,configurable:!0},height:{get:function(){return c.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}});
c.stage.addChild(f);f.x=g||0;f.y=d||0;f.render=function(a){a.strokeStyle=f.strokeStyle;a.lineWidth=f.lineWidth;a.fillStyle=f.fillStyle;0===f.width&&(f.width=a.measureText(f.content).width);0===f.height&&(f.height=a.measureText("M").width);a.translate(-f.width*f.pivotX,-f.height*f.pivotY);a.font=f.font;a.textBaseline=f.textBaseline;a.fillText(f.content,0,0)};return f};c.frame=function(a,b,c,g,d){var f={};f.image=a;f.x=b;f.y=c;f.width=g;f.height=d;return f};c.frames=function(a,b,c,g){var k={};k.image=
a;k.data=b;k.width=c;k.height=g;return k};c.filmstrip=function(a,b,k,g){var m=c.assets[a].source,f=[],e=m.width/b;m=m.height/k*e;for(var d=0;d<m;d++){var h=d%e*b;var n=Math.floor(d/e)*k;g&&0<g&&(h+=g+g*d%e,n+=g+g*Math.floor(d/e));f.push([h,n])}return c.frames(a,f,b,k)};c.sprite=function(a){var b={};if(void 0===a)throw Error("Sprites require a source");r(b);b.frames=[];b.loop=!0;b._currentFrame=0;b.setTexture=function(a){if(a.image)if(a.image&&!a.data){if(!(c.assets[a.image].source instanceof Image))throw Error(a.image+
" is not an image file");b.source=c.assets[a.image].source;b.sourceX=a.x;b.sourceY=a.y;b.width=a.width;b.height=a.height;b.sourceWidth=a.width;b.sourceHeight=a.height}else a.image&&a.data&&(b.source=c.assets[a.image].source,b.frames=a.data,b.sourceX=b.frames[0][0],b.sourceY=b.frames[0][1],b.width=a.width,b.height=a.height,b.sourceWidth=a.width,b.sourceHeight=a.height);else a instanceof Array?(b.frames=a,b.source=c.assets[a[0]].source,b.sourceX=c.assets[a[0]].frame.x,b.sourceY=c.assets[a[0]].frame.y,
b.width=c.assets[a[0]].frame.w,b.height=c.assets[a[0]].frame.h,b.sourceWidth=c.assets[a[0]].frame.w,b.sourceHeight=c.assets[a[0]].frame.h):(b.tilesetFrame=c.assets[a],b.source=b.tilesetFrame.source,b.sourceX=b.tilesetFrame.frame.x,b.sourceY=b.tilesetFrame.frame.y,b.width=b.tilesetFrame.frame.w,b.height=b.tilesetFrame.frame.h,b.sourceWidth=b.tilesetFrame.frame.w,b.sourceHeight=b.tilesetFrame.frame.h)};b.setTexture(a);b.gotoAndStop=function(a){if(0<b.frames.length)b.frames[0]instanceof Array?(b.sourceX=
b.frames[a][0],b.sourceY=b.frames[a][1]):c.assets[b.frames[a]].frame&&(b.source=c.assets[b.frames[a]].source,b.sourceX=c.assets[b.frames[a]].frame.x,b.sourceY=c.assets[b.frames[a]].frame.y,b.sourceWidth=c.assets[b.frames[a]].frame.w,b.sourceHeight=c.assets[b.frames[a]].frame.h,b.width=c.assets[b.frames[a]].frame.w,b.height=c.assets[b.frames[a]].frame.h),b._currentFrame=a;else throw Error("Frame number "+a+"doesn't exist");};b.x=0;b.y=0;0<b.frames.length&&(c.addStatePlayer(b),Object.defineProperty(b,
"currentFrame",{get:function(){return b._currentFrame},enumerable:!1,configurable:!1}));c.stage.addChild(b);b.render=function(a){a.drawImage(b.source,b.sourceX,b.sourceY,b.sourceWidth,b.sourceHeight,-b.width*b.pivotX,-b.height*b.pivotY,b.width,b.height)};return b};c.button=function(a){a=c.sprite(a);a.subtype="button";x(a);return a};c.image=function(a){return c.assets[a]};c.json=function(a){return c.assets[a]};c.addStatePlayer=function(a){function b(b){g();e=b[0];h=b[1];f=h-e;0===e&&(f+=1,d+=1);1===
f&&(f=2,d+=1);a.fps||(a.fps=12);b=1E3/a.fps;a.gotoAndStop(e);l||(n=setInterval(c.bind(this),b),l=!0)}function c(){d<f?(a.gotoAndStop(a.currentFrame+1),d+=1):a.loop&&(a.gotoAndStop(e),d=1)}function g(){void 0!==n&&!0===l&&(l=!1,f=h=e=d=0,clearInterval(n))}var d=0,f=0,e=0,h=0,n=void 0,l=!1;a.show=function(b){g();"string"!==typeof b?a.gotoAndStop(b):a.gotoAndStop(a.frames.indexOf(b))};a.play=function(){b([0,a.frames.length-1])};a.stop=function(){g();a.gotoAndStop(a.currentFrame)};a.playing=l;a.playSequence=
b};c.render=function(a,b){function g(f){if(f.visible&&f.gx<a.width+f.width&&f.gx+f.width>=-f.width&&f.gy<a.height+f.height&&f.gy+f.height>=-f.height){d.save();c.interpolate?(f.renderX=void 0!==f._previousX?(f.x-f._previousX)*b+f._previousX:f.x,f.renderY=void 0!==f._previousY?(f.y-f._previousY)*b+f._previousY:f.y):(f.renderX=f.x,f.renderY=f.y);d.translate(f.renderX+f.width*f.pivotX,f.renderY+f.height*f.pivotY);d.globalAlpha=f.alpha;d.rotate(f.rotation);d.scale(f.scaleX,f.scaleY);f.shadow&&(d.shadowColor=
f.shadowColor,d.shadowOffsetX=f.shadowOffsetX,d.shadowOffsetY=f.shadowOffsetY,d.shadowBlur=f.shadowBlur);f.blendMode&&(d.globalCompositeOperation=f.blendMode);f.render&&f.render(d);if(f.children&&0<f.children.length){d.translate(-f.width*f.pivotX,-f.height*f.pivotY);for(var e=0;e<f.children.length;e++)g(f.children[e])}d.restore()}}var d=a.ctx;d.clearRect(0,0,a.width,a.height);for(var h=0;h<c.stage.children.length;h++)g(c.stage.children[h])};c.assets={toLoad:0,loaded:0,imageExtensions:["bmp","png",
"jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load:function(a){console.log("Loading assets...");var b=this;b.toLoad=a.length;a.forEach(function(a){var g=a.split(".").pop();if(-1!==b.imageExtensions.indexOf(g)){var d=new Image;d.addEventListener("load",function(){d.name=a;b[d.name]={source:d,frame:{x:0,y:0,w:d.width,h:d.height}};b.loadHandler()},!1);d.src=a}else if(-1!==b.fontExtensions.indexOf(g)){g=
a.split("/").pop().split(".")[0];var f=document.createElement("style");f.appendChild(document.createTextNode("@font-face {font-family: '"+g+"'; src: url('"+a+"');}"));document.head.appendChild(f);b.loadHandler()}else if(-1!==b.audioExtensions.indexOf(g))g=c.makeSound(a,b.loadHandler.bind(b)),g.name=a,b[g.name]=g;else if(-1!==b.jsonExtensions.indexOf(g)){var e=new XMLHttpRequest,h={};e.open("GET",a,!0);e.addEventListener("readystatechange",function(){200===e.status&&4===e.readyState&&(h=JSON.parse(e.responseText),
h.name=a,b[h.name]=h,h.frames?b.createTilesetFrames(h,a):b.loadHandler())});e.send()}else console.log("File type not recognized: "+a)})},createTilesetFrames:function(a,b){var c=this,g=b.replace(/[^\/]*$/,""),d=new Image;d.addEventListener("load",function(){c[g+a.meta.image]={source:d,frame:{x:0,y:0,w:d.width,h:d.height}};Object.keys(a.frames).forEach(function(b){c[b]=a.frames[b];c[b].source=d});c.loadHandler()},!1);d.src=g+a.meta.image},loadHandler:function(){this.loaded+=1;console.log(this.loaded);
this.toLoad===this.loaded&&(this.loaded=this.toLoad=0,this.whenLoaded())}};c.keyboard=u;c.makeDisplayObject=r;void 0!==GA.plugins&&GA.plugins(c);void 0!==GA.custom&&GA.custom(c);return c};window.ga=GA.create;GA=GA||{};
GA.plugins=function(d){d.move=function(g){if(!1===g instanceof Array)g.x+=g.vx|0,g.y+=g.vy|0;else for(var d=0;d<g.length;d++){var n=g[d];n.x+=n.vx|0;n.y+=n.vy|0}};d.distance=function(g,d){var h=d.centerX-g.centerX;g=d.centerY-g.centerY;return Math.sqrt(h*h+g*g)};d.randomInt=function(g,d){return Math.floor(Math.random()*(d-g+1))+g};d.scaleToWindow=function(g){var h=Math.min(window.innerWidth/d.canvas.width,window.innerHeight/d.canvas.height);d.canvas.style.transformOrigin="0 0";d.canvas.style.transform=
"scale("+h+")";var n=d.canvas.width>d.canvas.height?d.canvas.width*h<window.innerWidth?"horizontally":"vertically":d.canvas.height*h<window.innerHeight?"vertically":"horizontally";if("horizontally"===n){var l=(window.innerWidth-d.canvas.width*h)/2;d.canvas.style.marginLeft=l+"px";d.canvas.style.marginRight=l+"px"}"vertically"===n&&(l=(window.innerHeight-d.canvas.height*h)/2,d.canvas.style.marginTop=l+"px",d.canvas.style.marginBottom=l+"px");d.canvas.style.paddingLeft=0;d.canvas.style.paddingRight=
0;d.canvas.style.paddingTop=0;d.canvas.style.paddingBottom=0;d.canvas.style.display="block";document.body.style.backgroundColor=g||"#2C3539";d.pointer.scale=h;d.scale=h;d.canvas.scaled=!0;g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(d.canvas.style.maxHeight="100%",d.canvas.style.minHeight="100%")};d.particles=[];d.particleEffect=function(g,h,n,l,q,v,t,r,w,x,u,y,c,a,b,k,m,z){function f(f){var e=n();0<e.frames.length&&e.gotoAndStop(Math.floor(Math.random()*(e.frames.length-
1+1))+0);e.x=g-e.halfWidth;e.y=h-e.halfHeight;var l=Math.floor(Math.random()*(x-w+1))+w;e.width=l;e.height=l;e.scaleSpeed=c+Math.random()*(a-c);e.alphaSpeed=b+Math.random()*(k-b);e.rotationSpeed=m+Math.random()*(z-m);l=u+Math.random()*(y-u);e.vx=l*Math.cos(f);e.vy=l*Math.sin(f);e.updateParticle=function(){e.vy+=q;e.x+=e.vx;e.y+=e.vy;0<e.scaleX-e.scaleSpeed&&(e.scaleX-=e.scaleSpeed);0<e.scaleY-e.scaleSpeed&&(e.scaleY-=e.scaleSpeed);e.rotation+=e.rotationSpeed;e.alpha-=e.alphaSpeed;0>=e.alpha&&(d.remove(e),
d.particles.splice(d.particles.indexOf(e),1))};d.particles.push(e)}void 0===g&&(g=0);void 0===h&&(h=0);void 0===n&&(n=function(){return d.circle(10,"red")});void 0===l&&(l=10);void 0===q&&(q=0);void 0===v&&(v=!0);void 0===t&&(t=0);void 0===r&&(r=6.28);void 0===w&&(w=4);void 0===x&&(x=16);void 0===u&&(u=.1);void 0===y&&(y=1);void 0===c&&(c=.01);void 0===a&&(a=.05);void 0===b&&(b=.02);void 0===k&&(k=.02);void 0===m&&(m=.01);void 0===z&&(z=.03);for(var e=[],p,B=(r-t)/(l-1),A=0;A<l;A++)v?(p=t+Math.random()*
(r-t),e.push(p)):(void 0===p&&(p=t),e.push(p),p+=B);e.forEach(function(a){f(a)})};d.updateParticles=function(){if(0<d.particles.length)for(var g=d.particles.length-1;0<=g;g--)d.particles[g].updateParticle()};d.updateFunctions.push(d.updateParticles);d.emitter=function(g,d){function h(){d()}var l={},q=void 0;l.playing=!1;l.play=function(){l.playing||(d(),q=setInterval(h.bind(this),g),l.playing=!0)};l.stop=function(){l.playing&&(clearInterval(q),l.playing=!1)};return l};d.hitTestPoint=function(d,h){var g=
h.radius?"circle":"rectangle";if("rectangle"===g){var l=h.x;var q=h.x+h.width;var v=h.y;var t=h.y+h.height;l=d.x>l&&d.x<q&&d.y>v&&d.y<t}"circle"===g&&(g=d.x-h.centerX,d=d.y-h.centerY,d=Math.sqrt(g*g+d*d),l=d<h.radius);return l};d.hitTestRectangle=function(d,h,n){void 0===n&&(n=!1);if(n){var g=d.gx+d.halfWidth-(h.gx+h.halfWidth);var q=d.gy+d.halfHeight-(h.gy+h.halfHeight)}else g=d.centerX-h.centerX,q=d.centerY-h.centerY;n=d.halfWidth+h.halfWidth;d=d.halfHeight+h.halfHeight;return Math.abs(g)<n?Math.abs(q)<
d?!0:!1:!1}};"use strict";
var ga=ga(320,240,load,["dinozarek.png","kaktus.png","piasek.png"]),dino,cactus,glitch,glitchColors="red crimson lime yellow gold darkviolet brown grey".split(" "),endMessages=";Eating your cookies;Looking at your bookmarks;Spying your browser history;Trying to crack your account password;installing rootkit;Wiping out your hard drive;Data saved. Have a nice day.;Data saved. Have a nice day.;It is now safe to to turn off your computer.".split(";"),ground,time=0,points=0,pointsLabel,endLabel,jumpSteps=
0,floorY=144,scrollSpeed=150;ga.start();ga.fps=60;function load(){ga.backgroundColor="lightblue";ground=createGround();dino=ga.sprite("dinozarek.png");cactus=ga.sprite("kaktus.png");glitch=ga.rectangle(64,64,"red","",0,360,floorY-32);pointsLabel=ga.text("0","16px serif","black",250,20);dino.x=8;dino.y=floorY;genCactus();setupPlayerControls();ga.state=game}
function createGround(d,g){d=ga.group();for(g=0;10>g;g++)for(var h=0;3>h;h++){var n=ga.sprite("piasek.png");n.x=32*g;n.y=floorY+32*(h+1);d.addChild(n)}return d}function genCactus(){cactus.x=ga.randomInt(320,350);cactus.y=floorY}function jump(){dino.y==floorY&&(jumpSteps=24)}function reset(){dino.x=8;dino.y=floorY;genCactus();points=0;scrollSpeed=150;pointsLabel.content="0"}function centeredLabel(d,g,h,n){d=ga.text(d,g,h,1,n);ga.canvas.ctx.font=g;d.x=.5*(ga.stage.width-d.width);return d}
function end(){time=0;ga.state=endGame;ga.remove(dino);ga.remove(cactus);ga.remove(glitch);ga.remove(ground);ga.remove(pointsLabel);ga.text(":(","64px sans-serif","white",32,32);ga.text("Your dino run into a glitch","14px sans-serif","white",96,32);ga.text("and needs to restart","14px sans-serif","white",96,54);ga.text("We're just collecting some","14px sans-serif","white",96,76);ga.text("offline data and then we'll","14px sans-serif","white",96,98);ga.text("restart for you","14px sans-serif","white",
96,120);endLabel=centeredLabel("","14px sans-serif","white",160);centeredLabel("To know more search online","14px sans-serif","white",190);centeredLabel("for code 0FF11N3","14px sans-serif","white",212)}function score(){points++;pointsLabel.content=points;dino.x+=12;scrollSpeed+=8}function setupPlayerControls(){ga.key.upArrow.press=function(){jump()};ga.key.space.press=function(){jump()}}
function game(){0<jumpSteps?(jumpSteps--,dino.y-=4):dino.y=Math.min(floorY,dino.y+4);13>=points?(cactus.x-=scrollSpeed/ga.fps,-30>cactus.x&&(score(),genCactus()),ga.hitTestRectangle(dino,cactus,!1)&&reset()):(glitch.x-=50/ga.fps,glitch.fillStyle=glitchColors[ga.randomInt(0,glitchColors.length-1)],ga.hitTestRectangle(dino,glitch,!1)&&end())}
function endGame(){time+=1/ga.fps;endLabel.content=endMessages[Math.min(endMessages.length-1,Math.floor(time/3.5))];ga.canvas.ctx.font=endLabel.font;endLabel.x=.5*(ga.stage.width-endLabel.width)};
