<html><head><title>Pest Control : Weasels</title><style type="text/css">div,canvas{width:100%;margin:0;position:absolute;top:0;left:0;image-rendering:-o-crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor}#bg{background:linear-gradient(#013,#213,#413,#813,#e73)}body{overflow-x:hidden;overflow-y:hidden;background:#000}img{display:none}</style></head><body><div><div id="bg"></div><canvas id="c"></canvas><canvas id="o"></canvas><img id="s" src="s.png"/></div><script>function s(){}function x(t,a,e,i){a+=4*i,z(t,a,e,136,95,17),--e,z(t,a,e,136,95,17),a+=i,z(t,a,e,136,95,17),z(t,a+i,e,136,95,17),t.ga=!1}function E(t,a,e,i,o){var h=0;a=Math.floor(a),e=Math.floor(e);for(var s=Math.max(0,e);e+o>s;++s)if(s>t.height)h+=i;else for(var r=Math.max(0,a);r<Math.min(a+i,t.width-1);++r)h+=128<t.V[4*r+4*s*t.width+3]?1:0;return h}function z(t,a,e,i,o,h){a=Math.floor(a),e=Math.floor(e),t.V[4*a+4*e*t.width]=i,t.V[4*a+4*e*t.width+1]=o,t.V[4*a+4*e*t.width+2]=h,t.V[4*a+4*e*t.width+3]=255}function G(t){return t.sa=3.902*t.sa*(1-t.sa),t.sa}function L(t,a,e,i,o){this.r=t,this.I=a,this.J=t.getContext("2d"),this.a=a.getContext("2d"),this.background=e,this.s=document.createElement("canvas"),this.s.width=300,this.s.height=480,t=this.s.getContext("2d"),t.drawImage(i,0,0),t.scale(-1,1),t.drawImage(i,0,0,140,200,-280,0,140,200),t.drawImage(i,0,200,150,200,-300,200,150,200),t.scale(-1,1),t.fillStyle="#22F",t.fillRect(1,440,46,40),t.fillStyle="#008",t.fillRect(49,440,46,40),t.fillStyle="#C62",t.fillRect(97,440,46,40),t.fillStyle="#620",t.fillRect(145,440,46,40),i=this.a.createLinearGradient(0,440,0,480),i.addColorStop(0,"rgba(255,255,255,.6)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.fillRect(4,443,40,34),t.fillRect(52,443,40,34),t.fillRect(100,443,40,34),t.fillRect(148,443,40,34),this.t=Math.max(1,Math.floor(window.innerHeight/320)),i=Math.ceil(window.innerHeight/this.t),t=Math.ceil(window.innerWidth/this.t),this.I.height=i,this.r.height=256,this.I.width=t,this.r.width=1e3,this.I.style.width=t*this.t+"px",this.I.style.height=i*this.t+"px",this.r.style.width=1e3*this.t+"px",this.background.style.height=this.r.style.height=256*this.t+"px",this.b=o,this.Q=this.G=0,this.Ha=t-this.r.width,this.g=[]}function aa(){var t=game.P;if(t.a.clearRect(0,0,t.I.width,t.I.height),1<=t.b.state){var a=t.b.c.O;a.ga||(t.J.putImageData(a.Ia,0,0),a.ga=!0),a=t.b.c.k-t.b.c.Ea,a=Math.floor(Math.floor(20*Math.exp(-.2*a))*Math.cos(a)),t.r.style.top=a+"px",t.a.translate(t.Q,a),t.a.clearRect(0,0,t.I.width,t.I.height);for(var e=0;e<t.b.c.i.length;++e){var i=t.b.c.i[e];if(4==i.type)t.a.drawImage(t.s,59,108,12,17,Math.floor(i.x-11+4*Math.sin(t.G/30)),i.y-32,12,17),t.a.drawImage(t.s,47,108,12,17,Math.floor(i.x+6+3*Math.sin(1+t.G/28)),i.y-33,12,17),t.a.drawImage(t.s,1,301,12,17,Math.floor(i.x-4+3*Math.sin(2+t.G/25)),i.y-31,12,17),t.a.lineWidth=1,t.a.strokeStyle="#410",t.a.beginPath(),t.a.moveTo(i.x,i.y),t.a.lineTo(Math.floor(i.x-6+4*Math.sin(t.G/30)),i.y-17),t.a.moveTo(i.x,i.y),t.a.lineTo(Math.floor(i.x+11+3*Math.sin(1+t.G/28)),i.y-18),t.a.moveTo(i.x,i.y),t.a.lineTo(Math.floor(i.x+1+3*Math.sin(2+t.G/25)),i.y-16),t.a.stroke();else{var o=t.b.c.R[i.type][0],h=t.b.c.R[i.type][1],s=t.G>>(1==i.type?1:2);t.a.drawImage(t.s,s%[4,4,1,1,1,4,4][i.type]*i.dir*35+(-1==i.dir?280-2*o:0),27*i.type,2*o,h,i.x-o,i.y-h+1,2*o,h)}2==i.type&&t.b.c.h!=e&&t.g.push(0,i.x+10*i.dir,i.y-12,2*i.dir,0)}for(e=0;e<t.b.c.d.length;++e)i=t.b.c.d[e],0<=i.f&&(8!=i.f||10>i.k)&&(o=5==i.f?2:i.f,s=2==o?[5,6,7,8,9,8,7,6][(i.k>>1)%8]:i.k%10,s=3==o||6==o||7==o?0:s,s=(-1==i.dir?19:0)+i.dir*s,t.a.drawImage(t.s,15*s,200+20*o,15,20,Math.floor(i.x)-7,Math.floor(i.y)-19,15,20),2==o&&t.a.drawImage(t.s,-1==i.dir?285:0,200+20*i.f,15,20,Math.floor(i.x)-7,Math.floor(i.y)-31,15,20),7==i.f&&10>i.k&&t.a.drawImage(t.s,(-1==i.dir?285:0)+15*i.dir*(i.k>>1),240,15,20,Math.floor(i.x)-7,Math.floor(i.y)-31,15,20)),i.ka&&t.a.drawImage(t.s,15*i.ka,300,15,20,i.x-7,i.y-19,15,20);for(-1<t.b.c.n&&0<t.b.c.w[t.b.c.n]&&t.b.c.controls.o<t.r.height&&0>t.b.c.h&&0>t.b.c.ma&&2==t.b.state&&(o=t.b.c.R[t.b.c.n][0],h=t.b.c.R[t.b.c.n][1],t.a.drawImage(t.s,0,27*t.b.c.n,2*o,h,t.b.c.controls.S-o,t.b.c.controls.o-h+1,2*o,h)),e=0;e<t.g.length;e+=5)s=Math.floor(Math.min(255,Math.max(0,186+50*t.g[e]-5*t.g[e]*t.g[e]))),i=Math.floor(Math.min(255,Math.max(0,229+11*t.g[e]-2.83*t.g[e]*t.g[e]))),o=Math.floor(Math.min(255,Math.max(0,203+14*t.g[e]-4.55*t.g[e]*t.g[e]))),h=Math.min(1,Math.max(0,1.25-.02*t.g[e])),t.a.fillStyle="rgba("+s+","+i+","+o+","+h+")",t.a.beginPath(),t.a.arc(t.g[e+1],t.g[e+2],10>t.g[e]?Math.min(2,.5*t.g[e]):.5+.15*t.g[e],0,7),t.a.fill(),64<=t.g[e]?(t.g.splice(e,5),e-=5):(++t.g[e],t.g[e+1]+=t.g[e+3],t.g[e+2]+=t.g[e+4],t.g[e+3]=.98*t.g[e+3]+.2*Math.random()-.1,t.g[e+4]+=(10<t.g[e]?0:.1)-.2*Math.random());for(t.a.fillStyle="#138",e=0;e<t.I.width;e+=10)t.a.fillRect(e-t.Q,t.r.height+2,10,-12-8*Math.sin(.2*t.G)*Math.sin((t.G+e-t.Q)/10));t.a.translate(-t.Q,-a)}if(0==t.b.state){for(t.J.clearRect(0,0,t.r.width,t.r.height),t.J.strokeStyle="#080",t.J.lineWidth=10,t.J.font="40pt Verdana",t.J.textAlign="center",t.J.strokeText("PEST CONTROL",500,100),t.J.font="65pt Verdana",t.J.strokeText("WEASELS",500,200),a=window.innerWidth/8/t.t,t.a.lineWidth=1,e=t.a.createLinearGradient(0,262,0,314),e.addColorStop(0,"rgba(255,255,255,.8)"),e.addColorStop(1,"rgba(255,255,255,.1)"),s=0;4>s;++s)t.a.fillStyle=t.b.controls.oa==s&&0<t.b.controls.fa&&2!=s?"#b43":"#413",t.a.fillRect(1+a*s*2,258,2*a-2,60),t.a.fillStyle=e,t.a.fillRect(5+a*s*2,262,2*a-10,52);t.a.fillStyle=2==t.b.controls.oa&&1==t.b.controls.fa?"#b43":"#413",t.a.beginPath(),t.a.moveTo(4.5*a,276),t.a.lineTo(5.5*a,276),t.a.lineTo(5*a,266),t.a.fill(),t.a.fillStyle=2==t.b.controls.oa&&2==t.b.controls.fa?"#b43":"#413",t.a.beginPath(),t.a.moveTo(4.5*a,298),t.a.lineTo(5.5*a,298),t.a.lineTo(5*a,308),t.a.fill(),t.b.H==t.b.j.ja&&t.a.drawImage(t.s,71,108,9,11,5*a-4,267,9,11),t.a.fillStyle="#FFF",t.a.lineWidth=1,t.a.shadowColor="#413",t.a.textAlign="center",t.a.font="bold italic 16px sans-serif",e="SFX : "+(t.b.j.K?"ON":"OFF"),O(t,e,a,292),e="MUSIC : "+(t.b.j.ra?"ON":"OFF"),O(t,e,3*a,292),e="LEVEL "+(9>t.b.H?"0":"")+(1+t.b.H),O(t,e,5*a,292),O(t,"START",7*a,292),t.a.shadowOffsetX=0,t.a.shadowOffsetY=0}if(1==t.b.state&&(a=272,t.a.lineWidth=1,t.a.textAlign="left",t.a.font="bold 14px sans-serif",t.a.shadowColor="#060",t.a.fillStyle="#8F8",e="Level "+(1+t.b.H)+" - "+t.b.c.Ja,O(t,e,20,a),a+=16,e=t.b.c.u?"Get rid of "+(t.b.c.u==t.b.c.ha?"all "+t.b.c.u+" weasels":t.b.c.u+" weasels out of "+t.b.c.ha):"Do not let any weasel out",O(t,e,20,a),a+=16,time=Math.floor((t.b.c.totalTime-t.b.c.k)/50),e="Time "+Math.floor(time/60)+":"+(10>time%60?"0":"")+time%60,O(t,e,20,a),O(t,"Click to start",20,a+16),t.a.shadowOffsetX=0,t.a.shadowOffsetY=0,t.g=[]),2==t.b.state){for(a=t.b.c.w,t.a.strokeStyle="#000",t.a.lineWidth=3,t.a.textAlign="center",t.a.font="bold italic 14px sans-serif",e=0;e<a.length;++e)t.a.drawImage(t.s,t.b.c.N==e?48:0,440,48,40,0+46*e+2*e,280,48,40),t.a.drawImage(t.s,e?0:81,e?27*e:108,35,27,0+46*e+2*e+10,288,35,27),s=0>a[e]?"oo":a[e],t.a.strokeText(s,0+46*e+2*e+33,316),t.a.fillStyle="#FFF",t.a.fillText(s,0+46*e+2*e+33,316);for(i=Math.floor(window.innerWidth/t.t)-192,e=0;4>e;++e)t.a.drawImage(t.s,t.b.c.N==e+a.length?144:96,440,48,40,0+i+46*e+2*e,280,48,40),s=["| |",">>","reset","menu"][e],(0==e&&t.b.pause||1==e&&t.b.aa)&&32&t.G&&(s=">"),t.a.strokeText(s,0+i+46*e+2*e+23,310),t.a.fillStyle="#FFF",t.a.fillText(s,0+i+46*e+2*e+23,310);t.a.strokeStyle="#F00",-1<t.b.c.n&&(t.a.beginPath(),t.a.rect(0+46*t.b.c.n+2*t.b.c.n+1,280,46,40),t.a.stroke()),t.a.lineWidth=1,t.a.textAlign="left",t.a.font="bold 14px sans-serif",t.a.shadowColor="#060",t.a.fillStyle="#8F8",t.a.textAlign="center",a=t.b.c.L+(0<t.b.c.u?"/"+t.b.c.u:"")+" fragged, "+t.b.c.qa+" in, "+t.b.c.pa+" out",O(t,a,.6*window.innerWidth/t.t,272),t.a.textAlign="right",a=Math.floor((t.b.c.totalTime-t.b.c.k)/25),a=Math.floor(a/60)+":"+(10>a%60?"0":"")+a%60,O(t,a,window.innerWidth/t.t-5,272),t.a.textAlign="left",a="",e=t.b.c.n,-1<t.b.c.N&&(e=t.b.c.N),s=0==t.b.c.w[e]?" (none left)":"",-1<t.b.c.h&&(e=t.b.c.i[t.b.c.h].type,t.b.c.M?(a="Dragging ",s=""):(a="",s=" (turn around or move)")),e>t.b.c.w.length+1&&(s=t.b.ca==e-t.b.c.w.length?" (click again to confirm)":" (click twice)"),e==t.b.c.w.length-1&&0<t.b.c.da&&(s=" (reloading)"),a=a+";Landmine;Fan;Flamethrower;Weight;Shotgun;Pause;Fast forward;Restart level;Return to main menu".split(";")[1+e]+s,O(t,a,5,272),t.a.shadowOffsetX=0,t.a.shadowOffsetY=0,a="default",t.b.c.controls.o<t.r.height&&(-1!=t.b.c.h?a=t.b.c.U?"pointer":t.b.c.M?"no-drop":"ew-resize":-1!=t.b.c.ma?a="pointer":t.b.c.n==t.b.c.w.length-1&&(a=t.b.c.da?"wait":"crosshair")),t.I.style.cursor=a}4==t.b.state&&(a=272,t.a.lineWidth=1,t.a.textAlign="left",t.a.font="bold 14px sans-serif",t.a.shadowColor="#060",t.a.fillStyle="#8F8",e=P(t.b.c),s=t.b.c.u?(t.b.c.L?t.b.c.L:"Not a single")+" weasel"+(t.b.c.L?"s":"")+" killed.":e?"No weasel made it to the exit.":"A weasel escaped ! ",O(t,s,20,a),a+=16,s=t.b.c.u?0==t.b.c.L?"Sitting duck !":2*t.b.c.L<t.b.c.u?"Not enough":e?"Fixed'em once for all !":"Close, but no cigar":e?"Great job! ":"Slick devils, ain't them ?",O(t,s,20,a),O(t,e?"Click for next level":"Click to try again",20,a+16),t.a.shadowOffsetX=0,t.a.shadowOffsetY=0),++t.G}function O(t,a,e,i){t.a.shadowOffsetX=-1,t.a.shadowOffsetY=-1,t.a.fillText(a,e,i),t.a.shadowOffsetX=2,t.a.shadowOffsetY=2,t.a.fillText(a,e,i)}function Q(t,a,e,i){i&&(t.Q=0),a=t.Q=Math.min(0,Math.max(t.Q+a,t.Ha)),e.offsetX=a,e.S=e.W-e.offsetX,t.r.style.left=t.t*t.Q+"px"}function ba(){var t=renderer;return t.J.getImageData(0,0,t.r.width,t.r.height)}function ma(t){this.j=t;try{var a=new Audio("").canPlayType("audio/wav");this.F="probably"==a||"maybe"==a}catch(e){this.F=!1}}function na(t){if(t.F){var a=new R;a.ba(da),a.B(),t.ya=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),a.B(),t.za=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),a=new R,a.ba(ga),a.B(),t.va=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),a=new R,a.ba(ha),a.B(),t.ua=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),a=new R,a.ba(ea),a.B(),a.B(),t.xa=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),a=new R,a.ba(fa),a.B(),t.wa=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),a=new R,a.ba(ca),a.B(),a.B(),a.B(),a.B(),a.B(),t.na=new Audio(URL.createObjectURL(new Blob([a.T()],{type:"audio/wav"}))),t.na.loop=!0}}function oa(t,a,e){this.controls=t,this.D=e,this.N=-1,this.O=a,this.Ka=43,this.Ba=this.Aa=this.Da=this.Ca=0,this.M=this.U=!1,this.Ga=this.Fa=0,this.R=[[3,3],[12,27],[12,15],[12,25],[12,27],[17,27],[13,25]]}function P(t){return t.u?t.L>=t.u:t.k>=t.totalTime}function S(t){++t.k;for(var a=t.O,e=0,i=0;i<t.d.length;++i){t.d[i].move(a,t.m);var o=t.d[i];for(o.ka=4==t.n&&-1==t.h&&8>Math.abs(t.controls.S-o.x)&&16>Math.abs(t.controls.o-o.y+8)?Math.min(9,o.ka+1):Math.max(0,o.ka-1),e+=0>t.d[i].f?1:0,o=0;o<t.d.length;++o)o!=i&&3==t.d[o].f&&10>Math.abs(t.d[i].x-t.d[o].x)&&10>Math.abs(t.d[i].y-t.d[o].y)&&0>(t.d[i].x-t.d[o].x)*t.d[i].dir&&(t.d[i].dir*=-1)}for(t.L=e,t.qa=t.d.length-e-t.pa,a=0;a<t.i.length;++a)if(t.h!=a)switch(i=t.i[a],i.type){case 0:for(var e=t,h=!1,o=0;!h&&o<e.d.length;++o)if(-1<e.d[o].f)var s=Math.pow(i.x-e.d[o].x,2)+Math.pow(i.y-e.d[o].y+6,2),h=60>s;if(h){for(var o=e.O,h=i.x,r=i.y,s=-30;30>=s;++s)for(var n=Math.floor(Math.sqrt(900-s*s)),l=-n;n>=l;++l)l+h>=0&&l+h<o.width&&s+r>=0&&s+r<o.height&&(o.V[4*(l+h)+4*(s+r)*o.width+3]=0);for(o.ga=!1,o=0;o<e.d.length;++o)s=Math.pow(i.x-e.d[o].x,2)+Math.pow(i.y-e.d[o].y+6,2),600>s&&(e.d[o].v-=500/(10+s),h=e.d[o],r=50*(e.d[o].x-i.x)/s,s=50*(-6+e.d[o].y-i.y)/s,h.f=6,h.l=r,h.p=s);e=e.D,e.F&&e.j.K&&(e.va.currentTime=0,e.va.play()),e=!0}else{for(++i.p,o=0;o<i.p;++o)E(e.O,i.x-e.R[i.type][0],i.y+1,2*e.R[i.type][0]+1,1)?i.p=0:(++i.y,i.x+=i.l/i.p);e=!1}e&&(t.Ea=t.k,t.i.splice(a,1),t.h>=a&&--t.h,--a);break;case 1:for(e=t,o=0;o<e.d.length;++o)(2==e.d[o].f||5==e.d[o].f)&&10>Math.abs(i.y-e.d[o].y)&&20>Math.abs(i.x+25*i.dir-e.d[o].x)&&(e.d[o].l+=i.dir/Math.abs(e.d[o].x-i.x-10*i.dir));break;case 2:for(e=t,o=0;o<e.d.length;++o)8>Math.abs(i.y-e.d[o].y)&&20>Math.abs(i.x+30*i.dir-e.d[o].x)&&7!=e.d[o].f&&(e.d[o].v-=100/(5+Math.abs(e.d[o].x-i.x-25*i.dir)),0>e.d[o].v&&(e.d[o].f=7,e.d[o].k=0));break;case 4:for(e=t,o=0;o<e.d.length;++o)(0==e.d[o].f||1==e.d[o].f||2==e.d[o].f)&&5>Math.abs(i.y-e.d[o].y)&&2>Math.abs(i.x-e.d[o].x)&&(e.d[o].f=5);break;case 5:for(e=t,o=0;o<e.d.length;++o)8!=e.d[o].f&&8>Math.abs(i.y-e.d[o].y)&&2>Math.abs(i.x-e.d[o].x)&&(e.d[o].f=8,e.d[o].k=0,++e.pa,h=e.D,h.F&&h.j.K&&(h.ua.currentTime=0,h.ua.play()));break;case 6:e=t,0==e.k%e.Ka&&0<e.ha&&(e.d.push(new pa(i.x,i.y,i.dir)),--e.ha,++e.qa)}qa(t),qa(t),0==(255&t.k)&&ra(t)}function qa(t){if(0!=t.Z.length){var a=t.Z.shift();0<a.x&&(t.m[a.x-1][a.y]||t.Z.push({x:a.x-1,y:a.y}),20&t.m[a.x-1][a.y]||(t.m[a.x-1][a.y]|=1)),a.x+1<t.O.width>>5&&(t.m[a.x+1][a.y]||t.Z.push({x:a.x+1,y:a.y}),17&t.m[a.x+1][a.y]||(t.m[a.x+1][a.y]|=4)),0<a.y&&(t.m[a.x][a.y-1]||t.Z.push({x:a.x,y:a.y-1}),24&t.m[a.x][a.y-1]||(t.m[a.x][a.y-1]|=2)),7>a.y&&(t.m[a.x][a.y+1]||t.Z.push({x:a.x,y:a.y+1}),18&t.m[a.x][a.y+1]||(t.m[a.x][a.y+1]|=8))}}function ra(t){t.m=[],t.Z=[];for(var a=0;a<t.O.width>>5;++a)t.m.push([0,0,0,0,0,0,0,0].slice());for(a=0;a<t.i.length;++a)5==t.i[a].type&&(t.m[t.i[a].x>>5][t.i[a].y>>5]=16,t.Z.push({x:t.i[a].x>>5,y:t.i[a].y>>5}))}function sa(){this.o=this.W=0,this.la=-1,this.ta=1,this.offsetX=0,this.q=!1}function pa(t,a,e){this.x=t,this.y=a,this.dir=e,this.f=0,this.v=100,this.ka=this.p=this.l=this.k=this.ia=0}function Y(t,a,e){for(var i=!0,o=0;i&&e>o;)E(a,t.x-3,t.y+1,7,1)?(i=!1,o=0):(++t.ia,++o,++t.y);return o}function ta(t,a){this.controls=t,this.pause=this.aa=!1,this.ca=-1,this.j={K:!0,ra:!0,ja:0};var e=localStorage.getItem("WeaselsData");e&&(this.j=JSON.parse(e)),this.H=this.j.ja,this.D=new ma(this.j),this.c=new oa(t,a,this.D)}function Z(t){localStorage.setItem("WeaselsData",JSON.stringify(t.j))}function ua(){aa(),requestAnimationFrame(function(){ua()})}function $(t,a){if(0==a&&Q(t.P,t.P.Ha>>1,t.controls,!0),1==a||2==a&&2==t.state){var e=t.c,i=t.H;e.n=4,e.d=[],e.Ea=-999,e.h=-1,e.ma=-1,e.da=0;var o=[["Walking through a minefield",20,20,120,[10,0,0,0,-1],[6,190,20,5,817,159],[2,100,160,800,96]],["Gone with the wind",20,10,120,[0,3,0,0,-1],[6,300,20,5,400,219],[1,200,60,544,16,1,200,220,576,36,1,776,204,32,52]],["Pop goes the weasel",10,10,120,[0,2,0,0,-1],[6,260,100,5,740,176,4,530,199],[2,200,200,350,56,2,660,180,100,76]],["Cooked to order",20,15,120,[0,0,3,0,-1],[6,300,20,5,300,220],[1,280,60,384,16,1,220,140,256,16,1,508,140,256,16,1,252,220,480,16]],["Caution, thin ice",15,15,120,[3,0,0,0,-1],[6,210,16,5,200,191],[1,192,32,192,16,1,352,64,192,16,1,192,96,192,16,1,352,128,320,16,1,320,160,448,16,1,768,144,32,32,1,160,192,256,64]],["Stairway to hell",4,4,120,[2,0,0,0,-1],[6,260,100,5,740,175],[2,200,200,400,56,2,630,170,130,86]],["No mines this time",15,15,120,[0,1,1,0,-1],[6,210,16,5,200,191],[1,192,32,192,16,1,352,64,192,16,1,192,96,192,16,1,352,128,320,16,1,320,160,448,16,1,768,144,32,32,1,160,192,256,64]],["Bad kids get grounded",4,4,120,[2,0,0,0,-1],[6,260,100,5,740,174,4,530,199],[2,200,200,400,56,2,630,170,130,86]],["In so many ways",10,10,180,[3,0,0,0,-1],[6,300,50,5,220,239,5,280,239,5,340,239,5,400,239,5,460,239,5,520,239,5,580,239,5,640,239,5,700,239,5,760,239],[1,256,128,448,16,1,192,240,608,16]],["Dark side of the mountain",15,15,120,[2,3,0,0,-1],[6,250,120,5,780,175,4,430,180],[3,200,180,600,126]]][Math.min(9,Math.max(0,i))];for(e.Ja=o[0],e.L=0,e.qa=0,e.pa=0,e.ha=o[1],e.u=o[2],e.k=0,e.totalTime=25*o[3],e.w=o[4].slice(),e.i=[],i=0;i<o[5].length;i+=3)e.i.push({type:o[5][i],x:o[5][i+1],y:o[5][i+2],l:0,p:0,dir:1});i=e.O,o=o[6],i.sa=1/(1+o.length);for(var h=i.height*i.width*4;h;)i.V[--h]=0;for(h=0;h<o.length;h+=5){if(1==o[h])for(var s=0;s<o[h+3];++s)for(var r=0;r<o[h+4];++r){var n=0==s%32||0==r%16?3:31==s%32||15==r%16?0:20==(s+r&20)?2:1;z(i,s+o[h+1],r+o[h+2],[0,64,150,204][n],[32,160,224,255][n],[128,224,255,255][n])}if(2==o[h]||3==o[h])for(s=r=0;s<o[h+3];++s){for(var l=r+2*G(i)-1.2+(3==o[h]?.05*(s-.7*o[h+3])*Math.exp(-(s-.7*o[h+3])*(s-.7*o[h+3])/4e3):0),n=1+4*G(i),c=n+1+3*G(i),r=0;c>r;++r){var f=r>0&&n>r?1:0;z(i,s+o[h+1],l+r+o[h+2],[34,119][f],[102,153][f],[34,0][f])}for(;l+r<o[h+4];++r){for(var f=s/10,d=10+(r+l)/5,n=Math.floor(f),c=Math.floor(d),f=f-n,d=d-c,y=0,b=0,g=-2;2>=g;g++)for(var w=-2;2>=w;w++)var u=n+w,x=c+g,u=(u+x)*(500.15*(u-x)-Math.floor(500.15*(u-x)))*(40.946*x-Math.floor(40.946*x)),u=w-f+(u-Math.floor(u)),x=n+w,p=c+g,x=(x-p)*(x+p-51.707-Math.floor(51.707*(x+p)))*(Math.ceil(222.2*p)-222.2*p),x=g-d+(x-Math.floor(x)),u=Math.pow(1-Math.sqrt(u*u+x*x),8),x=n+w,p=c+g,x=(x+p)*p+(x-1.414*p)*x,y=y+u*(x-Math.floor(x)),b=b+u;n=Math.max(0,Math.floor(y/b*4)),z(i,s+o[h+1],l+r+o[h+2],[102,136,170,204][n],[0,34,85,119][n],[0,17,17,0][n])}r=l}}i.ga=!1,ra(e),t.ca=-1,t.aa=!1,t.pause=!1}2==a?(e=t.D,e.F&&e.j.ra&&(e.na.currentTime=0,e.na.play())):(e=t.D,e.F&&e.na.pause()),t.state=a}function va(){var t=game;na(t.D),$(t,0),setInterval(function(){var t=game;if(0==t.state&&t.controls.q&&(t.controls.q=!1,0<t.controls.fa))switch(t.controls.oa){case 0:t.j.K=!t.j.K,Z(t);var a=t.D;a.F&&!a.j.K&&(a.ya.pause(),a.za.pause(),a.va.pause(),a.ua.pause(),a.xa.pause(),a.wa.pause());break;case 1:t.j.ra=!t.j.ra,Z(t);break;case 2:zone=Math.floor(2*t.P.t*(t.controls.o-256)/(window.innerHeight/t.P.t-256)),t.H=2==t.controls.fa?Math.max(0,t.H-1):Math.min(t.j.ja,t.H+1);break;case 3:$(t,1)}if(1==t.state&&t.controls.q&&(t.controls.q=!1,$(t,2)),0<t.state&&256>t.controls.o&&(5>t.controls.W&&Q(t.P,5,t.controls,!1),5>window.innerWidth/t.P.t-t.controls.W&&Q(t.P,-5,t.controls,!1)),2==t.state){if(t.controls.q)if(t.controls.la>=t.c.w.length){switch(a=t.controls.la-t.c.w.length,t.controls.q=!1,a){case 0:t.aa=!1,t.pause=!t.pause;break;case 1:t.pause=!1,t.aa=!t.aa;break;case 2:t.ca==a&&($(t,2),a=-1);break;case 3:t.ca==a&&($(t,0),a=-1)}t.ca=a}else t.ca=-1;if(a=t.c,a.da&&--a.da,a.N=a.controls.la,-1<a.N&&a.N<a.w.length&&a.controls.q&&-1==a.h&&(a.n=a.N),a.controls.o<a.O.height)if(-1==a.h){a.M=!1,a.U=!1;var e;t:{e=a.controls.S;for(var i=a.controls.o,o=0;o<a.i.length;++o){var h=a.i[o],s=a.R[h.type][0],r=a.R[h.type][1];if(5>h.type&&e>h.x-s-5&&e<h.x+s+5&&i>h.y-r-5&&i<h.y+5){e=o;break t}}e=-1}if(a.ma=e,a.controls.q)if(-1<a.ma)a.h=a.ma,a.Aa=a.controls.S,a.Ba=a.controls.o,a.Ca=a.i[a.h].x,a.Da=a.i[a.h].y;else if(4==a.n){if(!a.da){for(e=a.controls.S,i=a.controls.o,a.da=15,o=!1,h=0;h<a.d.length;++h)s=7>Math.abs(e-a.d[h].x)&&9>Math.abs(i-a.d[h].y+22),o=o||3>Math.abs(e-a.d[h].x)&&5>Math.abs(i-a.d[h].y+6),5==a.d[h].f&&s&&(a.d[h].f=6);o?(e=a.D,e.F&&e.j.K&&(e.za.currentTime=0,e.za.play())):(e=a.D,e.F&&e.j.K&&(e.ya.currentTime=0,e.ya.play())),a.controls.q=!1}}else-1<a.n&&0<a.w[a.n]&&(a.h=-2)}else-1<a.h?(i=a.controls.S-a.Aa,e=a.controls.o-a.Ba,a.M=a.M||i*i+e*e>25,a.M&&(i=a.Ca+i,e=a.Da+e,a.U=!0,a.U&&(a.Fa=i,a.Ga=e),a.i[a.h].x=i,a.i[a.h].y=e),a.controls.q||(a.M?a.U||(a.i[a.h].x=a.Fa,a.i[a.h].y=a.Ga):(1==a.i[a.h].type||2==a.i[a.h].type)&&(a.i[a.h].dir*=-1),a.h=-1,a.M=!1)):(a.U=!0,a.controls.q||(a.U&&(a.i.push({type:a.n,x:a.controls.S,y:a.controls.o,l:0,p:0,dir:1}),--a.w[a.n]),a.h=-1));else-1==a.h||a.controls.q||(-1<a.h&&(e=a.h,++a.w[a.i[e].type],a.i.splice(e,1)),a.h=-1)}2!=t.state||t.pause||(S(t.c),t.aa&&(S(t.c),S(t.c)),(a=P(t.c))||(a=t.c,a=a.u?a.k>=a.totalTime||a.ha+a.qa+a.L<a.u:0<a.pa),a&&(P(t.c)?(a=t.D,a.F&&a.j.K&&(a.xa.currentTime=0,a.xa.play()),++t.H,t.j.ja=Math.max(t.j.ja,t.H),Z(t)):(a=t.D,a.F&&a.j.K&&(a.wa.currentTime=0,a.wa.play())),$(t,4))),4==t.state&&t.controls.q&&(t.controls.q=!1,$(t,1))},40),requestAnimationFrame(function(){ua()})}function R(){function t(t){return Math.sin(6.283184*t)}var a,e,i,o,h,s=[t,function(t){return.5>t%1?1:-1},function(t){return t%1*2-1},function(t){return t=t%1*4,2>t?t-1:3-t}];this.ba=function(t){a=t,e=t.$-2,i=0,o=t.Y*t.X*(e+1)*2,h=new Int32Array(o)},this.B=function(){var r,n,l,c,f,d,y,b,g,w,u=new Int32Array(o),x=a.ea[i],p=a.Y,m=a.X,M=0,v=0;g=!1;var k=[];for(l=0;e>=l;++l)for(d=x.C[l],c=0;m>c;++c){var S=s[x.e[13]],O=x.e[14]/512,R=Math.pow(2,x.e[15]-9)/p,T=x.e[16],F=x.e[17],I=.00308*x.e[18],A=1-x.e[19]/255,j=1e-5*x.e[20],C=x.e[21]/32,L=x.e[22]/512,q=6.283184*Math.pow(2,x.e[23]-9)/p,W=x.e[24]/255,B=x.e[25]*p;for(b=(l*m+c)*p,f=0;4>f;++f)if(n=d?x.A[d-1][c+f*m]:0){if(!k[n]){r=n;var E=x,G=n;y=s[E.e[0]],w=E.e[1];for(var U=E.e[3],D=s[E.e[4]],P=E.e[5],X=E.e[8],Y=E.e[9],N=E.e[10]*E.e[10]*4,H=E.e[11]*E.e[11]*4,z=E.e[12]*E.e[12]*4,J=1/z,$=new Int32Array(N+H+z),K=.003959503758*Math.pow(2,(G+E.e[2]-128-128)/12),E=.003959503758*Math.pow(2,(G+E.e[6]-128-128)/12)*(1+8e-4*E.e[7]),Q=G=0,Z=void 0,V=void 0,_=void 0,ta=void 0,Z=0;N+H+z>Z;Z++)V=1,N>Z?V=Z/N:Z>=N+H&&(V-=(Z-N-H)*J),_=K,U&&(_=_*V*V),G+=_,ta=y(G)*w,_=E,X&&(_=_*V*V),Q+=_,ta+=D(Q)*P,Y&&(ta+=(2*Math.random()-1)*Y),$[Z]=80*ta*V|0;k[r]=$}for(y=k[n],n=0,r=2*b;n<y.length;n++,r+=2)u[r]+=y[n]}for(n=0;p>n;n++)f=2*(b+n),(r=u[f])||g?(g=I,T&&(g*=S(R*f)*O+.5),g=1.5*Math.sin(g),M+=g*v,r=A*(r-v)-M,v+=g*r,r=3==F?v:1==F?r:M,j&&(r*=j,r=1>r?r>-1?t(.25*r):-1:1,r/=j),r*=C,g=r*r>1e-5,y=Math.sin(q*f)*L+.5,w=r*(1-y),r*=y):w=0,f>=B&&(w+=u[f-B+1]*W,r+=u[f-B]*W),u[f]=0|w,u[f+1]=0|r,h[f]+=0|w,h[f+1]+=0|r}i++},this.T=function(){var t=2*o-8,a=t-36,e=new Uint8Array(44+2*o);for(e.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&a,a>>8&255,a>>16&255,a>>24&255]),t=0,a=44;o>t;++t){var i=h[t],i=-32767>i?-32767:i>32767?32767:i;e[a++]=255&i,e[a++]=i>>8&255}return e}}s.prototype={create:function(t,a,e){this.Ia=t,this.V=t.data,this.width=a,this.height=e}},L.prototype={};var ca={ea:[{e:[1,255,128,0,1,154,128,9,0,0,7,5,52,0,0,0,0,2,255,0,0,32,47,3,146,2],C:[1,1,2,1,1,2,3,3],A:[[,,147,,147,,147,,,,146,,149,,,,,,149,,,,149,,,,,149,,,149,,,,151,,,,155,,,,,,,149,,146,,,151,,,,155,,,,,,159,,,,156,,,,,,,,147,,,147,,,147,,146,,,,149,,,,149,,147,,151,,,,147,,,,156,,,,151,,,,151,,147,,144,,,,156,,,,156],[151,,,,151,,151,,151,,151,,156,154,152,151,149,,144,,151,,144,,152,,144,,148,,144,,154,,154,,154,,154,,154,,154,,154,152,151,149,147,,,,159,158,156,158,159,158,159,161,159,,146,,146,,,,146,,,,146,,,,146,,,,144,,,,144,,,,144,,,,144,,,,149,,,,149,,,,149,,,,149,,,,159,,,,,,,,147,,149,,147,,158],[156,154,156,158,159,,,,161,,,,159,,158,156,151,154,151,149,151,,149,,151,,,,149,,147,,144,,,,,,,,147,,,,,,,,146,,,,,,,,,,,,,,,,144,,,,144,,,,147,,,,147,,,,146,,,,146,,,,146,,,,146,,,,144,,,,144,,,,147,,,,147,,,,163]]},{e:[1,128,100,0,1,0,128,0,0,0,0,6,29,2,195,4,1,2,50,184,119,244,147,6,84,6],C:[1,1,2,1,1,2,3,3],A:[[138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150,,138,,150],[145,,157,,145,,157,,145,,157,,145,,157,,143,,155,,143,,155,,143,,155,,143,,155,,148,,160,,148,,160,,148,,160,,148,,160,,141,,153,,141,,153,,145,,157,,145,,157],[138,,150,,138,,150,,141,,153,,141,,153,,145,,157,,145,,157,,145,,157,,145,,157,,138,,150,,138,,150,,141,,153,,141,,153,,145,,157,,145,,157,,145,,157,,145,,157]]},{e:[0,0,140,0,0,255,127,0,0,60,4,10,34,0,187,5,0,1,239,135,0,226,108,5,16,4],C:[,,,1,1,1,1,1],A:[[,,167,167,,,167,167,,167,167,167,,,167,167,,,167,167,,,167,167,,167,167,167,,,167,167,,,167,167,,,167,167,,167,167,167,,,167,167,,,167,167,,,167,167,,167,167,167]]},{e:[0,96,117,1,0,95,110,0,1,0,4,6,35,0,0,0,0,2,14,0,1,154,76,5,0,0],C:[,,,1,1,1,1,1],A:[[161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161,,,,161]]},{e:[0,255,104,1,0,105,99,0,0,0,4,0,66,3,0,0,0,1,0,1,24,32,37,4,0,0],C:[,,1,1,1,1,1,1],A:[[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,167]]}],Y:5292,X:64,$:9},da={ea:[{e:[1,192,92,1,0,166,92,0,1,255,4,8,61,0,0,5,1,2,181,0,0,99,24,0,29,4],C:[1],A:[[147]]},{e:[0,255,152,0,0,132,152,12,0,23,2,0,60,0,0,0,0,1,30,0,0,32,47,3,157,2],C:[1],A:[[,,124]]}],Y:2756,X:32,$:2},ea={ea:[{e:[2,202,128,0,3,201,128,0,0,0,5,16,58,0,195,6,1,2,135,0,0,32,147,6,121,6],C:[1,2],A:[[128,140,143,142,,,,,,,,,133,145,133,,140,152,155,154,,,,,,,,,145,157,145],[152,164,167,166]]},{e:[2,188,128,0,3,247,128,0,0,0,0,6,29,0,195,4,1,3,50,184,119,244,147,6,84,6],C:[1,2],A:[[128,140,143,142,,,,,,,,,133,145,133,,140,152,155,154,,,,,,,,,145,157,145],[152,164,167,166]]}],Y:5513,X:32,$:3},fa={ea:[{e:[2,255,123,0,2,255,128,1,0,51,45,6,77,0,195,3,1,2,82,96,0,32,81,1,148,6],C:[1,2],A:[[147,,154,,,,,,150,,157,,,,,,154,,147,,,,,,150,,149,,148,,147],[146,,145,,144]]}],Y:5168,X:32,$:3},ga={ea:[{e:[1,192,92,1,0,166,92,0,1,255,4,32,61,0,0,5,1,3,99,0,0,99,24,0,29,4],C:[1],A:[[147]]}],Y:2756,X:32,$:2},ha={ea:[{e:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,195,6,1,2,135,0,0,32,147,6,121,6],C:[1],A:[[139,151,139]]}],Y:5513,X:32,$:2};ma.prototype={},oa.prototype={},sa.prototype={},pa.prototype={move:function(t,a){switch(this.v=Math.max(this.v,0),this.y>=t.height-1&&0<=this.p&&-1<this.f&&(this.f=9),this.f){case 0:case 1:if(0<Y(this,t,4))this.f=40<this.ia?2:1;else{var e=4-this.ia;this.f=this.ia=0;t:{if(e>>=1,!E(t,this.x-this.dir,this.y+1,7,5)){var i=a[this.x>>5][this.y>>5],o=i&1<<1-this.dir;if(240<this.y||0!=i&&0==(2&i)){o?(this.f=4,this.k=0):this.f=3;break t}}for(;0<e--;)E(t,this.x+3*this.dir,this.y-1,1,2)&&(this.y-=3),E(t,this.x+3*this.dir,this.y-11,1,12)?this.dir=-this.dir:(this.x+=this.dir,Y(this,t,3));this.l=this.dir}}0>=this.v&&(this.f=-1);break;case 2:this.x+=this.l,this.l*=.9,0==Y(this,t,1)&&(this.f=this.ia=0,this.l=this.dir);break;case 4:if(1==this.k){for(var e=this.x,i=this.y,o=this.dir,e=e-3*o,h=0;7>h;++h)z(t,e,i,136,95,17),e+=o;t.ga=!1,x(t,this.x,this.y,this.dir)}0==this.k%10&&(this.y-=2,this.x+=2*this.dir,E(t,this.x+5*this.dir,this.y-10,10,1)&&(this.dir*=-1,this.f=0),x(t,this.x,this.y,this.dir)),200<this.k&&(this.f=0);break;case 5:20>this.y||E(t,this.x-3*this.dir,this.y-10,7,10)?this.f=1:(--this.y,this.x+=this.l);break;case 6:for(this.p+=.3,e=Math.ceil(Math.max(Math.abs(this.p),Math.abs(this.l))),i=0;e>i;++i)E(t,this.x+(0>this.l?-4:4),this.y-11,1,12)&&(this.l=-this.l/4),0>this.p&&E(t,this.x+(0>this.l?-4:-2),this.y-12,7,1)&&(this.p=0),0<this.p&&E(t,this.x+(0>this.l?-4:-2),this.y+1,7,1)&&(this.v-=Math.max(0,2*this.p+.05*this.l-50),this.l=this.p=0,this.f=1),6==this.f&&(this.x+=this.l/e,this.y+=this.p/e);break;case 7:0<!Y(this,t,4)&&(this.f=-1);break;case 9:this.v-=2,0>=this.v&&(this.f=-1)}++this.k}},ta.prototype={},window.onload=function(){controls=new sa,document.onmousedown=function(){return controls.q=!0},document.onmouseup=function(){return controls.q=!1,!0},document.onmousemove=function(t){var a=controls;return a.W=Math.floor(a.ta*t.clientX),a.o=Math.floor(a.ta*t.clientY),a.S=a.W-a.offsetX,a.oa=Math.floor(4*t.clientX/window.innerWidth),a.fa=256<a.o?1+(a.o-256>>5):0,288<=a.o&&320>=a.o?(t=4+Math.floor(a.ta*(t.clientX-window.innerWidth)/48),a.la=t>=0?5+t:240<a.W?-1:Math.floor(a.W/48)):a.la=-1,!0},playField=new s,game=new ta(controls,playField),renderer=new L(document.getElementById("c"),document.getElementById("o"),document.getElementById("bg"),document.getElementById("s"),game),controls.ta=1/renderer.t,playField.create(ba(),renderer.r.width,renderer.r.height),game.P=renderer,va()};</script></body></html>