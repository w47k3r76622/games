<!doctype html><html><head><title>Star Exploder</title><style>body{margin:0;background:#050505;display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;overflow:hidden}canvas{background-color:#111;max-width:100vw;max-height:100vh}button{background:0;border:0}</style></head><body><canvas width="800" height="800"></canvas><script>let t,e,s={};function i(t,...e){(s[t]||[]).map((t=>t(...e)))}function h(){return t}function n(){return e}function r(t,e){return Math.atan2(e.y-t.y,e.x-t.x)+Math.PI/2}function a(t,e){return Math.floor(Math.random()*(e-t+1))+t}function o(t,e,s){return Math.min(Math.max(t,s),e)}function l(t,e){void 0===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}function d(t){let e=localStorage.getItem(t);try{e=JSON.parse(e)}catch(t){}return e}function c(t,e){return t.rotation||e.rotation?null:([t,e]=[t,e].map((t=>u(t))),t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y)}function u(t){let{x:e=0,y:s=0,width:i,height:h}=t.world||t;return t.mapwidth&&(i=t.mapwidth,h=t.mapheight),t.anchor&&(e-=i*t.anchor.x,s-=h*t.anchor.y),i<0&&(e+=i,i*=-1),h<0&&(s+=h,h*=-1),{x:e,y:s,width:i,height:h}}class p{constructor(t=0,e=0,s={}){this.x=t,this.y=e}add(t){return new p(this.x+t.x,this.y+t.y,this)}}function x(){return new p(...arguments)}x.prototype=p.prototype,x.class=p;let g=()=>{},y="position:absolute;width:1px;height:1px;overflow:hidden;";function f(t,e){let s=e.parentNode;if(t.setAttribute("data-kontra",""),s){let i=s.querySelector("[data-kontra]:last-of-type")||e;s.insertBefore(t,i.nextSibling)}else document.body.appendChild(t)}class w extends class{constructor(t){return this.init(t)}init(t={}){this.position=x(),this.velocity=x(),this.acceleration=x(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;this.velocity=this.velocity.add(e);let s=this.velocity;this.position=this.position.add(s),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}{init({width:t=0,height:e=0,context:s=n(),render:i=this.draw,update:h=this.advance,children:r=[],anchor:a={x:0,y:0},sx:o=0,sy:l=0,opacity:d=1,rotation:c=0,scaleX:u=1,scaleY:p=1,...x}={}){this.children=[],super.init({width:t,height:e,context:s,anchor:a,sx:o,sy:l,opacity:d,rotation:c,scaleX:u,scaleY:p,...x}),this._di=!0,this._uw(),r.map((t=>this.addChild(t))),this._rf=i,this._uf=h}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(t){let e=this.context;e.save(),(this.x||this.y)&&e.translate(this.x,this.y),this.rotation&&e.rotate(this.rotation),(this.sx||this.sy)&&e.translate(-this.sx,-this.sy),1==this.scaleX&&1==this.scaleY||e.scale(this.scaleX,this.scaleY);let s=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(s||i)&&e.translate(s,i),this.context.globalAlpha=this.opacity,this._rf(),(s||i)&&e.translate(-s,-i);let h=this.children;t&&(h=h.filter(t)),h.map((t=>t.render&&t.render())),e.restore()}draw(){}_pc(t,e){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:s=1,_wr:i=0,_wsx:h=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=s*this.opacity,this._wr=i+this.rotation;let{x:r,y:a}=function(t,e){let s=Math.sin(e),i=Math.cos(e);return{x:t.x*i-t.y*s,y:t.x*s+t.y*i}}({x:this.x,y:this.y},i);this._wx=r,this._wy=a,this._wsx=h*this.scaleX,this._wsy=n*this.scaleY,this._wx=this.x*h,this._wy=this.y*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}addChild(t,{absolute:e=!1}={}){this.children.push(t),t.parent=this,t._pc=t._pc||g,t._pc()}removeChild(t){let e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),t.parent=null,t._pc())}get opacity(){return this._opa}set opacity(t){this._opa=t,this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}function m(){return new w(...arguments)}m.prototype=w.prototype,m.class=w;class _ extends m.class{init({...t}={}){super.init({...t})}draw(){this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function b(){return new _(...arguments)}b.prototype=_.prototype,b.class=_;let v=/(\d+)(\w+)/;class z extends m.class{init({text:t="",textAlign:e="",lineHeight:s=1,font:i=n().font,...h}={}){t=""+t,super.init({text:t,textAlign:e,lineHeight:s,font:i,...h}),this._p()}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=function(t){let e=t.match(v),s=+e[1];return{size:s,unit:e[2],computed:s}}(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context;if(t.font=this.font,!this._s.length&&this._fw){let e=this.text.split(" "),s=0,i=2;for(;i<=e.length;i++){let h=e.slice(s,i).join(" ");t.measureText(h).width>this._fw&&(this._s.push(e.slice(s,i-1).join(" ")),s=i-1)}this._s.push(e.slice(s,i).join(" "))}if(!this._s.length&&this.text.includes("\n")){let e=0;this.text.split("\n").map((s=>{this._s.push(s),e=Math.max(e,t.measureText(s).width)})),this._w=this._fw||e}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,s=this.context;e=this.textAlign||("rtl"===s.canvas.dir?"right":"left"),t="right"===e?this.width:"center"===e?this.width/2|0:0,this._s.map(((i,h)=>{s.textBaseline="top",s.textAlign=e,s.fillStyle=this.color,s.font=this.font,s.fillText(i,t,this._fs*this.lineHeight*h)}))}}function M(){return new z(...arguments)}M.prototype=z.prototype,M.class=z;let S=new WeakMap,C={},A={},E={0:"left",1:"middle",2:"right"};function k(t,e){let{x:s,y:i,width:h,height:n}=u(t);do{s-=t.sx||0,i-=t.sy||0}while(t=t.parent);let r=e.x-Math.max(s,Math.min(e.x,s+h)),a=e.y-Math.max(i,Math.min(e.y,i+n));return r*r+a*a<e.radius*e.radius}function T(t){let e=t._lf.length?t._lf:t._cf;for(let s=e.length-1;s>=0;s--){let i=e[s];if(i.collidesWithPointer?i.collidesWithPointer(t):k(i,t))return i}}function j(t,e){return parseFloat(t.getPropertyValue(e))||0}function F(t){let e=void 0!==t.button?E[t.button]:"left";A[e]=!0,O(t,"onDown")}function X(t){let e=void 0!==t.button?E[t.button]:"left";A[e]=!1,O(t,"onUp")}function H(t){O(t,"onOver")}function $(t){S.get(t.target)._oo=null,A={}}function O(t,e){t.preventDefault();let s=t.target,i=S.get(s),{scaleX:h,scaleY:n,offsetX:r,offsetY:a}=function(t){let{canvas:e,_s:s}=t,i=e.getBoundingClientRect(),h="none"!==s.transform?s.transform.replace("matrix(","").split(","):[1,1,1,1],n=parseFloat(h[0]),r=parseFloat(h[3]),a=(j(s,"border-left-width")+j(s,"border-right-width"))*n,o=(j(s,"border-top-width")+j(s,"border-bottom-width"))*r,l=(j(s,"padding-left")+j(s,"padding-right"))*n,d=(j(s,"padding-top")+j(s,"padding-bottom"))*r;return{scaleX:(i.width-a-l)/e.width,scaleY:(i.height-o-d)/e.height,offsetX:i.left+(j(s,"border-left-width")+j(s,"padding-left"))*n,offsetY:i.top+(j(s,"border-top-width")+j(s,"padding-top"))*r}}(i);if(-1!==["touchstart","touchmove","touchend"].indexOf(t.type)){i.touches={};for(var o=0;o<t.touches.length;o++)i.touches[t.touches[o].identifier]={id:t.touches[o].identifier,x:(t.touches[o].clientX-r)/h,y:(t.touches[o].clientY-a)/n,changed:!1};for(o=t.changedTouches.length;o--;){const s=t.changedTouches[o].identifier;void 0!==i.touches[s]&&(i.touches[s].changed=!0);let l=t.changedTouches[o].clientX,d=t.changedTouches[o].clientY;i.x=(l-r)/h,i.y=(d-a)/n;let c=T(i);c&&c[e]&&c[e](t),C[e]&&C[e](t,c)}}else{i.x=(t.clientX-r)/h,i.y=(t.clientY-a)/n;let s=T(i);s&&s[e]&&s[e](t),C[e]&&C[e](t,s),"onOver"==e&&(s!=i._oo&&i._oo&&i._oo.onOut&&i._oo.onOut(t),i._oo=s)}}function P(...t){t.map((t=>{let e=t.context?t.context.canvas:h(),s=S.get(e);t._r||(t._r=t.render,t.render=function(){s._cf.push(this),this._r()},s._o.push(t))}))}class Y extends b.class{init({padX:t=0,padY:e=0,text:s,onDown:i,onUp:h,...n}={}){super.init({padX:t,padY:e,...n}),this.textNode=M({...s,context:this.context}),this.width||(this.width=this.textNode.width,this.height=this.textNode.height),P(this),this.addChild(this.textNode),this._od=i||g,this._ou=h||g;const r=this._dn=document.createElement("button");r.style=y,r.textContent=this.text,r.addEventListener("focus",(()=>this.focus())),r.addEventListener("blur",(()=>this.blur())),r.addEventListener("keydown",(t=>this._kd(t))),r.addEventListener("keyup",(t=>this._ku(t))),f(r,this.context.canvas),this._uw(),this._p()}get text(){return this.textNode.text}set text(t){this._d=!0,this.textNode.text=t}destroy(){this._dn.remove()}_p(){this.text!==this._dn.textContent&&(this._dn.textContent=this.text),this.textNode._p();let t=this.textNode.width+2*this.padX,e=this.textNode.height+2*this.padY;this.width=Math.max(t,this.width),this.height=Math.max(e,this.height),this._uw()}render(){this._d&&this._p(),super.render()}enable(){this.disabled=this._dn.disabled=!1,this.onEnable()}disable(){this.disabled=this._dn.disabled=!0,this.onDisable()}focus(){this.disabled||(this.focused=!0,document.activeElement!=this._dn&&this._dn.focus(),this.onFocus())}blur(){this.focused=!1,document.activeElement==this._dn&&this._dn.blur(),this.onBlur()}onOver(){this.disabled||(this.hovered=!0)}onOut(){this.hovered=!1}onEnable(){}onDisable(){}onFocus(){}onBlur(){}onDown(){this.disabled||(this.pressed=!0,this._od())}onUp(){this.disabled||(this.pressed=!1,this._ou())}_kd(t){"Enter"!=t.code&&"Space"!=t.code||this.onDown()}_ku(t){"Enter"!=t.code&&"Space"!=t.code||this.onUp()}}function D(){return new Y(...arguments)}function N(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}D.prototype=Y.prototype,D.class=Y;let R={},L={},I={},B={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down"};function U(t=g,e){t._pd&&e.preventDefault(),t(e)}function G(t){let e=B[t.code],s=R[e];I[e]=!0,U(s,t)}function W(t){let e=B[t.code],s=L[e];I[e]=!1,U(s,t)}function q(){I={}}function V(t){return!!I[t]}class J{constructor({create:t,maxSize:e=1024}={}){this._c=t,this.objects=[t()],this.size=0,this.maxSize=e}get(t={}){if(this.size===this.objects.length){if(this.size===this.maxSize)return;for(let t=0;t<this.size&&this.objects.length<this.maxSize;t++)this.objects.push(this._c())}let e=this.objects[this.size];return this.size++,e.init(t),e}getAliveObjects(){return this.objects.slice(0,this.size)}clear(){this.size=this.objects.length=0,this.objects.push(this._c())}update(t){let e,s=!1;for(let i=this.size;i--;)e=this.objects[i],e.update(t),e.isAlive()||(s=!0,this.size--);s&&this.objects.sort(((t,e)=>e.isAlive()-t.isAlive()))}render(){for(let t=this.size;t--;)this.objects[t].render()}}function K(){return new J(...arguments)}function Q(t){let e=[];return t._dn?e.push(t._dn):t.children&&t.children.map((t=>{e=e.concat(Q(t))})),e}K.prototype=J.prototype,K.class=J;class Z extends m.class{init({id:t,name:e=t,cullObjects:s=!0,cullFunction:i=c,...h}){const n=this._dn=document.createElement("section");n.tabIndex=-1,n.style=y,n.id=t,n.setAttribute("aria-label",e),super.init({id:t,name:e,cullObjects:s,cullFunction:i,...h}),f(n,this.context.canvas);let r=this.context.canvas;this.camera=m({x:r.width/2,y:r.height/2,width:r.width,height:r.height,anchor:{x:.5,y:.5}}),this.camera._pc=()=>{super._pc.call(this.camera),this.context.canvas,this.camera._wx=this.camera.x*this.scaleX,this.camera._wy=this.camera.y*this.scaleY}}show(){this.hidden=this._dn.hidden=!1;let t=this.children.find((t=>t.focus));t?t.focus():this._dn.focus(),this.onShow()}hide(){this.hidden=this._dn.hidden=!0,this.onHide()}addChild(t,e){super.addChild(t,e),Q(t).map((t=>{this._dn.appendChild(t)}))}removeChild(t){super.removeChild(t),Q(t).map((t=>{f(t,this.context.canvas)}))}destroy(){this._dn.remove(),this.children.map((t=>t.destroy&&t.destroy()))}update(t){this.hidden||super.update(t)}lookAt(t){let e=(t=t.world||t).x,s=t.y;t.scaleX&&(e/=t.scaleX,s/=t.scaleY),this.camera.x=e,this.camera.y=s,this._pc()}_pc(){super._pc(),this.camera&&this.camera._pc()}render(){let{x:t,y:e,width:s,height:i}=this.camera;this.sx=t*this.scaleX-s/2,this.sy=e*this.scaleY-i/2,this.hidden||super.render((t=>!this.cullObjects||this.cullFunction(t,this.camera)))}onShow(){}onHide(){}}function tt(){return new Z(...arguments)}tt.prototype=Z.prototype,tt.class=Z;const et={shoot:[2.05,,80,.04,.01,.09,1,.89,,,,,.07,,,,.03,.87,.04],teleport:[,,463,,.02,.17,,2.07,-7,,,,,.9,,.4,.03,.69,.01,.18],pickup:[.5,,1331,,.07,.21,,1.37,,,285,.07,.01,,,,.03,.8,.01],playerDie:[,,176,,,.31,,.85,-1.8,,,,,.2,,.3,,.76,.08],enemyDie:[2.06,,237,,.08,.12,4,2.54,-3,,,,,.6,,.5,.19,.79,.07,.04],playerHit:[,,413,,,.22,4,2.99,.5,-.7,,,,1,.3,.3,,.83,.04],planetHit:[,,292,,.05,.11,,2.68,-3.4,,,,,.8,,.1,,.75,.06],enemyHit:[1.05,,51,,,.21,,2.72,,,,,,.2,,.2,,.67,.03],confirm:[1.01,,109,,.09,.29,1,.64,,,-532,.09,,,9.3,,,.72,.09],spawn:[3.28,,72,.01,.05,.06,,.84,.5,,,,.05,,154,,.1,.99,.04,.01],deny:[1.12,,59,,.03,.01,3,.13,,,,,,.1,-75,,,.04,.02],convert:[1.02,,178,.09,.45,.16,1,.71,,-2.3,79,.05,.11,,6.7,.1,,.72,.02],repair:[1.04,,186,.1,.03,.48,1,1.85,,,17,.08,.01,,,,,.91,,.01]};window.muted=!1,window.playSound=t=>!window.muted&&et[t]&&zzfx(...et[t]),window.toggleMute=()=>window.muted=!window.muted;const st=function(t){var e=0;if(0===t.length)return e;for(var s=0;s<t.length;s++){e=(e<<5)-e+t.charCodeAt(s),e&=e}return Math.abs(e)},it=[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]],ht=(t,e)=>{const s=t.x-e.x,i=t.y-e.y;return Math.sqrt(s*s+i*i)},nt=(t,e,s)=>{t.forEach((t=>e.forEach((e=>{c(t,e)&&s(t,e)}))))},rt=()=>{const t=d("starexploder:seed");if(t)return t;const e=at();return l("starexploder:seed",e),e},at=(t=20)=>{for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=s.length,h=0;h<t;h++)e+=s.charAt(Math.floor(Math.random()*i));return e};function ot({x:t=0,y:e=0,ctx:s,r2:i,r1:h,c1:n,c2:r}){s.rect(t,e,2*i,2*i);var a=s.createRadialGradient(t+i,e+i,h,t+i,e+i,i);a.addColorStop(0,n),a.addColorStop(1,r),s.fillStyle=a,s.fill()}class lt extends b.class{constructor(t){super(t)}damage(t){this.health<=0||(this.health-=t,this.health<=0&&this.die())}die(){this.ttl=0}update(){super.update(),this.opacity=this.isAlive()?1:0}render(){super.render(),this.healthBar&&this.health>0&&dt({ctx:this.context,x:this.x-this.width/2,y:this.y-this.height,width:this.width,ratio:this.health/this.maxHealth})}}const dt=({ctx:t,x:e,y:s,width:i,height:h=5,ratio:n})=>{1!==n&&(t.fillStyle="#ff0000",t.fillRect(e,s,i,h),t.fillStyle="#00ff00",t.fillRect(e,s,i*n,h))};class ct extends lt{constructor(t){super(t),this.strobeTimer=10}draw(){this.strobeTimer--;const t=.6*this.width,e=1.25+(this.strobeTimer<=5?.08:.05);this.strobeTimer<=0&&(this.strobeTimer=10);const s=this.width/2;ot({x:s+-t*e,y:s+-t*e,ctx:this.context,r1:.5*t,r2:t*e,c1:"rgba(170,170,255,1)",c2:"rgba(170,170,255,0)"}),this.context.fillStyle=this.color,this.context.lineWidth=3,this.context.strokeStyle="#222",this.context.beginPath(),this.context.arc(s,s,t,0,2*Math.PI),this.context.closePath(),this.context.stroke(),this.context.fill(),this.context.beginPath(),this.context.fillStyle="#111",this.context.arc(s,s,t/2,0,2*Math.PI),this.context.fill(),this.context.lineWidth=1,this.context.strokeStyle="#555",this.context.stroke()}}class ut extends K.class{constructor(t,{create:e=((...t)=>new lt(...t)),maxSize:s=100,autoInit:i,...h}={}){if(super({create:e,maxSize:s}),this.scene=t,this.opts=h,i)for(let t=0;t<s;t+=1)this.get({x:0,y:0,anchor:{x:.5,y:.5}})}get(...t){if(!this.opts.get)return super.get(...t);const e=super.get(this.opts.get(...t));e&&(e.scene=this.scene,this.scene.children.includes(e)||this.scene.addChild(e))}update(...t){if(super.update(...t),this.opts.update)return this.opts.update(...t)}}const pt=t=>new ut(t,{create:(...t)=>new xt(...t),maxSize:300,autoInit:!0,get(t,e,s={}){const{x:i,y:h,dy:n,dx:a}=t,{size:o=5,speed:l=8,count:d=1,damage:c=1,spread:u=0,index:p=0}=s,x=p*u-u*(d/2),g=e?r(t,e)-1.57+x:0;return{x:i,y:h,r:255,g:255,b:90,damage:c,anchor:{x:.5,y:.5},width:o,height:o,dx:a+l*Math.cos(g),dy:n+l*Math.sin(g),ttl:200}}});class xt extends lt{constructor(t){super(t),this.r=this.r||"255",this.g=this.g||"255",this.b=this.b||"255"}draw(){ot({x:0+1.2*-this.width,y:0+1.2*-this.width,ctx:this.context,r1:this.width/2,r2:1.2*this.width,c1:`rgba(${this.r},${this.g},${this.b},1)`,c2:`rgba(${this.r},${this.g},${this.b},0)`})}}const gt=t=>{const{width:e,height:s}=t.context.canvas;let i=!0;const h={font:"20px Arial",color:"white",anchor:{x:.5,y:.5},textAlign:"center"};let n=b({x:e/2+40,y:40,width:e/2-80,height:s-80,color:"#333"}),r=M({text:"Money:",x:e/2+e/4,y:s/2-300,...h}),a=[];for(let t=0;t<40;t++){let t=M({text:"",x:e/2+e/4,y:0,type:"store",...h,anchor:{x:.5,y:0}});P(t),a.push(t)}return{get active(){return i},shutdown(){},open(e){this.active||(i=!0,t.player.repair(),r.text=`Money: ${t.player.sprite.gold}`,ft.filter((t=>ft[e.upgradeType].key===t.key)).forEach(((e,s)=>{const i=t.player.sprite.upgrades[e.key]||1;if(a[s].upgrade=e,a[s].y=150+70*s,i>=e.max)return a[s].opacity=.5,void(a[s].text="Upgrade: \n"+e.label+" "+i+" MAX");const h=e.getCost(i+1);a[s].opacity=t.player.sprite.gold<h?.5:1,a[s].text="Upgrade: \n"+e.label+" "+(i+1)+"\nCost: "+h})))},update(){i=!1},render(){i&&(n.render(),r.render(),a.forEach((t=>t.render())))}}},yt=(t=10,e=1.4)=>s=>Math.round(t*(Math.pow(e,s)-Math.pow(e,s-1))/e),ft=function(t){var e,s=t.length;for(;0!=s;)e=Math.floor(st(rt())*s%t.length),s--,[t[s],t[e]]=[t[e],t[s]];return t}([{key:"speed",label:"Speed/manuvering",max:4,getCost:yt(500,5),apply:(t,e)=>{e.stats.speed=.1+.005*t,e.stats.maxSpeed=e.stats.speed*(50*t),e.stats.breakSpeed=t}},{key:"health",label:"Max Health",max:5,getCost:yt(100,2.5),apply:(t,e)=>{e.stats.maxHealth=100*t,e.health=e.stats.maxHealth,e.maxHealth=e.stats.maxHealth}},{key:"gunpower",label:"Gun Power",max:6,getCost:yt(200,3),apply:(t,e)=>{e.stats.gundamage=7*t,e.stats.gunsize=5+t}},{key:"gundelay",label:"Gun Delay",max:4,getCost:yt(200,4),apply:(t,e)=>{e.stats.gundelay=30-5*t+5}},{key:"guncount",label:"Gun Bullets",max:3,getCost:yt(200,5),apply:(t,e)=>{e.stats.guncount=1*t,e.stats.gunspread=.15}}]);const wt=({scene:t,x:e,y:s})=>{const i=d("starexploder:player")?.upgrades||{};let n=0;const r=pt(t),{width:a,height:o}=t.context.canvas,c=d("starexploder:last-planet");let u=new ct({x:c?.x||e,y:c?.y||s,anchor:{x:.5,y:.5},color:"#666",width:50,height:50,gold:d("starexploder:player")?.gold||0,upgrades:i,health:d("starexploder:player")?.health||100,stats:{speed:.1,breakSpeed:1,maxSpeed:5,maxHealth:100,guncount:1,gundelay:20,gunspeed:9,gunsize:5,guncolor:"white",gunspread:0,gundamage:5}}),p=new xt({width:15,height:15,r:200,g:200,b:255});Object.entries(i).forEach((([t,e])=>{ft.find((e=>e.key===t)).apply(e,u)})),u.healthBar=!0,u.maxHealth=u.stats.maxHealth;const x=u.damage.bind(u),g=t=>{x(t);l("starexploder:player",{...d("starexploder:player")||{},health:u.health})};u.damage=g;u.setUpgrade=(t,e)=>{t.apply(e,u),u.upgrades[t.key]=e;l("starexploder:player",{...d("starexploder:player")||{},upgrades:u.upgrades})};return u.setGold=(t=1)=>{u.gold=t;l("starexploder:player",{...d("starexploder:player")||{},gold:u.gold})},{sprite:u,thrust:p,bullets:r,shutdown(){},repair(){u.stats.maxHealth!==u.health&&(playSound("repair"),g(-u.stats.maxHealth+u.health))},shoot(){n=u.stats.gundelay;const t=function(t=h()){return S.get(t)}(),e=u.x-a/2+t.x,s=u.y-o/2+t.y,i=u.stats.gunsize,l=u.stats.guncolor,d=u.stats.gunspeed,c=u.stats.gunspread,p=u.stats.gundamage,x=u.stats.guncount;for(let t=0;t<x;t++)r.get(u,{x:e,y:s},{size:i,color:l,speed:d,spread:c,damage:p,index:t,count:x})},move(t){p.scaleX=1,p.x=400+(0===t||2===t?0:1===t?-24:24),p.y=400+(1===t||3===t?0:2===t?-24:24)},update(){u.ddx=0,u.ddy=0;const{speed:i,maxSpeed:h,breakSpeed:a}=u.stats;if(p.scaleX=0,V("n")&&!this.triggered&&(setTimeout((()=>this.triggered=!1),1e3),window.toggleMute(),this.triggered=!0),(V("up")||V("w"))&&(this.move(0),u.dy>-h&&(u.ddy=-i)),(V("down")||V("s"))&&(this.move(2),u.dy<h&&(u.ddy=i)),(V("left")||V("a"))&&(this.move(3),u.dx>-h&&(u.ddx=-i)),(V("right")||V("d"))&&(this.move(1),u.dx<h&&(u.ddx=i)),V("space")){const t=i*a;u.dx+=u.dx>0?-t:t,u.dy+=u.dy>0?-t:t,Math.abs(u.dx)<1&&(u.dx=0),Math.abs(u.dy)<1&&(u.dy=0)}u.update(),r.update(),u.health<=0&&!u.deathTriggered&&(t.enemies.pool.objects.forEach((t=>t.ttl=0)),u.deathTriggered=!0,playSound("playerDie"),setTimeout((()=>{u.deathTriggered=!1,u.x=c?.x||e,u.y=c?.y||s,u.health=u.stats.maxHealth,u.ttl=1/0,u.gold=Math.floor(u.gold/2)}),1e3)),n>0&&n--,A["left"]&&u.health>0&&n<=0&&!t.station.active&&(playSound("shoot"),this.shoot())}}},mt=["white","grey","grey","grey","grey","grey","purple","blue","red"],_t={},bt=(t,e,s,i=800*vt)=>{const h=`${s}-${t},${e}`;if(_t[h+i])return _t[h+i];const n=t*i+i/2,r=e*i+i/2,a=st(`${h}`)%223==0;let o=0,c=0,u=0,p=null,x=0,g=0;if(a){const s=d("starexploder:planets")||{},i=800*vt,h=ht({x:t*i+i/2,y:e*i+i/2},{x:34800,y:34800});x=Math.min(4,Math.floor(h/3e4)+1),g=100+75*x;const n=s[`${t}-${e}`]||{};if(o=n?.health,index=n?.index,c=[200,600,1200,2400][x-1],o="number"==typeof o?o:c,p=o>0?St[x-1]:"blue","number"!=typeof index){const s=d("starexploder:planets")||{};index=Object.keys(s).length-1,l("starexploder:planets",{...s,[`${t}-${e}`]:{...n,index:index}})}u=index%5}const y={_x:t,_y:e,x:n,y:r,color:p,size:g,isPlanet:a,health:o,maxHealth:c,level:x,upgradeType:u,width:g,height:g};return _t[h]=y,y},vt=1;class zt extends lt{constructor(t){super(t)}damage(t){if(this.health<=0)return;super.damage(t);const e=d("starexploder:planets")||{},s=`${this._x}-${this._y}`;l("starexploder:planets",{...d("starexploder:planets"),[s]:{...e[s]||{},health:this.health}})}land(){this.width>0&&!this.parent.station.active&&"blue"===this.color&&(this.parent.station.open(this),l("starexploder:last-planet",{x:this.x,y:this.y}))}die(){this.health=0;for(let t=0;t<20*this.level;t++){const t=0===a(0,5)?2:1;this.parent.pickups.get({x:this.x+a(-100,100),y:this.y+a(-100,100),value:a(10,20)*this.level*t})}playSound("convert");const t=d("starexploder:planets")||{};Object.values(t).filter((t=>t.health<=0)).length>=30&&this.parent.onWin(),this.color="blue",setTimeout((()=>{this.parent?.map.forceUpdate()}),100)}render(){if(this.size<5)return;this.health>0&&dt({ctx:this.context,x:this.x-this.width/2,y:this.y-this.height/1.5,width:this.width,ratio:this.health/this.maxHealth});var t=1.25;const e=Mt({pad:t,r:this.size/2,...Ct(this.color)});this.context.drawImage(e,this.x-this.size/2*t,this.y-this.size/2*t)}}const Mt=t=>{var e=document.createElement("canvas");e.width=t.r*(2*t.pad),e.height=t.r*(2*t.pad);var s=e.getContext("2d");ot({ctx:s,r1:t.r,r2:t.r*t.pad,c1:t.h1,c2:t.h2});var i=t.r*t.pad-t.r;return s.translate(i,i),s.save(),s.beginPath(),s.arc(t.r,t.r,t.r,0,2*Math.PI),s.closePath(),s.clip(),ot({ctx:s,r1:0,r2:t.r,c1:t.o2,c2:t.o1}),s.globalAlpha=1,ot({ctx:s,r1:t.r/1.1,r2:t.r,c1:"rgba(255,255,255,0)",c2:"rgba(255,255,255,.3)"}),s.restore(),e},St=["white","yellow","orange","red"],Ct=t=>"blue"===t?{o1:"#3551dc",o2:"#0453d2",c2:"#0f52b4",c3:"#0051af",h1:"rgba(0,81,175,1)",h2:"rgba(0,81,175,0)"}:"white"===t?{o1:"#eeF5aa",o2:"#eeE3aa",c2:"#eeC7aa",c3:"#eeAFaa",h1:"rgba(122,122,122,1)",h2:"rgba(122,122,122,0)"}:"yellow"===t?{o1:"#FFF500",o2:"#FFE300",c2:"#FFC700",c3:"#FFAF00",h1:"rgba(255,122,0,1)",h2:"rgba(255,12,0,0)"}:"orange"===t?{o1:"#FFaa00",o2:"#FFaa00",c2:"#FFaa00",c3:"#FFaa00",h1:"rgba(255,122,0,1)",h2:"rgba(255,12,0,0)"}:"red"===t?{o1:"#Ff3300",o2:"#Ff3300",c2:"#Ff3300",c3:"#Ff3300",h1:"rgba(200,12,0,1)",h2:"rgba(200,112,0,0)"}:void 0,At=t=>{const{width:e,height:s}=t.context.canvas;let i=!1;const h=50;let n=!0,a=0,o=0,l=null,d=null,c=[];const u=Math.floor((e-100)/8),p=()=>{const e=Math.floor(a/u),s=Math.floor(o/u);if(e===l&&s===d)return;l=e,d=s;let i=0;c.forEach((t=>t.color="black"));for(let n=0;n<u;n++)for(let r=0;r<u;r++){const a=n+e*u,o=r+s*u,l=bt(a,o,t.seed);if(l.isPlanet){let t=c[i++];t._x=a,t._y=o,t.x=h+8*n+4,t.y=h+8*r+4,t.color=l.color}}};let x=b({x:40,y:40,width:e-80,height:s-80,color:"#333"}),g=b({x:h,y:h,width:e-100,height:s-100,color:"#000"});for(let t=0;t<70;t++){let t=b({x:0,y:0,color:"black",anchor:{x:.5,y:.5},width:4,height:4});c.push(t),P(t)}p();let y=b({x:0,y:0,anchor:{x:.5,y:.5},width:12,height:12,color:"blue"});return{get active(){return i},rowCount:u,forceUpdate(){l=null,d=null,p()},updatePlanets:p,getClosest:t=>c.filter((t=>"black"!==t.color)).map((s=>{const i=e*vt,h={x:s._x*i+400,y:s._y*i+400},n=ht(h,t),a=r(h,t)-1.57;return{...s,dist:n,angle:a,...h}})).filter((t=>t.dist<5e4)).sort(((t,e)=>t.dist-e.dist)),shutdown(){},update(){if(V("m")){if(!n)return;i=!i,i&&this.forceUpdate(),n=!1}else n=!0;if(!i)return;const{x:t,y:e}=this.getPlayerCoords();t===a&&e===o||(a=t,o=e,y.x=h+8*Et(t,u)+4,y.y=h+8*Et(e,u)+4,p())},render(){i&&(x.render(),g.render(),y.render(),c.forEach((t=>t.render())))},getPlayerCoords(){const{x:e,y:s}=t.player.sprite,{width:i,height:h}=t.context.canvas;return{x:Math.floor(e/(i*vt)),y:Math.floor(s/(h*vt))}}}},Et=(t,e)=>(t%e+e)%e;class kt extends m.class{constructor(t){super(t)}draw(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.moveTo(0,0),this.context.lineTo(this.width,0),this.context.lineTo(this.width/2,this.height),this.context.fill()}}const Tt=50;class jt extends ct{constructor(t){super(t),this.bulletTimer=0,this.waitTimer=0,this.scene=t.scene,this.bullets=t.bullets}die(){if(super.die(),playSound("enemyDie"),0===a(0,1))return;const t=0===a(0,5)?2:1;this.scene.pickups.get({x:this.x,y:this.y,value:a(10,30)*this.level*t})}getNewTarget(t=50){const{x:e,y:s}=this.scene.player.sprite;return{x:e+a(-t,t),y:s+a(-t,t)}}update(){if(super.update(),this.isAlive()){if(this.bulletTimer>0&&this.bulletTimer--,this.bulletTimer<=0&&(this.bulletTimer=300+a(-100,100)-50*this.level,this.bullets.get(this,this.getNewTarget(),{damage:this.strength,speed:5})),!this.target){this.target=this.getNewTarget(200);const t=r(this,this.target)-1.57;this.ddy=this.speed/40*Math.sin(t),this.ddx=this.speed/40*Math.cos(t),setTimeout((()=>{this.target=null}),a(500,1500))}this.dx*=.98,this.dy*=.98}}}zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),s=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map(((t,e)=>s.getChannelData(e).set(t))),e.buffer=s,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,s=220,i=0,h=0,n=.1,r=0,a=1,o=0,l=0,d=0,c=0,u=0,p=0,x=0,g=0,y=0,f=1,w=0,m=0)=>{let _,b,v=2*Math.PI,z=o*=500*v/zzfxR**2,M=(0<x?1:-1)*v/4,S=s*=(1+2*e*Math.random()-e)*v/zzfxR,C=[],A=0,E=0,k=0,T=1,j=0,F=0,X=0;for(i=99+zzfxR*i,w*=zzfxR,h*=zzfxR,n*=zzfxR,y*=zzfxR,l*=500*v/zzfxR**3,x*=v/zzfxR,d*=v/zzfxR,c*=zzfxR,u=zzfxR*u|0,b=i+w+h+n+y|0;k<b;C[k++]=X)++F%(100*g|0)||(X=r?1<r?2<r?3<r?Math.sin((A%v)**3):Math.max(Math.min(Math.tan(A),1),-1):1-(2*A/v%2+2)%2:1-4*Math.abs(Math.round(A/v)-A/v):Math.sin(A),X=(u?1-m+m*Math.sin(2*Math.PI*k/u):1)*(0<X?1:-1)*Math.abs(X)**a*t*zzfxV*(k<i?k/i:k<i+w?1-(k-i)/w*(1-f):k<i+w+h?f:k<b-y?(b-k-y)/n*f:0),X=y?X/2+(y>k?0:(k<b-y?1:(b-k)/y)*C[k-y|0]/2):X),_=(s+=o+=l)*Math.sin(E*x-M),A+=_-_*p*(1-1e9*(Math.sin(k)+1)%2),E+=_-_*p*(1-1e9*(Math.sin(k)**2+1)%2),T&&++T>c&&(s+=d,S+=d,T=0),!u||++j%u||(s=S,o=z,T=T||1);return C},zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext);
//! ZzFXM (v2.0.3) | (C) Keith Clark | MIT | https://github.com/keithclark/ZzFXM
const Ft=({canvas:t,onWin:e})=>{let s=tt({id:"game"});s.seed=rt();let i=(t=>{let e={};const s=new ut(t,{maxSize:270,autoInit:!0,update(i,h){const n=t.context.canvas.width,r=Math.floor(i/n),a=Math.floor(h/n);e.x===r&&e.y===a||(e={x:r,y:a},s.objects.forEach(((e,i)=>{let h=Math.floor(i/(s.maxSize/9));const o=it[h][0]+r,l=it[h][1]+a,d=`${t.seed}-${o},${l},${i%(s.maxSize/9)}`,c=st(`${d}x`)%100/100,u=st(`${d}thatsthey`)%100/100;e.x=o*n+(c*n-n/2),e.y=l*n+(u*n-n/2),e.opacity=st(`${d}alpha`)%100/100,e.color=mt[st(`${d}color`)%mt.length];const p=st(`${d}size`)%5;e.width=p,e.height=p})))}});return s})(s),h=At(s),n=(t=>{let e=[];for(let t=0;t<10;t++){let t=new kt({x:0,y:0,color:"white",anchor:{x:.5,y:.5},width:13,height:6});e.push(t)}let s=M({text:"",font:"14px Arial",color:"#fff",x:400,y:330,anchor:{x:.5,y:.5},textAlign:"center"});return{shutdown(){},setText(t){s.text=`Money: ${t}`,setTimeout((()=>s.text=""),2e3)},update(){t.map.getClosest(t.player.sprite).slice(0,9).forEach(((t,s)=>{e[s].x=-60*Math.cos(t.angle)+400,e[s].y=-60*Math.sin(t.angle)+400,e[s].rotation=t.angle+1.57,e[s].color=t.color,e[s].opacity=Math.max(0,1-t.dist/15e3);const i=2-o(1,t.dist/5e3,2.5);e[s].width=13*i,e[s].height=6*i}))},render(){e.forEach((t=>t.render())),s.render()}}})(s),r=((t,e={})=>{let s={},i=0;const h=new ut(t,{maxSize:9,create:(...t)=>new zt(...t),autoInit:!0,update(e,n){const r=t.context.canvas.width*vt,a=Math.floor(e/r),l=Math.floor(n/r);if(i>0)i--;else if(i<=0){const e=h.objects.filter((t=>t.width>0&&"blue"!==t.color)).map((e=>({p:e,dist:ht(e,t.player.sprite)}))).sort(((t,e)=>t.dist-e.dist))[0]?.p;if(e){const{x:s,y:h,level:n=1}=e,r=Math.floor(1+n),a=t.enemies.pool.getAliveObjects().length,l=o(1,n,r-a);a<r&&(i=600,t.enemies.spawn({x:s,y:h,number:l,level:n}))}}s.x===a&&s.y===l||(s={x:a,y:l},h.objects.forEach(((e,s)=>{let i=Math.floor(s/(h.maxSize/9));const n=it[i][0]+a,o=it[i][1]+l,d=bt(n,o,t.seed,r);for(let t in d)e[t]=d[t]})))}});return h})(s);i.objects.forEach((t=>s.addChild(t))),r.objects.forEach((t=>s.addChild(t)));let a=wt({scene:s,x:t.width*(h.rowCount/2),y:t.height*(h.rowCount/2)});s.addChild(a.sprite);let l=(t=>{const e=pt(t);let s=K({create:(...s)=>new jt({...s,bullets:e,scene:t}),maxSize:Tt});return{pool:s,bullets:e,spawn({x:e,y:i,number:h=1,level:n=1}){for(let r=0;r<h;r++){const h=15+Math.pow(4,n);setTimeout((()=>{const r=s.get({x:e,y:i,anchor:{x:.5,y:.5},width:30+5*n,height:30+5*n,level:n,healthBar:!0,health:h,ttl:1/0,maxHealth:h,strength:5+1*n,speed:1+n/1.5,color:["white","yellow","orange","red"][n-1]});r&&(playSound("spawn"),t.children.includes(r)||t.addChild(r))}),500*r)}},destroy(){s.clear()},update(){s.update(),e.update()},render(){s.render()}}})(s),d=((t,e={})=>new ut(t,{create:(...t)=>new xt(...t),get({x:t,y:e,value:s=1}){const i=s<50?s<25?8:12:17;return{x:t,y:e,value:s,width:i,height:i,ttl:2e3}}}))(s),c=gt(s),u=!0;var p;return s.player=a,s.pickups=d,s.planets=r,s.enemies=l,s.station=c,s.map=h,s.hud=n,s.onWin=e,p=(t,e)=>{if(!e)return;const i=a.sprite;if(h.active){const t=bt(e._x,e._y,s.seed);if(t.health>0)return;playSound("teleport"),i.x=t.x,i.y=t.y,i.dx=0,i.dy=0}else if(c.active&&"store"===e.type){const t=a.sprite.upgrades[e.upgrade.key]||1,s=e.upgrade.getCost(t+1);if(t>=e.upgrade.max||i.gold<s)return void playSound("deny");playSound("confirm"),i.setUpgrade(e.upgrade,t+1),i.setGold(i.gold-s)}},C.onDown=p,{shutdown(){},update(){a.update(),s.update(),i.update(s.camera.x,s.camera.y),r.update(s.camera.x,s.camera.y),l.update(),d.update(),c.update(),h.update(),n.update(),s.lookAt({x:a.sprite.x+(c.active?200:0),y:a.sprite.y}),nt(a.bullets.getAliveObjects(),[...r.getAliveObjects().filter((t=>"blue"!==t.color)),...l.pool.getAliveObjects()],((t,e)=>{e.damage(t.damage),t.ttl=0,u&&(u=!1,setTimeout((()=>u=!0),100),playSound(e.isPlanet?"planetHit":"enemyHit"))})),nt(l.bullets.getAliveObjects(),[a.sprite],((t,e)=>{playSound("playerHit"),e.damage(t.damage),t.ttl=0})),nt(r.getAliveObjects(),[a.sprite],((t,e)=>{t.land()})),nt(d.getAliveObjects(),[a.sprite],((t,e)=>{e.setGold(e.gold+t.value),n.setText(t.value),playSound("pickup"),t.ttl=0}))},render(){a.thrust.render(),s.render(),n.render(),c.render(),h.render()}}},{canvas:Xt}=function(s){return t=document.getElementById(s)||s||document.querySelector("canvas"),e=t.getContext("2d"),e.imageSmoothingEnabled=!1,i("init"),{canvas:t,context:e}}();let Ht;!function({radius:t=5,canvas:e=h()}={}){let i=S.get(e);if(!i){let s=window.getComputedStyle(e);i={x:0,y:0,radius:t,touches:{},canvas:e,_cf:[],_lf:[],_o:[],_oo:null,_s:s},S.set(e,i)}var n,r;e.addEventListener("mousedown",F),e.addEventListener("touchstart",F),e.addEventListener("mouseup",X),e.addEventListener("touchend",X),e.addEventListener("touchcancel",X),e.addEventListener("blur",$),e.addEventListener("mousemove",H),e.addEventListener("touchmove",H),i._t||(i._t=!0,r=()=>{i._lf.length=0,i._cf.map((t=>{i._lf.push(t)})),i._cf.length=0},s[n="tick"]=s[n]||[],s[n].push(r))}(),function(){let t;for(t=0;t<26;t++)B[t+65]=B["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)B[48+t]=B["Digit"+t]=""+t;window.addEventListener("keydown",G),window.addEventListener("keyup",W),window.addEventListener("blur",q)}();const $t=()=>{l("starexploder:seed",null),l("starexploder:planets",null),l("starexploder:last-planet",null),l("starexploder:player",null),Ot()},Ot=()=>{Ht&&Ht.shutdown(),Ht=Ft({canvas:Xt,onWin:Pt})},Pt=()=>{Ht&&Ht.shutdown(),Ht=(({canvas:t,onNew:e})=>{const{width:s,height:i}=t;let h=M({text:"You win!",font:"110px sans-serif",color:"#555",x:s/2,y:i/2-180,anchor:{x:.5,y:.5},textAlign:"center"}),n=D({x:s/2,y:i/2+150,text:{text:"New Game",color:"white",font:"40px sans-serif",textAlign:"center",anchor:{x:.5,y:.5}},onDown(){e()}});return{shutdown(){n.destroy()},update(){},render(){h.render(),n.render()}}})({canvas:Xt,onNew:$t})};Ht&&Ht.shutdown(),Ht=(({canvas:t,onNew:e,onContinue:s})=>{const{width:i,height:h}=t;let n,r=M({text:"Star Exploder",font:"110px sans-serif",color:"#555",x:i/2,y:h/2-180,anchor:{x:.5,y:.5},textAlign:"center"}),a=M({text:"By Daniel Whiffing",font:"24px sans-serif",color:"#333",x:i/2,y:h/2-80,anchor:{x:.5,y:.5},textAlign:"center"}),o=D({x:i/2,y:h/2+150,text:{text:"New Game",color:"white",font:"40px sans-serif",textAlign:"center",anchor:{x:.5,y:.5}},onDown(){e()}});return localStorage.getItem("starexploder:planets")&&(n=D({x:i/2,y:h/2+220,text:{text:"Continue",color:"white",font:"40px sans-serif",textAlign:"center",anchor:{x:.5,y:.5}},onDown(){s()}})),{shutdown(){o.destroy(),n?.destroy()},update(){},render(){r.render(),a.render(),o.render(),n?.render()}}})({canvas:Xt,onNew:$t,onContinue:Ot}),function({fps:t=60,clearCanvas:e=!0,update:s=g,render:h,context:r=n(),blur:a=!1}={}){let o,l,d,c,u,p=0,x=1e3/t,y=1/t,f=e?N:g,w=!0;function m(){if(l=requestAnimationFrame(m),w&&(d=performance.now(),c=d-o,o=d,!(c>1e3))){for(i("tick"),p+=c;p>=x;)u.update(y),p-=x;f(r),u.render()}}return a||(window.addEventListener("focus",(()=>{w=!0})),window.addEventListener("blur",(()=>{w=!1}))),u={update:s,render:h,isStopped:!0,start(){o=performance.now(),this.isStopped=!1,requestAnimationFrame(m)},stop(){this.isStopped=!0,cancelAnimationFrame(l)}},u}({update:(...t)=>Ht&&Ht.update(...t),render:(...t)=>Ht&&Ht.render(...t)}).start();</script></body></html>