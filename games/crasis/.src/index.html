<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body></body>
  <script>
    !function(a,b){"function"==typeof define&&define.amd?define([],b):a.Game=b()}(this,function(){function a(){var a,b,c,d=arguments,e=d.length,f=this;for(c=0;e>c;c++)if(b=d[c])for(a in b)b.hasOwnProperty(a)&&(f[a]=b[a]);return f}function b(){function c(){var a=this instanceof c?this:Object.create(c.prototype);return a.construct.apply(a,arguments)||a}return c.prototype="function"==typeof this?Object.create(this.prototype):{},a.apply(c.prototype,arguments),c.subclass=b,c}function c(a){return"number"==typeof a}function d(a){return Math.round(a)+.5}function e(a){if(isNaN(a)===!0)throw new Error("NaN in Vect");if(isFinite(a)===!1)throw new Error("Infinity in Vect");return Math.round(1e6*a)/1e6}function f(a){var b=a.r,c=a.type,d=b+8,e=b+8,g=8;return f[b+c]||(f[b+c]=(new u).size(2*d,2*e).draw(function(f){f.beginPath(),f.arc(d,e,b,0,s,!1),f.fillStyle=t.gradient(f,c,d,e,b),f.fill(),f.closePath(),f.lineWidth=2,f.strokeStyle=a.color,f.stroke(),f.lineJoin="round",f.beginPath(),a.mask&(l|m)&&(f.moveTo(d,e-g),f.lineTo(d-g*r/2,e+g/2),f.lineTo(d+g*r/2,e+g/2),f.lineTo(d,e-g),f.closePath()),a.mask&(n|o)&&(f.moveTo(d,e+g),f.lineTo(d-g*r/2,e-g/2),f.lineTo(d+g*r/2,e-g/2),f.lineTo(d,e+g),f.closePath()),a.mask&(o|m)&&(f.moveTo(d-g*r/2,e),f.lineTo(d+g*r/2,e),f.closePath()),f.lineWidth=5,f.strokeStyle="#000",f.stroke(),f.lineWidth=2,f.strokeStyle=a.color,f.stroke()})),f[b+c].elem}function g(a){var b=a.r,c=a.type,d=b+12,e=b+12;return g[b+c]||(g[b+c]=(new u).size(2*d,2*e).set({lineWidth:2,strokeStyle:a.color,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:12,shadowColor:a.color}).path().circ(b,d,e).stroke()),g[b+c].elem}var h={start:function(){z.init(),p.resize(),t.init(),h.bindEvents(),h.load(localStorage.getItem("level")||0),z.play()},lvl:0,level:null,paused:!0,pause:function(){h.paused?(h.paused=!1,h.ticked=0,i(h.loop)):h.paused=!0},step:function(a){t.fg.clear(),t.fx.fill(),p.motion(a)},loop:function(a){return h.level.solved?void t.message("COMPLETE","click to continue"):h.paused?void t.message("PAUSED","click to resume"):(h.ticked&&(delta=a-h.ticked,h.step(delta)),h.ticked=a,void i(h.loop))},load:function(a){p.reset(),t.fg.clear(),a=h.lvl=a||++h.lvl,v[a]||(a=h.lvl=1),h.level=v[a],localStorage.setItem("level",a);for(var b,c,d,e=p.h,f=p.w-1,g=p.unit(2)/r,i=0;e>i&&(f+=i%2?1:-1,b=p.unit(i%2?.5:1),c=g/2+3*g/4*i,h.level.field[i]);i++)for(var j=0;f>j;j++)(d=h.level.field[i][j])&&new q(d,b+p.unit(j),c,p.r-1,!0);for(var k=[l,m,n,o],s=0;s<k.length;s++)new q(k[s],p.unit(s+5)+1,p.height+p.unitH(.75)-1,p.r-1);h.step(0),t.message("READY","flick to combine","reload to retry")},solution:function(a){t.status();var b=!0;return h.level.solve.fire>a[l]&&(b=!1),h.level.solve.air>a[m]&&(b=!1),h.level.solve.water>a[n]&&(b=!1),h.level.solve.earth>a[o]&&(b=!1),b===!0?(h.paused=!0,void(h.level.solved=!0)):void 0},bindEvents:function(){window.onblur=function(){h.paused=!0},h.dragStartMouse=new j(0,0),h.dragStartPos=new j(0,0),h.dragLastPos=new j(0,0),t.fg.elem.addEventListener("mousedown",function(a){h.level.solved&&h.load();var b,c,d,e,f=0,g=p.bodies.length;if(a.pageY>p.height)for(;g>f;++f)if(b=p.bodies[f],b&&!b.active&&(c=a.pageX-p.left-b.pos.x,d=a.pageY-p.top-b.pos.y,e=c*c+d*d,e<=b.r*b.r))return b.launching=!1,h.dragging=b,h.dragLastTime=Date.now(),h.dragCurrTime=Date.now(),h.dragStartMouse.set(a.pageX-p.left,a.pageY-p.top),h.dragStartPos.set(b.pos.x,b.pos.y),h.dragLastPos.set(b.pos.x,b.pos.y),b.vel.x=b.vel.y=0,void(h.paused&&h.pause());h.dragging=!1,h.pause()},!1),window.addEventListener("mousemove",function(a){var b,c,d,e;(b=h.dragging)&&(c=Date.now()-h.dragTime,d=a.pageX-p.left-h.dragStartMouse.x,e=a.pageY-p.top-h.dragStartMouse.y,h.dragLastTime=h.dragCurrTime,h.dragCurrTime=Date.now(),h.dragLastPos.set(b.pos.x,b.pos.y),b.pos.set(Math.max(b.r,Math.min(p.width-b.r,h.dragStartPos.x+d)),Math.min(p.height+p.unitH(1.5)-b.r,h.dragStartPos.y+e)),b.pos.y<p.height&&h.release())},!1),window.addEventListener("mouseup",h.release,!1)},release:function(){var a,b,c,d=Date.now(),e=h.dragging,f=3,g=1;h.dragging&&(h.dragging=null,e.launching=!0,d-h.dragCurrTime>50||(a=h.dragCurrTime-h.dragLastTime,b=e.pos.x-h.dragLastPos.x,c=e.pos.y-h.dragLastPos.y,e.vel.set(b/a||0,c/a||0),Math.abs(e.vel.x)>f?g=f/Math.abs(e.vel.x):Math.abs(e.vel.y)>1&&(g=f/Math.abs(e.vel.y)),e.vel.mult(g)))}},i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame,j=b({x:0,y:0,construct:function(a,b){this.set(a,b)},set:function(a,b){return c(a)&&(this.x=e(a)),c(b)&&(this.y=e(b)),this},min:function(a){this.set(Math.abs(this.x)<=a?0:this.x,Math.abs(this.y)<=a?0:this.y)},max:function(a){this.set(Math.abs(this.x)>=a?0:this.x,Math.abs(this.y)>=a?0:this.y)},add:function(a){return this.set(this.x+a.x,this.y+a.y)},sub:function(a){return this.set(this.x-a.x,this.y-a.y)},mult:function(a){return this.set(this.x*a,this.y*a)},div:function(a){return this.set(this.x/a,this.y/a)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},norm:function(){var a=this.length();return a?this.set(this.x/a,this.y/a):this},rotate:function(){return this.set(-this.y,this.x)},dot:function(a){return a=a||this,this.x*a.x+this.y*a.y},clone:function(){return new j(this.x,this.y)}}),k={},l=1,m=2,n=4,o=8,p={r:30,w:13,h:8,margin:10,border:2,unit:function(a){return 2*p.r*(a||1)},unitH:function(a){return p.unit(2)/r*(a||1)},unit2:function(a){var b=p.r-1;return b*b*Math.PI*(a||1)},resize:function(){p.width=p.unit(p.w),p.top=p.unitH(.75)+p.margin+p.border,p.height=p.unitH(p.h),p.left=p.margin+p.border},reset:function(){p.bodies=[]},bodies:[],matter:{},motion:function(a){p.matter[l]=0,p.matter[m]=0,p.matter[n]=0,p.matter[o]=0;var b,c,d,e,f=p.bodies.length;for(b=0;f>b;b++)if(null!=p.bodies[b]){for(d=p.bodies[b],c=b+1;f>c;c++)null!=p.bodies[c]&&(e=p.bodies[c],p.overlap(d,e)&&p.impulse(d,e));d.worlds_collide(),d.step(a),d.draw(t.fg.ctx),d.active&&(p.matter[d.mask]+=d.area())}h.solution(p.matter)},overlap:function(a,b){if(!a.active||!b.active)return!1;var c=a.r+b.r,d=a.pos.x-b.pos.x,e=a.pos.y-b.pos.y;return c*c>d*d+e*e},impulse:function(a,b){var c=a.pos.clone().sub(b.pos).norm(),d=c.dot(a.vel.clone().sub(b.vel)),e=Math.sqrt(d*d*a.mass*b.mass);switch(e=Math.min(Math.max(Math.PI*e,1234),a.area(),b.area()),a.mask|b.mask){case l|n:case m|o:z.collide(!0),a.area(-e),b.area(-e);break;case l|m:z.collide(),a.area(a.mask&l?+e:-e),b.area(b.mask&l?+e:-e);break;case o|l:z.collide(),a.area(a.mask&o?+e:-e),b.area(b.mask&o?+e:-e);break;case n|o:z.collide(),a.area(a.mask&n?+e:-e),b.area(b.mask&n?+e:-e);break;case m|n:z.collide(),a.area(a.mask&m?+e:-e),b.area(b.mask&m?+e:-e)}if(!(d>0)){var f=(a.rest+b.rest)/2,g=-(1+f)*d/(a.inv_mass+b.inv_mass);impulse=c.clone().mult(g),a.vel.add(impulse.clone().mult(a.inv_mass)),b.vel.sub(impulse.clone().mult(b.inv_mass));var h=a.r+b.r-a.pos.clone().sub(b.pos).length(),i=.5,j=1,k=Math.max(h-j,j);k/=a.inv_mass+b.inv_mass,k=c.mult(k*i),a.force.add(k.clone().mult(a.inv_mass)),b.force.sub(k.clone().mult(b.inv_mass))}}};k[l]={type:"fire",color:"#F73"},k[m]={type:"air",color:"#EEF"},k[n]={type:"water",color:"#1AF"},k[o]={type:"earth",color:"#3F8"};var q=b({mask:0,type:null,r:38,min:16,pos:{x:0,y:0},vel:{x:0,y:0},force:{x:0,y:0},dens:.6,rest:.9,fric:0,mass:null,construct:function(a,b,c,d,e){this.mask|=a,this.r=d||this.r,this.set(k[a]),this.pos=new j(b,c),this.vel=new j(0,0),this.acc=new j(0,0),this.force=new j(0,0),this.init.apply(this,arguments),this.index=p.bodies.push(this)-1,this.active=e||!1,this.launching=!1},set:function(b){a.call(this,b),this.r>this.min&&(this.mass=this.area()*this.dens,this.inv_mass=1/this.mass)},init:function(){},step:function(a){this.r<this.min&&this.destruct(),this.vel.dot()>0&&this.pos.add(this.vel.clone().mult(a)),this.launching&&this.pos.y<p.height-this.r&&(this.active=!0,this.launching=!1),this.pos.add(this.force),this.force.x=0,this.force.y=0},worlds_collide:function(){if(this.active||this.launching){this.pos.y<this.r&&(this.vel.y=Math.abs(this.vel.y),this.force.y=this.r-this.pos.y);var a=this.launching?p.height+p.unitH():p.height;this.pos.y>a-this.r&&(this.vel.y=-Math.abs(this.vel.y),this.force.y=a-this.r-this.pos.y),this.pos.x>p.width-this.r&&(this.vel.x=-Math.abs(this.vel.x),this.force.x=p.width-this.r-this.pos.x),this.pos.x<this.r&&(this.vel.x=Math.abs(this.vel.x),this.force.x=this.r-this.pos.x)}},area:function(a){var b=Math.PI*this.r*this.r;return c(a)&&(b=Math.max(this.min,b+a),this.set({r:Math.sqrt(b/Math.PI)})),b},draw:function(a){this.r<this.min||(a.drawImage(f(this),this.pos.x-this.r-8,this.pos.y-this.r-8),t.fx.ctx.drawImage(g(this),this.pos.x-this.r-12,this.pos.y-this.r-12))},destruct:function(){delete p.bodies[this.index]}}),r=Math.sqrt(3),s=2*Math.PI,t={init:function(){document.body.style.background="#000000",t.fx=new u(document.body).size(p.width,p.height).css({position:"absolute",top:p.top+"px",left:p.left+"px",zIndex:1,border:p.border+"px solid rgba(128,128,255,.75)",marginBottom:p.margin+"px",background:"url("+t.hexgrid(p.r).url()+") repeat"}).draw(function(a){a.fillStyle=a.createPattern(t.hexgrid(p.r).elem,"repeat")}).path().rect(),t.fg=new u(document.body).size(p.width,p.height+p.unitH(1.5)).css({position:"absolute",top:p.top+"px",left:p.left+"px",zIndex:3,border:p.border+"px solid rgba(128,128,255,0)"}),t.header=new u(document.body).size(p.width,p.unitH()).css({position:"fixed",top:p.margin+"px",left:p.left+"px",zIndex:4})},status:function(){t.header.clear().draw(function(a){a.font=p.unit(.75)+"px monospace",a.textAlign="left",a.textBaseline="top",a.fillStyle="rgba(128,128,255,.75)",a.lineWidth=1.5,a.strokeStyle="rgba(128,128,255,1)";{var b="CRASIS/"+h.lvl,c=0,d=0,e="LEVEL"+h.lvl;p.width-a.measureText(e).width}a.fillText(b,c,d),a.strokeText(b,c,d);var f,d=26,g=2,i=240,j=p.width-i,q=p.unit2(28);a.fillStyle=k[l].color,f=h.level.solve.fire/q*j,a.fillRect(i,d,f,g),i+=f,a.fillStyle=k[m].color,f=h.level.solve.air/q*j,a.fillRect(i,d,f,g),i+=f,a.fillStyle=k[n].color,f=h.level.solve.water/q*j,a.fillRect(i,d,f,g),i+=f,a.fillStyle=k[o].color,f=h.level.solve.earth/q*j,a.fillRect(i,d,f,g);var f,d=32,g=6,i=240,j=p.width-i;a.fillStyle=k[l].color,f=p.matter[l]/q*j,a.fillRect(i,d,f,g),i+=f,a.fillStyle=k[m].color,f=p.matter[m]/q*j,a.fillRect(i,d,f,g),i+=f,a.fillStyle=k[n].color,f=p.matter[n]/q*j,a.fillRect(i,d,f,g),i+=f,a.fillStyle=k[o].color,f=p.matter[o]/q*j,a.fillRect(i,d,f,g)})},message:function(a,b,c){t.fg.draw(function(d){var e=p.width/2,f=p.height/2,g=p.width,h=p.height;d.fillStyle="rgba(8,0,16,.75)",d.fillRect(e-g/2,f-h/2,g,h),d.font=p.unit(.75)+"px monospace",d.textAlign="center",d.textBaseline="middle",d.fillStyle="rgba(128,128,255,.75)",d.fillText(a,e,f),d.lineWidth=2,d.strokeStyle="rgba(128,128,255,1)",d.strokeText(a,e,f),d.font=p.unit(.375)+"px monospace",d.fillText(b||"",e,f+p.unit(.75)),d.font=p.unit(.375)+"px monospace",d.fillText(c||"",e,f+p.unit(5/4))})},gradient:function(a,b,c,d,e){var f=a.createRadialGradient(c,d,1,c,d,e);return f.addColorStop(1,"rgba(0,0,0,1)"),f.addColorStop(.5,"rgba(54,54,54,.5)"),f},hexgrid:function(a){var b=2*a,c=2*b/r,e=d(0),f=d(.5*b),g=d(b),h=d(-1),i=d(.25*c),j=d(.5*c),k=d(.75*c),l=d(c),m=1;return(new u).size(Math.floor(b),Math.floor(c)).set({globalAlpha:.2,fillStyle:"rgba(0,0,0,1)"}).rect().fill().set({lineWidth:1,lineCap:"square",strokeStyle:"rgba(128,128,255,.25)",fillStyle:"rgba(128,128,255,.25)"}).path().move(e,h).line(e,l).line(g,j).line(e,h).move(f,h).line(f,l).move(g,h).line(e,j).line(g,l).stroke().path().move(e,h).circ(m).move(e,j).circ(m).move(e,l).circ(m).move(f,i).circ(m).move(f,k).circ(m).move(g,h).circ(m).move(g,j).circ(m).move(g,l).circ(m).fill()},starfield:function(){this.path().set({fillStyle:"#FFF"});for(var a=0,b=Math.sqrt(this.w*this.h);b>a;a++)this.move(Math.random()*this.w,Math.random()*this.h).circ(2*Math.random());this.fill()},colors:{fire:"#F73",air:"#EEF",water:"#1AF",earth:"#3F8"}},u=b({construct:function(a){this.x=this.y=this.w=this.h=0,this.elem=document.createElement("canvas"),this.ctx=this.elem.getContext("2d"),a&&a.appendChild(this.elem)},size:function(a,b){return this.w=this.elem.width=a,this.h=this.elem.height=b,this},css:function(b){return a.call(this.elem.style,b||{}),this},draw:function(a){return a.call(this,this.ctx),this},clear:function(){return this.ctx.clearRect(0,0,this.w,this.h),this},circ:function(a,b,c){return this.ctx.arc(b||this.x,c||this.y,a,0,s,!1),this},rect:function(a,b,c,d){return this.ctx.rect(a||this.x,b||this.y,c||this.w,d||this.h),this},move:function(a,b){return this.ctx.moveTo(this.x=a,this.y=b),this},line:function(a,b){return this.ctx.lineTo(this.x=a,this.y=b),this},set:function(b){return a.call(this.ctx,b||{}),this},path:function(){return this.ctx.closePath(),this.ctx.beginPath(),this},fill:function(){return this.ctx.fill(),this},stroke:function(){return this.ctx.stroke(),this},url:function(){return this.elem.toDataURL()}}),v=[];v[1]={field:[[],[0,0,0,0,0,0,l],[0,0,0,0,0,l,l],[0,0,0,0,0,l,0,l],[0,0,0,0,l,0,0,l],[0,0,0,0,l,0,0,0,l],[0,0,0,l,0,0,0,0,l],[0,0,0,l,l,l,l,l,l,l]],solve:{fire:0,air:0,water:0,earth:p.unit2(18)}},v[2]={field:[[],[0,0,0,0,0,0,m],[0,0,0,0,0,m,m],[0,0,0,0,0,m,0,m],[0,0,0,0,m,0,0,m],[0,0,0,m,m,m,m,m,m,m],[0,0,0,m,0,0,0,0,m],[0,0,0,m,m,m,m,m,m,m]],solve:{fire:p.unit2(23),air:0,water:0,earth:0}},v[3]={field:[[],[0,0,0,n,n,n,n,n,n,n],[0,0,0,n,0,0,0,0,n],[0,0,0,0,n,0,0,0,n],[0,0,0,0,n,0,0,n],[0,0,0,0,0,n,0,n],[0,0,0,0,0,n,n],[0,0,0,0,0,0,n]],solve:{fire:p.unit2(20),air:0,water:0,earth:0}},v[4]={field:[[],[0,0,0,o,o,o,o,o,o,o],[0,0,0,o,0,0,0,0,o],[0,0,0,o,o,o,o,o,o,o],[0,0,0,0,o,0,0,o],[0,0,0,0,0,o,0,o],[0,0,0,0,0,o,o],[0,0,0,0,0,0,o]],solve:{fire:0,air:0,water:p.unit2(19),earth:0}},v[5]={field:[[0,0,0,0,o,0,0,o],[0,0,0,0,o,n,n,o],[0,0,0,0,o,0,0,o],[0,0,0,0,o,0,0,o],[0,0,0,0,o,0,0,o],[0,0,0,0,o,0,0,o],[0,0,0,0,o,0,0,o],[0,0,0,0,o,0,0,o]],solve:{fire:p.unit2(18),air:0,water:p.unit2(1),earth:0}},function(a){function b(a){var c=a.split(h);this.frequency=b.getFrequency(c[0])||0,this.duration=b.getDuration(c[1])||0}function c(a,b,c){a&&(this.ac=a,this.createFxNodes(),this.tempo=b||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,c||[]))}var d="B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb",e=440*Math.pow(Math.pow(2,1/12),-9),f=/^[0-9.]+$/,g=4,h=/\s+/,i=/(\d+)/,j={};d.split("|").forEach(function(a,b){a.split("-").forEach(function(a){j[a]=b})}),b.getFrequency=function(a){var b=a.split(i),c=j[b[0]],d=(b[1]||g)-g,f=e*Math.pow(Math.pow(2,1/12),c);return f*Math.pow(2,d)},b.getDuration=function(a){return f.test(a)?parseFloat(a):a.toLowerCase().split("").reduce(function(a,b){return a+("w"===b?4:"h"===b?2:"q"===b?1:"e"===b?.5:"s"===b?.25:0)},0)},"undefined"!=typeof module&&(module.exports=b),c.prototype.createFxNodes=function(){var a=[["bass",100],["mid",1e3],["treble",2500]],b=this.gain=this.ac.createGain();return this.wet=this.ac.createGain(),this.dry=this.ac.createGain(),a.forEach(function(a,c){c=this[a[0]]=this.ac.createBiquadFilter(),c.type="peaking",c.frequency.value=a[1],b.connect(b=c)}.bind(this)),b.connect(this.wet),b.connect(this.dry),this},c.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(a){this.notes.push(a instanceof b?a:new b(a))}.bind(this)),this},c.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},c.prototype.scheduleNote=function(a,b){var c=60/this.tempo*this.notes[a].duration,d=c*(1-(this.staccato||1e-11));return this.setFrequency(this.notes[a].frequency,b),this.smoothing&&this.notes[a].frequency&&this.slide(a,b,d),this.setFrequency(0,b+d),b+c},c.prototype.getNextNote=function(a){return this.notes[a<this.notes.length-1?a+1:0]},c.prototype.getSlideStartDelay=function(a){return a-Math.min(a,60/this.tempo*this.smoothing)},c.prototype.slide=function(a,b,c){var d=this.getNextNote(a),e=this.getSlideStartDelay(c);return this.setFrequency(this.notes[a].frequency,b+e),this.rampFrequency(d.frequency,b+c),this},c.prototype.setFrequency=function(a,b){return this.osc.frequency.setValueAtTime(a,b),this},c.prototype.rampFrequency=function(a,b){return this.osc.frequency.linearRampToValueAtTime(a,b),this},c.prototype.play=function(a){return a="number"==typeof a?a:this.ac.currentTime,this.createOscillator(),this.osc.start(a),this.notes.forEach(function(b,c){a=this.scheduleNote(c,a)}.bind(this)),this.osc.stop(a),this.osc.onended=this.loop?this.play.bind(this,a):null,this},c.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.stop(0),this.osc.frequency.cancelScheduledValues(0),this.osc=null),this},"undefined"!=typeof module&&(module.exports=c),a.Note=b,a.Sequence=c}("undefined"!=typeof window?window:this);var w,x=128,y=.5;(window.AudioContext||window.webkitAudioContext)&&(w=new(window.AudioContext||window.webkitAudioContext));var z={init:function(){w&&(this.ac=w,this.osc=this.ac.createOscillator(),this.compressor=this.ac.createDynamicsCompressor(),this.output=this.ac.createGain(),this.output.connect(this.ac.destination),this.output.gain.value=y,this.reverb=this.ac.createConvolver(),this.reverb.buffer=this.createReverb(2),this.reverb.connect(this.compressor),this.collision1.dry.connect(this.output),this.collision1.gain.gain.value=.4,this.collision1.loop=!1,this.collision2.dry.connect(this.output),this.collision2.gain.gain.value=.4,this.collision2.loop=!1,this.osc.frequency.value=0,this.osc.connect(this.compressor),this.osc.start(),this.kick.wet.connect(this.reverb),this.bass.wet.connect(this.reverb),this.lead.wet.connect(this.reverb),this.counterpoint.wet.connect(this.reverb),this.pad1.wet.connect(this.reverb),this.pad2.wet.connect(this.reverb),this.kick.dry.connect(this.compressor),this.bass.dry.connect(this.compressor),this.lead.dry.connect(this.compressor),this.counterpoint.dry.connect(this.compressor),this.pad1.dry.connect(this.compressor),this.pad2.dry.connect(this.compressor),this.compressor.ratio.value=4,this.compressor.threshold.value=-12,this.compressor.connect(this.output),this.bass.staccato=.25,this.bass.waveType="sawtooth",this.bass.treble.type="lowpass",this.bass.treble.frequency.value=2500,this.bass.mid.gain.value=-2,this.lead.smoothing=.06,this.lead.gain.gain.value=.35,this.lead.wet.gain.value=1.5,this.counterpoint.smoothing=.06,this.counterpoint.gain.gain.value=.22,this.pad1.gain.gain.value=.25,this.pad1.wet.gain.value=3,this.pad1.waveType="sawtooth",this.pad2.gain.gain.value=.2,this.pad2.wet.gain.value=3,this.pad2.waveType="sawtooth",this.kick.waveType="sine",this.kick.smoothing=.8,this.kick.gain.gain.value=2,this.kick.bass.frequency.value=60,this.kick.bass.gain.value=10,this.kick.mid.frequency.value=100,this.kick.mid.gain.value=5,this.kick.wet.gain.value=.3)},play:function(){var a,b;this.ac&&(a=this.ac.currentTime,b=a+60/x*16,this.lead.play(a),this.counterpoint.play(b),this.bass.play(b),this.kick.play(b),this.pad1.play(b),this.pad2.play(b))},stop:function(){this.ac&&(this.lead.stop(),this.counterpoint.stop(),this.bass.stop(),this.kick.stop(),this.pad1.stop(),this.pad2.stop())},mute:function(){this.ac&&(this.muted?(this.muted=!1,this.output.gain.value=y):(this.muted=!0,this.output.gain.value=0))},collide:function(a){this.ac&&(this.collision1.stop(),this.collision2.stop(),a?this.collision2.play():this.collision1.play())},createReverb:function(a,b){var c=w.sampleRate,d=c*a,e=this.ac.createBuffer(2,d,c),f=e.getChannelData(0),g=e.getChannelData(1),h=0;for(b||(b=2);d>h;++h)f[h]=(2*Math.random()-1)*Math.pow(1-h/d,b),g[h]=(2*Math.random()-1)*Math.pow(1-h/d,b);return e},bass:new Sequence(w,x,["C2  e","C2  e","C2  e","C2  e","C2  e","C2  e","C2  e","G2  e","G2  e","G2  e","G2  e","G2  e","G2  e","G2  e","G2  e","E2  e","E2  e","E2  e","E2  e","E2  e","E2  e","E2  e","E2  e","G2  e","G2  e","G2  e","G2  e","D2  e","D2  e","D2  e","D2  e","C2  e"]),lead:new Sequence(w,x,["_  e","G4 e","G5 e","G4 e","D5 e","C5 e","B4 e","C5 e","_  e","G4 e","D5 e","E5 e","D5 e","C5 e","B4 e","A4 e","_  e","G4 e","G5 e","G4 e","D5 e","C5 e","B4 e","C5 e","_  e","G4 e","D5 e","E5 e","D5 e","B4 e","A4 e","G4 e"]),counterpoint:new Sequence(w,x,["E4 3","F#4 e","D4 3.5","B3 e","G4 3.5","E4 e","B4 h","A4 q","G4  e","F#4 e","E4 e"]),kick:new Sequence(w,x,["G2 0.01","C2 0.19","-  0.80"]),pad1:new Sequence(w,x,["G3 3.5","G3 4","G3 4","G3 4","G3 0.5"]),pad2:new Sequence(w,x,["C4 3.5","B3 4","E4 4","B3 2","D4 2","C4 0.5"]),collision1:new Sequence(w,220,["G3 s","D4 s","G4 s"]),collision2:new Sequence(w,220,["G4 s","D4 s","G3 s"])};return h.start(),h});
    //# sourceMappingURL=js13k.min.js.map
  </script>
</html>
