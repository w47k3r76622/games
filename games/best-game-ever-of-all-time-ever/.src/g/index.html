<html>
	<head>
		<title></title>
		<style>
		html{background:#000}body{width:960px;height:720px;margin:55px auto 0;background:gray;border:20px solid gray;-moz-border-radius:20px;-webkit-border-radius:20px;border-radius:20px;overflow:hidden}#gametitle{color:#fff;position:absolute;margin-top:-50px}#stats{position:absolute;background:#ccac00;padding:20px;left:-780px;margin-left:-270px;top:-300px;z-index:100;border:2px solid #000}#stats div{text-align:left}#stats table{margin:8px;padding:4px;border:1px solid}#stats td{width:110px;padding:4px;font-weight:700}button{float:right}#ChooseDifficulty{position:absolute;background:#ccac00;padding:20px;width:590;left:50%;margin-left:-295px;top:134px;z-index:100;border:2px solid #000}#ChooseDifficulty table{background:#fff;font-size:20px;-moz-border-radius:15px;-webkit-border-radius:15px;border-radius:15px;color:#000;margin:0 auto;padding:15px 25px;max-width:400px}#ChooseDifficulty td{height:30px;border-bottom:2px dashed red}#startgame{padding:3px 5px;color:#fff;background:#000}#health,#level{padding:10px 20px;background:#000;color:#fff;position:absolute;top:85px}#level{margin-left:860px}#instructions{margin-top:-6px;padding:10px;background:#000;color:#fff;z-index:999}
		</style>
		<script>
		    var audioContext=new window.AudioContext||new window.webkitAudioContext;var Audio=function(){var e=this;this.masterGain=audioContext.createGain();this.masterGain.connect(audioContext.destination);this.masterGain.gain.value=.4;this.delay=audioContext.createDelay();this.delay.delayTime.value=.1;this.feedback=audioContext.createGain();this.feedback.gain.value=.5;this.delay.connect(this.feedback);this.feedback.connect(this.delay);this.delay.connect(audioContext.destination);this.delayConnected=false;this.Delay=function(t){if(t&&!this.delayConnected){this.delayConnected=true;e.masterGain.disconnect(audioContext.destination);e.masterGain.connect(e.delay)}else if(!t&&this.delayConnected){this.delayConnected=false;e.masterGain.disconnect(e.delay);e.masterGain.connect(audioContext.destination)}};this.Voice=function(t,n,r,i){this.voice=this;this.osc=audioContext.createOscillator();this.osc.frequency.value=n;this.osc.start(0);this.gain=audioContext.createGain();this.gain.gain.value=0;this.gain.connect(e.masterGain);this.osc.connect(this.gain);this.attack=r;this.decay=i;this.osc.type=t;this.Trigger=function(){var e=audioContext.currentTime;this.gain.gain.cancelScheduledValues(e);this.gain.gain.linearRampToValueAtTime(1,e);this.gain.gain.linearRampToValueAtTime(0,e+.1)};this.SetFrequency=function(e){this.osc.frequency.linearRampToValueAtTime(e,0)}}};var audio=new Audio;window.onload=function(){"use strict";function U(e){return e?e<0?-1:1:0}function z(){function z(e,t){this.X=e;this.Y=t}function W(e){if(window.execScript){window.execScript(e);return}var t=function(){window.eval.call(window,e())};t()}function X(t,n,r,o){var u=this;this.pos=new z(t,n);this.zIndex=r;if(typeof o=="undefined"||o===false){i.push(this)}this.SetPos=function(e){this.pos=e;return this};this.SetColor=function(e){this.color=e;return this};this.SetName=function(e){this.name=e;return this};this.SetRotate=function(e){this.rotation=e;return this};this.SetBorder=function(e){this.borderColor=e;return this};this.StoreData=function(e){this.Data=e;return this};this.StoreData2=function(e){this.Data2=e;return this};this.on=function(t,n){if(t==="click"){this.click=n;e.addEventListener("click",function(e){if($(u)){var t=u.click;W(t)}});return this}else if(t==="mouseover"){this.mouseover=n;return this}else if(t==="mouseout"){this.mouseout=n;return this}else{this.on=null;return null}};this.click="";this.mouseover="";this.mouseout="";this.over=false;this.collider=false;this.static=true;this.collidable=function(e){if(e&&!this.collider){this.collider=true;if(this.static){h.push(this)}else{a.push(this)}}else if(!e){this.collider=false;if(this.static){var t=h.indexOf(this);if(t>=0){h.splice(t,1)}}else{var t=a.indexOf(this);if(t>=0){a.splice(t,1)}}}return this};this.Player=false;this.IsPlayer=function(e){if(e){this.Player=true;this.static=false}else{this.Player=false}return this};this.Enemy=false;this.IsEnemy=function(e){if(e){this.Enemy=true;s.push(this);this.static=false}else{this.Enemy=false}return this}}function $(e){return v>e.pos.Y&&v<e.pos.Y+e.height&&d>e.pos.X&&d<e.pos.X+e.width}function J(e,t){return e.pos.X<t.pos.X+t.width&&e.pos.X+e.width>t.pos.X&&e.pos.Y<t.pos.Y+t.height&&e.pos.Y+e.height>t.pos.Y}function Y(){var e=false;var t=false;a.forEach(function(n){if(n!==undefined){h.forEach(function(e){if(J(n,e)){var t=n.pos.X+n.width/2-(e.pos.X+e.width/2);var r=n.pos.Y+n.height/2-(e.pos.Y+e.height/2);if(Math.abs(t)>Math.abs(r)){if(t>0){et(n,e,"left")}else{et(n,e,"right")}}else{if(r>0){et(n,e,"up")}else{et(n,e,"down")}}}});if(a.length<2){return}var r=a.indexOf(n);r=a[r];if(r!==undefined){if(J(Nt,n)){var i=Nt.lastDirection;var s=Nt.pos.X+Nt.width/2-(n.pos.X+n.width/2);var o=Nt.pos.Y+Nt.height/2-(n.pos.Y+n.height/2);if(Math.abs(s)>Math.abs(o)){if(e)return;if(s>0){et(Nt,n,"left")}else{et(Nt,n,"right")}if(n.Enemy){Nt.VelocityX=s/5;Nt.sound.takeDamage.Trigger();Nt.currentHealth-=n.height}}else{if(t)return;if(o>0){et(Nt,n,"up")}else{et(Nt,n,"down")}if(n.Enemy){Nt.VelocityY=o/5;Nt.sound.takeDamage.Trigger();Nt.currentHealth-=n.height}}if(n.Data=="#B22222"||n.Data=="#003EFF"||n.Data=="#6B4226"||n.Data=="#FAEBD7"){u=n.Data;G(u)}M=true}else{M=false;_=true;D=true;P=true;H=true;if(F){F=false;setTimeout(function(){Nt.water.SetColor("black");Nt.fire.SetColor("black");Nt.air.SetColor("black");Nt.earth.SetColor("black")},100)}}}}});s.forEach(function(e){e.Draw();e.Movement()});i.sortBy("zIndex");i.forEach(function(e){e.Draw()})}function et(e,t,n){if(t.name==="collidable"||t.name==="block"){if(n=="left"){e.pos.X=t.pos.X+t.width;_=false}else if(n=="right"){e.pos.X=t.pos.X-e.width;D=false}else if(n=="up"){e.pos.Y=t.pos.Y+t.height;P=false}else if(n=="down"){e.pos.Y=t.pos.Y-e.height;H=false}}else if(e.name==="character"&&t.name==="Dungeon"){wt();Z=t.parent;u=t.Data;G(u)}else if(t.name==="enemy"){if(!F){Nt.water.SetColor("#980002");Nt.fire.SetColor("#980002");Nt.air.SetColor("#980002");Nt.earth.SetColor("#980002");F=true}}}function it(){var e=document.getElementById("stats"),t=document.getElementById("combat"),n=document.getElementById("water"),r=document.getElementById("fire"),i=document.getElementById("earth"),s=document.getElementById("air"),o,u=document.getElementById("power"),a=document.getElementById("acc"),f=document.getElementById("waterLabel"),l=document.getElementById("fireLabel"),c=document.getElementById("earthLabel"),h=document.getElementById("airLabel"),p=document.getElementById("xp"),d=Nt.stats,v=Math.floor(d.Level/500+1);if(!g){t.innerHTML=v;p.innerHTML=d.Level-(v-1)*500+"/500";u.innerHTML=v*10;a.innerHTML=v*10;n.innerHTML=Nt.water.Data;r.innerHTML=Nt.fire.Data;i.innerHTML=Nt.earth.Data;s.innerHTML=Nt.air.Data;e.style.left="50%",e.style.top=300;if(!m){o=document.getElementById("statsClose");o.addEventListener("click",st);m=true}g=true}else{st();g=false}}function st(){var e=document.getElementById("stats");e.style.left=-780,e.style.top=-300;g=false}function ft(e,t){return Math.floor(Math.random()*(t-e+1))+e}function lt(e){var t=w[e];E=0;ct();for(var n=0;n<t.length;n++){for(var r=0;r<t[n].length;r++){b[E].NewPos(-500,-500);if(gt(t[n][r])){b[E].NewPos(b[E].Data,b[E].Data2);console.log(t[n][r])}else if(t[n][r]!==0){ht(t[n][r])}E++}}}function ct(){Ct.buildings.fireTemple.NewPos(-500,-500);Ct.buildings.waterTemple.NewPos(-500,-500);Ct.buildings.earthTemple.NewPos(-500,-500);Ct.buildings.airTemple.NewPos(-500,-500)}function ht(e){if(e==2){Ct.buildings.fireTemple.NewPos(440,350)}else if(e==3){Ct.buildings.waterTemple.NewPos(440,350)}else if(e==4){Ct.buildings.earthTemple.NewPos(440,350)}else if(e==5){Ct.buildings.airTemple.NewPos(440,350)}}function pt(){for(var e=0;e<6;e++){for(var t=0;t<8;t++){var n=(new V.sq(-500,-500,B)).SetColor("black").SetSize(118).SetName("block").SetBorder("gray").StoreData(t*122).StoreData2(107*(e+1)-107);x.push(n);B++}}}function dt(){return Math.round(Math.random())}function vt(){if(w.length==Ct.buildings.fireTemple.Data){return[0,0,0,0,0,0,0,2,0,0,0,0,0,0]}else if(w.length==Ct.buildings.waterTemple.Data){return[0,0,0,0,0,0,3,0,0,0,0,0,0,0]}else if(w.length==Ct.buildings.earthTemple.Data){return[0,0,0,0,0,4,0,0,0,0,0,0,0,0]}else if(w.length==Ct.buildings.airTemple.Data){return[0,0,0,0,0,0,0,5,0,0,0,0,0,0]}else{return[0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}function mt(){return[0,0,dt(),0,dt(),0,0,dt(),0,0,dt(),dt(),0,0]}function gt(e){if(e===1){return true}else{return false}}function yt(){if(Z!==null){console.log(Z);Z.Beaten()}e.style.background="#3f9b0b";y=true;S=false;N=0;C=0;if(u==="#003EFF"){kt.toggleWater.SetBGColor(kt.toggleWater.Data);kt.WaterText.SetColor("#EEE");Nt.hasWater=true;Nt.SetAttackType("#003EFF");Nt.water.SetBorder("#003EFF");Nt.water.StoreData(1);var t=document.getElementById("waterLabel");t.innerHTML="Water Level";q++}else if(u==="#B22222"){kt.toggleFire.SetBGColor(kt.toggleFire.Data);kt.FireText.SetColor("#EEE");Nt.hasFire=true;Nt.SetAttackType("#B22222");Nt.fire.SetBorder("#B22222");Nt.fire.StoreData(1);var n=document.getElementById("fireLabel");n.innerHTML="Fire Level";q++}else if(u==="#FAEBD7"){kt.toggleAir.SetBGColor(kt.toggleAir.Data);kt.AirText.SetColor("#EEE");Nt.hasAir=true;Nt.SetAttackType("#FAEBD7");Nt.air.SetBorder("#FAEBD7");Nt.air.StoreData(1);var r=document.getElementById("airLabel");r.innerHTML="Air Level";q++}else if(u==="#6B4226"){kt.toggleEarth.SetBGColor(kt.toggleEarth.Data);kt.EarthText.SetColor("#EEE");Nt.hasEarth=true;Nt.SetAttackType("#6B4226");Nt.earth.SetBorder("#6B4226");Nt.earth.StoreData(1);var i=document.getElementById("earthLabel");i.innerHTML="Earth Level";q++}u="#111111";x.forEach(function(e){e.SetPos(new z(-500,-500));e.collidable(false)});if(q!=4){lt(Ct.width*Ct.PlayerX+Ct.PlayerY)}else{bt()}}function bt(){var e=document.getElementById("ChooseDifficulty");R=true;e.innerHTML="<p>Congradulations! You have completed the checklist. Getting the last element caused you to become the most famous person in all of <i>GEOATE</i>.</p> <p>You have just beaten <i>Best Game Ever. Of All Time. Ever.</i> Which also makes you one of the best players of <i>Best Game Ever. Of All Time. Ever.</i> So take a minute and reflect on how awesome you are, or refresh the page to play again.</p>";it();e.style.display="block"}function wt(){var t=0;e.style.background="#333333";ct();for(var n=0;n<14;n++){for(var r=0;r<5;r++){b[t].NewPos(-500,-500);t++}}Et(3*I,3*I)}function Et(e,t){y=false;S=true;L.length=0;var n=[[1,1,1,1,1,1,1,1],[1,1,0,0,0,0,dt(),1],[1,0,0,0,0,0,0,dt()],[1,0,0,0,0,0,0,dt()],[1,dt(),0,0,0,0,dt(),1],[1,1,dt(),dt(),0,dt(),1,1]];var r=n[5];var i=n[5];for(var s=0;s<n.length;s++){k.push(n[s][7])}L.push(n);var o=e*t-1;A=e;for(var a=0;a<o;a++){if(a<=e-3){var f=[L[0][0],[k[1],0,0,0,0,0,dt(),1],[k[2],0,dt(),0,dt(),0,0,dt()],[k[3],0,0,0,0,dt(),0,dt()],[k[4],dt(),0,0,0,0,dt(),1],i];k=[];for(var l=0;l<f.length;l++){k.push(f[l][7])}L.push(f)}else if(a==e-2){console.log("1");var f=[L[0][0],[k[1],dt(),0,0,0,0,dt(),1],[k[2],0,0,dt(),dt(),0,dt(),1],[k[3],0,0,dt(),0,0,dt(),1],[k[4],0,dt(),0,0,0,dt(),1],i];L.push(f)}else if(a==e*O+1-2&&a!=e*(t-1)-1){i=r;var f=[i,[1,0,0,0,0,0,0,1],[1,dt(),0,0,dt(),dt(),0,dt()],[1,dt(),0,dt(),0,0,0,dt()],[1,dt(),0,0,0,0,0,dt()],[1,1,1,dt(),0,dt(),dt(),1]];k=[];r=f[5];for(var c=0;c<f.length;c++){k.push(f[c][7])}L.push(f)}else if(a!=e*O+1-2&&a!=e*(O+1)-2&&a<e*(t-1)-1){var f=[i,[k[1],dt(),0,0,0,0,0,dt()],[k[2],0,dt(),dt(),0,0,0,dt()],[k[3],0,dt(),0,dt(),0,0,dt()],[k[4],dt(),dt(),0,0,0,0,dt()],r];k=[];for(var h=0;h<f.length;h++){k.push(f[h][7])}L.push(f)}else if(a==e*(O+1)-2&&a!=e*t-2){var f=[i,[k[1],0,0,0,0,0,dt(),1],[k[2],0,0,dt(),0,0,dt(),1],[k[3],0,dt(),dt(),0,0,dt(),1],[k[4],0,0,0,0,0,dt(),1],r];O++;L.push(f)}else if(a==e*(t-1)-1){console.log("2");i=r;var f=[i,[1,0,0,0,0,0,0,dt()],[1,dt(),0,0,0,0,0,dt()],[1,dt(),0,dt(),0,0,0,dt()],[1,dt(),dt(),dt(),dt(),dt(),0,dt()],[1,1,1,1,1,1,1,1]];k=[];for(var p=0;p<f.length;p++){k.push(f[p][7])}L.push(f)}else if(a==e*t-2){console.log("3");var d=[i,[k[1],0,0,0,0,0,0,1],[k[2],0,0,0,0,0,0,1],[k[3],0,0,0,0,0,0,1],[k[4],0,0,0,0,0,5,1],[1,1,1,1,1,1,1,1]];L.push(d)}else{var f=[i,[k[1],0,0,0,0,0,0,dt()],[k[2],0,dt(),0,0,dt(),0,dt()],[k[3],0,0,dt(),dt(),0,0,dt()],[k[4],0,dt(),dt(),dt(),dt(),0,dt()],[1,1,1,1,1,1,1,1]];k=[];for(var v=0;v<f.length;v++){k.push(f[v][7])}L.push(f)}}St(L[0]);G(u)}function St(e){for(var t=0;t<e.length;t++){for(var n=0;n<e[t].length;n++){if(gt(e[t][n])&&e[t][n]!=5){x[T].SetPos(new z(x[T].Data,x[T].Data2));x[T].collidable(true)}else if(e[t][n]==5){console.log("this");o[0].AdjEnemy(x[T].Data,x[T].Data2,u,true)}else{x[T].SetPos(new z(-500,-500));x[T].collidable(false)}T++}}T=0}function xt(){return Math.floor(Math.random()*960+1)}function Tt(){return Math.floor(Math.random()*720+1)}Array.prototype.sortBy=function(){function e(e){var t=1;if(e[0]=="-"){t=-1;e=e.substr(1)}return function(n,r){var i=n[e]<r[e]?-1:n[e]>r[e]?1:0;return i*t}}function t(){var t;if(arguments.length===0){throw"No argument in sortBy"}var n=arguments;return function(t,r){for(var i=0,s=0;i===0&&s<n.length;s++){i=e(n[s])(t,r)}return i}}return this.sort(t.apply(null,arguments))};var V={sq:function(e,n,r,i){X.apply(this,[e,n,r,typeof i!="undefined"]);this.SetHeight=function(e){this.height=e;return this};this.SetWidth=function(e){this.width=e;return this};this.SetSize=function(e){this.width=this.height=e;return this};this.offset=new z(0,0);this.SetOffset=function(e,t){this.offset.X=e;this.offset.Y=t;return this};this.Reposition=function(e){this.pos.X=e.X+this.offset.X;this.pos.Y=e.Y+this.offset.Y;return this};this.parent=null;this.SetParent=function(e){this.parent=e;return this};this.border=5;this.Draw=function(){t.save();t.beginPath();t.fillStyle=this.color;t.rotate(this.rotation*Math.PI/180);t.rect(this.pos.X,this.pos.Y,this.width,this.height);t.fill();t.lineWidth=this.border;t.strokeStyle=this.borderColor;t.stroke();t.closePath();t.restore();if(this.mouseover){if(!p){if($(this)){W(this.mouseover);p=true;this.over=true}}else{if(!$(this)){if(this.over){if(this.mouseout){W(this.mouseout);p=false;this.over=false}else{p=false;this.over=false}}}}}};return this},button:function(e,n,r){X.apply(this,[e,n,r]);this.txt="";this.font="20px Arial";i.push(this);this.SetText=function(e){this.txt=e;return this};this.SetBGColor=function(e){this.bgColor=e;return this};this.SetFontSize=function(e){this.fontSize=e;this.font=e+"px Arial";return this};this.SetPadding=function(e,t){this.padTop=e||10;this.padLeft=t||15;return this};this.Draw=function(){var e;t.save();t.font=this.font;e=t.measureText(this.txt).width;t.fillStyle=this.bgColor;if(this.padTop){t.fillRect(this.pos.X-this.padLeft,this.pos.Y-(this.fontSize-5)-this.padTop,e+(this.padLeft*2+1),this.fontSize+8+this.padTop)}t.fillStyle=this.color;t.fillText(this.txt,this.pos.X,this.pos.Y);t.restore()};return this},grid:function(e,n,r){X.apply(this,[e,n,r]);this.type="block";this.SetHeight=function(e){this.height=e;return this};this.SetWidth=function(e){this.width=e;return this};this.SetSize=function(e){this.width=this.height=e;return this};this.Draw=function(){if(this.type=="block"){t.beginPath();t.strokeStyle="#1e1e1e";t.lineWidth=.5;t.beginPath();var e=0;var n=0;for(var r=0;r<Math.round(t.canvas.width/this.width);r++){e=r*this.width;n=0;t.moveTo(e,n);t.lineTo(e,n+t.canvas.height)}for(var i=0;i<Math.round(t.canvas.height/this.height);i++){e=0;n=i*this.height;t.moveTo(e,n);t.lineTo(e+t.canvas.width,n)}t.stroke();t.closePath()}};return this}};e.onmousemove=function(e){d=e.pageX-n;v=e.pageY-r};var K=function(e,t,n,r){V.sq.apply(this,[e,t,n]);this.SetColor("black");this.whatLevel=15*Math.floor(Math.random()*(Nt.getLevel()+2)/2+1);this.SetBoss=function(e){this.isBoss=e;if(e){this.SetSize(10*15)}};this.SetSize(this.whatLevel);this.SetName("enemy");this.SetBorder(r);this.IsEnemy(true);this.collidable(true);this.StoreData(this.whatLevel*3);this.StoreData2(this.whatLevel*2);this.AdjEnemy=function(e,t,n,r){var i=15*Math.floor(Math.random()*(Nt.getLevel()+2)/2+1);var o=s.indexOf(this);s.splice(o,1);this.SetPos(new z(e,t));this.SetSize(i);this.SetBorder(n);this.SetBoss(r);this.Data=i*3;this.Data2=i*2;s.push(this)};this.isActive=function(){return this.pos.X>0||this.pos.Y>0};this.movementSpeed=20/this.whatLevel;this.Movement=function(){if(!this.isActive()){if(this.collider){this.collidable(false)}return}else if(!this.collider);{this.collidable(true)}var e=Nt.pos.X-this.pos.X;var t=Nt.pos.Y-this.pos.Y;var n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));this.pos.X+=this.movementSpeed*e/n;this.pos.Y+=this.movementSpeed*t/n}};var Q=function(){var e=new K(xt(),Tt(),1,"#333333"),t=new K(xt(),Tt(),1,"#333333"),n=new K(xt(),Tt(),1,"#333333"),r=new K(xt(),Tt(),1,"#333333"),i=new K(xt(),Tt(),1,"#333333"),s=new K(xt(),Tt(),1,"#333333");o.push(e,t,n,r,i,s);G()};var G=function(e){var t=200;var n=0;var r=0;var i=0;o.forEach(function(s){do{n=xt();r=Tt();i=Math.sqrt(Math.pow(n-Nt.pos.X,2)+Math.pow(r-Nt.pos.Y,2))}while(i<t);s.AdjEnemy(r,n,e)})};var Z=null;var tt=function(e,t,n,r,i,s,o){V.sq.apply(this,[0,0,0,true]);this.SetOffset(e.X,e.Y);this.SetColor(t);this.SetSize(n);this.SetName(r);this.SetBorder(i);this.StoreData(s);this.StoreData2(o);return this};var nt=function(){X.apply(this,[180,280,1]);this.name="character";var e=this;this.size=50;this.border=5;this.width=60;this.height=60;this.IsPlayer(true);this.hasWater=false;this.hasFire=false;this.hasAir=false;this.hasEarth=false;this.water=new tt(new z(this.border,this.border),"black",this.size/2-this.border,"water","#111111","??","#003EFF"),this.fire=new tt(new z(this.size/2+this.border,this.size/2+this.border),"black",this.size/2-this.border,"fire","#111111","??","#B22222"),this.air=new tt(new z(this.border,this.size/2+this.border),"black",this.size/2-this.border,"air","#111111","??","#FAEBD7"),this.earth=new tt(new z(this.size/2+this.border,this.border),"black",this.size/2-this.border,"earth","#111111","??","#6B4226");this.collidable(true);this.sound={attack:new audio.Voice("square",60,0,.1),enemyKill:new audio.Voice("square",90,0,1),takeDamage:new audio.Voice("sawtooth",150,.2,5)};this.stats={Level:1,FireLevel:0,WaterLevel:0,EarthLevel:0,AirLevel:0};this.attack=(new V.sq(this.pos.X,this.pos.Y,0,true)).SetColor("#000000").SetSize(this.size+this.border).SetBorder("#000000");this.VelocityX=0;this.VelocityY=0;this.Speed=10;this.Friction=.8;this.Keys=[];document.body.addEventListener("keydown",function(t){e.Keys[t.keyCode]=true});document.body.addEventListener("keyup",function(t){e.Keys[t.keyCode]=false});this.outline=(new V.sq(this.pos.X,this.pos.Y,-1,true)).SetColor("#000000").SetSize(this.size+this.border).SetBorder("#000000");this.SetMovement=function(e){if(!M){if(e=="left"&&_){if(this.VelocityX>-this.Speed){this.VelocityX--}}if(e=="up"&&P){if(this.VelocityY>-this.Speed){this.VelocityY--}}if(e=="right"&&D){if(this.VelocityX<this.Speed){this.VelocityX++}}if(e=="down"&&H){if(this.VelocityY<this.Speed){this.VelocityY++}}}};this.SetAttackType=function(e){Nt.outline.SetColor(e).SetBorder(e);Nt.attack.SetColor(e).SetBorder(e)};this.attackAlgorithm=function(){var e=Math.floor(this.stats.Level/500+1),t=e*10,n=Math.ceil(Math.sqrt((t-(e*11-11))*100)),r=Math.floor(Math.random()*100+1);if(r>n){return true}else{return false}};this.damageAlgorithm=function(){var e=Math.floor(this.stats.Level/1e3+1),t=e*10,n=Math.ceil(Math.sqrt(t*100)),r=Math.floor(Math.random()*n+1);return r};this.endFight=function(e){var t=Math.floor(this.stats.Level/500+1);this.stats.Level+=e;if(Math.floor(this.stats.Level/500+1)>t){console.log("lvlUp");this.currentHealth=this.getLevel()*500}};this.getLevel=function(){return Math.floor(this.stats.Level/500+1)};this.currentHealth=this.getLevel()*500;this.SetHealth=function(e){this.currentHealth=e};this.screenMinX=-50;this.screenMaxX=950;this.screenMinY=-50;this.screenMaxY=650;this.EdgeCheck=function(){};this.Input=function(){var e=false;if(this.Keys[65]||this.Keys[37]){this.SetMovement("left")}if(this.Keys[87]||this.Keys[38]){this.SetMovement("up")}if(this.Keys[68]||this.Keys[39]){this.SetMovement("right")}if(this.Keys[83]||this.Keys[40]){this.SetMovement("down")}if(this.Keys[32]||this.Keys[13]){if(this.space===false){this.space=true}}else{this.space=false}if(this.Keys[49]){if(this.hasWater){this.SetAttackType("#003EFF")}}if(this.Keys[50]){if(this.hasFire){this.SetAttackType("#B22222")}}if(this.Keys[51]){if(this.hasEarth){this.SetAttackType("#6B4226")}}if(this.Keys[52]){if(this.hasAir){this.SetAttackType("#FAEBD7")}}this.ProcessMovement()};this.ProcessMovement=function(){this.VelocityY*=this.Friction;this.pos.Y+=this.VelocityY;this.VelocityX*=this.Friction;this.pos.X+=this.VelocityX;if(S){audio.Delay(true);if(this.pos.X>this.screenMaxX){this.pos.X=10;N+=1;G(u);St(L[A*C+N])}else if(this.pos.X<this.screenMinX){this.pos.X=900;N-=1;G(u);St(L[A*C+N])}else if(this.pos.Y>this.screenMaxY){this.pos.Y=0;C+=1;G(u);St(L[A*C+N])}else if(this.pos.Y<this.screenMinY){this.pos.Y=600;C-=1;G(u);St(L[A*C+N])}}else if(y){audio.Delay(false);if(this.pos.X>this.screenMaxX){if(Ct.PlayerX<Ct.width-1){this.pos.X=10;Ct.PlayerX+=1;lt(Ct.width*Ct.PlayerX+Ct.PlayerY);G(u)}else{this.pos.X=900;var e=document.getElementById("instructions");e.innerHTML="Hint: Dont go that way trust me!"}}else if(this.pos.X<this.screenMinX){if(Ct.PlayerX>0){this.pos.X=900;Ct.PlayerX-=1;lt(Ct.width*Ct.PlayerX+Ct.PlayerY);G(u)}else{this.pos.X=50;var e=document.getElementById("instructions");e.innerHTML="Hint: Dont go that way trust me!"}}if(this.pos.Y>this.screenMaxY){if(Ct.PlayerY<Ct.height-1){this.pos.Y=0;Ct.PlayerY+=1;lt(Ct.width*Ct.PlayerX+Ct.PlayerY);G(u)}else{this.pos.Y=600;var e=document.getElementById("instructions");e.innerHTML="Hint: Dont go that way trust me!"}}if(this.pos.Y<this.screenMinY){if(Ct.PlayerY>0){this.pos.Y=600;Ct.PlayerY-=1;lt(Ct.width*Ct.PlayerX+Ct.PlayerY);G(u)}else{this.pos.Y=50;var e=document.getElementById("instructions");e.innerHTML="Hint: Dont go that way trust me!"}}}};this.attackDirection="right";this.Draw=function(){this.Input();var t=0;var n=0;if(Math.abs(e.VelocityX)>=Math.abs(e.VelocityY)){t=U(e.VelocityX);if(e.VelocityX>0){this.attack.SetOffset(this.size+this.border,0)}else if(e.VelocityX<0){this.attack.SetOffset(-this.attack.width,0)}}else{n=U(e.VelocityY);if(e.VelocityY>0){this.attack.SetOffset(0,this.size+this.border)}else if(e.VelocityY<0){this.attack.SetOffset(0,-this.attack.height)}}this.attack.Reposition(this.pos);var r=500;if(this.space){this.attack.Draw();var i=this.attack;if(!j){s.forEach(function(s){if(typeof s!="undefined"){if(J(i,s)){if(Nt.attackAlgorithm()){s.Data-=Nt.damageAlgorithm();s.pos.X+=t*r/s.width;s.pos.Y+=n*r/s.width;console.log(s.size);s.SetColor("#980002");console.log(s.Data);if(s.Data*Nt.getLevel()<0){s.SetPos(new z(-500,-500));e.sound.enemyKill.Trigger();Nt.endFight(s.Data2);if(s.width===150){yt()}}}}}})}j=true}else{if(j){this.sound.attack.Trigger();j=false;s.forEach(function(e){if(e.color==="#980002"){e.SetColor("black")}})}}if(Nt.currentHealth<0){if(!R){var o=(new V.button(190,390,101)).SetText("GAME OVER!").SetPadding(10,15).SetBGColor("#010000").SetColor("#EEE").SetFontSize(90);setTimeout(function(){R=true},500)}}this.outline.Reposition(this.pos).Draw();this.water.Reposition(this.pos).Draw();this.fire.Reposition(this.pos).Draw();this.air.Reposition(this.pos).Draw();this.earth.Reposition(this.pos).Draw();return this};return this};var rt=function(){this.guiBackground=(new V.sq(0,650,90)).SetWidth(960).SetHeight(75).SetColor("#333333").SetBorder("#333333");this.toggleWater=(new V.button(21,695,101)).SetText("1").SetPadding(10,15).SetBGColor("black").SetColor("black").SetFontSize(30).StoreData("#003EFF");this.WaterText=(new V.button(69,695,101)).SetText("Water").SetPadding(10,15).SetBGColor("#010000").SetColor("#010000").SetFontSize(30);this.toggleFire=(new V.button(189,695,101)).SetText("2").SetPadding(10,15).SetBGColor("black").SetColor("black").SetFontSize(30).StoreData("#B22222");this.FireText=(new V.button(237,695,101)).SetText("Fire").SetPadding(10,15).SetBGColor("#010000").SetColor("#010000").SetFontSize(30);this.toggleEarth=(new V.button(328,695,101)).SetText("3").SetPadding(10,15).SetBGColor("black").SetColor("black").SetFontSize(30).StoreData("#6B4226");this.EarthText=(new V.button(376,695,101)).SetText("Earth").SetPadding(10,15).SetBGColor("#010000").SetColor("#010000").SetFontSize(30);this.toggleAir=(new V.button(487,695,101)).SetText("4").SetPadding(10,15).SetBGColor("black").SetColor("black").SetFontSize(30).StoreData("#FAEBD7");this.AirText=(new V.button(535,695,101)).SetText("Air").SetPadding(10,15).SetBGColor("#010000").SetColor("#010000").SetFontSize(30);this.stats=(new V.button(875,695,101)).SetText("Stats").SetPadding(10,15).SetBGColor("#CCAC00").SetColor("black").SetFontSize(25);this.StatsListener=(new V.sq(862,667,89)).SetWidth(85).SetHeight(39).SetColor("#000").SetBorder("#000").on("click",it);return this};var ot=function(e,t,n,r,i,s){var o=this;this.outside=(new V.sq(e,t,n)).SetColor(r).SetSize(150).SetName(i).SetParent(o).collidable(true).StoreData(s);this.door=(new V.sq(e+43,t+80,n+1)).SetColor("gray").SetSize(70).SetName("door");this.buildText=(new V.button(e+35,t+58,n+1)).SetText(i).SetPadding(10,15).SetBGColor("#CCAC00").SetColor("black").SetFontSize(20);this.StoreData=function(e){o.Data=e};this.StoreData2=function(e){o.Data2=e};this.beaten=false;this.Beaten=function(){this.beaten=true;this.buildText.SetText("Beaten");this.outside.SetColor("gray");o.outside.collidable(false)};this.NewPos=function(e,t){o.outside.SetPos(new z(e,t));o.door.SetPos(new z(e+43,t+80));o.buildText.SetPos(new z(e+35,t+58));if(!this.isActive()){if(this.outside.collider){this.outside.collidable(false)}return}else if(!this.outside.collider);{this.outside.collidable(true)}};this.isActive=function(){if(this.beaten){return false}return this.outside.pos.X>0||this.outside.pos.Y>0}};var ut=function(e,t,n){var r=this;this.leaves=(new V.sq(e,t,n)).SetColor("green").SetSize(60).SetName("leaves");this.root=(new V.sq(e+20,t+60,n-1)).SetColor("#6B4226").SetWidth(20).SetHeight(62).SetName("root");this.blocking=(new V.sq(e+17,t+110,-6)).SetColor("#3f9b0b").SetBorder("#3f9b0b").SetSize(29).SetName("collidable").collidable(true);this.StoreData=function(e){r.Data=e};this.StoreData2=function(e){r.Data2=e};this.NewPos=function(e,t){r.leaves.SetPos(new z(e,t));r.root.SetPos(new z(e+20,t+60));r.blocking.SetPos(new z(e+17,t+101));if(!this.isActive()){if(this.blocking.collider){this.blocking.collidable(false)}return}else if(!this.blocking.collider);{this.blocking.collidable(true)}};this.isActive=function(){return this.blocking.pos.X>0||this.blocking.pos.Y>0}};var at=function(e,t){y=true;this.width=e;this.height=t;this.PlayerX=1;this.PlayerY=1;this.buildings={fireTemple:new ot(-500,-500,-1,"red","Dungeon","#B22222"),waterTemple:new ot(-500,-500,-1,"blue","Dungeon","#003EFF"),earthTemple:new ot(-500,-500,-1,"#6B4226","Dungeon","#6B4226"),airTemple:new ot(-500,-500,-1,"#FAEBD7","Dungeon","#FAEBD7")};for(var n=0;n<14;n++){for(var r=0;r<5;r++){var i=new ut(-500,-500,5);i.StoreData((n+1)*65-40);i.StoreData2(r*130);b.push(i)}}var s=Math.floor(e*t/4);this.buildings.fireTemple.StoreData(ft(0,s));this.buildings.waterTemple.StoreData(ft(s+1,s+s));this.buildings.earthTemple.StoreData(ft(s+s+1,s*3));this.buildings.airTemple.StoreData(ft(s*3+1,s*4));this.GetAll=function(){var e=this.width*this.height;for(var t=0;t<e;t++){var n=[new mt,new mt,vt(),new mt,new mt];w.push(n)}}};var Nt=new nt;var Ct=new at(3+(I-1),3+(I-1));Ct.GetAll();lt(Ct.width*Ct.PlayerX+Ct.PlayerY);var kt=new rt;pt();Q();console.log(a.length);var Lt=V.grid(0,0,-5).SetSize(20);var At=30;var Ot=0;var Mt=0;setInterval(function(){if(!R){Nt.border.rotation+=10;Mt=Ot/At;Ot++;t.canvas.width=t.canvas.width;f.innerHTML=Nt.currentHealth;l.innerHTML=Nt.getLevel()*500;c.innerHTML=Nt.getLevel();Y()}},1e3/At)}function W(){var e=document.getElementById("hard"),t=document.getElementById("easy");e.addEventListener("click",function(){X(2)},false);t.addEventListener("click",function(){X(1)},false)}function X(e){var t=document.getElementById("ChooseDifficulty"),n;I=e;t.innerHTML="<h4>In the land of <i>GEOATE</i> one shape made a checklist that changed his life forever.</h4><br> <table><tr><th>To Do List:</th></tr><tr><td>&#10003; Adventure into forest.</td></tr><tr><td>&#10175; Kill the things in forest.</td></tr><tr><td>&#10175; Find and make it through 4 dungeons.</td></tr><tr><td>&#10175; Obtain the power of all the elements.</td></tr><tr><td>&#10175; Become really really Famous.</td></tr><tr><td style='border-bottom: none'><button id='startgame'>Continue</button></td></tr></table>";n=document.getElementById("startgame");n.addEventListener("click",function(){document.body.style.background="#3f9b0b";t.style.display="none";z()},false)}var e=document.getElementById("ms"),t=e.getContext("2d"),n=e.offsetLeft,r=e.offsetTop,i=[],s=[],o=[],u="#111111",a=[],f=document.getElementById("healthbar"),l=document.getElementById("healthtotal"),c=document.getElementById("levelbar"),h=[],p=false,d,v,m,g,y,b=[],w=[],E=0,S,x=[],T=0,N=0,C=0,k=[],L=[],A,O=1,M,_=true,D=true,P=true,H=true,B=3,j,F,I=1,q=0,R;W()}

		</script>

	</head>
	<body>
	<h2 id="gametitle">Best Game Ever. Of All Time. Ever.</h2>
<canvas id="ms" width="960" height="720"></canvas>
<div id="stats"><div>Player Stats</div><table><tr><td>Combat level</td><td id="combat"></td><td>Experience</td><td id="xp"></td></tr><tr><td>Power</td><td id="power"></td><td>Accuracy</td><td id="acc"></td></tr><tr><td id="waterLabel">????</td><td id="water"></td><td id="fireLabel">????</td><td id="fire"></td></tr><tr><td id="earthLabel">????</td><td id="earth"></td><td id="airLabel">????</td><td id="air"></td></tr></table><button id="statsClose">Close</button></div>
<div id="instructions">Hint: Use arrow keys or a,s,w,d to move around, and spacebar to use your weapon.</div>
<div id="ChooseDifficulty">Welcome to <i>Best Game Ever. Of All Time. Ever.</i>, please choose the difficulty<br><button id="hard">Hard</button><button id="easy">Easy</button></div>
<div id="health">Health: <span id="healthbar"></span>/<span id="healthtotal"></span></div>
<div id="level">LVL: <span id="levelbar"></span></div>
	</body>
</html>
