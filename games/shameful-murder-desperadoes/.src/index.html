<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="initial-scale=1,width=device-width,user-scalable=no,viewport-fit=cover,maximum-scale=1,user-scalable=no"/><title>Shameful Murder Desperadoes</title><style>body,html{width:100%;height:100%;min-height:fill-available;margin:0;padding:0;background-color:#333}canvas{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.hide{display:none!important}.overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#33333370;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center}.overlay p{opacity:1;font-size:8vw;text-align:center}@keyframes fade{from{opacity:0;scale:0;scale:100% 1}to{opacity:1;scale:100% 1}}.asd p{animation-duration:3s;animation-name:fade}.t{color:#fff;font-weight:700}.btn{font-family:'Trebuchet MS','Lucida Sans Unicode','Lucida Grande','Lucida Sans',Arial,sans-serif;padding:10px;cursor:pointer}</style></head><body><div class="overlay hide" id="pause-overlay"><p>Game Paused</p><p>Press P to continue</p></div><div class="overlay hide" id="game-over"><p>You died!</p><p>You won!</p><button class="btn">Restart</button> <button class="btn">New Game +</button></div><div class="overlay asd"><p class="t">Shameful Murder Desperadoes</p><button class="btn" id="start-game">Start game</button></div><canvas id="game"></canvas><script>(()=>{"use strict";var t={167:(t,i)=>{Object.defineProperty(i,"t",{value:!0});let s=new AudioContext;i.default=(t=1,i=.05,e=220,h=0,n=0,r=.1,o=0,u=1,c=0,a=0,l=0,d=0,f=0,v=0,b=0,g=0,w=0,p=1,O=0,j=0,M=0)=>{let m=Math,k=2*m.PI,x=44100,_=c*=500*k/x/x,S=e*=(1-i+2*i*m.random(i=[]))*k/x,y=0,C=0,z=0,A=1,E=0,D=0,R=0,W=M<0?-1:1,q=k*W*M*2/x,B=m.cos(q),H=m.sin,L=H(q)/4,P=1+L,$=-2*B/P,F=(1-L)/P,I=(1+W*B)/2/P,T=-(W+B)/P,U=I,G=0,N=0,X=0,J=0;for(a*=500*k/x**3,b*=k/x,l*=k/x,d*=x,f=x*f|0,t*=.3,W=(h=x*h+9)+(O*=x)+(n*=x)+(r*=x)+(w*=x)|0;z<W;i[z++]=R*t)++D%(100*g|0)||(R=o?1<o?2<o?3<o?H(y**3):m.max(m.min(m.tan(y),1),-1):1-(2*y/k%2+2)%2:1-4*m.abs(m.round(y/k)-y/k):H(y),R=(f?1-j+j*H(k*z/f):1)*(R<0?-1:1)*m.abs(R)**u*(z<h?z/h:z<h+O?1-(z-h)/O*(1-p):z<h+O+n?p:z<W-w?(W-z-w)/r*p:0),R=w?R/2+(w>z?0:(z<W-w?1:(W-z)/w)*i[z-w|0]/2/t):R,M&&(R=J=U*G+T*(G=N)+I*(N=R)-F*X-$*(X=J))),q=(e+=c+=a)*m.cos(b*C++),y+=q+q*v*H(z**5),A&&++A>d&&(e+=l,S+=l,A=0),!f||++E%f||(e=S,c=_,A=A||1);(t=s.createBuffer(1,W,x)).getChannelData(0).set(i),(e=s.createBufferSource()).buffer=t,e.connect(s.destination),e.start()}},49:function(t,i,s){var e=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0}),i.upgrade=i.h=i.o=i.u=i.l=void 0;const h=e(s(167));i.l=()=>(0,h.default)(...[.6,,150,.05,,.05,,1.3,,,,,,3]);i.u=()=>(0,h.default)(...[.6,,150,.05,,.05,,1.3,,,,,,3]);i.o=()=>(0,h.default)(...[.1,.1,75,.03,.08,.17,1,1.88,7.83,,,,,.4]);i.h=()=>(0,h.default)(...[.3,,537,.02,.02,.22,1,1.59,-6.98,4.97]);i.upgrade=()=>(0,h.default)(...[,,539,0,.04,.29,1,1.92,,,567,.02,.02,,,,.04])},99:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0}),i.M=i.m=i.k=i._=void 0;const o=n(s(49)),u=s(913),c=r(s(624)),a=r(s(461)),l=n(s(279)),d=n(s(490)),f=s(367),v=r(s(594)),b=s(698),g=s(593),w=s(242);i._=0,i.k=1,i.m=2,i.M=3;class p extends a.default{constructor(t,i,s,e="white"){super(s),this.S=!1,this.C=1,this.level=0,this.state=new f.A,this.color="white",this.D=b.R.D[0],this.W=2,this.q=0,this.B=b.R.B[0],this.H=1,this.L=1,this.P=2,this.$=0,this.F=.1,this.I=!1,this.T=-1,this.U=.125,this.G=5,this.items=[new w.N,new w.X,new w.J],this.K=0,this.V=0,this.Y=1,this.opacity=1,this.Z=u.tt,this.it=[0,0],this.st=t,this.et=i,this.color=e,this.ht=this.D,this.nt=this.B,this.rt=b.R.rt[0]*u.ut.ot,this.resize(1)}get ct(){return 0===this.lt||0===this.et.direction[0]&&0===this.et.direction[1]}get size(){return this.it}get dt(){return!this.ct&&!this.I&&this.ht>=this.G&&this.ft-this.T>this.U}get vt(){return this.items[this.K]}get bt(){return this.vt.gt(this)}get wt(){return this.items.reduce(((t,i)=>t+i.level),this.level)}resize(t){this.Ot=this.Z.map(g.jt),this.rt*=t,this.it=[this.Ot[i.k][0],this.Ot[i.k][1]+this.Ot[i._][1]+this.Ot[i.M][1]]}Mt(t,i){if(this.nt>0&&this.ft-this.$>this.F){const s=this.V*this.Y;let e=Math.max(.25,t-s);e>=this.nt&&(e=Math.floor(this.nt)),this.nt=Math.floor(this.nt-e),this.$=this.ft;const h=d.kt(d.sub(this.st,i.st)),n=d.scale(h,1.25);this.xt={dir:n,duration:.25,_t:this.ft},this.St.dispatchEvent("CHARACTER_DAMAGE",{yt:e,st:this.st}),new v.default(this.St,this.st,v.default.Ct(e)),o.h()}this.nt<=0&&(this.zt(new f.At),i instanceof c.default&&(i.target=void 0))}Et(){this.remove()}zt(t){this.state.Dt(this),t.Rt(this),this.state=t}Wt([t]){this.C=this.x>=t?-1:1}upgrade(){this.level++;const t=this.level/b.qt;this.rt=d.Bt(...b.Ht.rt,t),this.B=d.Bt(...b.Ht.B,t),this.nt=this.B,this.D=d.Bt(...b.Ht.D,t),this.ht=this.D}move(t){const i=this.st;if(this.xt){const{dir:i,duration:s,_t:e}=this.xt;if(this.ft-e<s){const s=d.Bt(4,2,this.level/13);this.st=d.add(this.st,d.scale(i,u.ut.ot*s*t))}else this.xt=void 0}else super.move(t);this.Lt&&(this.st=i)}Pt(t){this.ht<this.D&&this.ft-this.q>this.P&&(this.ht=Math.min(this.ht+this.W*t,this.D)),this.nt<this.B&&this.ft-this.$>this.L&&(this.nt=Math.min(this.nt+this.H*t,this.B))}update(t){super.update(t),this.$t=this.et.direction,this.state.update(this,t),this.S||0===this.$t[0]||(this.C=Math.sign(this.$t[0])),this.move(t),this.Pt(t)}Ft(t){t.save(),t.globalAlpha=this.opacity,t.translate(...this.st),this.It(t),t.rotate(this.angle),this.Tt(t),this.Ut(t),this.Gt(t),this.Nt(t),this.vt.active&&this.vt.Ft(t),t.restore()}Ut(t){t.save();const[s,e]=this.Ot[i.k];l.rect(t,{w:s,Xt:e,fill:this.color,stroke:"black",strokeWidth:.5}),"black"===this.color&&(t.fillStyle="red"),t.font=.5*s+"px Roboto",t.textAlign="center",t.fillText(this.wt.toString(),0,0),this.ft>1&&this.ft-this.$<this.F&&l.rect(t,{w:s,Xt:e,fill:"red",opacity:.5}),t.restore()}Gt(t){t.save();const[s,e]=this.Ot[i._],[h,n]=this.Ot[i.k];t.translate(0,.5*-n-.5*e),this.I&&t.translate(0,.5*e),l.rect(t,{w:s,Xt:e,fill:"grey",strokeWidth:.5,stroke:"black"}),t.restore()}Tt(t){t.save();const i=d.Jt(3,8,this.ft%2/2);t.translate(0,i),this.Kt(t),t.scale(-1,1),this.Kt(t),t.restore()}Kt(t){const[s,e]=this.Ot[i.m],[h,n]=this.Ot[i.k];t.save(),t.translate(-h/1.5+.5*s,.5*-n),t.rotate(Math.PI/8),t.fillStyle="grey",t.strokeStyle="black",t.lineWidth=.5,t.fillRect(0,0,s,e),t.strokeRect(0,0,s,e),t.restore()}Nt(t){const i=.55/this.lt,s=!this.ct&&!this.I&&!this.St.paused,e=s?d.Jt(0,4,this.ft%i/i):0;t.save(),t.translate(0,-e),this.Qt(t),t.scale(-1,1),s&&t.translate(0,2*e-4),this.Qt(t),t.restore()}Qt(t){const[s,e]=this.Ot[i.M],[h,n]=this.Ot[i.k],r=.25*Math.abs(s-e);t.save(),t.translate(.5*-h+r,.5*n),this.I&&t.translate(0,.5*-e),t.fillStyle="grey",t.strokeStyle="black",t.lineWidth=.5,t.fillRect(0,0,s,e),t.strokeRect(0,0,s,e),t.restore()}It(t){if(this.nt<=0)return;t.save();const[i,s]=this.size,e=i,h=.15*u.ut.ot;t.globalAlpha=.8,t.save(),t.translate(0,.5*s+2*h);const n=this.ht/this.D;n<1&&l.Vt(t,e,h,n,"green");const r=this.nt/this.B;r<1&&(t.translate(0,1.5*h),l.Vt(t,e,h,r,"red")),t.restore(),t.restore()}Yt(t){t.save(),t.globalAlpha=.25,l.Zt(t,this.vt.ti,void 0,"black"),t.restore()}}i.default=p},913:(t,i,s)=>{Object.defineProperty(i,"t",{value:!0}),i.ii=i.tt=i.si=i.ut=i.ei=i.hi=i.ni=i.ri=i.oi=i.ui=i.canvas=void 0;const e=s(607),h=s(593),n=document.getElementById("pause-overlay");i.oi=document.getElementById("game-over"),i.ri=document.getElementById("start-game"),i.ni={},i.hi={},i.ei=[0,0],i.ut={ci:[32,18],ai:32/18,ot:32,li:[window.innerWidth,window.innerHeight],di:[32,18].map((t=>32*t))},i.si={fi:[.17,1.25],vi:[.25,2],bi:[.13,.88],gi:[6,40],wi:[.6,1.3],pi:[30,60]},i.tt=[[.4,.4],[.6,.8],[.17,.57],[.22,.44]],i.ii=function(){i.canvas=document.getElementById("game"),i.ui=i.canvas.getContext("2d"),i.canvas.addEventListener("mousemove",(t=>{i.ei[0]=t.offsetX,i.ei[1]=t.offsetY})),onresize=()=>r(),onmousedown=t=>{i.hi[t.button]=!0},onmouseup=t=>{i.hi[t.button]=!1},oncontextmenu=t=>t.preventDefault(),onkeydown=t=>{const s=t.key.toLowerCase();"p"===s&&(e.St.paused=!e.St.paused,n.classList.toggle("hide")),i.ni[s]=!0},onkeyup=t=>i.ni[t.key.toLowerCase()]=!1,onblur=onfocus=()=>{i.ni={}},r(),i.ri.onclick=()=>{var t;null===(t=i.ri.parentElement)||void 0===t||t.classList.add("hide"),e.St.ji.Oi()};const t=i.oi.children[2],s=i.oi.children[3];t.onclick=()=>{e.St.ji.Oi()},s.onclick=()=>{e.St.ji.Oi(!0)}};const r=()=>{const[t,s]=[window.innerWidth,window.innerHeight];i.ut.li=[t,s];const[n,r]=i.ut.ci,o=i.ut.ot;i.ut.ot=Math.min(Math.floor(t/n),Math.floor(s/r)),i.ut.di=[i.canvas.width,i.canvas.height]=(0,h.jt)(i.ut.ci),i.si.vi=(0,h.jt)(i.si.fi),i.si.gi=(0,h.jt)(i.si.bi),i.si.pi=(0,h.jt)(i.si.wi);const u=i.ut.ot/o;0!==u&&e.St.resize(u)}},601:(t,i)=>{Object.defineProperty(i,"t",{value:!0}),i.Mi=void 0,i.Mi={mi:"#2EC4B6",fi:"orange",wi:"brown",ki:"#D27D2D"}},120:(t,i,s)=>{Object.defineProperty(i,"t",{value:!0}),i.xi=void 0;const e=s(913),h=s(490);i.xi=class{constructor(t){this.keys=t}get _i(){return e.ni[1]}get Si(){return e.ni[2]}get yi(){return e.ni[3]}get Ci(){return!!e.hi[0]}get zi(){return!!e.hi[2]}get Ai(){return e.ei}get Ei(){return e.ni[this.keys[0]]}get Di(){return e.ni[this.keys[1]]}get left(){return e.ni[this.keys[2]]}get right(){return e.ni[this.keys[3]]}get o(){return e.ni[this.keys[4]]}get direction(){const t=[0,0];return this.Ei&&(t[1]-=1),this.Di&&(t[1]+=1),this.Ei||this.Di||(t[1]=0),this.left&&(t[0]-=1),this.right&&(t[0]+=1),this.left||this.right||(t[0]=0),(0,h.kt)(t)}get json(){const t=["up","down","left","right","roll","action1","action2","equip1","equip2","equip3"];return(this.Ci||this.zi)&&t.push("actionPos"),t.reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:this[i]||void 0})),{})}}},624:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0}),i.Ri=void 0;const o=r(s(99)),u=s(461),c=n(s(490)),a=s(593),l=s(242);var d;!function(t){t[t.Wi=0]="MELEE",t[t.qi=1]="ARCHER",t[t.Bi=2]="MIXED"}(d=i.Ri||(i.Ri={}));const f={_i:!1,Si:!1,yi:!1,o:!1,Ci:!1,zi:!1,Ai:[0,0],direction:[0,0]};class v extends o.default{constructor(t,i,s,e,h){switch(super(t,Object.assign({},f),i,s),this.Hi=d.Wi,this.Li=!1,this.Pi=!1,this.$i=0,this.Fi=5,this.H=.5,this.Hi=e,e){case d.Wi:case d.Bi:this.items=[new l.N];break;case d.qi:this.items=[new l.X]}for(;h;)Math.random()>.25?this.upgrade():this.items[0].upgrade(),h--;this.items.forEach((t=>{t.Ii*=this.Fi,t.ti>=this.$i&&(this.$i=t.ti)})),this.$i*=1.5}get type(){return u.Ui.Ti}Mt(t,i){super.Mt(t,i),(i.type===u.Ui.Gi||Math.random()>.9)&&(this.target=i)}Ni(){if(this.et=Object.assign({},f),!this.target)return;if(!this.target.Xi)return this.target=void 0,void(this.Li=!1);const[t,i]=this.Ji();t>=this.$i?(this.et.direction=c.kt(i),this.et.o=this.Pi&&this.ht>=.5*this.D&&this.Hi===d.Wi&&Math.random()>=.975):this.target.et.Ci&&this.Pi&&Math.random()>=.75?(this.et.direction=[(0,a.Ki)([-1,1]),(0,a.Ki)([-1,1])],this.et.o=!0):this.bt&&(this.et.Ai=this.target.st,this.et.Ci=!0)}update(t){this.Ni(),super.update(t)}Ji(){if(!this.target)return;const t=c.sub(this.target.st,this.st);return[c.Qi(t),t]}}i.default=v},461:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i};Object.defineProperty(i,"t",{value:!0}),i.Ui=void 0;const r=n(s(490)),o=n(s(279));var u;!function(t){t[t.Vi=0]="entity",t[t.ki=1]="projectile",t[t.Yi=2]="hitbox",t[t.Ti=3]="enemy",t[t.Gi=4]="player"}(u=i.Ui||(i.Ui={}));i.default=class{constructor(t){this.Xi=!0,this.ft=0,this.st=[0,0],this.$t=[0,0],this.rt=0,this.lt=1,this.angle=0,this.Zi=!0,this.St=t,this.St.add(this)}get type(){return u.Vi}get size(){return[0,0]}get x(){return this.st[0]}get y(){return this.st[1]}get w(){return this.size[0]}get Xt(){return this.size[1]}get rect(){return[this.x-this.w/2,this.y-this.Xt/2,this.w,this.Xt]}get Lt(){const[t,i]=this.st,[s,e]=this.size.map((t=>.5*t));return t-s<=0||t+s>=this.St.ts||i-e<=0||i+e>=this.St.ss}resize(t){}remove(){this.Xi=!1,this.St.remove(this)}move(t){const i=this.rt*this.lt*t,s=r.scale(this.$t,i);this.st=r.add(this.st,s)}update(t){this.ft+=t}Ft(t){}es(t){this.Zi&&(t.save(),t.strokeStyle="red",t.lineWidth=1,t.strokeRect(...this.rect),t.translate(...this.st),o.Zt(t,2,"red"),t.restore())}}},279:(t,i)=>{function s(t,i){const{w:s,Xt:e,fill:h,strokeWidth:n,stroke:r,hs:o=!0,opacity:u,offset:c}=i;t.save(),o&&t.translate(-s/2,-e/2),c&&t.translate(...c),null!=u&&(t.globalAlpha=u),h&&(t.fillStyle=h,t.fillRect(0,0,s,e)),(n||r)&&(t.strokeStyle=r||t.strokeStyle,t.lineWidth=n||1,t.strokeRect(0,0,s,e)),t.restore()}Object.defineProperty(i,"t",{value:!0}),i.Zt=i.Vt=i.rect=void 0,i.rect=s,i.Vt=function(t,i,e,h,n){t.save(),s(t,{w:i,Xt:e,fill:"white",stroke:"black",strokeWidth:.5}),t.fillStyle=n,t.fillRect(-i/2,-e/2,h*i,e),t.restore()},i.Zt=function(t,i,s,e){t.save(),t.beginPath(),t.arc(0,0,i,0,2*Math.PI),s&&(t.fillStyle=s,t.fill()),e&&(t.strokeStyle=e,t.stroke()),t.closePath(),t.restore()}},1:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i};Object.defineProperty(i,"t",{value:!0});const r=n(s(461));class o extends r.default{constructor(t,i,s,e){super(t.St),this.disabled=!1,this.st=s,this.ns=t,this.it=i,this.rs=e}get type(){return r.Ui.Yi}get size(){return this.it}update(t){if(super.update(t),this.disabled)return;const[i,s,e,h]=this.rect;for(const t of this.St.entities){if(!t.Zi||t===this.ns||t===this)continue;const[n,r,o,u]=t.rect;if(i<n+o&&i+e>n&&s<r+u&&s+h>r){if(!this.rs(t))return void(this.disabled=!0)}}}}i.default=o},607:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0}),i.St=void 0;const o=s(913),u=s(601),c=n(s(279)),a=(n(s(490)),r(s(147))),l=s(242);i.St=new a.default,(0,o.ii)();new l.N,new l.X,new l.J;let d=performance.now();const f=()=>{const t=performance.now(),s=(t-d)/1e3;d=t,function(t){const[i,s]=o.ut.di;c.rect(t,{w:i,Xt:s,fill:u.Mi.mi,hs:!1});const e=o.ut.ot;t.save(),t.fillStyle=u.Mi.mi;for(let i=1;i<=o.ut.ci[0];i+=1)t.globalAlpha=.125,t.beginPath(),t.moveTo(0,0),t.lineTo(0,s),t.stroke(),t.translate(e,0);t.restore(),t.save(),t.fillStyle=u.Mi.mi;for(let s=1;s<=o.ut.ci[1];s+=1)t.globalAlpha=.125,t.beginPath(),t.moveTo(0,0),t.lineTo(i,0),t.stroke(),t.translate(0,e);t.restore()}(o.ui),i.St.update(s),i.St.Ft(o.ui),requestAnimationFrame(f)};f()},129:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0});const o=n(s(49)),u=s(913),c=s(120),a=n(s(624)),l=s(461),d=n(s(490)),f=r(s(251)),v=s(367),b=r(s(594)),g=s(593),w=s(242),p=[new w.N,new w.X,new w.J];i.default=class{constructor(t){this.os=1,this.state=new O,this.us=!1,this.St=t}get cs(){const[t,i]=u.ut.ci;return(0,g.jt)([.5*t,i-2])}get ls(){const[t,i]=u.ut.ci;return(0,g.jt)([.5*t,3])}get ds(){switch(!0){case this.os<4:return 2;case this.os<10:return 3;case this.os<12:return 4;default:return 5}}get fs(){return 13===this.os}zt(t){this.state.Dt(this),t.Rt(this),this.state=t}vs(){const t=new c.xi("wsad ");this.Gi=new f.default(this.cs,t,this.St),this.Gi.ht=this.Gi.D}bs(t){const i=Math.floor(this.os/4),s=new a.default(this.ls,this.St,"black",null!=t?t:this.fs||Math.random()>.75?a.Ri.Wi:a.Ri.qi,this.os+1);return s.V=Math.floor(.5*i),s.Z=s.Z.map((t=>d.scale(t,1+.5*i))),s.resize(1),s.Pi=i>1,s.B*=1.125,s.nt=s.B,s.Hi===a.Ri.qi?(s.vt.Ii*=.5,s.vt.gs*=1.5):s.lt+=.25,s.target=this.Gi,s}ws(){const t=new Set,i=this.ds;for(;t.size<i;){const i=(0,g.ps)();if(!t.has(i)){t.add(i);const s=Math.ceil(.5*this.os+Math.random()*this.os*.25),e=new a.default(i,this.St,(0,g.Os)(),Math.random()>.75?a.Ri.Wi:a.Ri.qi,s);e.nt=e.B=Math.floor(.75*e.B),e.vt.h=Math.floor(.75*e.vt.h),s>=5&&(e.Pi=Math.random()>.85,e.target=Math.random()>=.85?this.Gi:void 0)}}}js(){this.St.entities.clear(),this.St.Ms(),this.St.entities.add(this.Gi),this.Gi.nt=this.Gi.B,this.Gi.st=this.cs,this.Gi.zt(new v.A)}Oi(t=!1){console.log("restart()"),this.os=0,this.ks=void 0,this.St.entities.clear(),this.St.Ms(),t?this.js():this.vs(),this.ws(),this.zt(new j),this.us=!0}xs(){if(this.fs)return void this.zt(new S);this.os=Math.min(this.os+1,13),this.ks=void 0,this.ws();let t="";if(this.os%4==0)this.Gi.upgrade(),t="Level Up";else{const i=(this.os-1)%this.Gi.items.length;this.Gi.items[i].upgrade();t=`${["Sword","Bow","Shield"][i]} upgraded`}o.upgrade(),new b.default(this.St,this.Gi.st,b.default._s(t)),this.zt(new j)}update(t){this.state.update(this,t)}Ft(t){this.us&&(t.save(),this.Ss(t),this.St.debug&&(this.ys(t),this.St.entities.forEach((i=>{i.es(t)})),t.restore()))}Ss(t){const i=this.Gi,s=u.ut.ot,e=[{Cs:t=>{t.save(),t.translate(.5*-s,.5*s),t.rotate(.5*d.zs),p[0].Ft(t),t.restore()},selected:0==i.K},{Cs:t=>{t.save(),t.translate(.125*-s,.125*-s),t.rotate(.5*d.zs),p[1].Ft(t),t.restore()},selected:1==i.K},{Cs:t=>{t.save(),t.rotate(.5*d.zs),t.scale(-.8,.8),p[2].Ft(t),t.restore()},selected:2==i.K}];t.save(),t.translate(s,u.ut.di[1]-2*s),e.forEach(((i,e)=>{t.save(),t.translate((s+5)*e,0),t.globalAlpha=.5,t.fillStyle="white",t.fillRect(0,0,s,s),t.globalAlpha=1,i.selected&&(t.lineWidth=4,t.strokeStyle="green",t.strokeRect(0,0,s,s)),t.fillStyle="black",t.fillText(`${e+1}`,5,12),t.save(),t.translate(.5*s,.5*s),t.scale(.8,.8),i.Cs(t),t.restore(),t.restore()})),t.restore()}ys(t){t.save(),t.fillStyle="black",t.font="14px Roboto";[`Map: ${u.ut.ci.join("x")}`,`Res: ${u.ut.li.join("x")}`,`Canvas: ${u.ut.di.join("x")}`,`Tile: ${u.ut.ot}`,`Entities: ${this.St.entities.size}`,`Level: ${this.os}`].forEach(((i,s)=>{t.fillText(i,10,50+16*(s+1))})),t.restore()}};class O{constructor(){this.ft=0}Rt(t){}Dt(t){}update(t,i){this.ft+=i}}class j extends O{constructor(){super(...arguments),this.As=1.1,this.Es=0,this.Ds=!1,this.Rs=!1}Rt(t){this.Rs=t.os>0&&t.os%4==0||t.fs,console.log(t),console.log({Rt:this.Rs})}update(t,i){super.update(t,i),this.Es?this.ft-this.Es>this.As&&t.zt(new _):t.Gi.Xi?(this.Ds=void 0!==t.ks&&!t.ks.Xi,0===t.St.count[l.Ui.Ti]&&(this.Rs&&!this.Ds?t.ks=t.bs():t.xs())):this.Es=this.ft}}const[M,m,k,x]=u.oi.children;class _ extends O{Rt(t){t.us=!1,t.St.paused=!0,M.classList.remove("hide"),k.classList.remove("hide"),m.classList.add("hide"),x.classList.add("hide"),u.oi.classList.remove("hide")}Dt(t){const[i,s,e,h]=u.oi.children;u.oi.classList.add("hide"),i.classList.add("hide"),e.classList.add("hide"),t.St.paused=!1}}class S extends O{Rt(t){t.us=!1,t.St.paused=!0;const[i,s,e,h]=u.oi.children;i.classList.add("hide"),e.classList.remove("hide"),s.classList.remove("hide"),h.classList.remove("hide"),u.oi.classList.remove("hide")}Dt(t){u.oi.classList.add("hide"),m.classList.add("hide"),x.classList.add("hide"),t.St.paused=!1}}},490:(t,i)=>{function s(t){return Math.hypot(...t)}Object.defineProperty(i,"t",{value:!0}),i.Jt=i.Bt=i.Ws=i.qs=i.angle=i.sub=i.add=i.scale=i.kt=i.Qi=i.Bs=i.zs=i.Hs=void 0,i.Hs=function(t,i,s){return Math.min(Math.max(t,i),s)},i.zs=Math.PI/2,i.Bs=2*Math.PI,i.Qi=s,i.kt=function(t){const i=s(t)||1;return t.map((t=>t/i))},i.scale=function(t,i){return t.map((t=>t*i))},i.add=function(t,i){return[t[0]+i[0],t[1]+i[1]]},i.sub=function(t,i){return[t[0]-i[0],t[1]-i[1]]},i.angle=function(t){return Math.atan2(t[1],t[0])},i.qs=function(t){return[Math.cos(t),Math.sin(t)]},i.Ws=function(t,i){const[s,e]=t,h=Math.cos(i),n=Math.sin(i);return[s*h-e*n,s*n+e*h]},i.Bt=function(t,i,s){return t+(i-t)*s},i.Jt=function(t,i,s){return s<=.5?t+2*s*(i-t):i-2*(s-.5)*(i-t)}},251:function(t,i,s){var e=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0});const h=e(s(99)),n=s(461),r=s(698);class o extends h.default{constructor(){super(...arguments),this.B=r.Ht.B[0],this.D=r.Ht.D[0]}get type(){return n.Ui.Gi}}i.default=o},133:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0});const o=r(s(99)),u=s(913),c=s(601),a=n(s(461)),l=n(s(279)),d=r(s(1)),f=n(s(490)),v=r(s(594)),b=s(593),g=[.8,.06];class w extends a.default{constructor(t,i,s,e){super(t.St),this.Ls=new Set,this.opacity=1,this.Ps=0,this.$s=2,this.st=t.st,this.$t=i,this.Fs=this.ns=t,this.rt=s*u.ut.ot,this.it=(0,b.jt)(g),this.h=e,this.angle=f.angle(i),this.Yi=new d.default(this,[this.w,this.Xt],this.st,this.rs.bind(this)),this.Ls.add(this.ns),this.Ls.add(this)}resize(t){this.it=(0,b.jt)(g)}get type(){return a.Ui.ki}get size(){return this.it}get w(){return this.size[1]}get Xt(){return this.size[1]}Is(t){this.h*=2,this.$t=t,this.angle=f.angle(this.$t)}rs(t){var i;if(this.Ls.has(t))return!0;if(this.Ls.add(t),t instanceof w)return!!t.Ts||(new v.default(this.St,this.st,{text:"Deflected",Us:"white",Gs:"black"}),t.Ls.add(this),t.Is([0,-1]),this.Is([0,1]),!1);if(t instanceof d.default)return new v.default(this.St,this.st,{text:"Deflected",Us:"white",Gs:"black"}),this.Ls.delete(this.ns),this.ns=t.ns,this.Is([0,1]),!0;if(t instanceof o.default){if(t.I)return new v.default(this.St,this.st,v.default.Ns()),!0;t===this.Fs&&console.log("Return to sender achievement"),t.Mt(this.h,this.ns)}return this.Ts=t,this.Ps=this.ft,this.Xs=f.sub(this.st,t.st),null===(i=this.Yi)||void 0===i||i.remove(),delete this.Yi,!1}update(t){var i;return super.update(t),this.Ts?!this.Ts.Xi||this.ft-this.Ps>this.$s?void this.remove():void(this.st=f.add(this.Ts.st,this.Xs)):this.Yi?(this.move(t),void(this.Lt?(null===(i=this.Yi)||void 0===i||i.remove(),this.remove()):(this.Yi.st=this.st,this.Yi.update(t)))):(this.opacity-=4*t,void(this.opacity<=0&&this.remove()))}Ft(t){t.save(),t.translate(...this.st),t.rotate(this.angle),l.rect(t,{w:40,Xt:3,opacity:this.opacity,stroke:"black",strokeWidth:.25,fill:c.Mi.ki}),t.restore()}}i.default=w},147:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0});const o=n(s(490)),u=s(913),c=s(461),a=r(s(129));i.default=class{constructor(){this.entities=new Set,this.count={[c.Ui.Ti]:0,[c.Ui.Yi]:0,[c.Ui.Gi]:0,[c.Ui.ki]:0,[c.Ui.Vi]:0},this.paused=!1,this.debug=!1,this.Js=new EventTarget,this.ji=new a.default(this)}get ts(){return u.ut.di[0]}get ss(){return u.ut.di[1]}add(t){this.count[t.type]++,this.entities.add(t)}remove(t){this.count[t.type]--,this.entities.delete(t)}Ms(){this.count={[c.Ui.Ti]:0,[c.Ui.Yi]:0,[c.Ui.Gi]:0,[c.Ui.ki]:0,[c.Ui.Vi]:0}}resize(t){this.entities.forEach((i=>{i.st=o.scale(i.st,t),i.resize(t)}))}addEventListener(t,i){this.Js.addEventListener(t,(t=>{i(t.detail)}))}dispatchEvent(t,i){this.Js.dispatchEvent(new CustomEvent(t,{detail:i}))}update(t){this.paused||(this.entities.forEach((i=>i.update(t))),this.ji.update(t))}Ft(t){t.save(),this.entities.forEach((i=>i.Ft(t))),this.ji.Ft(t),t.restore()}}},367:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0}),i.At=i.Ks=i.Qs=i.Vs=i.Ys=i.A=i.Zs=void 0;const o=n(s(49)),u=n(s(99)),c=r(s(1)),a=n(s(490)),l=r(s(133)),d=r(s(594)),f=s(242);class v{constructor(){this.ft=0,this.name="CharacterState"}Rt(t){}Dt(t){}update(t,i){this.ft+=i}}i.Zs=v;class b extends v{constructor(){super(...arguments),this.name="Idle"}te(t){t.et._i?t.K=0:t.et.Si?t.K=1:t.et.yi&&(t.K=2)}ie(t){return t instanceof f.N?new p:t instanceof f.X?new O:t instanceof f.J?new w:void 0}se(t){return t.et.Ci&&t.bt?this.ie(t.vt):t.et.o&&t.dt?new g:void 0}update(t,i){super.update(t,i),this.te(t);const s=this.se(t);s&&t.zt(s)}}i.A=b;class g extends v{constructor(){super(...arguments),this.name="Roll"}get ee(){return 2*a.Bs}Rt(t){o.o(),t.lt=2,t.I=!0,t.ht-=t.G,t.q=t.ft,this.direction=t.et.direction}Dt(t){t.angle=0,t.I=!1,t.lt=1,t.T=t.ft}update(t,i){super.update(t,i),t.$t=this.direction,t.angle+=this.ee*i*t.C;Math.abs(t.angle)>=a.Bs&&t.zt(new b)}}i.Ys=g;class w extends v{constructor(){super(...arguments),this.name="Blocking",this.he=.25,this.ne=!0}Rt(t){t.lt=t.vt.lt,t.V=t.vt.V,t.S=t.vt.active=!0,this.re=(t.vt.w||0)/2}Dt(t){t.lt=1,t.V=1,t.S=!1,t.vt.active=!1,t.vt.offset=[0,0]}update(t,i){super.update(t,i),t.Wt(t.et.Ai),t.vt.offset=[this.re*t.C,0],this.ne&&t.ft-t.$<this.ft&&(console.log("Shield detected damage!"),this.ne=!1),!t.et.Ci&&this.ft>=this.he&&t.zt(new b)}}i.Vs=w;class p extends v{constructor(){super(...arguments),this.name="Attacking",this.oe=0,this.ue=new Set}Rt(t){if(!(t.vt instanceof f.N))throw new Error("Invalid weapon!");t.S=!0,t.Wt(t.et.Ai);const i=.5*t.vt.ce,s=a.angle(a.sub(t.et.Ai,t.st))+a.zs;t.vt.ae=[this.ce,this.oe]=[s+i*t.C,s+i*-t.C],t.vt.active=!0,t.vt.le=this.oe,t.vt.offset=[0,-t.Ot[u.k][1]],t.vt.de=t.C,o.u(),this.fe=new c.default(t,[t.vt.size[1],t.vt.size[1]],a.add(t.st,t.vt.offset),(i=>!(i instanceof u.default&&!this.ue.has(i))||(this.ue.add(i),i.I?new d.default(t.St,t.st,d.default.Ns()):i.Mt(t.vt.h,t),!!t.vt.ve)))}Dt(t){this.fe.remove(),t.S=!1,t.vt.be=t.ft,t.vt.active=!1,t.vt.offset=[0,0],t.vt.le=0}update(t,i){super.update(t,i);const s=this.ft/t.vt.ge;t.vt.le=a.Bt(this.oe,this.ce,s);const e=a.Ws(a.sub(t.vt.offset,[0,.5*t.vt.size[1]]),t.vt.le);this.fe.st=a.add(t.st,e),s>=1&&(t.vt.we&&t.et.Ci?(o.u(),this.ue.clear(),this.ft=0):t.zt(new b))}}i.Qs=p;class O extends v{constructor(){super(...arguments),this.name="Shooting"}Rt(t){t.vt.active=!0,t.vt.offset=[0,.5*-t.Xt];const i=a.sub(t.st,t.et.Ai);t.vt.le=-a.zs+a.angle(i),t.vt.angle=a.Bs/4,t.lt=.5,t.C=1,t.S=!0}Dt(t){t.vt.be-=.25*t.vt.Ii,t.vt.angle=t.vt.le=0,t.vt.active=!1,t.vt.offset=[0,0],t.lt=1,t.S=!1}pe(t){o.l(),t.vt.be=t.ft,new l.default(t,a.kt(a.sub(t.et.Ai,t.st)),t.vt.gs,t.vt.h)}update(t,i){super.update(t,i);const s=a.sub(t.st,t.et.Ai);t.vt.le=-a.zs+a.angle(s),t.bt&&this.pe(t),t.et.Ci||t.zt(new b)}}i.Ks=O;i.At=class extends v{constructor(){super(...arguments),this.duration=1}Rt(t){t.lt=0,t.Xi=t.Zi=!1}Dt(t){t.lt=1,t.Zi=t.Xi=!0}update(t,i){super.update(t,i),t.opacity=a.Bt(.5,0,this.ft/this.duration),this.ft>=this.duration&&t.Et()}}},594:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i},r=this&&this.i||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(i,"t",{value:!0});const o=r(s(461)),u=n(s(490));class c extends o.default{constructor(t,i,{text:s="",Us:e="",Gs:h=""}={}){super(t),this.Oe=1,this.Zi=!1,this.st=i,this.text=s,this.$t=[0,-1],this.rt=20,this.Us=e,this.Gs=h}static _s(t){return{text:t,Us:"lightgreen",Gs:"lightgreen"}}static Ct(t){return{text:t.toString(),Us:"red",Gs:"black"}}static Ns(){return{text:"dodged",Us:"white"}}update(t){super.update(t),this.move(t),this.ft>=this.Oe&&this.remove()}Ft(t){t.save(),t.font="20px Arial",t.globalAlpha=u.Bt(0,1,1-this.ft/this.Oe),this.Us&&(t.fillStyle=this.Us,t.fillText(this.text,...this.st)),this.Gs&&(t.strokeStyle=this.Gs,t.strokeText(this.text,...this.st)),t.restore()}}i.default=c},698:(t,i)=>{Object.defineProperty(i,"t",{value:!0}),i.je=i.Me=i.me=i.R=i.Ht=i.qt=void 0,i.qt=4,i.Ht={rt:[200,300],D:[20,30],B:[10,30]},i.R={rt:[4,5.5],D:[10,30],B:[10,18]},i.me={h:[3,9],ke:[1,2],ce:[Math.PI,2*Math.PI]},i.Me={h:[2,6],Ii:[.75,.5],gs:[20,35]},i.je={lt:[.3,.75],V:[1,i.qt]}},593:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i};Object.defineProperty(i,"t",{value:!0}),i.ps=i.Os=i.Ki=i.jt=void 0;const r=s(913),o=n(s(490));function u(t){return o.scale(t,r.ut.ot)}function c(t){return t[Math.floor(Math.random()*t.length)]}i.jt=u,i.Ki=c,i.Os=function(){return c(["orange","yellow","salmon","lightblue"])},i.ps=function(){const[t,i]=r.ut.ci;return u([2+Math.floor(Math.random()*(t-2)),2+Math.floor(6*Math.random())])}},242:function(t,i,s){var e=this&&this.v||(Object.create?function(t,i,s,e){void 0===e&&(e=s);var h=Object.getOwnPropertyDescriptor(i,s);h&&!("get"in h?!i.t:h.writable||h.g)||(h={p:!0,get:function(){return i[s]}}),Object.defineProperty(t,e,h)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),h=this&&this.O||(Object.create?function(t,i){Object.defineProperty(t,"default",{p:!0,value:i})}:function(t,i){t.default=i}),n=this&&this.j||function(t){if(t&&t.t)return t;var i={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&e(i,t,s);return h(i,t),i};Object.defineProperty(i,"t",{value:!0}),i.J=i.X=i.N=void 0;const r=s(913),o=s(601),u=n(s(279)),c=n(s(490)),a=s(698),l=a.Me.h[0];i.N=class{constructor(){this.level=0,this.active=!1,this.h=a.me.h[0],this.Ii=.125,this.be=0,this.we=!1,this.ve=!1,this.ce=a.me.ce[0],this.ge=.35,this.color=o.Mi.fi,this.ke=1,this.le=0,this.offset=[0,0],this.ae=[0,0],this.de=1}get size(){return c.scale(r.si.vi,this.ke)}get ti(){return Math.abs(this.offset[1])+this.size[1]}get Xt(){return this.size[1]}gt(t){return this.be+this.Ii<t.ft}upgrade(){this.level++;const t=this.level/a.qt;this.ve=t>=.5,this.we=t>=1,t<1?(this.h=Math.round(c.Bt(...a.me.h,t)),this.ce=c.Bt(...a.me.ce,t),this.ke=c.Bt(...a.me.ke,t)):this.h+=.25}Ft(t){this.active&&this.xe(t),t.save(),t.rotate(this.le),t.translate(...this.offset);const[i,s]=this.size,e=.25*s,h=.25*e;t.save(),t.translate(.5*-i,-s),u.rect(t,{w:i,Xt:s,fill:this.color,stroke:"black",strokeWidth:1,hs:!1}),t.fillStyle="black",t.translate(0,s-e),t.fillRect(0,0,i,e),t.restore(),t.fillStyle="black",t.translate(-i-h,-e),t.fillRect(0,0,e+i,h),t.restore()}xe(t){const[i,s]=this.size;for(let e=0;e<1;e+=.1/this.level){t.save();const h=c.Bt(this.le,this.ae[1],e);t.rotate(h),t.translate(...this.offset),t.translate(-i,-s),t.globalAlpha=c.Bt(.125,.075,e),t.fillStyle=this.color,t.fillRect(0,0,2*i,s),t.restore()}}};i.X=class{constructor(){this.level=0,this.active=!1,this.h=l,this.ti=200,this.Ii=.75,this.be=0,this.gs=a.Me.gs[0],this.le=0,this.offset=[0,0],this.angle=0}get size(){return r.si.gi}gt(t){return this.be+this.Ii<t.ft}upgrade(){this.level++;const t=this.level/a.qt;t<=1?(this.h=Math.round(c.Bt(...a.Me.h,t)),this.gs=c.Bt(...a.Me.gs,t),this.Ii=c.Bt(...a.Me.Ii,t)):(this.gs+=2.5,this.h+=.25)}Ft(t){t.save(),t.rotate(this.le),t.translate(...this.offset),t.rotate(this.angle),t.save(),t.strokeStyle="brown",t.lineWidth=this.size[0],this._e(t),t.scale(1,-1),this._e(t),t.restore(),u.Zt(t,2,"lime"),t.restore()}_e(t){const i=.25*this.size[1];t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(0,.5*-this.size[1]),t.lineTo(i,.5*-this.size[1]-i),t.stroke(),t.closePath(),t.restore()}};i.J=class{constructor(){this.level=0,this.active=!1,this.h=0,this.le=0,this.offset=[0,0],this.angle=0,this.lt=.3,this.V=1,this.ti=0,this.Ii=2,this.be=0}get size(){return r.si.pi}get w(){return this.size[0]}get Xt(){return this.size[1]}gt(t){return this.be+this.Ii<t.ft}upgrade(){this.level++;const t=this.level/a.qt;this.lt=Math.max(1,c.Bt(...a.je.lt,t)),t<1&&(this.V=c.Bt(...a.je.V,t))}Ft(t){t.save(),t.rotate(this.le),t.translate(...this.offset),t.rotate(this.angle),u.rect(t,{w:this.w,Xt:this.Xt,fill:o.Mi.wi,stroke:"black",strokeWidth:5}),u.rect(t,{w:this.w,Xt:this.Xt,stroke:"grey",strokeWidth:4}),t.restore()}}}},i={};(function s(e){var h=i[e];if(void 0!==h)return h.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,s),n.exports})(607)})();</script></body></html>