(()=>{"use strict";var e={d:(s,i)=>{for(var t in i)e.o(i,t)&&!e.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:i[t]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};e.d({},{R:()=>T});const s={plough:'<div class="plough">\n  <div class="plough-bod"></div>\n  <div class="plough-head"></div>\n</div>',poop:'<div class="poop">\n  <div class="fert"></div>\n</div>',seed:'<div class="bean">\n  <div class="bean-one"></div>\n</div>',h2o:'<div class="water">\n  <div class="drop"></div>\n</div>',pick:'<div class="basket">\n  <div class="handle"></div>\n  <div class="bottom"></div>\n</div>'},i='<div class="water">\n  <div class="drop"></div>\n</div>',t='<div class="dirt">\n  <div class="ground"></div>\n</div>',d='<div class="dirt">\n  <div class="ploughed-soil"></div>\n</div>',o='<div class="dirt">\n  <div class="pooped-soil"></div>\n</div>',n='<div class="coin">\n  <div class="coin-front"></div>\n</div>',a='<div class="crown">\n  <div class="crown-center"></div>\n</div>',l='<div class="time">\n  <div class="time-keep"></div>\n</div>',c={wheat:{cropName:"wheat",isBlocked:!1,growTime:3500,howThirsty:2,seed:'<div class="wheat-seed">\n    <div class="wheat seed"></div>\n  </div>',seedling:'<div class="wheat-seedling">\n    <div class="w-leaf1"></div>\n    <div class="w-leaf2"></div>\n    <div class="w-leaf3"></div>\n    <div class="w-leaf4"></div>\n  </div>',ready:'<div class="wheat-ready">\n    <div class="wheat-head">\n      <div class="wheat-leaf"></div>\n      <div class="wheat-nub1"></div>\n      <div class="wheat-nub1"></div>\n      <div class="wheat-nub1"></div>\n      <div class="wheat-nub1"></div>\n      <div class="wheat-nub1"></div>\n    </div>\n  </div>',droppedSeeds:2,buyPrice:1,sellPrice:2},corn:{cropName:"corn",isBlocked:!0,growTime:4500,howThirsty:4,seed:'<div class="corn-seed">\n    <div class="corn seed"></div>\n  </div>',seedling:'<div class="corn-seedling">\n    <div class="corn-leaf1"></div>\n    <div class="corn-leaf2"></div>\n  </div>',ready:'<div class="corn-ready">\n    <div class="corn-head"></div>\n    <div class="corn-leaf"></div>\n    <div class="corn-leaf one"></div>\n    <div class="corn-nub"></div>\n  </div>',droppedSeeds:4,buyPrice:2,sellPrice:3},carrot:{cropName:"carrot",isBlocked:!0,growTime:6e3,howThirsty:4,seed:'<div class="carrot-seed">\n    <div class="carrot seed"></div>\n  </div>',seedling:'<div class="carrot-seedling">\n    <div class="c-leaf1"></div>\n    <div class="c-leaf2"></div>\n    <div class="c-leaf3"></div>\n</div>',ready:'<div class="carrot-ready">\n    <div class="carrot-head"></div>\n    <div class="c-leaf3"></div>\n  </div>',droppedSeeds:2,buyPrice:3,sellPrice:6},onion:{cropName:"onion",isBlocked:!0,growTime:2500,howThirsty:3,seed:'<div class="onion-seed">\n    <div class="onion seed"></div>\n  </div>',seedling:'<div class="onion-seedling">\n    <div class="o-leaf"></div>\n</div>',ready:'<div class="onion-ready">\n    <div class="onion-head"></div>\n    <div class="onion-body"></div>\n    <div class="onion-nub"></div>\n  </div>',droppedSeeds:5,buyPrice:1,sellPrice:3}},r={playerAct:s.pick,seedType:c.wheat,cash:0,stock:{wheatSeeds:1,cornSeeds:0,carrotSeeds:0,onionSeeds:0},goal:100,score:{"cash made":0,"plants grown":0,land:0,"time spent":0},finalScore:function(){const e=this.score["cash made"]+this.score["plants grown"],s=document.getElementById("timer-value").innerText;let i=Math.abs(parseInt(s.slice(2))-60),t=this.score["time spent"];60===i&&(t++,i=0);const d=i>10?":":":0",o=t.toString()+d+i.toString();return{"total points":e+1e4*this.score.land,"time spent":o}}},h={class:"game-tutorial",h1:"Game Play",p:["click on the soil squares","they tell you what you need to do","the pick, allows you to air the soil","the poop, allows you to fertilize the soil","choose any of the seeds to plant your crop, different seeds have different stats","the water drop, allows you to water your crop","the basket, allows you to sell your crop"],h2:"Your goal is to buy this land while paying your tithe/taxes on time!"},v={class:"game-over",h1:"TU MORTUS ES",h2:"Occisi estis. Vos postulo ut tributa!",p:"translation: You are killed. You need to pay taxes!",h3:"Your score: "},p={class:"game-won",h1:"Vincis!",h2:"Lucratus es opes!",p:"translation: You have gained wealth!",h3:"Your score: "};function u(e,s,i,t,d){const o=document.createElement(e),n=t.toString();return Array.isArray(s)?o.classList.add(...s):""!==s&&o.classList.add(s),""!==i&&o.setAttribute("id",i),n.includes("<")?o.innerHTML=n:o.innerText=n,d.appendChild(o),o}function m(e,s){0===!e.childElementCount&&e.removeChild(e.lastElementChild),e.innerHTML=s}function y(e,s){document.getElementById(e).innerText=s}function g(){let e=60;!function s(){const i=document.getElementById("timer-value");e--,i.innerText="0:"+(e<10?"0":"")+String(e),e>0?(setTimeout(s,1e3),e<11&&(i.style.color="red")):0===r.cash?(b(v,T),f(),w("game-over")):(e=60,i.style.color="black",g(),function(){const e=r.cash;let s=Math.floor(e-.23*e);r.cash=s,y("cash-value",s)}(),r.score["time spent"]++)}()}function w(e){document.getElementById(e).addEventListener("click",(()=>{T.innerHTML="",window.location.reload()}))}function b(e,s){const i=u("div","overlay",e.class,"",s);Object.entries(e).forEach((e=>{"class"!==e[0]&&(Array.isArray(e[1])?e[1].forEach((e=>{u("p","game-text","",e,i)})):u(e[0],"","",e[1],i))}))}function f(){const e=document.getElementsByTagName("h3")[0],s=r.finalScore();Object.entries(s).forEach((s=>{const i=s[0]+": "+s[1].toString();u("p","score-data",s[0],i,e)}))}class P{constructor(e,i,t){this.classList=e,this.text=i,this.btn=u("button","act",e,i,t),this.btn.addEventListener("click",(()=>{switch(this.classList){case"plough-btn":r.playerAct=s.plough;break;case"poop-btn":r.playerAct=s.poop;break;case"seed-btn":r.playerAct=s.seed;break;case"h2o-btn":r.playerAct=s.h2o;break;case"pick-btn":r.playerAct=s.pick}}))}}class k{constructor(e,n,a,l){this.plant=e,this.positionX=n,this.positionY=a,this.soilClass=["soil"],this.seedPlanted=r.seedType,this.soilAct=t,this.counter=0,this.isGrowing=!1,this.soil=u("div","soil",n,e,l,this.width,this.height),this.soil.addEventListener("click",(()=>{var e,n;event.detail&&1!=event.detail||(this.soilAct===t&&this.soil.childElementCount<2&&u("div",["req","plough-me"],s.plough,s.plough,this.soil),this.soilAct===t&&'<div class="plough">\n  <div class="plough-bod"></div>\n  <div class="plough-head"></div>\n</div>'===r.playerAct?this.updateSoil(this,d,"poop-me",s.poop):this.soilAct===d&&'<div class="poop">\n  <div class="fert"></div>\n</div>'===r.playerAct?this.updateSoil(this,o,"seed-me",s.seed):this.soilAct===o&&'<div class="bean">\n  <div class="bean-one"></div>\n</div>'===r.playerAct?(this.seedPlanted=r.seedType,this.updateSoil(this,this.seedPlanted.seed,"water-me",s.h2o)):this.soilAct===this.seedPlanted.seed&&r.playerAct===i?(this.isGrowing||(this.soil.classList.add("watered"),this.soil.removeChild(this.soil.lastChild),this.isGrowing=!0,setTimeout(this.growPlant,this.seedPlanted.growTime,this,this.seedPlanted.howThirsty,this.seedPlanted.seedling,s.h2o)),this.counter===this.seedPlanted.howThirsty&&this.updateSoilAct(this.seedPlanted.seedling)):this.soilAct===this.seedPlanted.seedling&&r.playerAct===i?(this.isGrowing||(this.soil.classList.add("watered"),this.soil.removeChild(this.soil.lastChild),this.isGrowing=!0,setTimeout(this.growPlant,this.seedPlanted.growTime,this,this.seedPlanted.howThirsty,this.seedPlanted.ready,s.pick)),this.counter===this.seedPlanted.howThirsty&&this.updateSoilAct(this.seedPlanted.ready)):this.soilAct===this.seedPlanted.ready&&'<div class="basket">\n  <div class="handle"></div>\n  <div class="bottom"></div>\n</div>'===r.playerAct&&(console.log("hi"),this.updateSoil(this,t,"plough-me",s.plough),n=this.seedPlanted.sellPrice,r.cash+=n,r.score["cash made"]+=n,y("cash-value",parseInt(r.cash)),e=this.seedPlanted,Object.entries(r.stock).forEach((s=>{s[0].includes(e.cropName)&&(r.stock[s[0]]=s[1]+e.droppedSeeds)})),this.soil.classList.remove("collect")))}))}updateSeedPlanted(e){this.seedPlanted=e}updateSoil(e,s,i,t){m(e.soil,s),u("div",["req",i],"",t,e.soil),console.log(t,"updateSoil"),this.updateSoilAct(s)}updateSoilAct(e){this.soilAct=e}growPlant(e,i,t,d){e.soil.classList.remove("watered"),e.counter<i?(u("div",["req","water-me"],s.h2o,s.h2o,e.soil),e.counter++):(m(e.soil,t),console.log(d),u("div",["req","water-me"],d,d,e.soil),e.counter=0),e.seedPlanted.ready===e.soilAct&&(console.log(e.soilAct),e.soil.classList.add("collect"),r.score["plants grown"]++),e.isGrowing=!1}}class A{constructor(e,i,t,d){this.id=e,this.classes=i,this.selectedCrop=t,this.isBlocked=t.isBlocked,this.btn=u("button",i,"",t.ready,d),this.btn.addEventListener("click",(()=>{!function(e){const s=document.getElementById("seed-btn");console.log(e),s.innerHTML=e.ready}(t),r.seedType=t,r.playerAct=s.seed}))}}const T=document.getElementById("page"),E=[],S=window.screen.width;function L(e,s){const i=document.createElement("div");i.classList.add("soil-tbl");for(let d=0;d<s;d++){let s=document.createElement("div");s.classList.add("soil-r"),s.style.gridRow=d+1,E.push([]);for(let i=0;i<e;i++)E[d].push(new k(t,i,d,s));i.appendChild(s)}T.appendChild(i)}b({class:"game-menu",h1:"Saeculum XIII agricultura",h2:"Carpere usquam ut incipere!",p:"translation: Click anywhere to begin!"},T);const C=document.getElementsByClassName("overlay")[0];C.addEventListener("click",(()=>{T.removeChild(C),b(h,T),function(){const e=document.getElementById("game-tutorial");e.addEventListener("click",(()=>{T.removeChild(e),S>1200?L(10,8):S>768&&S<1200?L(9,8):S>600&&S<768?L(8,8):S>375&&S<600?L(6,7):L(4,8),function(e){const s=u("table","action-tbl","act-bar","",T);Object.entries(e).forEach((e=>new P(e[0]+"-btn",e[1],s)))}(s),function(e){const s=u("table","selection-tbl","","",T);Object.entries(e).forEach((e=>new A(e[0],"seed-choice-btn",e[1],s)))}(c),function(e){const s=u("div","player-info","","",T);e.cash;const i={cash:[n,e.cash],tithe:[a,"23%"],timer:[l,60]};var t,d,o;t=s,d=i,o="p-divs",Object.entries(d).forEach((e=>{const s=u("div","p-parent","","",t);console.log(e[0],e[1][0],e[1][1]),u("p",o,e[0]+"-symbol",e[1][0],s),u("p",o,e[0]+"-value",e[1][1],s)}))}(r),g(),function(){const e=[n+r.goal],s=u("button","buy-land","","buy your land!",document.getElementsByClassName("player-info")[0]);u("p","","",e,s),s.addEventListener("click",(()=>{r.cash>=100?(r.score.land=1,b(p,T),f(),w("game-won")):alert(" You don't have enough coins peasant")}))}()}))}()}))})();