!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t,i){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=h(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,i||e)}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n,i){return(u="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var o,r=h(e,t);if(r){if((o=Object.getOwnPropertyDescriptor(r,t)).set)return o.set.call(i,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(i,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(i,t,o)}else p(i,t,n);return!0})(e,t,n,i)}function c(e,t,n,i,o){if(!u(e,t,n,i||e)&&o)throw new Error("failed to set property");return n}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var w=function(){function e(){v(this,e),this.eventStack={}}return g(e,[{key:"createEvent",value:function(e){this.eventStack[e]=new Event(e)}},{key:"dispatchEvent",value:function(e){window.dispatchEvent(this.eventStack[e])}}]),e}();window.eventSystem=new w;var b=function(){function e(){v(this,e),this.up=!1,this.down=!1,this.left=!1,this.right=!1,this.enter=!1,this.space=!1,this.mute=!1,this.w=!1,this.a=!1,this.s=!1,this.d=!1,this.initialize()}return g(e,[{key:"initialize",value:function(){var e=this;window.addEventListener("keydown",(function(t){switch(t.keyCode){case 38:e.up=!0;break;case 40:e.down=!0;break;case 37:e.left=!0;break;case 39:e.right=!0;break;case 32:e.space=!0;break;case 13:e.enter=!0;break;case 87:e.w=!0;break;case 65:e.a=!0;break;case 83:e.s=!0;break;case 68:e.d=!0}})),window.addEventListener("keyup",(function(t){switch(t.keyCode){case 38:e.up=!1;break;case 40:e.down=!1;break;case 37:e.left=!1;break;case 39:e.right=!1;break;case 32:e.space=!1;break;case 13:e.enter=!1;break;case 87:e.w=!1;break;case 65:e.a=!1;break;case 83:e.s=!1;break;case 68:e.d=!1}}))}}]),e}();window.inputSystem=new b,D=document.getElementById("my_canvas"),C=document.getElementById("framerate"),nurdyStats=document.getElementById("nurdy_stats"),nurdyStats2=document.getElementById("nurdy_stats2"),nurdyStats3=document.getElementById("nurdy_stats3"),boss1Sprite=document.getElementById("boss1"),window.onerror=function(e){return console.log(e)},eventSystem.createEvent("onBossDeath"),eventSystem.createEvent("onLevelComplete"),eventSystem.createEvent("onLevelExit"),eventSystem.createEvent("onStartNextLevel"),eventSystem.createEvent("onIntroComplete"),eventSystem.createEvent("onOutroComplete"),eventSystem.createEvent("onlifeLost"),eventSystem.createEvent("onPlayerDeath"),eventSystem.createEvent("onLevelRestart"),eventSystem.createEvent("onGameComplete"),eventSystem.createEvent("onTutorialComplete"),eventSystem.createEvent("onGameStart"),eventSystem.createEvent("onShowEndGameScene");var S,x,C,D,P,T=!1,M=0,O=0,j=0,k=60,I=1/60,E=1,A=0,L=0;halfSecond=0,quarterSecond=0,lives=3;var R=[],_=[],B=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),p(this,"getAngle",(function(){return Math.atan2(t.y,t.x)})),p(this,"getMag",(function(){return Math.sqrt(t.x*t.x+t.y*t.y)})),p(this,"setAngle",(function(e){var n=t.getMag();t.x=Math.cos(e)*n,t.y=Math.sin(e)*n})),p(this,"setMag",(function(e){var n=t.getAngle();t.x=Math.cos(n)*e,t.y=Math.sin(n)*e})),p(this,"add",(function(n){return new e(t.x+n.x,t.y+n.y)})),p(this,"subtract",(function(n){return new e(t.x-n.x,t.y-n.y)})),p(this,"multiply",(function(n){return new e(t.x*n,t.y*n)})),p(this,"divide",(function(n){return new e(t.x/n,t.y/n)})),p(this,"addTo",(function(e){t.x=t.x+e.x,t.y=t.y+e.y})),p(this,"subtractWith",(function(e){t.x=t.x-e.x,t.y=t.y-e.y})),p(this,"multiplyWith",(function(e){t.x=t.x*e,t.y=t.y*e})),p(this,"divideBy",(function(e){t.x=t.x/e,t.y=t.y/e})),this.x=n,this.y=i};p(B,"addition",(function(e,t){return new B(e.x+t.x,e.y+t.y)})),p(B,"subtraction",(function(e,t){return new B(e.x-t.x,e.y-t.y)})),p(B,"multiplcation",(function(e,t){return new B(e.x*t,e.y*t)})),p(B,"division",(function(e,t){return new B(e.x/t,e.y/t)})),Math.Rad2Deg=180/Math.PI,Math.Deg2rad=Math.PI/180;var G,z=(G=new WeakMap,function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B(0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new B(0,0),o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];v(this,e),G.set(this,{position:n,rotation:0}),this.gravityActive=o,this.gravity=new B(0,-.1),this.velocityCap=50,this.velocity=i,this.frictionActive=r,this.frictionCoefficient=1,this.objectId=performance.now().toString()+Math.round(1e3*Math.random()),this.drawGizmos=!1,this.acceleration=new B(0,0),this.layer="default",this.disableCollisionDetection=!1,this.executables=["applyGravity","applyAcceleration","applyVelocity","applyFriction"],this.timers={},this.renderList=t,t.push(this)}return g(e,[{key:"getProp",value:function(e){return G.get(this)[e]}},{key:"setProp",value:function(e,t){var n=G.get(this);G.set(this,y(y({},n),{},p({},e,t)))}},{key:"applyVelocity",value:function(){var e=this.getProp("position");e=e.add(this.velocity),this.setProp("position",e)}},{key:"applyGravity",value:function(){this.gravityActive&&this.velocity.getMag()<this.velocityCap&&(this.velocity=this.velocity.add(this.gravity))}},{key:"applyFriction",value:function(){this.frictionActive&&(this.velocity=this.velocity.multiply(this.frictionCoefficient))}},{key:"applyAcceleration",value:function(){this.velocity=this.velocity.add(this.acceleration),this.velocity.getMag()>this.velocityCap&&this.velocity.setMag(this.velocityCap)}},{key:"addTimer",value:function(e,t){this.timers[e]=t}},{key:"executeScripts",value:function(){var e=this;this.executables.forEach((function(t){"string"==typeof t?e[t]():t&&t.constructor&&t.call&&t.apply&&t(e)})),this.drawGizmos&&this.renderGizmos(),this.renderer(this),this.collisionDetection()}},{key:"renderer",value:function(){}},{key:"renderGizmos",value:function(){}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>0)this.selfDestructTimer=new N,this.selfDestructDelay=e,this.executables.push("selfDestruct");else for(var t=0;t<this.renderList.length;t++)this.renderList[t].objectId===this.objectId&&(this.renderList.splice(t,1),this.onDestroy&&this.onDestroy(this))}},{key:"selfDestruct",value:function(){if(this.selfDestructTimer&&this.selfDestructTimer.getDuration()>this.selfDestructDelay){for(var e=0;e<this.renderList.length;e++)this.renderList[e].objectId===this.objectId&&(this.renderList.splice(e,1),this.onDestroy&&this.onDestroy(this));this.selfDestructTimer=void 0,this.selfDestructDelay=void 0}}},{key:"addCollider",value:function(e){this.collider=y({type:"circle",radius:15,onCollision:function(){},uncolide:!1,computeBoundryCollision:!1},e)}},{key:"collisionDetection",value:function(){if(this.collider&&(this.collider.computeBoundryCollision&&(this.velocity=(i=!1,o=new B((t=this).position.x,t.position.y),r=new B(t.velocity.x,t.velocity.y),n=t.collider.radius,(t.position.x>=M/2-n||t.position.x<=-M/2+n)&&(r.x=-r.x,o.x=t.position.x>=M/2-n?M/2-(n+1):-M/2+(n-1),t.position=o,i=!0),(t.position.y>=O/2-n||t.position.y<=-O/2+n)&&(r.y=-r.y,o.y=t.position.y>=O/2-n?O/2-(n+1):-O/2+(n-1),t.position=o,i=!0),!0===i?r:t.velocity)),!this.disableCollisionDetection))for(var e=0;e<this.renderList.length;e++)if(this.objectId!==this.renderList[e].objectId&&this.layer===this.renderList[e].layer){if(this.renderList[e].disableCollisionDetection)return;J(this,this.renderList[e])&&(this.collider.uncolide&&this.renderList[e].collider.uncolide&&K(this,this.renderList[e]&&this.renderList[e]),this.collider.onCollision(this,this.renderList[e]),this.renderList[e]&&this.renderList[e].collider.onCollision(this.renderList[e],this))}var t,n,i,o,r}},{key:"onDestroy",value:function(){}},{key:"position",get:function(){return G.get(this).position},set:function(e){var t=G.get(this);G.set(this,y(y({},t),{},{position:e,rotation:e.getAngle()}))}},{key:"rotation",get:function(){return G.get(this).rotation},set:function(e){var t=G.get(this),n=t.position;n.setAngle(e),G.set(this,y(y({},t),{},{position:n,rotation:n.getAngle()}))}}]),e}()),H=function(e){o(i,e);var t=a(i);function i(){var e,o,r,a,s,u,h,d,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B(0,0),m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/2,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"enemyProjectile",S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;v(this,i);var C=new B(0,0);return C.setMag(m),C.setAngle(g),c((e=l(d=t.call(this,y,p)),f(i.prototype)),"velocity",C,e,!0),c((o=l(d),f(i.prototype)),"alias",b,o,!0),c((r=l(d),f(i.prototype)),"layer","projectile",r,!0),c((a=l(d),f(i.prototype)),"damage",S,a,!0),c((s=l(d),f(i.prototype)),"renderer",(function(e){x.save(),x.beginPath(),x.fillStyle="white",x.arc(e.position.x,e.position.y,w,0,2*Math.PI),x.fill()}),s,!0),n((u=l(d),f(i.prototype)),"addCollider",u).call(u,{type:"circle",radius:w,onCollision:function(e,t){"playerProjectile"===e.alias&&"player"===t.alias||"enemyProjectile"===e.alias&&"enemy"===t.alias||e.alias===t.alias||"enemyProjectile"===t.alias||"playerProjectile"===t.alias||e.destroy()},uncolide:!1}),n((h=l(d),f(i.prototype)),"destroy",h).call(h,5e3),d}return i}(z),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B(0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};v(this,e),this.position=n,this.renderList=t,this.executables=[i],this.objectId=performance.now().toString()+Math.round(1e3*Math.random()),t.push(this)}return g(e,[{key:"selfDestruct",value:function(){if(this.selfDestructTimer&&this.selfDestructTimer.getDuration()>this.selfDestructDelay){for(var e=0;e<this.renderList.length;e++)this.renderList[e].objectId===this.objectId&&(this.renderList.splice(e,1),this.onDestroy&&this.onDestroy(this));this.selfDestructTimer=void 0,this.selfDestructDelay=void 0}}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>0)this.selfDestructTimer=new N,this.selfDestructDelay=e,this.executables.push("selfDestruct");else for(var t=0;t<this.renderList.length;t++)this.renderList[t].objectId===this.objectId&&(this.renderList.splice(t,1),this.onDestroy&&this.onDestroy(this))}},{key:"onDestroy",value:function(){}},{key:"executeScripts",value:function(){var e=this;this.executables.forEach((function(t){"string"==typeof t?e[t]():t&&t.constructor&&t.call&&t.apply&&t(e)}))}}]),e}();function W(){this.start_time=Date.now(),this.getDuration=function(){return Date.now()-this.start_time},this.reset=function(){this.start_time=Date.now()}}function N(){this.start_time=A,this.getDuration=function(){return A-this.start_time},this.reset=function(){this.start_time=A}}var V=function(){function e(){v(this,e),this.timeOutArray=[]}return g(e,[{key:"newTimeOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now().toString();return this.timeOutArray.push({timer:new N,delay:t,onTimeOut:e,timeOutId:n}),n}},{key:"clearTimeOut",value:function(e){this.timeOutArray=this.timeOutArray.filter((function(t){return!t.timeOutId===e}))}},{key:"update",value:function(){for(var e=0;e<this.timeOutArray.length;e++)this.timeOutArray[e].timer.getDuration()>=this.timeOutArray[e].delay&&(this.timeOutArray[e].onTimeOut(),this.timeOutArray.splice(e,1))}}]),e}();window.timeOut=new V;var q=function(){function e(){v(this,e),this.intervalArray=[]}return g(e,[{key:"newInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=performance.now().toString();return this.intervalArray.push({timer:new N,maxIterations:n,iterationCount:0,onInterval:e,duaration:t,intervalId:performance.now().toString(),onIntervalEnd:i}),o}},{key:"clearInterval",value:function(e){intervalId&&(console.log(e,this.intervalArray.filter((function(t){return!t.intervalId===e}))),this.intervalArray=this.intervalArray.filter((function(t){return!t.intervalId===e})))}},{key:"update",value:function(){for(var e=0;e<this.intervalArray.length;e++)if(this.intervalArray[e].timer.getDuration()>=this.intervalArray[e].duaration){var t=this.intervalArray[e];t.onInterval(),t.timer.reset(),t.iterationCount+=1,-1!==t.maxIterations&&t.iterationCount>=t.maxIterations&&(t.onIntervalEnd&&t.onIntervalEnd(),this.intervalArray.splice(e,1))}}}]),e}();window.interval=new q;var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M/2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O/2,n=Math.random(),i=n>=.5?n*e:-n*e,o=(n=Math.random())>=.5?n*t:-n*t;return new B(i,o)};function J(e,t){var n=Math.abs(e.position.x-t.position.x),i=Math.abs(e.position.y-t.position.y);return n*n+i*i<=(e.collider.radius+t.collider.radius)*(e.collider.radius+t.collider.radius)}function K(e,t){for(var n=new W;J(e,t)&&n.getDuration()<5e3;){var i=new B(0,0);i.setMag(1);var o=Math.atan2(e.position.y-t.position.y,e.position.x-t.position.x);i.setAngle(o+Math.PI),t.position=t.position.add(i)}}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x.save(),x.translate(e.position.x,e.position.y),x.beginPath(),x.fillStyle=t,x.arc(0,0,e.collider.radius,0,2*Math.PI),n?x.fill():x.stroke(),x.restore()}var X=function(){var e=new z(R);return e.alias="player",e.type="player",e.health=10,e.healthCap=10,e.layer="projectile",e.damage=1,e.position=new B(0,-O/3),e.renderer=Y,e.executables.unshift(oe),e.executables.push((function(e){return re(e,new B(-M/2+120,20),200,["black","white"])})),e.addTimer("firerate",new N),e.addTimer("superrate",new N),e.firerate=100,e.superrate=5e3,e.timers.superrate.start_time=-(A+5e3),e.executables.push((function(e){x.save(),x.translate(-M/2+20,-O/2+10),x.beginPath(),x.fillStyle="grey";var t=Math.round(e.timers.superrate.getDuration())/40;t=t<250?t:250,x.fillRect(0,0,t,10),x.restore()})),e.addCollider({type:"circle",radius:15,uncolide:!0,onCollision:function(e,t){"enemy"!==t.alias&&"enemyProjectile"!==t.alias||(e.disableCollisionDetection||(e.health-=1,t.velocity=new B(-t.velocity.x,-t.velocity.y),e.disableCollisionDetection=!0,timeOut.newTimeOut((function(){e.disableCollisionDetection=!1}),200)),e.health<=0&&e.destroy())}}),e.onDestroy=function(e){eventSystem.dispatchEvent("onPlayerDeath")},e};function Y(e){x.save(),x.translate(e.position.x,e.position.y),x.rotate(e.shootDirection||0),x.beginPath(),x.fillStyle="white",x.moveTo(25,0),x.lineTo(-10,-15),x.lineTo(0,0),x.lineTo(-10,15),x.lineTo(25,0),x.fill(),hundredthOfSecond%2==1&&(x.strokeStyle="red",x.beginPath(),x.moveTo(0,0),x.lineTo(-10,3),x.moveTo(0,0),x.lineTo(-10,-3),x.moveTo(0,0),x.lineTo(-15,0),x.stroke()),x.restore()}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=new z(R,U(),U(3,3));return i.alias="enemy",i.layer="projectile",i.health=100,i.healthCap=100,i.executables.push(re),i.addTimer("firerate",new N),i.spawnsPerRound=n,i.phase=1,i.firerate=t,i.addCollider({type:"circle",radius:35,uncolide:!1,computeBoundryCollision:!0,onCollision:function(e,t){"playerProjectile"===t.alias&&(e.health-=t.damage||1,e.health<=e.healthCap/2&&1===e.phase&&(e.spawnsPerRound=Math.round(1.5*e.spawnsPerRound),e.phase=2),e.health<=0&&(e.destroy(),R=R.filter((function(e,t){return"player"===e.alias})),eventSystem.dispatchEvent("onBossDeath")))}}),i.renderer=function(e){x.save(),x.translate(e.position.x,e.position.y),x.beginPath(),x.fillStyle="white",x.arc(0,0,e.collider.radius,0,2*Math.PI),x.fill(),x.restore()},i.executables.unshift((function(t){if(t.timers.firerate&&t.timers.firerate.getDuration()>(t.firerate||1e3)){t.timers.firerate.reset();for(var n=2*Math.PI/i.spawnsPerRound,o=0,r=0;r<i.spawnsPerRound;r++){var a=new B(0,0);a.setMag(5),a.setAngle(o),$(e,i.position,a),o+=n}}})),Z}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U(5,5),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=new z(R,t,n);return o.alias="enemy",o.layer="projectile",o.type="kaamakazi",o.health=1,o.healthCap=1,o.velocityCap=Math.round(5*Math.random()+1),o.disableCollisionDetection=!0,o.renderer=function(e){x.beginPath(),x.strokeStyle="white",x.fillStyle="white",x.save(),x.translate(e.position.x,e.position.y),x.rotate(e.velocity.getAngle()-Math.PI/2),x.arc(0,0,e.collider.radius,0,2*Math.PI),x.moveTo(-e.collider.radius,0),x.lineTo(0,3*-e.collider.radius),x.lineTo(e.collider.radius,0),x.fill(),x.restore()},o.addCollider({type:"circle",radius:10,uncolide:!0,computeBoundryCollision:!1,onCollision:function(e,t){"playerProjectile"===t.alias?(e.health-=t.damage||1,e.health<=0&&e.destroy()):"kaamakazi"===t.type&&(e.velocity=B.addition(e.velocity,U(1,1)))}}),timeOut.newTimeOut((function(){o.acceleration=new B(.5,0),o.disableCollisionDetection=!1,o.executables.unshift((function(t){var n=B.subtraction(e.position,t.position);t.acceleration.setAngle(n.getAngle())}))}),i),o}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,i=new z(R,t);return i.alias="enemy",i.layer="projectile",i.health=5,i.healthCap=5,i.addTimer("firerate",new N),i.firerate=n,i.renderer=function(t){var n=B.subtraction(e.position,t.position);t.shootDirection=n.getAngle(),x.beginPath(),x.strokeStyle="white",x.fillStyle="white",x.save(),x.translate(t.position.x,t.position.y),x.rotate(t.shootDirection-Math.PI/2),x.arc(0,0,t.collider.radius,0,2*Math.PI),x.fill(),x.moveTo(0,0),x.fillRect(-10,0,20,3*t.collider.radius/2),x.restore()},i.addCollider({type:"circle",radius:25,uncolide:!0,computeBoundryCollision:!0,onCollision:function(e,t){"playerProjectile"===t.alias&&(i.health-=t.damage||1,i.health<=0&&e.destroy())}}),i.executables.unshift((function(e){e.timers.firerate&&(e.timers.firerate.getDuration()>(e.firerate||250)&&(e.timers.firerate.reset(),new H(R,new B(e.position.x,e.position.y),5,e.shootDirection,10).alias="enemyProjectile"))})),i}function te(e){var t=360*Math.random()*Math.PI/180,n=M/2*Math.cos(t),i=M/2*Math.sin(t),o=new B(n,i),r=new z(R,o,new B(3*Math.random(),0));return r.alias="enemy",r.layer="projectile",r.health=3,r.healthCap=3,r.addTimer("firerate",new N),r.firerate=750,r.renderer=function(e){x.beginPath(),x.strokeStyle="white",x.fillStyle="white",x.save(),x.translate(e.position.x,e.position.y),x.rotate(e.velocity.getAngle()-Math.PI/2),x.arc(0,0,e.collider.radius,0,2*Math.PI),x.fill(),x.moveTo(-e.collider.radius,0),x.lineTo(-1.5*e.collider.radius,2.5*-e.collider.radius),x.moveTo(e.collider.radius,0),x.lineTo(1.5*e.collider.radius,2.5*-e.collider.radius),x.moveTo(0,-e.collider.radius),x.lineTo(0,3*-e.collider.radius),x.stroke(),x.restore()},r.addCollider({type:"circle",radius:25,uncolide:!0,computeBoundryCollision:!1,onCollision:function(e,t){"playerProjectile"===t.alias&&(r.health-=t.damage||1,r.health<=0&&e.destroy())}}),r.executables.unshift((function(t){var n=B.subtraction(e.position,t.position);(t.shootDirection=n.getAngle(),n.setMag(t.velocity.getMag()),t.velocity=n,t.timers.firerate)&&(t.timers.firerate.getDuration()>(t.firerate||250)&&(t.timers.firerate.reset(),new H(R,new B(t.position.x,t.position.y),5,n.getAngle(),7).alias="enemyProjectile"))})),r}function ne(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new B(0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:7,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"enemyProjectile",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=2*Math.PI/t,l=i,u=0;u<t;u++)new H(R,e,o,l,n,r,a),l+=s}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=new z(R,e,U(5,5));return o.layer="projectile",o.alias="enemy",o.type="xPloder",o.projectileCount=t,o.health=5,o.healthCap=5,o.addTimer("firerate",new N),o.firerate=i,o.renderer=Q,o.addCollider({type:"circle",radius:30,uncolide:!0,computeBoundryCollision:!0,onCollision:function(e,t){"playerProjectile"===t.alias&&(e.health-=t.damage||1,e.health<=0&&e.destroy())}}),o.executables.unshift((function(e){e.timers.firerate&&e.timers.firerate.getDuration()>(e.firerate||1e3)&&(e.timers.firerate.reset(),ne(o.position,o.projectileCount,n))})),o}function oe(e){if(!0===inputSystem.w?(e.velocity.setMag(5),!0===inputSystem.d?e.velocity.setAngle(Math.PI/4):!0===inputSystem.a?e.velocity.setAngle(Math.PI/4*3):e.velocity.setAngle(Math.PI/2)):!0===inputSystem.s?(e.velocity.setMag(5),!0===inputSystem.d?e.velocity.setAngle(-Math.PI/4):!0===inputSystem.a?e.velocity.setAngle(Math.PI/4*-3):e.velocity.setAngle(-Math.PI/2)):(e.velocity.setMag(5),!0===inputSystem.d?e.velocity.setAngle(0):!0===inputSystem.a&&e.velocity.setAngle(Math.PI)),inputSystem.w||inputSystem.s||inputSystem.a||inputSystem.d||(e.velocity.setMag(0),e.velocity=e.velocity.multiply(.5)),e.shootDirection=e.shootDirection||Math.PI/2,!0===inputSystem.up?!0===inputSystem.right?e.shootDirection=Math.PI/4:!0===inputSystem.left?e.shootDirection=Math.PI/4*3:e.shootDirection=Math.PI/2:!0===inputSystem.down?!0===inputSystem.right?e.shootDirection=-Math.PI/4:!0===inputSystem.left?e.shootDirection=Math.PI/4*-3:e.shootDirection=-Math.PI/2:!0===inputSystem.right?e.shootDirection=0:!0===inputSystem.left&&(e.shootDirection=Math.PI),inputSystem.up||inputSystem.down||inputSystem.left||inputSystem.right||(e.shootDirection=Math.PI/2),(inputSystem.up||inputSystem.down||inputSystem.left||inputSystem.right)&&e.timers.firerate&&e.timers.firerate.getDuration()>(e.firerate||250)){e.timers.firerate.reset();var t=new H(R,new B(e.position.x,e.position.y),10,e.shootDirection);t.alias="playerProjectile",t.damage=e.damage}!0===inputSystem.space&&e.timers.superrate.getDuration()>=e.superrate&&(ne(e.position,20,10,0,7,"playerProjectile",2*e.damage),e.timers.superrate.reset())}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B(0,O-50),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M-200,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["black","white"];x.save(),x.translate(t.x,t.y),x.beginPath(),x.fillStyle=i[0],x.fillRect(-n/2,-O/2,n,20),x.fillStyle=i[1];var o=n/e.healthCap,r=e.healthCap-e.health,a=n-r*o;x.fillRect(-n/2,-O/2,a,20),x.restore()}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index.html",t=new F(R,new B,(function(t){var n="https://google.com/"+e;x.save(),x.transform(1,0,0,-1,0,0),x.fillStyle="white",x.font="50px sans",x.fillText(n,-x.measureText(n).width/2,0),x.font="80px sans",t.triggerTransition&&(x.fillStyle="red",x.fillText("404",-x.measureText("404").width/2,90)),x.restore()}));t.triggerTransition=!1,t.onDestroy=function(){eventSystem.dispatchEvent("onIntroComplete")},timeOut.newTimeOut((function(){t.triggerTransition=!0,t.destroy(2e3)}),2e3)}function se(){var e=new z(R,new B(0,O/2));return e.layer="projectile",e.addCollider({type:"circle",radius:50,uncolide:!1,computeBoundryCollision:!1,onCollision:function(e,t){"player"===t.alias&&(e.destroy(),eventSystem.dispatchEvent("onLevelExit"))}}),e.renderer=function(e){x.save(),x.translate(e.position.x,e.position.y),x.beginPath(),x.fillStyle=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}(),x.arc(0,0,e.collider.radius,0,2*Math.PI),x.fill(),x.restore()},e}function le(e){var t=new z(R);t.alias="level",t.enemyCount=0,t.spawningComplete=!1,t.executables.push((function(n){nurdyStats3.innerHTML=t.enemyCount,n.spawningComplete&&n.enemyCount<=0&&(n.destroy(),timeOut.newTimeOut((function(){!function(e){var t=new z(R,U());t.alias="enemy",t.layer="projectile",t.health=175,t.healthCap=175,t.addTimer("firerate",new N),t.firerate=500,t.addTimer("movementRate",new N),t.movementRate=1e3,t.movementTick=!1,t.spread=30,t.projectilesPerShot=10,t.phase=1,t.executables.push(re),t.renderer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];x.save(),x.translate(e.position.x,e.position.y),x.beginPath(),x.fillStyle=t?"grey":"white",x.arc(0,0,e.collider.radius,0,2*Math.PI),x.fill(),x.restore()},t.addCollider({type:"circle",radius:50,uncolide:!0,computeBoundryCollision:!0,onCollision:function(e,n){"playerProjectile"===n.alias&&(t.health-=n.damage||1,e.health<=e.healthCap/2&&1===e.phase&&(e.projectilesPerShot=Math.round(1.5*e.projectilesPerShot),e.spread=2*e.spread,e.phase=2),t.health<=0&&(e.destroy(),eventSystem.dispatchEvent("onBossDeath")))}}),t.executables.unshift((function(t){if(t.timers.movementRate&&t.timers.movementRate.getDuration()>(t.movementRate||1e3)){if(t.timers.movementRate.reset(),!1===t.movementTick){var n=B.subtraction(e.position,t.position);n.setMag(5),t.velocity=n}else{t.velocity=new B;var i=B.subtraction(e.position,t.position);if(t.shootDirection=i.getAngle(),t.timers.firerate&&t.timers.firerate.getDuration()>(t.firerate||250)){t.timers.firerate.reset();for(var o=Math.PI/t.spread,r=0;r<t.projectilesPerShot;r++)new H(R,new B(t.position.x,t.position.y),5*Math.random()+4,i.getAngle()+o*r,10,"enemyProjectile");2===t.phase&&ne(t.position,t.projectilesPerShot)}}t.movementTick=!t.movementTick}}))}(e)}),2e3))}));var n=ee(e,new B(M/3,O/3));n.onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(-M/3,O/3))).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(M/3,-O/3))).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(-M/3,-O/3))).onDestroy=function(){return t.enemyCount--},t.enemyCount=4,interval.newInterval((function(){(n=te(e)).onDestroy=function(){return t.enemyCount--},(n=te(e)).onDestroy=function(){return t.enemyCount--},t.enemyCount+=2}),3e3,3,(function(){console.log("spawn complete"),t.spawningComplete=!0}))}function ue(e){var t=new z(R);t.alias="level",t.enemyCount=0,t.spawningComplete=0,t.executables.push((function(n){nurdyStats3.innerHTML=t.enemyCount,2===n.spawningComplete&&n.enemyCount<=0&&(n.destroy(),timeOut.newTimeOut((function(){Z(e)}),2e3))}));var n=ee(e,new B(0,75));n.onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(0,-75))).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(75,0))).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(-75,0))).onDestroy=function(){return t.enemyCount--},t.enemyCount=4,interval.newInterval((function(){for(var n=2*Math.PI/10,i=0,o=0;o<10;o++){var r=new B(0,0);r.setMag(5),r.setAngle(i),$(e,new B,r).onDestroy=function(){return t.enemyCount--},i+=n,t.enemyCount+=1}}),3e3,5,(function(){console.log("spawn complete"),t.spawningComplete++})),interval.newInterval((function(){(n=te(e)).onDestroy=function(){return t.enemyCount--},t.enemyCount+=1}),1e3,10,(function(){console.log("spawn complete"),t.spawningComplete++}))}function ce(e){var t=new z(R);t.alias="level",t.enemyCount=0,t.spawningComplete=0,t.executables.push((function(n){nurdyStats3.innerHTML=t.enemyCount,n.spawningComplete&&n.enemyCount<=0&&(n.destroy(),timeOut.newTimeOut((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=ie(new B,n,15,t);i.alias="enemy",i.layer="projectile",i.health=150,i.healthCap=150,i.executables.push(re),i.phase=1,i.flag=!1,i.velocity=U(1,1),i.projectileSpeed=4,i.addCollider({type:"circle",radius:35,uncolide:!0,computeBoundryCollision:!0,onCollision:function(e,t){"playerProjectile"===t.alias&&(e.health-=t.damage||1,e.health<=e.healthCap/2&&1===e.phase&&(e.projectileCount=Math.round(1.5*e.projectileCount),e.projectileSpeed=7,e.phase=2),e.health<=0&&(e.destroy(),R=R.filter((function(e,t){return"player"===e.alias})),eventSystem.dispatchEvent("onBossDeath")))}}),i.executables.unshift((function(t){if(t.timers.firerate&&t.timers.firerate.getDuration()>(t.firerate||1e3)){t.timers.firerate.reset();var n=B.subtraction(e.position,t.position).getAngle();ne(t.position,t.projectileCount,15,n,t.projectileSpeed)}}))}(e)}),2e3))}));var n=ee(e,new B(0,O/2.5),1e3);n.onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(M/2.5,O/2.5),1e3)).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(-M/2.5,O/2.5),1e3)).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(0,-O/2.5),1e3)).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(M/2.5,-O/2.5),1e3)).onDestroy=function(){return t.enemyCount--},(n=ee(e,new B(-M/2.5,-O/2.5),1e3)).onDestroy=function(){return t.enemyCount--},t.enemyCount=6,interval.newInterval((function(){}),3e3,5,(function(){console.log("spawn complete"),t.spawningComplete++})),interval.newInterval((function(){ie(U(),4,10).onDestroy=function(){return t.enemyCount--},t.enemyCount+=1}),1e3,5,(function(){console.log("spawn complete"),t.spawningComplete++}))}window.addEventListener("load",(function(){M=D.width=window.innerWidth,O=D.height=window.innerHeight,(x=D.getContext("2d")).translate(M/2,O/2),x.transform(1,0,0,-1,0,0),x.lineWidth=3,de(),he()})),window.addEventListener("keyup",(function(e){27==e.keyCode&&0==(T=!T)&&fe()}));var he=function(){x.fillStyle="black",x.fillRect(-M/2,-O/2,M,O)},fe=function(){T?(x.save(),x.scale(1,-1),x.fillStyle="white",x.font="50px impact",x.textAlign="center",x.fillText("PAUSED!",0,-100),x.restore(),cancelAnimationFrame(S)):S=requestAnimationFrame((function(e){A+=I=e-j,L=Math.round(A/1e3),halfSecond=Math.round(A/500),tenthOfSecond=Math.round(A/100),hundredthOfSecond=Math.round(A/10),E=k>0?60/k:1,k=Math.ceil(1e3/I),j=e,C.innerHTML="FPS: "+k+" , DeltaTime: "+Math.round(E),nurdyStats.innerHTML="Time: "+L,pe()}))},de=function(){window.addEventListener("onBossDeath",(function(){R=[P],eventSystem.dispatchEvent("onLevelComplete")})),window.addEventListener("onLevelComplete",(function(){timeOut.newTimeOut(se,1e3)})),window.addEventListener("onStartNextLevel",(function(){_.shift(),_.length<=0?eventSystem.dispatchEvent("onGameComplete"):ae(_[0].route)})),window.addEventListener("onIntroComplete",(function(){timeOut.newTimeOut((function(){P?R=[P]:P=X(),_[0].level(P)}),1e3)})),window.addEventListener("onOutroComplete",(function(){timeOut.newTimeOut((function(){eventSystem.dispatchEvent("onStartNextLevel")}),1e3)})),window.addEventListener("onLevelExit",(function(){P&&(P.position=new B(0,-O/3)),R.length=0,timeOut.newTimeOut((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index.html",t=new F(R,new B,(function(t){var n="https://google.com/"+e;x.save(),x.transform(1,0,0,-1,0,0),x.fillStyle="white",x.font="50px sans",x.fillText(n,-x.measureText(n).width/2,0),x.font="80px sans",t.triggerTransition?(x.fillStyle="green",x.fillText("200",-x.measureText("200").width/2,90)):(x.fillStyle="red",x.fillText("404",-x.measureText("404").width/2,90)),x.restore()}));t.triggerTransition=!1,t.onDestroy=function(){eventSystem.dispatchEvent("onOutroComplete")},timeOut.newTimeOut((function(){t.triggerTransition=!0,t.destroy(2e3)}),2e3)}(_[0].route)}),1e3)})),window.addEventListener("onPlayerDeath",(function(){P=X(),R.length=0,function(){if(R.length=0,interval.intervalArray=[],timeOut.timeOutArray=[],lives<=0)new F(R,new B,(function(e){x.save(),x.transform(1,0,0,-1,0,0),x.fillStyle="white",x.strokeStyle="white",x.font="80px sans",x.fillText("GAME OVER!!!",-x.measureText("GAME OVER!!!").width/2,0),x.restore()}));else{var e=new F(R,new B,(function(e){for(var t=new B(-150,0),n=0;n<lives;n++)x.save(),x.translate(t.x,t.y),x.beginPath(),x.fillStyle="red",x.arc(0,0,25,0,2*Math.PI),x.arc(40,0,25,0,2*Math.PI),x.fill(),x.rotate(Math.PI/4),x.fillRect(-25,-53,50,50),x.restore(),t.x=t.x+150}));e.triggerTransition=!1,e.onDestroy=function(){eventSystem.dispatchEvent("onLevelRestart")},timeOut.newTimeOut((function(){lives--,timeOut.newTimeOut((function(){e.destroy(1e3)}),2e3)}),2e3)}}()})),window.addEventListener("onLevelRestart",(function(){ae(_[0].route)})),window.addEventListener("onGameComplete",(function(){R.length=0,D.hidden=!0,T=!0,gameComplete=!0,eventSystem.dispatchEvent("onShowEndGameScene")})),window.addEventListener("onTutorialComplete",(function(){P.position=new B(0,0),eventSystem.dispatchEvent("onStartNextLevel")})),window.addEventListener("onGameStart",(function(){ye()}))},ye=function(){var e;console.log("begin animation!"),_=[{level:function(){},route:"tutorial"},{level:le,route:"index.html"},{level:ue,route:"cats.jpg"},{level:ce,route:"download-free-ram.php"}],e=new F(R,new B,(function(e){x.save(),x.transform(1,0,0,-1,0,0),x.fillStyle="white",x.strokeStyle="white",x.font="30px sans",x.beginPath(),x.translate(-M/3,-100),x.fillText("Movement",0,0),x.beginPath(),x.translate(0,50),x.fillText("W  : Up",0,0),x.beginPath(),x.translate(0,50),x.fillText("S  : Down",0,0),x.beginPath(),x.translate(0,50),x.fillText("A  : Left",0,0),x.beginPath(),x.translate(0,50),x.fillText("D  : Right",0,0),x.restore(),x.save(),x.transform(1,0,0,-1,0,0),x.fillStyle="white",x.strokeStyle="white",x.font="30px sans",x.beginPath(),x.translate(M/5,-100),x.fillText("Shoot",0,0),x.beginPath(),x.translate(0,50),x.fillText("↑  : Up",0,0),x.beginPath(),x.translate(0,50),x.fillText("↓  : Down",0,0),x.beginPath(),x.translate(0,50),x.fillText("←  : Left",0,0),x.beginPath(),x.translate(0,50),x.fillText("→  : Right",0,0),x.restore(),x.save(),x.transform(1,0,0,-1,0,0),x.fillStyle="white",x.strokeStyle="white",x.font="30px sans",x.beginPath(),x.translate(0,0),x.fillText("Space : Super",-x.measureText("Space. : Super").width/2,0),x.beginPath(),x.translate(0,-O/2+100),x.fillText("Exit",-x.measureText("Exit").width/2,0),x.restore()})),se().collider.onCollision=function(t,n){"player"===n.alias&&(t.destroy(),e.destroy(),n.positon=new B(0,0),eventSystem.dispatchEvent("onTutorialComplete"))},P=X(),fe()},pe=function(){timeOut&&timeOut.update(),interval&&interval.update(),he(),R.forEach((function(e,t){e.executeScripts()})),nurdyStats2.innerHTML=R.length,fe()}}]);